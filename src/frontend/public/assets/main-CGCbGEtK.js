function xX(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function Ea(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var aj={exports:{}},Sm={};var RO;function yX(){if(RO)return Sm;RO=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var c in a)c!=="key"&&(i[c]=a[c])}else i=a;return a=i.ref,{$$typeof:e,type:n,key:o,ref:a!==void 0?a:null,props:i}}return Sm.Fragment=t,Sm.jsx=r,Sm.jsxs=r,Sm}var DO;function vX(){return DO||(DO=1,aj.exports=yX()),aj.exports}var s=vX(),ij={exports:{}},Ye={};var IO;function bX(){if(IO)return Ye;IO=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),h=Symbol.for("react.activity"),g=Symbol.iterator;function x(B){return B===null||typeof B!="object"?null:(B=g&&B[g]||B["@@iterator"],typeof B=="function"?B:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,j={};function N(B,V,ee){this.props=B,this.context=V,this.refs=j,this.updater=ee||w}N.prototype.isReactComponent={},N.prototype.setState=function(B,V){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,V,"setState")},N.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function _(){}_.prototype=N.prototype;function S(B,V,ee){this.props=B,this.context=V,this.refs=j,this.updater=ee||w}var k=S.prototype=new _;k.constructor=S,b(k,N.prototype),k.isPureReactComponent=!0;var A=Array.isArray;function T(){}var O={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function R(B,V,ee){var ae=ee.ref;return{$$typeof:e,type:B,key:V,ref:ae!==void 0?ae:null,props:ee}}function M(B,V){return R(B.type,V,B.props)}function D(B){return typeof B=="object"&&B!==null&&B.$$typeof===e}function z(B){var V={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ee){return V[ee]})}var Y=/\/+/g;function I(B,V){return typeof B=="object"&&B!==null&&B.key!=null?z(""+B.key):V.toString(36)}function K(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(T,T):(B.status="pending",B.then(function(V){B.status==="pending"&&(B.status="fulfilled",B.value=V)},function(V){B.status==="pending"&&(B.status="rejected",B.reason=V)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function U(B,V,ee,ae,J){var se=typeof B;(se==="undefined"||se==="boolean")&&(B=null);var ne=!1;if(B===null)ne=!0;else switch(se){case"bigint":case"string":case"number":ne=!0;break;case"object":switch(B.$$typeof){case e:case t:ne=!0;break;case m:return ne=B._init,U(ne(B._payload),V,ee,ae,J)}}if(ne)return J=J(B),ne=ae===""?"."+I(B,0):ae,A(J)?(ee="",ne!=null&&(ee=ne.replace(Y,"$&/")+"/"),U(J,V,ee,"",function(pe){return pe})):J!=null&&(D(J)&&(J=M(J,ee+(J.key==null||B&&B.key===J.key?"":(""+J.key).replace(Y,"$&/")+"/")+ne)),V.push(J)),1;ne=0;var oe=ae===""?".":ae+":";if(A(B))for(var Q=0;Q<B.length;Q++)ae=B[Q],se=oe+I(ae,Q),ne+=U(ae,V,ee,se,J);else if(Q=x(B),typeof Q=="function")for(B=Q.call(B),Q=0;!(ae=B.next()).done;)ae=ae.value,se=oe+I(ae,Q++),ne+=U(ae,V,ee,se,J);else if(se==="object"){if(typeof B.then=="function")return U(K(B),V,ee,ae,J);throw V=String(B),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ne}function L(B,V,ee){if(B==null)return B;var ae=[],J=0;return U(B,ae,"","",function(se){return V.call(ee,se,J++)}),ae}function F(B){if(B._status===-1){var V=B._result;V=V(),V.then(function(ee){(B._status===0||B._status===-1)&&(B._status=1,B._result=ee)},function(ee){(B._status===0||B._status===-1)&&(B._status=2,B._result=ee)}),B._status===-1&&(B._status=0,B._result=V)}if(B._status===1)return B._result.default;throw B._result}var q=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},Z={map:L,forEach:function(B,V,ee){L(B,function(){V.apply(this,arguments)},ee)},count:function(B){var V=0;return L(B,function(){V++}),V},toArray:function(B){return L(B,function(V){return V})||[]},only:function(B){if(!D(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return Ye.Activity=h,Ye.Children=Z,Ye.Component=N,Ye.Fragment=r,Ye.Profiler=a,Ye.PureComponent=S,Ye.StrictMode=n,Ye.Suspense=d,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,Ye.__COMPILER_RUNTIME={__proto__:null,c:function(B){return O.H.useMemoCache(B)}},Ye.cache=function(B){return function(){return B.apply(null,arguments)}},Ye.cacheSignal=function(){return null},Ye.cloneElement=function(B,V,ee){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var ae=b({},B.props),J=B.key;if(V!=null)for(se in V.key!==void 0&&(J=""+V.key),V)!P.call(V,se)||se==="key"||se==="__self"||se==="__source"||se==="ref"&&V.ref===void 0||(ae[se]=V[se]);var se=arguments.length-2;if(se===1)ae.children=ee;else if(1<se){for(var ne=Array(se),oe=0;oe<se;oe++)ne[oe]=arguments[oe+2];ae.children=ne}return R(B.type,J,ae)},Ye.createContext=function(B){return B={$$typeof:o,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:i,_context:B},B},Ye.createElement=function(B,V,ee){var ae,J={},se=null;if(V!=null)for(ae in V.key!==void 0&&(se=""+V.key),V)P.call(V,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(J[ae]=V[ae]);var ne=arguments.length-2;if(ne===1)J.children=ee;else if(1<ne){for(var oe=Array(ne),Q=0;Q<ne;Q++)oe[Q]=arguments[Q+2];J.children=oe}if(B&&B.defaultProps)for(ae in ne=B.defaultProps,ne)J[ae]===void 0&&(J[ae]=ne[ae]);return R(B,se,J)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(B){return{$$typeof:c,render:B}},Ye.isValidElement=D,Ye.lazy=function(B){return{$$typeof:m,_payload:{_status:-1,_result:B},_init:F}},Ye.memo=function(B,V){return{$$typeof:f,type:B,compare:V===void 0?null:V}},Ye.startTransition=function(B){var V=O.T,ee={};O.T=ee;try{var ae=B(),J=O.S;J!==null&&J(ee,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(T,q)}catch(se){q(se)}finally{V!==null&&ee.types!==null&&(V.types=ee.types),O.T=V}},Ye.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},Ye.use=function(B){return O.H.use(B)},Ye.useActionState=function(B,V,ee){return O.H.useActionState(B,V,ee)},Ye.useCallback=function(B,V){return O.H.useCallback(B,V)},Ye.useContext=function(B){return O.H.useContext(B)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(B,V){return O.H.useDeferredValue(B,V)},Ye.useEffect=function(B,V){return O.H.useEffect(B,V)},Ye.useEffectEvent=function(B){return O.H.useEffectEvent(B)},Ye.useId=function(){return O.H.useId()},Ye.useImperativeHandle=function(B,V,ee){return O.H.useImperativeHandle(B,V,ee)},Ye.useInsertionEffect=function(B,V){return O.H.useInsertionEffect(B,V)},Ye.useLayoutEffect=function(B,V){return O.H.useLayoutEffect(B,V)},Ye.useMemo=function(B,V){return O.H.useMemo(B,V)},Ye.useOptimistic=function(B,V){return O.H.useOptimistic(B,V)},Ye.useReducer=function(B,V,ee){return O.H.useReducer(B,V,ee)},Ye.useRef=function(B){return O.H.useRef(B)},Ye.useState=function(B){return O.H.useState(B)},Ye.useSyncExternalStore=function(B,V,ee){return O.H.useSyncExternalStore(B,V,ee)},Ye.useTransition=function(){return O.H.useTransition()},Ye.version="19.2.4",Ye}var LO;function ef(){return LO||(LO=1,ij.exports=bX()),ij.exports}var y=ef();const En=Ea(y),sb=xX({__proto__:null,default:En},[y]);var oj={exports:{}},_m={},lj={exports:{}},cj={};var $O;function wX(){return $O||($O=1,(function(e){function t(U,L){var F=U.length;U.push(L);e:for(;0<F;){var q=F-1>>>1,Z=U[q];if(0<a(Z,L))U[q]=L,U[F]=Z,F=q;else break e}}function r(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var L=U[0],F=U.pop();if(F!==L){U[0]=F;e:for(var q=0,Z=U.length,B=Z>>>1;q<B;){var V=2*(q+1)-1,ee=U[V],ae=V+1,J=U[ae];if(0>a(ee,F))ae<Z&&0>a(J,ee)?(U[q]=J,U[ae]=F,q=ae):(U[q]=ee,U[V]=F,q=V);else if(ae<Z&&0>a(J,F))U[q]=J,U[ae]=F,q=ae;else break e}}return L}function a(U,L){var F=U.sortIndex-L.sortIndex;return F!==0?F:U.id-L.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var d=[],f=[],m=1,h=null,g=3,x=!1,w=!1,b=!1,j=!1,N=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function k(U){for(var L=r(f);L!==null;){if(L.callback===null)n(f);else if(L.startTime<=U)n(f),L.sortIndex=L.expirationTime,t(d,L);else break;L=r(f)}}function A(U){if(b=!1,k(U),!w)if(r(d)!==null)w=!0,T||(T=!0,z());else{var L=r(f);L!==null&&K(A,L.startTime-U)}}var T=!1,O=-1,P=5,R=-1;function M(){return j?!0:!(e.unstable_now()-R<P)}function D(){if(j=!1,T){var U=e.unstable_now();R=U;var L=!0;try{e:{w=!1,b&&(b=!1,_(O),O=-1),x=!0;var F=g;try{t:{for(k(U),h=r(d);h!==null&&!(h.expirationTime>U&&M());){var q=h.callback;if(typeof q=="function"){h.callback=null,g=h.priorityLevel;var Z=q(h.expirationTime<=U);if(U=e.unstable_now(),typeof Z=="function"){h.callback=Z,k(U),L=!0;break t}h===r(d)&&n(d),k(U)}else n(d);h=r(d)}if(h!==null)L=!0;else{var B=r(f);B!==null&&K(A,B.startTime-U),L=!1}}break e}finally{h=null,g=F,x=!1}L=void 0}}finally{L?z():T=!1}}}var z;if(typeof S=="function")z=function(){S(D)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,I=Y.port2;Y.port1.onmessage=D,z=function(){I.postMessage(null)}}else z=function(){N(D,0)};function K(U,L){O=N(function(){U(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(U){switch(g){case 1:case 2:case 3:var L=3;break;default:L=g}var F=g;g=L;try{return U()}finally{g=F}},e.unstable_requestPaint=function(){j=!0},e.unstable_runWithPriority=function(U,L){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var F=g;g=U;try{return L()}finally{g=F}},e.unstable_scheduleCallback=function(U,L,F){var q=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?q+F:q):F=q,U){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=F+Z,U={id:m++,callback:L,priorityLevel:U,startTime:F,expirationTime:Z,sortIndex:-1},F>q?(U.sortIndex=F,t(f,U),r(d)===null&&U===r(f)&&(b?(_(O),O=-1):b=!0,K(A,F-q))):(U.sortIndex=Z,t(d,U),w||x||(w=!0,T||(T=!0,z()))),U},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(U){var L=g;return function(){var F=g;g=L;try{return U.apply(this,arguments)}finally{g=F}}}})(cj)),cj}var zO;function jX(){return zO||(zO=1,lj.exports=wX()),lj.exports}var uj={exports:{}},xn={};var UO;function NX(){if(UO)return xn;UO=1;var e=ef();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(d,f,m){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:d,containerInfo:f,implementation:m}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,xn.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return i(d,f,null,m)},xn.flushSync=function(d){var f=o.T,m=n.p;try{if(o.T=null,n.p=2,d)return d()}finally{o.T=f,n.p=m,n.d.f()}},xn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(d,f))},xn.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},xn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,h=c(m,f.crossOrigin),g=typeof f.integrity=="string"?f.integrity:void 0,x=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?n.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:h,integrity:g,fetchPriority:x}):m==="script"&&n.d.X(d,{crossOrigin:h,integrity:g,fetchPriority:x,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},xn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=c(f.as,f.crossOrigin);n.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(d)},xn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,h=c(m,f.crossOrigin);n.d.L(d,m,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},xn.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=c(f.as,f.crossOrigin);n.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(d)},xn.requestFormReset=function(d){n.d.r(d)},xn.unstable_batchedUpdates=function(d,f){return d(f)},xn.useFormState=function(d,f,m){return o.H.useFormState(d,f,m)},xn.useFormStatus=function(){return o.H.useHostTransitionStatus()},xn.version="19.2.4",xn}var FO;function r6(){if(FO)return uj.exports;FO=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),uj.exports=NX(),uj.exports}var BO;function SX(){if(BO)return _m;BO=1;var e=jX(),t=ef(),r=r6();function n(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function i(l){var u=l,p=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(p=u.return),l=u.return;while(l)}return u.tag===3?p:null}function o(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function c(l){if(l.tag===31){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function d(l){if(i(l)!==l)throw Error(n(188))}function f(l){var u=l.alternate;if(!u){if(u=i(l),u===null)throw Error(n(188));return u!==l?null:l}for(var p=l,v=u;;){var C=p.return;if(C===null)break;var E=C.alternate;if(E===null){if(v=C.return,v!==null){p=v;continue}break}if(C.child===E.child){for(E=C.child;E;){if(E===p)return d(C),l;if(E===v)return d(C),u;E=E.sibling}throw Error(n(188))}if(p.return!==v.return)p=C,v=E;else{for(var $=!1,W=C.child;W;){if(W===p){$=!0,p=C,v=E;break}if(W===v){$=!0,v=C,p=E;break}W=W.sibling}if(!$){for(W=E.child;W;){if(W===p){$=!0,p=E,v=C;break}if(W===v){$=!0,v=E,p=C;break}W=W.sibling}if(!$)throw Error(n(189))}}if(p.alternate!==v)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?l:u}function m(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=m(l),u!==null)return u;l=l.sibling}return null}var h=Object.assign,g=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),S=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function z(l){return l===null||typeof l!="object"?null:(l=D&&l[D]||l["@@iterator"],typeof l=="function"?l:null)}var Y=Symbol.for("react.client.reference");function I(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===Y?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case b:return"Fragment";case N:return"Profiler";case j:return"StrictMode";case A:return"Suspense";case T:return"SuspenseList";case R:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case w:return"Portal";case S:return l.displayName||"Context";case _:return(l._context.displayName||"Context")+".Consumer";case k:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case O:return u=l.displayName||null,u!==null?u:I(l.type)||"Memo";case P:u=l._payload,l=l._init;try{return I(l(u))}catch{}}return null}var K=Array.isArray,U=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},q=[],Z=-1;function B(l){return{current:l}}function V(l){0>Z||(l.current=q[Z],q[Z]=null,Z--)}function ee(l,u){Z++,q[Z]=l.current,l.current=u}var ae=B(null),J=B(null),se=B(null),ne=B(null);function oe(l,u){switch(ee(se,u),ee(J,l),ee(ae,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?nO(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=nO(u),l=sO(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}V(ae),ee(ae,l)}function Q(){V(ae),V(J),V(se)}function pe(l){l.memoizedState!==null&&ee(ne,l);var u=ae.current,p=sO(u,l.type);u!==p&&(ee(J,l),ee(ae,p))}function he(l){J.current===l&&(V(ae),V(J)),ne.current===l&&(V(ne),bm._currentValue=F)}var te,we;function ke(l){if(te===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);te=u&&u[1]||"",we=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+te+l+we}var Ve=!1;function Be(l,u){if(!l||Ve)return"";Ve=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var v={DetermineComponentFrameRoot:function(){try{if(u){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(xe){var me=xe}Reflect.construct(l,[],Se)}else{try{Se.call()}catch(xe){me=xe}l.call(Se.prototype)}}else{try{throw Error()}catch(xe){me=xe}(Se=l())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(xe){if(xe&&me&&typeof xe.stack=="string")return[xe.stack,me.stack]}return[null,null]}};v.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(v.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(v.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=v.DetermineComponentFrameRoot(),$=E[0],W=E[1];if($&&W){var re=$.split(`
`),de=W.split(`
`);for(C=v=0;v<re.length&&!re[v].includes("DetermineComponentFrameRoot");)v++;for(;C<de.length&&!de[C].includes("DetermineComponentFrameRoot");)C++;if(v===re.length||C===de.length)for(v=re.length-1,C=de.length-1;1<=v&&0<=C&&re[v]!==de[C];)C--;for(;1<=v&&0<=C;v--,C--)if(re[v]!==de[C]){if(v!==1||C!==1)do if(v--,C--,0>C||re[v]!==de[C]){var be=`
`+re[v].replace(" at new "," at ");return l.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",l.displayName)),be}while(1<=v&&0<=C);break}}}finally{Ve=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?ke(p):""}function rt(l,u){switch(l.tag){case 26:case 27:case 5:return ke(l.type);case 16:return ke("Lazy");case 13:return l.child!==u&&u!==null?ke("Suspense Fallback"):ke("Suspense");case 19:return ke("SuspenseList");case 0:case 15:return Be(l.type,!1);case 11:return Be(l.type.render,!1);case 1:return Be(l.type,!0);case 31:return ke("Activity");default:return""}}function Pr(l){try{var u="",p=null;do u+=rt(l,p),p=l,l=l.return;while(l);return u}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}var hr=Object.prototype.hasOwnProperty,pn=e.unstable_scheduleCallback,Dn=e.unstable_cancelCallback,Ns=e.unstable_shouldYield,Ss=e.unstable_requestPaint,nr=e.unstable_now,_s=e.unstable_getCurrentPriorityLevel,ge=e.unstable_ImmediatePriority,Fe=e.unstable_UserBlockingPriority,nt=e.unstable_NormalPriority,it=e.unstable_LowPriority,_n=e.unstable_IdlePriority,Ra=e.log,_e=e.unstable_setDisableYieldValue,pt=null,Je=null;function wr(l){if(typeof Ra=="function"&&_e(l),Je&&typeof Je.setStrictMode=="function")try{Je.setStrictMode(pt,l)}catch{}}var sr=Math.clz32?Math.clz32:G0,So=Math.log,_o=Math.LN2;function G0(l){return l>>>=0,l===0?32:31-(So(l)/_o|0)|0}var lu=256,cu=262144,uu=4194304;function hi(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function du(l,u,p){var v=l.pendingLanes;if(v===0)return 0;var C=0,E=l.suspendedLanes,$=l.pingedLanes;l=l.warmLanes;var W=v&134217727;return W!==0?(v=W&~E,v!==0?C=hi(v):($&=W,$!==0?C=hi($):p||(p=W&~l,p!==0&&(C=hi(p))))):(W=v&~E,W!==0?C=hi(W):$!==0?C=hi($):p||(p=v&~l,p!==0&&(C=hi(p)))),C===0?0:u!==0&&u!==C&&(u&E)===0&&(E=C&-C,p=u&-u,E>=p||E===32&&(p&4194048)!==0)?u:C}function Il(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function W0(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Up(){var l=uu;return uu<<=1,(uu&62914560)===0&&(uu=4194304),l}function Of(l){for(var u=[],p=0;31>p;p++)u.push(l);return u}function Ll(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Q0(l,u,p,v,C,E){var $=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var W=l.entanglements,re=l.expirationTimes,de=l.hiddenUpdates;for(p=$&~p;0<p;){var be=31-sr(p),Se=1<<be;W[be]=0,re[be]=-1;var me=de[be];if(me!==null)for(de[be]=null,be=0;be<me.length;be++){var xe=me[be];xe!==null&&(xe.lane&=-536870913)}p&=~Se}v!==0&&Fp(l,v,0),E!==0&&C===0&&l.tag!==0&&(l.suspendedLanes|=E&~($&~u))}function Fp(l,u,p){l.pendingLanes|=u,l.suspendedLanes&=~u;var v=31-sr(u);l.entangledLanes|=u,l.entanglements[v]=l.entanglements[v]|1073741824|p&261930}function Bp(l,u){var p=l.entangledLanes|=u;for(l=l.entanglements;p;){var v=31-sr(p),C=1<<v;C&u|l[v]&u&&(l[v]|=u),p&=~C}}function qp(l,u){var p=u&-u;return p=(p&42)!==0?1:Pf(p),(p&(l.suspendedLanes|u))!==0?0:p}function Pf(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Mf(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Vp(){var l=L.p;return l!==0?l:(l=window.event,l===void 0?32:kO(l.type))}function Kp(l,u){var p=L.p;try{return L.p=l,u()}finally{L.p=p}}var Da=Math.random().toString(36).slice(2),Mr="__reactFiber$"+Da,gn="__reactProps$"+Da,pi="__reactContainer$"+Da,fu="__reactEvents$"+Da,Hp="__reactListeners$"+Da,Y0="__reactHandles$"+Da,Gp="__reactResources$"+Da,$l="__reactMarker$"+Da;function Rf(l){delete l[Mr],delete l[gn],delete l[fu],delete l[Hp],delete l[Y0]}function Co(l){var u=l[Mr];if(u)return u;for(var p=l.parentNode;p;){if(u=p[pi]||p[Mr]){if(p=u.alternate,u.child!==null||p!==null&&p.child!==null)for(l=dO(l);l!==null;){if(p=l[Mr])return p;l=dO(l)}return u}l=p,p=l.parentNode}return null}function ko(l){if(l=l[Mr]||l[pi]){var u=l.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return l}return null}function Eo(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(n(33))}function Ao(l){var u=l[Gp];return u||(u=l[Gp]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function jr(l){l[$l]=!0}var Wp=new Set,Qp={};function gi(l,u){To(l,u),To(l+"Capture",u)}function To(l,u){for(Qp[l]=u,l=0;l<u.length;l++)Wp.add(u[l])}var X0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Df={},Yp={};function Z0(l){return hr.call(Yp,l)?!0:hr.call(Df,l)?!1:X0.test(l)?Yp[l]=!0:(Df[l]=!0,!1)}function mu(l,u,p){if(Z0(u))if(p===null)l.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var v=u.toLowerCase().slice(0,5);if(v!=="data-"&&v!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+p)}}function hu(l,u,p){if(p===null)l.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+p)}}function Js(l,u,p,v){if(v===null)l.removeAttribute(p);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(u,p,""+v)}}function In(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Xp(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function J0(l,u,p){var v=Object.getOwnPropertyDescriptor(l.constructor.prototype,u);if(!l.hasOwnProperty(u)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var C=v.get,E=v.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return C.call(this)},set:function($){p=""+$,E.call(this,$)}}),Object.defineProperty(l,u,{enumerable:v.enumerable}),{getValue:function(){return p},setValue:function($){p=""+$},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function pu(l){if(!l._valueTracker){var u=Xp(l)?"checked":"value";l._valueTracker=J0(l,u,""+l[u])}}function Zp(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var p=u.getValue(),v="";return l&&(v=Xp(l)?l.checked?"true":"false":l.value),l=v,l!==p?(u.setValue(l),!0):!1}function zl(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var ew=/[\n"\\]/g;function Ln(l){return l.replace(ew,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Ul(l,u,p,v,C,E,$,W){l.name="",$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?l.type=$:l.removeAttribute("type"),u!=null?$==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+In(u)):l.value!==""+In(u)&&(l.value=""+In(u)):$!=="submit"&&$!=="reset"||l.removeAttribute("value"),u!=null?If(l,$,In(u)):p!=null?If(l,$,In(p)):v!=null&&l.removeAttribute("value"),C==null&&E!=null&&(l.defaultChecked=!!E),C!=null&&(l.checked=C&&typeof C!="function"&&typeof C!="symbol"),W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?l.name=""+In(W):l.removeAttribute("name")}function Jp(l,u,p,v,C,E,$,W){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(l.type=E),u!=null||p!=null){if(!(E!=="submit"&&E!=="reset"||u!=null)){pu(l);return}p=p!=null?""+In(p):"",u=u!=null?""+In(u):p,W||u===l.value||(l.value=u),l.defaultValue=u}v=v??C,v=typeof v!="function"&&typeof v!="symbol"&&!!v,l.checked=W?l.checked:!!v,l.defaultChecked=!!v,$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(l.name=$),pu(l)}function If(l,u,p){u==="number"&&zl(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function xi(l,u,p,v){if(l=l.options,u){u={};for(var C=0;C<p.length;C++)u["$"+p[C]]=!0;for(p=0;p<l.length;p++)C=u.hasOwnProperty("$"+l[p].value),l[p].selected!==C&&(l[p].selected=C),C&&v&&(l[p].defaultSelected=!0)}else{for(p=""+In(p),u=null,C=0;C<l.length;C++){if(l[C].value===p){l[C].selected=!0,v&&(l[C].defaultSelected=!0);return}u!==null||l[C].disabled||(u=l[C])}u!==null&&(u.selected=!0)}}function ZA(l,u,p){if(u!=null&&(u=""+In(u),u!==l.value&&(l.value=u),p==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=p!=null?""+In(p):""}function JA(l,u,p,v){if(u==null){if(v!=null){if(p!=null)throw Error(n(92));if(K(v)){if(1<v.length)throw Error(n(93));v=v[0]}p=v}p==null&&(p=""),u=p}p=In(u),l.defaultValue=p,v=l.textContent,v===p&&v!==""&&v!==null&&(l.value=v),pu(l)}function gu(l,u){if(u){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=u;return}}l.textContent=u}var fQ=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function e5(l,u,p){var v=u.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?v?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":v?l.setProperty(u,p):typeof p!="number"||p===0||fQ.has(u)?u==="float"?l.cssFloat=p:l[u]=(""+p).trim():l[u]=p+"px"}function t5(l,u,p){if(u!=null&&typeof u!="object")throw Error(n(62));if(l=l.style,p!=null){for(var v in p)!p.hasOwnProperty(v)||u!=null&&u.hasOwnProperty(v)||(v.indexOf("--")===0?l.setProperty(v,""):v==="float"?l.cssFloat="":l[v]="");for(var C in u)v=u[C],u.hasOwnProperty(C)&&p[C]!==v&&e5(l,C,v)}else for(var E in u)u.hasOwnProperty(E)&&e5(l,E,u[E])}function tw(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mQ=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hQ=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function eg(l){return hQ.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function yi(){}var rw=null;function nw(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var xu=null,yu=null;function r5(l){var u=ko(l);if(u&&(l=u.stateNode)){var p=l[gn]||null;e:switch(l=u.stateNode,u.type){case"input":if(Ul(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),u=p.name,p.type==="radio"&&u!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+Ln(""+u)+'"][type="radio"]'),u=0;u<p.length;u++){var v=p[u];if(v!==l&&v.form===l.form){var C=v[gn]||null;if(!C)throw Error(n(90));Ul(v,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(u=0;u<p.length;u++)v=p[u],v.form===l.form&&Zp(v)}break e;case"textarea":ZA(l,p.value,p.defaultValue);break e;case"select":u=p.value,u!=null&&xi(l,!!p.multiple,u,!1)}}}var sw=!1;function n5(l,u,p){if(sw)return l(u,p);sw=!0;try{var v=l(u);return v}finally{if(sw=!1,(xu!==null||yu!==null)&&(Fg(),xu&&(u=xu,l=yu,yu=xu=null,r5(u),l)))for(u=0;u<l.length;u++)r5(l[u])}}function Lf(l,u){var p=l.stateNode;if(p===null)return null;var v=p[gn]||null;if(v===null)return null;p=v[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(v=!v.disabled)||(l=l.type,v=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!v;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(n(231,u,typeof p));return p}var vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),aw=!1;if(vi)try{var $f={};Object.defineProperty($f,"passive",{get:function(){aw=!0}}),window.addEventListener("test",$f,$f),window.removeEventListener("test",$f,$f)}catch{aw=!1}var Oo=null,iw=null,tg=null;function s5(){if(tg)return tg;var l,u=iw,p=u.length,v,C="value"in Oo?Oo.value:Oo.textContent,E=C.length;for(l=0;l<p&&u[l]===C[l];l++);var $=p-l;for(v=1;v<=$&&u[p-v]===C[E-v];v++);return tg=C.slice(l,1<v?1-v:void 0)}function rg(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function ng(){return!0}function a5(){return!1}function $n(l){function u(p,v,C,E,$){this._reactName=p,this._targetInst=C,this.type=v,this.nativeEvent=E,this.target=$,this.currentTarget=null;for(var W in l)l.hasOwnProperty(W)&&(p=l[W],this[W]=p?p(E):E[W]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?ng:a5,this.isPropagationStopped=a5,this}return h(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=ng)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=ng)},persist:function(){},isPersistent:ng}),u}var Fl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sg=$n(Fl),zf=h({},Fl,{view:0,detail:0}),pQ=$n(zf),ow,lw,Uf,ag=h({},zf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uw,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Uf&&(Uf&&l.type==="mousemove"?(ow=l.screenX-Uf.screenX,lw=l.screenY-Uf.screenY):lw=ow=0,Uf=l),ow)},movementY:function(l){return"movementY"in l?l.movementY:lw}}),i5=$n(ag),gQ=h({},ag,{dataTransfer:0}),xQ=$n(gQ),yQ=h({},zf,{relatedTarget:0}),cw=$n(yQ),vQ=h({},Fl,{animationName:0,elapsedTime:0,pseudoElement:0}),bQ=$n(vQ),wQ=h({},Fl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),jQ=$n(wQ),NQ=h({},Fl,{data:0}),o5=$n(NQ),SQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_Q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kQ(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=CQ[l])?!!u[l]:!1}function uw(){return kQ}var EQ=h({},zf,{key:function(l){if(l.key){var u=SQ[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=rg(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?_Q[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uw,charCode:function(l){return l.type==="keypress"?rg(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?rg(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),AQ=$n(EQ),TQ=h({},ag,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),l5=$n(TQ),OQ=h({},zf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uw}),PQ=$n(OQ),MQ=h({},Fl,{propertyName:0,elapsedTime:0,pseudoElement:0}),RQ=$n(MQ),DQ=h({},ag,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),IQ=$n(DQ),LQ=h({},Fl,{newState:0,oldState:0}),$Q=$n(LQ),zQ=[9,13,27,32],dw=vi&&"CompositionEvent"in window,Ff=null;vi&&"documentMode"in document&&(Ff=document.documentMode);var UQ=vi&&"TextEvent"in window&&!Ff,c5=vi&&(!dw||Ff&&8<Ff&&11>=Ff),u5=" ",d5=!1;function f5(l,u){switch(l){case"keyup":return zQ.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function m5(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var vu=!1;function FQ(l,u){switch(l){case"compositionend":return m5(u);case"keypress":return u.which!==32?null:(d5=!0,u5);case"textInput":return l=u.data,l===u5&&d5?null:l;default:return null}}function BQ(l,u){if(vu)return l==="compositionend"||!dw&&f5(l,u)?(l=s5(),tg=iw=Oo=null,vu=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return c5&&u.locale!=="ko"?null:u.data;default:return null}}var qQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function h5(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!qQ[l.type]:u==="textarea"}function p5(l,u,p,v){xu?yu?yu.push(v):yu=[v]:xu=v,u=Wg(u,"onChange"),0<u.length&&(p=new sg("onChange","change",null,p,v),l.push({event:p,listeners:u}))}var Bf=null,qf=null;function VQ(l){X3(l,0)}function ig(l){var u=Eo(l);if(Zp(u))return l}function g5(l,u){if(l==="change")return u}var x5=!1;if(vi){var fw;if(vi){var mw="oninput"in document;if(!mw){var y5=document.createElement("div");y5.setAttribute("oninput","return;"),mw=typeof y5.oninput=="function"}fw=mw}else fw=!1;x5=fw&&(!document.documentMode||9<document.documentMode)}function v5(){Bf&&(Bf.detachEvent("onpropertychange",b5),qf=Bf=null)}function b5(l){if(l.propertyName==="value"&&ig(qf)){var u=[];p5(u,qf,l,nw(l)),n5(VQ,u)}}function KQ(l,u,p){l==="focusin"?(v5(),Bf=u,qf=p,Bf.attachEvent("onpropertychange",b5)):l==="focusout"&&v5()}function HQ(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return ig(qf)}function GQ(l,u){if(l==="click")return ig(u)}function WQ(l,u){if(l==="input"||l==="change")return ig(u)}function QQ(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Zn=typeof Object.is=="function"?Object.is:QQ;function Vf(l,u){if(Zn(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var p=Object.keys(l),v=Object.keys(u);if(p.length!==v.length)return!1;for(v=0;v<p.length;v++){var C=p[v];if(!hr.call(u,C)||!Zn(l[C],u[C]))return!1}return!0}function w5(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function j5(l,u){var p=w5(l);l=0;for(var v;p;){if(p.nodeType===3){if(v=l+p.textContent.length,l<=u&&v>=u)return{node:p,offset:u-l};l=v}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=w5(p)}}function N5(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?N5(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function S5(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=zl(l.document);u instanceof l.HTMLIFrameElement;){try{var p=typeof u.contentWindow.location.href=="string"}catch{p=!1}if(p)l=u.contentWindow;else break;u=zl(l.document)}return u}function hw(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var YQ=vi&&"documentMode"in document&&11>=document.documentMode,bu=null,pw=null,Kf=null,gw=!1;function _5(l,u,p){var v=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;gw||bu==null||bu!==zl(v)||(v=bu,"selectionStart"in v&&hw(v)?v={start:v.selectionStart,end:v.selectionEnd}:(v=(v.ownerDocument&&v.ownerDocument.defaultView||window).getSelection(),v={anchorNode:v.anchorNode,anchorOffset:v.anchorOffset,focusNode:v.focusNode,focusOffset:v.focusOffset}),Kf&&Vf(Kf,v)||(Kf=v,v=Wg(pw,"onSelect"),0<v.length&&(u=new sg("onSelect","select",null,u,p),l.push({event:u,listeners:v}),u.target=bu)))}function Bl(l,u){var p={};return p[l.toLowerCase()]=u.toLowerCase(),p["Webkit"+l]="webkit"+u,p["Moz"+l]="moz"+u,p}var wu={animationend:Bl("Animation","AnimationEnd"),animationiteration:Bl("Animation","AnimationIteration"),animationstart:Bl("Animation","AnimationStart"),transitionrun:Bl("Transition","TransitionRun"),transitionstart:Bl("Transition","TransitionStart"),transitioncancel:Bl("Transition","TransitionCancel"),transitionend:Bl("Transition","TransitionEnd")},xw={},C5={};vi&&(C5=document.createElement("div").style,"AnimationEvent"in window||(delete wu.animationend.animation,delete wu.animationiteration.animation,delete wu.animationstart.animation),"TransitionEvent"in window||delete wu.transitionend.transition);function ql(l){if(xw[l])return xw[l];if(!wu[l])return l;var u=wu[l],p;for(p in u)if(u.hasOwnProperty(p)&&p in C5)return xw[l]=u[p];return l}var k5=ql("animationend"),E5=ql("animationiteration"),A5=ql("animationstart"),XQ=ql("transitionrun"),ZQ=ql("transitionstart"),JQ=ql("transitioncancel"),T5=ql("transitionend"),O5=new Map,yw="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yw.push("scrollEnd");function ea(l,u){O5.set(l,u),gi(u,[l])}var og=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},Cs=[],ju=0,vw=0;function lg(){for(var l=ju,u=vw=ju=0;u<l;){var p=Cs[u];Cs[u++]=null;var v=Cs[u];Cs[u++]=null;var C=Cs[u];Cs[u++]=null;var E=Cs[u];if(Cs[u++]=null,v!==null&&C!==null){var $=v.pending;$===null?C.next=C:(C.next=$.next,$.next=C),v.pending=C}E!==0&&P5(p,C,E)}}function cg(l,u,p,v){Cs[ju++]=l,Cs[ju++]=u,Cs[ju++]=p,Cs[ju++]=v,vw|=v,l.lanes|=v,l=l.alternate,l!==null&&(l.lanes|=v)}function bw(l,u,p,v){return cg(l,u,p,v),ug(l)}function Vl(l,u){return cg(l,null,null,u),ug(l)}function P5(l,u,p){l.lanes|=p;var v=l.alternate;v!==null&&(v.lanes|=p);for(var C=!1,E=l.return;E!==null;)E.childLanes|=p,v=E.alternate,v!==null&&(v.childLanes|=p),E.tag===22&&(l=E.stateNode,l===null||l._visibility&1||(C=!0)),l=E,E=E.return;return l.tag===3?(E=l.stateNode,C&&u!==null&&(C=31-sr(p),l=E.hiddenUpdates,v=l[C],v===null?l[C]=[u]:v.push(u),u.lane=p|536870912),E):null}function ug(l){if(50<mm)throw mm=0,A1=null,Error(n(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var Nu={};function eY(l,u,p,v){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=v,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jn(l,u,p,v){return new eY(l,u,p,v)}function ww(l){return l=l.prototype,!(!l||!l.isReactComponent)}function bi(l,u){var p=l.alternate;return p===null?(p=Jn(l.tag,u,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=u,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,u=l.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function M5(l,u){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,u=p.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function dg(l,u,p,v,C,E){var $=0;if(v=l,typeof l=="function")ww(l)&&($=1);else if(typeof l=="string")$=aX(l,p,ae.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case R:return l=Jn(31,p,u,C),l.elementType=R,l.lanes=E,l;case b:return Kl(p.children,C,E,u);case j:$=8,C|=24;break;case N:return l=Jn(12,p,u,C|2),l.elementType=N,l.lanes=E,l;case A:return l=Jn(13,p,u,C),l.elementType=A,l.lanes=E,l;case T:return l=Jn(19,p,u,C),l.elementType=T,l.lanes=E,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case S:$=10;break e;case _:$=9;break e;case k:$=11;break e;case O:$=14;break e;case P:$=16,v=null;break e}$=29,p=Error(n(130,l===null?"null":typeof l,"")),v=null}return u=Jn($,p,u,C),u.elementType=l,u.type=v,u.lanes=E,u}function Kl(l,u,p,v){return l=Jn(7,l,v,u),l.lanes=p,l}function jw(l,u,p){return l=Jn(6,l,null,u),l.lanes=p,l}function R5(l){var u=Jn(18,null,null,0);return u.stateNode=l,u}function Nw(l,u,p){return u=Jn(4,l.children!==null?l.children:[],l.key,u),u.lanes=p,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var D5=new WeakMap;function ks(l,u){if(typeof l=="object"&&l!==null){var p=D5.get(l);return p!==void 0?p:(u={value:l,source:u,stack:Pr(u)},D5.set(l,u),u)}return{value:l,source:u,stack:Pr(u)}}var Su=[],_u=0,fg=null,Hf=0,Es=[],As=0,Po=null,Ia=1,La="";function wi(l,u){Su[_u++]=Hf,Su[_u++]=fg,fg=l,Hf=u}function I5(l,u,p){Es[As++]=Ia,Es[As++]=La,Es[As++]=Po,Po=l;var v=Ia;l=La;var C=32-sr(v)-1;v&=~(1<<C),p+=1;var E=32-sr(u)+C;if(30<E){var $=C-C%5;E=(v&(1<<$)-1).toString(32),v>>=$,C-=$,Ia=1<<32-sr(u)+C|p<<C|v,La=E+l}else Ia=1<<E|p<<C|v,La=l}function Sw(l){l.return!==null&&(wi(l,1),I5(l,1,0))}function _w(l){for(;l===fg;)fg=Su[--_u],Su[_u]=null,Hf=Su[--_u],Su[_u]=null;for(;l===Po;)Po=Es[--As],Es[As]=null,La=Es[--As],Es[As]=null,Ia=Es[--As],Es[As]=null}function L5(l,u){Es[As++]=Ia,Es[As++]=La,Es[As++]=Po,Ia=u.id,La=u.overflow,Po=l}var en=null,zt=null,ut=!1,Mo=null,Ts=!1,Cw=Error(n(519));function Ro(l){var u=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gf(ks(u,l)),Cw}function $5(l){var u=l.stateNode,p=l.type,v=l.memoizedProps;switch(u[Mr]=l,u[gn]=v,p){case"dialog":at("cancel",u),at("close",u);break;case"iframe":case"object":case"embed":at("load",u);break;case"video":case"audio":for(p=0;p<pm.length;p++)at(pm[p],u);break;case"source":at("error",u);break;case"img":case"image":case"link":at("error",u),at("load",u);break;case"details":at("toggle",u);break;case"input":at("invalid",u),Jp(u,v.value,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name,!0);break;case"select":at("invalid",u);break;case"textarea":at("invalid",u),JA(u,v.value,v.defaultValue,v.children)}p=v.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||u.textContent===""+p||v.suppressHydrationWarning===!0||tO(u.textContent,p)?(v.popover!=null&&(at("beforetoggle",u),at("toggle",u)),v.onScroll!=null&&at("scroll",u),v.onScrollEnd!=null&&at("scrollend",u),v.onClick!=null&&(u.onclick=yi),u=!0):u=!1,u||Ro(l,!0)}function z5(l){for(en=l.return;en;)switch(en.tag){case 5:case 31:case 13:Ts=!1;return;case 27:case 3:Ts=!0;return;default:en=en.return}}function Cu(l){if(l!==en)return!1;if(!ut)return z5(l),ut=!0,!1;var u=l.tag,p;if((p=u!==3&&u!==27)&&((p=u===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||V1(l.type,l.memoizedProps)),p=!p),p&&zt&&Ro(l),z5(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));zt=uO(l)}else if(u===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(317));zt=uO(l)}else u===27?(u=zt,Wo(l.type)?(l=Q1,Q1=null,zt=l):zt=u):zt=en?Ps(l.stateNode.nextSibling):null;return!0}function Hl(){zt=en=null,ut=!1}function kw(){var l=Mo;return l!==null&&(Bn===null?Bn=l:Bn.push.apply(Bn,l),Mo=null),l}function Gf(l){Mo===null?Mo=[l]:Mo.push(l)}var Ew=B(null),Gl=null,ji=null;function Do(l,u,p){ee(Ew,u._currentValue),u._currentValue=p}function Ni(l){l._currentValue=Ew.current,V(Ew)}function Aw(l,u,p){for(;l!==null;){var v=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,v!==null&&(v.childLanes|=u)):v!==null&&(v.childLanes&u)!==u&&(v.childLanes|=u),l===p)break;l=l.return}}function Tw(l,u,p,v){var C=l.child;for(C!==null&&(C.return=l);C!==null;){var E=C.dependencies;if(E!==null){var $=C.child;E=E.firstContext;e:for(;E!==null;){var W=E;E=C;for(var re=0;re<u.length;re++)if(W.context===u[re]){E.lanes|=p,W=E.alternate,W!==null&&(W.lanes|=p),Aw(E.return,p,l),v||($=null);break e}E=W.next}}else if(C.tag===18){if($=C.return,$===null)throw Error(n(341));$.lanes|=p,E=$.alternate,E!==null&&(E.lanes|=p),Aw($,p,l),$=null}else $=C.child;if($!==null)$.return=C;else for($=C;$!==null;){if($===l){$=null;break}if(C=$.sibling,C!==null){C.return=$.return,$=C;break}$=$.return}C=$}}function ku(l,u,p,v){l=null;for(var C=u,E=!1;C!==null;){if(!E){if((C.flags&524288)!==0)E=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var $=C.alternate;if($===null)throw Error(n(387));if($=$.memoizedProps,$!==null){var W=C.type;Zn(C.pendingProps.value,$.value)||(l!==null?l.push(W):l=[W])}}else if(C===ne.current){if($=C.alternate,$===null)throw Error(n(387));$.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(l!==null?l.push(bm):l=[bm])}C=C.return}l!==null&&Tw(u,l,p,v),u.flags|=262144}function mg(l){for(l=l.firstContext;l!==null;){if(!Zn(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Wl(l){Gl=l,ji=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function tn(l){return U5(Gl,l)}function hg(l,u){return Gl===null&&Wl(l),U5(l,u)}function U5(l,u){var p=u._currentValue;if(u={context:u,memoizedValue:p,next:null},ji===null){if(l===null)throw Error(n(308));ji=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else ji=ji.next=u;return p}var tY=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(p,v){l.push(v)}};this.abort=function(){u.aborted=!0,l.forEach(function(p){return p()})}},rY=e.unstable_scheduleCallback,nY=e.unstable_NormalPriority,Nr={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ow(){return{controller:new tY,data:new Map,refCount:0}}function Wf(l){l.refCount--,l.refCount===0&&rY(nY,function(){l.controller.abort()})}var Qf=null,Pw=0,Eu=0,Au=null;function sY(l,u){if(Qf===null){var p=Qf=[];Pw=0,Eu=D1(),Au={status:"pending",value:void 0,then:function(v){p.push(v)}}}return Pw++,u.then(F5,F5),u}function F5(){if(--Pw===0&&Qf!==null){Au!==null&&(Au.status="fulfilled");var l=Qf;Qf=null,Eu=0,Au=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function aY(l,u){var p=[],v={status:"pending",value:null,reason:null,then:function(C){p.push(C)}};return l.then(function(){v.status="fulfilled",v.value=u;for(var C=0;C<p.length;C++)(0,p[C])(u)},function(C){for(v.status="rejected",v.reason=C,C=0;C<p.length;C++)(0,p[C])(void 0)}),v}var B5=U.S;U.S=function(l,u){_3=nr(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&sY(l,u),B5!==null&&B5(l,u)};var Ql=B(null);function Mw(){var l=Ql.current;return l!==null?l:Pt.pooledCache}function pg(l,u){u===null?ee(Ql,Ql.current):ee(Ql,u.pool)}function q5(){var l=Mw();return l===null?null:{parent:Nr._currentValue,pool:l}}var Tu=Error(n(460)),Rw=Error(n(474)),gg=Error(n(542)),xg={then:function(){}};function V5(l){return l=l.status,l==="fulfilled"||l==="rejected"}function K5(l,u,p){switch(p=l[p],p===void 0?l.push(u):p!==u&&(u.then(yi,yi),u=p),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,G5(l),l;default:if(typeof u.status=="string")u.then(yi,yi);else{if(l=Pt,l!==null&&100<l.shellSuspendCounter)throw Error(n(482));l=u,l.status="pending",l.then(function(v){if(u.status==="pending"){var C=u;C.status="fulfilled",C.value=v}},function(v){if(u.status==="pending"){var C=u;C.status="rejected",C.reason=v}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,G5(l),l}throw Xl=u,Tu}}function Yl(l){try{var u=l._init;return u(l._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Xl=p,Tu):p}}var Xl=null;function H5(){if(Xl===null)throw Error(n(459));var l=Xl;return Xl=null,l}function G5(l){if(l===Tu||l===gg)throw Error(n(483))}var Ou=null,Yf=0;function yg(l){var u=Yf;return Yf+=1,Ou===null&&(Ou=[]),K5(Ou,l,u)}function Xf(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function vg(l,u){throw u.$$typeof===g?Error(n(525)):(l=Object.prototype.toString.call(u),Error(n(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function W5(l){function u(le,ie){if(l){var ue=le.deletions;ue===null?(le.deletions=[ie],le.flags|=16):ue.push(ie)}}function p(le,ie){if(!l)return null;for(;ie!==null;)u(le,ie),ie=ie.sibling;return null}function v(le){for(var ie=new Map;le!==null;)le.key!==null?ie.set(le.key,le):ie.set(le.index,le),le=le.sibling;return ie}function C(le,ie){return le=bi(le,ie),le.index=0,le.sibling=null,le}function E(le,ie,ue){return le.index=ue,l?(ue=le.alternate,ue!==null?(ue=ue.index,ue<ie?(le.flags|=67108866,ie):ue):(le.flags|=67108866,ie)):(le.flags|=1048576,ie)}function $(le){return l&&le.alternate===null&&(le.flags|=67108866),le}function W(le,ie,ue,Ne){return ie===null||ie.tag!==6?(ie=jw(ue,le.mode,Ne),ie.return=le,ie):(ie=C(ie,ue),ie.return=le,ie)}function re(le,ie,ue,Ne){var qe=ue.type;return qe===b?be(le,ie,ue.props.children,Ne,ue.key):ie!==null&&(ie.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===P&&Yl(qe)===ie.type)?(ie=C(ie,ue.props),Xf(ie,ue),ie.return=le,ie):(ie=dg(ue.type,ue.key,ue.props,null,le.mode,Ne),Xf(ie,ue),ie.return=le,ie)}function de(le,ie,ue,Ne){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==ue.containerInfo||ie.stateNode.implementation!==ue.implementation?(ie=Nw(ue,le.mode,Ne),ie.return=le,ie):(ie=C(ie,ue.children||[]),ie.return=le,ie)}function be(le,ie,ue,Ne,qe){return ie===null||ie.tag!==7?(ie=Kl(ue,le.mode,Ne,qe),ie.return=le,ie):(ie=C(ie,ue),ie.return=le,ie)}function Se(le,ie,ue){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return ie=jw(""+ie,le.mode,ue),ie.return=le,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case x:return ue=dg(ie.type,ie.key,ie.props,null,le.mode,ue),Xf(ue,ie),ue.return=le,ue;case w:return ie=Nw(ie,le.mode,ue),ie.return=le,ie;case P:return ie=Yl(ie),Se(le,ie,ue)}if(K(ie)||z(ie))return ie=Kl(ie,le.mode,ue,null),ie.return=le,ie;if(typeof ie.then=="function")return Se(le,yg(ie),ue);if(ie.$$typeof===S)return Se(le,hg(le,ie),ue);vg(le,ie)}return null}function me(le,ie,ue,Ne){var qe=ie!==null?ie.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return qe!==null?null:W(le,ie,""+ue,Ne);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case x:return ue.key===qe?re(le,ie,ue,Ne):null;case w:return ue.key===qe?de(le,ie,ue,Ne):null;case P:return ue=Yl(ue),me(le,ie,ue,Ne)}if(K(ue)||z(ue))return qe!==null?null:be(le,ie,ue,Ne,null);if(typeof ue.then=="function")return me(le,ie,yg(ue),Ne);if(ue.$$typeof===S)return me(le,ie,hg(le,ue),Ne);vg(le,ue)}return null}function xe(le,ie,ue,Ne,qe){if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return le=le.get(ue)||null,W(ie,le,""+Ne,qe);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case x:return le=le.get(Ne.key===null?ue:Ne.key)||null,re(ie,le,Ne,qe);case w:return le=le.get(Ne.key===null?ue:Ne.key)||null,de(ie,le,Ne,qe);case P:return Ne=Yl(Ne),xe(le,ie,ue,Ne,qe)}if(K(Ne)||z(Ne))return le=le.get(ue)||null,be(ie,le,Ne,qe,null);if(typeof Ne.then=="function")return xe(le,ie,ue,yg(Ne),qe);if(Ne.$$typeof===S)return xe(le,ie,ue,hg(ie,Ne),qe);vg(ie,Ne)}return null}function Oe(le,ie,ue,Ne){for(var qe=null,gt=null,Le=ie,Ze=ie=0,lt=null;Le!==null&&Ze<ue.length;Ze++){Le.index>Ze?(lt=Le,Le=null):lt=Le.sibling;var xt=me(le,Le,ue[Ze],Ne);if(xt===null){Le===null&&(Le=lt);break}l&&Le&&xt.alternate===null&&u(le,Le),ie=E(xt,ie,Ze),gt===null?qe=xt:gt.sibling=xt,gt=xt,Le=lt}if(Ze===ue.length)return p(le,Le),ut&&wi(le,Ze),qe;if(Le===null){for(;Ze<ue.length;Ze++)Le=Se(le,ue[Ze],Ne),Le!==null&&(ie=E(Le,ie,Ze),gt===null?qe=Le:gt.sibling=Le,gt=Le);return ut&&wi(le,Ze),qe}for(Le=v(Le);Ze<ue.length;Ze++)lt=xe(Le,le,Ze,ue[Ze],Ne),lt!==null&&(l&&lt.alternate!==null&&Le.delete(lt.key===null?Ze:lt.key),ie=E(lt,ie,Ze),gt===null?qe=lt:gt.sibling=lt,gt=lt);return l&&Le.forEach(function(Jo){return u(le,Jo)}),ut&&wi(le,Ze),qe}function He(le,ie,ue,Ne){if(ue==null)throw Error(n(151));for(var qe=null,gt=null,Le=ie,Ze=ie=0,lt=null,xt=ue.next();Le!==null&&!xt.done;Ze++,xt=ue.next()){Le.index>Ze?(lt=Le,Le=null):lt=Le.sibling;var Jo=me(le,Le,xt.value,Ne);if(Jo===null){Le===null&&(Le=lt);break}l&&Le&&Jo.alternate===null&&u(le,Le),ie=E(Jo,ie,Ze),gt===null?qe=Jo:gt.sibling=Jo,gt=Jo,Le=lt}if(xt.done)return p(le,Le),ut&&wi(le,Ze),qe;if(Le===null){for(;!xt.done;Ze++,xt=ue.next())xt=Se(le,xt.value,Ne),xt!==null&&(ie=E(xt,ie,Ze),gt===null?qe=xt:gt.sibling=xt,gt=xt);return ut&&wi(le,Ze),qe}for(Le=v(Le);!xt.done;Ze++,xt=ue.next())xt=xe(Le,le,Ze,xt.value,Ne),xt!==null&&(l&&xt.alternate!==null&&Le.delete(xt.key===null?Ze:xt.key),ie=E(xt,ie,Ze),gt===null?qe=xt:gt.sibling=xt,gt=xt);return l&&Le.forEach(function(gX){return u(le,gX)}),ut&&wi(le,Ze),qe}function Ot(le,ie,ue,Ne){if(typeof ue=="object"&&ue!==null&&ue.type===b&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case x:e:{for(var qe=ue.key;ie!==null;){if(ie.key===qe){if(qe=ue.type,qe===b){if(ie.tag===7){p(le,ie.sibling),Ne=C(ie,ue.props.children),Ne.return=le,le=Ne;break e}}else if(ie.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===P&&Yl(qe)===ie.type){p(le,ie.sibling),Ne=C(ie,ue.props),Xf(Ne,ue),Ne.return=le,le=Ne;break e}p(le,ie);break}else u(le,ie);ie=ie.sibling}ue.type===b?(Ne=Kl(ue.props.children,le.mode,Ne,ue.key),Ne.return=le,le=Ne):(Ne=dg(ue.type,ue.key,ue.props,null,le.mode,Ne),Xf(Ne,ue),Ne.return=le,le=Ne)}return $(le);case w:e:{for(qe=ue.key;ie!==null;){if(ie.key===qe)if(ie.tag===4&&ie.stateNode.containerInfo===ue.containerInfo&&ie.stateNode.implementation===ue.implementation){p(le,ie.sibling),Ne=C(ie,ue.children||[]),Ne.return=le,le=Ne;break e}else{p(le,ie);break}else u(le,ie);ie=ie.sibling}Ne=Nw(ue,le.mode,Ne),Ne.return=le,le=Ne}return $(le);case P:return ue=Yl(ue),Ot(le,ie,ue,Ne)}if(K(ue))return Oe(le,ie,ue,Ne);if(z(ue)){if(qe=z(ue),typeof qe!="function")throw Error(n(150));return ue=qe.call(ue),He(le,ie,ue,Ne)}if(typeof ue.then=="function")return Ot(le,ie,yg(ue),Ne);if(ue.$$typeof===S)return Ot(le,ie,hg(le,ue),Ne);vg(le,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint"?(ue=""+ue,ie!==null&&ie.tag===6?(p(le,ie.sibling),Ne=C(ie,ue),Ne.return=le,le=Ne):(p(le,ie),Ne=jw(ue,le.mode,Ne),Ne.return=le,le=Ne),$(le)):p(le,ie)}return function(le,ie,ue,Ne){try{Yf=0;var qe=Ot(le,ie,ue,Ne);return Ou=null,qe}catch(Le){if(Le===Tu||Le===gg)throw Le;var gt=Jn(29,Le,null,le.mode);return gt.lanes=Ne,gt.return=le,gt}}}var Zl=W5(!0),Q5=W5(!1),Io=!1;function Dw(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Iw(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function Lo(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function $o(l,u,p){var v=l.updateQueue;if(v===null)return null;if(v=v.shared,(bt&2)!==0){var C=v.pending;return C===null?u.next=u:(u.next=C.next,C.next=u),v.pending=u,u=ug(l),P5(l,null,p),u}return cg(l,v,u,p),ug(l)}function Zf(l,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194048)!==0)){var v=u.lanes;v&=l.pendingLanes,p|=v,u.lanes=p,Bp(l,p)}}function Lw(l,u){var p=l.updateQueue,v=l.alternate;if(v!==null&&(v=v.updateQueue,p===v)){var C=null,E=null;if(p=p.firstBaseUpdate,p!==null){do{var $={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};E===null?C=E=$:E=E.next=$,p=p.next}while(p!==null);E===null?C=E=u:E=E.next=u}else C=E=u;p={baseState:v.baseState,firstBaseUpdate:C,lastBaseUpdate:E,shared:v.shared,callbacks:v.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=u:l.next=u,p.lastBaseUpdate=u}var $w=!1;function Jf(){if($w){var l=Au;if(l!==null)throw l}}function em(l,u,p,v){$w=!1;var C=l.updateQueue;Io=!1;var E=C.firstBaseUpdate,$=C.lastBaseUpdate,W=C.shared.pending;if(W!==null){C.shared.pending=null;var re=W,de=re.next;re.next=null,$===null?E=de:$.next=de,$=re;var be=l.alternate;be!==null&&(be=be.updateQueue,W=be.lastBaseUpdate,W!==$&&(W===null?be.firstBaseUpdate=de:W.next=de,be.lastBaseUpdate=re))}if(E!==null){var Se=C.baseState;$=0,be=de=re=null,W=E;do{var me=W.lane&-536870913,xe=me!==W.lane;if(xe?(ot&me)===me:(v&me)===me){me!==0&&me===Eu&&($w=!0),be!==null&&(be=be.next={lane:0,tag:W.tag,payload:W.payload,callback:null,next:null});e:{var Oe=l,He=W;me=u;var Ot=p;switch(He.tag){case 1:if(Oe=He.payload,typeof Oe=="function"){Se=Oe.call(Ot,Se,me);break e}Se=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=He.payload,me=typeof Oe=="function"?Oe.call(Ot,Se,me):Oe,me==null)break e;Se=h({},Se,me);break e;case 2:Io=!0}}me=W.callback,me!==null&&(l.flags|=64,xe&&(l.flags|=8192),xe=C.callbacks,xe===null?C.callbacks=[me]:xe.push(me))}else xe={lane:me,tag:W.tag,payload:W.payload,callback:W.callback,next:null},be===null?(de=be=xe,re=Se):be=be.next=xe,$|=me;if(W=W.next,W===null){if(W=C.shared.pending,W===null)break;xe=W,W=xe.next,xe.next=null,C.lastBaseUpdate=xe,C.shared.pending=null}}while(!0);be===null&&(re=Se),C.baseState=re,C.firstBaseUpdate=de,C.lastBaseUpdate=be,E===null&&(C.shared.lanes=0),qo|=$,l.lanes=$,l.memoizedState=Se}}function Y5(l,u){if(typeof l!="function")throw Error(n(191,l));l.call(u)}function X5(l,u){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)Y5(p[l],u)}var Pu=B(null),bg=B(0);function Z5(l,u){l=Pi,ee(bg,l),ee(Pu,u),Pi=l|u.baseLanes}function zw(){ee(bg,Pi),ee(Pu,Pu.current)}function Uw(){Pi=bg.current,V(Pu),V(bg)}var es=B(null),Os=null;function zo(l){var u=l.alternate;ee(pr,pr.current&1),ee(es,l),Os===null&&(u===null||Pu.current!==null||u.memoizedState!==null)&&(Os=l)}function Fw(l){ee(pr,pr.current),ee(es,l),Os===null&&(Os=l)}function J5(l){l.tag===22?(ee(pr,pr.current),ee(es,l),Os===null&&(Os=l)):Uo()}function Uo(){ee(pr,pr.current),ee(es,es.current)}function ts(l){V(es),Os===l&&(Os=null),V(pr)}var pr=B(0);function wg(l){for(var u=l;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||G1(p)||W1(p)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Si=0,Xe=null,At=null,Sr=null,jg=!1,Mu=!1,Jl=!1,Ng=0,tm=0,Ru=null,iY=0;function ar(){throw Error(n(321))}function Bw(l,u){if(u===null)return!1;for(var p=0;p<u.length&&p<l.length;p++)if(!Zn(l[p],u[p]))return!1;return!0}function qw(l,u,p,v,C,E){return Si=E,Xe=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,U.H=l===null||l.memoizedState===null?IT:s1,Jl=!1,E=p(v,C),Jl=!1,Mu&&(E=tT(u,p,v,C)),eT(l),E}function eT(l){U.H=sm;var u=At!==null&&At.next!==null;if(Si=0,Sr=At=Xe=null,jg=!1,tm=0,Ru=null,u)throw Error(n(300));l===null||_r||(l=l.dependencies,l!==null&&mg(l)&&(_r=!0))}function tT(l,u,p,v){Xe=l;var C=0;do{if(Mu&&(Ru=null),tm=0,Mu=!1,25<=C)throw Error(n(301));if(C+=1,Sr=At=null,l.updateQueue!=null){var E=l.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}U.H=LT,E=u(p,v)}while(Mu);return E}function oY(){var l=U.H,u=l.useState()[0];return u=typeof u.then=="function"?rm(u):u,l=l.useState()[0],(At!==null?At.memoizedState:null)!==l&&(Xe.flags|=1024),u}function Vw(){var l=Ng!==0;return Ng=0,l}function Kw(l,u,p){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~p}function Hw(l){if(jg){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}jg=!1}Si=0,Sr=At=Xe=null,Mu=!1,tm=Ng=0,Ru=null}function Cn(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sr===null?Xe.memoizedState=Sr=l:Sr=Sr.next=l,Sr}function gr(){if(At===null){var l=Xe.alternate;l=l!==null?l.memoizedState:null}else l=At.next;var u=Sr===null?Xe.memoizedState:Sr.next;if(u!==null)Sr=u,At=l;else{if(l===null)throw Xe.alternate===null?Error(n(467)):Error(n(310));At=l,l={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Sr===null?Xe.memoizedState=Sr=l:Sr=Sr.next=l}return Sr}function Sg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function rm(l){var u=tm;return tm+=1,Ru===null&&(Ru=[]),l=K5(Ru,l,u),u=Xe,(Sr===null?u.memoizedState:Sr.next)===null&&(u=u.alternate,U.H=u===null||u.memoizedState===null?IT:s1),l}function _g(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return rm(l);if(l.$$typeof===S)return tn(l)}throw Error(n(438,String(l)))}function Gw(l){var u=null,p=Xe.updateQueue;if(p!==null&&(u=p.memoCache),u==null){var v=Xe.alternate;v!==null&&(v=v.updateQueue,v!==null&&(v=v.memoCache,v!=null&&(u={data:v.data.map(function(C){return C.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),p===null&&(p=Sg(),Xe.updateQueue=p),p.memoCache=u,p=u.data[u.index],p===void 0)for(p=u.data[u.index]=Array(l),v=0;v<l;v++)p[v]=M;return u.index++,p}function _i(l,u){return typeof u=="function"?u(l):u}function Cg(l){var u=gr();return Ww(u,At,l)}function Ww(l,u,p){var v=l.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=p;var C=l.baseQueue,E=v.pending;if(E!==null){if(C!==null){var $=C.next;C.next=E.next,E.next=$}u.baseQueue=C=E,v.pending=null}if(E=l.baseState,C===null)l.memoizedState=E;else{u=C.next;var W=$=null,re=null,de=u,be=!1;do{var Se=de.lane&-536870913;if(Se!==de.lane?(ot&Se)===Se:(Si&Se)===Se){var me=de.revertLane;if(me===0)re!==null&&(re=re.next={lane:0,revertLane:0,gesture:null,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),Se===Eu&&(be=!0);else if((Si&me)===me){de=de.next,me===Eu&&(be=!0);continue}else Se={lane:0,revertLane:de.revertLane,gesture:null,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},re===null?(W=re=Se,$=E):re=re.next=Se,Xe.lanes|=me,qo|=me;Se=de.action,Jl&&p(E,Se),E=de.hasEagerState?de.eagerState:p(E,Se)}else me={lane:Se,revertLane:de.revertLane,gesture:de.gesture,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},re===null?(W=re=me,$=E):re=re.next=me,Xe.lanes|=Se,qo|=Se;de=de.next}while(de!==null&&de!==u);if(re===null?$=E:re.next=W,!Zn(E,l.memoizedState)&&(_r=!0,be&&(p=Au,p!==null)))throw p;l.memoizedState=E,l.baseState=$,l.baseQueue=re,v.lastRenderedState=E}return C===null&&(v.lanes=0),[l.memoizedState,v.dispatch]}function Qw(l){var u=gr(),p=u.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=l;var v=p.dispatch,C=p.pending,E=u.memoizedState;if(C!==null){p.pending=null;var $=C=C.next;do E=l(E,$.action),$=$.next;while($!==C);Zn(E,u.memoizedState)||(_r=!0),u.memoizedState=E,u.baseQueue===null&&(u.baseState=E),p.lastRenderedState=E}return[E,v]}function rT(l,u,p){var v=Xe,C=gr(),E=ut;if(E){if(p===void 0)throw Error(n(407));p=p()}else p=u();var $=!Zn((At||C).memoizedState,p);if($&&(C.memoizedState=p,_r=!0),C=C.queue,Zw(aT.bind(null,v,C,l),[l]),C.getSnapshot!==u||$||Sr!==null&&Sr.memoizedState.tag&1){if(v.flags|=2048,Du(9,{destroy:void 0},sT.bind(null,v,C,p,u),null),Pt===null)throw Error(n(349));E||(Si&127)!==0||nT(v,u,p)}return p}function nT(l,u,p){l.flags|=16384,l={getSnapshot:u,value:p},u=Xe.updateQueue,u===null?(u=Sg(),Xe.updateQueue=u,u.stores=[l]):(p=u.stores,p===null?u.stores=[l]:p.push(l))}function sT(l,u,p,v){u.value=p,u.getSnapshot=v,iT(u)&&oT(l)}function aT(l,u,p){return p(function(){iT(u)&&oT(l)})}function iT(l){var u=l.getSnapshot;l=l.value;try{var p=u();return!Zn(l,p)}catch{return!0}}function oT(l){var u=Vl(l,2);u!==null&&qn(u,l,2)}function Yw(l){var u=Cn();if(typeof l=="function"){var p=l;if(l=p(),Jl){wr(!0);try{p()}finally{wr(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:l},u}function lT(l,u,p,v){return l.baseState=p,Ww(l,At,typeof v=="function"?v:_i)}function lY(l,u,p,v,C){if(Ag(l))throw Error(n(485));if(l=u.action,l!==null){var E={payload:C,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function($){E.listeners.push($)}};U.T!==null?p(!0):E.isTransition=!1,v(E),p=u.pending,p===null?(E.next=u.pending=E,cT(u,E)):(E.next=p.next,u.pending=p.next=E)}}function cT(l,u){var p=u.action,v=u.payload,C=l.state;if(u.isTransition){var E=U.T,$={};U.T=$;try{var W=p(C,v),re=U.S;re!==null&&re($,W),uT(l,u,W)}catch(de){Xw(l,u,de)}finally{E!==null&&$.types!==null&&(E.types=$.types),U.T=E}}else try{E=p(C,v),uT(l,u,E)}catch(de){Xw(l,u,de)}}function uT(l,u,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(v){dT(l,u,v)},function(v){return Xw(l,u,v)}):dT(l,u,p)}function dT(l,u,p){u.status="fulfilled",u.value=p,fT(u),l.state=p,u=l.pending,u!==null&&(p=u.next,p===u?l.pending=null:(p=p.next,u.next=p,cT(l,p)))}function Xw(l,u,p){var v=l.pending;if(l.pending=null,v!==null){v=v.next;do u.status="rejected",u.reason=p,fT(u),u=u.next;while(u!==v)}l.action=null}function fT(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function mT(l,u){return u}function hT(l,u){if(ut){var p=Pt.formState;if(p!==null){e:{var v=Xe;if(ut){if(zt){t:{for(var C=zt,E=Ts;C.nodeType!==8;){if(!E){C=null;break t}if(C=Ps(C.nextSibling),C===null){C=null;break t}}E=C.data,C=E==="F!"||E==="F"?C:null}if(C){zt=Ps(C.nextSibling),v=C.data==="F!";break e}}Ro(v)}v=!1}v&&(u=p[0])}}return p=Cn(),p.memoizedState=p.baseState=u,v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mT,lastRenderedState:u},p.queue=v,p=MT.bind(null,Xe,v),v.dispatch=p,v=Yw(!1),E=n1.bind(null,Xe,!1,v.queue),v=Cn(),C={state:u,dispatch:null,action:l,pending:null},v.queue=C,p=lY.bind(null,Xe,C,E,p),C.dispatch=p,v.memoizedState=l,[u,p,!1]}function pT(l){var u=gr();return gT(u,At,l)}function gT(l,u,p){if(u=Ww(l,u,mT)[0],l=Cg(_i)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var v=rm(u)}catch($){throw $===Tu?gg:$}else v=u;u=gr();var C=u.queue,E=C.dispatch;return p!==u.memoizedState&&(Xe.flags|=2048,Du(9,{destroy:void 0},cY.bind(null,C,p),null)),[v,E,l]}function cY(l,u){l.action=u}function xT(l){var u=gr(),p=At;if(p!==null)return gT(u,p,l);gr(),u=u.memoizedState,p=gr();var v=p.queue.dispatch;return p.memoizedState=l,[u,v,!1]}function Du(l,u,p,v){return l={tag:l,create:p,deps:v,inst:u,next:null},u=Xe.updateQueue,u===null&&(u=Sg(),Xe.updateQueue=u),p=u.lastEffect,p===null?u.lastEffect=l.next=l:(v=p.next,p.next=l,l.next=v,u.lastEffect=l),l}function yT(){return gr().memoizedState}function kg(l,u,p,v){var C=Cn();Xe.flags|=l,C.memoizedState=Du(1|u,{destroy:void 0},p,v===void 0?null:v)}function Eg(l,u,p,v){var C=gr();v=v===void 0?null:v;var E=C.memoizedState.inst;At!==null&&v!==null&&Bw(v,At.memoizedState.deps)?C.memoizedState=Du(u,E,p,v):(Xe.flags|=l,C.memoizedState=Du(1|u,E,p,v))}function vT(l,u){kg(8390656,8,l,u)}function Zw(l,u){Eg(2048,8,l,u)}function uY(l){Xe.flags|=4;var u=Xe.updateQueue;if(u===null)u=Sg(),Xe.updateQueue=u,u.events=[l];else{var p=u.events;p===null?u.events=[l]:p.push(l)}}function bT(l){var u=gr().memoizedState;return uY({ref:u,nextImpl:l}),function(){if((bt&2)!==0)throw Error(n(440));return u.impl.apply(void 0,arguments)}}function wT(l,u){return Eg(4,2,l,u)}function jT(l,u){return Eg(4,4,l,u)}function NT(l,u){if(typeof u=="function"){l=l();var p=u(l);return function(){typeof p=="function"?p():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function ST(l,u,p){p=p!=null?p.concat([l]):null,Eg(4,4,NT.bind(null,u,l),p)}function Jw(){}function _T(l,u){var p=gr();u=u===void 0?null:u;var v=p.memoizedState;return u!==null&&Bw(u,v[1])?v[0]:(p.memoizedState=[l,u],l)}function CT(l,u){var p=gr();u=u===void 0?null:u;var v=p.memoizedState;if(u!==null&&Bw(u,v[1]))return v[0];if(v=l(),Jl){wr(!0);try{l()}finally{wr(!1)}}return p.memoizedState=[v,u],v}function e1(l,u,p){return p===void 0||(Si&1073741824)!==0&&(ot&261930)===0?l.memoizedState=u:(l.memoizedState=p,l=k3(),Xe.lanes|=l,qo|=l,p)}function kT(l,u,p,v){return Zn(p,u)?p:Pu.current!==null?(l=e1(l,p,v),Zn(l,u)||(_r=!0),l):(Si&42)===0||(Si&1073741824)!==0&&(ot&261930)===0?(_r=!0,l.memoizedState=p):(l=k3(),Xe.lanes|=l,qo|=l,u)}function ET(l,u,p,v,C){var E=L.p;L.p=E!==0&&8>E?E:8;var $=U.T,W={};U.T=W,n1(l,!1,u,p);try{var re=C(),de=U.S;if(de!==null&&de(W,re),re!==null&&typeof re=="object"&&typeof re.then=="function"){var be=aY(re,v);nm(l,u,be,ss(l))}else nm(l,u,v,ss(l))}catch(Se){nm(l,u,{then:function(){},status:"rejected",reason:Se},ss())}finally{L.p=E,$!==null&&W.types!==null&&($.types=W.types),U.T=$}}function dY(){}function t1(l,u,p,v){if(l.tag!==5)throw Error(n(476));var C=AT(l).queue;ET(l,C,u,F,p===null?dY:function(){return TT(l),p(v)})}function AT(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:F},next:null};var p={};return u.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:p},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function TT(l){var u=AT(l);u.next===null&&(u=l.alternate.memoizedState),nm(l,u.next.queue,{},ss())}function r1(){return tn(bm)}function OT(){return gr().memoizedState}function PT(){return gr().memoizedState}function fY(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var p=ss();l=Lo(p);var v=$o(u,l,p);v!==null&&(qn(v,u,p),Zf(v,u,p)),u={cache:Ow()},l.payload=u;return}u=u.return}}function mY(l,u,p){var v=ss();p={lane:v,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Ag(l)?RT(u,p):(p=bw(l,u,p,v),p!==null&&(qn(p,l,v),DT(p,u,v)))}function MT(l,u,p){var v=ss();nm(l,u,p,v)}function nm(l,u,p,v){var C={lane:v,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(Ag(l))RT(u,C);else{var E=l.alternate;if(l.lanes===0&&(E===null||E.lanes===0)&&(E=u.lastRenderedReducer,E!==null))try{var $=u.lastRenderedState,W=E($,p);if(C.hasEagerState=!0,C.eagerState=W,Zn(W,$))return cg(l,u,C,0),Pt===null&&lg(),!1}catch{}if(p=bw(l,u,C,v),p!==null)return qn(p,l,v),DT(p,u,v),!0}return!1}function n1(l,u,p,v){if(v={lane:2,revertLane:D1(),gesture:null,action:v,hasEagerState:!1,eagerState:null,next:null},Ag(l)){if(u)throw Error(n(479))}else u=bw(l,p,v,2),u!==null&&qn(u,l,2)}function Ag(l){var u=l.alternate;return l===Xe||u!==null&&u===Xe}function RT(l,u){Mu=jg=!0;var p=l.pending;p===null?u.next=u:(u.next=p.next,p.next=u),l.pending=u}function DT(l,u,p){if((p&4194048)!==0){var v=u.lanes;v&=l.pendingLanes,p|=v,u.lanes=p,Bp(l,p)}}var sm={readContext:tn,use:_g,useCallback:ar,useContext:ar,useEffect:ar,useImperativeHandle:ar,useLayoutEffect:ar,useInsertionEffect:ar,useMemo:ar,useReducer:ar,useRef:ar,useState:ar,useDebugValue:ar,useDeferredValue:ar,useTransition:ar,useSyncExternalStore:ar,useId:ar,useHostTransitionStatus:ar,useFormState:ar,useActionState:ar,useOptimistic:ar,useMemoCache:ar,useCacheRefresh:ar};sm.useEffectEvent=ar;var IT={readContext:tn,use:_g,useCallback:function(l,u){return Cn().memoizedState=[l,u===void 0?null:u],l},useContext:tn,useEffect:vT,useImperativeHandle:function(l,u,p){p=p!=null?p.concat([l]):null,kg(4194308,4,NT.bind(null,u,l),p)},useLayoutEffect:function(l,u){return kg(4194308,4,l,u)},useInsertionEffect:function(l,u){kg(4,2,l,u)},useMemo:function(l,u){var p=Cn();u=u===void 0?null:u;var v=l();if(Jl){wr(!0);try{l()}finally{wr(!1)}}return p.memoizedState=[v,u],v},useReducer:function(l,u,p){var v=Cn();if(p!==void 0){var C=p(u);if(Jl){wr(!0);try{p(u)}finally{wr(!1)}}}else C=u;return v.memoizedState=v.baseState=C,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:C},v.queue=l,l=l.dispatch=mY.bind(null,Xe,l),[v.memoizedState,l]},useRef:function(l){var u=Cn();return l={current:l},u.memoizedState=l},useState:function(l){l=Yw(l);var u=l.queue,p=MT.bind(null,Xe,u);return u.dispatch=p,[l.memoizedState,p]},useDebugValue:Jw,useDeferredValue:function(l,u){var p=Cn();return e1(p,l,u)},useTransition:function(){var l=Yw(!1);return l=ET.bind(null,Xe,l.queue,!0,!1),Cn().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,p){var v=Xe,C=Cn();if(ut){if(p===void 0)throw Error(n(407));p=p()}else{if(p=u(),Pt===null)throw Error(n(349));(ot&127)!==0||nT(v,u,p)}C.memoizedState=p;var E={value:p,getSnapshot:u};return C.queue=E,vT(aT.bind(null,v,E,l),[l]),v.flags|=2048,Du(9,{destroy:void 0},sT.bind(null,v,E,p,u),null),p},useId:function(){var l=Cn(),u=Pt.identifierPrefix;if(ut){var p=La,v=Ia;p=(v&~(1<<32-sr(v)-1)).toString(32)+p,u="_"+u+"R_"+p,p=Ng++,0<p&&(u+="H"+p.toString(32)),u+="_"}else p=iY++,u="_"+u+"r_"+p.toString(32)+"_";return l.memoizedState=u},useHostTransitionStatus:r1,useFormState:hT,useActionState:hT,useOptimistic:function(l){var u=Cn();u.memoizedState=u.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=p,u=n1.bind(null,Xe,!0,p),p.dispatch=u,[l,u]},useMemoCache:Gw,useCacheRefresh:function(){return Cn().memoizedState=fY.bind(null,Xe)},useEffectEvent:function(l){var u=Cn(),p={impl:l};return u.memoizedState=p,function(){if((bt&2)!==0)throw Error(n(440));return p.impl.apply(void 0,arguments)}}},s1={readContext:tn,use:_g,useCallback:_T,useContext:tn,useEffect:Zw,useImperativeHandle:ST,useInsertionEffect:wT,useLayoutEffect:jT,useMemo:CT,useReducer:Cg,useRef:yT,useState:function(){return Cg(_i)},useDebugValue:Jw,useDeferredValue:function(l,u){var p=gr();return kT(p,At.memoizedState,l,u)},useTransition:function(){var l=Cg(_i)[0],u=gr().memoizedState;return[typeof l=="boolean"?l:rm(l),u]},useSyncExternalStore:rT,useId:OT,useHostTransitionStatus:r1,useFormState:pT,useActionState:pT,useOptimistic:function(l,u){var p=gr();return lT(p,At,l,u)},useMemoCache:Gw,useCacheRefresh:PT};s1.useEffectEvent=bT;var LT={readContext:tn,use:_g,useCallback:_T,useContext:tn,useEffect:Zw,useImperativeHandle:ST,useInsertionEffect:wT,useLayoutEffect:jT,useMemo:CT,useReducer:Qw,useRef:yT,useState:function(){return Qw(_i)},useDebugValue:Jw,useDeferredValue:function(l,u){var p=gr();return At===null?e1(p,l,u):kT(p,At.memoizedState,l,u)},useTransition:function(){var l=Qw(_i)[0],u=gr().memoizedState;return[typeof l=="boolean"?l:rm(l),u]},useSyncExternalStore:rT,useId:OT,useHostTransitionStatus:r1,useFormState:xT,useActionState:xT,useOptimistic:function(l,u){var p=gr();return At!==null?lT(p,At,l,u):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:Gw,useCacheRefresh:PT};LT.useEffectEvent=bT;function a1(l,u,p,v){u=l.memoizedState,p=p(v,u),p=p==null?u:h({},u,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var i1={enqueueSetState:function(l,u,p){l=l._reactInternals;var v=ss(),C=Lo(v);C.payload=u,p!=null&&(C.callback=p),u=$o(l,C,v),u!==null&&(qn(u,l,v),Zf(u,l,v))},enqueueReplaceState:function(l,u,p){l=l._reactInternals;var v=ss(),C=Lo(v);C.tag=1,C.payload=u,p!=null&&(C.callback=p),u=$o(l,C,v),u!==null&&(qn(u,l,v),Zf(u,l,v))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var p=ss(),v=Lo(p);v.tag=2,u!=null&&(v.callback=u),u=$o(l,v,p),u!==null&&(qn(u,l,p),Zf(u,l,p))}};function $T(l,u,p,v,C,E,$){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(v,E,$):u.prototype&&u.prototype.isPureReactComponent?!Vf(p,v)||!Vf(C,E):!0}function zT(l,u,p,v){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,v),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,v),u.state!==l&&i1.enqueueReplaceState(u,u.state,null)}function ec(l,u){var p=u;if("ref"in u){p={};for(var v in u)v!=="ref"&&(p[v]=u[v])}if(l=l.defaultProps){p===u&&(p=h({},p));for(var C in l)p[C]===void 0&&(p[C]=l[C])}return p}function UT(l){og(l)}function FT(l){console.error(l)}function BT(l){og(l)}function Tg(l,u){try{var p=l.onUncaughtError;p(u.value,{componentStack:u.stack})}catch(v){setTimeout(function(){throw v})}}function qT(l,u,p){try{var v=l.onCaughtError;v(p.value,{componentStack:p.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function o1(l,u,p){return p=Lo(p),p.tag=3,p.payload={element:null},p.callback=function(){Tg(l,u)},p}function VT(l){return l=Lo(l),l.tag=3,l}function KT(l,u,p,v){var C=p.type.getDerivedStateFromError;if(typeof C=="function"){var E=v.value;l.payload=function(){return C(E)},l.callback=function(){qT(u,p,v)}}var $=p.stateNode;$!==null&&typeof $.componentDidCatch=="function"&&(l.callback=function(){qT(u,p,v),typeof C!="function"&&(Vo===null?Vo=new Set([this]):Vo.add(this));var W=v.stack;this.componentDidCatch(v.value,{componentStack:W!==null?W:""})})}function hY(l,u,p,v,C){if(p.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){if(u=p.alternate,u!==null&&ku(u,p,C,!0),p=es.current,p!==null){switch(p.tag){case 31:case 13:return Os===null?Bg():p.alternate===null&&ir===0&&(ir=3),p.flags&=-257,p.flags|=65536,p.lanes=C,v===xg?p.flags|=16384:(u=p.updateQueue,u===null?p.updateQueue=new Set([v]):u.add(v),P1(l,v,C)),!1;case 22:return p.flags|=65536,v===xg?p.flags|=16384:(u=p.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([v])},p.updateQueue=u):(p=u.retryQueue,p===null?u.retryQueue=new Set([v]):p.add(v)),P1(l,v,C)),!1}throw Error(n(435,p.tag))}return P1(l,v,C),Bg(),!1}if(ut)return u=es.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=C,v!==Cw&&(l=Error(n(422),{cause:v}),Gf(ks(l,p)))):(v!==Cw&&(u=Error(n(423),{cause:v}),Gf(ks(u,p))),l=l.current.alternate,l.flags|=65536,C&=-C,l.lanes|=C,v=ks(v,p),C=o1(l.stateNode,v,C),Lw(l,C),ir!==4&&(ir=2)),!1;var E=Error(n(520),{cause:v});if(E=ks(E,p),fm===null?fm=[E]:fm.push(E),ir!==4&&(ir=2),u===null)return!0;v=ks(v,p),p=u;do{switch(p.tag){case 3:return p.flags|=65536,l=C&-C,p.lanes|=l,l=o1(p.stateNode,v,l),Lw(p,l),!1;case 1:if(u=p.type,E=p.stateNode,(p.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Vo===null||!Vo.has(E))))return p.flags|=65536,C&=-C,p.lanes|=C,C=VT(C),KT(C,l,p,v),Lw(p,C),!1}p=p.return}while(p!==null);return!1}var l1=Error(n(461)),_r=!1;function rn(l,u,p,v){u.child=l===null?Q5(u,null,p,v):Zl(u,l.child,p,v)}function HT(l,u,p,v,C){p=p.render;var E=u.ref;if("ref"in v){var $={};for(var W in v)W!=="ref"&&($[W]=v[W])}else $=v;return Wl(u),v=qw(l,u,p,$,E,C),W=Vw(),l!==null&&!_r?(Kw(l,u,C),Ci(l,u,C)):(ut&&W&&Sw(u),u.flags|=1,rn(l,u,v,C),u.child)}function GT(l,u,p,v,C){if(l===null){var E=p.type;return typeof E=="function"&&!ww(E)&&E.defaultProps===void 0&&p.compare===null?(u.tag=15,u.type=E,WT(l,u,E,v,C)):(l=dg(p.type,null,v,u,u.mode,C),l.ref=u.ref,l.return=u,u.child=l)}if(E=l.child,!g1(l,C)){var $=E.memoizedProps;if(p=p.compare,p=p!==null?p:Vf,p($,v)&&l.ref===u.ref)return Ci(l,u,C)}return u.flags|=1,l=bi(E,v),l.ref=u.ref,l.return=u,u.child=l}function WT(l,u,p,v,C){if(l!==null){var E=l.memoizedProps;if(Vf(E,v)&&l.ref===u.ref)if(_r=!1,u.pendingProps=v=E,g1(l,C))(l.flags&131072)!==0&&(_r=!0);else return u.lanes=l.lanes,Ci(l,u,C)}return c1(l,u,p,v,C)}function QT(l,u,p,v){var C=v.children,E=l!==null?l.memoizedState:null;if(l===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),v.mode==="hidden"){if((u.flags&128)!==0){if(E=E!==null?E.baseLanes|p:p,l!==null){for(v=u.child=l.child,C=0;v!==null;)C=C|v.lanes|v.childLanes,v=v.sibling;v=C&~E}else v=0,u.child=null;return YT(l,u,E,p,v)}if((p&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&pg(u,E!==null?E.cachePool:null),E!==null?Z5(u,E):zw(),J5(u);else return v=u.lanes=536870912,YT(l,u,E!==null?E.baseLanes|p:p,p,v)}else E!==null?(pg(u,E.cachePool),Z5(u,E),Uo(),u.memoizedState=null):(l!==null&&pg(u,null),zw(),Uo());return rn(l,u,C,p),u.child}function am(l,u){return l!==null&&l.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function YT(l,u,p,v,C){var E=Mw();return E=E===null?null:{parent:Nr._currentValue,pool:E},u.memoizedState={baseLanes:p,cachePool:E},l!==null&&pg(u,null),zw(),J5(u),l!==null&&ku(l,u,v,!0),u.childLanes=C,null}function Og(l,u){return u=Mg({mode:u.mode,children:u.children},l.mode),u.ref=l.ref,l.child=u,u.return=l,u}function XT(l,u,p){return Zl(u,l.child,null,p),l=Og(u,u.pendingProps),l.flags|=2,ts(u),u.memoizedState=null,l}function pY(l,u,p){var v=u.pendingProps,C=(u.flags&128)!==0;if(u.flags&=-129,l===null){if(ut){if(v.mode==="hidden")return l=Og(u,v),u.lanes=536870912,am(null,l);if(Fw(u),(l=zt)?(l=cO(l,Ts),l=l!==null&&l.data==="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Po!==null?{id:Ia,overflow:La}:null,retryLane:536870912,hydrationErrors:null},p=R5(l),p.return=u,u.child=p,en=u,zt=null)):l=null,l===null)throw Ro(u);return u.lanes=536870912,null}return Og(u,v)}var E=l.memoizedState;if(E!==null){var $=E.dehydrated;if(Fw(u),C)if(u.flags&256)u.flags&=-257,u=XT(l,u,p);else if(u.memoizedState!==null)u.child=l.child,u.flags|=128,u=null;else throw Error(n(558));else if(_r||ku(l,u,p,!1),C=(p&l.childLanes)!==0,_r||C){if(v=Pt,v!==null&&($=qp(v,p),$!==0&&$!==E.retryLane))throw E.retryLane=$,Vl(l,$),qn(v,l,$),l1;Bg(),u=XT(l,u,p)}else l=E.treeContext,zt=Ps($.nextSibling),en=u,ut=!0,Mo=null,Ts=!1,l!==null&&L5(u,l),u=Og(u,v),u.flags|=4096;return u}return l=bi(l.child,{mode:v.mode,children:v.children}),l.ref=u.ref,u.child=l,l.return=u,l}function Pg(l,u){var p=u.ref;if(p===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(n(284));(l===null||l.ref!==p)&&(u.flags|=4194816)}}function c1(l,u,p,v,C){return Wl(u),p=qw(l,u,p,v,void 0,C),v=Vw(),l!==null&&!_r?(Kw(l,u,C),Ci(l,u,C)):(ut&&v&&Sw(u),u.flags|=1,rn(l,u,p,C),u.child)}function ZT(l,u,p,v,C,E){return Wl(u),u.updateQueue=null,p=tT(u,v,p,C),eT(l),v=Vw(),l!==null&&!_r?(Kw(l,u,E),Ci(l,u,E)):(ut&&v&&Sw(u),u.flags|=1,rn(l,u,p,E),u.child)}function JT(l,u,p,v,C){if(Wl(u),u.stateNode===null){var E=Nu,$=p.contextType;typeof $=="object"&&$!==null&&(E=tn($)),E=new p(v,E),u.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=i1,u.stateNode=E,E._reactInternals=u,E=u.stateNode,E.props=v,E.state=u.memoizedState,E.refs={},Dw(u),$=p.contextType,E.context=typeof $=="object"&&$!==null?tn($):Nu,E.state=u.memoizedState,$=p.getDerivedStateFromProps,typeof $=="function"&&(a1(u,p,$,v),E.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||($=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),$!==E.state&&i1.enqueueReplaceState(E,E.state,null),em(u,v,E,C),Jf(),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308),v=!0}else if(l===null){E=u.stateNode;var W=u.memoizedProps,re=ec(p,W);E.props=re;var de=E.context,be=p.contextType;$=Nu,typeof be=="object"&&be!==null&&($=tn(be));var Se=p.getDerivedStateFromProps;be=typeof Se=="function"||typeof E.getSnapshotBeforeUpdate=="function",W=u.pendingProps!==W,be||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(W||de!==$)&&zT(u,E,v,$),Io=!1;var me=u.memoizedState;E.state=me,em(u,v,E,C),Jf(),de=u.memoizedState,W||me!==de||Io?(typeof Se=="function"&&(a1(u,p,Se,v),de=u.memoizedState),(re=Io||$T(u,p,re,v,me,de,$))?(be||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(u.flags|=4194308)):(typeof E.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=v,u.memoizedState=de),E.props=v,E.state=de,E.context=$,v=re):(typeof E.componentDidMount=="function"&&(u.flags|=4194308),v=!1)}else{E=u.stateNode,Iw(l,u),$=u.memoizedProps,be=ec(p,$),E.props=be,Se=u.pendingProps,me=E.context,de=p.contextType,re=Nu,typeof de=="object"&&de!==null&&(re=tn(de)),W=p.getDerivedStateFromProps,(de=typeof W=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||($!==Se||me!==re)&&zT(u,E,v,re),Io=!1,me=u.memoizedState,E.state=me,em(u,v,E,C),Jf();var xe=u.memoizedState;$!==Se||me!==xe||Io||l!==null&&l.dependencies!==null&&mg(l.dependencies)?(typeof W=="function"&&(a1(u,p,W,v),xe=u.memoizedState),(be=Io||$T(u,p,be,v,me,xe,re)||l!==null&&l.dependencies!==null&&mg(l.dependencies))?(de||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(v,xe,re),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(v,xe,re)),typeof E.componentDidUpdate=="function"&&(u.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof E.componentDidUpdate!="function"||$===l.memoizedProps&&me===l.memoizedState||(u.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||$===l.memoizedProps&&me===l.memoizedState||(u.flags|=1024),u.memoizedProps=v,u.memoizedState=xe),E.props=v,E.state=xe,E.context=re,v=be):(typeof E.componentDidUpdate!="function"||$===l.memoizedProps&&me===l.memoizedState||(u.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||$===l.memoizedProps&&me===l.memoizedState||(u.flags|=1024),v=!1)}return E=v,Pg(l,u),v=(u.flags&128)!==0,E||v?(E=u.stateNode,p=v&&typeof p.getDerivedStateFromError!="function"?null:E.render(),u.flags|=1,l!==null&&v?(u.child=Zl(u,l.child,null,C),u.child=Zl(u,null,p,C)):rn(l,u,p,C),u.memoizedState=E.state,l=u.child):l=Ci(l,u,C),l}function e3(l,u,p,v){return Hl(),u.flags|=256,rn(l,u,p,v),u.child}var u1={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function d1(l){return{baseLanes:l,cachePool:q5()}}function f1(l,u,p){return l=l!==null?l.childLanes&~p:0,u&&(l|=ns),l}function t3(l,u,p){var v=u.pendingProps,C=!1,E=(u.flags&128)!==0,$;if(($=E)||($=l!==null&&l.memoizedState===null?!1:(pr.current&2)!==0),$&&(C=!0,u.flags&=-129),$=(u.flags&32)!==0,u.flags&=-33,l===null){if(ut){if(C?zo(u):Uo(),(l=zt)?(l=cO(l,Ts),l=l!==null&&l.data!=="&"?l:null,l!==null&&(u.memoizedState={dehydrated:l,treeContext:Po!==null?{id:Ia,overflow:La}:null,retryLane:536870912,hydrationErrors:null},p=R5(l),p.return=u,u.child=p,en=u,zt=null)):l=null,l===null)throw Ro(u);return W1(l)?u.lanes=32:u.lanes=536870912,null}var W=v.children;return v=v.fallback,C?(Uo(),C=u.mode,W=Mg({mode:"hidden",children:W},C),v=Kl(v,C,p,null),W.return=u,v.return=u,W.sibling=v,u.child=W,v=u.child,v.memoizedState=d1(p),v.childLanes=f1(l,$,p),u.memoizedState=u1,am(null,v)):(zo(u),m1(u,W))}var re=l.memoizedState;if(re!==null&&(W=re.dehydrated,W!==null)){if(E)u.flags&256?(zo(u),u.flags&=-257,u=h1(l,u,p)):u.memoizedState!==null?(Uo(),u.child=l.child,u.flags|=128,u=null):(Uo(),W=v.fallback,C=u.mode,v=Mg({mode:"visible",children:v.children},C),W=Kl(W,C,p,null),W.flags|=2,v.return=u,W.return=u,v.sibling=W,u.child=v,Zl(u,l.child,null,p),v=u.child,v.memoizedState=d1(p),v.childLanes=f1(l,$,p),u.memoizedState=u1,u=am(null,v));else if(zo(u),W1(W)){if($=W.nextSibling&&W.nextSibling.dataset,$)var de=$.dgst;$=de,v=Error(n(419)),v.stack="",v.digest=$,Gf({value:v,source:null,stack:null}),u=h1(l,u,p)}else if(_r||ku(l,u,p,!1),$=(p&l.childLanes)!==0,_r||$){if($=Pt,$!==null&&(v=qp($,p),v!==0&&v!==re.retryLane))throw re.retryLane=v,Vl(l,v),qn($,l,v),l1;G1(W)||Bg(),u=h1(l,u,p)}else G1(W)?(u.flags|=192,u.child=l.child,u=null):(l=re.treeContext,zt=Ps(W.nextSibling),en=u,ut=!0,Mo=null,Ts=!1,l!==null&&L5(u,l),u=m1(u,v.children),u.flags|=4096);return u}return C?(Uo(),W=v.fallback,C=u.mode,re=l.child,de=re.sibling,v=bi(re,{mode:"hidden",children:v.children}),v.subtreeFlags=re.subtreeFlags&65011712,de!==null?W=bi(de,W):(W=Kl(W,C,p,null),W.flags|=2),W.return=u,v.return=u,v.sibling=W,u.child=v,am(null,v),v=u.child,W=l.child.memoizedState,W===null?W=d1(p):(C=W.cachePool,C!==null?(re=Nr._currentValue,C=C.parent!==re?{parent:re,pool:re}:C):C=q5(),W={baseLanes:W.baseLanes|p,cachePool:C}),v.memoizedState=W,v.childLanes=f1(l,$,p),u.memoizedState=u1,am(l.child,v)):(zo(u),p=l.child,l=p.sibling,p=bi(p,{mode:"visible",children:v.children}),p.return=u,p.sibling=null,l!==null&&($=u.deletions,$===null?(u.deletions=[l],u.flags|=16):$.push(l)),u.child=p,u.memoizedState=null,p)}function m1(l,u){return u=Mg({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function Mg(l,u){return l=Jn(22,l,null,u),l.lanes=0,l}function h1(l,u,p){return Zl(u,l.child,null,p),l=m1(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function r3(l,u,p){l.lanes|=u;var v=l.alternate;v!==null&&(v.lanes|=u),Aw(l.return,u,p)}function p1(l,u,p,v,C,E){var $=l.memoizedState;$===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:v,tail:p,tailMode:C,treeForkCount:E}:($.isBackwards=u,$.rendering=null,$.renderingStartTime=0,$.last=v,$.tail=p,$.tailMode=C,$.treeForkCount=E)}function n3(l,u,p){var v=u.pendingProps,C=v.revealOrder,E=v.tail;v=v.children;var $=pr.current,W=($&2)!==0;if(W?($=$&1|2,u.flags|=128):$&=1,ee(pr,$),rn(l,u,v,p),v=ut?Hf:0,!W&&l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&r3(l,p,u);else if(l.tag===19)r3(l,p,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(C){case"forwards":for(p=u.child,C=null;p!==null;)l=p.alternate,l!==null&&wg(l)===null&&(C=p),p=p.sibling;p=C,p===null?(C=u.child,u.child=null):(C=p.sibling,p.sibling=null),p1(u,!1,C,p,E,v);break;case"backwards":case"unstable_legacy-backwards":for(p=null,C=u.child,u.child=null;C!==null;){if(l=C.alternate,l!==null&&wg(l)===null){u.child=C;break}l=C.sibling,C.sibling=p,p=C,C=l}p1(u,!0,p,null,E,v);break;case"together":p1(u,!1,null,null,void 0,v);break;default:u.memoizedState=null}return u.child}function Ci(l,u,p){if(l!==null&&(u.dependencies=l.dependencies),qo|=u.lanes,(p&u.childLanes)===0)if(l!==null){if(ku(l,u,p,!1),(p&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(n(153));if(u.child!==null){for(l=u.child,p=bi(l,l.pendingProps),u.child=p,p.return=u;l.sibling!==null;)l=l.sibling,p=p.sibling=bi(l,l.pendingProps),p.return=u;p.sibling=null}return u.child}function g1(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&mg(l)))}function gY(l,u,p){switch(u.tag){case 3:oe(u,u.stateNode.containerInfo),Do(u,Nr,l.memoizedState.cache),Hl();break;case 27:case 5:pe(u);break;case 4:oe(u,u.stateNode.containerInfo);break;case 10:Do(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,Fw(u),null;break;case 13:var v=u.memoizedState;if(v!==null)return v.dehydrated!==null?(zo(u),u.flags|=128,null):(p&u.child.childLanes)!==0?t3(l,u,p):(zo(u),l=Ci(l,u,p),l!==null?l.sibling:null);zo(u);break;case 19:var C=(l.flags&128)!==0;if(v=(p&u.childLanes)!==0,v||(ku(l,u,p,!1),v=(p&u.childLanes)!==0),C){if(v)return n3(l,u,p);u.flags|=128}if(C=u.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),ee(pr,pr.current),v)break;return null;case 22:return u.lanes=0,QT(l,u,p,u.pendingProps);case 24:Do(u,Nr,l.memoizedState.cache)}return Ci(l,u,p)}function s3(l,u,p){if(l!==null)if(l.memoizedProps!==u.pendingProps)_r=!0;else{if(!g1(l,p)&&(u.flags&128)===0)return _r=!1,gY(l,u,p);_r=(l.flags&131072)!==0}else _r=!1,ut&&(u.flags&1048576)!==0&&I5(u,Hf,u.index);switch(u.lanes=0,u.tag){case 16:e:{var v=u.pendingProps;if(l=Yl(u.elementType),u.type=l,typeof l=="function")ww(l)?(v=ec(l,v),u.tag=1,u=JT(null,u,l,v,p)):(u.tag=0,u=c1(null,u,l,v,p));else{if(l!=null){var C=l.$$typeof;if(C===k){u.tag=11,u=HT(null,u,l,v,p);break e}else if(C===O){u.tag=14,u=GT(null,u,l,v,p);break e}}throw u=I(l)||l,Error(n(306,u,""))}}return u;case 0:return c1(l,u,u.type,u.pendingProps,p);case 1:return v=u.type,C=ec(v,u.pendingProps),JT(l,u,v,C,p);case 3:e:{if(oe(u,u.stateNode.containerInfo),l===null)throw Error(n(387));v=u.pendingProps;var E=u.memoizedState;C=E.element,Iw(l,u),em(u,v,null,p);var $=u.memoizedState;if(v=$.cache,Do(u,Nr,v),v!==E.cache&&Tw(u,[Nr],p,!0),Jf(),v=$.element,E.isDehydrated)if(E={element:v,isDehydrated:!1,cache:$.cache},u.updateQueue.baseState=E,u.memoizedState=E,u.flags&256){u=e3(l,u,v,p);break e}else if(v!==C){C=ks(Error(n(424)),u),Gf(C),u=e3(l,u,v,p);break e}else for(l=u.stateNode.containerInfo,l.nodeType===9?l=l.body:l=l.nodeName==="HTML"?l.ownerDocument.body:l,zt=Ps(l.firstChild),en=u,ut=!0,Mo=null,Ts=!0,p=Q5(u,null,v,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling;else{if(Hl(),v===C){u=Ci(l,u,p);break e}rn(l,u,v,p)}u=u.child}return u;case 26:return Pg(l,u),l===null?(p=pO(u.type,null,u.pendingProps,null))?u.memoizedState=p:ut||(p=u.type,l=u.pendingProps,v=Qg(se.current).createElement(p),v[Mr]=u,v[gn]=l,nn(v,p,l),jr(v),u.stateNode=v):u.memoizedState=pO(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return pe(u),l===null&&ut&&(v=u.stateNode=fO(u.type,u.pendingProps,se.current),en=u,Ts=!0,C=zt,Wo(u.type)?(Q1=C,zt=Ps(v.firstChild)):zt=C),rn(l,u,u.pendingProps.children,p),Pg(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&ut&&((C=v=zt)&&(v=HY(v,u.type,u.pendingProps,Ts),v!==null?(u.stateNode=v,en=u,zt=Ps(v.firstChild),Ts=!1,C=!0):C=!1),C||Ro(u)),pe(u),C=u.type,E=u.pendingProps,$=l!==null?l.memoizedProps:null,v=E.children,V1(C,E)?v=null:$!==null&&V1(C,$)&&(u.flags|=32),u.memoizedState!==null&&(C=qw(l,u,oY,null,null,p),bm._currentValue=C),Pg(l,u),rn(l,u,v,p),u.child;case 6:return l===null&&ut&&((l=p=zt)&&(p=GY(p,u.pendingProps,Ts),p!==null?(u.stateNode=p,en=u,zt=null,l=!0):l=!1),l||Ro(u)),null;case 13:return t3(l,u,p);case 4:return oe(u,u.stateNode.containerInfo),v=u.pendingProps,l===null?u.child=Zl(u,null,v,p):rn(l,u,v,p),u.child;case 11:return HT(l,u,u.type,u.pendingProps,p);case 7:return rn(l,u,u.pendingProps,p),u.child;case 8:return rn(l,u,u.pendingProps.children,p),u.child;case 12:return rn(l,u,u.pendingProps.children,p),u.child;case 10:return v=u.pendingProps,Do(u,u.type,v.value),rn(l,u,v.children,p),u.child;case 9:return C=u.type._context,v=u.pendingProps.children,Wl(u),C=tn(C),v=v(C),u.flags|=1,rn(l,u,v,p),u.child;case 14:return GT(l,u,u.type,u.pendingProps,p);case 15:return WT(l,u,u.type,u.pendingProps,p);case 19:return n3(l,u,p);case 31:return pY(l,u,p);case 22:return QT(l,u,p,u.pendingProps);case 24:return Wl(u),v=tn(Nr),l===null?(C=Mw(),C===null&&(C=Pt,E=Ow(),C.pooledCache=E,E.refCount++,E!==null&&(C.pooledCacheLanes|=p),C=E),u.memoizedState={parent:v,cache:C},Dw(u),Do(u,Nr,C)):((l.lanes&p)!==0&&(Iw(l,u),em(u,null,null,p),Jf()),C=l.memoizedState,E=u.memoizedState,C.parent!==v?(C={parent:v,cache:v},u.memoizedState=C,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=C),Do(u,Nr,v)):(v=E.cache,Do(u,Nr,v),v!==C.cache&&Tw(u,[Nr],p,!0))),rn(l,u,u.pendingProps.children,p),u.child;case 29:throw u.pendingProps}throw Error(n(156,u.tag))}function ki(l){l.flags|=4}function x1(l,u,p,v,C){if((u=(l.mode&32)!==0)&&(u=!1),u){if(l.flags|=16777216,(C&335544128)===C)if(l.stateNode.complete)l.flags|=8192;else if(O3())l.flags|=8192;else throw Xl=xg,Rw}else l.flags&=-16777217}function a3(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!bO(u))if(O3())l.flags|=8192;else throw Xl=xg,Rw}function Rg(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?Up():536870912,l.lanes|=u,zu|=u)}function im(l,u){if(!ut)switch(l.tailMode){case"hidden":u=l.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var v=null;p!==null;)p.alternate!==null&&(v=p),p=p.sibling;v===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:v.sibling=null}}function Ut(l){var u=l.alternate!==null&&l.alternate.child===l.child,p=0,v=0;if(u)for(var C=l.child;C!==null;)p|=C.lanes|C.childLanes,v|=C.subtreeFlags&65011712,v|=C.flags&65011712,C.return=l,C=C.sibling;else for(C=l.child;C!==null;)p|=C.lanes|C.childLanes,v|=C.subtreeFlags,v|=C.flags,C.return=l,C=C.sibling;return l.subtreeFlags|=v,l.childLanes=p,u}function xY(l,u,p){var v=u.pendingProps;switch(_w(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(u),null;case 1:return Ut(u),null;case 3:return p=u.stateNode,v=null,l!==null&&(v=l.memoizedState.cache),u.memoizedState.cache!==v&&(u.flags|=2048),Ni(Nr),Q(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(Cu(u)?ki(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,kw())),Ut(u),null;case 26:var C=u.type,E=u.memoizedState;return l===null?(ki(u),E!==null?(Ut(u),a3(u,E)):(Ut(u),x1(u,C,null,v,p))):E?E!==l.memoizedState?(ki(u),Ut(u),a3(u,E)):(Ut(u),u.flags&=-16777217):(l=l.memoizedProps,l!==v&&ki(u),Ut(u),x1(u,C,l,v,p)),null;case 27:if(he(u),p=se.current,C=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==v&&ki(u);else{if(!v){if(u.stateNode===null)throw Error(n(166));return Ut(u),null}l=ae.current,Cu(u)?$5(u):(l=fO(C,v,p),u.stateNode=l,ki(u))}return Ut(u),null;case 5:if(he(u),C=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==v&&ki(u);else{if(!v){if(u.stateNode===null)throw Error(n(166));return Ut(u),null}if(E=ae.current,Cu(u))$5(u);else{var $=Qg(se.current);switch(E){case 1:E=$.createElementNS("http://www.w3.org/2000/svg",C);break;case 2:E=$.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;default:switch(C){case"svg":E=$.createElementNS("http://www.w3.org/2000/svg",C);break;case"math":E=$.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;case"script":E=$.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof v.is=="string"?$.createElement("select",{is:v.is}):$.createElement("select"),v.multiple?E.multiple=!0:v.size&&(E.size=v.size);break;default:E=typeof v.is=="string"?$.createElement(C,{is:v.is}):$.createElement(C)}}E[Mr]=u,E[gn]=v;e:for($=u.child;$!==null;){if($.tag===5||$.tag===6)E.appendChild($.stateNode);else if($.tag!==4&&$.tag!==27&&$.child!==null){$.child.return=$,$=$.child;continue}if($===u)break e;for(;$.sibling===null;){if($.return===null||$.return===u)break e;$=$.return}$.sibling.return=$.return,$=$.sibling}u.stateNode=E;e:switch(nn(E,C,v),C){case"button":case"input":case"select":case"textarea":v=!!v.autoFocus;break e;case"img":v=!0;break e;default:v=!1}v&&ki(u)}}return Ut(u),x1(u,u.type,l===null?null:l.memoizedProps,u.pendingProps,p),null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==v&&ki(u);else{if(typeof v!="string"&&u.stateNode===null)throw Error(n(166));if(l=se.current,Cu(u)){if(l=u.stateNode,p=u.memoizedProps,v=null,C=en,C!==null)switch(C.tag){case 27:case 5:v=C.memoizedProps}l[Mr]=u,l=!!(l.nodeValue===p||v!==null&&v.suppressHydrationWarning===!0||tO(l.nodeValue,p)),l||Ro(u,!0)}else l=Qg(l).createTextNode(v),l[Mr]=u,u.stateNode=l}return Ut(u),null;case 31:if(p=u.memoizedState,l===null||l.memoizedState!==null){if(v=Cu(u),p!==null){if(l===null){if(!v)throw Error(n(318));if(l=u.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(n(557));l[Mr]=u}else Hl(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ut(u),l=!1}else p=kw(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=p),l=!0;if(!l)return u.flags&256?(ts(u),u):(ts(u),null);if((u.flags&128)!==0)throw Error(n(558))}return Ut(u),null;case 13:if(v=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(C=Cu(u),v!==null&&v.dehydrated!==null){if(l===null){if(!C)throw Error(n(318));if(C=u.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(n(317));C[Mr]=u}else Hl(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Ut(u),C=!1}else C=kw(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=C),C=!0;if(!C)return u.flags&256?(ts(u),u):(ts(u),null)}return ts(u),(u.flags&128)!==0?(u.lanes=p,u):(p=v!==null,l=l!==null&&l.memoizedState!==null,p&&(v=u.child,C=null,v.alternate!==null&&v.alternate.memoizedState!==null&&v.alternate.memoizedState.cachePool!==null&&(C=v.alternate.memoizedState.cachePool.pool),E=null,v.memoizedState!==null&&v.memoizedState.cachePool!==null&&(E=v.memoizedState.cachePool.pool),E!==C&&(v.flags|=2048)),p!==l&&p&&(u.child.flags|=8192),Rg(u,u.updateQueue),Ut(u),null);case 4:return Q(),l===null&&z1(u.stateNode.containerInfo),Ut(u),null;case 10:return Ni(u.type),Ut(u),null;case 19:if(V(pr),v=u.memoizedState,v===null)return Ut(u),null;if(C=(u.flags&128)!==0,E=v.rendering,E===null)if(C)im(v,!1);else{if(ir!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(E=wg(l),E!==null){for(u.flags|=128,im(v,!1),l=E.updateQueue,u.updateQueue=l,Rg(u,l),u.subtreeFlags=0,l=p,p=u.child;p!==null;)M5(p,l),p=p.sibling;return ee(pr,pr.current&1|2),ut&&wi(u,v.treeForkCount),u.child}l=l.sibling}v.tail!==null&&nr()>zg&&(u.flags|=128,C=!0,im(v,!1),u.lanes=4194304)}else{if(!C)if(l=wg(E),l!==null){if(u.flags|=128,C=!0,l=l.updateQueue,u.updateQueue=l,Rg(u,l),im(v,!0),v.tail===null&&v.tailMode==="hidden"&&!E.alternate&&!ut)return Ut(u),null}else 2*nr()-v.renderingStartTime>zg&&p!==536870912&&(u.flags|=128,C=!0,im(v,!1),u.lanes=4194304);v.isBackwards?(E.sibling=u.child,u.child=E):(l=v.last,l!==null?l.sibling=E:u.child=E,v.last=E)}return v.tail!==null?(l=v.tail,v.rendering=l,v.tail=l.sibling,v.renderingStartTime=nr(),l.sibling=null,p=pr.current,ee(pr,C?p&1|2:p&1),ut&&wi(u,v.treeForkCount),l):(Ut(u),null);case 22:case 23:return ts(u),Uw(),v=u.memoizedState!==null,l!==null?l.memoizedState!==null!==v&&(u.flags|=8192):v&&(u.flags|=8192),v?(p&536870912)!==0&&(u.flags&128)===0&&(Ut(u),u.subtreeFlags&6&&(u.flags|=8192)):Ut(u),p=u.updateQueue,p!==null&&Rg(u,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),v=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(v=u.memoizedState.cachePool.pool),v!==p&&(u.flags|=2048),l!==null&&V(Ql),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),Ni(Nr),Ut(u),null;case 25:return null;case 30:return null}throw Error(n(156,u.tag))}function yY(l,u){switch(_w(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Ni(Nr),Q(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return he(u),null;case 31:if(u.memoizedState!==null){if(ts(u),u.alternate===null)throw Error(n(340));Hl()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 13:if(ts(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(n(340));Hl()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return V(pr),null;case 4:return Q(),null;case 10:return Ni(u.type),null;case 22:case 23:return ts(u),Uw(),l!==null&&V(Ql),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return Ni(Nr),null;case 25:return null;default:return null}}function i3(l,u){switch(_w(u),u.tag){case 3:Ni(Nr),Q();break;case 26:case 27:case 5:he(u);break;case 4:Q();break;case 31:u.memoizedState!==null&&ts(u);break;case 13:ts(u);break;case 19:V(pr);break;case 10:Ni(u.type);break;case 22:case 23:ts(u),Uw(),l!==null&&V(Ql);break;case 24:Ni(Nr)}}function om(l,u){try{var p=u.updateQueue,v=p!==null?p.lastEffect:null;if(v!==null){var C=v.next;p=C;do{if((p.tag&l)===l){v=void 0;var E=p.create,$=p.inst;v=E(),$.destroy=v}p=p.next}while(p!==C)}}catch(W){Ct(u,u.return,W)}}function Fo(l,u,p){try{var v=u.updateQueue,C=v!==null?v.lastEffect:null;if(C!==null){var E=C.next;v=E;do{if((v.tag&l)===l){var $=v.inst,W=$.destroy;if(W!==void 0){$.destroy=void 0,C=u;var re=p,de=W;try{de()}catch(be){Ct(C,re,be)}}}v=v.next}while(v!==E)}}catch(be){Ct(u,u.return,be)}}function o3(l){var u=l.updateQueue;if(u!==null){var p=l.stateNode;try{X5(u,p)}catch(v){Ct(l,l.return,v)}}}function l3(l,u,p){p.props=ec(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(v){Ct(l,u,v)}}function lm(l,u){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var v=l.stateNode;break;case 30:v=l.stateNode;break;default:v=l.stateNode}typeof p=="function"?l.refCleanup=p(v):p.current=v}}catch(C){Ct(l,u,C)}}function $a(l,u){var p=l.ref,v=l.refCleanup;if(p!==null)if(typeof v=="function")try{v()}catch(C){Ct(l,u,C)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(C){Ct(l,u,C)}else p.current=null}function c3(l){var u=l.type,p=l.memoizedProps,v=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":p.autoFocus&&v.focus();break e;case"img":p.src?v.src=p.src:p.srcSet&&(v.srcset=p.srcSet)}}catch(C){Ct(l,l.return,C)}}function y1(l,u,p){try{var v=l.stateNode;UY(v,l.type,p,u),v[gn]=u}catch(C){Ct(l,l.return,C)}}function u3(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Wo(l.type)||l.tag===4}function v1(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||u3(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Wo(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function b1(l,u,p){var v=l.tag;if(v===5||v===6)l=l.stateNode,u?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,u):(u=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,u.appendChild(l),p=p._reactRootContainer,p!=null||u.onclick!==null||(u.onclick=yi));else if(v!==4&&(v===27&&Wo(l.type)&&(p=l.stateNode,u=null),l=l.child,l!==null))for(b1(l,u,p),l=l.sibling;l!==null;)b1(l,u,p),l=l.sibling}function Dg(l,u,p){var v=l.tag;if(v===5||v===6)l=l.stateNode,u?p.insertBefore(l,u):p.appendChild(l);else if(v!==4&&(v===27&&Wo(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(Dg(l,u,p),l=l.sibling;l!==null;)Dg(l,u,p),l=l.sibling}function d3(l){var u=l.stateNode,p=l.memoizedProps;try{for(var v=l.type,C=u.attributes;C.length;)u.removeAttributeNode(C[0]);nn(u,v,p),u[Mr]=l,u[gn]=p}catch(E){Ct(l,l.return,E)}}var Ei=!1,Cr=!1,w1=!1,f3=typeof WeakSet=="function"?WeakSet:Set,Kr=null;function vY(l,u){if(l=l.containerInfo,B1=rx,l=S5(l),hw(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var v=p.getSelection&&p.getSelection();if(v&&v.rangeCount!==0){p=v.anchorNode;var C=v.anchorOffset,E=v.focusNode;v=v.focusOffset;try{p.nodeType,E.nodeType}catch{p=null;break e}var $=0,W=-1,re=-1,de=0,be=0,Se=l,me=null;t:for(;;){for(var xe;Se!==p||C!==0&&Se.nodeType!==3||(W=$+C),Se!==E||v!==0&&Se.nodeType!==3||(re=$+v),Se.nodeType===3&&($+=Se.nodeValue.length),(xe=Se.firstChild)!==null;)me=Se,Se=xe;for(;;){if(Se===l)break t;if(me===p&&++de===C&&(W=$),me===E&&++be===v&&(re=$),(xe=Se.nextSibling)!==null)break;Se=me,me=Se.parentNode}Se=xe}p=W===-1||re===-1?null:{start:W,end:re}}else p=null}p=p||{start:0,end:0}}else p=null;for(q1={focusedElem:l,selectionRange:p},rx=!1,Kr=u;Kr!==null;)if(u=Kr,l=u.child,(u.subtreeFlags&1028)!==0&&l!==null)l.return=u,Kr=l;else for(;Kr!==null;){switch(u=Kr,E=u.alternate,l=u.flags,u.tag){case 0:if((l&4)!==0&&(l=u.updateQueue,l=l!==null?l.events:null,l!==null))for(p=0;p<l.length;p++)C=l[p],C.ref.impl=C.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&E!==null){l=void 0,p=u,C=E.memoizedProps,E=E.memoizedState,v=p.stateNode;try{var Oe=ec(p.type,C);l=v.getSnapshotBeforeUpdate(Oe,E),v.__reactInternalSnapshotBeforeUpdate=l}catch(He){Ct(p,p.return,He)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,p=l.nodeType,p===9)H1(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":H1(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(n(163))}if(l=u.sibling,l!==null){l.return=u.return,Kr=l;break}Kr=u.return}}function m3(l,u,p){var v=p.flags;switch(p.tag){case 0:case 11:case 15:Ti(l,p),v&4&&om(5,p);break;case 1:if(Ti(l,p),v&4)if(l=p.stateNode,u===null)try{l.componentDidMount()}catch($){Ct(p,p.return,$)}else{var C=ec(p.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(C,u,l.__reactInternalSnapshotBeforeUpdate)}catch($){Ct(p,p.return,$)}}v&64&&o3(p),v&512&&lm(p,p.return);break;case 3:if(Ti(l,p),v&64&&(l=p.updateQueue,l!==null)){if(u=null,p.child!==null)switch(p.child.tag){case 27:case 5:u=p.child.stateNode;break;case 1:u=p.child.stateNode}try{X5(l,u)}catch($){Ct(p,p.return,$)}}break;case 27:u===null&&v&4&&d3(p);case 26:case 5:Ti(l,p),u===null&&v&4&&c3(p),v&512&&lm(p,p.return);break;case 12:Ti(l,p);break;case 31:Ti(l,p),v&4&&g3(l,p);break;case 13:Ti(l,p),v&4&&x3(l,p),v&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=EY.bind(null,p),WY(l,p))));break;case 22:if(v=p.memoizedState!==null||Ei,!v){u=u!==null&&u.memoizedState!==null||Cr,C=Ei;var E=Cr;Ei=v,(Cr=u)&&!E?Oi(l,p,(p.subtreeFlags&8772)!==0):Ti(l,p),Ei=C,Cr=E}break;case 30:break;default:Ti(l,p)}}function h3(l){var u=l.alternate;u!==null&&(l.alternate=null,h3(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&Rf(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Vt=null,zn=!1;function Ai(l,u,p){for(p=p.child;p!==null;)p3(l,u,p),p=p.sibling}function p3(l,u,p){if(Je&&typeof Je.onCommitFiberUnmount=="function")try{Je.onCommitFiberUnmount(pt,p)}catch{}switch(p.tag){case 26:Cr||$a(p,u),Ai(l,u,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:Cr||$a(p,u);var v=Vt,C=zn;Wo(p.type)&&(Vt=p.stateNode,zn=!1),Ai(l,u,p),xm(p.stateNode),Vt=v,zn=C;break;case 5:Cr||$a(p,u);case 6:if(v=Vt,C=zn,Vt=null,Ai(l,u,p),Vt=v,zn=C,Vt!==null)if(zn)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(p.stateNode)}catch(E){Ct(p,u,E)}else try{Vt.removeChild(p.stateNode)}catch(E){Ct(p,u,E)}break;case 18:Vt!==null&&(zn?(l=Vt,oO(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),Gu(l)):oO(Vt,p.stateNode));break;case 4:v=Vt,C=zn,Vt=p.stateNode.containerInfo,zn=!0,Ai(l,u,p),Vt=v,zn=C;break;case 0:case 11:case 14:case 15:Fo(2,p,u),Cr||Fo(4,p,u),Ai(l,u,p);break;case 1:Cr||($a(p,u),v=p.stateNode,typeof v.componentWillUnmount=="function"&&l3(p,u,v)),Ai(l,u,p);break;case 21:Ai(l,u,p);break;case 22:Cr=(v=Cr)||p.memoizedState!==null,Ai(l,u,p),Cr=v;break;default:Ai(l,u,p)}}function g3(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{Gu(l)}catch(p){Ct(u,u.return,p)}}}function x3(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Gu(l)}catch(p){Ct(u,u.return,p)}}function bY(l){switch(l.tag){case 31:case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new f3),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new f3),u;default:throw Error(n(435,l.tag))}}function Ig(l,u){var p=bY(l);u.forEach(function(v){if(!p.has(v)){p.add(v);var C=AY.bind(null,l,v);v.then(C,C)}})}function Un(l,u){var p=u.deletions;if(p!==null)for(var v=0;v<p.length;v++){var C=p[v],E=l,$=u,W=$;e:for(;W!==null;){switch(W.tag){case 27:if(Wo(W.type)){Vt=W.stateNode,zn=!1;break e}break;case 5:Vt=W.stateNode,zn=!1;break e;case 3:case 4:Vt=W.stateNode.containerInfo,zn=!0;break e}W=W.return}if(Vt===null)throw Error(n(160));p3(E,$,C),Vt=null,zn=!1,E=C.alternate,E!==null&&(E.return=null),C.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)y3(u,l),u=u.sibling}var ta=null;function y3(l,u){var p=l.alternate,v=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Un(u,l),Fn(l),v&4&&(Fo(3,l,l.return),om(3,l),Fo(5,l,l.return));break;case 1:Un(u,l),Fn(l),v&512&&(Cr||p===null||$a(p,p.return)),v&64&&Ei&&(l=l.updateQueue,l!==null&&(v=l.callbacks,v!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?v:p.concat(v))));break;case 26:var C=ta;if(Un(u,l),Fn(l),v&512&&(Cr||p===null||$a(p,p.return)),v&4){var E=p!==null?p.memoizedState:null;if(v=l.memoizedState,p===null)if(v===null)if(l.stateNode===null){e:{v=l.type,p=l.memoizedProps,C=C.ownerDocument||C;t:switch(v){case"title":E=C.getElementsByTagName("title")[0],(!E||E[$l]||E[Mr]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=C.createElement(v),C.head.insertBefore(E,C.querySelector("head > title"))),nn(E,v,p),E[Mr]=l,jr(E),v=E;break e;case"link":var $=yO("link","href",C).get(v+(p.href||""));if($){for(var W=0;W<$.length;W++)if(E=$[W],E.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&E.getAttribute("rel")===(p.rel==null?null:p.rel)&&E.getAttribute("title")===(p.title==null?null:p.title)&&E.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){$.splice(W,1);break t}}E=C.createElement(v),nn(E,v,p),C.head.appendChild(E);break;case"meta":if($=yO("meta","content",C).get(v+(p.content||""))){for(W=0;W<$.length;W++)if(E=$[W],E.getAttribute("content")===(p.content==null?null:""+p.content)&&E.getAttribute("name")===(p.name==null?null:p.name)&&E.getAttribute("property")===(p.property==null?null:p.property)&&E.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&E.getAttribute("charset")===(p.charSet==null?null:p.charSet)){$.splice(W,1);break t}}E=C.createElement(v),nn(E,v,p),C.head.appendChild(E);break;default:throw Error(n(468,v))}E[Mr]=l,jr(E),v=E}l.stateNode=v}else vO(C,l.type,l.stateNode);else l.stateNode=xO(C,v,l.memoizedProps);else E!==v?(E===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):E.count--,v===null?vO(C,l.type,l.stateNode):xO(C,v,l.memoizedProps)):v===null&&l.stateNode!==null&&y1(l,l.memoizedProps,p.memoizedProps)}break;case 27:Un(u,l),Fn(l),v&512&&(Cr||p===null||$a(p,p.return)),p!==null&&v&4&&y1(l,l.memoizedProps,p.memoizedProps);break;case 5:if(Un(u,l),Fn(l),v&512&&(Cr||p===null||$a(p,p.return)),l.flags&32){C=l.stateNode;try{gu(C,"")}catch(Oe){Ct(l,l.return,Oe)}}v&4&&l.stateNode!=null&&(C=l.memoizedProps,y1(l,C,p!==null?p.memoizedProps:C)),v&1024&&(w1=!0);break;case 6:if(Un(u,l),Fn(l),v&4){if(l.stateNode===null)throw Error(n(162));v=l.memoizedProps,p=l.stateNode;try{p.nodeValue=v}catch(Oe){Ct(l,l.return,Oe)}}break;case 3:if(Zg=null,C=ta,ta=Yg(u.containerInfo),Un(u,l),ta=C,Fn(l),v&4&&p!==null&&p.memoizedState.isDehydrated)try{Gu(u.containerInfo)}catch(Oe){Ct(l,l.return,Oe)}w1&&(w1=!1,v3(l));break;case 4:v=ta,ta=Yg(l.stateNode.containerInfo),Un(u,l),Fn(l),ta=v;break;case 12:Un(u,l),Fn(l);break;case 31:Un(u,l),Fn(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,Ig(l,v)));break;case 13:Un(u,l),Fn(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&($g=nr()),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,Ig(l,v)));break;case 22:C=l.memoizedState!==null;var re=p!==null&&p.memoizedState!==null,de=Ei,be=Cr;if(Ei=de||C,Cr=be||re,Un(u,l),Cr=be,Ei=de,Fn(l),v&8192)e:for(u=l.stateNode,u._visibility=C?u._visibility&-2:u._visibility|1,C&&(p===null||re||Ei||Cr||tc(l)),p=null,u=l;;){if(u.tag===5||u.tag===26){if(p===null){re=p=u;try{if(E=re.stateNode,C)$=E.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none";else{W=re.stateNode;var Se=re.memoizedProps.style,me=Se!=null&&Se.hasOwnProperty("display")?Se.display:null;W.style.display=me==null||typeof me=="boolean"?"":(""+me).trim()}}catch(Oe){Ct(re,re.return,Oe)}}}else if(u.tag===6){if(p===null){re=u;try{re.stateNode.nodeValue=C?"":re.memoizedProps}catch(Oe){Ct(re,re.return,Oe)}}}else if(u.tag===18){if(p===null){re=u;try{var xe=re.stateNode;C?lO(xe,!0):lO(re.stateNode,!1)}catch(Oe){Ct(re,re.return,Oe)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}v&4&&(v=l.updateQueue,v!==null&&(p=v.retryQueue,p!==null&&(v.retryQueue=null,Ig(l,p))));break;case 19:Un(u,l),Fn(l),v&4&&(v=l.updateQueue,v!==null&&(l.updateQueue=null,Ig(l,v)));break;case 30:break;case 21:break;default:Un(u,l),Fn(l)}}function Fn(l){var u=l.flags;if(u&2){try{for(var p,v=l.return;v!==null;){if(u3(v)){p=v;break}v=v.return}if(p==null)throw Error(n(160));switch(p.tag){case 27:var C=p.stateNode,E=v1(l);Dg(l,E,C);break;case 5:var $=p.stateNode;p.flags&32&&(gu($,""),p.flags&=-33);var W=v1(l);Dg(l,W,$);break;case 3:case 4:var re=p.stateNode.containerInfo,de=v1(l);b1(l,de,re);break;default:throw Error(n(161))}}catch(be){Ct(l,l.return,be)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function v3(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;v3(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Ti(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)m3(l,u.alternate,u),u=u.sibling}function tc(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:Fo(4,u,u.return),tc(u);break;case 1:$a(u,u.return);var p=u.stateNode;typeof p.componentWillUnmount=="function"&&l3(u,u.return,p),tc(u);break;case 27:xm(u.stateNode);case 26:case 5:$a(u,u.return),tc(u);break;case 22:u.memoizedState===null&&tc(u);break;case 30:tc(u);break;default:tc(u)}l=l.sibling}}function Oi(l,u,p){for(p=p&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var v=u.alternate,C=l,E=u,$=E.flags;switch(E.tag){case 0:case 11:case 15:Oi(C,E,p),om(4,E);break;case 1:if(Oi(C,E,p),v=E,C=v.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(de){Ct(v,v.return,de)}if(v=E,C=v.updateQueue,C!==null){var W=v.stateNode;try{var re=C.shared.hiddenCallbacks;if(re!==null)for(C.shared.hiddenCallbacks=null,C=0;C<re.length;C++)Y5(re[C],W)}catch(de){Ct(v,v.return,de)}}p&&$&64&&o3(E),lm(E,E.return);break;case 27:d3(E);case 26:case 5:Oi(C,E,p),p&&v===null&&$&4&&c3(E),lm(E,E.return);break;case 12:Oi(C,E,p);break;case 31:Oi(C,E,p),p&&$&4&&g3(C,E);break;case 13:Oi(C,E,p),p&&$&4&&x3(C,E);break;case 22:E.memoizedState===null&&Oi(C,E,p),lm(E,E.return);break;case 30:break;default:Oi(C,E,p)}u=u.sibling}}function j1(l,u){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&Wf(p))}function N1(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Wf(l))}function ra(l,u,p,v){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)b3(l,u,p,v),u=u.sibling}function b3(l,u,p,v){var C=u.flags;switch(u.tag){case 0:case 11:case 15:ra(l,u,p,v),C&2048&&om(9,u);break;case 1:ra(l,u,p,v);break;case 3:ra(l,u,p,v),C&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&Wf(l)));break;case 12:if(C&2048){ra(l,u,p,v),l=u.stateNode;try{var E=u.memoizedProps,$=E.id,W=E.onPostCommit;typeof W=="function"&&W($,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(re){Ct(u,u.return,re)}}else ra(l,u,p,v);break;case 31:ra(l,u,p,v);break;case 13:ra(l,u,p,v);break;case 23:break;case 22:E=u.stateNode,$=u.alternate,u.memoizedState!==null?E._visibility&2?ra(l,u,p,v):cm(l,u):E._visibility&2?ra(l,u,p,v):(E._visibility|=2,Iu(l,u,p,v,(u.subtreeFlags&10256)!==0||!1)),C&2048&&j1($,u);break;case 24:ra(l,u,p,v),C&2048&&N1(u.alternate,u);break;default:ra(l,u,p,v)}}function Iu(l,u,p,v,C){for(C=C&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var E=l,$=u,W=p,re=v,de=$.flags;switch($.tag){case 0:case 11:case 15:Iu(E,$,W,re,C),om(8,$);break;case 23:break;case 22:var be=$.stateNode;$.memoizedState!==null?be._visibility&2?Iu(E,$,W,re,C):cm(E,$):(be._visibility|=2,Iu(E,$,W,re,C)),C&&de&2048&&j1($.alternate,$);break;case 24:Iu(E,$,W,re,C),C&&de&2048&&N1($.alternate,$);break;default:Iu(E,$,W,re,C)}u=u.sibling}}function cm(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var p=l,v=u,C=v.flags;switch(v.tag){case 22:cm(p,v),C&2048&&j1(v.alternate,v);break;case 24:cm(p,v),C&2048&&N1(v.alternate,v);break;default:cm(p,v)}u=u.sibling}}var um=8192;function Lu(l,u,p){if(l.subtreeFlags&um)for(l=l.child;l!==null;)w3(l,u,p),l=l.sibling}function w3(l,u,p){switch(l.tag){case 26:Lu(l,u,p),l.flags&um&&l.memoizedState!==null&&iX(p,ta,l.memoizedState,l.memoizedProps);break;case 5:Lu(l,u,p);break;case 3:case 4:var v=ta;ta=Yg(l.stateNode.containerInfo),Lu(l,u,p),ta=v;break;case 22:l.memoizedState===null&&(v=l.alternate,v!==null&&v.memoizedState!==null?(v=um,um=16777216,Lu(l,u,p),um=v):Lu(l,u,p));break;default:Lu(l,u,p)}}function j3(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function dm(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var v=u[p];Kr=v,S3(v,l)}j3(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)N3(l),l=l.sibling}function N3(l){switch(l.tag){case 0:case 11:case 15:dm(l),l.flags&2048&&Fo(9,l,l.return);break;case 3:dm(l);break;case 12:dm(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,Lg(l)):dm(l);break;default:dm(l)}}function Lg(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var v=u[p];Kr=v,S3(v,l)}j3(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:Fo(8,u,u.return),Lg(u);break;case 22:p=u.stateNode,p._visibility&2&&(p._visibility&=-3,Lg(u));break;default:Lg(u)}l=l.sibling}}function S3(l,u){for(;Kr!==null;){var p=Kr;switch(p.tag){case 0:case 11:case 15:Fo(8,p,u);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var v=p.memoizedState.cachePool.pool;v!=null&&v.refCount++}break;case 24:Wf(p.memoizedState.cache)}if(v=p.child,v!==null)v.return=p,Kr=v;else e:for(p=l;Kr!==null;){v=Kr;var C=v.sibling,E=v.return;if(h3(v),v===p){Kr=null;break e}if(C!==null){C.return=E,Kr=C;break e}Kr=E}}}var wY={getCacheForType:function(l){var u=tn(Nr),p=u.data.get(l);return p===void 0&&(p=l(),u.data.set(l,p)),p},cacheSignal:function(){return tn(Nr).controller.signal}},jY=typeof WeakMap=="function"?WeakMap:Map,bt=0,Pt=null,st=null,ot=0,_t=0,rs=null,Bo=!1,$u=!1,S1=!1,Pi=0,ir=0,qo=0,rc=0,_1=0,ns=0,zu=0,fm=null,Bn=null,C1=!1,$g=0,_3=0,zg=1/0,Ug=null,Vo=null,Rr=0,Ko=null,Uu=null,Mi=0,k1=0,E1=null,C3=null,mm=0,A1=null;function ss(){return(bt&2)!==0&&ot!==0?ot&-ot:U.T!==null?D1():Vp()}function k3(){if(ns===0)if((ot&536870912)===0||ut){var l=cu;cu<<=1,(cu&3932160)===0&&(cu=262144),ns=l}else ns=536870912;return l=es.current,l!==null&&(l.flags|=32),ns}function qn(l,u,p){(l===Pt&&(_t===2||_t===9)||l.cancelPendingCommit!==null)&&(Fu(l,0),Ho(l,ot,ns,!1)),Ll(l,p),((bt&2)===0||l!==Pt)&&(l===Pt&&((bt&2)===0&&(rc|=p),ir===4&&Ho(l,ot,ns,!1)),za(l))}function E3(l,u,p){if((bt&6)!==0)throw Error(n(327));var v=!p&&(u&127)===0&&(u&l.expiredLanes)===0||Il(l,u),C=v?_Y(l,u):O1(l,u,!0),E=v;do{if(C===0){$u&&!v&&Ho(l,u,0,!1);break}else{if(p=l.current.alternate,E&&!NY(p)){C=O1(l,u,!1),E=!1;continue}if(C===2){if(E=u,l.errorRecoveryDisabledLanes&E)var $=0;else $=l.pendingLanes&-536870913,$=$!==0?$:$&536870912?536870912:0;if($!==0){u=$;e:{var W=l;C=fm;var re=W.current.memoizedState.isDehydrated;if(re&&(Fu(W,$).flags|=256),$=O1(W,$,!1),$!==2){if(S1&&!re){W.errorRecoveryDisabledLanes|=E,rc|=E,C=4;break e}E=Bn,Bn=C,E!==null&&(Bn===null?Bn=E:Bn.push.apply(Bn,E))}C=$}if(E=!1,C!==2)continue}}if(C===1){Fu(l,0),Ho(l,u,0,!0);break}e:{switch(v=l,E=C,E){case 0:case 1:throw Error(n(345));case 4:if((u&4194048)!==u)break;case 6:Ho(v,u,ns,!Bo);break e;case 2:Bn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((u&62914560)===u&&(C=$g+300-nr(),10<C)){if(Ho(v,u,ns,!Bo),du(v,0,!0)!==0)break e;Mi=u,v.timeoutHandle=aO(A3.bind(null,v,p,Bn,Ug,C1,u,ns,rc,zu,Bo,E,"Throttled",-0,0),C);break e}A3(v,p,Bn,Ug,C1,u,ns,rc,zu,Bo,E,null,-0,0)}}break}while(!0);za(l)}function A3(l,u,p,v,C,E,$,W,re,de,be,Se,me,xe){if(l.timeoutHandle=-1,Se=u.subtreeFlags,Se&8192||(Se&16785408)===16785408){Se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:yi},w3(u,E,Se);var Oe=(E&62914560)===E?$g-nr():(E&4194048)===E?_3-nr():0;if(Oe=oX(Se,Oe),Oe!==null){Mi=E,l.cancelPendingCommit=Oe(L3.bind(null,l,u,E,p,v,C,$,W,re,be,Se,null,me,xe)),Ho(l,E,$,!de);return}}L3(l,u,E,p,v,C,$,W,re)}function NY(l){for(var u=l;;){var p=u.tag;if((p===0||p===11||p===15)&&u.flags&16384&&(p=u.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var v=0;v<p.length;v++){var C=p[v],E=C.getSnapshot;C=C.value;try{if(!Zn(E(),C))return!1}catch{return!1}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Ho(l,u,p,v){u&=~_1,u&=~rc,l.suspendedLanes|=u,l.pingedLanes&=~u,v&&(l.warmLanes|=u),v=l.expirationTimes;for(var C=u;0<C;){var E=31-sr(C),$=1<<E;v[E]=-1,C&=~$}p!==0&&Fp(l,p,u)}function Fg(){return(bt&6)===0?(hm(0),!1):!0}function T1(){if(st!==null){if(_t===0)var l=st.return;else l=st,ji=Gl=null,Hw(l),Ou=null,Yf=0,l=st;for(;l!==null;)i3(l.alternate,l),l=l.return;st=null}}function Fu(l,u){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,qY(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),Mi=0,T1(),Pt=l,st=p=bi(l.current,null),ot=u,_t=0,rs=null,Bo=!1,$u=Il(l,u),S1=!1,zu=ns=_1=rc=qo=ir=0,Bn=fm=null,C1=!1,(u&8)!==0&&(u|=u&32);var v=l.entangledLanes;if(v!==0)for(l=l.entanglements,v&=u;0<v;){var C=31-sr(v),E=1<<C;u|=l[C],v&=~E}return Pi=u,lg(),p}function T3(l,u){Xe=null,U.H=sm,u===Tu||u===gg?(u=H5(),_t=3):u===Rw?(u=H5(),_t=4):_t=u===l1?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,rs=u,st===null&&(ir=1,Tg(l,ks(u,l.current)))}function O3(){var l=es.current;return l===null?!0:(ot&4194048)===ot?Os===null:(ot&62914560)===ot||(ot&536870912)!==0?l===Os:!1}function P3(){var l=U.H;return U.H=sm,l===null?sm:l}function M3(){var l=U.A;return U.A=wY,l}function Bg(){ir=4,Bo||(ot&4194048)!==ot&&es.current!==null||($u=!0),(qo&134217727)===0&&(rc&134217727)===0||Pt===null||Ho(Pt,ot,ns,!1)}function O1(l,u,p){var v=bt;bt|=2;var C=P3(),E=M3();(Pt!==l||ot!==u)&&(Ug=null,Fu(l,u)),u=!1;var $=ir;e:do try{if(_t!==0&&st!==null){var W=st,re=rs;switch(_t){case 8:T1(),$=6;break e;case 3:case 2:case 9:case 6:es.current===null&&(u=!0);var de=_t;if(_t=0,rs=null,Bu(l,W,re,de),p&&$u){$=0;break e}break;default:de=_t,_t=0,rs=null,Bu(l,W,re,de)}}SY(),$=ir;break}catch(be){T3(l,be)}while(!0);return u&&l.shellSuspendCounter++,ji=Gl=null,bt=v,U.H=C,U.A=E,st===null&&(Pt=null,ot=0,lg()),$}function SY(){for(;st!==null;)R3(st)}function _Y(l,u){var p=bt;bt|=2;var v=P3(),C=M3();Pt!==l||ot!==u?(Ug=null,zg=nr()+500,Fu(l,u)):$u=Il(l,u);e:do try{if(_t!==0&&st!==null){u=st;var E=rs;t:switch(_t){case 1:_t=0,rs=null,Bu(l,u,E,1);break;case 2:case 9:if(V5(E)){_t=0,rs=null,D3(u);break}u=function(){_t!==2&&_t!==9||Pt!==l||(_t=7),za(l)},E.then(u,u);break e;case 3:_t=7;break e;case 4:_t=5;break e;case 7:V5(E)?(_t=0,rs=null,D3(u)):(_t=0,rs=null,Bu(l,u,E,7));break;case 5:var $=null;switch(st.tag){case 26:$=st.memoizedState;case 5:case 27:var W=st;if($?bO($):W.stateNode.complete){_t=0,rs=null;var re=W.sibling;if(re!==null)st=re;else{var de=W.return;de!==null?(st=de,qg(de)):st=null}break t}}_t=0,rs=null,Bu(l,u,E,5);break;case 6:_t=0,rs=null,Bu(l,u,E,6);break;case 8:T1(),ir=6;break e;default:throw Error(n(462))}}CY();break}catch(be){T3(l,be)}while(!0);return ji=Gl=null,U.H=v,U.A=C,bt=p,st!==null?0:(Pt=null,ot=0,lg(),ir)}function CY(){for(;st!==null&&!Ns();)R3(st)}function R3(l){var u=s3(l.alternate,l,Pi);l.memoizedProps=l.pendingProps,u===null?qg(l):st=u}function D3(l){var u=l,p=u.alternate;switch(u.tag){case 15:case 0:u=ZT(p,u,u.pendingProps,u.type,void 0,ot);break;case 11:u=ZT(p,u,u.pendingProps,u.type.render,u.ref,ot);break;case 5:Hw(u);default:i3(p,u),u=st=M5(u,Pi),u=s3(p,u,Pi)}l.memoizedProps=l.pendingProps,u===null?qg(l):st=u}function Bu(l,u,p,v){ji=Gl=null,Hw(u),Ou=null,Yf=0;var C=u.return;try{if(hY(l,C,u,p,ot)){ir=1,Tg(l,ks(p,l.current)),st=null;return}}catch(E){if(C!==null)throw st=C,E;ir=1,Tg(l,ks(p,l.current)),st=null;return}u.flags&32768?(ut||v===1?l=!0:$u||(ot&536870912)!==0?l=!1:(Bo=l=!0,(v===2||v===9||v===3||v===6)&&(v=es.current,v!==null&&v.tag===13&&(v.flags|=16384))),I3(u,l)):qg(u)}function qg(l){var u=l;do{if((u.flags&32768)!==0){I3(u,Bo);return}l=u.return;var p=xY(u.alternate,u,Pi);if(p!==null){st=p;return}if(u=u.sibling,u!==null){st=u;return}st=u=l}while(u!==null);ir===0&&(ir=5)}function I3(l,u){do{var p=yY(l.alternate,l);if(p!==null){p.flags&=32767,st=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!u&&(l=l.sibling,l!==null)){st=l;return}st=l=p}while(l!==null);ir=6,st=null}function L3(l,u,p,v,C,E,$,W,re){l.cancelPendingCommit=null;do Vg();while(Rr!==0);if((bt&6)!==0)throw Error(n(327));if(u!==null){if(u===l.current)throw Error(n(177));if(E=u.lanes|u.childLanes,E|=vw,Q0(l,p,E,$,W,re),l===Pt&&(st=Pt=null,ot=0),Uu=u,Ko=l,Mi=p,k1=E,E1=C,C3=v,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,TY(nt,function(){return B3(),null})):(l.callbackNode=null,l.callbackPriority=0),v=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||v){v=U.T,U.T=null,C=L.p,L.p=2,$=bt,bt|=4;try{vY(l,u,p)}finally{bt=$,L.p=C,U.T=v}}Rr=1,$3(),z3(),U3()}}function $3(){if(Rr===1){Rr=0;var l=Ko,u=Uu,p=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||p){p=U.T,U.T=null;var v=L.p;L.p=2;var C=bt;bt|=4;try{y3(u,l);var E=q1,$=S5(l.containerInfo),W=E.focusedElem,re=E.selectionRange;if($!==W&&W&&W.ownerDocument&&N5(W.ownerDocument.documentElement,W)){if(re!==null&&hw(W)){var de=re.start,be=re.end;if(be===void 0&&(be=de),"selectionStart"in W)W.selectionStart=de,W.selectionEnd=Math.min(be,W.value.length);else{var Se=W.ownerDocument||document,me=Se&&Se.defaultView||window;if(me.getSelection){var xe=me.getSelection(),Oe=W.textContent.length,He=Math.min(re.start,Oe),Ot=re.end===void 0?He:Math.min(re.end,Oe);!xe.extend&&He>Ot&&($=Ot,Ot=He,He=$);var le=j5(W,He),ie=j5(W,Ot);if(le&&ie&&(xe.rangeCount!==1||xe.anchorNode!==le.node||xe.anchorOffset!==le.offset||xe.focusNode!==ie.node||xe.focusOffset!==ie.offset)){var ue=Se.createRange();ue.setStart(le.node,le.offset),xe.removeAllRanges(),He>Ot?(xe.addRange(ue),xe.extend(ie.node,ie.offset)):(ue.setEnd(ie.node,ie.offset),xe.addRange(ue))}}}}for(Se=[],xe=W;xe=xe.parentNode;)xe.nodeType===1&&Se.push({element:xe,left:xe.scrollLeft,top:xe.scrollTop});for(typeof W.focus=="function"&&W.focus(),W=0;W<Se.length;W++){var Ne=Se[W];Ne.element.scrollLeft=Ne.left,Ne.element.scrollTop=Ne.top}}rx=!!B1,q1=B1=null}finally{bt=C,L.p=v,U.T=p}}l.current=u,Rr=2}}function z3(){if(Rr===2){Rr=0;var l=Ko,u=Uu,p=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||p){p=U.T,U.T=null;var v=L.p;L.p=2;var C=bt;bt|=4;try{m3(l,u.alternate,u)}finally{bt=C,L.p=v,U.T=p}}Rr=3}}function U3(){if(Rr===4||Rr===3){Rr=0,Ss();var l=Ko,u=Uu,p=Mi,v=C3;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Rr=5:(Rr=0,Uu=Ko=null,F3(l,l.pendingLanes));var C=l.pendingLanes;if(C===0&&(Vo=null),Mf(p),u=u.stateNode,Je&&typeof Je.onCommitFiberRoot=="function")try{Je.onCommitFiberRoot(pt,u,void 0,(u.current.flags&128)===128)}catch{}if(v!==null){u=U.T,C=L.p,L.p=2,U.T=null;try{for(var E=l.onRecoverableError,$=0;$<v.length;$++){var W=v[$];E(W.value,{componentStack:W.stack})}}finally{U.T=u,L.p=C}}(Mi&3)!==0&&Vg(),za(l),C=l.pendingLanes,(p&261930)!==0&&(C&42)!==0?l===A1?mm++:(mm=0,A1=l):mm=0,hm(0)}}function F3(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,Wf(u)))}function Vg(){return $3(),z3(),U3(),B3()}function B3(){if(Rr!==5)return!1;var l=Ko,u=k1;k1=0;var p=Mf(Mi),v=U.T,C=L.p;try{L.p=32>p?32:p,U.T=null,p=E1,E1=null;var E=Ko,$=Mi;if(Rr=0,Uu=Ko=null,Mi=0,(bt&6)!==0)throw Error(n(331));var W=bt;if(bt|=4,N3(E.current),b3(E,E.current,$,p),bt=W,hm(0,!1),Je&&typeof Je.onPostCommitFiberRoot=="function")try{Je.onPostCommitFiberRoot(pt,E)}catch{}return!0}finally{L.p=C,U.T=v,F3(l,u)}}function q3(l,u,p){u=ks(p,u),u=o1(l.stateNode,u,2),l=$o(l,u,2),l!==null&&(Ll(l,2),za(l))}function Ct(l,u,p){if(l.tag===3)q3(l,l,p);else for(;u!==null;){if(u.tag===3){q3(u,l,p);break}else if(u.tag===1){var v=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof v.componentDidCatch=="function"&&(Vo===null||!Vo.has(v))){l=ks(p,l),p=VT(2),v=$o(u,p,2),v!==null&&(KT(p,v,u,l),Ll(v,2),za(v));break}}u=u.return}}function P1(l,u,p){var v=l.pingCache;if(v===null){v=l.pingCache=new jY;var C=new Set;v.set(u,C)}else C=v.get(u),C===void 0&&(C=new Set,v.set(u,C));C.has(p)||(S1=!0,C.add(p),l=kY.bind(null,l,u,p),u.then(l,l))}function kY(l,u,p){var v=l.pingCache;v!==null&&v.delete(u),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,Pt===l&&(ot&p)===p&&(ir===4||ir===3&&(ot&62914560)===ot&&300>nr()-$g?(bt&2)===0&&Fu(l,0):_1|=p,zu===ot&&(zu=0)),za(l)}function V3(l,u){u===0&&(u=Up()),l=Vl(l,u),l!==null&&(Ll(l,u),za(l))}function EY(l){var u=l.memoizedState,p=0;u!==null&&(p=u.retryLane),V3(l,p)}function AY(l,u){var p=0;switch(l.tag){case 31:case 13:var v=l.stateNode,C=l.memoizedState;C!==null&&(p=C.retryLane);break;case 19:v=l.stateNode;break;case 22:v=l.stateNode._retryCache;break;default:throw Error(n(314))}v!==null&&v.delete(u),V3(l,p)}function TY(l,u){return pn(l,u)}var Kg=null,qu=null,M1=!1,Hg=!1,R1=!1,Go=0;function za(l){l!==qu&&l.next===null&&(qu===null?Kg=qu=l:qu=qu.next=l),Hg=!0,M1||(M1=!0,PY())}function hm(l,u){if(!R1&&Hg){R1=!0;do for(var p=!1,v=Kg;v!==null;){if(l!==0){var C=v.pendingLanes;if(C===0)var E=0;else{var $=v.suspendedLanes,W=v.pingedLanes;E=(1<<31-sr(42|l)+1)-1,E&=C&~($&~W),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(p=!0,W3(v,E))}else E=ot,E=du(v,v===Pt?E:0,v.cancelPendingCommit!==null||v.timeoutHandle!==-1),(E&3)===0||Il(v,E)||(p=!0,W3(v,E));v=v.next}while(p);R1=!1}}function OY(){K3()}function K3(){Hg=M1=!1;var l=0;Go!==0&&BY()&&(l=Go);for(var u=nr(),p=null,v=Kg;v!==null;){var C=v.next,E=H3(v,u);E===0?(v.next=null,p===null?Kg=C:p.next=C,C===null&&(qu=p)):(p=v,(l!==0||(E&3)!==0)&&(Hg=!0)),v=C}Rr!==0&&Rr!==5||hm(l),Go!==0&&(Go=0)}function H3(l,u){for(var p=l.suspendedLanes,v=l.pingedLanes,C=l.expirationTimes,E=l.pendingLanes&-62914561;0<E;){var $=31-sr(E),W=1<<$,re=C[$];re===-1?((W&p)===0||(W&v)!==0)&&(C[$]=W0(W,u)):re<=u&&(l.expiredLanes|=W),E&=~W}if(u=Pt,p=ot,p=du(l,l===u?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v=l.callbackNode,p===0||l===u&&(_t===2||_t===9)||l.cancelPendingCommit!==null)return v!==null&&v!==null&&Dn(v),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||Il(l,p)){if(u=p&-p,u===l.callbackPriority)return u;switch(v!==null&&Dn(v),Mf(p)){case 2:case 8:p=Fe;break;case 32:p=nt;break;case 268435456:p=_n;break;default:p=nt}return v=G3.bind(null,l),p=pn(p,v),l.callbackPriority=u,l.callbackNode=p,u}return v!==null&&v!==null&&Dn(v),l.callbackPriority=2,l.callbackNode=null,2}function G3(l,u){if(Rr!==0&&Rr!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(Vg()&&l.callbackNode!==p)return null;var v=ot;return v=du(l,l===Pt?v:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),v===0?null:(E3(l,v,u),H3(l,nr()),l.callbackNode!=null&&l.callbackNode===p?G3.bind(null,l):null)}function W3(l,u){if(Vg())return null;E3(l,u,!0)}function PY(){VY(function(){(bt&6)!==0?pn(ge,OY):K3()})}function D1(){if(Go===0){var l=Eu;l===0&&(l=lu,lu<<=1,(lu&261888)===0&&(lu=256)),Go=l}return Go}function Q3(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:eg(""+l)}function Y3(l,u){var p=u.ownerDocument.createElement("input");return p.name=u.name,p.value=u.value,l.id&&p.setAttribute("form",l.id),u.parentNode.insertBefore(p,u),l=new FormData(l),p.parentNode.removeChild(p),l}function MY(l,u,p,v,C){if(u==="submit"&&p&&p.stateNode===C){var E=Q3((C[gn]||null).action),$=v.submitter;$&&(u=(u=$[gn]||null)?Q3(u.formAction):$.getAttribute("formAction"),u!==null&&(E=u,$=null));var W=new sg("action","action",null,v,C);l.push({event:W,listeners:[{instance:null,listener:function(){if(v.defaultPrevented){if(Go!==0){var re=$?Y3(C,$):new FormData(C);t1(p,{pending:!0,data:re,method:C.method,action:E},null,re)}}else typeof E=="function"&&(W.preventDefault(),re=$?Y3(C,$):new FormData(C),t1(p,{pending:!0,data:re,method:C.method,action:E},E,re))},currentTarget:C}]})}}for(var I1=0;I1<yw.length;I1++){var L1=yw[I1],RY=L1.toLowerCase(),DY=L1[0].toUpperCase()+L1.slice(1);ea(RY,"on"+DY)}ea(k5,"onAnimationEnd"),ea(E5,"onAnimationIteration"),ea(A5,"onAnimationStart"),ea("dblclick","onDoubleClick"),ea("focusin","onFocus"),ea("focusout","onBlur"),ea(XQ,"onTransitionRun"),ea(ZQ,"onTransitionStart"),ea(JQ,"onTransitionCancel"),ea(T5,"onTransitionEnd"),To("onMouseEnter",["mouseout","mouseover"]),To("onMouseLeave",["mouseout","mouseover"]),To("onPointerEnter",["pointerout","pointerover"]),To("onPointerLeave",["pointerout","pointerover"]),gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IY=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pm));function X3(l,u){u=(u&4)!==0;for(var p=0;p<l.length;p++){var v=l[p],C=v.event;v=v.listeners;e:{var E=void 0;if(u)for(var $=v.length-1;0<=$;$--){var W=v[$],re=W.instance,de=W.currentTarget;if(W=W.listener,re!==E&&C.isPropagationStopped())break e;E=W,C.currentTarget=de;try{E(C)}catch(be){og(be)}C.currentTarget=null,E=re}else for($=0;$<v.length;$++){if(W=v[$],re=W.instance,de=W.currentTarget,W=W.listener,re!==E&&C.isPropagationStopped())break e;E=W,C.currentTarget=de;try{E(C)}catch(be){og(be)}C.currentTarget=null,E=re}}}}function at(l,u){var p=u[fu];p===void 0&&(p=u[fu]=new Set);var v=l+"__bubble";p.has(v)||(Z3(u,l,2,!1),p.add(v))}function $1(l,u,p){var v=0;u&&(v|=4),Z3(p,l,v,u)}var Gg="_reactListening"+Math.random().toString(36).slice(2);function z1(l){if(!l[Gg]){l[Gg]=!0,Wp.forEach(function(p){p!=="selectionchange"&&(IY.has(p)||$1(p,!1,l),$1(p,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[Gg]||(u[Gg]=!0,$1("selectionchange",!1,u))}}function Z3(l,u,p,v){switch(kO(u)){case 2:var C=uX;break;case 8:C=dX;break;default:C=ej}p=C.bind(null,u,p,l),C=void 0,!aw||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(C=!0),v?C!==void 0?l.addEventListener(u,p,{capture:!0,passive:C}):l.addEventListener(u,p,!0):C!==void 0?l.addEventListener(u,p,{passive:C}):l.addEventListener(u,p,!1)}function U1(l,u,p,v,C){var E=v;if((u&1)===0&&(u&2)===0&&v!==null)e:for(;;){if(v===null)return;var $=v.tag;if($===3||$===4){var W=v.stateNode.containerInfo;if(W===C)break;if($===4)for($=v.return;$!==null;){var re=$.tag;if((re===3||re===4)&&$.stateNode.containerInfo===C)return;$=$.return}for(;W!==null;){if($=Co(W),$===null)return;if(re=$.tag,re===5||re===6||re===26||re===27){v=E=$;continue e}W=W.parentNode}}v=v.return}n5(function(){var de=E,be=nw(p),Se=[];e:{var me=O5.get(l);if(me!==void 0){var xe=sg,Oe=l;switch(l){case"keypress":if(rg(p)===0)break e;case"keydown":case"keyup":xe=AQ;break;case"focusin":Oe="focus",xe=cw;break;case"focusout":Oe="blur",xe=cw;break;case"beforeblur":case"afterblur":xe=cw;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":xe=i5;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":xe=xQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":xe=PQ;break;case k5:case E5:case A5:xe=bQ;break;case T5:xe=RQ;break;case"scroll":case"scrollend":xe=pQ;break;case"wheel":xe=IQ;break;case"copy":case"cut":case"paste":xe=jQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":xe=l5;break;case"toggle":case"beforetoggle":xe=$Q}var He=(u&4)!==0,Ot=!He&&(l==="scroll"||l==="scrollend"),le=He?me!==null?me+"Capture":null:me;He=[];for(var ie=de,ue;ie!==null;){var Ne=ie;if(ue=Ne.stateNode,Ne=Ne.tag,Ne!==5&&Ne!==26&&Ne!==27||ue===null||le===null||(Ne=Lf(ie,le),Ne!=null&&He.push(gm(ie,Ne,ue))),Ot)break;ie=ie.return}0<He.length&&(me=new xe(me,Oe,null,p,be),Se.push({event:me,listeners:He}))}}if((u&7)===0){e:{if(me=l==="mouseover"||l==="pointerover",xe=l==="mouseout"||l==="pointerout",me&&p!==rw&&(Oe=p.relatedTarget||p.fromElement)&&(Co(Oe)||Oe[pi]))break e;if((xe||me)&&(me=be.window===be?be:(me=be.ownerDocument)?me.defaultView||me.parentWindow:window,xe?(Oe=p.relatedTarget||p.toElement,xe=de,Oe=Oe?Co(Oe):null,Oe!==null&&(Ot=i(Oe),He=Oe.tag,Oe!==Ot||He!==5&&He!==27&&He!==6)&&(Oe=null)):(xe=null,Oe=de),xe!==Oe)){if(He=i5,Ne="onMouseLeave",le="onMouseEnter",ie="mouse",(l==="pointerout"||l==="pointerover")&&(He=l5,Ne="onPointerLeave",le="onPointerEnter",ie="pointer"),Ot=xe==null?me:Eo(xe),ue=Oe==null?me:Eo(Oe),me=new He(Ne,ie+"leave",xe,p,be),me.target=Ot,me.relatedTarget=ue,Ne=null,Co(be)===de&&(He=new He(le,ie+"enter",Oe,p,be),He.target=ue,He.relatedTarget=Ot,Ne=He),Ot=Ne,xe&&Oe)t:{for(He=LY,le=xe,ie=Oe,ue=0,Ne=le;Ne;Ne=He(Ne))ue++;Ne=0;for(var qe=ie;qe;qe=He(qe))Ne++;for(;0<ue-Ne;)le=He(le),ue--;for(;0<Ne-ue;)ie=He(ie),Ne--;for(;ue--;){if(le===ie||ie!==null&&le===ie.alternate){He=le;break t}le=He(le),ie=He(ie)}He=null}else He=null;xe!==null&&J3(Se,me,xe,He,!1),Oe!==null&&Ot!==null&&J3(Se,Ot,Oe,He,!0)}}e:{if(me=de?Eo(de):window,xe=me.nodeName&&me.nodeName.toLowerCase(),xe==="select"||xe==="input"&&me.type==="file")var gt=g5;else if(h5(me))if(x5)gt=WQ;else{gt=HQ;var Le=KQ}else xe=me.nodeName,!xe||xe.toLowerCase()!=="input"||me.type!=="checkbox"&&me.type!=="radio"?de&&tw(de.elementType)&&(gt=g5):gt=GQ;if(gt&&(gt=gt(l,de))){p5(Se,gt,p,be);break e}Le&&Le(l,me,de),l==="focusout"&&de&&me.type==="number"&&de.memoizedProps.value!=null&&If(me,"number",me.value)}switch(Le=de?Eo(de):window,l){case"focusin":(h5(Le)||Le.contentEditable==="true")&&(bu=Le,pw=de,Kf=null);break;case"focusout":Kf=pw=bu=null;break;case"mousedown":gw=!0;break;case"contextmenu":case"mouseup":case"dragend":gw=!1,_5(Se,p,be);break;case"selectionchange":if(YQ)break;case"keydown":case"keyup":_5(Se,p,be)}var Ze;if(dw)e:{switch(l){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else vu?f5(l,p)&&(lt="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(lt="onCompositionStart");lt&&(c5&&p.locale!=="ko"&&(vu||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&vu&&(Ze=s5()):(Oo=be,iw="value"in Oo?Oo.value:Oo.textContent,vu=!0)),Le=Wg(de,lt),0<Le.length&&(lt=new o5(lt,l,null,p,be),Se.push({event:lt,listeners:Le}),Ze?lt.data=Ze:(Ze=m5(p),Ze!==null&&(lt.data=Ze)))),(Ze=UQ?FQ(l,p):BQ(l,p))&&(lt=Wg(de,"onBeforeInput"),0<lt.length&&(Le=new o5("onBeforeInput","beforeinput",null,p,be),Se.push({event:Le,listeners:lt}),Le.data=Ze)),MY(Se,l,de,p,be)}X3(Se,u)})}function gm(l,u,p){return{instance:l,listener:u,currentTarget:p}}function Wg(l,u){for(var p=u+"Capture",v=[];l!==null;){var C=l,E=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||E===null||(C=Lf(l,p),C!=null&&v.unshift(gm(l,C,E)),C=Lf(l,u),C!=null&&v.push(gm(l,C,E))),l.tag===3)return v;l=l.return}return[]}function LY(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function J3(l,u,p,v,C){for(var E=u._reactName,$=[];p!==null&&p!==v;){var W=p,re=W.alternate,de=W.stateNode;if(W=W.tag,re!==null&&re===v)break;W!==5&&W!==26&&W!==27||de===null||(re=de,C?(de=Lf(p,E),de!=null&&$.unshift(gm(p,de,re))):C||(de=Lf(p,E),de!=null&&$.push(gm(p,de,re)))),p=p.return}$.length!==0&&l.push({event:u,listeners:$})}var $Y=/\r\n?/g,zY=/\u0000|\uFFFD/g;function eO(l){return(typeof l=="string"?l:""+l).replace($Y,`
`).replace(zY,"")}function tO(l,u){return u=eO(u),eO(l)===u}function Tt(l,u,p,v,C,E){switch(p){case"children":typeof v=="string"?u==="body"||u==="textarea"&&v===""||gu(l,v):(typeof v=="number"||typeof v=="bigint")&&u!=="body"&&gu(l,""+v);break;case"className":hu(l,"class",v);break;case"tabIndex":hu(l,"tabindex",v);break;case"dir":case"role":case"viewBox":case"width":case"height":hu(l,p,v);break;case"style":t5(l,v,E);break;case"data":if(u!=="object"){hu(l,"data",v);break}case"src":case"href":if(v===""&&(u!=="a"||p!=="href")){l.removeAttribute(p);break}if(v==null||typeof v=="function"||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(p);break}v=eg(""+v),l.setAttribute(p,v);break;case"action":case"formAction":if(typeof v=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(p==="formAction"?(u!=="input"&&Tt(l,u,"name",C.name,C,null),Tt(l,u,"formEncType",C.formEncType,C,null),Tt(l,u,"formMethod",C.formMethod,C,null),Tt(l,u,"formTarget",C.formTarget,C,null)):(Tt(l,u,"encType",C.encType,C,null),Tt(l,u,"method",C.method,C,null),Tt(l,u,"target",C.target,C,null)));if(v==null||typeof v=="symbol"||typeof v=="boolean"){l.removeAttribute(p);break}v=eg(""+v),l.setAttribute(p,v);break;case"onClick":v!=null&&(l.onclick=yi);break;case"onScroll":v!=null&&at("scroll",l);break;case"onScrollEnd":v!=null&&at("scrollend",l);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(p=v.__html,p!=null){if(C.children!=null)throw Error(n(60));l.innerHTML=p}}break;case"multiple":l.multiple=v&&typeof v!="function"&&typeof v!="symbol";break;case"muted":l.muted=v&&typeof v!="function"&&typeof v!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(v==null||typeof v=="function"||typeof v=="boolean"||typeof v=="symbol"){l.removeAttribute("xlink:href");break}p=eg(""+v),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,""+v):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":v&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":v===!0?l.setAttribute(p,""):v!==!1&&v!=null&&typeof v!="function"&&typeof v!="symbol"?l.setAttribute(p,v):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":v!=null&&typeof v!="function"&&typeof v!="symbol"&&!isNaN(v)&&1<=v?l.setAttribute(p,v):l.removeAttribute(p);break;case"rowSpan":case"start":v==null||typeof v=="function"||typeof v=="symbol"||isNaN(v)?l.removeAttribute(p):l.setAttribute(p,v);break;case"popover":at("beforetoggle",l),at("toggle",l),mu(l,"popover",v);break;case"xlinkActuate":Js(l,"http://www.w3.org/1999/xlink","xlink:actuate",v);break;case"xlinkArcrole":Js(l,"http://www.w3.org/1999/xlink","xlink:arcrole",v);break;case"xlinkRole":Js(l,"http://www.w3.org/1999/xlink","xlink:role",v);break;case"xlinkShow":Js(l,"http://www.w3.org/1999/xlink","xlink:show",v);break;case"xlinkTitle":Js(l,"http://www.w3.org/1999/xlink","xlink:title",v);break;case"xlinkType":Js(l,"http://www.w3.org/1999/xlink","xlink:type",v);break;case"xmlBase":Js(l,"http://www.w3.org/XML/1998/namespace","xml:base",v);break;case"xmlLang":Js(l,"http://www.w3.org/XML/1998/namespace","xml:lang",v);break;case"xmlSpace":Js(l,"http://www.w3.org/XML/1998/namespace","xml:space",v);break;case"is":mu(l,"is",v);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=mQ.get(p)||p,mu(l,p,v))}}function F1(l,u,p,v,C,E){switch(p){case"style":t5(l,v,E);break;case"dangerouslySetInnerHTML":if(v!=null){if(typeof v!="object"||!("__html"in v))throw Error(n(61));if(p=v.__html,p!=null){if(C.children!=null)throw Error(n(60));l.innerHTML=p}}break;case"children":typeof v=="string"?gu(l,v):(typeof v=="number"||typeof v=="bigint")&&gu(l,""+v);break;case"onScroll":v!=null&&at("scroll",l);break;case"onScrollEnd":v!=null&&at("scrollend",l);break;case"onClick":v!=null&&(l.onclick=yi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qp.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(C=p.endsWith("Capture"),u=p.slice(2,C?p.length-7:void 0),E=l[gn]||null,E=E!=null?E[p]:null,typeof E=="function"&&l.removeEventListener(u,E,C),typeof v=="function")){typeof E!="function"&&E!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(u,v,C);break e}p in l?l[p]=v:v===!0?l.setAttribute(p,""):mu(l,p,v)}}}function nn(l,u,p){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",l),at("load",l);var v=!1,C=!1,E;for(E in p)if(p.hasOwnProperty(E)){var $=p[E];if($!=null)switch(E){case"src":v=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:Tt(l,u,E,$,p,null)}}C&&Tt(l,u,"srcSet",p.srcSet,p,null),v&&Tt(l,u,"src",p.src,p,null);return;case"input":at("invalid",l);var W=E=$=C=null,re=null,de=null;for(v in p)if(p.hasOwnProperty(v)){var be=p[v];if(be!=null)switch(v){case"name":C=be;break;case"type":$=be;break;case"checked":re=be;break;case"defaultChecked":de=be;break;case"value":E=be;break;case"defaultValue":W=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(n(137,u));break;default:Tt(l,u,v,be,p,null)}}Jp(l,E,W,re,de,$,C,!1);return;case"select":at("invalid",l),v=$=E=null;for(C in p)if(p.hasOwnProperty(C)&&(W=p[C],W!=null))switch(C){case"value":E=W;break;case"defaultValue":$=W;break;case"multiple":v=W;default:Tt(l,u,C,W,p,null)}u=E,p=$,l.multiple=!!v,u!=null?xi(l,!!v,u,!1):p!=null&&xi(l,!!v,p,!0);return;case"textarea":at("invalid",l),E=C=v=null;for($ in p)if(p.hasOwnProperty($)&&(W=p[$],W!=null))switch($){case"value":v=W;break;case"defaultValue":C=W;break;case"children":E=W;break;case"dangerouslySetInnerHTML":if(W!=null)throw Error(n(91));break;default:Tt(l,u,$,W,p,null)}JA(l,v,C,E);return;case"option":for(re in p)p.hasOwnProperty(re)&&(v=p[re],v!=null)&&(re==="selected"?l.selected=v&&typeof v!="function"&&typeof v!="symbol":Tt(l,u,re,v,p,null));return;case"dialog":at("beforetoggle",l),at("toggle",l),at("cancel",l),at("close",l);break;case"iframe":case"object":at("load",l);break;case"video":case"audio":for(v=0;v<pm.length;v++)at(pm[v],l);break;case"image":at("error",l),at("load",l);break;case"details":at("toggle",l);break;case"embed":case"source":case"link":at("error",l),at("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(de in p)if(p.hasOwnProperty(de)&&(v=p[de],v!=null))switch(de){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,u));default:Tt(l,u,de,v,p,null)}return;default:if(tw(u)){for(be in p)p.hasOwnProperty(be)&&(v=p[be],v!==void 0&&F1(l,u,be,v,p,void 0));return}}for(W in p)p.hasOwnProperty(W)&&(v=p[W],v!=null&&Tt(l,u,W,v,p,null))}function UY(l,u,p,v){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,E=null,$=null,W=null,re=null,de=null,be=null;for(xe in p){var Se=p[xe];if(p.hasOwnProperty(xe)&&Se!=null)switch(xe){case"checked":break;case"value":break;case"defaultValue":re=Se;default:v.hasOwnProperty(xe)||Tt(l,u,xe,null,v,Se)}}for(var me in v){var xe=v[me];if(Se=p[me],v.hasOwnProperty(me)&&(xe!=null||Se!=null))switch(me){case"type":E=xe;break;case"name":C=xe;break;case"checked":de=xe;break;case"defaultChecked":be=xe;break;case"value":$=xe;break;case"defaultValue":W=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(n(137,u));break;default:xe!==Se&&Tt(l,u,me,xe,v,Se)}}Ul(l,$,W,re,de,be,E,C);return;case"select":xe=$=W=me=null;for(E in p)if(re=p[E],p.hasOwnProperty(E)&&re!=null)switch(E){case"value":break;case"multiple":xe=re;default:v.hasOwnProperty(E)||Tt(l,u,E,null,v,re)}for(C in v)if(E=v[C],re=p[C],v.hasOwnProperty(C)&&(E!=null||re!=null))switch(C){case"value":me=E;break;case"defaultValue":W=E;break;case"multiple":$=E;default:E!==re&&Tt(l,u,C,E,v,re)}u=W,p=$,v=xe,me!=null?xi(l,!!p,me,!1):!!v!=!!p&&(u!=null?xi(l,!!p,u,!0):xi(l,!!p,p?[]:"",!1));return;case"textarea":xe=me=null;for(W in p)if(C=p[W],p.hasOwnProperty(W)&&C!=null&&!v.hasOwnProperty(W))switch(W){case"value":break;case"children":break;default:Tt(l,u,W,null,v,C)}for($ in v)if(C=v[$],E=p[$],v.hasOwnProperty($)&&(C!=null||E!=null))switch($){case"value":me=C;break;case"defaultValue":xe=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(n(91));break;default:C!==E&&Tt(l,u,$,C,v,E)}ZA(l,me,xe);return;case"option":for(var Oe in p)me=p[Oe],p.hasOwnProperty(Oe)&&me!=null&&!v.hasOwnProperty(Oe)&&(Oe==="selected"?l.selected=!1:Tt(l,u,Oe,null,v,me));for(re in v)me=v[re],xe=p[re],v.hasOwnProperty(re)&&me!==xe&&(me!=null||xe!=null)&&(re==="selected"?l.selected=me&&typeof me!="function"&&typeof me!="symbol":Tt(l,u,re,me,v,xe));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in p)me=p[He],p.hasOwnProperty(He)&&me!=null&&!v.hasOwnProperty(He)&&Tt(l,u,He,null,v,me);for(de in v)if(me=v[de],xe=p[de],v.hasOwnProperty(de)&&me!==xe&&(me!=null||xe!=null))switch(de){case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(n(137,u));break;default:Tt(l,u,de,me,v,xe)}return;default:if(tw(u)){for(var Ot in p)me=p[Ot],p.hasOwnProperty(Ot)&&me!==void 0&&!v.hasOwnProperty(Ot)&&F1(l,u,Ot,void 0,v,me);for(be in v)me=v[be],xe=p[be],!v.hasOwnProperty(be)||me===xe||me===void 0&&xe===void 0||F1(l,u,be,me,v,xe);return}}for(var le in p)me=p[le],p.hasOwnProperty(le)&&me!=null&&!v.hasOwnProperty(le)&&Tt(l,u,le,null,v,me);for(Se in v)me=v[Se],xe=p[Se],!v.hasOwnProperty(Se)||me===xe||me==null&&xe==null||Tt(l,u,Se,me,v,xe)}function rO(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function FY(){if(typeof performance.getEntriesByType=="function"){for(var l=0,u=0,p=performance.getEntriesByType("resource"),v=0;v<p.length;v++){var C=p[v],E=C.transferSize,$=C.initiatorType,W=C.duration;if(E&&W&&rO($)){for($=0,W=C.responseEnd,v+=1;v<p.length;v++){var re=p[v],de=re.startTime;if(de>W)break;var be=re.transferSize,Se=re.initiatorType;be&&rO(Se)&&(re=re.responseEnd,$+=be*(re<W?1:(W-de)/(re-de)))}if(--v,u+=8*(E+$)/(C.duration/1e3),l++,10<l)break}}if(0<l)return u/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var B1=null,q1=null;function Qg(l){return l.nodeType===9?l:l.ownerDocument}function nO(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sO(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function V1(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var K1=null;function BY(){var l=window.event;return l&&l.type==="popstate"?l===K1?!1:(K1=l,!0):(K1=null,!1)}var aO=typeof setTimeout=="function"?setTimeout:void 0,qY=typeof clearTimeout=="function"?clearTimeout:void 0,iO=typeof Promise=="function"?Promise:void 0,VY=typeof queueMicrotask=="function"?queueMicrotask:typeof iO<"u"?function(l){return iO.resolve(null).then(l).catch(KY)}:aO;function KY(l){setTimeout(function(){throw l})}function Wo(l){return l==="head"}function oO(l,u){var p=u,v=0;do{var C=p.nextSibling;if(l.removeChild(p),C&&C.nodeType===8)if(p=C.data,p==="/$"||p==="/&"){if(v===0){l.removeChild(C),Gu(u);return}v--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")v++;else if(p==="html")xm(l.ownerDocument.documentElement);else if(p==="head"){p=l.ownerDocument.head,xm(p);for(var E=p.firstChild;E;){var $=E.nextSibling,W=E.nodeName;E[$l]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&E.rel.toLowerCase()==="stylesheet"||p.removeChild(E),E=$}}else p==="body"&&xm(l.ownerDocument.body);p=C}while(p);Gu(u)}function lO(l,u){var p=l;l=0;do{var v=p.nextSibling;if(p.nodeType===1?u?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(u?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),v&&v.nodeType===8)if(p=v.data,p==="/$"){if(l===0)break;l--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||l++;p=v}while(p)}function H1(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var p=u;switch(u=u.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":H1(p),Rf(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function HY(l,u,p,v){for(;l.nodeType===1;){var C=p;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!v&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(v){if(!l[$l])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(E=l.getAttribute("rel"),E==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(E!==C.rel||l.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||l.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||l.getAttribute("title")!==(C.title==null?null:C.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(E=l.getAttribute("src"),(E!==(C.src==null?null:C.src)||l.getAttribute("type")!==(C.type==null?null:C.type)||l.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&E&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var E=C.name==null?null:""+C.name;if(C.type==="hidden"&&l.getAttribute("name")===E)return l}else return l;if(l=Ps(l.nextSibling),l===null)break}return null}function GY(l,u,p){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=Ps(l.nextSibling),l===null))return null;return l}function cO(l,u){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!u||(l=Ps(l.nextSibling),l===null))return null;return l}function G1(l){return l.data==="$?"||l.data==="$~"}function W1(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function WY(l,u){var p=l.ownerDocument;if(l.data==="$~")l._reactRetry=u;else if(l.data!=="$?"||p.readyState!=="loading")u();else{var v=function(){u(),p.removeEventListener("DOMContentLoaded",v)};p.addEventListener("DOMContentLoaded",v),l._reactRetry=v}}function Ps(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return l}var Q1=null;function uO(l){l=l.nextSibling;for(var u=0;l;){if(l.nodeType===8){var p=l.data;if(p==="/$"||p==="/&"){if(u===0)return Ps(l.nextSibling);u--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||u++}l=l.nextSibling}return null}function dO(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(u===0)return l;u--}else p!=="/$"&&p!=="/&"||u++}l=l.previousSibling}return null}function fO(l,u,p){switch(u=Qg(p),l){case"html":if(l=u.documentElement,!l)throw Error(n(452));return l;case"head":if(l=u.head,!l)throw Error(n(453));return l;case"body":if(l=u.body,!l)throw Error(n(454));return l;default:throw Error(n(451))}}function xm(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);Rf(l)}var Ms=new Map,mO=new Set;function Yg(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var Ri=L.d;L.d={f:QY,r:YY,D:XY,C:ZY,L:JY,m:eX,X:rX,S:tX,M:nX};function QY(){var l=Ri.f(),u=Fg();return l||u}function YY(l){var u=ko(l);u!==null&&u.tag===5&&u.type==="form"?TT(u):Ri.r(l)}var Vu=typeof document>"u"?null:document;function hO(l,u,p){var v=Vu;if(v&&typeof u=="string"&&u){var C=Ln(u);C='link[rel="'+l+'"][href="'+C+'"]',typeof p=="string"&&(C+='[crossorigin="'+p+'"]'),mO.has(C)||(mO.add(C),l={rel:l,crossOrigin:p,href:u},v.querySelector(C)===null&&(u=v.createElement("link"),nn(u,"link",l),jr(u),v.head.appendChild(u)))}}function XY(l){Ri.D(l),hO("dns-prefetch",l,null)}function ZY(l,u){Ri.C(l,u),hO("preconnect",l,u)}function JY(l,u,p){Ri.L(l,u,p);var v=Vu;if(v&&l&&u){var C='link[rel="preload"][as="'+Ln(u)+'"]';u==="image"&&p&&p.imageSrcSet?(C+='[imagesrcset="'+Ln(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(C+='[imagesizes="'+Ln(p.imageSizes)+'"]')):C+='[href="'+Ln(l)+'"]';var E=C;switch(u){case"style":E=Ku(l);break;case"script":E=Hu(l)}Ms.has(E)||(l=h({rel:"preload",href:u==="image"&&p&&p.imageSrcSet?void 0:l,as:u},p),Ms.set(E,l),v.querySelector(C)!==null||u==="style"&&v.querySelector(ym(E))||u==="script"&&v.querySelector(vm(E))||(u=v.createElement("link"),nn(u,"link",l),jr(u),v.head.appendChild(u)))}}function eX(l,u){Ri.m(l,u);var p=Vu;if(p&&l){var v=u&&typeof u.as=="string"?u.as:"script",C='link[rel="modulepreload"][as="'+Ln(v)+'"][href="'+Ln(l)+'"]',E=C;switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Hu(l)}if(!Ms.has(E)&&(l=h({rel:"modulepreload",href:l},u),Ms.set(E,l),p.querySelector(C)===null)){switch(v){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(vm(E)))return}v=p.createElement("link"),nn(v,"link",l),jr(v),p.head.appendChild(v)}}}function tX(l,u,p){Ri.S(l,u,p);var v=Vu;if(v&&l){var C=Ao(v).hoistableStyles,E=Ku(l);u=u||"default";var $=C.get(E);if(!$){var W={loading:0,preload:null};if($=v.querySelector(ym(E)))W.loading=5;else{l=h({rel:"stylesheet",href:l,"data-precedence":u},p),(p=Ms.get(E))&&Y1(l,p);var re=$=v.createElement("link");jr(re),nn(re,"link",l),re._p=new Promise(function(de,be){re.onload=de,re.onerror=be}),re.addEventListener("load",function(){W.loading|=1}),re.addEventListener("error",function(){W.loading|=2}),W.loading|=4,Xg($,u,v)}$={type:"stylesheet",instance:$,count:1,state:W},C.set(E,$)}}}function rX(l,u){Ri.X(l,u);var p=Vu;if(p&&l){var v=Ao(p).hoistableScripts,C=Hu(l),E=v.get(C);E||(E=p.querySelector(vm(C)),E||(l=h({src:l,async:!0},u),(u=Ms.get(C))&&X1(l,u),E=p.createElement("script"),jr(E),nn(E,"link",l),p.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},v.set(C,E))}}function nX(l,u){Ri.M(l,u);var p=Vu;if(p&&l){var v=Ao(p).hoistableScripts,C=Hu(l),E=v.get(C);E||(E=p.querySelector(vm(C)),E||(l=h({src:l,async:!0,type:"module"},u),(u=Ms.get(C))&&X1(l,u),E=p.createElement("script"),jr(E),nn(E,"link",l),p.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},v.set(C,E))}}function pO(l,u,p,v){var C=(C=se.current)?Yg(C):null;if(!C)throw Error(n(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(u=Ku(p.href),p=Ao(C).hoistableStyles,v=p.get(u),v||(v={type:"style",instance:null,count:0,state:null},p.set(u,v)),v):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=Ku(p.href);var E=Ao(C).hoistableStyles,$=E.get(l);if($||(C=C.ownerDocument||C,$={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(l,$),(E=C.querySelector(ym(l)))&&!E._p&&($.instance=E,$.state.loading=5),Ms.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Ms.set(l,p),E||sX(C,l,p,$.state))),u&&v===null)throw Error(n(528,""));return $}if(u&&v!==null)throw Error(n(529,""));return null;case"script":return u=p.async,p=p.src,typeof p=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Hu(p),p=Ao(C).hoistableScripts,v=p.get(u),v||(v={type:"script",instance:null,count:0,state:null},p.set(u,v)),v):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,l))}}function Ku(l){return'href="'+Ln(l)+'"'}function ym(l){return'link[rel="stylesheet"]['+l+"]"}function gO(l){return h({},l,{"data-precedence":l.precedence,precedence:null})}function sX(l,u,p,v){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?v.loading=1:(u=l.createElement("link"),v.preload=u,u.addEventListener("load",function(){return v.loading|=1}),u.addEventListener("error",function(){return v.loading|=2}),nn(u,"link",p),jr(u),l.head.appendChild(u))}function Hu(l){return'[src="'+Ln(l)+'"]'}function vm(l){return"script[async]"+l}function xO(l,u,p){if(u.count++,u.instance===null)switch(u.type){case"style":var v=l.querySelector('style[data-href~="'+Ln(p.href)+'"]');if(v)return u.instance=v,jr(v),v;var C=h({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return v=(l.ownerDocument||l).createElement("style"),jr(v),nn(v,"style",C),Xg(v,p.precedence,l),u.instance=v;case"stylesheet":C=Ku(p.href);var E=l.querySelector(ym(C));if(E)return u.state.loading|=4,u.instance=E,jr(E),E;v=gO(p),(C=Ms.get(C))&&Y1(v,C),E=(l.ownerDocument||l).createElement("link"),jr(E);var $=E;return $._p=new Promise(function(W,re){$.onload=W,$.onerror=re}),nn(E,"link",v),u.state.loading|=4,Xg(E,p.precedence,l),u.instance=E;case"script":return E=Hu(p.src),(C=l.querySelector(vm(E)))?(u.instance=C,jr(C),C):(v=p,(C=Ms.get(E))&&(v=h({},p),X1(v,C)),l=l.ownerDocument||l,C=l.createElement("script"),jr(C),nn(C,"link",v),l.head.appendChild(C),u.instance=C);case"void":return null;default:throw Error(n(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(v=u.instance,u.state.loading|=4,Xg(v,p.precedence,l));return u.instance}function Xg(l,u,p){for(var v=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=v.length?v[v.length-1]:null,E=C,$=0;$<v.length;$++){var W=v[$];if(W.dataset.precedence===u)E=W;else if(E!==C)break}E?E.parentNode.insertBefore(l,E.nextSibling):(u=p.nodeType===9?p.head:p,u.insertBefore(l,u.firstChild))}function Y1(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function X1(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var Zg=null;function yO(l,u,p){if(Zg===null){var v=new Map,C=Zg=new Map;C.set(p,v)}else C=Zg,v=C.get(p),v||(v=new Map,C.set(p,v));if(v.has(l))return v;for(v.set(l,null),p=p.getElementsByTagName(l),C=0;C<p.length;C++){var E=p[C];if(!(E[$l]||E[Mr]||l==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var $=E.getAttribute(u)||"";$=l+$;var W=v.get($);W?W.push(E):v.set($,[E])}}return v}function vO(l,u,p){l=l.ownerDocument||l,l.head.insertBefore(p,u==="title"?l.querySelector("head > title"):null)}function aX(l,u,p){if(p===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;return u.rel==="stylesheet"?(l=u.disabled,typeof u.precedence=="string"&&l==null):!0;case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function bO(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function iX(l,u,p,v){if(p.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var C=Ku(v.href),E=u.querySelector(ym(C));if(E){u=E._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(l.count++,l=Jg.bind(l),u.then(l,l)),p.state.loading|=4,p.instance=E,jr(E);return}E=u.ownerDocument||u,v=gO(v),(C=Ms.get(C))&&Y1(v,C),E=E.createElement("link"),jr(E);var $=E;$._p=new Promise(function(W,re){$.onload=W,$.onerror=re}),nn(E,"link",v),p.instance=E}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(p,u),(u=p.state.preload)&&(p.state.loading&3)===0&&(l.count++,p=Jg.bind(l),u.addEventListener("load",p),u.addEventListener("error",p))}}var Z1=0;function oX(l,u){return l.stylesheets&&l.count===0&&tx(l,l.stylesheets),0<l.count||0<l.imgCount?function(p){var v=setTimeout(function(){if(l.stylesheets&&tx(l,l.stylesheets),l.unsuspend){var E=l.unsuspend;l.unsuspend=null,E()}},6e4+u);0<l.imgBytes&&Z1===0&&(Z1=62500*FY());var C=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&tx(l,l.stylesheets),l.unsuspend)){var E=l.unsuspend;l.unsuspend=null,E()}},(l.imgBytes>Z1?50:800)+u);return l.unsuspend=p,function(){l.unsuspend=null,clearTimeout(v),clearTimeout(C)}}:null}function Jg(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tx(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var ex=null;function tx(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,ex=new Map,u.forEach(lX,l),ex=null,Jg.call(l))}function lX(l,u){if(!(u.state.loading&4)){var p=ex.get(l);if(p)var v=p.get(null);else{p=new Map,ex.set(l,p);for(var C=l.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<C.length;E++){var $=C[E];($.nodeName==="LINK"||$.getAttribute("media")!=="not all")&&(p.set($.dataset.precedence,$),v=$)}v&&p.set(null,v)}C=u.instance,$=C.getAttribute("data-precedence"),E=p.get($)||v,E===v&&p.set(null,C),p.set($,C),this.count++,v=Jg.bind(this),C.addEventListener("load",v),C.addEventListener("error",v),E?E.parentNode.insertBefore(C,E.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(C,l.firstChild)),u.state.loading|=4}}var bm={$$typeof:S,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function cX(l,u,p,v,C,E,$,W,re){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Of(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Of(0),this.hiddenUpdates=Of(null),this.identifierPrefix=v,this.onUncaughtError=C,this.onCaughtError=E,this.onRecoverableError=$,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=re,this.incompleteTransitions=new Map}function wO(l,u,p,v,C,E,$,W,re,de,be,Se){return l=new cX(l,u,p,$,re,de,be,Se,W),u=1,E===!0&&(u|=24),E=Jn(3,null,null,u),l.current=E,E.stateNode=l,u=Ow(),u.refCount++,l.pooledCache=u,u.refCount++,E.memoizedState={element:v,isDehydrated:p,cache:u},Dw(E),l}function jO(l){return l?(l=Nu,l):Nu}function NO(l,u,p,v,C,E){C=jO(C),v.context===null?v.context=C:v.pendingContext=C,v=Lo(u),v.payload={element:p},E=E===void 0?null:E,E!==null&&(v.callback=E),p=$o(l,v,u),p!==null&&(qn(p,l,u),Zf(p,l,u))}function SO(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<u?p:u}}function J1(l,u){SO(l,u),(l=l.alternate)&&SO(l,u)}function _O(l){if(l.tag===13||l.tag===31){var u=Vl(l,67108864);u!==null&&qn(u,l,67108864),J1(l,67108864)}}function CO(l){if(l.tag===13||l.tag===31){var u=ss();u=Pf(u);var p=Vl(l,u);p!==null&&qn(p,l,u),J1(l,u)}}var rx=!0;function uX(l,u,p,v){var C=U.T;U.T=null;var E=L.p;try{L.p=2,ej(l,u,p,v)}finally{L.p=E,U.T=C}}function dX(l,u,p,v){var C=U.T;U.T=null;var E=L.p;try{L.p=8,ej(l,u,p,v)}finally{L.p=E,U.T=C}}function ej(l,u,p,v){if(rx){var C=tj(v);if(C===null)U1(l,u,v,nx,p),EO(l,v);else if(mX(C,l,u,p,v))v.stopPropagation();else if(EO(l,v),u&4&&-1<fX.indexOf(l)){for(;C!==null;){var E=ko(C);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var $=hi(E.pendingLanes);if($!==0){var W=E;for(W.pendingLanes|=2,W.entangledLanes|=2;$;){var re=1<<31-sr($);W.entanglements[1]|=re,$&=~re}za(E),(bt&6)===0&&(zg=nr()+500,hm(0))}}break;case 31:case 13:W=Vl(E,2),W!==null&&qn(W,E,2),Fg(),J1(E,2)}if(E=tj(v),E===null&&U1(l,u,v,nx,p),E===C)break;C=E}C!==null&&v.stopPropagation()}else U1(l,u,v,null,p)}}function tj(l){return l=nw(l),rj(l)}var nx=null;function rj(l){if(nx=null,l=Co(l),l!==null){var u=i(l);if(u===null)l=null;else{var p=u.tag;if(p===13){if(l=o(u),l!==null)return l;l=null}else if(p===31){if(l=c(u),l!==null)return l;l=null}else if(p===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return nx=l,null}function kO(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_s()){case ge:return 2;case Fe:return 8;case nt:case it:return 32;case _n:return 268435456;default:return 32}default:return 32}}var nj=!1,Qo=null,Yo=null,Xo=null,wm=new Map,jm=new Map,Zo=[],fX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function EO(l,u){switch(l){case"focusin":case"focusout":Qo=null;break;case"dragenter":case"dragleave":Yo=null;break;case"mouseover":case"mouseout":Xo=null;break;case"pointerover":case"pointerout":wm.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":jm.delete(u.pointerId)}}function Nm(l,u,p,v,C,E){return l===null||l.nativeEvent!==E?(l={blockedOn:u,domEventName:p,eventSystemFlags:v,nativeEvent:E,targetContainers:[C]},u!==null&&(u=ko(u),u!==null&&_O(u)),l):(l.eventSystemFlags|=v,u=l.targetContainers,C!==null&&u.indexOf(C)===-1&&u.push(C),l)}function mX(l,u,p,v,C){switch(u){case"focusin":return Qo=Nm(Qo,l,u,p,v,C),!0;case"dragenter":return Yo=Nm(Yo,l,u,p,v,C),!0;case"mouseover":return Xo=Nm(Xo,l,u,p,v,C),!0;case"pointerover":var E=C.pointerId;return wm.set(E,Nm(wm.get(E)||null,l,u,p,v,C)),!0;case"gotpointercapture":return E=C.pointerId,jm.set(E,Nm(jm.get(E)||null,l,u,p,v,C)),!0}return!1}function AO(l){var u=Co(l.target);if(u!==null){var p=i(u);if(p!==null){if(u=p.tag,u===13){if(u=o(p),u!==null){l.blockedOn=u,Kp(l.priority,function(){CO(p)});return}}else if(u===31){if(u=c(p),u!==null){l.blockedOn=u,Kp(l.priority,function(){CO(p)});return}}else if(u===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function sx(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var p=tj(l.nativeEvent);if(p===null){p=l.nativeEvent;var v=new p.constructor(p.type,p);rw=v,p.target.dispatchEvent(v),rw=null}else return u=ko(p),u!==null&&_O(u),l.blockedOn=p,!1;u.shift()}return!0}function TO(l,u,p){sx(l)&&p.delete(u)}function hX(){nj=!1,Qo!==null&&sx(Qo)&&(Qo=null),Yo!==null&&sx(Yo)&&(Yo=null),Xo!==null&&sx(Xo)&&(Xo=null),wm.forEach(TO),jm.forEach(TO)}function ax(l,u){l.blockedOn===u&&(l.blockedOn=null,nj||(nj=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,hX)))}var ix=null;function OO(l){ix!==l&&(ix=l,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){ix===l&&(ix=null);for(var u=0;u<l.length;u+=3){var p=l[u],v=l[u+1],C=l[u+2];if(typeof v!="function"){if(rj(v||p)===null)continue;break}var E=ko(p);E!==null&&(l.splice(u,3),u-=3,t1(E,{pending:!0,data:C,method:p.method,action:v},v,C))}}))}function Gu(l){function u(re){return ax(re,l)}Qo!==null&&ax(Qo,l),Yo!==null&&ax(Yo,l),Xo!==null&&ax(Xo,l),wm.forEach(u),jm.forEach(u);for(var p=0;p<Zo.length;p++){var v=Zo[p];v.blockedOn===l&&(v.blockedOn=null)}for(;0<Zo.length&&(p=Zo[0],p.blockedOn===null);)AO(p),p.blockedOn===null&&Zo.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(v=0;v<p.length;v+=3){var C=p[v],E=p[v+1],$=C[gn]||null;if(typeof E=="function")$||OO(p);else if($){var W=null;if(E&&E.hasAttribute("formAction")){if(C=E,$=E[gn]||null)W=$.formAction;else if(rj(C)!==null)continue}else W=$.action;typeof W=="function"?p[v+1]=W:(p.splice(v,3),v-=3),OO(p)}}}function PO(){function l(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function($){return C=$})},focusReset:"manual",scroll:"manual"})}function u(){C!==null&&(C(),C=null),v||setTimeout(p,20)}function p(){if(!v&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var v=!1,C=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(p,100),function(){v=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),C!==null&&(C(),C=null)}}}function sj(l){this._internalRoot=l}ox.prototype.render=sj.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(n(409));var p=u.current,v=ss();NO(p,v,l,u,null,null)},ox.prototype.unmount=sj.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;NO(l.current,2,null,l,null,null),Fg(),u[pi]=null}};function ox(l){this._internalRoot=l}ox.prototype.unstable_scheduleHydration=function(l){if(l){var u=Vp();l={blockedOn:null,target:l,priority:u};for(var p=0;p<Zo.length&&u!==0&&u<Zo[p].priority;p++);Zo.splice(p,0,l),p===0&&AO(l)}};var MO=t.version;if(MO!=="19.2.4")throw Error(n(527,MO,"19.2.4"));L.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(n(188)):(l=Object.keys(l).join(","),Error(n(268,l)));return l=f(u),l=l!==null?m(l):null,l=l===null?null:l.stateNode,l};var pX={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lx.isDisabled&&lx.supportsFiber)try{pt=lx.inject(pX),Je=lx}catch{}}return _m.createRoot=function(l,u){if(!a(l))throw Error(n(299));var p=!1,v="",C=UT,E=FT,$=BT;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(C=u.onUncaughtError),u.onCaughtError!==void 0&&(E=u.onCaughtError),u.onRecoverableError!==void 0&&($=u.onRecoverableError)),u=wO(l,1,!1,null,null,p,v,null,C,E,$,PO),l[pi]=u.current,z1(l),new sj(u)},_m.hydrateRoot=function(l,u,p){if(!a(l))throw Error(n(299));var v=!1,C="",E=UT,$=FT,W=BT,re=null;return p!=null&&(p.unstable_strictMode===!0&&(v=!0),p.identifierPrefix!==void 0&&(C=p.identifierPrefix),p.onUncaughtError!==void 0&&(E=p.onUncaughtError),p.onCaughtError!==void 0&&($=p.onCaughtError),p.onRecoverableError!==void 0&&(W=p.onRecoverableError),p.formState!==void 0&&(re=p.formState)),u=wO(l,1,!0,u,p??null,v,C,re,E,$,W,PO),u.context=jO(null),p=u.current,v=ss(),v=Pf(v),C=Lo(v),C.callback=null,$o(p,C,v),p=v,u.current.lanes=p,Ll(u,p),za(u),l[pi]=u.current,z1(l),new ox(u)},_m.version="19.2.4",_m}var qO;function _X(){if(qO)return oj.exports;qO=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),oj.exports=SX(),oj.exports}var CX=_X();var VO="popstate";function kX(e={}){function t(n,a){let{pathname:i,search:o,hash:c}=n.location;return US("",{pathname:i,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:uh(a)}return AX(t,r,null,e)}function Gt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Hs(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function EX(){return Math.random().toString(36).substring(2,10)}function KO(e,t){return{usr:e.state,key:e.key,idx:t}}function US(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?tf(t):t,state:r,key:t&&t.key||n||EX()}}function uh({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function tf(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function AX(e,t,r,n={}){let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,c="POP",d=null,f=m();f==null&&(f=0,o.replaceState({...o.state,idx:f},""));function m(){return(o.state||{idx:null}).idx}function h(){c="POP";let j=m(),N=j==null?null:j-f;f=j,d&&d({action:c,location:b.location,delta:N})}function g(j,N){c="PUSH";let _=US(b.location,j,N);f=m()+1;let S=KO(_,f),k=b.createHref(_);try{o.pushState(S,"",k)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;a.location.assign(k)}i&&d&&d({action:c,location:b.location,delta:1})}function x(j,N){c="REPLACE";let _=US(b.location,j,N);f=m();let S=KO(_,f),k=b.createHref(_);o.replaceState(S,"",k),i&&d&&d({action:c,location:b.location,delta:0})}function w(j){return TX(j)}let b={get action(){return c},get location(){return e(a,o)},listen(j){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(VO,h),d=j,()=>{a.removeEventListener(VO,h),d=null}},createHref(j){return t(a,j)},createURL:w,encodeLocation(j){let N=w(j);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:g,replace:x,go(j){return o.go(j)}};return b}function TX(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Gt(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:uh(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function n6(e,t,r="/"){return OX(e,t,r,!1)}function OX(e,t,r,n){let a=typeof t=="string"?tf(t):t,i=Yi(a.pathname||"/",r);if(i==null)return null;let o=s6(e);PX(o);let c=null;for(let d=0;c==null&&d<o.length;++d){let f=qX(i);c=FX(o[d],f,n)}return c}function s6(e,t=[],r=[],n="",a=!1){let i=(o,c,d=a,f)=>{let m={relativePath:f===void 0?o.path||"":f,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(n)&&d)return;Gt(m.relativePath.startsWith(n),`Absolute route path "${m.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(n.length)}let h=Vi([n,m.relativePath]),g=r.concat(m);o.children&&o.children.length>0&&(Gt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),s6(o.children,t,g,h,d)),!(o.path==null&&!o.index)&&t.push({path:h,score:zX(h,o.index),routesMeta:g})};return e.forEach((o,c)=>{if(o.path===""||!o.path?.includes("?"))i(o,c);else for(let d of a6(o.path))i(o,c,!0,d)}),t}function a6(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=a6(n.join("/")),c=[];return c.push(...o.map(d=>d===""?i:[i,d].join("/"))),a&&c.push(...o),c.map(d=>e.startsWith("/")&&d===""?"/":d)}function PX(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:UX(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var MX=/^:[\w-]+$/,RX=3,DX=2,IX=1,LX=10,$X=-2,HO=e=>e==="*";function zX(e,t){let r=e.split("/"),n=r.length;return r.some(HO)&&(n+=$X),t&&(n+=DX),r.filter(a=>!HO(a)).reduce((a,i)=>a+(MX.test(i)?RX:i===""?IX:LX),n)}function UX(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function FX(e,t,r=!1){let{routesMeta:n}=e,a={},i="/",o=[];for(let c=0;c<n.length;++c){let d=n[c],f=c===n.length-1,m=i==="/"?t:t.slice(i.length)||"/",h=Cy({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},m),g=d.route;if(!h&&f&&r&&!n[n.length-1].route.index&&(h=Cy({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:Vi([i,h.pathname]),pathnameBase:GX(Vi([i,h.pathnameBase])),route:g}),h.pathnameBase!=="/"&&(i=Vi([i,h.pathnameBase]))}return o}function Cy(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=BX(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:n.reduce((f,{paramName:m,isOptional:h},g)=>{if(m==="*"){let w=c[g]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const x=c[g];return h&&!x?f[m]=void 0:f[m]=(x||"").replace(/%2F/g,"/"),f},{}),pathname:i,pathnameBase:o,pattern:e}}function BX(e,t=!1,r=!0){Hs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,d)=>(n.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function qX(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Hs(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Yi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var VX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function KX(e,t="/"){let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?tf(e):e,i;return r?(r=r.replace(/\/\/+/g,"/"),r.startsWith("/")?i=GO(r.substring(1),"/"):i=GO(r,t)):i=t,{pathname:i,search:WX(n),hash:QX(a)}}function GO(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function dj(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function HX(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function oC(e){let t=HX(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function lC(e,t,r,n=!1){let a;typeof e=="string"?a=tf(e):(a={...e},Gt(!a.pathname||!a.pathname.includes("?"),dj("?","pathname","search",a)),Gt(!a.pathname||!a.pathname.includes("#"),dj("#","pathname","hash",a)),Gt(!a.search||!a.search.includes("#"),dj("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,c;if(o==null)c=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),h-=1;a.pathname=g.join("/")}c=h>=0?t[h]:"/"}let d=KX(a,c),f=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(f||m)&&(d.pathname+="/"),d}var Vi=e=>e.join("/").replace(/\/\/+/g,"/"),GX=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),WX=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,QX=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,YX=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function XX(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function ZX(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var i6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function o6(e,t){let r=e;if(typeof r!="string"||!VX.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,a=!1;if(i6)try{let i=new URL(window.location.href),o=r.startsWith("//")?new URL(i.protocol+r):new URL(r),c=Yi(o.pathname,t);o.origin===i.origin&&c!=null?r=c+o.search+o.hash:a=!0}catch{Hs(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:a,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var l6=["POST","PUT","PATCH","DELETE"];new Set(l6);var JX=["GET",...l6];new Set(JX);var rf=y.createContext(null);rf.displayName="DataRouter";var ab=y.createContext(null);ab.displayName="DataRouterState";var eZ=y.createContext(!1),c6=y.createContext({isTransitioning:!1});c6.displayName="ViewTransition";var tZ=y.createContext(new Map);tZ.displayName="Fetchers";var rZ=y.createContext(null);rZ.displayName="Await";var ys=y.createContext(null);ys.displayName="Navigation";var ep=y.createContext(null);ep.displayName="Location";var Aa=y.createContext({outlet:null,matches:[],isDataRoute:!1});Aa.displayName="Route";var cC=y.createContext(null);cC.displayName="RouteError";var u6="REACT_ROUTER_ERROR",nZ="REDIRECT",sZ="ROUTE_ERROR_RESPONSE";function aZ(e){if(e.startsWith(`${u6}:${nZ}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function iZ(e){if(e.startsWith(`${u6}:${sZ}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new YX(t.status,t.statusText,t.data)}catch{}}function oZ(e,{relative:t}={}){Gt(nf(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=y.useContext(ys),{hash:a,pathname:i,search:o}=tp(e,{relative:t}),c=i;return r!=="/"&&(c=i==="/"?r:Vi([r,i])),n.createHref({pathname:c,search:o,hash:a})}function nf(){return y.useContext(ep)!=null}function fo(){return Gt(nf(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(ep).location}var d6="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function f6(e){y.useContext(ys).static||y.useLayoutEffect(e)}function sf(){let{isDataRoute:e}=y.useContext(Aa);return e?jZ():lZ()}function lZ(){Gt(nf(),"useNavigate() may be used only in the context of a <Router> component.");let e=y.useContext(rf),{basename:t,navigator:r}=y.useContext(ys),{matches:n}=y.useContext(Aa),{pathname:a}=fo(),i=JSON.stringify(oC(n)),o=y.useRef(!1);return f6(()=>{o.current=!0}),y.useCallback((d,f={})=>{if(Hs(o.current,d6),!o.current)return;if(typeof d=="number"){r.go(d);return}let m=lC(d,JSON.parse(i),a,f.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Vi([t,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[t,r,i,a,e])}var cZ=y.createContext(null);function uZ(e){let t=y.useContext(Aa).outlet;return y.useMemo(()=>t&&y.createElement(cZ.Provider,{value:e},t),[t,e])}function tp(e,{relative:t}={}){let{matches:r}=y.useContext(Aa),{pathname:n}=fo(),a=JSON.stringify(oC(r));return y.useMemo(()=>lC(e,JSON.parse(a),n,t==="path"),[e,a,n,t])}function dZ(e,t){return m6(e,t)}function m6(e,t,r,n,a){Gt(nf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=y.useContext(ys),{matches:o}=y.useContext(Aa),c=o[o.length-1],d=c?c.params:{},f=c?c.pathname:"/",m=c?c.pathnameBase:"/",h=c&&c.route;{let _=h&&h.path||"";p6(f,!h||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let g=fo(),x;if(t){let _=typeof t=="string"?tf(t):t;Gt(m==="/"||_.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${_.pathname}" was given in the \`location\` prop.`),x=_}else x=g;let w=x.pathname||"/",b=w;if(m!=="/"){let _=m.replace(/^\//,"").split("/");b="/"+w.replace(/^\//,"").split("/").slice(_.length).join("/")}let j=n6(e,{pathname:b});Hs(h||j!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Hs(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=gZ(j&&j.map(_=>Object.assign({},_,{params:Object.assign({},d,_.params),pathname:Vi([m,i.encodeLocation?i.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?m:Vi([m,i.encodeLocation?i.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),o,r,n,a);return t&&N?y.createElement(ep.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},N):N}function fZ(){let e=wZ(),t=XX(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:i},"ErrorBoundary")," or"," ",y.createElement("code",{style:i},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),r?y.createElement("pre",{style:a},r):null,o)}var mZ=y.createElement(fZ,null),h6=class extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const r=iZ(e.digest);r&&(e=r)}let t=e!==void 0?y.createElement(Aa.Provider,{value:this.props.routeContext},y.createElement(cC.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?y.createElement(hZ,{error:e},t):t}};h6.contextType=eZ;var fj=new WeakMap;function hZ({children:e,error:t}){let{basename:r}=y.useContext(ys);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=aZ(t.digest);if(n){let a=fj.get(t);if(a)throw a;let i=o6(n.location,r);if(i6&&!fj.get(t))if(i.isExternal||n.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:n.replace}));throw fj.set(t,o),o}return y.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return e}function pZ({routeContext:e,match:t,children:r}){let n=y.useContext(rf);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),y.createElement(Aa.Provider,{value:e},r)}function gZ(e,t=[],r=null,n=null,a=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,o=r?.errors;if(o!=null){let m=i.findIndex(h=>h.route.id&&o?.[h.route.id]!==void 0);Gt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,m+1))}let c=!1,d=-1;if(r)for(let m=0;m<i.length;m++){let h=i[m];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=m),h.route.id){let{loaderData:g,errors:x}=r,w=h.route.loader&&!g.hasOwnProperty(h.route.id)&&(!x||x[h.route.id]===void 0);if(h.route.lazy||w){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}let f=r&&n?(m,h)=>{n(m,{location:r.location,params:r.matches?.[0]?.params??{},unstable_pattern:ZX(r.matches),errorInfo:h})}:void 0;return i.reduceRight((m,h,g)=>{let x,w=!1,b=null,j=null;r&&(x=o&&h.route.id?o[h.route.id]:void 0,b=h.route.errorElement||mZ,c&&(d<0&&g===0?(p6("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,j=null):d===g&&(w=!0,j=h.route.hydrateFallbackElement||null)));let N=t.concat(i.slice(0,g+1)),_=()=>{let S;return x?S=b:w?S=j:h.route.Component?S=y.createElement(h.route.Component,null):h.route.element?S=h.route.element:S=m,y.createElement(pZ,{match:h,routeContext:{outlet:m,matches:N,isDataRoute:r!=null},children:S})};return r&&(h.route.ErrorBoundary||h.route.errorElement||g===0)?y.createElement(h6,{location:r.location,revalidation:r.revalidation,component:b,error:x,children:_(),routeContext:{outlet:null,matches:N,isDataRoute:!0},onError:f}):_()},null)}function uC(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xZ(e){let t=y.useContext(rf);return Gt(t,uC(e)),t}function yZ(e){let t=y.useContext(ab);return Gt(t,uC(e)),t}function vZ(e){let t=y.useContext(Aa);return Gt(t,uC(e)),t}function dC(e){let t=vZ(e),r=t.matches[t.matches.length-1];return Gt(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function bZ(){return dC("useRouteId")}function wZ(){let e=y.useContext(cC),t=yZ("useRouteError"),r=dC("useRouteError");return e!==void 0?e:t.errors?.[r]}function jZ(){let{router:e}=xZ("useNavigate"),t=dC("useNavigate"),r=y.useRef(!1);return f6(()=>{r.current=!0}),y.useCallback(async(a,i={})=>{Hs(r.current,d6),r.current&&(typeof a=="number"?await e.navigate(a):await e.navigate(a,{fromRouteId:t,...i}))},[e,t])}var WO={};function p6(e,t,r){!t&&!WO[e]&&(WO[e]=!0,Hs(!1,r))}y.memo(NZ);function NZ({routes:e,future:t,state:r,onError:n}){return m6(e,void 0,r,n,t)}function ky({to:e,replace:t,state:r,relative:n}){Gt(nf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=y.useContext(ys);Hs(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=y.useContext(Aa),{pathname:o}=fo(),c=sf(),d=lC(e,oC(i),o,n==="path"),f=JSON.stringify(d);return y.useEffect(()=>{c(JSON.parse(f),{replace:t,state:r,relative:n})},[c,f,n,t,r]),null}function g6(e){return uZ(e.context)}function Jt(e){Gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function SZ({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:a,static:i=!1,unstable_useTransitions:o}){Gt(!nf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=e.replace(/^\/*/,"/"),d=y.useMemo(()=>({basename:c,navigator:a,static:i,unstable_useTransitions:o,future:{}}),[c,a,i,o]);typeof r=="string"&&(r=tf(r));let{pathname:f="/",search:m="",hash:h="",state:g=null,key:x="default"}=r,w=y.useMemo(()=>{let b=Yi(f,c);return b==null?null:{location:{pathname:b,search:m,hash:h,state:g,key:x},navigationType:n}},[c,f,m,h,g,x,n]);return Hs(w!=null,`<Router basename="${c}"> is not able to match the URL "${f}${m}${h}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:y.createElement(ys.Provider,{value:d},y.createElement(ep.Provider,{children:t,value:w}))}function _Z({children:e,location:t}){return dZ(FS(e),t)}function FS(e,t=[]){let r=[];return y.Children.forEach(e,(n,a)=>{if(!y.isValidElement(n))return;let i=[...t,a];if(n.type===y.Fragment){r.push.apply(r,FS(n.props.children,i));return}Gt(n.type===Jt,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Gt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=FS(n.props.children,i)),r.push(o)}),r}var ry="get",ny="application/x-www-form-urlencoded";function ib(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function CZ(e){return ib(e)&&e.tagName.toLowerCase()==="button"}function kZ(e){return ib(e)&&e.tagName.toLowerCase()==="form"}function EZ(e){return ib(e)&&e.tagName.toLowerCase()==="input"}function AZ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function TZ(e,t){return e.button===0&&(!t||t==="_self")&&!AZ(e)}function BS(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function OZ(e,t){let r=BS(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}var cx=null;function PZ(){if(cx===null)try{new FormData(document.createElement("form"),0),cx=!1}catch{cx=!0}return cx}var MZ=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function mj(e){return e!=null&&!MZ.has(e)?(Hs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ny}"`),null):e}function RZ(e,t){let r,n,a,i,o;if(kZ(e)){let c=e.getAttribute("action");n=c?Yi(c,t):null,r=e.getAttribute("method")||ry,a=mj(e.getAttribute("enctype"))||ny,i=new FormData(e)}else if(CZ(e)||EZ(e)&&(e.type==="submit"||e.type==="image")){let c=e.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||c.getAttribute("action");if(n=d?Yi(d,t):null,r=e.getAttribute("formmethod")||c.getAttribute("method")||ry,a=mj(e.getAttribute("formenctype"))||mj(c.getAttribute("enctype"))||ny,i=new FormData(c,e),!PZ()){let{name:f,type:m,value:h}=e;if(m==="image"){let g=f?`${f}.`:"";i.append(`${g}x`,"0"),i.append(`${g}y`,"0")}else f&&i.append(f,h)}}else{if(ib(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ry,n=null,a=ny,o=e}return i&&a==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:a,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function fC(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function DZ(e,t,r,n){let a=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${n}`:a.pathname=`${a.pathname}.${n}`:a.pathname==="/"?a.pathname=`_root.${n}`:t&&Yi(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${n}`,a}async function IZ(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function LZ(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function $Z(e,t,r){let n=await Promise.all(e.map(async a=>{let i=t.routes[a.route.id];if(i){let o=await IZ(i,r);return o.links?o.links():[]}return[]}));return BZ(n.flat(1).filter(LZ).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function QO(e,t,r,n,a,i){let o=(d,f)=>r[f]?d.route.id!==r[f].route.id:!0,c=(d,f)=>r[f].pathname!==d.pathname||r[f].route.path?.endsWith("*")&&r[f].params["*"]!==d.params["*"];return i==="assets"?t.filter((d,f)=>o(d,f)||c(d,f)):i==="data"?t.filter((d,f)=>{let m=n.routes[d.route.id];if(!m||!m.hasLoader)return!1;if(o(d,f)||c(d,f))return!0;if(d.route.shouldRevalidate){let h=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function zZ(e,t,{includeHydrateFallback:r}={}){return UZ(e.map(n=>{let a=t.routes[n.route.id];if(!a)return[];let i=[a.module];return a.clientActionModule&&(i=i.concat(a.clientActionModule)),a.clientLoaderModule&&(i=i.concat(a.clientLoaderModule)),r&&a.hydrateFallbackModule&&(i=i.concat(a.hydrateFallbackModule)),a.imports&&(i=i.concat(a.imports)),i}).flat(1))}function UZ(e){return[...new Set(e)]}function FZ(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function BZ(e,t){let r=new Set;return new Set(t),e.reduce((n,a)=>{let i=JSON.stringify(FZ(a));return r.has(i)||(r.add(i),n.push({key:i,link:a})),n},[])}function x6(){let e=y.useContext(rf);return fC(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function qZ(){let e=y.useContext(ab);return fC(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var mC=y.createContext(void 0);mC.displayName="FrameworkContext";function y6(){let e=y.useContext(mC);return fC(e,"You must render this element inside a <HydratedRouter> element"),e}function VZ(e,t){let r=y.useContext(mC),[n,a]=y.useState(!1),[i,o]=y.useState(!1),{onFocus:c,onBlur:d,onMouseEnter:f,onMouseLeave:m,onTouchStart:h}=t,g=y.useRef(null);y.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let b=N=>{N.forEach(_=>{o(_.isIntersecting)})},j=new IntersectionObserver(b,{threshold:.5});return g.current&&j.observe(g.current),()=>{j.disconnect()}}},[e]),y.useEffect(()=>{if(n){let b=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(b)}}},[n]);let x=()=>{a(!0)},w=()=>{a(!1),o(!1)};return r?e!=="intent"?[i,g,{}]:[i,g,{onFocus:Cm(c,x),onBlur:Cm(d,w),onMouseEnter:Cm(f,x),onMouseLeave:Cm(m,w),onTouchStart:Cm(h,x)}]:[!1,g,{}]}function Cm(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function KZ({page:e,...t}){let{router:r}=x6(),n=y.useMemo(()=>n6(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?y.createElement(GZ,{page:e,matches:n,...t}):null}function HZ(e){let{manifest:t,routeModules:r}=y6(),[n,a]=y.useState([]);return y.useEffect(()=>{let i=!1;return $Z(e,t,r).then(o=>{i||a(o)}),()=>{i=!0}},[e,t,r]),n}function GZ({page:e,matches:t,...r}){let n=fo(),{future:a,manifest:i,routeModules:o}=y6(),{basename:c}=x6(),{loaderData:d,matches:f}=qZ(),m=y.useMemo(()=>QO(e,t,f,i,n,"data"),[e,t,f,i,n]),h=y.useMemo(()=>QO(e,t,f,i,n,"assets"),[e,t,f,i,n]),g=y.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let b=new Set,j=!1;if(t.forEach(_=>{let S=i.routes[_.route.id];!S||!S.hasLoader||(!m.some(k=>k.route.id===_.route.id)&&_.route.id in d&&o[_.route.id]?.shouldRevalidate||S.hasClientLoader?j=!0:b.add(_.route.id))}),b.size===0)return[];let N=DZ(e,c,a.unstable_trailingSlashAwareDataRequests,"data");return j&&b.size>0&&N.searchParams.set("_routes",t.filter(_=>b.has(_.route.id)).map(_=>_.route.id).join(",")),[N.pathname+N.search]},[c,a.unstable_trailingSlashAwareDataRequests,d,n,i,m,t,e,o]),x=y.useMemo(()=>zZ(h,i),[h,i]),w=HZ(h);return y.createElement(y.Fragment,null,g.map(b=>y.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...r})),x.map(b=>y.createElement("link",{key:b,rel:"modulepreload",href:b,...r})),w.map(({key:b,link:j})=>y.createElement("link",{key:b,nonce:r.nonce,...j,crossOrigin:j.crossOrigin??r.crossOrigin})))}function WZ(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var QZ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{QZ&&(window.__reactRouterVersion="7.13.0")}catch{}function YZ({basename:e,children:t,unstable_useTransitions:r,window:n}){let a=y.useRef();a.current==null&&(a.current=kX({window:n,v5Compat:!0}));let i=a.current,[o,c]=y.useState({action:i.action,location:i.location}),d=y.useCallback(f=>{r===!1?c(f):y.startTransition(()=>c(f))},[r]);return y.useLayoutEffect(()=>i.listen(d),[i,d]),y.createElement(SZ,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:r})}var v6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,b6=y.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:a,reloadDocument:i,replace:o,state:c,target:d,to:f,preventScrollReset:m,viewTransition:h,unstable_defaultShouldRevalidate:g,...x},w){let{basename:b,unstable_useTransitions:j}=y.useContext(ys),N=typeof f=="string"&&v6.test(f),_=o6(f,b);f=_.to;let S=oZ(f,{relative:a}),[k,A,T]=VZ(n,x),O=JZ(f,{replace:o,state:c,target:d,preventScrollReset:m,relative:a,viewTransition:h,unstable_defaultShouldRevalidate:g,unstable_useTransitions:j});function P(M){t&&t(M),M.defaultPrevented||O(M)}let R=y.createElement("a",{...x,...T,href:_.absoluteURL||S,onClick:_.isExternal||i?t:P,ref:WZ(w,A),target:d,"data-discover":!N&&r==="render"?"true":void 0});return k&&!N?y.createElement(y.Fragment,null,R,y.createElement(KZ,{page:S})):R});b6.displayName="Link";var w6=y.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:a=!1,style:i,to:o,viewTransition:c,children:d,...f},m){let h=tp(o,{relative:f.relative}),g=fo(),x=y.useContext(ab),{navigator:w,basename:b}=y.useContext(ys),j=x!=null&&aJ(h)&&c===!0,N=w.encodeLocation?w.encodeLocation(h).pathname:h.pathname,_=g.pathname,S=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(_=_.toLowerCase(),S=S?S.toLowerCase():null,N=N.toLowerCase()),S&&b&&(S=Yi(S,b)||S);const k=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let A=_===N||!a&&_.startsWith(N)&&_.charAt(k)==="/",T=S!=null&&(S===N||!a&&S.startsWith(N)&&S.charAt(N.length)==="/"),O={isActive:A,isPending:T,isTransitioning:j},P=A?t:void 0,R;typeof n=="function"?R=n(O):R=[n,A?"active":null,T?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let M=typeof i=="function"?i(O):i;return y.createElement(b6,{...f,"aria-current":P,className:R,ref:m,style:M,to:o,viewTransition:c},typeof d=="function"?d(O):d)});w6.displayName="NavLink";var XZ=y.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:a,state:i,method:o=ry,action:c,onSubmit:d,relative:f,preventScrollReset:m,viewTransition:h,unstable_defaultShouldRevalidate:g,...x},w)=>{let{unstable_useTransitions:b}=y.useContext(ys),j=nJ(),N=sJ(c,{relative:f}),_=o.toLowerCase()==="get"?"get":"post",S=typeof c=="string"&&v6.test(c),k=A=>{if(d&&d(A),A.defaultPrevented)return;A.preventDefault();let T=A.nativeEvent.submitter,O=T?.getAttribute("formmethod")||o,P=()=>j(T||A.currentTarget,{fetcherKey:t,method:O,navigate:r,replace:a,state:i,relative:f,preventScrollReset:m,viewTransition:h,unstable_defaultShouldRevalidate:g});b&&r!==!1?y.startTransition(()=>P()):P()};return y.createElement("form",{ref:w,method:_,action:N,onSubmit:n?d:k,...x,"data-discover":!S&&e==="render"?"true":void 0})});XZ.displayName="Form";function ZZ(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function j6(e){let t=y.useContext(rf);return Gt(t,ZZ(e)),t}function JZ(e,{target:t,replace:r,state:n,preventScrollReset:a,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:c,unstable_useTransitions:d}={}){let f=sf(),m=fo(),h=tp(e,{relative:i});return y.useCallback(g=>{if(TZ(g,t)){g.preventDefault();let x=r!==void 0?r:uh(m)===uh(h),w=()=>f(e,{replace:x,state:n,preventScrollReset:a,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:c});d?y.startTransition(()=>w()):w()}},[m,f,h,r,n,t,e,a,i,o,c,d])}function eJ(e){Hs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=y.useRef(BS(e)),r=y.useRef(!1),n=fo(),a=y.useMemo(()=>OZ(n.search,r.current?null:t.current),[n.search]),i=sf(),o=y.useCallback((c,d)=>{const f=BS(typeof c=="function"?c(new URLSearchParams(a)):c);r.current=!0,i("?"+f,d)},[i,a]);return[a,o]}var tJ=0,rJ=()=>`__${String(++tJ)}__`;function nJ(){let{router:e}=j6("useSubmit"),{basename:t}=y.useContext(ys),r=bZ(),n=e.fetch,a=e.navigate;return y.useCallback(async(i,o={})=>{let{action:c,method:d,encType:f,formData:m,body:h}=RZ(i,t);if(o.navigate===!1){let g=o.fetcherKey||rJ();await n(g,r,o.action||c,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:m,body:h,formMethod:o.method||d,formEncType:o.encType||f,flushSync:o.flushSync})}else await a(o.action||c,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:m,body:h,formMethod:o.method||d,formEncType:o.encType||f,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,a,t,r])}function sJ(e,{relative:t}={}){let{basename:r}=y.useContext(ys),n=y.useContext(Aa);Gt(n,"useFormAction must be used inside a RouteContext");let[a]=n.matches.slice(-1),i={...tp(e||".",{relative:t})},o=fo();if(e==null){i.search=o.search;let c=new URLSearchParams(i.search),d=c.getAll("index");if(d.some(m=>m==="")){c.delete("index"),d.filter(h=>h).forEach(h=>c.append("index",h));let m=c.toString();i.search=m?`?${m}`:""}}return(!e||e===".")&&a.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Vi([r,i.pathname])),uh(i)}function aJ(e,{relative:t}={}){let r=y.useContext(c6);Gt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=j6("useViewTransitionState"),a=tp(e,{relative:t});if(!r.isTransitioning)return!1;let i=Yi(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Yi(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Cy(a.pathname,o)!=null||Cy(a.pathname,i)!=null}var Zc=r6();const iJ=Ea(Zc);var af=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},oJ={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},lJ=class{#e=oJ;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},yc=new lJ;function cJ(e){setTimeout(e,0)}var Mc=typeof window>"u"||"Deno"in globalThis;function kn(){}function uJ(e,t){return typeof e=="function"?e(t):e}function qS(e){return typeof e=="number"&&e>=0&&e!==1/0}function N6(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ml(e,t){return typeof e=="function"?e(t):e}function zs(e,t){return typeof e=="function"?e(t):e}function YO(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:c}=e;if(o){if(n){if(t.queryHash!==hC(o,t.options))return!1}else if(!dh(t.queryKey,o))return!1}if(r!=="all"){const d=t.isActive();if(r==="active"&&!d||r==="inactive"&&d)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||a&&a!==t.state.fetchStatus||i&&!i(t))}function XO(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Rc(t.options.mutationKey)!==Rc(i))return!1}else if(!dh(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function hC(e,t){return(t?.queryKeyHashFn||Rc)(e)}function Rc(e){return JSON.stringify(e,(t,r)=>VS(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function dh(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>dh(e[r],t[r])):!1}var dJ=Object.prototype.hasOwnProperty;function S6(e,t,r=0){if(e===t)return e;if(r>500)return t;const n=ZO(e)&&ZO(t);if(!n&&!(VS(e)&&VS(t)))return t;const i=(n?e:Object.keys(e)).length,o=n?t:Object.keys(t),c=o.length,d=n?new Array(c):{};let f=0;for(let m=0;m<c;m++){const h=n?m:o[m],g=e[h],x=t[h];if(g===x){d[h]=g,(n?m<i:dJ.call(e,h))&&f++;continue}if(g===null||x===null||typeof g!="object"||typeof x!="object"){d[h]=x;continue}const w=S6(g,x,r+1);d[h]=w,w===g&&f++}return i===c&&f===i?e:d}function Ey(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function ZO(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function VS(e){if(!JO(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!JO(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function JO(e){return Object.prototype.toString.call(e)==="[object Object]"}function fJ(e){return new Promise(t=>{yc.setTimeout(t,e)})}function KS(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?S6(e,t):t}function mJ(e){return e}function hJ(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function pJ(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var pC=Symbol();function _6(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===pC?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function gC(e,t){return typeof e=="function"?e(...t):!!e}function gJ(e,t,r){let n=!1,a;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(a??=t(),n||(n=!0,a.aborted?r():a.addEventListener("abort",r,{once:!0})),a)}),e}var xJ=class extends af{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!Mc&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},xC=new xJ;function HS(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var yJ=cJ;function vJ(){let e=[],t=0,r=c=>{c()},n=c=>{c()},a=yJ;const i=c=>{t?e.push(c):a(()=>{r(c)})},o=()=>{const c=e;e=[],c.length&&a(()=>{n(()=>{c.forEach(d=>{r(d)})})})};return{batch:c=>{let d;t++;try{d=c()}finally{t--,t||o()}return d},batchCalls:c=>(...d)=>{i(()=>{c(...d)})},schedule:i,setNotifyFunction:c=>{r=c},setBatchNotifyFunction:c=>{n=c},setScheduler:c=>{a=c}}}var Fr=vJ(),bJ=class extends af{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!Mc&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},Ay=new bJ;function wJ(e){return Math.min(1e3*2**e,3e4)}function C6(e){return(e??"online")==="online"?Ay.isOnline():!0}var GS=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function k6(e){let t=!1,r=0,n;const a=HS(),i=()=>a.status!=="pending",o=b=>{if(!i()){const j=new GS(b);g(j),e.onCancel?.(j)}},c=()=>{t=!0},d=()=>{t=!1},f=()=>xC.isFocused()&&(e.networkMode==="always"||Ay.isOnline())&&e.canRun(),m=()=>C6(e.networkMode)&&e.canRun(),h=b=>{i()||(n?.(),a.resolve(b))},g=b=>{i()||(n?.(),a.reject(b))},x=()=>new Promise(b=>{n=j=>{(i()||f())&&b(j)},e.onPause?.()}).then(()=>{n=void 0,i()||e.onContinue?.()}),w=()=>{if(i())return;let b;const j=r===0?e.initialPromise:void 0;try{b=j??e.fn()}catch(N){b=Promise.reject(N)}Promise.resolve(b).then(h).catch(N=>{if(i())return;const _=e.retry??(Mc?0:3),S=e.retryDelay??wJ,k=typeof S=="function"?S(r,N):S,A=_===!0||typeof _=="number"&&r<_||typeof _=="function"&&_(r,N);if(t||!A){g(N);return}r++,e.onFail?.(r,N),fJ(k).then(()=>f()?void 0:x()).then(()=>{t?g(N):w()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(n?.(),a),cancelRetry:c,continueRetry:d,canStart:m,start:()=>(m()?w():x().then(w),a)}}var E6=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),qS(this.gcTime)&&(this.#e=yc.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Mc?1/0:300*1e3))}clearGcTimeout(){this.#e&&(yc.clearTimeout(this.#e),this.#e=void 0)}},jJ=class extends E6{#e;#t;#r;#s;#n;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#r=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=tP(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=tP(this.options);t.data!==void 0&&(this.setState(eP(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=KS(this.state.data,e,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(kn).catch(kn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>zs(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===pC||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>ml(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!N6(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const c=this.observers.find(d=>d.options.queryFn);c&&this.setOptions(c.options)}const r=new AbortController,n=c=>{Object.defineProperty(c,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},a=()=>{const c=_6(this.options,t),f=(()=>{const m={client:this.#s,queryKey:this.queryKey,meta:this.meta};return n(m),m})();return this.#o=!1,this.options.persister?this.options.persister(c,f,this):c(f)},o=(()=>{const c={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:a};return n(c),c})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#a({type:"fetch",meta:o.fetchOptions?.meta}),this.#n=k6({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:c=>{c instanceof GS&&c.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(c,d)=>{this.#a({type:"failed",failureCount:c,error:d})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const c=await this.#n.start();if(c===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(c),this.#r.config.onSuccess?.(c,this),this.#r.config.onSettled?.(c,this.state.error,this),c}catch(c){if(c instanceof GS){if(c.silent)return this.#n.promise;if(c.revert){if(this.state.data===void 0)throw c;return this.state.data}}throw this.#a({type:"error",error:c}),this.#r.config.onError?.(c,this),this.#r.config.onSettled?.(this.state.data,c,this),c}finally{this.scheduleGc()}}#a(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...A6(r.data,this.options),fetchMeta:e.meta??null};case"success":const n={...r,...eP(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?n:void 0,n;case"error":const a=e.error;return{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Fr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function A6(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:C6(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function eP(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function tP(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var NJ=class extends af{constructor(e,t){super(),this.options=t,this.#e=e,this.#a=null,this.#o=HS(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#s=void 0;#n;#i;#o;#a;#p;#f;#m;#c;#u;#l;#h=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),rP(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return WS(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return WS(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof zs(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#j(),this.#t.setOptions(this.options),t._defaulted&&!Ey(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const n=this.hasListeners();n&&nP(this.#t,r,this.options,t)&&this.#d(),this.updateResult(),n&&(this.#t!==r||zs(this.options.enabled,this.#t)!==zs(t.enabled,this.#t)||ml(this.options.staleTime,this.#t)!==ml(t.staleTime,this.#t))&&this.#g();const a=this.#x();n&&(this.#t!==r||zs(this.options.enabled,this.#t)!==zs(t.enabled,this.#t)||a!==this.#l)&&this.#y(a)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return _J(this,r)&&(this.#s=r,this.#i=this.options,this.#n=this.#t.state),r}getCurrentResult(){return this.#s}trackResult(e,t){return new Proxy(e,{get:(r,n)=>(this.trackProp(n),t?.(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,n))})}trackProp(e){this.#h.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#d(e){this.#j();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(kn)),t}#g(){this.#b();const e=ml(this.options.staleTime,this.#t);if(Mc||this.#s.isStale||!qS(e))return;const r=N6(this.#s.dataUpdatedAt,e)+1;this.#c=yc.setTimeout(()=>{this.#s.isStale||this.updateResult()},r)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#w(),this.#l=e,!(Mc||zs(this.options.enabled,this.#t)===!1||!qS(this.#l)||this.#l===0)&&(this.#u=yc.setInterval(()=>{(this.options.refetchIntervalInBackground||xC.isFocused())&&this.#d()},this.#l))}#v(){this.#g(),this.#y(this.#x())}#b(){this.#c&&(yc.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#u&&(yc.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const r=this.#t,n=this.options,a=this.#s,i=this.#n,o=this.#i,d=e!==r?e.state:this.#r,{state:f}=e;let m={...f},h=!1,g;if(t._optimisticResults){const P=this.hasListeners(),R=!P&&rP(e,t),M=P&&nP(e,r,t,n);(R||M)&&(m={...m,...A6(f.data,e.options)}),t._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:x,errorUpdatedAt:w,status:b}=m;g=m.data;let j=!1;if(t.placeholderData!==void 0&&g===void 0&&b==="pending"){let P;a?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(P=a.data,j=!0):P=typeof t.placeholderData=="function"?t.placeholderData(this.#m?.state.data,this.#m):t.placeholderData,P!==void 0&&(b="success",g=KS(a?.data,P,t),h=!0)}if(t.select&&g!==void 0&&!j)if(a&&g===i?.data&&t.select===this.#p)g=this.#f;else try{this.#p=t.select,g=t.select(g),g=KS(a?.data,g,t),this.#f=g,this.#a=null}catch(P){this.#a=P}this.#a&&(x=this.#a,g=this.#f,w=Date.now(),b="error");const N=m.fetchStatus==="fetching",_=b==="pending",S=b==="error",k=_&&N,A=g!==void 0,O={status:b,fetchStatus:m.fetchStatus,isPending:_,isSuccess:b==="success",isError:S,isInitialLoading:k,isLoading:k,data:g,dataUpdatedAt:m.dataUpdatedAt,error:x,errorUpdatedAt:w,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:N,isRefetching:N&&!_,isLoadingError:S&&!A,isPaused:m.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:S&&A,isStale:yC(e,t),refetch:this.refetch,promise:this.#o,isEnabled:zs(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const P=O.data!==void 0,R=O.status==="error"&&!P,M=Y=>{R?Y.reject(O.error):P&&Y.resolve(O.data)},D=()=>{const Y=this.#o=O.promise=HS();M(Y)},z=this.#o;switch(z.status){case"pending":e.queryHash===r.queryHash&&M(z);break;case"fulfilled":(R||O.data!==z.value)&&D();break;case"rejected":(!R||O.error!==z.reason)&&D();break}}return O}updateResult(){const e=this.#s,t=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#i=this.options,this.#n.data!==void 0&&(this.#m=this.#t),Ey(t,e))return;this.#s=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,a=typeof n=="function"?n():n;if(a==="all"||!a&&!this.#h.size)return!0;const i=new Set(a??this.#h);return this.options.throwOnError&&i.add("error"),Object.keys(this.#s).some(o=>{const c=o;return this.#s[c]!==e[c]&&i.has(c)})};this.#N({listeners:r()})}#j(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#N(e){Fr.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function SJ(e,t){return zs(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function rP(e,t){return SJ(e,t)||e.state.data!==void 0&&WS(e,t,t.refetchOnMount)}function WS(e,t,r){if(zs(t.enabled,e)!==!1&&ml(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&yC(e,t)}return!1}function nP(e,t,r,n){return(e!==t||zs(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&yC(e,r)}function yC(e,t){return zs(t.enabled,e)!==!1&&e.isStaleByTime(ml(t.staleTime,e))}function _J(e,t){return!Ey(e.getCurrentResult(),t)}function sP(e){return{onFetch:(t,r)=>{const n=t.options,a=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let c={pages:[],pageParams:[]},d=0;const f=async()=>{let m=!1;const h=w=>{gJ(w,()=>t.signal,()=>m=!0)},g=_6(t.options,t.fetchOptions),x=async(w,b,j)=>{if(m)return Promise.reject();if(b==null&&w.pages.length)return Promise.resolve(w);const _=(()=>{const T={client:t.client,queryKey:t.queryKey,pageParam:b,direction:j?"backward":"forward",meta:t.options.meta};return h(T),T})(),S=await g(_),{maxPages:k}=t.options,A=j?pJ:hJ;return{pages:A(w.pages,S,k),pageParams:A(w.pageParams,b,k)}};if(a&&i.length){const w=a==="backward",b=w?CJ:aP,j={pages:i,pageParams:o},N=b(n,j);c=await x(j,N,w)}else{const w=e??i.length;do{const b=d===0?o[0]??n.initialPageParam:aP(n,c);if(d>0&&b==null)break;c=await x(c,b),d++}while(d<w)}return c};t.options.persister?t.fetchFn=()=>t.options.persister?.(f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=f}}}function aP(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function CJ(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var kJ=class extends E6{#e;#t;#r;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||T6(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=k6({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#n({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const n=this.state.status==="pending",a=!this.#s.canStart();try{if(n)t();else{this.#n({type:"pending",variables:e,isPaused:a}),this.#r.config.onMutate&&await this.#r.config.onMutate(e,this,r);const o=await this.options.onMutate?.(e,r);o!==this.state.context&&this.#n({type:"pending",context:o,variables:e,isPaused:a})}const i=await this.#s.start();return await this.#r.config.onSuccess?.(i,e,this.state.context,this,r),await this.options.onSuccess?.(i,e,this.state.context,r),await this.#r.config.onSettled?.(i,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(i,null,e,this.state.context,r),this.#n({type:"success",data:i}),i}catch(i){try{await this.#r.config.onError?.(i,e,this.state.context,this,r)}catch(o){Promise.reject(o)}try{await this.options.onError?.(i,e,this.state.context,r)}catch(o){Promise.reject(o)}try{await this.#r.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,r)}catch(o){Promise.reject(o)}try{await this.options.onSettled?.(void 0,i,e,this.state.context,r)}catch(o){Promise.reject(o)}throw this.#n({type:"error",error:i}),i}finally{this.#r.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Fr.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function T6(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var EJ=class extends af{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const n=new kJ({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#e.add(e);const t=ux(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=ux(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=ux(e);if(typeof t=="string"){const n=this.#t.get(t)?.find(a=>a.state.status==="pending");return!n||n===e}else return!0}runNext(e){const t=ux(e);return typeof t=="string"?this.#t.get(t)?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Fr.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>XO(t,r))}findAll(e={}){return this.getAll().filter(t=>XO(e,t))}notify(e){Fr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Fr.batch(()=>Promise.all(e.map(t=>t.continue().catch(kn))))}};function ux(e){return e.options.scope?.id}var AJ=class extends af{#e;#t=void 0;#r;#s;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),Ey(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&Rc(r.mutationKey)!==Rc(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#i(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#i()}mutate(t,r){return this.#s=r,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#n(){const t=this.#r?.state??T6();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){Fr.batch(()=>{if(this.#s&&this.hasListeners()){const r=this.#t.variables,n=this.#t.context,a={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#s.onSuccess?.(t.data,r,n,a)}catch(i){Promise.reject(i)}try{this.#s.onSettled?.(t.data,null,r,n,a)}catch(i){Promise.reject(i)}}else if(t?.type==="error"){try{this.#s.onError?.(t.error,r,n,a)}catch(i){Promise.reject(i)}try{this.#s.onSettled?.(void 0,t.error,r,n,a)}catch(i){Promise.reject(i)}}}this.listeners.forEach(r=>{r(this.#t)})})}},TJ=class extends af{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const n=t.queryKey,a=t.queryHash??hC(n,t);let i=this.get(a);return i||(i=new jJ({client:e,queryKey:n,queryHash:a,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Fr.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>YO(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>YO(e,r)):t}notify(e){Fr.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Fr.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Fr.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},OJ=class{#e;#t;#r;#s;#n;#i;#o;#a;constructor(e={}){this.#e=e.queryCache||new TJ,this.#t=e.mutationCache||new EJ,this.#r=e.defaultOptions||{},this.#s=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=xC.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Ay.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(ml(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),i=this.#e.get(n.queryHash)?.state.data,o=uJ(t,i);if(o!==void 0)return this.#e.build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Fr.batch(()=>this.#e.findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Fr.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return Fr.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Fr.batch(()=>this.#e.findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(kn).catch(kn)}invalidateQueries(e,t={}){return Fr.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Fr.batch(()=>this.#e.findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(kn)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(kn)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(ml(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(kn).catch(kn)}fetchInfiniteQuery(e){return e.behavior=sP(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(kn).catch(kn)}ensureInfiniteQueryData(e){return e.behavior=sP(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ay.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#s.set(Rc(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#s.values()],r={};return t.forEach(n=>{dh(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){this.#n.set(Rc(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(n=>{dh(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=hC(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===pC&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},O6=y.createContext(void 0),Ee=e=>{const t=y.useContext(O6);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},PJ=({client:e,children:t})=>(y.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(O6.Provider,{value:e,children:t})),P6=y.createContext(!1),MJ=()=>y.useContext(P6);P6.Provider;function RJ(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var DJ=y.createContext(RJ()),IJ=()=>y.useContext(DJ),LJ=(e,t,r)=>{const n=r?.state.error&&typeof e.throwOnError=="function"?gC(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||n)&&(t.isReset()||(e.retryOnMount=!1))},$J=e=>{y.useEffect(()=>{e.clearReset()},[e])},zJ=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(a&&e.data===void 0||gC(r,[e.error,n])),UJ=e=>{if(e.suspense){const r=a=>a==="static"?a:Math.max(a??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...a)=>r(n(...a)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},FJ=(e,t)=>e.isLoading&&e.isFetching&&!t,BJ=(e,t)=>e?.suspense&&t.isPending,iP=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function qJ(e,t,r){const n=MJ(),a=IJ(),i=Ee(),o=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(o);const c=i.getQueryCache().get(o.queryHash);o._optimisticResults=n?"isRestoring":"optimistic",UJ(o),LJ(o,a,c),$J(a);const d=!i.getQueryCache().get(o.queryHash),[f]=y.useState(()=>new t(i,o)),m=f.getOptimisticResult(o),h=!n&&e.subscribed!==!1;if(y.useSyncExternalStore(y.useCallback(g=>{const x=h?f.subscribe(Fr.batchCalls(g)):kn;return f.updateResult(),x},[f,h]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),y.useEffect(()=>{f.setOptions(o)},[o,f]),BJ(o,m))throw iP(o,f,a);if(zJ({result:m,errorResetBoundary:a,throwOnError:o.throwOnError,query:c,suspense:o.suspense}))throw m.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(o,m),o.experimental_prefetchInRender&&!Mc&&FJ(m,n)&&(d?iP(o,f,a):c?.promise)?.catch(kn).finally(()=>{f.updateResult()}),o.notifyOnChangeProps?m:f.trackResult(m)}function Ce(e,t){return qJ(e,NJ)}function je(e,t){const r=Ee(),[n]=y.useState(()=>new AJ(r,e));y.useEffect(()=>{n.setOptions(e)},[n,e]);const a=y.useSyncExternalStore(y.useCallback(o=>n.subscribe(Fr.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=y.useCallback((o,c)=>{n.mutate(o,c).catch(kn)},[n]);if(a.error&&gC(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const M6=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();const VJ=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const KJ=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase());const oP=e=>{const t=KJ(e);return t.charAt(0).toUpperCase()+t.slice(1)};var HJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const GJ=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const WJ=y.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...c},d)=>y.createElement("svg",{ref:d,...HJ,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:M6("lucide",a),...!i&&!GJ(c)&&{"aria-hidden":"true"},...c},[...o.map(([f,m])=>y.createElement(f,m)),...Array.isArray(i)?i:[i]]));const ve=(e,t)=>{const r=y.forwardRef(({className:n,...a},i)=>y.createElement(WJ,{ref:i,iconNode:t,className:M6(`lucide-${VJ(oP(e))}`,`lucide-${e}`,n),...a}));return r.displayName=oP(e),r};const QJ=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],fh=ve("activity",QJ);const YJ=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],vC=ve("archive",YJ);const XJ=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],ZJ=ve("arrow-down-left",XJ);const JJ=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],eee=ve("arrow-down-right",JJ);const tee=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],R6=ve("arrow-left-right",tee);const ree=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],vs=ve("arrow-left",ree);const nee=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ob=ve("arrow-right",nee);const see=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],D6=ve("arrow-up-right",see);const aee=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]],iee=ve("at-sign",aee);const oee=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],bC=ve("ban",oee);const lee=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],cee=ve("bell",lee);const uee=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],QS=ve("book-open",uee);const dee=[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]],fee=ve("braces",dee);const mee=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],hee=ve("brain",mee);const pee=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Id=ve("briefcase",pee);const gee=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],of=ve("building-2",gee);const xee=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ja=ve("calendar",xee);const yee=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],wC=ve("chart-column",yee);const vee=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Jc=ve("check",vee);const bee=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],un=ve("chevron-down",bee);const wee=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ui=ve("chevron-right",wee);const jee=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Sl=ve("chevron-up",jee);const Nee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],rp=ve("circle-alert",Nee);const See=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],sy=ve("circle-check",See);const _ee=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Gn=ve("circle-check-big",_ee);const Cee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],I6=ve("circle-question-mark",Cee);const kee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],lP=ve("circle-x",kee);const Eee=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],YS=ve("circle",Eee);const Aee=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],Tee=ve("clipboard",Aee);const Oee=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],tr=ve("clock",Oee);const Pee=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],Mee=ve("code-xml",Pee);const Ree=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],L6=ve("copy",Ree);const Dee=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],$6=ve("cpu",Dee);const Iee=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Lee=ve("credit-card",Iee);const $ee=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Ty=ve("database",$ee);const zee=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],jC=ve("dollar-sign",zee);const Uee=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Xi=ve("download",Uee);const Fee=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],mh=ve("external-link",Fee);const Bee=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],NC=ve("eye-off",Bee);const qee=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],eu=ve("eye",qee);const Vee=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],SC=ve("file-braces",Vee);const Kee=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 18v-2",key:"qcmpov"}],["path",{d:"M12 18v-4",key:"q1q25u"}],["path",{d:"M16 18v-6",key:"15y0np"}]],Hee=ve("file-chart-column-increasing",Kee);const Gee=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Wee=ve("file-spreadsheet",Gee);const Qee=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Wt=ve("file-text",Qee);const Yee=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],z6=ve("file",Yee);const Xee=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Zi=ve("folder-open",Xee);const Zee=[["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v.5",key:"1dkoa9"}],["path",{d:"M12 10v4h4",key:"1czhmt"}],["path",{d:"m12 14 1.535-1.605a5 5 0 0 1 8 1.5",key:"lvuxfi"}],["path",{d:"M22 22v-4h-4",key:"1ewp4q"}],["path",{d:"m22 18-1.535 1.605a5 5 0 0 1-8-1.5",key:"14ync0"}]],U6=ve("folder-sync",Zee);const Jee=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],cP=ve("folder-tree",Jee);const ete=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],_C=ve("funnel",ete);const tte=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],F6=ve("gauge",tte);const rte=[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3l8.384-8.381",key:"pgg06f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m21.5 10.5-8-8",key:"a17d9x"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m8.5 7.5 8 8",key:"1oyaui"}]],nte=ve("gavel",rte);const ste=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],ate=ve("git-commit-horizontal",ste);const ite=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],lf=ve("globe",ite);const ote=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],uP=ve("grip-vertical",ote);const lte=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],cte=ve("hash",lte);const ute=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],B6=ve("headphones",ute);const dte=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],q6=ve("heart",dte);const fte=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],hh=ve("history",fte);const mte=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],CC=ve("image",mte);const hte=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],pte=ve("info",hte);const gte=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],ph=ve("key",gte);const xte=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],V6=ve("languages",xte);const yte=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],kC=ve("layers",yte);const vte=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],bte=ve("layout-dashboard",vte);const wte=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],jte=ve("layout-grid",wte);const Nte=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],np=ve("lightbulb",Nte);const Ste=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],lb=ve("link-2",Ste);const _te=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],K6=ve("linkedin",_te);const Cte=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}]],H6=ve("list-checks",Cte);const kte=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],EC=ve("list",kte);const Ete=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ye=ve("loader-circle",Ete);const Ate=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Tte=ve("lock",Ate);const Ote=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],G6=ve("log-out",Ote);const Pte=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Wn=ve("mail",Pte);const Mte=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],W6=ve("map-pin",Mte);const Rte=[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]],dP=ve("merge",Rte);const Dte=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Ite=ve("menu",Dte);const Lte=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],cb=ve("message-circle",Lte);const $te=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],ms=ve("message-square",$te);const zte=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],gh=ve("mic",zte);const Ute=[["path",{d:"M5 12h14",key:"1ays0h"}]],Q6=ve("minus",Ute);const Fte=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],AC=ve("monitor",Fte);const Bte=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Y6=ve("moon",Bte);const qte=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],yl=ve("network",qte);const Vte=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Kte=ve("palette",Vte);const Hte=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Gte=ve("pause",Hte);const Wte=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Qte=ve("pen-line",Wte);const Yte=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],_l=ve("pen",Yte);const Xte=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],TC=ve("phone",Xte);const Zte=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],OC=ve("play",Zte);const Jte=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],br=ve("plus",Jte);const ere=[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]],tre=ve("presentation",ere);const rre=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Gs=ve("refresh-cw",rre);const nre=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Qr=ve("rotate-cw",nre);const sre=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Us=ve("save",sre);const are=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],bs=ve("search",are);const ire=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],ore=ve("send",ire);const lre=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],cre=ve("settings-2",lre);const ure=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],PC=ve("settings",ure);const dre=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],MC=ve("share-2",dre);const fre=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],X6=ve("shield-alert",fre);const mre=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],eh=ve("shield-check",mre);const hre=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],cf=ve("shield",hre);const pre=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],Z6=ve("sliders-horizontal",pre);const gre=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],qt=ve("sparkles",gre);const xre=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Oy=ve("square-check-big",xre);const yre=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],vre=ve("square",yre);const bre=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Fs=ve("star",bre);const wre=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],J6=ve("sticky-note",wre);const jre=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],RC=ve("sun",jre);const Nre=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Ld=ve("target",Nre);const Sre=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],e8=ve("terminal",Sre);const _re=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],ub=ve("text-align-start",_re);const Cre=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Et=ve("trash-2",Cre);const kre=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],t8=ve("trending-down",kre);const Ere=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],sp=ve("trending-up",Ere);const Are=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],vr=ve("triangle-alert",Are);const Tre=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Ore=ve("type",Tre);const Pre=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],db=ve("upload",Pre);const Mre=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],fP=ve("user-plus",Mre);const Rre=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],fn=ve("user",Rre);const Dre=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],hj=ve("users-round",Dre);const Ire=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],yr=ve("users",Ire);const Lre=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],uf=ve("wand-sparkles",Lre);const $re=[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]],r8=ve("webhook",$re);const zre=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Ure=ve("wrench",zre);const Fre=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],mn=ve("x",Fre);const Bre=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],hn=ve("zap",Bre);function n8(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=n8(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Nt(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=n8(e))&&(n&&(n+=" "),n+=t);return n}const qre=(e,t)=>{const r=new Array(e.length+t.length);for(let n=0;n<e.length;n++)r[n]=e[n];for(let n=0;n<t.length;n++)r[e.length+n]=t[n];return r},Vre=(e,t)=>({classGroupId:e,validator:t}),s8=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),Py="-",mP=[],Kre="arbitrary..",Hre=e=>{const t=Wre(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return Gre(o);const c=o.split(Py),d=c[0]===""&&c.length>1?1:0;return a8(c,d,t)},getConflictingClassGroupIds:(o,c)=>{if(c){const d=n[o],f=r[o];return d?f?qre(f,d):d:f||mP}return r[o]||mP}}},a8=(e,t,r)=>{if(e.length-t===0)return r.classGroupId;const a=e[t],i=r.nextPart.get(a);if(i){const f=a8(e,t+1,i);if(f)return f}const o=r.validators;if(o===null)return;const c=t===0?e.join(Py):e.slice(t).join(Py),d=o.length;for(let f=0;f<d;f++){const m=o[f];if(m.validator(c))return m.classGroupId}},Gre=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),n=t.slice(0,r);return n?Kre+n:void 0})(),Wre=e=>{const{theme:t,classGroups:r}=e;return Qre(r,t)},Qre=(e,t)=>{const r=s8();for(const n in e){const a=e[n];DC(a,r,n,t)}return r},DC=(e,t,r,n)=>{const a=e.length;for(let i=0;i<a;i++){const o=e[i];Yre(o,t,r,n)}},Yre=(e,t,r,n)=>{if(typeof e=="string"){Xre(e,t,r);return}if(typeof e=="function"){Zre(e,t,r,n);return}Jre(e,t,r,n)},Xre=(e,t,r)=>{const n=e===""?t:i8(t,e);n.classGroupId=r},Zre=(e,t,r,n)=>{if(ene(e)){DC(e(n),t,r,n);return}t.validators===null&&(t.validators=[]),t.validators.push(Vre(r,e))},Jre=(e,t,r,n)=>{const a=Object.entries(e),i=a.length;for(let o=0;o<i;o++){const[c,d]=a[o];DC(d,i8(t,c),r,n)}},i8=(e,t)=>{let r=e;const n=t.split(Py),a=n.length;for(let i=0;i<a;i++){const o=n[i];let c=r.nextPart.get(o);c||(c=s8(),r.nextPart.set(o,c)),r=c}return r},ene=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,tne=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),n=Object.create(null);const a=(i,o)=>{r[i]=o,t++,t>e&&(t=0,n=r,r=Object.create(null))};return{get(i){let o=r[i];if(o!==void 0)return o;if((o=n[i])!==void 0)return a(i,o),o},set(i,o){i in r?r[i]=o:a(i,o)}}},XS="!",hP=":",rne=[],pP=(e,t,r,n,a)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:n,isExternal:a}),nne=e=>{const{prefix:t,experimentalParseClassName:r}=e;let n=a=>{const i=[];let o=0,c=0,d=0,f;const m=a.length;for(let b=0;b<m;b++){const j=a[b];if(o===0&&c===0){if(j===hP){i.push(a.slice(d,b)),d=b+1;continue}if(j==="/"){f=b;continue}}j==="["?o++:j==="]"?o--:j==="("?c++:j===")"&&c--}const h=i.length===0?a:a.slice(d);let g=h,x=!1;h.endsWith(XS)?(g=h.slice(0,-1),x=!0):h.startsWith(XS)&&(g=h.slice(1),x=!0);const w=f&&f>d?f-d:void 0;return pP(i,x,g,w)};if(t){const a=t+hP,i=n;n=o=>o.startsWith(a)?i(o.slice(a.length)):pP(rne,!1,o,void 0,!0)}if(r){const a=n;n=i=>r({className:i,parseClassName:a})}return n},sne=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((r,n)=>{t.set(r,1e6+n)}),r=>{const n=[];let a=[];for(let i=0;i<r.length;i++){const o=r[i],c=o[0]==="[",d=t.has(o);c||d?(a.length>0&&(a.sort(),n.push(...a),a=[]),n.push(o)):a.push(o)}return a.length>0&&(a.sort(),n.push(...a)),n}},ane=e=>({cache:tne(e.cacheSize),parseClassName:nne(e),sortModifiers:sne(e),...Hre(e)}),ine=/\s+/,one=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a,sortModifiers:i}=t,o=[],c=e.trim().split(ine);let d="";for(let f=c.length-1;f>=0;f-=1){const m=c[f],{isExternal:h,modifiers:g,hasImportantModifier:x,baseClassName:w,maybePostfixModifierPosition:b}=r(m);if(h){d=m+(d.length>0?" "+d:d);continue}let j=!!b,N=n(j?w.substring(0,b):w);if(!N){if(!j){d=m+(d.length>0?" "+d:d);continue}if(N=n(w),!N){d=m+(d.length>0?" "+d:d);continue}j=!1}const _=g.length===0?"":g.length===1?g[0]:i(g).join(":"),S=x?_+XS:_,k=S+N;if(o.indexOf(k)>-1)continue;o.push(k);const A=a(N,j);for(let T=0;T<A.length;++T){const O=A[T];o.push(S+O)}d=m+(d.length>0?" "+d:d)}return d},lne=(...e)=>{let t=0,r,n,a="";for(;t<e.length;)(r=e[t++])&&(n=o8(r))&&(a&&(a+=" "),a+=n);return a},o8=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=o8(e[n]))&&(r&&(r+=" "),r+=t);return r},cne=(e,...t)=>{let r,n,a,i;const o=d=>{const f=t.reduce((m,h)=>h(m),e());return r=ane(f),n=r.cache.get,a=r.cache.set,i=c,c(d)},c=d=>{const f=n(d);if(f)return f;const m=one(d,r);return a(d,m),m};return i=o,(...d)=>i(lne(...d))},une=[],Dr=e=>{const t=r=>r[e]||une;return t.isThemeGetter=!0,t},l8=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,c8=/^\((?:(\w[\w-]*):)?(.+)\)$/i,dne=/^\d+\/\d+$/,fne=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,mne=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,hne=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,pne=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,gne=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Wu=e=>dne.test(e),et=e=>!!e&&!Number.isNaN(Number(e)),el=e=>!!e&&Number.isInteger(Number(e)),pj=e=>e.endsWith("%")&&et(e.slice(0,-1)),Di=e=>fne.test(e),u8=()=>!0,xne=e=>mne.test(e)&&!hne.test(e),IC=()=>!1,yne=e=>pne.test(e),vne=e=>gne.test(e),bne=e=>!Me(e)&&!Re(e),wne=e=>Cl(e,m8,IC),Me=e=>l8.test(e),nc=e=>Cl(e,h8,xne),gP=e=>Cl(e,Ane,et),jne=e=>Cl(e,g8,u8),Nne=e=>Cl(e,p8,IC),xP=e=>Cl(e,d8,IC),Sne=e=>Cl(e,f8,vne),dx=e=>Cl(e,x8,yne),Re=e=>c8.test(e),km=e=>tu(e,h8),_ne=e=>tu(e,p8),yP=e=>tu(e,d8),Cne=e=>tu(e,m8),kne=e=>tu(e,f8),fx=e=>tu(e,x8,!0),Ene=e=>tu(e,g8,!0),Cl=(e,t,r)=>{const n=l8.exec(e);return n?n[1]?t(n[1]):r(n[2]):!1},tu=(e,t,r=!1)=>{const n=c8.exec(e);return n?n[1]?t(n[1]):r:!1},d8=e=>e==="position"||e==="percentage",f8=e=>e==="image"||e==="url",m8=e=>e==="length"||e==="size"||e==="bg-size",h8=e=>e==="length",Ane=e=>e==="number",p8=e=>e==="family-name",g8=e=>e==="number"||e==="weight",x8=e=>e==="shadow",Tne=()=>{const e=Dr("color"),t=Dr("font"),r=Dr("text"),n=Dr("font-weight"),a=Dr("tracking"),i=Dr("leading"),o=Dr("breakpoint"),c=Dr("container"),d=Dr("spacing"),f=Dr("radius"),m=Dr("shadow"),h=Dr("inset-shadow"),g=Dr("text-shadow"),x=Dr("drop-shadow"),w=Dr("blur"),b=Dr("perspective"),j=Dr("aspect"),N=Dr("ease"),_=Dr("animate"),S=()=>["auto","avoid","all","avoid-page","page","left","right","column"],k=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],A=()=>[...k(),Re,Me],T=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],P=()=>[Re,Me,d],R=()=>[Wu,"full","auto",...P()],M=()=>[el,"none","subgrid",Re,Me],D=()=>["auto",{span:["full",el,Re,Me]},el,Re,Me],z=()=>[el,"auto",Re,Me],Y=()=>["auto","min","max","fr",Re,Me],I=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],K=()=>["start","end","center","stretch","center-safe","end-safe"],U=()=>["auto",...P()],L=()=>[Wu,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...P()],F=()=>[e,Re,Me],q=()=>[...k(),yP,xP,{position:[Re,Me]}],Z=()=>["no-repeat",{repeat:["","x","y","space","round"]}],B=()=>["auto","cover","contain",Cne,wne,{size:[Re,Me]}],V=()=>[pj,km,nc],ee=()=>["","none","full",f,Re,Me],ae=()=>["",et,km,nc],J=()=>["solid","dashed","dotted","double"],se=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ne=()=>[et,pj,yP,xP],oe=()=>["","none",w,Re,Me],Q=()=>["none",et,Re,Me],pe=()=>["none",et,Re,Me],he=()=>[et,Re,Me],te=()=>[Wu,"full",...P()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Di],breakpoint:[Di],color:[u8],container:[Di],"drop-shadow":[Di],ease:["in","out","in-out"],font:[bne],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Di],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Di],shadow:[Di],spacing:["px",et],text:[Di],"text-shadow":[Di],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Wu,Me,Re,j]}],container:["container"],columns:[{columns:[et,Me,Re,c]}],"break-after":[{"break-after":S()}],"break-before":[{"break-before":S()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:A()}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{start:R()}],end:[{end:R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[el,"auto",Re,Me]}],basis:[{basis:[Wu,"full","auto",c,...P()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[et,Wu,"auto","initial","none",Me]}],grow:[{grow:["",et,Re,Me]}],shrink:[{shrink:["",et,Re,Me]}],order:[{order:[el,"first","last","none",Re,Me]}],"grid-cols":[{"grid-cols":M()}],"col-start-end":[{col:D()}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":M()}],"row-start-end":[{row:D()}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Y()}],"auto-rows":[{"auto-rows":Y()}],gap:[{gap:P()}],"gap-x":[{"gap-x":P()}],"gap-y":[{"gap-y":P()}],"justify-content":[{justify:[...I(),"normal"]}],"justify-items":[{"justify-items":[...K(),"normal"]}],"justify-self":[{"justify-self":["auto",...K()]}],"align-content":[{content:["normal",...I()]}],"align-items":[{items:[...K(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...K(),{baseline:["","last"]}]}],"place-content":[{"place-content":I()}],"place-items":[{"place-items":[...K(),"baseline"]}],"place-self":[{"place-self":["auto",...K()]}],p:[{p:P()}],px:[{px:P()}],py:[{py:P()}],ps:[{ps:P()}],pe:[{pe:P()}],pt:[{pt:P()}],pr:[{pr:P()}],pb:[{pb:P()}],pl:[{pl:P()}],m:[{m:U()}],mx:[{mx:U()}],my:[{my:U()}],ms:[{ms:U()}],me:[{me:U()}],mt:[{mt:U()}],mr:[{mr:U()}],mb:[{mb:U()}],ml:[{ml:U()}],"space-x":[{"space-x":P()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":P()}],"space-y-reverse":["space-y-reverse"],size:[{size:L()}],w:[{w:[c,"screen",...L()]}],"min-w":[{"min-w":[c,"screen","none",...L()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[o]},...L()]}],h:[{h:["screen","lh",...L()]}],"min-h":[{"min-h":["screen","lh","none",...L()]}],"max-h":[{"max-h":["screen","lh",...L()]}],"font-size":[{text:["base",r,km,nc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Ene,jne]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",pj,Me]}],"font-family":[{font:[_ne,Nne,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,Re,Me]}],"line-clamp":[{"line-clamp":[et,"none",Re,gP]}],leading:[{leading:[i,...P()]}],"list-image":[{"list-image":["none",Re,Me]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Re,Me]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:F()}],"text-color":[{text:F()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...J(),"wavy"]}],"text-decoration-thickness":[{decoration:[et,"from-font","auto",Re,nc]}],"text-decoration-color":[{decoration:F()}],"underline-offset":[{"underline-offset":[et,"auto",Re,Me]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Re,Me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Re,Me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:q()}],"bg-repeat":[{bg:Z()}],"bg-size":[{bg:B()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},el,Re,Me],radial:["",Re,Me],conic:[el,Re,Me]},kne,Sne]}],"bg-color":[{bg:F()}],"gradient-from-pos":[{from:V()}],"gradient-via-pos":[{via:V()}],"gradient-to-pos":[{to:V()}],"gradient-from":[{from:F()}],"gradient-via":[{via:F()}],"gradient-to":[{to:F()}],rounded:[{rounded:ee()}],"rounded-s":[{"rounded-s":ee()}],"rounded-e":[{"rounded-e":ee()}],"rounded-t":[{"rounded-t":ee()}],"rounded-r":[{"rounded-r":ee()}],"rounded-b":[{"rounded-b":ee()}],"rounded-l":[{"rounded-l":ee()}],"rounded-ss":[{"rounded-ss":ee()}],"rounded-se":[{"rounded-se":ee()}],"rounded-ee":[{"rounded-ee":ee()}],"rounded-es":[{"rounded-es":ee()}],"rounded-tl":[{"rounded-tl":ee()}],"rounded-tr":[{"rounded-tr":ee()}],"rounded-br":[{"rounded-br":ee()}],"rounded-bl":[{"rounded-bl":ee()}],"border-w":[{border:ae()}],"border-w-x":[{"border-x":ae()}],"border-w-y":[{"border-y":ae()}],"border-w-s":[{"border-s":ae()}],"border-w-e":[{"border-e":ae()}],"border-w-t":[{"border-t":ae()}],"border-w-r":[{"border-r":ae()}],"border-w-b":[{"border-b":ae()}],"border-w-l":[{"border-l":ae()}],"divide-x":[{"divide-x":ae()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ae()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...J(),"hidden","none"]}],"divide-style":[{divide:[...J(),"hidden","none"]}],"border-color":[{border:F()}],"border-color-x":[{"border-x":F()}],"border-color-y":[{"border-y":F()}],"border-color-s":[{"border-s":F()}],"border-color-e":[{"border-e":F()}],"border-color-t":[{"border-t":F()}],"border-color-r":[{"border-r":F()}],"border-color-b":[{"border-b":F()}],"border-color-l":[{"border-l":F()}],"divide-color":[{divide:F()}],"outline-style":[{outline:[...J(),"none","hidden"]}],"outline-offset":[{"outline-offset":[et,Re,Me]}],"outline-w":[{outline:["",et,km,nc]}],"outline-color":[{outline:F()}],shadow:[{shadow:["","none",m,fx,dx]}],"shadow-color":[{shadow:F()}],"inset-shadow":[{"inset-shadow":["none",h,fx,dx]}],"inset-shadow-color":[{"inset-shadow":F()}],"ring-w":[{ring:ae()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:F()}],"ring-offset-w":[{"ring-offset":[et,nc]}],"ring-offset-color":[{"ring-offset":F()}],"inset-ring-w":[{"inset-ring":ae()}],"inset-ring-color":[{"inset-ring":F()}],"text-shadow":[{"text-shadow":["none",g,fx,dx]}],"text-shadow-color":[{"text-shadow":F()}],opacity:[{opacity:[et,Re,Me]}],"mix-blend":[{"mix-blend":[...se(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":se()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[et]}],"mask-image-linear-from-pos":[{"mask-linear-from":ne()}],"mask-image-linear-to-pos":[{"mask-linear-to":ne()}],"mask-image-linear-from-color":[{"mask-linear-from":F()}],"mask-image-linear-to-color":[{"mask-linear-to":F()}],"mask-image-t-from-pos":[{"mask-t-from":ne()}],"mask-image-t-to-pos":[{"mask-t-to":ne()}],"mask-image-t-from-color":[{"mask-t-from":F()}],"mask-image-t-to-color":[{"mask-t-to":F()}],"mask-image-r-from-pos":[{"mask-r-from":ne()}],"mask-image-r-to-pos":[{"mask-r-to":ne()}],"mask-image-r-from-color":[{"mask-r-from":F()}],"mask-image-r-to-color":[{"mask-r-to":F()}],"mask-image-b-from-pos":[{"mask-b-from":ne()}],"mask-image-b-to-pos":[{"mask-b-to":ne()}],"mask-image-b-from-color":[{"mask-b-from":F()}],"mask-image-b-to-color":[{"mask-b-to":F()}],"mask-image-l-from-pos":[{"mask-l-from":ne()}],"mask-image-l-to-pos":[{"mask-l-to":ne()}],"mask-image-l-from-color":[{"mask-l-from":F()}],"mask-image-l-to-color":[{"mask-l-to":F()}],"mask-image-x-from-pos":[{"mask-x-from":ne()}],"mask-image-x-to-pos":[{"mask-x-to":ne()}],"mask-image-x-from-color":[{"mask-x-from":F()}],"mask-image-x-to-color":[{"mask-x-to":F()}],"mask-image-y-from-pos":[{"mask-y-from":ne()}],"mask-image-y-to-pos":[{"mask-y-to":ne()}],"mask-image-y-from-color":[{"mask-y-from":F()}],"mask-image-y-to-color":[{"mask-y-to":F()}],"mask-image-radial":[{"mask-radial":[Re,Me]}],"mask-image-radial-from-pos":[{"mask-radial-from":ne()}],"mask-image-radial-to-pos":[{"mask-radial-to":ne()}],"mask-image-radial-from-color":[{"mask-radial-from":F()}],"mask-image-radial-to-color":[{"mask-radial-to":F()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":k()}],"mask-image-conic-pos":[{"mask-conic":[et]}],"mask-image-conic-from-pos":[{"mask-conic-from":ne()}],"mask-image-conic-to-pos":[{"mask-conic-to":ne()}],"mask-image-conic-from-color":[{"mask-conic-from":F()}],"mask-image-conic-to-color":[{"mask-conic-to":F()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:q()}],"mask-repeat":[{mask:Z()}],"mask-size":[{mask:B()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Re,Me]}],filter:[{filter:["","none",Re,Me]}],blur:[{blur:oe()}],brightness:[{brightness:[et,Re,Me]}],contrast:[{contrast:[et,Re,Me]}],"drop-shadow":[{"drop-shadow":["","none",x,fx,dx]}],"drop-shadow-color":[{"drop-shadow":F()}],grayscale:[{grayscale:["",et,Re,Me]}],"hue-rotate":[{"hue-rotate":[et,Re,Me]}],invert:[{invert:["",et,Re,Me]}],saturate:[{saturate:[et,Re,Me]}],sepia:[{sepia:["",et,Re,Me]}],"backdrop-filter":[{"backdrop-filter":["","none",Re,Me]}],"backdrop-blur":[{"backdrop-blur":oe()}],"backdrop-brightness":[{"backdrop-brightness":[et,Re,Me]}],"backdrop-contrast":[{"backdrop-contrast":[et,Re,Me]}],"backdrop-grayscale":[{"backdrop-grayscale":["",et,Re,Me]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[et,Re,Me]}],"backdrop-invert":[{"backdrop-invert":["",et,Re,Me]}],"backdrop-opacity":[{"backdrop-opacity":[et,Re,Me]}],"backdrop-saturate":[{"backdrop-saturate":[et,Re,Me]}],"backdrop-sepia":[{"backdrop-sepia":["",et,Re,Me]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":P()}],"border-spacing-x":[{"border-spacing-x":P()}],"border-spacing-y":[{"border-spacing-y":P()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Re,Me]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[et,"initial",Re,Me]}],ease:[{ease:["linear","initial",N,Re,Me]}],delay:[{delay:[et,Re,Me]}],animate:[{animate:["none",_,Re,Me]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,Re,Me]}],"perspective-origin":[{"perspective-origin":A()}],rotate:[{rotate:Q()}],"rotate-x":[{"rotate-x":Q()}],"rotate-y":[{"rotate-y":Q()}],"rotate-z":[{"rotate-z":Q()}],scale:[{scale:pe()}],"scale-x":[{"scale-x":pe()}],"scale-y":[{"scale-y":pe()}],"scale-z":[{"scale-z":pe()}],"scale-3d":["scale-3d"],skew:[{skew:he()}],"skew-x":[{"skew-x":he()}],"skew-y":[{"skew-y":he()}],transform:[{transform:[Re,Me,"","none","gpu","cpu"]}],"transform-origin":[{origin:A()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:te()}],"translate-x":[{"translate-x":te()}],"translate-y":[{"translate-y":te()}],"translate-z":[{"translate-z":te()}],"translate-none":["translate-none"],accent:[{accent:F()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:F()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Re,Me]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Re,Me]}],fill:[{fill:["none",...F()]}],"stroke-w":[{stroke:[et,km,nc,gP]}],stroke:[{stroke:["none",...F()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},One=cne(Tne);function H(...e){return One(Nt(e))}const ZS={default:"bg-[hsl(var(--primary))] text-[hsl(var(--primary-foreground))] hover:opacity-90",secondary:"bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))] hover:opacity-80",destructive:"bg-[hsl(var(--destructive))] text-[hsl(var(--destructive-foreground))] hover:opacity-90",outline:"border border-[hsl(var(--input))] bg-transparent hover:bg-[hsl(var(--accent))] hover:text-[hsl(var(--accent-foreground))]",ghost:"hover:bg-[hsl(var(--accent))] hover:text-[hsl(var(--accent-foreground))]"},JS={default:"h-10 px-4 py-2",sm:"h-9 px-3 text-sm",lg:"h-11 px-8",icon:"h-10 w-10"},Mt=y.forwardRef(({className:e,variant:t="default",size:r="default",disabled:n,...a},i)=>s.jsx("button",{ref:i,className:H("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[hsl(var(--ring))] focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50",ZS[t],JS[r],e),disabled:n,...a}));Mt.displayName="Button";function y8({variant:e="default",size:t="default",className:r=""}={}){return H("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[hsl(var(--ring))] focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50",ZS[e]||ZS.default,JS[t]||JS.default,r)}var Ha=function(){return Ha=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ha.apply(this,arguments)};function df(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function Pne(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function c(m){try{f(n.next(m))}catch(h){o(h)}}function d(m){try{f(n.throw(m))}catch(h){o(h)}}function f(m){m.done?i(m.value):a(m.value).then(c,d)}f((n=n.apply(e,t||[])).next())})}function Mne(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}const Rne=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class LC extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Dne extends LC{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class vP extends LC{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class bP extends LC{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var e2;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(e2||(e2={}));class Ine{constructor(t,{headers:r={},customFetch:n,region:a=e2.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=Rne(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Pne(this,arguments,void 0,function*(r,n={}){var a;let i,o;try{const{headers:c,method:d,body:f,signal:m,timeout:h}=n;let g={},{region:x}=n;x||(x=this.region);const w=new URL(`${this.url}/${r}`);x&&x!=="any"&&(g["x-region"]=x,w.searchParams.set("forceFunctionRegion",x));let b;f&&(c&&!Object.prototype.hasOwnProperty.call(c,"Content-Type")||!c)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",b=f):typeof f=="string"?(g["Content-Type"]="text/plain",b=f):typeof FormData<"u"&&f instanceof FormData?b=f:(g["Content-Type"]="application/json",b=JSON.stringify(f)):f&&typeof f!="string"&&!(typeof Blob<"u"&&f instanceof Blob)&&!(f instanceof ArrayBuffer)&&!(typeof FormData<"u"&&f instanceof FormData)?b=JSON.stringify(f):b=f;let j=m;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),m?(j=o.signal,m.addEventListener("abort",()=>o.abort())):j=o.signal);const N=yield this.fetch(w.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),c),body:b,signal:j}).catch(A=>{throw new Dne(A)}),_=N.headers.get("x-relay-error");if(_&&_==="true")throw new vP(N);if(!N.ok)throw new bP(N);let S=((a=N.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),k;return S==="application/json"?k=yield N.json():S==="application/octet-stream"||S==="application/pdf"?k=yield N.blob():S==="text/event-stream"?k=N:S==="multipart/form-data"?k=yield N.formData():k=yield N.text(),{data:k,error:null,response:N}}catch(c){return{data:null,error:c,response:c instanceof bP||c instanceof vP?c.context:void 0}}finally{i&&clearTimeout(i)}})}}var Lne=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},$ne=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var r=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{let o=null,c=null,d=null,f=i.status,m=i.statusText;if(i.ok){var h,g;if(r.method!=="HEAD"){var x;const N=await i.text();N===""||(r.headers.get("Accept")==="text/csv"||r.headers.get("Accept")&&(!((x=r.headers.get("Accept"))===null||x===void 0)&&x.includes("application/vnd.pgrst.plan+text"))?c=N:c=JSON.parse(N))}const b=(h=r.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),j=(g=i.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");b&&j&&j.length>1&&(d=parseInt(j[1])),r.isMaybeSingle&&r.method==="GET"&&Array.isArray(c)&&(c.length>1?(o={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,d=null,f=406,m="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{var w;const b=await i.text();try{o=JSON.parse(b),Array.isArray(o)&&i.status===404&&(c=[],o=null,f=200,m="OK")}catch{i.status===404&&b===""?(f=204,m="No Content"):o={message:b}}if(o&&r.isMaybeSingle&&(!(o==null||(w=o.details)===null||w===void 0)&&w.includes("0 rows"))&&(o=null,f=200,m="OK"),o&&r.shouldThrowOnError)throw new Lne(o)}return{error:o,data:c,count:d,status:f,statusText:m}});return this.shouldThrowOnError||(a=a.catch(i=>{var o;let c="";const d=i?.cause;if(d){var f,m,h,g;const w=(f=d?.message)!==null&&f!==void 0?f:"",b=(m=d?.code)!==null&&m!==void 0?m:"";c=`${(h=i?.name)!==null&&h!==void 0?h:"FetchError"}: ${i?.message}`,c+=`

Caused by: ${(g=d?.name)!==null&&g!==void 0?g:"Error"}: ${w}`,b&&(c+=` (${b})`),d?.stack&&(c+=`
${d.stack}`)}else{var x;c=(x=i?.stack)!==null&&x!==void 0?x:""}return{error:{message:`${(o=i?.name)!==null&&o!==void 0?o:"FetchError"}: ${i?.message}`,details:c,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(e,t)}returns(){return this}overrideTypes(){return this}},zne=class extends $ne{select(e){let t=!1;const r=(e??"*").split("").map(n=>/\s/.test(n)&&!t?"":(n==='"'&&(t=!t),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:a=n}={}){const i=a?`${a}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"offset":`${n}.offset`,i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:a=!1,format:i="text"}={}){var o;const c=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,a?"wal":null].filter(Boolean).join("|"),d=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${i}; for="${d}"; options=${c};`),i==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};const wP=new RegExp("[,()]");var ud=class extends zne{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&wP.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}notIn(e,t){const r=Array.from(new Set(t)).map(n=>typeof n=="string"&&wP.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(e,`not.in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let a="";n==="plain"?a="pl":n==="phrase"?a="ph":n==="websearch"&&(a="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${a}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}},Une=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){const{head:r=!1,count:n}=t??{},a=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(f=>/\s/.test(f)&&!i?"":(f==='"'&&(i=!i),f)).join(""),{url:c,headers:d}=this.cloneRequestState();return c.searchParams.set("select",o),n&&d.append("Prefer",`count=${n}`),new ud({method:a,url:c,headers:d,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var n;const a="POST",{url:i,headers:o}=this.cloneRequestState();if(t&&o.append("Prefer",`count=${t}`),r||o.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(c.length>0){const d=[...new Set(c)].map(f=>`"${f}"`);i.searchParams.set("columns",d.join(","))}}return new ud({method:a,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:a=!0}={}){var i;const o="POST",{url:c,headers:d}=this.cloneRequestState();if(d.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&c.searchParams.set("on_conflict",t),n&&d.append("Prefer",`count=${n}`),a||d.append("Prefer","missing=default"),Array.isArray(e)){const f=e.reduce((m,h)=>m.concat(Object.keys(h)),[]);if(f.length>0){const m=[...new Set(f)].map(h=>`"${h}"`);c.searchParams.set("columns",m.join(","))}}return new ud({method:o,url:c,headers:d,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}update(e,{count:t}={}){var r;const n="PATCH",{url:a,headers:i}=this.cloneRequestState();return t&&i.append("Prefer",`count=${t}`),new ud({method:n,url:a,headers:i,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE",{url:n,headers:a}=this.cloneRequestState();return e&&a.append("Prefer",`count=${e}`),new ud({method:r,url:n,headers:a,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Fne=class v8{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=a}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Une(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new v8(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){var o;let c;const d=new URL(`${this.url}/rpc/${t}`);let f;const m=x=>x!==null&&typeof x=="object"&&(!Array.isArray(x)||x.some(m)),h=n&&Object.values(r).some(m);h?(c="POST",f=r):n||a?(c=n?"HEAD":"GET",Object.entries(r).filter(([x,w])=>w!==void 0).map(([x,w])=>[x,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([x,w])=>{d.searchParams.append(x,w)})):(c="POST",f=r);const g=new Headers(this.headers);return h?g.set("Prefer",i?`count=${i},return=minimal`:"return=minimal"):i&&g.set("Prefer",`count=${i}`),new ud({method:c,url:d,headers:g,schema:this.schemaName,body:f,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};class Bne{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const r=globalThis.process;if(r){const n=r.versions;if(n&&n.node){const a=n.node,i=parseInt(a.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const qne="2.93.3",Vne=`realtime-js/${qne}`,Kne="1.0.0",b8="2.0.0",jP=b8,t2=1e4,Hne=1e3,Gne=100;var al;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(al||(al={}));var Ir;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ir||(Ir={}));var la;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(la||(la={}));var r2;(function(e){e.websocket="websocket"})(r2||(r2={}));var gc;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(gc||(gc={}));class Wne{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(t){var r,n;const a=(n=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},o=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(t,r,n){var a,i;const o=t.topic,c=(a=t.ref)!==null&&a!==void 0?a:"",d=(i=t.join_ref)!==null&&i!==void 0?i:"",f=t.payload.event,m=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},h=Object.keys(m).length===0?"":JSON.stringify(m);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`ref length ${c.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`userEvent length ${f.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`metadata length ${h.length} exceeds maximum of 255`);const g=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+c.length+o.length+f.length+h.length,x=new ArrayBuffer(this.HEADER_LENGTH+g);let w=new DataView(x),b=0;w.setUint8(b++,this.KINDS.userBroadcastPush),w.setUint8(b++,d.length),w.setUint8(b++,c.length),w.setUint8(b++,o.length),w.setUint8(b++,f.length),w.setUint8(b++,h.length),w.setUint8(b++,r),Array.from(d,N=>w.setUint8(b++,N.charCodeAt(0))),Array.from(c,N=>w.setUint8(b++,N.charCodeAt(0))),Array.from(o,N=>w.setUint8(b++,N.charCodeAt(0))),Array.from(f,N=>w.setUint8(b++,N.charCodeAt(0))),Array.from(h,N=>w.setUint8(b++,N.charCodeAt(0)));var j=new Uint8Array(x.byteLength+n.byteLength);return j.set(new Uint8Array(x),0),j.set(new Uint8Array(n),x.byteLength),j.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,i,o,c,d]=n;return r({join_ref:a,ref:i,topic:o,event:c,payload:d})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;if(n===this.KINDS.userBroadcast)return this._decodeUserBroadcast(t,r,a)}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),c=r.getUint8(4);let d=this.HEADER_LENGTH+4;const f=n.decode(t.slice(d,d+a));d=d+a;const m=n.decode(t.slice(d,d+i));d=d+i;const h=n.decode(t.slice(d,d+o));d=d+o;const g=t.slice(d,t.byteLength),x=c===this.JSON_ENCODING?JSON.parse(n.decode(g)):g,w={type:this.BROADCAST_EVENT,event:m,payload:x};return o>0&&(w.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t?.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([n])=>r.includes(n)))}}let w8=class{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var It;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(It||(It={}));const NP=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=Qne(o,e,t,a),i),{}):{}},Qne=(e,t,r,n)=>{const a=t.find(c=>c.name===e),i=a?.type,o=r[e];return i&&!n.includes(i)?j8(i,o):n2(o)},j8=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Jne(t,r)}switch(e){case It.bool:return Yne(t);case It.float4:case It.float8:case It.int2:case It.int4:case It.int8:case It.numeric:case It.oid:return Xne(t);case It.json:case It.jsonb:return Zne(t);case It.timestamp:return ese(t);case It.abstime:case It.date:case It.daterange:case It.int4range:case It.int8range:case It.money:case It.reltime:case It.text:case It.time:case It.timestamptz:case It.timetz:case It.tsrange:case It.tstzrange:return n2(t);default:return n2(t)}},n2=e=>e,Yne=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Xne=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Zne=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},Jne=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(c=>j8(t,c))}return e},ese=e=>typeof e=="string"?e.replace(" ","T"):e,N8=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class gj{constructor(t,r,n={},a=t2){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var SP;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(SP||(SP={}));class th{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=th.syncState(this.state,a,i,o),this.pendingDiffs.forEach(d=>{this.state=th.syncDiff(this.state,d,i,o)}),this.pendingDiffs=[],c()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=th.syncDiff(this.state,a,i,o),c())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),c={},d={};return this.map(i,(f,m)=>{o[f]||(d[f]=m)}),this.map(o,(f,m)=>{const h=i[f];if(h){const g=m.map(j=>j.presence_ref),x=h.map(j=>j.presence_ref),w=m.filter(j=>x.indexOf(j.presence_ref)<0),b=h.filter(j=>g.indexOf(j.presence_ref)<0);w.length>0&&(c[f]=w),b.length>0&&(d[f]=b)}else c[f]=m}),this.syncDiff(i,{joins:c,leaves:d},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(c,d)=>{var f;const m=(f=t[c])!==null&&f!==void 0?f:[];if(t[c]=this.cloneDeep(d),m.length>0){const h=t[c].map(x=>x.presence_ref),g=m.filter(x=>h.indexOf(x.presence_ref)<0);t[c].unshift(...g)}n(c,m,d)}),this.map(o,(c,d)=>{let f=t[c];if(!f)return;const m=d.map(h=>h.presence_ref);f=f.filter(h=>m.indexOf(h.presence_ref)<0),t[c]=f,a(c,f,d),f.length===0&&delete t[c]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _P;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(_P||(_P={}));var rh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(rh||(rh={}));var Li;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Li||(Li={}));class gd{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Ir.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new gj(this,la.join,this.params,this.timeout),this.rejoinTimer=new w8(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ir.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ir.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ir.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ir.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ir.errored,this.rejoinTimer.scheduleTimeout())}),this._on(la.reply,{},(o,c)=>{this._trigger(this._replyEventName(c),o)}),this.presence=new th(this),this.broadcastEndpointURL=N8(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Ir.closed){const{config:{broadcast:o,presence:c,private:d}}=this.params,f=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&a!==void 0?a:[],m=!!this.bindings[rh.PRESENCE]&&this.bindings[rh.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},g={broadcast:o,presence:Object.assign(Object.assign({},c),{enabled:m}),postgres_changes:f,private:d};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(x=>t?.(Li.CHANNEL_ERROR,x)),this._onClose(()=>t?.(Li.CLOSED)),this.updateJoinPayload(Object.assign({config:g},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var w;if(this.socket._isManualToken()||this.socket.setAuth(),x===void 0){t?.(Li.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,j=(w=b?.length)!==null&&w!==void 0?w:0,N=[];for(let _=0;_<j;_++){const S=b[_],{filter:{event:k,schema:A,table:T,filter:O}}=S,P=x&&x[_];if(P&&P.event===k&&gd.isFilterValueEqual(P.schema,A)&&gd.isFilterValueEqual(P.table,T)&&gd.isFilterValueEqual(P.filter,O))N.push(Object.assign(Object.assign({},S),{id:P.id}));else{this.unsubscribe(),this.state=Ir.errored,t?.(Li.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,t&&t(Li.SUBSCRIBED);return}}).receive("error",x=>{this.state=Ir.errored,t?.(Li.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t?.(Li.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Ir.joined&&t===rh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;if(r==null)return Promise.reject("Payload is required for httpSend()");const i={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(i.Authorization=`Bearer ${this.socket.accessTokenValue}`);const o={method:"POST",headers:i,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},c=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(c.status===202)return{success:!0};let d=c.statusText;try{const f=await c.json();d=f.error||f.message||d}catch{}return Promise.reject(new Error(d))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=f.body)===null||a===void 0?void 0:a.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,c,d;const f=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(c=(o=this.params)===null||o===void 0?void 0:o.config)===null||c===void 0?void 0:c.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),f.receive("ok",()=>i("ok")),f.receive("error",()=>i("error")),f.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ir.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(la.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new gj(this,la.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ir.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new gj(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Gne){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:c,error:d,leave:f,join:m}=la;if(n&&[c,d,f,m].indexOf(o)>=0&&n!==this._joinRef())return;let g=this._onMessage(o,r,n);if(r&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(x=>{var w,b,j;return((w=x.filter)===null||w===void 0?void 0:w.event)==="*"||((j=(b=x.filter)===null||b===void 0?void 0:b.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===o}).map(x=>x.callback(g,n)):(i=this.bindings[o])===null||i===void 0||i.filter(x=>{var w,b,j,N,_,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in x){const k=x.id,A=(w=x.filter)===null||w===void 0?void 0:w.event;return k&&((b=r.ids)===null||b===void 0?void 0:b.includes(k))&&(A==="*"||A?.toLocaleLowerCase()===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const k=(_=(N=x?.filter)===null||N===void 0?void 0:N.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return k==="*"||k===((S=r?.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===o}).map(x=>{if(typeof g=="object"&&"ids"in g){const w=g.data,{schema:b,table:j,commit_timestamp:N,type:_,errors:S}=w;g=Object.assign(Object.assign({},{schema:b,table:j,commit_timestamp:N,eventType:_,new:{},old:{},errors:S}),this._getPayloadRecords(w))}x.callback(g,n)})}_isClosed(){return this.state===Ir.closed}_isJoined(){return this.state===Ir.joined}_isJoining(){return this.state===Ir.joining}_isLeaving(){return this.state===Ir.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&gd.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(la.close,{},t)}_onError(t){this._on(la.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ir.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=NP(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=NP(t.columns,t.old_record)),r}}const xj=()=>{},mx={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},tse=[1e3,2e3,5e3,1e4],rse=1e4,nse=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class sse{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=t2,this.transport=null,this.heartbeatIntervalMs=mx.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=xj,this.ref=0,this.reconnectTimer=null,this.vsn=jP,this.logger=xj,this.conn=null,this.sendBuffer=[],this.serializer=new Wne,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=a=>a?(...i)=>a(...i):(...i)=>fetch(...i),!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${r2.websocket}`,this.httpEndpoint=N8(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Bne.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case al.connecting:return gc.Connecting;case al.open:return gc.Open;case al.closing:return gc.Closing;default:return gc.Closed}}isConnected(){return this.connectionState()===gc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new gd(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,c=>{var d;(d=this.conn)===null||d===void 0||d.send(c)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Hne,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},mx.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply"&&r.ref&&r.ref===this.pendingHeartbeatRef){const f=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error",f)}catch(m){this.log("error","error in heartbeat callback",m)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:n,event:a,payload:i,ref:o}=r,c=o?`(${o})`:"",d=i.status||"";this.log("receive",`${d} ${n} ${a} ${c}`.trim(),i),this.channels.filter(f=>f._isMember(n)).forEach(f=>f._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===al.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===al.open||this.conn.readyState===al.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this._terminateWorker()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(r){this.log("error","error in heartbeat callback",r)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(la.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([nse],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,n=!1;if(t)r=t,n=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),r=this.accessTokenValue}else r=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const i={access_token:r,version:Vne};r&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(la.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new w8(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},mx.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,o,c,d,f,m,h,g,x;switch(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t?.timeout)!==null&&n!==void 0?n:t2,this.heartbeatIntervalMs=(a=t?.heartbeatIntervalMs)!==null&&a!==void 0?a:mx.HEARTBEAT_INTERVAL,this.worker=(i=t?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(c=t?.heartbeatCallback)!==null&&c!==void 0?c:xj,this.vsn=(d=t?.vsn)!==null&&d!==void 0?d:jP,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=t?.reconnectAfterMs)!==null&&f!==void 0?f:(w=>tse[w-1]||rse),this.vsn){case Kne:this.encode=(m=t?.encode)!==null&&m!==void 0?m:((w,b)=>b(JSON.stringify(w))),this.decode=(h=t?.decode)!==null&&h!==void 0?h:((w,b)=>b(JSON.parse(w)));break;case b8:this.encode=(g=t?.encode)!==null&&g!==void 0?g:this.serializer.encode.bind(this.serializer),this.decode=(x=t?.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}var xh=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function ase(e,t,r){const n=new URL(t,e);if(r)for(const[a,i]of Object.entries(r))i!==void 0&&n.searchParams.set(a,i);return n.toString()}async function ise(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function ose(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:a,body:i,headers:o}){const c=ase(e.baseUrl,n,a),d=await ise(e.auth),f=await t(c,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...d,...o},body:i?JSON.stringify(i):void 0}),m=await f.text(),h=(f.headers.get("content-type")||"").includes("application/json"),g=h&&m?JSON.parse(m):m;if(!f.ok){const x=h?g:void 0,w=x?.error;throw new xh(w?.message??`Request failed with status ${f.status}`,{status:f.status,icebergType:w?.type,icebergCode:w?.code,details:x})}return{status:f.status,headers:f.headers,data:g}}}}function hx(e){return e.join("")}var lse=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:hx(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${hx(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hx(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${hx(e.namespace)}`}),!0}catch(t){if(t instanceof xh&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof xh&&r.status===409)return;throw r}}};function Qu(e){return e.join("")}var cse=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Qu(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Qu(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Qu(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Qu(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Qu(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Qu(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof xh&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof xh&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},use=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=ose({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new lse(this.client,t),this.tableOps=new cse(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}},fb=class extends Error{constructor(e,t="storage",r,n){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=r,this.statusCode=n}};function mb(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var px=class extends fb{constructor(e,t,r,n="storage"){super(e,n,t,r),this.name=n==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},S8=class extends fb{constructor(e,t,r="storage"){super(e,r),this.name=r==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const dse=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),fse=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},s2=e=>{if(Array.isArray(e))return e.map(r=>s2(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=s2(n)}),t},mse=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function yh(e){"@babel/helpers - typeof";return yh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yh(e)}function hse(e,t){if(yh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pse(e){var t=hse(e,"string");return yh(t)=="symbol"?t:t+""}function gse(e,t,r){return(t=pse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CP(Object(r),!0).forEach(function(n){gse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const kP=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},xse=async(e,t,r,n)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!r?.noResolveJson){const a=e,i=a.status||500;if(typeof a.json=="function")a.json().then(o=>{const c=o?.statusCode||o?.code||i+"";t(new px(kP(o),i,c,n))}).catch(()=>{if(n==="vectors"){const o=i+"";t(new px(a.statusText||`HTTP ${i} error`,i,o,n))}else{const o=i+"";t(new px(a.statusText||`HTTP ${i} error`,i,o,n))}});else{const o=i+"";t(new px(a.statusText||`HTTP ${i} error`,i,o,n))}}else t(new S8(kP(e),e,n))},yse=(e,t,r,n)=>{const a={method:e,headers:t?.headers||{}};return e==="GET"||e==="HEAD"||!n?We(We({},a),r):(fse(n)?(a.headers=We({"Content-Type":"application/json"},t?.headers),a.body=JSON.stringify(n)):a.body=n,t?.duplex&&(a.duplex=t.duplex),We(We({},a),r))};async function Em(e,t,r,n,a,i,o){return new Promise((c,d)=>{e(r,yse(t,n,a,i)).then(f=>{if(!f.ok)throw f;if(n?.noResolveJson)return f;if(o==="vectors"){const m=f.headers.get("content-type");if(f.headers.get("content-length")==="0"||f.status===204)return{};if(!m||!m.includes("application/json"))return{}}return f.json()}).then(f=>c(f)).catch(f=>xse(f,d,n,o))})}function _8(e="storage"){return{get:async(t,r,n,a)=>Em(t,"GET",r,n,a,void 0,e),post:async(t,r,n,a,i)=>Em(t,"POST",r,a,i,n,e),put:async(t,r,n,a,i)=>Em(t,"PUT",r,a,i,n,e),head:async(t,r,n,a)=>Em(t,"HEAD",r,We(We({},n),{},{noResolveJson:!0}),a,void 0,e),remove:async(t,r,n,a,i)=>Em(t,"DELETE",r,a,i,n,e)}}const vse=_8("storage"),{get:vh,post:oa,put:a2,head:bse,remove:$C}=vse,os=_8("vectors");var ff=class{constructor(e,t={},r,n="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=dse(r),this.namespace=n}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(mb(r))return{data:null,error:r};throw r}}},wse=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(mb(t))return{data:null,error:t};throw t}}};let C8;C8=Symbol.toStringTag;var jse=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[C8]="BlobDownloadBuilder",this.promise=null}asStream(){return new wse(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(mb(t))return{data:null,error:t};throw t}}};const Nse={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},EP={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Sse=class extends ff{constructor(e,t={},r,n){super(e,t,n,"storage"),this.bucketId=r}async uploadOrUpdate(e,t,r,n){var a=this;return a.handleOperation(async()=>{let i;const o=We(We({},EP),n);let c=We(We({},a.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",a.encodeMetadata(d)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),d&&!i.has("metadata")&&i.append("metadata",a.encodeMetadata(d))):(i=r,c["cache-control"]=`max-age=${o.cacheControl}`,c["content-type"]=o.contentType,d&&(c["x-metadata"]=a.toBase64(a.encodeMetadata(d))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),n?.headers&&(c=We(We({},c),n.headers));const f=a._removeEmptyFolders(t),m=a._getFinalPath(f),h=await(e=="PUT"?a2:oa)(a.fetch,`${a.url}/object/${m}`,i,We({headers:c},o?.duplex?{duplex:o.duplex}:{}));return{path:f,id:h.Id,fullPath:h.Key}})}async upload(e,t,r){return this.uploadOrUpdate("POST",e,t,r)}async uploadToSignedUrl(e,t,r,n){var a=this;const i=a._removeEmptyFolders(e),o=a._getFinalPath(i),c=new URL(a.url+`/object/upload/sign/${o}`);return c.searchParams.set("token",t),a.handleOperation(async()=>{let d;const f=We({upsert:EP.upsert},n),m=We(We({},a.headers),{"x-upsert":String(f.upsert)});return typeof Blob<"u"&&r instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",r)):typeof FormData<"u"&&r instanceof FormData?(d=r,d.append("cacheControl",f.cacheControl)):(d=r,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType),{path:i,fullPath:(await a2(a.fetch,c.toString(),d,{headers:m})).Key}})}async createSignedUploadUrl(e,t){var r=this;return r.handleOperation(async()=>{let n=r._getFinalPath(e);const a=We({},r.headers);t?.upsert&&(a["x-upsert"]="true");const i=await oa(r.fetch,`${r.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(r.url+i.url),c=o.searchParams.get("token");if(!c)throw new fb("No token returned by API");return{signedUrl:o.toString(),path:e,token:c}})}async update(e,t,r){return this.uploadOrUpdate("PUT",e,t,r)}async move(e,t,r){var n=this;return n.handleOperation(async()=>await oa(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:n.headers}))}async copy(e,t,r){var n=this;return n.handleOperation(async()=>({path:(await oa(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:n.headers})).Key}))}async createSignedUrl(e,t,r){var n=this;return n.handleOperation(async()=>{let a=n._getFinalPath(e),i=await oa(n.fetch,`${n.url}/object/sign/${a}`,We({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:n.headers});const o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{signedUrl:encodeURI(`${n.url}${i.signedURL}${o}`)}})}async createSignedUrls(e,t,r){var n=this;return n.handleOperation(async()=>{const a=await oa(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:t,paths:e},{headers:n.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return a.map(o=>We(We({},o),{},{signedUrl:o.signedURL?encodeURI(`${n.url}${o.signedURL}${i}`):null}))})}download(e,t){const r=typeof t?.transform<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString(t?.transform||{}),a=n?`?${n}`:"",i=this._getFinalPath(e),o=()=>vh(this.fetch,`${this.url}/${r}/${i}${a}`,{headers:this.headers,noResolveJson:!0});return new jse(o,this.shouldThrowOnError)}async info(e){var t=this;const r=t._getFinalPath(e);return t.handleOperation(async()=>s2(await vh(t.fetch,`${t.url}/object/info/${r}`,{headers:t.headers})))}async exists(e){var t=this;const r=t._getFinalPath(e);try{return await bse(t.fetch,`${t.url}/object/${r}`,{headers:t.headers}),{data:!0,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(mb(n)&&n instanceof S8){const a=n.originalError;if([400,404].includes(a?.status))return{data:!1,error:n}}throw n}}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],a=t?.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&n.push(a);const i=typeof t?.transform<"u"?"render/image":"object",o=this.transformOptsToQueryString(t?.transform||{});o!==""&&n.push(o);let c=n.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${c}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await $C(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,r){var n=this;return n.handleOperation(async()=>{const a=We(We(We({},Nse),t),{},{prefix:e||""});return await oa(n.fetch,`${n.url}/object/list/${n.bucketId}`,a,{headers:n.headers},r)})}async listV2(e,t){var r=this;return r.handleOperation(async()=>{const n=We({},e);return await oa(r.fetch,`${r.url}/object/list-v2/${r.bucketId}`,n,{headers:r.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const _se="2.93.3",ap={"X-Client-Info":`storage-js/${_se}`};var Cse=class extends ff{constructor(e,t={},r,n){const a=new URL(e);n?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase."));const i=a.href.replace(/\/$/,""),o=We(We({},ap),t);super(i,o,r,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=t.listBucketOptionsToQueryString(e);return await vh(t.fetch,`${t.url}/bucket${r}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await vh(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var r=this;return r.handleOperation(async()=>await oa(r.fetch,`${r.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async updateBucket(e,t){var r=this;return r.handleOperation(async()=>await a2(r.fetch,`${r.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:r.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await oa(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await $C(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},kse=class extends ff{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=We(We({},ap),t);super(n,a,r,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await oa(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{const r=new URLSearchParams;e?.limit!==void 0&&r.set("limit",e.limit.toString()),e?.offset!==void 0&&r.set("offset",e.offset.toString()),e?.sortColumn&&r.set("sortColumn",e.sortColumn),e?.sortOrder&&r.set("sortOrder",e.sortOrder),e?.search&&r.set("search",e.search);const n=r.toString(),a=n?`${t.url}/bucket?${n}`:`${t.url}/bucket`;return await vh(t.fetch,a,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await $C(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!mse(e))throw new fb("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new use({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(r,{get(a,i){const o=a[i];return typeof o!="function"?o:async(...c)=>{try{return{data:await o.apply(a,c),error:null}}catch(d){if(n)throw d;return{data:null,error:d}}}}})}},Ese=class extends ff{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=We(We({},ap),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await os.post(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var r=this;return r.handleOperation(async()=>await os.post(r.fetch,`${r.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await os.post(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var r=this;return r.handleOperation(async()=>await os.post(r.fetch,`${r.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:r.headers})||{})}},Ase=class extends ff{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=We(We({},ap),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await os.post(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await os.post(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await os.post(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await os.post(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await os.post(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},Tse=class extends ff{constructor(e,t={},r){const n=e.replace(/\/$/,""),a=We(We({},ap),{},{"Content-Type":"application/json"},t);super(n,a,r,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await os.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await os.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await os.post(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await os.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},Ose=class extends Tse{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Pse(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,r=this;return t().call(r,e)}async getBucket(e){var t=()=>super.getBucket,r=this;return t().call(r,e)}async listBuckets(e={}){var t=()=>super.listBuckets,r=this;return t().call(r,e)}async deleteBucket(e){var t=()=>super.deleteBucket,r=this;return t().call(r,e)}},Pse=class extends Ese{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}async createIndex(e){var t=()=>super.createIndex,r=this;return t().call(r,We(We({},e),{},{vectorBucketName:r.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,r=this;return t().call(r,We(We({},e),{},{vectorBucketName:r.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,r=this;return t().call(r,r.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,r=this;return t().call(r,r.vectorBucketName,e)}index(e){return new Mse(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},Mse=class extends Ase{constructor(e,t,r,n,a){super(e,t,a),this.vectorBucketName=r,this.indexName=n}async putVectors(e){var t=()=>super.putVectors,r=this;return t().call(r,We(We({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async getVectors(e){var t=()=>super.getVectors,r=this;return t().call(r,We(We({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,r=this;return t().call(r,We(We({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,r=this;return t().call(r,We(We({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,r=this;return t().call(r,We(We({},e),{},{vectorBucketName:r.vectorBucketName,indexName:r.indexName}))}},Rse=class extends Cse{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new Sse(this.url,this.headers,e,this.fetch)}get vectors(){return new Ose(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new kse(this.url+"/iceberg",this.headers,this.fetch)}};const k8="2.93.3",dd=30*1e3,i2=3,yj=i2*dd,Dse="http://localhost:9999",Ise="supabase.auth.token",Lse={"X-Client-Info":`gotrue-js/${k8}`},o2="X-Supabase-Api-Version",E8={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},$se=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zse=600*1e3;class bh extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ze(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Use extends bh{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Fse(e){return ze(e)&&e.name==="AuthApiError"}class xc extends bh{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class mo extends bh{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class as extends mo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function vj(e){return ze(e)&&e.name==="AuthSessionMissingError"}class Yu extends mo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class gx extends mo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class xx extends mo{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Bse(e){return ze(e)&&e.name==="AuthImplicitGrantRedirectError"}class AP extends mo{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class qse extends mo{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class l2 extends mo{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function bj(e){return ze(e)&&e.name==="AuthRetryableFetchError"}class TP extends mo{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class c2 extends mo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const My="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),OP=` 	
\r=`.split(""),Vse=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<OP.length;t+=1)e[OP[t].charCodeAt(0)]=-2;for(let t=0;t<My.length;t+=1)e[My[t].charCodeAt(0)]=t;return e})();function PP(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(My[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(My[n]),t.queuedBits-=6}}function A8(e,t,r){const n=Vse[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function MP(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{Gse(o,n,r)};for(let o=0;o<e.length;o+=1)A8(e.charCodeAt(o),a,i);return t.join("")}function Kse(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Hse(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Kse(n,t)}}function Gse(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Ed(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)A8(e.charCodeAt(a),r,n);return new Uint8Array(t)}function Wse(e){const t=[];return Hse(e,r=>t.push(r)),new Uint8Array(t)}function vc(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>PP(a,r,n)),PP(null,r,n),t.join("")}function Qse(e){return Math.round(Date.now()/1e3)+e}function Yse(){return Symbol("auth-callback")}const an=()=>typeof window<"u"&&typeof document<"u",sc={tested:!1,writable:!1},T8=()=>{if(!an())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(sc.tested)return sc.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),sc.tested=!0,sc.writable=!0}catch{sc.tested=!0,sc.writable=!1}return sc.writable};function Xse(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const O8=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Zse=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",fd=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ac=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},sn=async(e,t)=>{await e.removeItem(t)};class hb{constructor(){this.promise=new hb.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}hb.promiseConstructor=Promise;function yx(e){const t=e.split(".");if(t.length!==3)throw new c2("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!$se.test(t[n]))throw new c2("JWT not in base64url format");return{header:JSON.parse(MP(t[0])),payload:JSON.parse(MP(t[1])),signature:Ed(t[2]),raw:{header:t[0],payload:t[1]}}}async function Jse(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function eae(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function tae(e){return("0"+e.toString(16)).substr(-2)}function rae(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,tae).join("")}async function nae(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function sae(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await nae(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xu(e,t,r=!1){const n=rae();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await fd(e,`${t}-code-verifier`,a);const i=await sae(n);return[i,n===i?"plain":"s256"]}const aae=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function iae(e){const t=e.headers.get(o2);if(!t||!t.match(aae))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function oae(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function lae(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const cae=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Zu(e){if(!cae.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function wj(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function uae(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function RP(e){return JSON.parse(JSON.stringify(e))}const cc=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),dae=[502,503,504];async function DP(e){var t;if(!Zse(e))throw new l2(cc(e),0);if(dae.includes(e.status))throw new l2(cc(e),e.status);let r;try{r=await e.json()}catch(i){throw new xc(cc(i),i)}let n;const a=iae(e);if(a&&a.getTime()>=E8["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new TP(cc(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new as}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new TP(cc(r),e.status,r.weak_password.reasons);throw new Use(cc(r),e.status||500,n)}const fae=(e,t,r,n)=>{const a={method:e,headers:t?.headers||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Ge(e,t,r,n){var a;const i=Object.assign({},n?.headers);i[o2]||(i[o2]=E8["2024-01-01"].name),n?.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n?.query)!==null&&a!==void 0?a:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const c=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await mae(e,t,r+c,{headers:i,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(d):{data:Object.assign({},d),error:null}}async function mae(e,t,r,n,a,i){const o=fae(t,n,a,i);let c;try{c=await e(r,Object.assign({},o))}catch(d){throw console.error(d),new l2(cc(d),0)}if(c.ok||await DP(c),n?.noResolveJson)return c;try{return await c.json()}catch(d){await DP(d)}}function sa(e){var t;let r=null;gae(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Qse(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function IP(e){const t=sa(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ll(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function hae(e){return{data:e,error:null}}function pae(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=df(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},d=Object.assign({},o);return{data:{properties:c,user:d},error:null}}function LP(e){return e}function gae(e){return e.access_token&&e.refresh_token&&e.expires_in}const jj=["global","local","others"];class xae{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=O8(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=jj[0]){if(jj.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${jj.join(", ")}`);try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ze(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ll})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=df(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n?.newEmail,delete a.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:pae,redirectTo:r?.redirectTo})}catch(r){if(ze(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ll})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,c,d;try{const f={nextPage:null,lastPage:0,total:0},m=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t?.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:LP});if(m.error)throw m.error;const h=await m.json(),g=(o=m.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(d=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(w=>{const b=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(w.split(";")[1].split("=")[1]);f[`${j}Page`]=b}),f.total=parseInt(g)),{data:Object.assign(Object.assign({},h),f),error:null}}catch(f){if(ze(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){Zu(t);try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ll})}catch(r){if(ze(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Zu(t);try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:ll})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Zu(t);try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:ll})}catch(n){if(ze(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Zu(t.userId);try{const{data:r,error:n}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Zu(t.userId),Zu(t.id);try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,o,c,d;try{const f={nextPage:null,lastPage:0,total:0},m=await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t?.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:LP});if(m.error)throw m.error;const h=await m.json(),g=(o=m.headers.get("x-total-count"))!==null&&o!==void 0?o:0,x=(d=(c=m.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(w=>{const b=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(w.split(";")[1].split("=")[1]);f[`${j}Page`]=b}),f.total=parseInt(g)),{data:Object.assign(Object.assign({},h),f),error:null}}catch(f){if(ze(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ze(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ze(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ze(r))return{data:null,error:r};throw r}}}function $P(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Ju={debug:!!(globalThis&&T8()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class P8 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class yae extends P8{}async function vae(e,t,r){Ju.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Ju.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Ju.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Ju.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Ju.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new yae(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ju.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function bae(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function M8(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function wae(e){return parseInt(e,16)}function jae(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function Nae(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:c,requestId:d,resources:f,scheme:m,uri:h,version:g}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(g!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${g}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const x=M8(e.address),w=m?`${m}://${n}`:n,b=e.statement?`${e.statement}
`:"",j=`${w} wants you to sign in with your Ethereum account:
${x}

${b}`;let N=`URI: ${h}
Version: ${g}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(N+=`
Expiration Time: ${a.toISOString()}`),c&&(N+=`
Not Before: ${c.toISOString()}`),d&&(N+=`
Request ID: ${d}`),f){let _=`
Resources:`;for(const S of f){if(!S||typeof S!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${S}`);_+=`
- ${S}`}N+=_}return`${j}
${N}`}class kr extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Ry extends kr{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function Sae({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new kr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new kr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new kr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new kr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new kr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new kr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(c=>c.type==="public-key").length===0?new kr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new kr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(R8(o)){if(i.rp.id!==o)return new kr({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new kr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new kr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new kr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new kr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function _ae({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new kr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new kr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(R8(n)){if(r.rpId!==n)return new kr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new kr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new kr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new kr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Cae{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const kae=new Cae;function Eae(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=df(e,["challenge","user","excludeCredentials"]),i=Ed(t).buffer,o=Object.assign(Object.assign({},r),{id:Ed(r.id).buffer}),c=Object.assign(Object.assign({},a),{challenge:i,user:o});if(n&&n.length>0){c.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const f=n[d];c.excludeCredentials[d]=Object.assign(Object.assign({},f),{id:Ed(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return c}function Aae(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=df(e,["challenge","allowCredentials"]),a=Ed(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const c=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},c),{id:Ed(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return i}function Tae(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:vc(new Uint8Array(e.response.attestationObject)),clientDataJSON:vc(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Oae(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:vc(new Uint8Array(a.authenticatorData)),clientDataJSON:vc(new Uint8Array(a.clientDataJSON)),signature:vc(new Uint8Array(a.signature)),userHandle:a.userHandle?vc(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function R8(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function zP(){var e,t;return!!(an()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Pae(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ry("Browser returned unexpected credential type",t)}:{data:null,error:new Ry("Empty credential response",t)}}catch(t){return{data:null,error:Sae({error:t,options:e})}}}async function Mae(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ry("Browser returned unexpected credential type",t)}:{data:null,error:new Ry("Empty credential response",t)}}catch(t){return{data:null,error:_ae({error:t,options:e})}}}const Rae={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Dae={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Dy(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const c=n[i];t(c)?n[i]=Dy(c,o):n[i]=Dy(o)}else n[i]=o}return n}function Iae(e,t){return Dy(Rae,e,t||{})}function Lae(e,t){return Dy(Dae,e,t||{})}class $ae{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){var o;try{const{data:c,error:d}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!c)return{data:null,error:d};const f=a??kae.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:m}=c.webauthn.credential_options.publicKey;if(!m.name){const h=n;if(h)m.name=`${m.id}:${h}`;else{const x=(await this.client.getUser()).data.user,w=((o=x?.user_metadata)===null||o===void 0?void 0:o.name)||x?.email||x?.id||"User";m.name=`${m.id}:${w}`}}m.displayName||(m.displayName=m.name)}switch(c.webauthn.type){case"create":{const m=Iae(c.webauthn.credential_options.publicKey,i?.create),{data:h,error:g}=await Pae({publicKey:m,signal:f});return h?{data:{factorId:t,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:h}},error:null}:{data:null,error:g}}case"request":{const m=Lae(c.webauthn.credential_options.publicKey,i?.request),{data:h,error:g}=await Mae(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:m,signal:f}));return h?{data:{factorId:t,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:h}},error:null}:{data:null,error:g}}}}catch(c){return ze(c)?{data:null,error:c}:{data:null,error:new xc("Unexpected error in challenge",c)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new bh("rpId is required for WebAuthn authentication")};try{if(!zP())return{data:null,error:new xc("Browser does not support WebAuthn",null)};const{data:o,error:c}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!o)return{data:null,error:c};const{webauthn:d}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:n,credential_response:d.credential_response}})}catch(o){return ze(o)?{data:null,error:o}:{data:null,error:new xc("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},i){if(!r)return{data:null,error:new bh("rpId is required for WebAuthn registration")};try{if(!zP())return{data:null,error:new xc("Browser does not support WebAuthn",null)};const{data:o,error:c}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(m=>{var h;return(h=m.data)===null||h===void 0?void 0:h.all.find(g=>g.factor_type==="webauthn"&&g.friendly_name===t&&g.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m?.id}):void 0),{data:null,error:c};const{data:d,error:f}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return d?this._verify({factorId:o.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:f}}catch(o){return ze(o)?{data:null,error:o}:{data:null,error:new xc("Unexpected error in register",o)}}}}bae();const zae={url:Dse,storageKey:Ise,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Lse,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function UP(e,t,r){return await r()}const ed={};class wh{get jwks(){var t,r;return(r=(t=ed[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ed[this.storageKey]=Object.assign(Object.assign({},ed[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ed[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ed[this.storageKey]=Object.assign(Object.assign({},ed[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},zae),t);if(this.storageKey=i.storageKey,this.instanceID=(r=wh.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,wh.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&an()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new xae({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=O8(i.fetch),this.lock=i.lock||UP,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,this.lockAcquireTimeout=i.lockAcquireTimeout,i.lock?this.lock=i.lock:this.persistSession&&an()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=vae:this.lock=UP,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new $ae(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:T8()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$P(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=$P(this.memoryStorage)),an()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o);try{await this._notifyAllSubscribers(o.data.event,o.data.session,!1)}catch(c){this._debug("#broadcastChannel","error",c)}})}this.initialize().catch(o=>{this._debug("#initialize()","error",o)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${k8}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(an()&&(r=Xse(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),an()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Bse(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return{error:i}}const{session:o,redirectType:c}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",c),await this._saveSession(o),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ze(r)?this._returnResult({error:r}):this._returnResult({error:new xc("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t?.options)===null||a===void 0?void 0:a.captchaToken}},xform:sa}),{data:o,error:c}=i;if(c||!o)return this._returnResult({data:{user:null,session:null},error:c});const d=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(i){if(ze(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:m,password:h,options:g}=t;let x=null,w=null;this.flowType==="pkce"&&([x,w]=await Xu(this.storage,this.storageKey)),i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g?.emailRedirectTo,body:{email:m,password:h,data:(r=g?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:x,code_challenge_method:w},xform:sa})}else if("phone"in t){const{phone:m,password:h,options:g}=t;i=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:h,data:(n=g?.data)!==null&&n!==void 0?n:{},channel:(a=g?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:g?.captchaToken}},xform:sa})}else throw new gx("You must provide either an email or phone number and a password");const{data:o,error:c}=i;if(c||!o)return await sn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});const d=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(i){if(await sn(this.storage,`${this.storageKey}-code-verifier`),ze(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:c}=t;r=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:IP})}else if("phone"in t){const{phone:i,password:o,options:c}=t;r=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:IP})}else throw new gx("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const i=new Yu;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(ze(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,o,c,d,f,m,h,g;let x,w;if("message"in t)x=t.message,w=t.signature;else{const{chain:b,wallet:j,statement:N,options:_}=t;let S;if(an())if(typeof j=="object")S=j;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")S=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!_?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=j}const k=new URL((r=_?.url)!==null&&r!==void 0?r:window.location.href),A=await S.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=M8(A[0]);let O=(n=_?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!O){const R=await S.request({method:"eth_chainId"});O=wae(R)}const P={domain:k.host,address:T,statement:N,uri:k.href,version:"1",chainId:O,nonce:(a=_?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=_?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(c=_?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(d=_?.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(f=_?.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(m=_?.signInWithEthereum)===null||m===void 0?void 0:m.resources};x=Nae(P),w=await S.request({method:"personal_sign",params:[jae(x),T]})}try{const{data:b,error:j}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:w},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(g=t.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:sa});if(j)throw j;if(!b||!b.session||!b.user){const N=new Yu;return this._returnResult({data:{user:null,session:null},error:N})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:j})}catch(b){if(ze(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async signInWithSolana(t){var r,n,a,i,o,c,d,f,m,h,g,x;let w,b;if("message"in t)w=t.message,b=t.signature;else{const{chain:j,wallet:N,statement:_,options:S}=t;let k;if(an())if(typeof N=="object")k=N;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))k=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!S?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=N}const A=new URL((r=S?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in k&&k.signIn){const T=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S?.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),_?{statement:_}:null));let O;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")O=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)O=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)w=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),b=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${A.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(a=(n=S?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=S?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((o=S?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((c=S?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((d=S?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((f=S?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((h=(m=S?.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||h===void 0)&&h.length?["Resources",...S.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const T=await k.signMessage(new TextEncoder().encode(w),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=T}}try{const{data:j,error:N}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:vc(b)},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:sa});if(N)throw N;if(!j||!j.session||!j.user){const _=new Yu;return this._returnResult({data:{user:null,session:null},error:_})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:N})}catch(j){if(ze(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async _exchangeCodeForSession(t){const r=await ac(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{if(!n&&this.flowType==="pkce")throw new qse;const{data:i,error:o}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:sa});if(await sn(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const c=new Yu;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(await sn(this.storage,`${this.storageKey}-code-verifier`),ze(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,c=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:sa}),{data:d,error:f}=c;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!d||!d.session||!d.user){const m=new Yu;return this._returnResult({data:{user:null,session:null},error:m})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:f})}catch(r){if(ze(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:c,options:d}=t;let f=null,m=null;this.flowType==="pkce"&&([f,m]=await Xu(this.storage,this.storageKey));const{error:h}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=d?.data)!==null&&r!==void 0?r:{},create_user:(n=d?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:f,code_challenge_method:m},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:c,options:d}=t,{data:f,error:m}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(a=d?.data)!==null&&a!==void 0?a:{},create_user:(i=d?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(o=d?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:m})}throw new gx("You must provide either an email or phone number.")}catch(c){if(await sn(this.storage,`${this.storageKey}-code-verifier`),ze(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:c}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:sa});if(c)throw c;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,f=o.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(a){if(ze(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,i,o;try{let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Xu(this.storage,this.storageKey));const f=await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:d}),headers:this.headers,xform:hae});return!((i=f.data)===null||i===void 0)&&i.url&&an()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(c){if(await sn(this.storage,`${this.storageKey}-code-verifier`),ze(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new as;const{error:a}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(ze(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await Ge(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:c}=await Ge(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:c})}throw new gx("You must provide either an email or phone number and a type")}catch(r){if(ze(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await ac(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<yj:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await ac(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=wj()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=uae(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ll}):await this._useSession(async r=>{var n,a,i;const{data:o,error:c}=r;if(c)throw c;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new as}:await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:ll})})}catch(r){if(ze(r))return vj(r)&&(await this._removeSession(),await sn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new as;const o=a.session;let c=null,d=null;this.flowType==="pkce"&&t.email!=null&&([c,d]=await Xu(this.storage,this.storageKey));const{data:f,error:m}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:c,code_challenge_method:d}),jwt:o.access_token,xform:ll});if(m)throw m;return o.user=f.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(await sn(this.storage,`${this.storageKey}-code-verifier`),ze(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new as;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=yx(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{data:c,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!c)return{data:{user:null,session:null},error:null};i=c}else{const{data:c,error:d}=await this._getUser(t.access_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});i={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(ze(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:c}=r;if(c)throw c;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new as;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(ze(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!an())throw new xx("No browser detected.");if(t.error||t.error_description||t.error_code)throw new xx(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new AP("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new xx("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new AP("No code detected.");const{data:_,error:S}=await this._exchangeCodeForSession(t.code);if(S)throw S;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:c,expires_at:d,token_type:f}=t;if(!i||!c||!o||!f)throw new xx("No session defined in URL");const m=Math.round(Date.now()/1e3),h=parseInt(c);let g=m+h;d&&(g=parseInt(d));const x=g-m;x*1e3<=dd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${h}s`);const w=g-h;m-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,g,m):m-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,g,m);const{data:b,error:j}=await this._getUser(i);if(j)throw j;const N={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:g,refresh_token:o,token_type:f,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:N,redirectType:t.type},error:null})}catch(n){if(ze(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await ac(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i&&!vj(i))return this._returnResult({error:i});const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:c}=await this.admin.signOut(o,t);if(c&&!(Fse(c)&&(c.status===404||c.status===401||c.status===403)||vj(c)))return this._returnResult({error:c})}return t!=="others"&&(await this._removeSession(),await sn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=Yse(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Xu(this.storage,this.storageKey,!0));try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await sn(this.storage,`${this.storageKey}-code-verifier`),ze(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(ze(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,c,d,f,m;const{data:h,error:g}=i;if(g)throw g;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",x,{headers:this.headers,jwt:(m=(f=h.session)===null||f===void 0?void 0:f.access_token)!==null&&m!==void 0?m:void 0})});if(a)throw a;return an()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:t.provider,url:n?.url},error:null})}catch(n){if(ze(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:c,token:d,access_token:f,nonce:m}=t,h=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:c,id_token:d,access_token:f,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:sa}),{data:g,error:x}=h;return x?this._returnResult({data:{user:null,session:null},error:x}):!g||!g.session||!g.user?this._returnResult({data:{user:null,session:null},error:new Yu}):(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("USER_UPDATED",g.session)),this._returnResult({data:g,error:x}))}catch(a){if(await sn(this.storage,`${this.storageKey}-code-verifier`),ze(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(ze(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await eae(async a=>(a>0&&await Jse(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:sa})),(a,i)=>{const o=200*Math.pow(2,a);return i&&bj(i)&&Date.now()+o-n<dd})}catch(n){if(this._debug(r,"error",n),ze(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),an()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await ac(this.storage,this.storageKey);if(a&&this.userStorage){let o=await ac(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await fd(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o?.user)!==null&&t!==void 0?t:wj()}else if(a&&!a.user&&!a.user){const o=await ac(this.storage,this.storageKey+"-user");o&&o?.user?(a.user=o.user,await sn(this.storage,this.storageKey+"-user"),await fd(this.storage,this.storageKey,a)):a.user=wj()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<yj;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${yj}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),bj(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:c}=await this._getUser(a.access_token);!c&&o?.user?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new as;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new hb;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new as;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const c={data:i.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(i){if(this._debug(a,"error",i),ze(i)){const o={data:null,error:i};return bj(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(o),i.length>0){for(let c=0;c<i.length;c+=1)console.error(i[c]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await sn(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await fd(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=RP(a);await fd(this.storage,this.storageKey,i)}else{const a=RP(r);await fd(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await sn(this.storage,this.storageKey),await sn(this.storage,this.storageKey+"-code-verifier"),await sn(this.storage,this.storageKey+"-user"),this.userStorage&&await sn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&an()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),dd);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/dd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${dd}ms, refresh threshold is ${i2} ticks`),a<=i2&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof P8)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!an()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Xu(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(c.toString())}if(n?.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n?.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?this._returnResult({data:null,error:i}):await Ge(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ze(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:f}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return f?this._returnResult({data:null,error:f}):(t.factorType==="totp"&&d.type==="totp"&&(!((a=d?.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(r){if(ze(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Tae(t.webauthn.credential_response):Oae(t.webauthn.credential_response)})}:{code:t.code}),{data:c,error:d}=await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:d}))})}catch(r){if(ze(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await Ge(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:c}=o;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:Eae(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:Aae(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ze(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r?.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(t){var r,n,a,i;if(t)try{const{payload:x}=yx(t);let w=null;x.aal&&(w=x.aal);let b=w;const{data:{user:j},error:N}=await this.getUser(t);if(N)return this._returnResult({data:null,error:N});((n=(r=j?.factors)===null||r===void 0?void 0:r.filter(k=>k.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(b="aal2");const S=x.amr||[];return{data:{currentLevel:w,nextLevel:b,currentAuthenticationMethods:S},error:null}}catch(x){if(ze(x))return this._returnResult({data:null,error:x});throw x}const{data:{session:o},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=yx(o.access_token);let f=null;d.aal&&(f=d.aal);let m=f;((i=(a=o.user.factors)===null||a===void 0?void 0:a.filter(x=>x.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(m="aal2");const g=d.amr||[];return{data:{currentLevel:f,nextLevel:m,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await Ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new as})})}catch(r){if(ze(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new as});const o=await Ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return o.data&&o.data.redirect_url&&an()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(ze(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!a)return this._returnResult({data:null,error:new as});const o=await Ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return o.data&&o.data.redirect_url&&an()&&!r?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(ze(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await Ge(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new as})})}catch(t){if(ze(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?(await Ge(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new as})})}catch(r){if(ze(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(c=>c.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(c=>c.kid===t),n&&this.jwks_cached_at+zse>a)return n;const{data:i,error:o}=await Ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(c=>c.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:x,error:w}=await this.getSession();if(w||!x.session)return this._returnResult({data:null,error:w});n=x.session.access_token}const{header:a,payload:i,signature:o,raw:{header:c,payload:d}}=yx(n);r?.allowExpired||oae(i.exp);const f=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!f){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:i,header:a,signature:o},error:null}}const m=lae(a.alg),h=await crypto.subtle.importKey("jwk",f,m,!0,["verify"]);if(!await crypto.subtle.verify(m,h,o,Wse(`${c}.${d}`)))throw new c2("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(ze(n))return this._returnResult({data:null,error:n});throw n}}}wh.nextInstanceID={};const Uae=wh,Fae="2.93.3";let Km="";typeof Deno<"u"?Km="deno":typeof document<"u"?Km="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Km="react-native":Km="node";const Bae={"X-Client-Info":`supabase-js-${Km}/${Fae}`},qae={headers:Bae},Vae={schema:"public"},Kae={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Hae={};function jh(e){"@babel/helpers - typeof";return jh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jh(e)}function Gae(e,t){if(jh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wae(e){var t=Gae(e,"string");return jh(t)=="symbol"?t:t+""}function Qae(e,t,r){return(t=Wae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function or(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FP(Object(r),!0).forEach(function(n){Qae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}const Yae=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Xae=()=>Headers,Zae=(e,t,r)=>{const n=Yae(r),a=Xae();return async(i,o)=>{var c;const d=(c=await t())!==null&&c!==void 0?c:e;let f=new a(o?.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),n(i,or(or({},o),{},{headers:f}))}};function Jae(e){return e.endsWith("/")?e:e+"/"}function eie(e,t){var r,n;const{db:a,auth:i,realtime:o,global:c}=e,{db:d,auth:f,realtime:m,global:h}=t,g={db:or(or({},d),a),auth:or(or({},f),i),realtime:or(or({},m),o),storage:{},global:or(or(or({},h),c),{},{headers:or(or({},(r=h?.headers)!==null&&r!==void 0?r:{}),(n=c?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?g.accessToken=e.accessToken:delete g.accessToken,g}function tie(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Jae(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var rie=class extends Uae{constructor(e){super(e)}},nie=class{constructor(e,t,r){var n,a;this.supabaseUrl=e,this.supabaseKey=t;const i=tie(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,c={db:Vae,realtime:Hae,auth:or(or({},Kae),{},{storageKey:o}),global:qae},d=eie(r??{},c);if(this.storageKey=(n=d.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken)this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(m,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}});else{var f;this.auth=this._initSupabaseAuthClient((f=d.auth)!==null&&f!==void 0?f:{},this.headers,d.global.fetch)}this.fetch=Zae(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(or({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(m=>this.realtime.setAuth(m)).catch(m=>console.warn("Failed to set initial Realtime auth token:",m)),this.rest=new Fne(new URL("rest/v1",i).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Rse(this.storageUrl.href,this.headers,this.fetch,r?.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Ine(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,r;if(e.accessToken)return await e.accessToken();const{data:n}=await e.auth.getSession();return(t=(r=n.session)===null||r===void 0?void 0:r.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,storageKey:i,flowType:o,lock:c,debug:d,throwOnError:f},m,h){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rie({url:this.authUrl.href,headers:or(or({},g),m),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:a,flowType:o,lock:c,debug:d,throwOnError:f,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new sse(this.realtimeUrl.href,or(or({},e),{},{params:or(or({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const sie=(e,t,r)=>new nie(e,t,r);function aie(){if(typeof window<"u")return!1;const e=globalThis.process;if(!e)return!1;const t=e.version;if(t==null)return!1;const r=t.match(/^v(\d+)\./);return r?parseInt(r[1],10)<=18:!1}aie()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const iie="https://hoidqhdgdgvogehkjsdw.supabase.co",oie="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhvaWRxaGRnZGd2b2dlaGtqc2R3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk3MjI5MjgsImV4cCI6MjA4NTI5ODkyOH0.DYH51uNFuXeNTUynBw3VKk8UYKQZ8nUmdAOirEBaPLg",Vn=sie(iie,oie),D8=y.createContext(null);function lie({children:e}){const[t,r]=y.useState(null),[n,a]=y.useState(!0);y.useEffect(()=>{Vn.auth.getSession().then(({data:{session:h}})=>{r(h),a(!1)});const{data:{subscription:m}}=Vn.auth.onAuthStateChange((h,g)=>{r(g),a(!1)});return()=>m.unsubscribe()},[]);const i=y.useCallback(async(m,h)=>{const{error:g}=await Vn.auth.signInWithPassword({email:m,password:h});if(g)throw g},[]),o=y.useCallback(async(m,h)=>{const{error:g}=await Vn.auth.signUp({email:m,password:h});if(g)throw g},[]),c=y.useCallback(async()=>{const{error:m}=await Vn.auth.signOut();if(m)throw m},[]),d=y.useCallback(async m=>{const{error:h}=await Vn.auth.resetPasswordForEmail(m,{redirectTo:`${window.location.origin}/app/reset-password`});if(h)throw h},[]),f=y.useCallback(async m=>{const{error:h}=await Vn.auth.updateUser({password:m});if(h)throw h},[]);return s.jsx(D8.Provider,{value:{session:t,user:t?.user??null,isLoading:n,isAuthenticated:!!t,login:i,register:o,logout:c,forgotPassword:d,resetPassword:f},children:e})}function ip(){const e=y.useContext(D8);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function cie(){const{logout:e}=ip(),t=sf();return s.jsx(Mt,{variant:"ghost",size:"icon",title:"Sign out",onClick:async()=>{await e(),t("/login")},children:s.jsx(G6,{className:"h-4 w-4"})})}function uie({theme:e,onToggleTheme:t,projects:r,currentProjectId:n,onSelectProject:a,onToggleSidebar:i}){return s.jsxs("header",{className:"flex items-center justify-between h-14 px-4 border-b bg-[hsl(var(--card))]",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Mt,{variant:"ghost",size:"icon",className:"md:hidden",onClick:i,children:s.jsx(Ite,{className:"h-5 w-5"})}),s.jsxs("a",{href:"/",className:"flex items-center gap-2 font-semibold text-lg",children:[s.jsx(hn,{className:"h-5 w-5"}),s.jsx("span",{children:"GodMode"})]}),s.jsxs("select",{value:n??"",onChange:o=>a(o.target.value||null),className:"ml-4 h-9 rounded-md border bg-transparent px-3 text-sm focus:outline-none focus:ring-2 focus:ring-[hsl(var(--ring))]",children:[s.jsx("option",{value:"",children:"Select Project..."}),r.map(o=>s.jsx("option",{value:o.id,children:o.name},o.id))]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Mt,{variant:"ghost",size:"icon",onClick:t,title:"Toggle theme",children:e==="dark"?s.jsx(RC,{className:"h-4 w-4"}):s.jsx(Y6,{className:"h-4 w-4"})}),s.jsx(cie,{})]})]})}const die={default:"bg-[hsl(var(--primary))] text-[hsl(var(--primary-foreground))]",secondary:"bg-[hsl(var(--secondary))] text-[hsl(var(--secondary-foreground))]",destructive:"bg-[hsl(var(--destructive))] text-[hsl(var(--destructive-foreground))]",outline:"border text-[hsl(var(--foreground))]"};function BP({className:e,variant:t="default",...r}){return s.jsx("span",{className:H("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold transition-colors",die[t],e),...r})}function Ws({open:e,onClose:t,onOpenChange:r,children:n}){const a=y.useRef(null),i=()=>{t?.(),r?.(!1)};return y.useEffect(()=>{if(!e)return;const o=c=>{c.key==="Escape"&&i()};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[e,t,r]),e?s.jsx("div",{ref:a,className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",onClick:o=>{o.target===a.current&&i()},children:n}):null}function ui({children:e,className:t}){return s.jsx("div",{className:H("bg-gm-surface-primary text-gm-text-primary border-gm-border-primary","rounded-lg border shadow-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",t),children:e})}function Nh({children:e,className:t}){return s.jsx("div",{className:H("mb-4",t),children:e})}function Na({children:e,className:t}){return s.jsx("h2",{className:H("text-lg font-semibold",t),children:e})}function qP({children:e,className:t}){return s.jsx("p",{className:H("text-sm text-gm-text-tertiary mt-1",t),children:e})}function VP({children:e,className:t}){return s.jsx("div",{className:H("mt-6 flex justify-end gap-2",t),children:e})}function fie(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}Array(12).fill(0);let u2=1;class mie{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:n,...a}=t,i=typeof t?.id=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:u2++,o=this.toasts.find(d=>d.id===i),c=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(d=>d.id===i?(this.publish({...d,...t,id:i,title:n}),{...d,...t,id:i,dismissible:c,title:n}):d):this.addToast({title:n,...a,dismissible:c,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=n!==void 0,o;const c=a.then(async f=>{if(o=["resolve",f],En.isValidElement(f))i=!1,this.create({id:n,type:"default",message:f});else if(pie(f)&&!f.ok){i=!1;const h=typeof r.error=="function"?await r.error(`HTTP error! status: ${f.status}`):r.error,g=typeof r.description=="function"?await r.description(`HTTP error! status: ${f.status}`):r.description,w=typeof h=="object"&&!En.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:g,...w})}else if(f instanceof Error){i=!1;const h=typeof r.error=="function"?await r.error(f):r.error,g=typeof r.description=="function"?await r.description(f):r.description,w=typeof h=="object"&&!En.isValidElement(h)?h:{message:h};this.create({id:n,type:"error",description:g,...w})}else if(r.success!==void 0){i=!1;const h=typeof r.success=="function"?await r.success(f):r.success,g=typeof r.description=="function"?await r.description(f):r.description,w=typeof h=="object"&&!En.isValidElement(h)?h:{message:h};this.create({id:n,type:"success",description:g,...w})}}).catch(async f=>{if(o=["reject",f],r.error!==void 0){i=!1;const m=typeof r.error=="function"?await r.error(f):r.error,h=typeof r.description=="function"?await r.description(f):r.description,x=typeof m=="object"&&!En.isValidElement(m)?m:{message:m};this.create({id:n,type:"error",description:h,...x})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),r.finally==null||r.finally.call(r)}),d=()=>new Promise((f,m)=>c.then(()=>o[0]==="reject"?m(o[1]):f(o[1])).catch(m));return typeof n!="string"&&typeof n!="number"?{unwrap:d}:Object.assign(n,{unwrap:d})},this.custom=(t,r)=>{const n=r?.id||u2++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Ls=new mie,hie=(e,t)=>{const r=t?.id||u2++;return Ls.addToast({title:e,...t,id:r}),r},pie=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",gie=hie,xie=()=>Ls.toasts,yie=()=>Ls.getActiveToasts(),G=Object.assign(gie,{success:Ls.success,info:Ls.info,warning:Ls.warning,error:Ls.error,custom:Ls.custom,message:Ls.message,promise:Ls.promise,dismiss:Ls.dismiss,loading:Ls.loading},{getHistory:xie,getToasts:yie});fie("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const vie="";class KP extends Error{status;details;constructor(t,r,n){super(t),this.status=r,this.details=n}}let Iy=null;function d2(e){Iy=e}function zC(){return Iy}async function ct(e,t={}){const{params:r,...n}=t;let a=`${vie}${e}`;if(r){const i=new URLSearchParams;Object.entries(r).forEach(([c,d])=>{d!==void 0&&i.append(c,String(d))});const o=i.toString();o&&(a+=`?${o}`)}try{const{data:{session:i}}=await Vn.auth.getSession(),o={...n.headers};i?.access_token&&(o.Authorization=`Bearer ${i.access_token}`),Iy&&(o["X-Project-Id"]=Iy);const c=await fetch(a,{...n,headers:o,credentials:"include"});if(!c.ok){let f=`Request failed with status ${c.status}`;try{const m=await c.json();m?.error&&(f=typeof m.error=="string"?m.error:JSON.stringify(m.error))}catch{f=c.statusText||f}throw new KP(f,c.status)}return c.status===204?{}:t.responseType==="blob"?await c.blob():await c.json()}catch(i){throw console.error("API Request Error:",i),i instanceof KP?i.status>=500&&G.error("Server error. Please try again later."):G.error("Network error. Please check your connection."),i}}const X={get:async(e,t={})=>ct(e,{...t,method:"GET"}),post:async(e,t,r={})=>ct(e,{...r,method:"POST",headers:{...r.headers,"Content-Type":"application/json"},body:JSON.stringify(t)}),put:async(e,t,r={})=>ct(e,{...r,method:"PUT",headers:{...r.headers,"Content-Type":"application/json"},body:JSON.stringify(t)}),delete:async(e,t={})=>ct(e,{...t,method:"DELETE"}),patch:async(e,t,r={})=>ct(e,{...r,method:"PATCH",headers:{...r.headers,"Content-Type":"application/json"},body:JSON.stringify(t)}),upload:async(e,t,r={})=>ct(e,{...r,method:"POST",body:t}),getOntologySchema:async()=>ct("/api/ontology/schema"),getOntologySuggestions:async()=>ct("/api/ontology/suggestions"),getOntologyStats:async()=>ct("/api/ontology/stats"),approveSuggestion:async(e,t={})=>ct(`/api/ontology/suggestions/${e}/approve`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),rejectSuggestion:async(e,t)=>ct(`/api/ontology/suggestions/${e}/reject`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:t})}),enrichSuggestion:async e=>ct(`/api/ontology/suggestions/${e}/enrich`,{method:"POST"}),analyzeGraph:async()=>ct("/api/ontology/analyze",{method:"POST"}),setAutoApprove:async e=>ct("/api/ontology/suggestions/auto-approve",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({threshold:e})}),triggerWorker:async(e,t={})=>ct("/api/ontology/worker/trigger",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e,config:t})}),getOntologyWorkerStatus:async()=>ct("/api/ontology/worker/status"),getLLMQueueStatus:async()=>ct("/api/llm/queue/status"),getLLMQueueHistory:async(e=50)=>ct(`/api/llm/queue/history?limit=${e}`),getLLMQueuePending:async(e=50)=>ct(`/api/llm/queue/pending?limit=${e}`),getLLMQueueRetryable:async(e=50)=>ct(`/api/llm/queue/retryable?limit=${e}`),retryLLMQueueItem:async e=>ct(`/api/llm/queue/retry/${e}`,{method:"POST"}),cancelLLMQueueItem:async e=>ct(`/api/llm/queue/cancel/${e}`,{method:"POST"}),pauseLLMQueue:async()=>ct("/api/llm/queue/pause",{method:"POST"}),resumeLLMQueue:async()=>ct("/api/llm/queue/resume",{method:"POST"}),clearLLMQueue:async(e="all")=>ct("/api/llm/queue/clear",{method:"POST",body:JSON.stringify({status:e})}),addEntityType:async(e,t,r=null)=>ct("/api/ontology/entity-type",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,description:t,properties:r})}),addRelationType:async e=>ct("/api/ontology/relation-type",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name,description:e.description,from:e.from||"*",to:e.to||"*"})}),getSystemStats:async()=>ct("/api/system/stats"),getUsers:async()=>ct("/api/roles/users"),getSystemUsers:async()=>ct("/api/system/users"),addSystemUser:async e=>ct("/api/system/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),updateSystemUser:async(e,t)=>ct(`/api/system/users/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),deleteSystemUser:async e=>ct(`/api/system/users/${e}`,{method:"DELETE"}),addUser:async e=>ct("/api/roles/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),updateUser:async(e,t)=>ct(`/api/roles/users/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),deleteUser:async e=>ct(`/api/roles/users/${e}`,{method:"DELETE"})},ce={dashboard:["dashboard"],stats:["stats"],questions:["questions"],facts:["facts"],risks:["risks"],actions:["actions"],decisions:["decisions"],contacts:["contacts"],files:["files"],documents:["documents"],pendingFiles:["pendingFiles"],projects:["projects"],chatHistory:["chatHistory"],teamAnalysis:["teamAnalysis"],graph:["graph"],costs:e=>["costs",e],history:["history"],emails:["emails"],processStatus:["processStatus"],adminStats:["adminStats"],adminProviders:["adminProviders"],adminAudit:["adminAudit"],health:["health"],briefingHistory:["briefingHistory"],trends:e=>["trends",e],costsSummary:e=>["costsSummary",e],notificationsCount:["notificationsCount"],notifications:["notifications"],sotAlerts:["sotAlerts"],emailsNeedingResponse:["emailsNeedingResponse"],sprints:["sprints"],sprintDetail:e=>["sprint",e],chatSessions:["chatSessions"],chatMessages:e=>["chatMessages",e],conflicts:["conflicts"],contactsStats:["contactsStats"],conversations:["conversations"],conversationsStats:["conversationsStats"],syncDashboard:["syncDashboard"],systemConfig:["systemConfig"],knowledgeStatus:["knowledgeStatus"],deletedFacts:["deletedFacts"],deletedDecisions:["deletedDecisions"],deletedRisks:["deletedRisks"],deletedActions:["deletedActions"],sotVersions:["sotVersions"],timeline:["timeline"]};function bie(){return Ce({queryKey:ce.dashboard,queryFn:()=>X.get("/api/dashboard")})}function wie(){return Ce({queryKey:ce.stats,queryFn:async()=>{const e=await X.get("/api/stats");return e.stats||e}})}function I8(){return Ce({queryKey:ce.projects,queryFn:async()=>{const e=await X.get("/api/projects");return Array.isArray(e)?e:e.projects||[]}})}function UC(){return Ce({queryKey:ce.pendingFiles,queryFn:async()=>{const e=await X.get("/api/files");return Array.isArray(e)?e:e.files||[]},refetchInterval:1e4})}function FC(){const e=Ee();return je({mutationFn:t=>X.post("/api/process",t),onSuccess:()=>{e.invalidateQueries({queryKey:ce.pendingFiles}),e.invalidateQueries({queryKey:ce.dashboard}),e.invalidateQueries({queryKey:ce.stats}),e.invalidateQueries({queryKey:ce.questions}),e.invalidateQueries({queryKey:ce.facts}),e.invalidateQueries({queryKey:ce.risks}),e.invalidateQueries({queryKey:ce.actions}),e.invalidateQueries({queryKey:ce.decisions})},onError:t=>{console.error("File processing failed:",t.message)}})}function L8(){return Ce({queryKey:ce.processStatus,queryFn:()=>X.get("/api/process/status"),refetchInterval:3e3})}function jie(){return je({mutationFn:e=>X.post("/api/export",e)})}function $8(){const e=Ee();return je({mutationFn:t=>X.post("/api/reset",t),onSuccess:()=>{e.invalidateQueries()}})}function Nie(){const e=Ee();return je({mutationFn:()=>X.post("/api/cleanup-orphans"),onSuccess:()=>{e.invalidateQueries()}})}function z8(){const e=Ee();return je({mutationFn:({files:t,type:r})=>{const n=new FormData;return t.forEach(a=>n.append("files",a)),n.append("type",r),X.upload("/api/upload",n)},onSuccess:()=>{e.invalidateQueries({queryKey:ce.pendingFiles})}})}function U8(){const e=Ee();return je({mutationFn:({folder:t,filename:r})=>X.delete(`/api/files/${t}/${r}`),onSuccess:()=>{e.invalidateQueries({queryKey:ce.pendingFiles})}})}function F8(e){return Ce({queryKey:["briefing",e],queryFn:()=>X.get(`/api/briefing${e?"?refresh=true":""}`),enabled:!0})}function Qn(){return je({mutationFn:e=>X.post("/api/sot/chat",e),onError:e=>{console.error("SOT chat failed:",e.message)}})}function B8(){return Ce({queryKey:["config"],queryFn:()=>X.get("/api/config")})}function q8(){const e=Ee();return je({mutationFn:t=>X.post("/api/config",t),onSuccess:()=>{e.invalidateQueries({queryKey:["config"]})}})}function Sie(e){const t=new URLSearchParams;e?.status&&t.set("status",e.status),t.set("limit",String(e.limit)),e?.offset&&t.set("offset",String(e.offset)),e?.search&&t.set("search",e.search),e?.type&&t.set("type",e.type),e?.sort&&t.set("sort",e.sort),e?.order&&t.set("order",e.order);const r=t.toString();return Ce({queryKey:[...ce.documents,r],queryFn:()=>X.get(`/api/documents${r?`?${r}`:""}`)})}function _ie(){const e=Ee();return je({mutationFn:t=>X.delete(`/api/documents/${t}`),onSuccess:()=>{e.invalidateQueries({queryKey:ce.documents}),e.invalidateQueries({queryKey:ce.dashboard}),e.invalidateQueries({queryKey:ce.stats})}})}function Cie(){const e=Ee();return je({mutationFn:t=>X.post(`/api/documents/${t}/reprocess`),onSuccess:()=>{e.invalidateQueries({queryKey:ce.documents})}})}function kie(e){return Ce({queryKey:[...ce.documents,"detail",e],queryFn:()=>X.get(`/api/documents/${e}`),enabled:!!e})}function Eie(e){return Ce({queryKey:[...ce.documents,"extraction",e],queryFn:()=>X.get(`/api/documents/${e}/extraction`),enabled:!!e})}function Aie(e){return Ce({queryKey:[...ce.documents,"summary",e],queryFn:async()=>{const t=await X.get(`/api/documents/${e}`);return{summary:t.document?.summary||t.document?.ai_summary||""}},enabled:!!e})}function Tie(e){return Ce({queryKey:[...ce.documents,"analysis",e],queryFn:()=>X.get(`/api/documents/${e}/analysis`),enabled:!!e})}function Oie(e){return Ce({queryKey:[...ce.documents,"versions",e],queryFn:()=>X.get(`/api/documents/${e}/versions`),enabled:!!e})}function Pie(e){return Ce({queryKey:[...ce.documents,"activity",e],queryFn:()=>X.get(`/api/documents/${e}/activity`),enabled:!!e})}function V8(){const e=Ee();return je({mutationFn:t=>X.post(`/api/documents/${t}/favorite`),onSuccess:()=>{e.invalidateQueries({queryKey:ce.documents})}})}function Mie(){const e=Ee();return je({mutationFn:t=>X.post(`/api/documents/${t}/restore`),onSuccess:()=>{e.invalidateQueries({queryKey:ce.documents})}})}function Rie(){return je({mutationFn:({id:e,expires:t,maxViews:r})=>X.post(`/api/documents/${e}/share`,{expires:t,max_views:r})})}function Die(){const e=Ee();return je({mutationFn:t=>X.post("/api/documents/bulk/delete",{ids:t}),onSuccess:()=>{e.invalidateQueries({queryKey:ce.documents}),e.invalidateQueries({queryKey:ce.dashboard})}})}function Iie(){const e=Ee();return je({mutationFn:t=>X.post("/api/documents/bulk/reprocess",{ids:t}),onSuccess:()=>{e.invalidateQueries({queryKey:ce.documents})}})}function Lie(){return je({mutationFn:async({ids:e,format:t})=>{const{data:{session:r}}=await Vn.auth.getSession(),n={"Content-Type":"application/json"};r?.access_token&&(n.Authorization=`Bearer ${r.access_token}`);const a=zC();a&&(n["X-Project-Id"]=a);const i=await fetch("/api/documents/bulk/export",{method:"POST",headers:n,credentials:"include",body:JSON.stringify({ids:e,format:t||"original"})});if(!i.ok)throw new Error("Export failed");const o=await i.blob(),c=URL.createObjectURL(o),d=document.createElement("a");d.href=c,d.download="documents-export.zip",d.click(),URL.revokeObjectURL(c)}})}function $ie(e){const t=new URLSearchParams;e?.sourceApp&&t.set("sourceApp",e.sourceApp),e?.search&&t.set("search",e.search);const r=t.toString();return Ce({queryKey:[...ce.conversations,r],queryFn:()=>X.get(`/api/conversations${r?`?${r}`:""}`)})}function zie(e){return Ce({queryKey:[...ce.conversations,"detail",e],queryFn:()=>X.get(`/api/conversations/${e}`),enabled:!!e})}function Uie(){const e=Ee();return je({mutationFn:t=>X.delete(`/api/conversations/${t}`),onSuccess:()=>{e.invalidateQueries({queryKey:ce.conversations}),e.invalidateQueries({queryKey:ce.dashboard})}})}function Fie(){const e=Ee();return je({mutationFn:t=>X.post(`/api/conversations/${t}/reembed`),onSuccess:()=>{e.invalidateQueries({queryKey:ce.conversations})}})}function Bie(){return je({mutationFn:({text:e,formatHint:t})=>X.post("/api/conversations/parse",{text:e,formatHint:t})})}function qie(){return Ce({queryKey:[...ce.emails,"stats"],queryFn:()=>X.get("/api/emails/stats"),staleTime:3e4})}function Vie(){const e=Ee();return je({mutationFn:({id:t,starred:r})=>X.put(`/api/emails/${t}/${r?"star":"unstar"}`),onSuccess:()=>{e.invalidateQueries({queryKey:ce.emails})}})}function Kie(){const e=Ee();return je({mutationFn:t=>X.put(`/api/emails/${t}/archive`),onSuccess:()=>{e.invalidateQueries({queryKey:ce.emails})}})}function Hie(){const e=Ee();return je({mutationFn:({id:t,read:r})=>X.put(`/api/emails/${t}/${r?"read":"unread"}`),onSuccess:()=>{e.invalidateQueries({queryKey:ce.emails})}})}function Gie(e){return Ce({queryKey:[...ce.emails,"thread",e],queryFn:()=>X.get(`/api/emails/thread/${e}`),enabled:!!e})}function K8(){return Ce({queryKey:ce.questions,queryFn:async()=>{const e=await X.get("/api/questions");return Array.isArray(e)?e:e.questions||[]}})}function Wie(){const e=Ee();return je({mutationFn:t=>X.post("/api/questions",t),onSuccess:()=>{e.invalidateQueries({queryKey:ce.questions}),e.invalidateQueries({queryKey:ce.dashboard}),e.invalidateQueries({queryKey:ce.stats})}})}function Qie(){const e=Ee();return je({mutationFn:({id:t,...r})=>X.put(`/api/questions/${t}`,r),onSuccess:()=>{e.invalidateQueries({queryKey:ce.questions}),e.invalidateQueries({queryKey:ce.dashboard}),e.invalidateQueries({queryKey:ce.stats})}})}function Yie(){const e=Ee();return je({mutationFn:t=>X.delete(`/api/questions/${t}`),onSuccess:()=>{e.invalidateQueries({queryKey:ce.questions}),e.invalidateQueries({queryKey:ce.dashboard}),e.invalidateQueries({queryKey:ce.stats})}})}function H8(){return Ce({queryKey:ce.facts,queryFn:async()=>{const e=await X.get("/api/facts");return Array.isArray(e)?e:e.facts||[]}})}function Xie(){const e=Ee();return je({mutationFn:t=>X.post("/api/facts",t),onSuccess:()=>{e.invalidateQueries({queryKey:ce.facts}),e.invalidateQueries({queryKey:ce.dashboard}),e.invalidateQueries({queryKey:ce.stats})}})}function Zie(){const e=Ee();return je({mutationFn:({id:t,...r})=>X.put(`/api/facts/${t}`,r),onSuccess:()=>{e.invalidateQueries({queryKey:ce.facts}),e.invalidateQueries({queryKey:ce.dashboard}),e.invalidateQueries({queryKey:ce.stats})}})}function Jie(){const e=Ee();return je({mutationFn:t=>X.delete(`/api/facts/${t}`),onSuccess:()=>{e.invalidateQueries({queryKey:ce.facts}),e.invalidateQueries({queryKey:ce.dashboard}),e.invalidateQueries({queryKey:ce.stats})}})}function eoe(){return Ce({queryKey:ce.risks,queryFn:async()=>{const e=await X.get("/api/risks");return Array.isArray(e)?e:e.risks||[]}})}function toe(){const e=Ee();return je({mutationFn:t=>X.post("/api/risks",t),onSuccess:()=>{e.invalidateQueries({queryKey:ce.risks}),e.invalidateQueries({queryKey:ce.dashboard}),e.invalidateQueries({queryKey:ce.stats})}})}function roe(){const e=Ee();return je({mutationFn:({id:t,...r})=>X.put(`/api/risks/${t}`,r),onSuccess:()=>{e.invalidateQueries({queryKey:ce.risks}),e.invalidateQueries({queryKey:ce.dashboard}),e.invalidateQueries({queryKey:ce.stats})}})}function noe(){const e=Ee();return je({mutationFn:t=>X.delete(`/api/risks/${t}`),onSuccess:()=>{e.invalidateQueries({queryKey:ce.risks}),e.invalidateQueries({queryKey:ce.dashboard}),e.invalidateQueries({queryKey:ce.stats})}})}function BC(){return Ce({queryKey:ce.actions,queryFn:async()=>{const e=await X.get("/api/actions");return Array.isArray(e)?e:e.actions||[]}})}function soe(){const e=Ee();return je({mutationFn:t=>X.post("/api/actions",t),onSuccess:()=>{e.invalidateQueries({queryKey:ce.actions}),e.invalidateQueries({queryKey:ce.dashboard}),e.invalidateQueries({queryKey:ce.stats})}})}function aoe(){const e=Ee();return je({mutationFn:({id:t,...r})=>X.put(`/api/actions/${t}`,r),onSuccess:()=>{e.invalidateQueries({queryKey:ce.actions}),e.invalidateQueries({queryKey:ce.dashboard}),e.invalidateQueries({queryKey:ce.stats})}})}function ioe(){const e=Ee();return je({mutationFn:t=>X.delete(`/api/actions/${t}`),onSuccess:()=>{e.invalidateQueries({queryKey:ce.actions}),e.invalidateQueries({queryKey:ce.dashboard}),e.invalidateQueries({queryKey:ce.stats})}})}function G8(){return Ce({queryKey:ce.decisions,queryFn:async()=>{const e=await X.get("/api/decisions");return Array.isArray(e)?e:e.decisions||[]}})}function ooe(){const e=Ee();return je({mutationFn:t=>X.post("/api/decisions",t),onSuccess:()=>{e.invalidateQueries({queryKey:ce.decisions}),e.invalidateQueries({queryKey:ce.dashboard}),e.invalidateQueries({queryKey:ce.stats})}})}function loe(){const e=Ee();return je({mutationFn:({id:t,...r})=>X.put(`/api/decisions/${t}`,r),onSuccess:()=>{e.invalidateQueries({queryKey:ce.decisions}),e.invalidateQueries({queryKey:ce.dashboard}),e.invalidateQueries({queryKey:ce.stats})}})}function coe(){const e=Ee();return je({mutationFn:t=>X.delete(`/api/decisions/${t}`),onSuccess:()=>{e.invalidateQueries({queryKey:ce.decisions}),e.invalidateQueries({queryKey:ce.dashboard}),e.invalidateQueries({queryKey:ce.stats})}})}function uoe(){return je({mutationFn:e=>X.post("/api/decisions/suggest",e)})}function doe(){return je({mutationFn:e=>X.post("/api/risks/suggest",e)})}function foe(){return je({mutationFn:e=>X.post("/api/actions/suggest-task",e)})}function mf(e){const t=new URLSearchParams;e?.search&&t.set("search",e.search),e?.role&&t.set("role",e.role),e?.organization&&t.set("organization",e.organization);const r=t.toString();return Ce({queryKey:[...ce.contacts,r],queryFn:()=>X.get(`/api/contacts${r?`?${r}`:""}`)})}function moe(){const e=Ee();return je({mutationFn:t=>X.post("/api/contacts",t),onSuccess:()=>{e.invalidateQueries({queryKey:ce.contacts}),e.invalidateQueries({queryKey:ce.dashboard}),e.invalidateQueries({queryKey:ce.stats})}})}function hoe(){const e=Ee();return je({mutationFn:({id:t,...r})=>X.put(`/api/contacts/${t}`,r),onSuccess:()=>{e.invalidateQueries({queryKey:ce.contacts}),e.invalidateQueries({queryKey:ce.dashboard}),e.invalidateQueries({queryKey:ce.stats})}})}function poe(){const e=Ee();return je({mutationFn:t=>X.delete(`/api/contacts/${t}`),onSuccess:()=>{e.invalidateQueries({queryKey:ce.contacts}),e.invalidateQueries({queryKey:ce.dashboard}),e.invalidateQueries({queryKey:ce.stats})}})}function goe(){return Ce({queryKey:[...ce.contacts,"duplicates"],queryFn:()=>X.get("/api/contacts/duplicates"),staleTime:12e4})}function xoe(){const e=Ee();return je({mutationFn:t=>X.post("/api/contacts/merge",{contactIds:t}),onSuccess:()=>{e.invalidateQueries({queryKey:ce.contacts}),e.invalidateQueries({queryKey:ce.dashboard})}})}function W8(){const e=Ee();return je({mutationFn:t=>X.post(`/api/contacts/${t}/enrich`,{}),onSuccess:()=>{e.invalidateQueries({queryKey:ce.contacts})}})}function yoe(){return je({mutationFn:async e=>{const{data:{session:t}}=await Vn.auth.getSession(),r={};t?.access_token&&(r.Authorization=`Bearer ${t.access_token}`);const n=zC();n&&(r["X-Project-Id"]=n);const a=await fetch(`/api/contacts/export/${e}`,{headers:r,credentials:"include"});if(!a.ok)throw new Error("Export failed");const i=await a.blob(),o=URL.createObjectURL(i),c=document.createElement("a");c.href=o,c.download=`contacts.${e}`,c.click(),URL.revokeObjectURL(o)}})}function voe(){const e=Ee();return je({mutationFn:({format:t,data:r})=>X.post(`/api/contacts/import/${t}`,t==="csv"?{csv:r}:r),onSuccess:()=>{e.invalidateQueries({queryKey:ce.contacts}),e.invalidateQueries({queryKey:ce.dashboard})}})}function boe(){return Ce({queryKey:[...ce.contacts,"unmatched"],queryFn:()=>X.get("/api/contacts/unmatched"),staleTime:6e4})}function woe(){const e=Ee();return je({mutationFn:({participantName:t,contactId:r})=>X.post("/api/contacts/link-participant",{participantName:t,contactId:r}),onSuccess:()=>{e.invalidateQueries({queryKey:[...ce.contacts,"unmatched"]}),e.invalidateQueries({queryKey:ce.contacts})}})}function joe(){const e=Ee();return je({mutationFn:()=>X.post("/api/contacts/sync-from-people",{}),onSuccess:()=>{e.invalidateQueries({queryKey:ce.contacts}),e.invalidateQueries({queryKey:ce.dashboard})}})}function Noe(){const e=Ee();return je({mutationFn:async({contactId:t,toContactId:r,type:n})=>{const{data:{session:a}}=await Vn.auth.getSession(),i={"Content-Type":"application/json"};a?.access_token&&(i.Authorization=`Bearer ${a.access_token}`);const o=zC();o&&(i["X-Project-Id"]=o);const c=await fetch(`/api/contacts/${t}/relationships`,{method:"DELETE",headers:i,credentials:"include",body:JSON.stringify({toContactId:r,type:n})});if(!c.ok)throw new Error("Failed to delete relationship");return c.json()},onSuccess:()=>{e.invalidateQueries({queryKey:ce.contacts})}})}function Soe(){return je({mutationFn:({message:e,history:t,sessionId:r})=>X.post("/api/chat",{message:e,history:t??[],semantic:!0,sessionId:r??void 0}),onError:e=>{console.error("Chat message failed:",e.message)}})}function _oe(){return Ce({queryKey:ce.chatSessions,queryFn:()=>X.get("/api/chat/sessions"),staleTime:3e4})}function Coe(){const e=Ee();return je({mutationFn:t=>X.post("/api/chat/sessions",t),onSuccess:()=>e.invalidateQueries({queryKey:ce.chatSessions})})}function koe(){const e=Ee();return je({mutationFn:({sessionId:t,...r})=>X.put(`/api/chat/sessions/${t}`,r),onSuccess:()=>e.invalidateQueries({queryKey:ce.chatSessions})})}function Eoe(e){return Ce({queryKey:ce.chatMessages(e??""),queryFn:()=>X.get(`/api/chat/sessions/${e}/messages`),enabled:!!e,staleTime:1e4})}function Q8(){return Ce({queryKey:["teamProfiles"],queryFn:()=>X.get("/api/team-analysis/profiles")})}function Y8(){return Ce({queryKey:["teamDynamics"],queryFn:()=>X.get("/api/team-analysis/team")})}function X8(){return Ce({queryKey:["teamRelationships"],queryFn:()=>X.get("/api/team-analysis/relationships")})}function Z8(){const e=Ee();return je({mutationFn:t=>X.post("/api/team-analysis/team/analyze",t||{}),onSuccess:()=>{e.invalidateQueries({queryKey:["teamDynamics"]}),e.invalidateQueries({queryKey:["teamProfiles"]}),e.invalidateQueries({queryKey:["teamRelationships"]}),e.invalidateQueries({queryKey:ce.teamAnalysis})}})}function pb(){const e=Ee();return je({mutationFn:({personId:t,forceReanalysis:r})=>X.post(`/api/team-analysis/profiles/${t}/analyze`,{forceReanalysis:r}),onSuccess:()=>{e.invalidateQueries({queryKey:["teamProfiles"]})}})}function Aoe(){return Ce({queryKey:["teamGraph"],queryFn:()=>X.get("/api/team-analysis/graph")})}function J8(){return je({mutationFn:()=>X.post("/api/team-analysis/sync-graph",{})})}function Toe(){return Ce({queryKey:["teamAdminProjects"],queryFn:()=>X.get("/api/team-analysis/admin/projects")})}function Ooe(){const e=Ee();return je({mutationFn:({projectId:t,forceReanalysis:r})=>X.post(`/api/team-analysis/admin/projects/${t}/analyze`,{forceReanalysis:r??!0}),onSuccess:()=>{e.invalidateQueries({queryKey:["teamAdminProjects"]}),e.invalidateQueries({queryKey:["teamDynamics"]}),e.invalidateQueries({queryKey:["teamProfiles"]})}})}function Poe(e="month"){return Ce({queryKey:ce.costs(e),queryFn:()=>X.get(`/api/costs?period=${e}`)})}function Moe(e){return Ce({queryKey:["apiKeys",e],queryFn:()=>X.get(`/api/projects/${e}/api-keys`),enabled:!!e})}function Roe(){const e=Ee();return je({mutationFn:({projectId:t,...r})=>X.post(`/api/projects/${t}/api-keys`,r),onSuccess:()=>{e.invalidateQueries({queryKey:["apiKeys"]})}})}function Doe(){const e=Ee();return je({mutationFn:t=>X.delete(`/api/api-keys/${t}`),onSuccess:()=>{e.invalidateQueries({queryKey:["apiKeys"]})}})}function Ioe(e){return Ce({queryKey:["webhooks",e],queryFn:()=>X.get(`/api/projects/${e}/webhooks`),enabled:!!e})}function Loe(){const e=Ee();return je({mutationFn:({projectId:t,...r})=>X.post(`/api/projects/${t}/webhooks`,r),onSuccess:()=>{e.invalidateQueries({queryKey:["webhooks"]})}})}function $oe(){const e=Ee();return je({mutationFn:t=>X.delete(`/api/webhooks/${t}`),onSuccess:()=>{e.invalidateQueries({queryKey:["webhooks"]})}})}function zoe(){return je({mutationFn:e=>X.post(`/api/webhooks/${e}/test`)})}function eU(){return Ce({queryKey:ce.history,queryFn:()=>X.get("/api/history")})}function Uoe(e){const t=new URLSearchParams;e?.requires_response!==void 0&&t.set("requires_response",String(e.requires_response)),e?.direction&&t.set("direction",e.direction),e?.limit&&t.set("limit",String(e.limit));const r=t.toString();return Ce({queryKey:[...ce.emails,r],queryFn:()=>X.get(`/api/emails${r?`?${r}`:""}`)})}function Foe(){const e=Ee();return je({mutationFn:t=>X.delete(`/api/emails/${t}`),onSuccess:()=>{e.invalidateQueries({queryKey:ce.emails})}})}function Boe(){const e=Ee();return je({mutationFn:t=>X.post(`/api/emails/${t}/mark-responded`),onSuccess:()=>{e.invalidateQueries({queryKey:ce.emails})}})}function qoe(){return je({mutationFn:e=>X.post(`/api/emails/${e}/response`)})}function tU(){return Ce({queryKey:ce.adminStats,queryFn:()=>X.get("/api/system/stats")})}function Voe(){return Ce({queryKey:ce.systemConfig,queryFn:()=>X.get("/api/system/config")})}function Koe(){const e=Ee();return je({mutationFn:({key:t,value:r,category:n})=>X.post("/api/system/config",{key:t,value:r,category:n}),onSuccess:()=>{e.invalidateQueries({queryKey:ce.adminProviders}),e.invalidateQueries({queryKey:ce.systemConfig})}})}function Hoe(){return Ce({queryKey:ce.adminAudit,queryFn:()=>X.get("/api/system/audit")})}function Goe(){return Ce({queryKey:["systemPrompts"],queryFn:()=>X.get("/api/system/prompts")})}function Woe(){const e=Ee();return je({mutationFn:({key:t,prompt:r,change_reason:n,is_active:a,description:i})=>X.put(`/api/system/prompts/${t}`,{prompt:r,change_reason:n,is_active:a,description:i}),onSuccess:()=>{e.invalidateQueries({queryKey:["systemPrompts"]}),e.invalidateQueries({queryKey:["promptVersions"]})}})}function Qoe(e){return Ce({queryKey:["promptVersions",e],queryFn:()=>X.get(`/api/system/prompts/${e}/versions`),enabled:!!e})}function Yoe(e,t){return Ce({queryKey:["promptVersionContent",e,t],queryFn:()=>X.get(`/api/system/prompts/${e}/versions/${t}`),enabled:!!e&&t!=null})}function Xoe(){const e=Ee();return je({mutationFn:({key:t,version:r})=>X.post(`/api/system/prompts/${t}/restore`,{version:r}),onSuccess:()=>{e.invalidateQueries({queryKey:["systemPrompts"]}),e.invalidateQueries({queryKey:["promptVersions"]})}})}function Zoe(e){return Ce({queryKey:["promptPreview",e],queryFn:()=>X.get(`/api/prompts/preview?type=${e}`),enabled:!!e})}function Joe(){return Ce({queryKey:["systemUsers"],queryFn:()=>X.get("/api/system/users")})}function ele(){const e=Ee();return je({mutationFn:t=>X.post("/api/system/users",t),onSuccess:()=>e.invalidateQueries({queryKey:["systemUsers"]})})}function tle(){const e=Ee();return je({mutationFn:({id:t,...r})=>X.put(`/api/system/users/${t}`,r),onSuccess:()=>e.invalidateQueries({queryKey:["systemUsers"]})})}function rle(){const e=Ee();return je({mutationFn:t=>X.delete(`/api/system/users/${t}`),onSuccess:()=>e.invalidateQueries({queryKey:["systemUsers"]})})}function rU(){return Ce({queryKey:ce.health,queryFn:()=>X.get("/api/sot/health"),staleTime:6e4})}function nle(e=10){return Ce({queryKey:ce.briefingHistory,queryFn:()=>X.get(`/api/briefing/history?limit=${e}`)})}function sle(e=7){return Ce({queryKey:ce.trends(e),queryFn:()=>X.get(`/api/trends?days=${e}`),staleTime:6e4})}function ale(e="month"){return Ce({queryKey:ce.costsSummary(e),queryFn:()=>X.get(`/api/costs/summary?period=${e}`),staleTime:12e4})}function ile(){return Ce({queryKey:ce.notificationsCount,queryFn:()=>X.get("/api/notifications/count"),staleTime:3e4,refetchInterval:6e4})}function nU(){return Ce({queryKey:ce.sotAlerts,queryFn:()=>X.get("/api/sot/alerts"),staleTime:6e4})}function ole(){return Ce({queryKey:["sotInsights"],queryFn:()=>X.get("/api/sot/insights"),staleTime:6e4})}function lle(){return Ce({queryKey:["sotDelta"],queryFn:()=>X.get("/api/sot/delta"),staleTime:6e4})}function cle(e=50){return Ce({queryKey:["sotTimeline",e],queryFn:()=>X.get(`/api/sot/timeline?limit=${e}`),staleTime:6e4})}function ule(){return Ce({queryKey:["sotVersions"],queryFn:()=>X.get("/api/sot/versions")})}function dle(e,t){return Ce({queryKey:["sotCompare",e,t],queryFn:()=>X.get(`/api/sot/compare?v1=${e}&v2=${t}`),enabled:!!e&&!!t})}function fle(){return je({mutationFn:()=>X.post("/api/sot/executive-summary",{})})}function mle(){return Ce({queryKey:ce.emailsNeedingResponse,queryFn:()=>X.get("/api/emails/needing-response"),staleTime:6e4})}function sU(){return Ce({queryKey:ce.sprints,queryFn:()=>X.get("/api/sprints"),staleTime:6e4})}function hle(){return Ce({queryKey:ce.conflicts,queryFn:()=>X.get("/api/conflicts"),staleTime:3e5})}function ple(){return Ce({queryKey:ce.contactsStats,queryFn:()=>X.get("/api/contacts/stats"),staleTime:6e4})}function gle(){return Ce({queryKey:ce.conversationsStats,queryFn:()=>X.get("/api/conversations/stats"),staleTime:6e4})}function xle(){return Ce({queryKey:ce.syncDashboard,queryFn:()=>X.get("/api/sync/stats/dashboard"),staleTime:12e4})}function yle(){return Ce({queryKey:["llmProviders"],queryFn:()=>X.get("/api/llm/providers")})}function vle(){return Ce({queryKey:["systemProviderKeys"],queryFn:()=>X.get("/api/system/providers")})}function ble(){const e=Ee();return je({mutationFn:t=>X.post("/api/system/providers",t),onSuccess:()=>{e.invalidateQueries({queryKey:["systemProviderKeys"]}),e.invalidateQueries({queryKey:["llmProviders"]}),e.invalidateQueries({queryKey:ce.projectConfig})}})}function wle(){return Ce({queryKey:["llmMetadataModels"],queryFn:()=>X.get("/api/llm/metadata/models")})}function jle(){return Ce({queryKey:["llmMetadataStatus"],queryFn:()=>X.get("/api/llm/metadata/status")})}function Nle(){const e=Ee();return je({mutationFn:()=>X.post("/api/llm/metadata/sync",{}),onSuccess:()=>{e.invalidateQueries({queryKey:["llmModels"]}),e.invalidateQueries({queryKey:["llmMetadataModels"]}),e.invalidateQueries({queryKey:["llmMetadataStatus"]})}})}function Sle(){return Ce({queryKey:["llmQueueStatus"],queryFn:()=>X.get("/api/llm/queue/status"),refetchInterval:1e4})}function _le(){return Ce({queryKey:["llmQueuePending"],queryFn:()=>X.get("/api/llm/queue/pending")})}function Cle(){return Ce({queryKey:["llmQueueRetryable"],queryFn:()=>X.get("/api/llm/queue/retryable")})}function kle(){return Ce({queryKey:["llmQueueHistory"],queryFn:()=>X.get("/api/llm/queue/history")})}function Ele(){const e=Ee();return je({mutationFn:({action:t,id:r})=>{const n=r?`/api/llm/queue/${t}/${r}`:`/api/llm/queue/${t}`;return X.post(n,{})},onSuccess:()=>{e.invalidateQueries({queryKey:["llmQueueStatus"]}),e.invalidateQueries({queryKey:["llmQueuePending"]}),e.invalidateQueries({queryKey:["llmQueueRetryable"]}),e.invalidateQueries({queryKey:["llmQueueHistory"]})}})}function Ale(){return Ce({queryKey:["graphConfig"],queryFn:()=>X.get("/api/graph/config")})}function Tle(){return Ce({queryKey:["graphStatus"],queryFn:()=>X.get("/api/graph/status")})}function Ole(){return Ce({queryKey:["graphInsights"],queryFn:()=>X.get("/api/graph/insights")})}function Ple(){return Ce({queryKey:["graphList"],queryFn:()=>X.get("/api/graph/list")})}function Mle(){return Ce({queryKey:["graphSyncStatus"],queryFn:()=>X.get("/api/graph/sync/status")})}function Rle(){return Ce({queryKey:["graphProviders"],queryFn:()=>X.get("/api/graph/providers")})}function Dle(){const e=Ee();return je({mutationFn:t=>X.post("/api/graph/connect",t),onSuccess:()=>{e.invalidateQueries({queryKey:["graphStatus"]}),e.invalidateQueries({queryKey:["graphConfig"]})}})}function Ile(){const e=Ee();return je({mutationFn:()=>X.post("/api/graph/sync",{}),onSuccess:()=>e.invalidateQueries({queryKey:["graphStatus"]})})}function Lle(){const e=Ee();return je({mutationFn:()=>X.post("/api/graph/sync/full",{}),onSuccess:()=>{e.invalidateQueries({queryKey:["graphStatus"]}),e.invalidateQueries({queryKey:["graphSyncStatus"]})}})}function $le(){return je({mutationFn:()=>X.post("/api/graph/indexes",{})})}function zle(){const e=Ee();return je({mutationFn:()=>X.post("/api/graph/cleanup-orphans",{}),onSuccess:()=>e.invalidateQueries({queryKey:["graphList"]})})}function Ule(){const e=Ee();return je({mutationFn:()=>X.post("/api/graph/cleanup-duplicates",{}),onSuccess:()=>e.invalidateQueries({queryKey:["graphStatus"]})})}function Fle(){const e=Ee();return je({mutationFn:()=>X.post("/api/graph/sync/cleanup",{}),onSuccess:()=>e.invalidateQueries({queryKey:["graphStatus"]})})}function Ble(){const e=Ee();return je({mutationFn:t=>X.delete(`/api/graph/delete/${encodeURIComponent(t)}`),onSuccess:()=>e.invalidateQueries({queryKey:["graphList"]})})}function qle(){return je({mutationFn:e=>X.post("/api/graph/query",e)})}function Vle(){return je({mutationFn:e=>X.post("/api/graph/sync-projects",e||{})})}function Kle(){return Ce({queryKey:["ontologySchema"],queryFn:()=>X.get("/api/ontology")})}function Hle(){return Ce({queryKey:["ontologyStats"],queryFn:()=>X.get("/api/ontology/stats")})}function Gle(){return Ce({queryKey:["ontologySuggestions"],queryFn:()=>X.get("/api/ontology/suggestions")})}function Wle(){return Ce({queryKey:["ontologyWorkerStatus"],queryFn:()=>X.get("/api/ontology/worker/status")})}function Qle(){return Ce({queryKey:["ontologySyncStatus"],queryFn:()=>X.get("/api/ontology/sync/status")})}function Yle(){return Ce({queryKey:["ontologyChanges"],queryFn:()=>X.get("/api/ontology/changes")})}function Xle(){return Ce({queryKey:["ontologyCompliance"],queryFn:()=>X.get("/api/ontology/validate-compliance"),enabled:!1})}function Zle(){return Ce({queryKey:["ontologyDiff"],queryFn:()=>X.get("/api/ontology/diff"),enabled:!1})}function Jle(){return Ce({queryKey:["ontologyUnused"],queryFn:()=>X.get("/api/ontology/unused-types"),enabled:!1})}function ece(){const e=Ee();return je({mutationFn:()=>X.post("/api/ontology/analyze-graph",{}),onSuccess:()=>e.invalidateQueries({queryKey:["ontologySuggestions"]})})}function tce(){const e=Ee();return je({mutationFn:()=>X.post("/api/ontology/sync/force",{}),onSuccess:()=>e.invalidateQueries({queryKey:["ontologySyncStatus"]})})}function rce(){const e=Ee();return je({mutationFn:({id:t,...r})=>X.post(`/api/ontology/suggestions/${t}/approve`,r),onSuccess:()=>{e.invalidateQueries({queryKey:["ontologySuggestions"]}),e.invalidateQueries({queryKey:["ontologySchema"]})}})}function nce(){const e=Ee();return je({mutationFn:({id:t,reason:r})=>X.post(`/api/ontology/suggestions/${t}/reject`,{reason:r}),onSuccess:()=>e.invalidateQueries({queryKey:["ontologySuggestions"]})})}function sce(){const e=Ee();return je({mutationFn:t=>X.post("/api/ontology/suggestions/auto-approve",t||{}),onSuccess:()=>{e.invalidateQueries({queryKey:["ontologySuggestions"]}),e.invalidateQueries({queryKey:["ontologySchema"]})}})}function ace(){const e=Ee();return je({mutationFn:t=>X.post("/api/ontology/worker/trigger",t),onSuccess:()=>e.invalidateQueries({queryKey:["ontologyWorkerStatus"]})})}function ice(){const e=Ee();return je({mutationFn:t=>X.post("/api/ontology/cleanup",t),onSuccess:()=>{e.invalidateQueries({queryKey:["ontologySchema"]}),e.invalidateQueries({queryKey:["ontologyStats"]})}})}function oce(){return je({mutationFn:()=>X.post("/api/ontology/infer-relationships",{})})}function lce(){const e=Ee();return je({mutationFn:t=>X.post("/api/ontology/entity-type",t),onSuccess:()=>e.invalidateQueries({queryKey:["ontologySchema"]})})}function cce(){const e=Ee();return je({mutationFn:t=>X.post("/api/ontology/relation-type",t),onSuccess:()=>e.invalidateQueries({queryKey:["ontologySchema"]})})}function uce(){return Ce({queryKey:["teamAnalysisConfig"],queryFn:()=>X.get("/api/team-analysis/config")})}function dce(){const e=Ee();return je({mutationFn:t=>X.put("/api/team-analysis/config",t),onSuccess:()=>e.invalidateQueries({queryKey:["teamAnalysisConfig"]})})}function fce(){return Ce({queryKey:["googleDriveAdmin"],queryFn:()=>X.get("/api/system/google-drive")})}function mce(){const e=Ee();return je({mutationFn:t=>X.post("/api/system/google-drive",t),onSuccess:()=>e.invalidateQueries({queryKey:["googleDriveAdmin"]})})}function hce(){return je({mutationFn:()=>X.post("/api/google-drive/sync",{})})}function pce(){const e=Ee();return je({mutationFn:()=>X.post("/api/system/google-drive/bootstrap-all",{}),onSuccess:()=>e.invalidateQueries({queryKey:["googleDriveAdmin"]})})}function gce(){return Ce({queryKey:["billingProjects"],queryFn:()=>X.get("/api/admin/billing/projects")})}function xce(){return Ce({queryKey:["billingPricing"],queryFn:()=>X.get("/api/admin/billing/pricing")})}function yce(){const e=Ee();return je({mutationFn:t=>X.post("/api/admin/billing/pricing",t),onSuccess:()=>e.invalidateQueries({queryKey:["billingPricing"]})})}function vce(){return Ce({queryKey:["billingExchangeRate"],queryFn:()=>X.get("/api/admin/billing/exchange-rate")})}function bce(){const e=Ee();return je({mutationFn:t=>X.post("/api/admin/billing/exchange-rate",t),onSuccess:()=>e.invalidateQueries({queryKey:["billingExchangeRate"]})})}function wce(){const e=Ee();return je({mutationFn:()=>X.post("/api/admin/billing/exchange-rate/refresh",{}),onSuccess:()=>e.invalidateQueries({queryKey:["billingExchangeRate"]})})}function jce(){const e=Ee();return je({mutationFn:({projectId:t,action:r,data:n})=>X.post(`/api/admin/billing/projects/${t}/${r}`,n||{}),onSuccess:()=>e.invalidateQueries({queryKey:["billingProjects"]})})}function Nce(e){const t=new URLSearchParams;e?.page&&t.set("page",String(e.page)),e?.limit&&t.set("limit",String(e.limit)),e?.search&&t.set("search",e.search),e?.filter&&t.set("filter",e.filter);const r=t.toString();return Ce({queryKey:["adminAuditLogs",e],queryFn:()=>X.get(`/api/admin/audit/logs${r?`?${r}`:""}`)})}function Sce(){return Ce({queryKey:["krispOAuthStatus"],queryFn:()=>X.get("/api/krisp/oauth/status"),staleTime:3e4,retry:1})}function _ce(){return je({mutationFn:()=>X.get("/api/krisp/oauth/authorize")})}function Cce(){const e=Ee();return je({mutationFn:()=>X.post("/api/krisp/oauth/disconnect",{}),onSuccess:()=>{e.invalidateQueries({queryKey:["krispOAuthStatus"]}),e.invalidateQueries({queryKey:["krispOAuthMeetings"]})}})}function kce(e){const t=new URLSearchParams;e?.search&&t.set("search",e.search),e?.after&&t.set("after",e.after),e?.before&&t.set("before",e.before),e?.limit&&t.set("limit",String(e.limit)),e?.offset&&t.set("offset",String(e.offset));const r=t.toString();return Ce({queryKey:["krispOAuthMeetings",e],queryFn:()=>X.get(`/api/krisp/oauth/meetings${r?`?${r}`:""}`),enabled:e?.enabled!==!1,staleTime:6e4})}function Ece(e){return Ce({queryKey:["krispMeetingPreview",e],queryFn:()=>X.get(`/api/krisp/oauth/meetings/${e}/preview`),enabled:!!e,staleTime:5*6e4})}function Ace(){const e=Ee();return je({mutationFn:t=>X.post("/api/krisp/oauth/meetings/import",t),onSuccess:()=>{e.invalidateQueries({queryKey:["krispOAuthMeetings"]}),e.invalidateQueries({queryKey:ce.files}),e.invalidateQueries({queryKey:ce.documents}),e.invalidateQueries({queryKey:ce.dashboard})}})}function Tce(){const e=Ee();return je({mutationFn:t=>X.post("/api/knowledge/synthesize",t),onSuccess:()=>{e.invalidateQueries({queryKey:ce.facts}),e.invalidateQueries({queryKey:ce.decisions}),e.invalidateQueries({queryKey:ce.questions}),e.invalidateQueries({queryKey:ce.risks}),e.invalidateQueries({queryKey:ce.actions}),e.invalidateQueries({queryKey:ce.dashboard})},onError:t=>{console.error("Knowledge synthesis failed:",t.message)}})}function Oce(){const e=Ee();return je({mutationFn:()=>X.post("/api/knowledge/resynthesis"),onSuccess:()=>{e.invalidateQueries({queryKey:ce.facts}),e.invalidateQueries({queryKey:ce.decisions}),e.invalidateQueries({queryKey:ce.dashboard})}})}function Pce(){return je({mutationFn:e=>X.post("/api/knowledge/embed",e),onError:e=>{console.error("Embedding generation failed:",e.message)}})}function Mce(){return je({mutationFn:()=>X.post("/api/knowledge/regenerate")})}function Rce(){return Ce({queryKey:["knowledgeStatus"],queryFn:()=>X.get("/api/knowledge/status"),staleTime:3e4})}function Dce(){return Ce({queryKey:["deletedFacts"],queryFn:()=>X.get("/api/facts/deleted")})}function Ice(){const e=Ee();return je({mutationFn:t=>X.post(`/api/facts/${t}/restore`),onSuccess:()=>{e.invalidateQueries({queryKey:["deletedFacts"]}),e.invalidateQueries({queryKey:ce.facts})}})}function Lce(){return Ce({queryKey:["deletedDecisions"],queryFn:()=>X.get("/api/decisions/deleted")})}function $ce(){const e=Ee();return je({mutationFn:t=>X.post(`/api/decisions/${t}/restore`),onSuccess:()=>{e.invalidateQueries({queryKey:["deletedDecisions"]}),e.invalidateQueries({queryKey:ce.decisions})}})}function zce(){return Ce({queryKey:["deletedRisks"],queryFn:()=>X.get("/api/risks/deleted")})}function Uce(){const e=Ee();return je({mutationFn:t=>X.post(`/api/risks/${t}/restore`),onSuccess:()=>{e.invalidateQueries({queryKey:["deletedRisks"]}),e.invalidateQueries({queryKey:ce.risks})}})}function Fce(){return Ce({queryKey:["deletedActions"],queryFn:()=>X.get("/api/actions/deleted")})}function Bce(){const e=Ee();return je({mutationFn:t=>X.post(`/api/actions/${t}/restore`),onSuccess:()=>{e.invalidateQueries({queryKey:["deletedActions"]}),e.invalidateQueries({queryKey:ce.actions})}})}function qce(){const e=Ee();return je({mutationFn:t=>X.post("/api/sprints",t),onSuccess:()=>{e.invalidateQueries({queryKey:ce.sprints}),e.invalidateQueries({queryKey:ce.dashboard})}})}function Vce(e){return Ce({queryKey:["sprint",e],queryFn:()=>X.get(`/api/sprints/${e}`),enabled:!!e})}function Kce(){return je({mutationFn:e=>X.post(`/api/sprints/${e}/generate`)})}function Hce(){const e=Ee();return je({mutationFn:({sprintId:t,tasks:r,existingActionIds:n})=>X.post(`/api/sprints/${t}/apply`,{tasks:r,existingActionIds:n}),onSuccess:()=>{e.invalidateQueries({queryKey:ce.sprints}),e.invalidateQueries({queryKey:ce.actions})}})}function Gce(e){return Ce({queryKey:["sprintReport",e],queryFn:()=>X.get(`/api/sprints/${e}/report`),enabled:!!e})}function Wce(){return je({mutationFn:e=>X.post(`/api/sprints/${e}/report/analyze`)})}function Qce(){return je({mutationFn:({sprintId:e,style:t})=>X.post(`/api/sprints/${e}/report/document`,{style:t})})}function Yce(){return je({mutationFn:e=>X.post(`/api/sprints/${e}/report/presentation`)})}const Xce=[{title:"Project",items:[{to:"/dashboard",label:"Dashboard",icon:bte},{to:"/chat",label:"Chat",icon:ms},{to:"/sot",label:"Source of Truth",icon:Wt},{to:"/timeline",label:"Timeline",icon:ja},{to:"/contacts",label:"Contacts",icon:yr},{to:"/team-analysis",label:"Team Analysis",icon:yl},{to:"/files",label:"Files",icon:Zi},{to:"/emails",label:"Emails",icon:Wn},{to:"/conversations",label:"Conversations",icon:cb},{to:"/graph",label:"Graph",icon:MC},{to:"/costs",label:"Costs",icon:jC},{to:"/history",label:"History",icon:tr},{to:"/sprints",label:"Sprints",icon:ja},{to:"/projects",label:"Projects",icon:Id},{to:"/settings",label:"Project Settings",icon:PC}]},{title:"User",items:[{to:"/profile",label:"Profile",icon:fn}]},{title:"Admin",items:[{to:"/admin",label:"Admin",icon:cf}]}],HP=[{type:"documents",label:"Documents",hint:"PDF, DOCX, TXT, MD",icon:z6,accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.md,.rtf,.odt,.csv,.json,.xml,.yaml,.yml,.html,.htm"},{type:"transcripts",label:"Transcripts",hint:"TXT, MD (Krisp, Otter)",icon:gh,accept:".txt,.md,.srt,.vtt"},{type:"emails",label:"Email",hint:"Paste or upload .eml",icon:Wn,accept:".eml,.msg"},{type:"conversations",label:"Conversation",hint:"WhatsApp, Slack, Teams",icon:cb,accept:".txt,.json"}];function GP(e){return e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}function Zce({open:e,onClose:t}){const[r,n]=y.useState(!1),[a,i]=y.useState(!1),[o,c]=y.useState(null),d=y.useRef(null),f=y.useRef("documents"),{data:m=[]}=UC(),{data:h=[]}=K8(),{data:g=[]}=BC(),{data:x=[]}=H8(),{data:w=[]}=G8(),b=FC();jie();const j=$8(),N=Nie(),_=z8(),S=U8(),k=y.useCallback(()=>{m.length!==0&&b.mutate(void 0,{onError:L=>{G.error(`Processing failed: ${L.message||"Unknown error"}`)}})},[m.length,b]),A=y.useCallback(()=>{const L={facts:x??[],decisions:w??[],exportedAt:new Date().toISOString()},F=new Blob([JSON.stringify(L,null,2)],{type:"application/json"}),q=URL.createObjectURL(F),Z=document.createElement("a");Z.href=q,Z.download="godmode-knowledge-export.json",Z.click(),URL.revokeObjectURL(q)},[x,w]),T=y.useCallback(async()=>{const L={facts:x??[],decisions:w??[]};await navigator.clipboard.writeText(JSON.stringify(L,null,2))},[x,w]),O=y.useCallback(async()=>{const L=new Date,F=new Date(L.getTime()-10080*60*1e3),q=(g??[]).filter(V=>V.status==="completed"||!V.dueDate?!1:new Date(V.dueDate)<L),Z=(h??[]).filter(V=>{if(V.status==="resolved"||V.status==="answered"||V.status==="dismissed")return!1;const ee=V.created_at??V.createdAt;return ee?new Date(ee)<F:!1}),B={actions:q,questions:Z,exportedAt:L.toISOString()};await navigator.clipboard.writeText(JSON.stringify(B,null,2)),G.success(`Copied ${q.length} actions and ${Z.length} questions`)},[g,h]),P=y.useCallback(()=>{j.mutate(void 0,{onSettled:()=>n(!1)})},[j]),R=y.useCallback(()=>{N.mutate(void 0,{onSettled:()=>i(!1)})},[N]),M=y.useCallback((L,F)=>{L.preventDefault(),c(null);const q=Array.from(L.dataTransfer.files);q.length>0&&_.mutate({files:q,type:F},{onSuccess:()=>G.success(`${q.length} file(s) uploaded`),onError:Z=>G.error(`Upload failed: ${Z.message}`)})},[_]),D=y.useCallback((L,F)=>{L.preventDefault(),c(F)},[]),z=y.useCallback(()=>{c(null)},[]),Y=y.useCallback(L=>{f.current=L;const F=HP.find(q=>q.type===L);d.current&&(d.current.accept=F?.accept||""),d.current?.click()},[]),I=y.useCallback(L=>{const F=Array.from(L.target.files||[]);F.length>0&&_.mutate({files:F,type:f.current},{onSuccess:()=>G.success(`${F.length} file(s) uploaded`),onError:q=>G.error(`Upload failed: ${q.message}`)}),L.target.value=""},[_]),K=y.useCallback(L=>{S.mutate({folder:L.folder,filename:L.filename})},[S]),U=y.useMemo(()=>{const L=new Date,F=new Date(L.getTime()-10080*60*1e3),q=Array.isArray(g)?g.filter(B=>B.status==="completed"?!1:B.dueDate?new Date(B.dueDate)<L:!1).length:0,Z=Array.isArray(h)?h.filter(B=>{if(B.status==="resolved"||B.status==="answered")return!1;const V=B.created_at??B.createdAt;return V?new Date(V)<F:!1}).length:0;return q+Z},[g,h]);return s.jsxs(s.Fragment,{children:[s.jsxs("aside",{className:H("fixed inset-y-0 left-0 z-40 w-[var(--sidebar-width)] flex flex-col border-r bg-[hsl(var(--card))]","transform transition-transform duration-200 md:relative md:translate-x-0",e?"translate-x-0":"-translate-x-full"),children:[s.jsxs("div",{className:"p-3 border-b",children:[s.jsx("div",{className:"text-xs font-semibold text-[hsl(var(--muted-foreground))] uppercase tracking-wider mb-2",children:"Add Files"}),s.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:HP.map(L=>{const F=L.icon;return s.jsxs("div",{className:H("flex items-center gap-2 p-2 rounded-md border border-dashed cursor-pointer transition-colors text-xs","hover:bg-[hsl(var(--accent))]",o===L.type&&"bg-[hsl(var(--accent))] border-[hsl(var(--ring))]"),onClick:()=>Y(L.type),onDrop:q=>M(q,L.type),onDragOver:q=>D(q,L.type),onDragLeave:z,children:[s.jsx(F,{className:"h-4 w-4 shrink-0 text-[hsl(var(--muted-foreground))]"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium truncate",children:L.label}),s.jsx("div",{className:"text-[10px] text-[hsl(var(--muted-foreground))] truncate",children:L.hint})]})]},L.type)})}),s.jsx("input",{ref:d,type:"file",multiple:!0,className:"hidden",onChange:I})]}),s.jsxs("div",{className:"px-3 py-2 border-b",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-xs font-semibold text-[hsl(var(--muted-foreground))] uppercase tracking-wider",children:"Pending"}),s.jsxs(BP,{variant:"secondary",className:"text-[10px]",children:[m.length," files"]})]}),s.jsx("div",{className:"max-h-32 overflow-y-auto",children:m.length===0?s.jsx("p",{className:"text-xs text-[hsl(var(--muted-foreground))] py-1",children:"No files pending"}):s.jsx("ul",{className:"space-y-0.5",children:m.map(L=>s.jsxs("li",{className:"flex items-center justify-between text-xs py-1 px-1 rounded hover:bg-[hsl(var(--accent))]",title:`${L.filename} (${GP(L.size)})`,children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("span",{className:"truncate block",children:L.filename}),s.jsx("span",{className:"text-[10px] text-[hsl(var(--muted-foreground))]",children:GP(L.size)})]}),s.jsx("button",{onClick:()=>K(L),className:"shrink-0 ml-1 text-[hsl(var(--muted-foreground))] hover:text-[hsl(var(--destructive))]",children:s.jsx(mn,{className:"h-3 w-3"})})]},`${L.folder}/${L.filename}`))})})]}),s.jsx("nav",{className:"flex-1 overflow-y-auto p-2 space-y-3",children:Xce.map(L=>s.jsxs("div",{children:[s.jsx("div",{className:"text-[10px] font-bold text-[hsl(var(--primary))] uppercase tracking-widest px-2 mb-1",children:L.title}),L.items.map(F=>{const q=F.icon;return s.jsxs(w6,{to:F.to,onClick:t,className:({isActive:Z})=>H("flex items-center gap-2 px-2 py-1.5 rounded-md text-sm transition-colors",Z?"bg-[hsl(var(--accent))] text-[hsl(var(--accent-foreground))] font-medium":"text-[hsl(var(--muted-foreground))] hover:bg-[hsl(var(--accent))] hover:text-[hsl(var(--accent-foreground))]"),children:[s.jsx(q,{className:"h-4 w-4"}),s.jsx("span",{children:F.label})]},F.to)})]},L.title))}),s.jsxs("div",{className:"p-3 border-t space-y-2",children:[s.jsx("div",{className:"text-xs font-semibold text-[hsl(var(--muted-foreground))] uppercase tracking-wider mb-1",children:"Actions"}),s.jsxs(Mt,{className:"w-full",onClick:k,disabled:m.length===0||b.isPending,children:[s.jsx(hn,{className:"h-4 w-4"}),b.isPending?"Processing...":"Process Files"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Mt,{variant:"secondary",className:"flex-1",onClick:A,children:[s.jsx(Xi,{className:"h-4 w-4"}),"Export"]}),s.jsx(Mt,{variant:"secondary",size:"icon",onClick:T,title:"Copy knowledge to clipboard",children:s.jsx(Tee,{className:"h-4 w-4"})})]}),s.jsxs(Mt,{variant:"secondary",className:"w-full",onClick:O,children:[s.jsx(rp,{className:"h-4 w-4"}),"Copy Overdue",U>0&&s.jsx(BP,{variant:"destructive",className:"ml-1 text-[10px]",children:U})]}),s.jsxs(Mt,{variant:"secondary",className:"w-full",onClick:()=>i(!0),children:[s.jsx(Ure,{className:"h-4 w-4"}),"Clean Orphans"]}),s.jsxs(Mt,{variant:"destructive",className:"w-full",onClick:()=>n(!0),children:[s.jsx(Et,{className:"h-4 w-4"}),"Reset Data"]})]})]}),e&&s.jsx("div",{className:"fixed inset-0 z-30 bg-black/50 md:hidden",onClick:t}),s.jsxs(Ws,{open:r,onClose:()=>n(!1),children:[s.jsxs(Nh,{children:[s.jsx(Na,{children:"Reset Project Data"}),s.jsx(qP,{children:"This will permanently delete all knowledge data (facts, decisions, questions, risks, actions) for the current project. Team, contacts, and cost data will be preserved. This action cannot be undone."})]}),s.jsxs(VP,{children:[s.jsx(Mt,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),s.jsx(Mt,{variant:"destructive",onClick:P,disabled:j.isPending,children:j.isPending?"Resetting...":"Reset Data"})]})]}),s.jsxs(Ws,{open:a,onClose:()=>i(!1),children:[s.jsxs(Nh,{children:[s.jsx(Na,{children:"Clean Orphan Data"}),s.jsx(qP,{children:"This will remove orphaned data entries that are not linked to any documents. Continue?"})]}),s.jsxs(VP,{children:[s.jsx(Mt,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),s.jsx(Mt,{onClick:R,disabled:N.isPending,children:N.isPending?"Cleaning...":"Clean Orphans"})]})]})]})}function Jce(){try{const e=localStorage.getItem("godmode-theme");if(e==="light"||e==="dark")return e}catch{}return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function eue(){const[e,t]=y.useState(Jce);y.useEffect(()=>{document.documentElement.classList.toggle("dark",e==="dark"),localStorage.setItem("godmode-theme",e)},[e]);const r=y.useCallback(()=>{t(a=>a==="dark"?"light":"dark")},[]),n=y.useCallback(a=>{t(a)},[]);return{theme:e,toggleTheme:r,setTheme:n}}const Nj="godmode-project-id";function aU(){const e=Ee(),[t,r]=y.useState(()=>{try{return localStorage.getItem(Nj)}catch{return null}}),{data:n=[]}=I8(),a=y.useCallback(o=>{const c=t;r(o),d2(o);try{o?(localStorage.setItem(Nj,o),localStorage.setItem("godmode_current_project",o)):(localStorage.removeItem(Nj),localStorage.removeItem("godmode_current_project"))}catch{}o!==c&&e.removeQueries({predicate:d=>d.queryKey[0]!=="projects"})},[t,e]);y.useEffect(()=>{d2(t)},[t]);const i=(Array.isArray(n)?n:[]).find(o=>o.id===t)??null;return{projectId:t,setProjectId:a,projects:n,currentProject:i}}function tue(){const{theme:e,toggleTheme:t}=eue(),{projectId:r,setProjectId:n,projects:a}=aU(),[i,o]=y.useState(!1);return s.jsxs("div",{className:"flex flex-col h-screen",children:[s.jsx(uie,{theme:e,onToggleTheme:t,projects:a,currentProjectId:r,onSelectProject:n,onToggleSidebar:()=>o(c=>!c)}),s.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[s.jsx(Zce,{open:i,onClose:()=>o(!1)}),s.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:s.jsx(g6,{})})]})]})}const rue=({className:e,contacts:t,allContacts:r=[]})=>{const[n,a]=En.useState("team"),i=new Date,o=n==="team"?t:r,c=y.useMemo(()=>{const h=new Set;return o.filter(g=>h.has(g.id)?!1:(h.add(g.id),!0))},[o]),d=y.useMemo(()=>{const h=new Map;return c.forEach(g=>{const x=g.timezone||"UTC";h.has(x)||h.set(x,[]),h.get(x)?.push(g)}),Array.from(h.entries()).map(([g,x])=>({tz:g,contacts:x,offset:nue(g)}))},[c]),f=y.useMemo(()=>oue(d.map(h=>h.offset)),[d]),m=i.getUTCHours()+i.getUTCMinutes()/60;return s.jsxs("div",{className:H("space-y-4",e),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-gm-text-primary",children:[s.jsx("div",{className:"p-1.5 bg-amber-500/10 rounded-lg",children:s.jsx(RC,{className:"w-5 h-5 text-amber-500"})}),s.jsx("h3",{className:"font-semibold text-lg",children:"Golden Hours"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(lf,{className:"w-3.5 h-3.5 text-gm-text-tertiary"}),s.jsxs("span",{className:"text-sm text-gm-text-secondary font-medium",children:[i.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})," your time"]})]})]}),s.jsxs("div",{className:"golden-card bg-gm-surface-secondary/50 backdrop-blur-sm border border-gm-border-primary rounded-xl p-5 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:()=>a("team"),className:H("flex items-center gap-2 text-sm font-medium transition-all px-3 py-1.5 rounded-lg",n==="team"?"bg-gm-interactive-primary/10 text-gm-interactive-primary":"text-gm-text-tertiary hover:bg-gm-surface-hover hover:text-gm-text-primary"),children:[s.jsx(yr,{className:"w-4 h-4"}),s.jsx("span",{children:"Team"}),s.jsx("span",{className:"bg-gm-bg-primary/50 text-gm-text-primary px-1.5 py-0.5 rounded text-xs ml-1 border border-gm-border-primary",children:t.length})]}),s.jsx("div",{className:"h-4 w-px bg-gm-border-primary"}),s.jsxs("button",{onClick:()=>a("all"),className:H("flex items-center gap-2 text-sm font-medium transition-all px-3 py-1.5 rounded-lg",n==="all"?"bg-gm-interactive-primary/10 text-gm-interactive-primary":"text-gm-text-tertiary hover:bg-gm-surface-hover hover:text-gm-text-primary"),children:[s.jsx(yr,{className:"w-4 h-4"}),s.jsx("span",{children:"All Contacts"}),s.jsx("span",{className:"bg-gm-bg-primary/50 text-gm-text-primary px-1.5 py-0.5 rounded text-xs ml-1 border border-gm-border-primary",children:r.length})]})]}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),s.jsx("span",{className:"text-xs text-gm-text-tertiary",children:"Live"})]})]}),s.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 -mx-2 px-2",children:c.length===0?s.jsx("div",{className:"text-sm text-gm-text-tertiary py-4 px-2 italic",children:"No contacts with timezones found. Add timezones to your contacts to see availability."}):c.map(h=>s.jsxs("div",{className:"flex flex-col items-center min-w-[70px] space-y-1 group cursor-pointer",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-12 h-12 rounded-full p-0.5 bg-gradient-to-br from-gm-border-primary to-transparent group-hover:from-amber-500/50 transition-all",children:s.jsx("img",{src:[h.avatar,h.avatarUrl].find(g=>typeof g=="string"&&g.length>0&&g!=="undefined"&&g!=="null")||`https://ui-avatars.com/api/?name=${encodeURIComponent(h.name)}&background=random&size=96`,alt:h.name,className:"w-full h-full rounded-full object-cover border-2 border-gm-bg-primary",onError:g=>{g.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(h.name)}&background=random&size=96`}})}),aue(h.timezone)&&s.jsx("div",{className:"absolute bottom-0 right-0 w-3.5 h-3.5 bg-emerald-500 border-2 border-gm-bg-primary rounded-full"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-xs font-medium text-gm-text-primary truncate w-[70px] leading-tight",children:h.name.split(" ")[0]}),s.jsx("p",{className:"text-[10px] text-gm-text-tertiary",children:sue(h.timezone)})]})]},h.id))}),d.length>0&&s.jsxs("div",{className:"space-y-3 relative py-4",children:[s.jsx("div",{className:"absolute inset-0 flex justify-between px-[calc(96px+12px)] pointer-events-none h-full w-full",children:[0,6,12,18,24].map(h=>s.jsx("div",{className:"h-full border-r border-dashed border-gm-border-primary/30 first:border-l relative w-px",children:s.jsxs("span",{className:"absolute -top-4 -translate-x-1/2 text-[10px] text-gm-text-tertiary/50",children:[h,":00"]})},h))}),s.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-gm-interactive-primary/60 z-20 pointer-events-none",style:{left:`calc(108px + ${m/24*100}% * (1 - 108px / 100%))`},children:s.jsx("span",{className:"absolute -top-4 -translate-x-1/2 text-[9px] font-semibold text-gm-interactive-primary bg-gm-bg-primary px-1 rounded",children:"NOW"})}),s.jsx("div",{className:"space-y-3 relative z-10 pt-2",children:d.slice(0,6).map((h,g)=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"w-24 text-xs font-medium text-gm-text-tertiary truncate text-right",title:h.tz,children:[iue(h.tz),s.jsxs("span",{className:"block text-[10px] text-gm-text-placeholder",children:["UTC",h.offset>=0?"+":"",h.offset]})]}),s.jsxs("div",{className:"flex-1 h-8 bg-gm-surface-hover/40 rounded-md relative overflow-hidden",children:[cue(h.offset),f&&uue(f)]}),s.jsx("div",{className:"w-8 text-[10px] text-gm-text-tertiary text-center",children:h.contacts.length})]},g))}),s.jsxs("div",{className:"flex items-center gap-4 pt-2 text-[10px] text-gm-text-tertiary",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"w-3 h-2 rounded-sm bg-gm-interactive-primary/20"}),"Work hours (9-18 local)"]}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"w-3 h-2 rounded-full bg-gradient-to-r from-amber-500 to-amber-400"}),"Golden overlap"]})]})]}),f?s.jsxs("div",{className:"golden-summary p-4 rounded-xl bg-gradient-to-r from-amber-500/5 via-orange-500/5 to-transparent border border-amber-500/10 flex items-start gap-3",children:[s.jsx("div",{className:"p-2 bg-amber-500/10 rounded-lg shrink-0 mt-0.5",children:s.jsx(Fs,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"})}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-sm text-amber-700 dark:text-amber-400",children:["Golden Hours: ",xd(f.start),"  ",xd(f.end)," UTC"]}),s.jsxs("p",{className:"text-xs text-gm-text-secondary mt-1",children:[s.jsxs("strong",{children:[f.duration,"h"]})," of overlap across ",d.length," timezone",d.length>1?"s":"",".",f.duration>=3?" Great window for synchronous meetings.":f.duration>=1?" Tight  prioritize short standups.":" Very limited overlap  consider async."]})]})]}):d.length>0?s.jsxs("div",{className:"golden-summary golden-summary-warning p-4 rounded-xl bg-gradient-to-r from-red-500/5 via-red-500/3 to-transparent border border-red-500/15 flex items-start gap-3",children:[s.jsx("div",{className:"p-2 bg-red-500/10 rounded-lg shrink-0 mt-0.5",children:s.jsx(vr,{className:"w-4 h-4 text-red-500"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-sm text-red-600 dark:text-red-400",children:"No Overlap Found"}),s.jsx("p",{className:"text-xs text-gm-text-secondary mt-1",children:"There are no common work hours across these timezones. Consider async communication or rotating meeting times."})]})]}):null,f&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary/70 mb-3",children:"Suggested Slots"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:lue(f).map((h,g)=>s.jsxs("button",{className:"flex items-center justify-between p-2.5 rounded-lg bg-gm-surface-hover/40 hover:bg-gm-surface-hover border border-transparent hover:border-gm-border-primary transition-all text-xs group cursor-pointer text-left",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(tr,{className:"w-3.5 h-3.5 text-gm-text-tertiary group-hover:text-gm-text-primary transition-colors"}),s.jsx("span",{className:"font-medium text-gm-text-primary",children:h})]}),s.jsxs("div",{className:"flex items-center gap-1 bg-gm-bg-primary/50 px-1.5 py-0.5 rounded text-[10px] text-gm-text-tertiary",children:[s.jsx(yr,{className:"w-3 h-3"}),s.jsxs("span",{children:[c.length,"/",c.length]})]})]},g))})]})]})]})};function nue(e){try{const n=new Date().toLocaleString("en-US",{timeZone:e,timeZoneName:"shortOffset"}).split("GMT");if(n.length>1){const a=n[1].trim(),i=a.startsWith("-")?-1:1,[o,c]=a.replace("+","").replace("-","").split(":").map(Number);return i*(o+(c||0)/60)}}catch{}return 0}function sue(e){try{return e?new Date().toLocaleTimeString("en-US",{timeZone:e,hour:"2-digit",minute:"2-digit",hour12:!1}):""}catch{return""}}function aue(e){try{if(!e)return!1;const t=Number(new Date().toLocaleString("en-US",{timeZone:e,hour:"numeric",hour12:!1}));return t>=9&&t<18}catch{return!1}}function iue(e){return e.split("/").pop()?.replace(/_/g," ")||e}function xd(e){const t=Math.floor(e),r=Math.round((e-t)*60);return`${String(t).padStart(2,"0")}:${String(r).padStart(2,"0")}`}function oue(e){if(e.length===0)return null;let t=0,r=24;for(const a of e){const i=9-a,o=18-a;t=Math.max(t,i),r=Math.min(r,o)}const n=r-t;return n<=0?null:{start:t,end:r,duration:Math.round(n*10)/10}}function lue(e){const t=new Date,r=new Date(t);r.setDate(r.getDate()+1);const n="Today",a="Tomorrow",i=(e.start+e.end)/2,o=Math.max(e.start,Math.floor(e.start)+.5),c=Math.min(e.end-.5,Math.ceil(i));return[`${n}, ${xd(o)} UTC`,`${n}, ${xd(c)} UTC`,`${a}, ${xd(o)} UTC`,`${a}, ${xd(c)} UTC`]}function cue(e){const t=9-e,n=(18-e-t)/24*100,a=t/24*100;return s.jsx("div",{className:"absolute h-full bg-gm-interactive-primary/15 top-0 rounded-sm",style:{left:`${Math.max(0,a)}%`,width:`${Math.min(100-Math.max(0,a),n)}%`}})}function uue(e){const t=e.start/24*100,r=e.duration/24*100;return s.jsx("div",{className:"absolute h-1/2 top-1/4 bg-gradient-to-r from-amber-500 to-amber-400 rounded-full opacity-80 shadow-[0_0_10px_rgba(245,158,11,0.3)]",style:{left:`${t}%`,width:`${r}%`}})}var due=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function qC(e){if(typeof e!="string")return!1;var t=due;return t.includes(e)}var fue=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],mue=new Set(fue);function iU(e){return typeof e!="string"?!1:mue.has(e)}function oU(e){return typeof e=="string"&&e.startsWith("data-")}function Sa(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(iU(r)||oU(r))&&(t[r]=e[r]);return t}function Sh(e){if(e==null)return null;if(y.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Sa(t)}return typeof e=="object"&&!Array.isArray(e)?Sa(e):null}function Qs(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(iU(r)||oU(r)||qC(r))&&(t[r]=e[r]);return t}var hue=["children","width","height","viewBox","className","style","title","desc"];function f2(){return f2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f2.apply(null,arguments)}function pue(e,t){if(e==null)return{};var r,n,a=gue(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function gue(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var lU=y.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:i,className:o,style:c,title:d,desc:f}=e,m=pue(e,hue),h=i||{width:n,height:a,x:0,y:0},g=Nt("recharts-surface",o);return y.createElement("svg",f2({},Qs(m),{className:g,width:n,height:a,style:c,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),y.createElement("title",null,d),y.createElement("desc",null,f),r)}),xue=["children","className"];function m2(){return m2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m2.apply(null,arguments)}function yue(e,t){if(e==null)return{};var r,n,a=vue(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function vue(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Mn=y.forwardRef((e,t)=>{var{children:r,className:n}=e,a=yue(e,xue),i=Nt("recharts-layer",n);return y.createElement("g",m2({className:i},Qs(a),{ref:t}),r)}),bue=y.createContext(null);function Lt(e){return function(){return e}}const cU=Math.cos,Ly=Math.sin,Ta=Math.sqrt,$y=Math.PI,gb=2*$y,h2=Math.PI,p2=2*h2,uc=1e-6,wue=p2-uc;function uU(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function jue(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return uU;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class Nue{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?uU:jue(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,c=this._y1,d=n-t,f=a-r,m=o-t,h=c-r,g=m*m+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(g>uc)if(!(Math.abs(h*d-f*m)>uc)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-o,w=a-c,b=d*d+f*f,j=x*x+w*w,N=Math.sqrt(b),_=Math.sqrt(g),S=i*Math.tan((h2-Math.acos((b+g-j)/(2*N*_)))/2),k=S/_,A=S/N;Math.abs(k-1)>uc&&this._append`L${t+k*m},${r+k*h}`,this._append`A${i},${i},0,0,${+(h*x>m*w)},${this._x1=t+A*d},${this._y1=r+A*f}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let c=n*Math.cos(a),d=n*Math.sin(a),f=t+c,m=r+d,h=1^o,g=o?a-i:i-a;this._x1===null?this._append`M${f},${m}`:(Math.abs(this._x1-f)>uc||Math.abs(this._y1-m)>uc)&&this._append`L${f},${m}`,n&&(g<0&&(g=g%p2+p2),g>wue?this._append`A${n},${n},0,1,${h},${t-c},${r-d}A${n},${n},0,1,${h},${this._x1=f},${this._y1=m}`:g>uc&&this._append`A${n},${n},0,${+(g>=h2)},${h},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function VC(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Nue(t)}function KC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function dU(e){this._context=e}dU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function xb(e){return new dU(e)}function fU(e){return e[0]}function mU(e){return e[1]}function hU(e,t){var r=Lt(!0),n=null,a=xb,i=null,o=VC(c);e=typeof e=="function"?e:e===void 0?fU:Lt(e),t=typeof t=="function"?t:t===void 0?mU:Lt(t);function c(d){var f,m=(d=KC(d)).length,h,g=!1,x;for(n==null&&(i=a(x=o())),f=0;f<=m;++f)!(f<m&&r(h=d[f],f,d))===g&&((g=!g)?i.lineStart():i.lineEnd()),g&&i.point(+e(h,f,d),+t(h,f,d));if(x)return i=null,x+""||null}return c.x=function(d){return arguments.length?(e=typeof d=="function"?d:Lt(+d),c):e},c.y=function(d){return arguments.length?(t=typeof d=="function"?d:Lt(+d),c):t},c.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Lt(!!d),c):r},c.curve=function(d){return arguments.length?(a=d,n!=null&&(i=a(n)),c):a},c.context=function(d){return arguments.length?(d==null?n=i=null:i=a(n=d),c):n},c}function vx(e,t,r){var n=null,a=Lt(!0),i=null,o=xb,c=null,d=VC(f);e=typeof e=="function"?e:e===void 0?fU:Lt(+e),t=typeof t=="function"?t:Lt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?mU:Lt(+r);function f(h){var g,x,w,b=(h=KC(h)).length,j,N=!1,_,S=new Array(b),k=new Array(b);for(i==null&&(c=o(_=d())),g=0;g<=b;++g){if(!(g<b&&a(j=h[g],g,h))===N)if(N=!N)x=g,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),w=g-1;w>=x;--w)c.point(S[w],k[w]);c.lineEnd(),c.areaEnd()}N&&(S[g]=+e(j,g,h),k[g]=+t(j,g,h),c.point(n?+n(j,g,h):S[g],r?+r(j,g,h):k[g]))}if(_)return c=null,_+""||null}function m(){return hU().defined(a).curve(o).context(i)}return f.x=function(h){return arguments.length?(e=typeof h=="function"?h:Lt(+h),n=null,f):e},f.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Lt(+h),f):e},f.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Lt(+h),f):n},f.y=function(h){return arguments.length?(t=typeof h=="function"?h:Lt(+h),r=null,f):t},f.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Lt(+h),f):t},f.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Lt(+h),f):r},f.lineX0=f.lineY0=function(){return m().x(e).y(t)},f.lineY1=function(){return m().x(e).y(r)},f.lineX1=function(){return m().x(n).y(t)},f.defined=function(h){return arguments.length?(a=typeof h=="function"?h:Lt(!!h),f):a},f.curve=function(h){return arguments.length?(o=h,i!=null&&(c=o(i)),f):o},f.context=function(h){return arguments.length?(h==null?i=c=null:c=o(i=h),f):i},f}class pU{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Sue(e){return new pU(e,!0)}function _ue(e){return new pU(e,!1)}const HC={draw(e,t){const r=Ta(t/$y);e.moveTo(r,0),e.arc(0,0,r,0,gb)}},Cue={draw(e,t){const r=Ta(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},gU=Ta(1/3),kue=gU*2,Eue={draw(e,t){const r=Ta(t/kue),n=r*gU;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Aue={draw(e,t){const r=Ta(t),n=-r/2;e.rect(n,n,r,r)}},Tue=.8908130915292852,xU=Ly($y/10)/Ly(7*$y/10),Oue=Ly(gb/10)*xU,Pue=-cU(gb/10)*xU,Mue={draw(e,t){const r=Ta(t*Tue),n=Oue*r,a=Pue*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=gb*i/5,c=cU(o),d=Ly(o);e.lineTo(d*r,-c*r),e.lineTo(c*n-d*a,d*n+c*a)}e.closePath()}},Sj=Ta(3),Rue={draw(e,t){const r=-Ta(t/(Sj*3));e.moveTo(0,r*2),e.lineTo(-Sj*r,-r),e.lineTo(Sj*r,-r),e.closePath()}},Rs=-.5,Ds=Ta(3)/2,g2=1/Ta(12),Due=(g2/2+1)*3,Iue={draw(e,t){const r=Ta(t/Due),n=r/2,a=r*g2,i=n,o=r*g2+r,c=-i,d=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(c,d),e.lineTo(Rs*n-Ds*a,Ds*n+Rs*a),e.lineTo(Rs*i-Ds*o,Ds*i+Rs*o),e.lineTo(Rs*c-Ds*d,Ds*c+Rs*d),e.lineTo(Rs*n+Ds*a,Rs*a-Ds*n),e.lineTo(Rs*i+Ds*o,Rs*o-Ds*i),e.lineTo(Rs*c+Ds*d,Rs*d-Ds*c),e.closePath()}};function Lue(e,t){let r=null,n=VC(a);e=typeof e=="function"?e:Lt(e||HC),t=typeof t=="function"?t:Lt(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Lt(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Lt(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function zy(){}function Uy(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function yU(e){this._context=e}yU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Uy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Uy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $ue(e){return new yU(e)}function vU(e){this._context=e}vU.prototype={areaStart:zy,areaEnd:zy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Uy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function zue(e){return new vU(e)}function bU(e){this._context=e}bU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Uy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Uue(e){return new bU(e)}function wU(e){this._context=e}wU.prototype={areaStart:zy,areaEnd:zy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Fue(e){return new wU(e)}function WP(e){return e<0?-1:1}function QP(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),c=(i*a+o*n)/(n+a);return(WP(i)+WP(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(c))||0}function YP(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function _j(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,c=(i-n)/3;e._context.bezierCurveTo(n+c,a+c*t,i-c,o-c*r,i,o)}function Fy(e){this._context=e}Fy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:_j(this,this._t0,YP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,_j(this,YP(this,r=QP(this,e,t)),r);break;default:_j(this,this._t0,r=QP(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function jU(e){this._context=new NU(e)}(jU.prototype=Object.create(Fy.prototype)).point=function(e,t){Fy.prototype.point.call(this,t,e)};function NU(e){this._context=e}NU.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function Bue(e){return new Fy(e)}function que(e){return new jU(e)}function SU(e){this._context=e}SU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=XP(e),a=XP(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function XP(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function Vue(e){return new SU(e)}function yb(e,t){this._context=e,this._t=t}yb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Kue(e){return new yb(e,.5)}function Hue(e){return new yb(e,0)}function Gue(e){return new yb(e,1)}function Dc(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,c=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<c;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function x2(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Wue(e,t){return e[t]}function Que(e){const t=[];return t.key=e,t}function Yue(){var e=Lt([]),t=x2,r=Dc,n=Wue;function a(i){var o=Array.from(e.apply(this,arguments),Que),c,d=o.length,f=-1,m;for(const h of i)for(c=0,++f;c<d;++c)(o[c][f]=[0,+n(h,o[c].key,f,i)]).data=h;for(c=0,m=KC(t(o));c<d;++c)o[m[c]].index=c;return r(o,m),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Lt(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Lt(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?x2:typeof i=="function"?i:Lt(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??Dc,a):r},a}function Xue(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}Dc(e,t)}}function Zue(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,c=0;o<a;++o)c+=e[o][r][1]||0;n[r][1]+=n[r][0]=-c/2}Dc(e,t)}}function Jue(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var c=0,d=0,f=0;c<o;++c){for(var m=e[t[c]],h=m[n][1]||0,g=m[n-1][1]||0,x=(h-g)/2,w=0;w<c;++w){var b=e[t[w]],j=b[n][1]||0,N=b[n-1][1]||0;x+=j-N}d+=h,f+=x*h}a[n-1][1]+=a[n-1][0]=r,d&&(r-=f/d)}a[n-1][1]+=a[n-1][0]=r,Dc(e,t)}}var Cj={},kj={},ZP;function ede(){return ZP||(ZP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(kj)),kj}var Ej={},JP;function _U(){return JP||(JP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Ej)),Ej}var Aj={},eM;function GC(){return eM||(eM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(Aj)),Aj}var Tj={},Oj={},tM;function tde(){return tM||(tM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(Oj)),Oj}var rM;function WC(){return rM||(rM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tde(),r=GC();function n(a){if(Array.isArray(a))return a.map(r.toKey);if(typeof a=="symbol")return[a];a=t.toString(a);const i=[],o=a.length;if(o===0)return i;let c=0,d="",f="",m=!1;for(a.charCodeAt(0)===46&&(i.push(""),c++);c<o;){const h=a[c];f?h==="\\"&&c+1<o?(c++,d+=a[c]):h===f?f="":d+=h:m?h==='"'||h==="'"?f=h:h==="]"?(m=!1,i.push(d),d=""):d+=h:h==="["?(m=!0,d&&(i.push(d),d="")):h==="."?d&&(i.push(d),d=""):d+=h,c++}return d&&i.push(d),i}e.toPath=n})(Tj)),Tj}var nM;function QC(){return nM||(nM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ede(),r=_U(),n=GC(),a=WC();function i(c,d,f){if(c==null)return f;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return f;const m=c[d];return m===void 0?r.isDeepKey(d)?i(c,a.toPath(d),f):f:m}case"number":case"symbol":{typeof d=="number"&&(d=n.toKey(d));const m=c[d];return m===void 0?f:m}default:{if(Array.isArray(d))return o(c,d,f);if(Object.is(d?.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return f;const m=c[d];return m===void 0?f:m}}}function o(c,d,f){if(d.length===0)return f;let m=c;for(let h=0;h<d.length;h++){if(m==null||t.isUnsafeProperty(d[h]))return f;m=m[d[h]]}return m===void 0?f:m}e.get=i})(Cj)),Cj}var Pj,sM;function rde(){return sM||(sM=1,Pj=QC().get),Pj}var nde=rde();const Ic=Ea(nde);var sde=4;function dl(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sde,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function cr(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((a,i,o)=>{var c=r[o-1];return typeof c=="string"?a+c+i:c!==void 0?a+dl(c)+i:a+i},"")}var Yr=e=>e===0?0:e>0?1:-1,ni=e=>typeof e=="number"&&e!=+e,Lc=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Ie=e=>(typeof e=="number"||e instanceof Number)&&!ni(e),si=e=>Ie(e)||typeof e=="string",ade=0,_h=e=>{var t=++ade;return"".concat(e||"").concat(t)},jn=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ie(t)&&typeof t!="string")return n;var i;if(Lc(t)){if(r==null)return n;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return ni(i)&&(i=n),a&&r!=null&&i>r&&(i=r),i},CU=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[String(e[n])])r[String(e[n])]=!0;else return!0;return!1};function $r(e,t,r){return Ie(e)&&Ie(t)?dl(e+r*(t-e)):t}function ide(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Ic(n,t))===r)}var Xr=e=>e===null||typeof e>"u",op=e=>Xr(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function Kn(e){return e!=null}function hf(){}var ode=["type","size","sizeType"];function y2(){return y2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},y2.apply(null,arguments)}function aM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function iM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aM(Object(r),!0).forEach(function(n){lde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lde(e,t,r){return(t=cde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cde(e){var t=ude(e,"string");return typeof t=="symbol"?t:t+""}function ude(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dde(e,t){if(e==null)return{};var r,n,a=fde(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function fde(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var kU={symbolCircle:HC,symbolCross:Cue,symbolDiamond:Eue,symbolSquare:Aue,symbolStar:Mue,symbolTriangle:Rue,symbolWye:Iue},mde=Math.PI/180,hde=e=>{var t="symbol".concat(op(e));return kU[t]||HC},pde=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*mde;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},gde=(e,t)=>{kU["symbol".concat(op(e))]=t},EU=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=dde(e,ode),i=iM(iM({},a),{},{type:t,size:r,sizeType:n}),o="circle";typeof t=="string"&&(o=t);var c=()=>{var g=hde(o),x=Lue().type(g).size(pde(r,n,o)),w=x();if(w!==null)return w},{className:d,cx:f,cy:m}=i,h=Qs(i);return Ie(f)&&Ie(m)&&Ie(r)?y.createElement("path",y2({},h,{className:Nt("recharts-symbols",d),transform:"translate(".concat(f,", ").concat(m,")"),d:c()})):null};EU.registerSymbol=gde;var AU=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,xde=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(y.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{qC(a)&&(n[a]=(i=>r[a](r,i)))}),n},yde=(e,t,r)=>n=>(e(t,r,n),null),vb=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var i=e[a];qC(a)&&typeof i=="function"&&(n||(n={}),n[a]=yde(i,t,r))}),n};function oM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vde(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oM(Object(r),!0).forEach(function(n){bde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bde(e,t,r){return(t=wde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wde(e){var t=jde(e,"string");return typeof t=="symbol"?t:t+""}function jde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sn(e,t){var r=vde({},e),n=t,a=Object.keys(t),i=a.reduce((o,c)=>(o[c]===void 0&&n[c]!==void 0&&(o[c]=n[c]),o),r);return i}var Mj={},Rj={},lM;function Nde(){return lM||(lM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let i=0;i<r.length;i++){const o=r[i],c=n(o,i,r);a.has(c)||a.set(c,o)}return Array.from(a.values())}e.uniqBy=t})(Rj)),Rj}var Dj={},cM;function Sde(){return cM||(cM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return function(...a){return r.apply(this,a.slice(0,n))}}e.ary=t})(Dj)),Dj}var Ij={},uM;function TU(){return uM||(uM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Ij)),Ij}var Lj={},$j={},zj={},dM;function _de(){return dM||(dM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(zj)),zj}var fM;function YC(){return fM||(fM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_de();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})($j)),$j}var Uj={},mM;function Cde(){return mM||(mM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Uj)),Uj}var hM;function kde(){return hM||(hM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YC(),r=Cde();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n})(Lj)),Lj}var Fj={},Bj={},pM;function Ede(){return pM||(pM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QC();function r(n){return function(a){return t.get(a,n)}}e.property=r})(Bj)),Bj}var qj={},Vj={},Kj={},Hj={},gM;function OU(){return gM||(gM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Hj)),Hj}var Gj={},xM;function PU(){return xM||(xM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Gj)),Gj}var Wj={},yM;function MU(){return yM||(yM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.isEqualsSameValueZero=t})(Wj)),Wj}var vM;function Ade(){return vM||(vM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OU(),r=PU(),n=MU();function a(m,h,g){return typeof g!="function"?a(m,h,()=>{}):i(m,h,function x(w,b,j,N,_,S){const k=g(w,b,j,N,_,S);return k!==void 0?!!k:i(w,b,x,S)},new Map)}function i(m,h,g,x){if(h===m)return!0;switch(typeof h){case"object":return o(m,h,g,x);case"function":return Object.keys(h).length>0?i(m,{...h},g,x):n.isEqualsSameValueZero(m,h);default:return t.isObject(m)?typeof h=="string"?h==="":!0:n.isEqualsSameValueZero(m,h)}}function o(m,h,g,x){if(h==null)return!0;if(Array.isArray(h))return d(m,h,g,x);if(h instanceof Map)return c(m,h,g,x);if(h instanceof Set)return f(m,h,g,x);const w=Object.keys(h);if(m==null||r.isPrimitive(m))return w.length===0;if(w.length===0)return!0;if(x?.has(h))return x.get(h)===m;x?.set(h,m);try{for(let b=0;b<w.length;b++){const j=w[b];if(!r.isPrimitive(m)&&!(j in m)||h[j]===void 0&&m[j]!==void 0||h[j]===null&&m[j]!==null||!g(m[j],h[j],j,m,h,x))return!1}return!0}finally{x?.delete(h)}}function c(m,h,g,x){if(h.size===0)return!0;if(!(m instanceof Map))return!1;for(const[w,b]of h.entries()){const j=m.get(w);if(g(j,b,w,m,h,x)===!1)return!1}return!0}function d(m,h,g,x){if(h.length===0)return!0;if(!Array.isArray(m))return!1;const w=new Set;for(let b=0;b<h.length;b++){const j=h[b];let N=!1;for(let _=0;_<m.length;_++){if(w.has(_))continue;const S=m[_];let k=!1;if(g(S,j,b,m,h,x)&&(k=!0),k){w.add(_),N=!0;break}}if(!N)return!1}return!0}function f(m,h,g,x){return h.size===0?!0:m instanceof Set?d([...m],[...h],g,x):!1}e.isMatchWith=a,e.isSetMatch=f})(Kj)),Kj}var bM;function RU(){return bM||(bM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ade();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r})(Vj)),Vj}var Qj={},Yj={},Xj={},wM;function Tde(){return wM||(wM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Xj)),Xj}var Zj={},jM;function XC(){return jM||(jM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Zj)),Zj}var Jj={},NM;function DU(){return NM||(NM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",i="[object Arguments]",o="[object Symbol]",c="[object Date]",d="[object Map]",f="[object Set]",m="[object Array]",h="[object Function]",g="[object ArrayBuffer]",x="[object Object]",w="[object Error]",b="[object DataView]",j="[object Uint8Array]",N="[object Uint8ClampedArray]",_="[object Uint16Array]",S="[object Uint32Array]",k="[object BigUint64Array]",A="[object Int8Array]",T="[object Int16Array]",O="[object Int32Array]",P="[object BigInt64Array]",R="[object Float32Array]",M="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=g,e.arrayTag=m,e.bigInt64ArrayTag=P,e.bigUint64ArrayTag=k,e.booleanTag=a,e.dataViewTag=b,e.dateTag=c,e.errorTag=w,e.float32ArrayTag=R,e.float64ArrayTag=M,e.functionTag=h,e.int16ArrayTag=T,e.int32ArrayTag=O,e.int8ArrayTag=A,e.mapTag=d,e.numberTag=n,e.objectTag=x,e.regexpTag=t,e.setTag=f,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=_,e.uint32ArrayTag=S,e.uint8ArrayTag=j,e.uint8ClampedArrayTag=N})(Jj)),Jj}var eN={},SM;function Ode(){return SM||(SM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(eN)),eN}var _M;function IU(){return _M||(_M=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tde(),r=XC(),n=DU(),a=PU(),i=Ode();function o(m,h){return c(m,void 0,m,new Map,h)}function c(m,h,g,x=new Map,w=void 0){const b=w?.(m,h,g,x);if(b!==void 0)return b;if(a.isPrimitive(m))return m;if(x.has(m))return x.get(m);if(Array.isArray(m)){const j=new Array(m.length);x.set(m,j);for(let N=0;N<m.length;N++)j[N]=c(m[N],N,g,x,w);return Object.hasOwn(m,"index")&&(j.index=m.index),Object.hasOwn(m,"input")&&(j.input=m.input),j}if(m instanceof Date)return new Date(m.getTime());if(m instanceof RegExp){const j=new RegExp(m.source,m.flags);return j.lastIndex=m.lastIndex,j}if(m instanceof Map){const j=new Map;x.set(m,j);for(const[N,_]of m)j.set(N,c(_,N,g,x,w));return j}if(m instanceof Set){const j=new Set;x.set(m,j);for(const N of m)j.add(c(N,void 0,g,x,w));return j}if(typeof Buffer<"u"&&Buffer.isBuffer(m))return m.subarray();if(i.isTypedArray(m)){const j=new(Object.getPrototypeOf(m)).constructor(m.length);x.set(m,j);for(let N=0;N<m.length;N++)j[N]=c(m[N],N,g,x,w);return j}if(m instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&m instanceof SharedArrayBuffer)return m.slice(0);if(m instanceof DataView){const j=new DataView(m.buffer.slice(0),m.byteOffset,m.byteLength);return x.set(m,j),d(j,m,g,x,w),j}if(typeof File<"u"&&m instanceof File){const j=new File([m],m.name,{type:m.type});return x.set(m,j),d(j,m,g,x,w),j}if(typeof Blob<"u"&&m instanceof Blob){const j=new Blob([m],{type:m.type});return x.set(m,j),d(j,m,g,x,w),j}if(m instanceof Error){const j=new m.constructor;return x.set(m,j),j.message=m.message,j.name=m.name,j.stack=m.stack,j.cause=m.cause,d(j,m,g,x,w),j}if(m instanceof Boolean){const j=new Boolean(m.valueOf());return x.set(m,j),d(j,m,g,x,w),j}if(m instanceof Number){const j=new Number(m.valueOf());return x.set(m,j),d(j,m,g,x,w),j}if(m instanceof String){const j=new String(m.valueOf());return x.set(m,j),d(j,m,g,x,w),j}if(typeof m=="object"&&f(m)){const j=Object.create(Object.getPrototypeOf(m));return x.set(m,j),d(j,m,g,x,w),j}return m}function d(m,h,g=m,x,w){const b=[...Object.keys(h),...t.getSymbols(h)];for(let j=0;j<b.length;j++){const N=b[j],_=Object.getOwnPropertyDescriptor(m,N);(_==null||_.writable)&&(m[N]=c(h[N],N,g,x,w))}}function f(m){switch(r.getTag(m)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=c,e.copyProperties=d})(Yj)),Yj}var CM;function Pde(){return CM||(CM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IU();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Qj)),Qj}var kM;function Mde(){return kM||(kM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RU(),r=Pde();function n(a){return a=r.cloneDeep(a),i=>t.isMatch(i,a)}e.matches=n})(qj)),qj}var tN={},rN={},nN={},EM;function Rde(){return EM||(EM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IU(),r=XC(),n=DU();function a(i,o){return t.cloneDeepWith(i,(c,d,f,m)=>{const h=o?.(c,d,f,m);if(h!==void 0)return h;if(typeof i=="object"){if(r.getTag(i)===n.objectTag&&typeof i.constructor!="function"){const g={};return m.set(i,g),t.copyProperties(g,i,f,m),g}switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const g=new i.constructor(i?.valueOf());return t.copyProperties(g,i),g}case n.argumentsTag:{const g={};return t.copyProperties(g,i),g.length=i.length,g[Symbol.iterator]=i[Symbol.iterator],g}default:return}}})}e.cloneDeepWith=a})(nN)),nN}var AM;function Dde(){return AM||(AM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Rde();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(rN)),rN}var sN={},aN={},TM;function LU(){return TM||(TM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(aN)),aN}var iN={},OM;function Ide(){return OM||(OM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XC();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(iN)),iN}var PM;function Lde(){return PM||(PM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_U(),r=LU(),n=Ide(),a=WC();function i(o,c){let d;if(Array.isArray(c)?d=c:typeof c=="string"&&t.isDeepKey(c)&&o?.[c]==null?d=a.toPath(c):d=[c],d.length===0)return!1;let f=o;for(let m=0;m<d.length;m++){const h=d[m];if((f==null||!Object.hasOwn(f,h))&&!((Array.isArray(f)||n.isArguments(f))&&r.isIndex(h)&&h<f.length))return!1;f=f[h]}return!0}e.has=i})(sN)),sN}var MM;function $de(){return MM||(MM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RU(),r=GC(),n=Dde(),a=QC(),i=Lde();function o(c,d){switch(typeof c){case"object":{Object.is(c?.valueOf(),-0)&&(c="-0");break}case"number":{c=r.toKey(c);break}}return d=n.cloneDeep(d),function(f){const m=a.get(f,c);return m===void 0?i.has(f,c):d===void 0?m===void 0:t.isMatch(m,d)}}e.matchesProperty=o})(tN)),tN}var RM;function zde(){return RM||(RM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TU(),r=Ede(),n=Mde(),a=$de();function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i})(Fj)),Fj}var DM;function Ude(){return DM||(DM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nde(),r=Sde(),n=TU(),a=kde(),i=zde();function o(c,d=n.identity){return a.isArrayLikeObject(c)?t.uniqBy(Array.from(c),r.ary(i.iteratee(d),1)):[]}e.uniqBy=o})(Mj)),Mj}var oN,IM;function Fde(){return IM||(IM=1,oN=Ude().uniqBy),oN}var Bde=Fde();const LM=Ea(Bde);function qde(e,t,r){return t===!0?LM(e,r):typeof t=="function"?LM(e,t):e}var lN={exports:{}},cN={},uN={exports:{}},dN={};var $M;function Vde(){if($M)return dN;$M=1;var e=ef();function t(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function c(h,g){var x=g(),w=n({inst:{value:x,getSnapshot:g}}),b=w[0].inst,j=w[1];return i(function(){b.value=x,b.getSnapshot=g,d(b)&&j({inst:b})},[h,x,g]),a(function(){return d(b)&&j({inst:b}),h(function(){d(b)&&j({inst:b})})},[h]),o(x),x}function d(h){var g=h.getSnapshot;h=h.value;try{var x=g();return!r(h,x)}catch{return!0}}function f(h,g){return g()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:c;return dN.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,dN}var zM;function Kde(){return zM||(zM=1,uN.exports=Vde()),uN.exports}var UM;function Hde(){if(UM)return cN;UM=1;var e=ef(),t=Kde();function r(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,c=e.useMemo,d=e.useDebugValue;return cN.useSyncExternalStoreWithSelector=function(f,m,h,g,x){var w=i(null);if(w.current===null){var b={hasValue:!1,value:null};w.current=b}else b=w.current;w=c(function(){function N(T){if(!_){if(_=!0,S=T,T=g(T),x!==void 0&&b.hasValue){var O=b.value;if(x(O,T))return k=O}return k=T}if(O=k,n(S,T))return O;var P=g(T);return x!==void 0&&x(O,P)?(S=T,O):(S=T,k=P)}var _=!1,S,k,A=h===void 0?null:h;return[function(){return N(m())},A===null?void 0:function(){return N(A())}]},[m,h,g,x]);var j=a(f,w[0],w[1]);return o(function(){b.hasValue=!0,b.value=j},[j]),d(j),j},cN}var FM;function Gde(){return FM||(FM=1,lN.exports=Hde()),lN.exports}var $U=Gde();const Wde=Ea($U);var ZC=y.createContext(null),Qde=e=>e,Xt=()=>{var e=y.useContext(ZC);return e?e.store.dispatch:Qde},ay=()=>{},Yde=()=>ay,Xde=(e,t)=>e===t;function Ue(e){var t=y.useContext(ZC),r=y.useMemo(()=>t?n=>{if(n!=null)return e(n)}:ay,[t,e]);return $U.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Yde,t?t.store.getState:ay,t?t.store.getState:ay,r,Xde)}function Zde(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Jde(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function efe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var BM=e=>Array.isArray(e)?e:[e];function tfe(e){const t=Array.isArray(e[0])?e[0]:e;return efe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function rfe(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var nfe=class{constructor(e){this.value=e}deref(){return this.value}},sfe=typeof WeakRef<"u"?WeakRef:nfe,afe=0,qM=1;function bx(){return{s:afe,v:void 0,o:null,p:null}}function zU(e,t={}){let r=bx();const{resultEqualityCheck:n}=t;let a,i=0;function o(){let c=r;const{length:d}=arguments;for(let h=0,g=d;h<g;h++){const x=arguments[h];if(typeof x=="function"||typeof x=="object"&&x!==null){let w=c.o;w===null&&(c.o=w=new WeakMap);const b=w.get(x);b===void 0?(c=bx(),w.set(x,c)):c=b}else{let w=c.p;w===null&&(c.p=w=new Map);const b=w.get(x);b===void 0?(c=bx(),w.set(x,c)):c=b}}const f=c;let m;if(c.s===qM)m=c.v;else if(m=e.apply(null,arguments),i++,n){const h=a?.deref?.()??a;h!=null&&n(h,m)&&(m=h,i!==0&&i--),a=typeof m=="object"&&m!==null||typeof m=="function"?new sfe(m):m}return f.s=qM,f.v=m,m}return o.clearCache=()=>{r=bx(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function ife(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let i=0,o=0,c,d={},f=a.pop();typeof f=="object"&&(d=f,f=a.pop()),Zde(f,`createSelector expects an output function after the inputs, but received: [${typeof f}]`);const m={...r,...d},{memoize:h,memoizeOptions:g=[],argsMemoize:x=zU,argsMemoizeOptions:w=[]}=m,b=BM(g),j=BM(w),N=tfe(a),_=h(function(){return i++,f.apply(null,arguments)},...b),S=x(function(){o++;const A=rfe(N,arguments);return c=_.apply(null,A),c},...j);return Object.assign(S,{resultFunc:f,memoizedResultFunc:_,dependencies:N,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>c,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:x})};return Object.assign(n,{withTypes:()=>n}),n}var fe=ife(zU),ofe=Object.assign((e,t=fe)=>{Jde(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((o,c,d)=>(o[r[d]]=c,o),{}))},{withTypes:()=>ofe}),fN={},mN={},hN={},VM;function lfe(){return VM||(VM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,i)=>{if(n!==a){const o=t(n),c=t(a);if(o===c&&o===0){if(n<a)return i==="desc"?1:-1;if(n>a)return i==="desc"?-1:1}return i==="desc"?c-o:o-c}return 0};e.compareValues=r})(hN)),hN}var pN={},gN={},KM;function UU(){return KM||(KM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(gN)),gN}var HM;function cfe(){return HM||(HM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UU(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=a})(pN)),pN}var GM;function ufe(){return GM||(GM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lfe(),r=cfe(),n=WC();function a(i,o,c,d){if(i==null)return[];c=d?void 0:c,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(x=>String(x));const f=(x,w)=>{let b=x;for(let j=0;j<w.length&&b!=null;++j)b=b[w[j]];return b},m=(x,w)=>w==null||x==null?w:typeof x=="object"&&"key"in x?Object.hasOwn(w,x.key)?w[x.key]:f(w,x.path):typeof x=="function"?x(w):Array.isArray(x)?f(w,x):typeof w=="object"?w[x]:w,h=o.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:n.toPath(x)}));return i.map(x=>({original:x,criteria:h.map(w=>m(w,x))})).slice().sort((x,w)=>{for(let b=0;b<h.length;b++){const j=t.compareValues(x.criteria[b],w.criteria[b],c[b]);if(j!==0)return j}return 0}).map(x=>x.original)}e.orderBy=a})(mN)),mN}var xN={},WM;function dfe(){return WM||(WM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],i=Math.floor(n),o=(c,d)=>{for(let f=0;f<c.length;f++){const m=c[f];Array.isArray(m)&&d<i?o(m,d+1):a.push(m)}};return o(r,0),a}e.flatten=t})(xN)),xN}var yN={},QM;function FU(){return QM||(QM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LU(),r=YC(),n=OU(),a=MU();function i(o,c,d){return n.isObject(d)&&(typeof c=="number"&&r.isArrayLike(d)&&t.isIndex(c)&&c<d.length||typeof c=="string"&&c in d)?a.isEqualsSameValueZero(d[c],o):!1}e.isIterateeCall=i})(yN)),yN}var YM;function ffe(){return YM||(YM=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ufe(),r=dfe(),n=FU();function a(i,...o){const c=o.length;return c>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:c>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=a})(fN)),fN}var vN,XM;function mfe(){return XM||(XM=1,vN=ffe().sortBy),vN}var hfe=mfe();const bb=Ea(hfe);var BU=e=>e.legend.settings,pfe=e=>e.legend.size,gfe=e=>e.legend.payload;fe([gfe,BU],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?bb(n,r):n});var wx=1;function xfe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=y.useState({height:0,left:0,top:0,width:0}),n=y.useCallback(a=>{if(a!=null){var i=a.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>wx||Math.abs(o.left-t.left)>wx||Math.abs(o.top-t.top)>wx||Math.abs(o.width-t.width)>wx)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function on(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var yfe=typeof Symbol=="function"&&Symbol.observable||"@@observable",ZM=yfe,bN=()=>Math.random().toString(36).substring(7).split("").join("."),vfe={INIT:`@@redux/INIT${bN()}`,REPLACE:`@@redux/REPLACE${bN()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${bN()}`},By=vfe;function JC(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function qU(e,t,r){if(typeof e!="function")throw new Error(on(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(on(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(on(1));return r(qU)(e,t)}let n=e,a=t,i=new Map,o=i,c=0,d=!1;function f(){o===i&&(o=new Map,i.forEach((j,N)=>{o.set(N,j)}))}function m(){if(d)throw new Error(on(3));return a}function h(j){if(typeof j!="function")throw new Error(on(4));if(d)throw new Error(on(5));let N=!0;f();const _=c++;return o.set(_,j),function(){if(N){if(d)throw new Error(on(6));N=!1,f(),o.delete(_),i=null}}}function g(j){if(!JC(j))throw new Error(on(7));if(typeof j.type>"u")throw new Error(on(8));if(typeof j.type!="string")throw new Error(on(17));if(d)throw new Error(on(9));try{d=!0,a=n(a,j)}finally{d=!1}return(i=o).forEach(_=>{_()}),j}function x(j){if(typeof j!="function")throw new Error(on(10));n=j,g({type:By.REPLACE})}function w(){const j=h;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error(on(11));function _(){const k=N;k.next&&k.next(m())}return _(),{unsubscribe:j(_)}},[ZM](){return this}}}return g({type:By.INIT}),{dispatch:g,subscribe:h,getState:m,replaceReducer:x,[ZM]:w}}function bfe(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:By.INIT})>"u")throw new Error(on(12));if(typeof r(void 0,{type:By.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(on(13))})}function VU(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let a;try{bfe(r)}catch(i){a=i}return function(o={},c){if(a)throw a;let d=!1;const f={};for(let m=0;m<n.length;m++){const h=n[m],g=r[h],x=o[h],w=g(x,c);if(typeof w>"u")throw c&&c.type,new Error(on(14));f[h]=w,d=d||w!==x}return d=d||n.length!==Object.keys(o).length,d?f:o}}function qy(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function wfe(...e){return t=>(r,n)=>{const a=t(r,n);let i=()=>{throw new Error(on(15))};const o={getState:a.getState,dispatch:(d,...f)=>i(d,...f)},c=e.map(d=>d(o));return i=qy(...c)(a.dispatch),{...a,dispatch:i}}}function KU(e){return JC(e)&&"type"in e&&typeof e.type=="string"}var HU=Symbol.for("immer-nothing"),JM=Symbol.for("immer-draftable"),Rn=Symbol.for("immer-state");function da(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var us=Object,$d=us.getPrototypeOf,Vy="constructor",wb="prototype",v2="configurable",Ky="enumerable",iy="writable",Ch="value",Ji=e=>!!e&&!!e[Rn];function _a(e){return e?GU(e)||Nb(e)||!!e[JM]||!!e[Vy]?.[JM]||Sb(e)||_b(e):!1}var jfe=us[wb][Vy].toString(),eR=new WeakMap;function GU(e){if(!e||!ek(e))return!1;const t=$d(e);if(t===null||t===us[wb])return!0;const r=us.hasOwnProperty.call(t,Vy)&&t[Vy];if(r===Object)return!0;if(!md(r))return!1;let n=eR.get(r);return n===void 0&&(n=Function.toString.call(r),eR.set(r,n)),n===jfe}function jb(e,t,r=!0){lp(e)===0?(r?Reflect.ownKeys(e):us.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function lp(e){const t=e[Rn];return t?t.type_:Nb(e)?1:Sb(e)?2:_b(e)?3:0}var tR=(e,t,r=lp(e))=>r===2?e.has(t):us[wb].hasOwnProperty.call(e,t),b2=(e,t,r=lp(e))=>r===2?e.get(t):e[t],Hy=(e,t,r,n=lp(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function Nfe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Nb=Array.isArray,Sb=e=>e instanceof Map,_b=e=>e instanceof Set,ek=e=>typeof e=="object",md=e=>typeof e=="function",wN=e=>typeof e=="boolean";function Sfe(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var $i=e=>e.copy_||e.base_,tk=e=>e.modified_?e.copy_:e.base_;function w2(e,t){if(Sb(e))return new Map(e);if(_b(e))return new Set(e);if(Nb(e))return Array[wb].slice.call(e);const r=GU(e);if(t===!0||t==="class_only"&&!r){const n=us.getOwnPropertyDescriptors(e);delete n[Rn];let a=Reflect.ownKeys(n);for(let i=0;i<a.length;i++){const o=a[i],c=n[o];c[iy]===!1&&(c[iy]=!0,c[v2]=!0),(c.get||c.set)&&(n[o]={[v2]:!0,[iy]:!0,[Ky]:c[Ky],[Ch]:e[o]})}return us.create($d(e),n)}else{const n=$d(e);if(n!==null&&r)return{...e};const a=us.create(n);return us.assign(a,e)}}function rk(e,t=!1){return Cb(e)||Ji(e)||!_a(e)||(lp(e)>1&&us.defineProperties(e,{set:jx,add:jx,clear:jx,delete:jx}),us.freeze(e),t&&jb(e,(r,n)=>{rk(n,!0)},!1)),e}function _fe(){da(2)}var jx={[Ch]:_fe};function Cb(e){return e===null||!ek(e)?!0:us.isFrozen(e)}var Gy="MapSet",j2="Patches",rR="ArrayMethods",WU={};function $c(e){const t=WU[e];return t||da(0,e),t}var nR=e=>!!WU[e],kh,QU=()=>kh,Cfe=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:nR(Gy)?$c(Gy):void 0,arrayMethodsPlugin_:nR(rR)?$c(rR):void 0});function sR(e,t){t&&(e.patchPlugin_=$c(j2),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function N2(e){S2(e),e.drafts_.forEach(kfe),e.drafts_=null}function S2(e){e===kh&&(kh=e.parent_)}var aR=e=>kh=Cfe(kh,e);function kfe(e){const t=e[Rn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function iR(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[Rn].modified_&&(N2(t),da(4)),_a(e)&&(e=oR(t,e));const{patchPlugin_:a}=t;a&&a.generateReplacementPatches_(r[Rn].base_,e,t)}else e=oR(t,r);return Efe(t,e,!0),N2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==HU?e:void 0}function oR(e,t){if(Cb(t))return t;const r=t[Rn];if(!r)return Wy(t,e.handledSet_,e);if(!kb(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);ZU(r,e)}return r.copy_}function Efe(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&rk(t,r)}function YU(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var kb=(e,t)=>e.scope_===t,Afe=[];function XU(e,t,r,n){const a=$i(e),i=e.type_;if(n!==void 0&&b2(a,n,i)===t){Hy(a,n,r,i);return}if(!e.draftLocations_){const c=e.draftLocations_=new Map;jb(a,(d,f)=>{if(Ji(f)){const m=c.get(f)||[];m.push(d),c.set(f,m)}})}const o=e.draftLocations_.get(t)??Afe;for(const c of o)Hy(a,c,r,i)}function Tfe(e,t,r){e.callbacks_.push(function(a){const i=t;if(!i||!kb(i,a))return;a.mapSetPlugin_?.fixSetContents(i);const o=tk(i);XU(e,i.draft_??i,o,r),ZU(i,a)})}function ZU(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:n}=t;if(n){const a=n.getPath(e);a&&n.generatePatches_(e,a,t)}YU(e)}}function Ofe(e,t,r){const{scope_:n}=e;if(Ji(r)){const a=r[Rn];kb(a,n)&&a.callbacks_.push(function(){oy(e);const o=tk(a);XU(e,r,o,t)})}else _a(r)&&e.callbacks_.push(function(){const i=$i(e);e.type_===3?i.has(r)&&Wy(r,n.handledSet_,n):b2(i,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Wy(b2(e.copy_,t,e.type_),n.handledSet_,n)})}function Wy(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||Ji(e)||t.has(e)||!_a(e)||Cb(e)||(t.add(e),jb(e,(n,a)=>{if(Ji(a)){const i=a[Rn];if(kb(i,r)){const o=tk(i);Hy(e,n,o,e.type_),YU(i)}}else _a(a)&&Wy(a,t,r)})),e}function Pfe(e,t){const r=Nb(e),n={type_:r?1:0,scope_:t?t.scope_:QU(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let a=n,i=Qy;r&&(a=[n],i=Eh);const{revoke:o,proxy:c}=Proxy.revocable(a,i);return n.draft_=c,n.revoke_=o,[c,n]}var Qy={get(e,t){if(t===Rn)return e;let r=e.scope_.arrayMethodsPlugin_;const n=e.type_===1&&typeof t=="string";if(n&&r?.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const a=$i(e);if(!tR(a,t,e.type_))return Mfe(e,a,t);const i=a[t];if(e.finalized_||!_a(i)||n&&e.operationMethod&&r?.isMutatingArrayMethod(e.operationMethod)&&Sfe(t))return i;if(i===jN(e.base_,t)){oy(e);const o=e.type_===1?+t:t,c=C2(e.scope_,i,e,o);return e.copy_[o]=c}return i},has(e,t){return t in $i(e)},ownKeys(e){return Reflect.ownKeys($i(e))},set(e,t,r){const n=JU($i(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=jN($i(e),t),i=a?.[Rn];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(Nfe(r,a)&&(r!==void 0||tR(e.base_,t,e.type_)))return!0;oy(e),_2(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),Ofe(e,t,r)),!0},deleteProperty(e,t){return oy(e),jN(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),_2(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=$i(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[iy]:!0,[v2]:e.type_!==1||t!=="length",[Ky]:n[Ky],[Ch]:r[t]}},defineProperty(){da(11)},getPrototypeOf(e){return $d(e.base_)},setPrototypeOf(){da(12)}},Eh={};for(let e in Qy){let t=Qy[e];Eh[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}}Eh.deleteProperty=function(e,t){return Eh.set.call(this,e,t,void 0)};Eh.set=function(e,t,r){return Qy.set.call(this,e[0],t,r,e[0])};function jN(e,t){const r=e[Rn];return(r?$i(r):e)[t]}function Mfe(e,t,r){const n=JU(t,r);return n?Ch in n?n[Ch]:n.get?.call(e.draft_):void 0}function JU(e,t){if(!(t in e))return;let r=$d(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=$d(r)}}function _2(e){e.modified_||(e.modified_=!0,e.parent_&&_2(e.parent_))}function oy(e){e.copy_||(e.assigned_=new Map,e.copy_=w2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Rfe=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,a)=>{if(md(r)&&!md(n)){const o=n;n=r;const c=this;return function(f=o,...m){return c.produce(f,h=>n.call(this,h,...m))}}md(n)||da(6),a!==void 0&&!md(a)&&da(7);let i;if(_a(r)){const o=aR(this),c=C2(o,r,void 0);let d=!0;try{i=n(c),d=!1}finally{d?N2(o):S2(o)}return sR(o,a),iR(i,o)}else if(!r||!ek(r)){if(i=n(r),i===void 0&&(i=r),i===HU&&(i=void 0),this.autoFreeze_&&rk(i,!0),a){const o=[],c=[];$c(j2).generateReplacementPatches_(r,i,{patches_:o,inversePatches_:c}),a(o,c)}return i}else da(1,r)},this.produceWithPatches=(r,n)=>{if(md(r))return(c,...d)=>this.produceWithPatches(c,f=>r(f,...d));let a,i;return[this.produce(r,n,(c,d)=>{a=c,i=d}),a,i]},wN(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),wN(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),wN(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){_a(t)||da(8),Ji(t)&&(t=xa(t));const r=aR(this),n=C2(r,t,void 0);return n[Rn].isManual_=!0,S2(r),n}finishDraft(t,r){const n=t&&t[Rn];(!n||!n.isManual_)&&da(9);const{scope_:a}=n;return sR(a,r),iR(void 0,a)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const i=r[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(r=r.slice(n+1));const a=$c(j2).applyPatches_;return Ji(t)?a(t,r):this.produce(t,i=>a(i,r))}};function C2(e,t,r,n){const[a,i]=Sb(t)?$c(Gy).proxyMap_(t,r):_b(t)?$c(Gy).proxySet_(t,r):Pfe(t,r);return(r?.scope_??QU()).drafts_.push(a),i.callbacks_=r?.callbacks_??[],i.key_=n,r&&n!==void 0?Tfe(r,i,n):i.callbacks_.push(function(d){d.mapSetPlugin_?.fixSetContents(i);const{patchPlugin_:f}=d;i.modified_&&f&&f.generatePatches_(i,[],d)}),a}function xa(e){return Ji(e)||da(10,e),eF(e)}function eF(e){if(!_a(e)||Cb(e))return e;const t=e[Rn];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=w2(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=w2(e,!0);return jb(r,(a,i)=>{Hy(r,a,eF(i))},n),t&&(t.finalized_=!1),r}var Dfe=new Rfe,tF=Dfe.produce;function rF(e){return({dispatch:r,getState:n})=>a=>i=>typeof i=="function"?i(r,n,e):a(i)}var Ife=rF(),Lfe=rF,$fe=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?qy:qy.apply(null,arguments)};function Ys(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(hs(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>KU(n)&&n.type===e,r}var nF=class Hm extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Hm.prototype)}static get[Symbol.species](){return Hm}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Hm(...t[0].concat(this)):new Hm(...t.concat(this))}};function lR(e){return _a(e)?tF(e,()=>{}):e}function Nx(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function zfe(e){return typeof e=="boolean"}var Ufe=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=t??{};let o=new nF;return r&&(zfe(r)?o.push(Ife):o.push(Lfe(r.extraArgument))),o},sF="RTK_autoBatch",Kt=()=>e=>({payload:e,meta:{[sF]:!0}}),cR=e=>t=>{setTimeout(t,e)},aF=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,i=!1,o=!1;const c=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:cR(10):e.type==="callback"?e.queueNotification:cR(e.timeout),f=()=>{o=!1,i&&(i=!1,c.forEach(m=>m()))};return Object.assign({},n,{subscribe(m){const h=()=>a&&m(),g=n.subscribe(h);return c.add(m),()=>{g(),c.delete(m)}},dispatch(m){try{return a=!m?.meta?.[sF],i=!a,i&&(o||(o=!0,d(f))),n.dispatch(m)}finally{a=!0}}})},Ffe=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new nF(e);return n&&a.push(aF(typeof n=="object"?n:void 0)),a};function Bfe(e){const t=Ufe(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let c;if(typeof r=="function")c=r;else if(JC(r))c=VU(r);else throw new Error(hs(1));let d;typeof n=="function"?d=n(t):d=t();let f=qy;a&&(f=$fe({trace:!1,...typeof a=="object"&&a}));const m=wfe(...d),h=Ffe(m);let g=typeof o=="function"?o(h):h();const x=f(...g);return qU(c,i,x)}function iF(e){const t={},r=[];let n;const a={addCase(i,o){const c=typeof i=="string"?i:i.type;if(!c)throw new Error(hs(28));if(c in t)throw new Error(hs(29));return t[c]=o,a},addAsyncThunk(i,o){return o.pending&&(t[i.pending.type]=o.pending),o.rejected&&(t[i.rejected.type]=o.rejected),o.fulfilled&&(t[i.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:i.settled,reducer:o.settled}),a},addMatcher(i,o){return r.push({matcher:i,reducer:o}),a},addDefaultCase(i){return n=i,a}};return e(a),[t,r,n]}function qfe(e){return typeof e=="function"}function Vfe(e,t){let[r,n,a]=iF(t),i;if(qfe(e))i=()=>lR(e());else{const c=lR(e);i=()=>c}function o(c=i(),d){let f=[r[d.type],...n.filter(({matcher:m})=>m(d)).map(({reducer:m})=>m)];return f.filter(m=>!!m).length===0&&(f=[a]),f.reduce((m,h)=>{if(h)if(Ji(m)){const x=h(m,d);return x===void 0?m:x}else{if(_a(m))return tF(m,g=>h(g,d));{const g=h(m,d);if(g===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return m},c)}return o.getInitialState=i,o}var Kfe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Hfe=(e=21)=>{let t="",r=e;for(;r--;)t+=Kfe[Math.random()*64|0];return t},Gfe=Symbol.for("rtk-slice-createasyncthunk");function Wfe(e,t){return`${e}/${t}`}function Qfe({creators:e}={}){const t=e?.asyncThunk?.[Gfe];return function(n){const{name:a,reducerPath:i=a}=n;if(!a)throw new Error(hs(11));const o=(typeof n.reducers=="function"?n.reducers(Xfe()):n.reducers)||{},c=Object.keys(o),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(S,k){const A=typeof S=="string"?S:S.type;if(!A)throw new Error(hs(12));if(A in d.sliceCaseReducersByType)throw new Error(hs(13));return d.sliceCaseReducersByType[A]=k,f},addMatcher(S,k){return d.sliceMatchers.push({matcher:S,reducer:k}),f},exposeAction(S,k){return d.actionCreators[S]=k,f},exposeCaseReducer(S,k){return d.sliceCaseReducersByName[S]=k,f}};c.forEach(S=>{const k=o[S],A={reducerName:S,type:Wfe(a,S),createNotation:typeof n.reducers=="function"};Jfe(k)?tme(A,k,f,t):Zfe(A,k,f)});function m(){const[S={},k=[],A=void 0]=typeof n.extraReducers=="function"?iF(n.extraReducers):[n.extraReducers],T={...S,...d.sliceCaseReducersByType};return Vfe(n.initialState,O=>{for(let P in T)O.addCase(P,T[P]);for(let P of d.sliceMatchers)O.addMatcher(P.matcher,P.reducer);for(let P of k)O.addMatcher(P.matcher,P.reducer);A&&O.addDefaultCase(A)})}const h=S=>S,g=new Map,x=new WeakMap;let w;function b(S,k){return w||(w=m()),w(S,k)}function j(){return w||(w=m()),w.getInitialState()}function N(S,k=!1){function A(O){let P=O[S];return typeof P>"u"&&k&&(P=Nx(x,A,j)),P}function T(O=h){const P=Nx(g,k,()=>new WeakMap);return Nx(P,O,()=>{const R={};for(const[M,D]of Object.entries(n.selectors??{}))R[M]=Yfe(D,O,()=>Nx(x,O,j),k);return R})}return{reducerPath:S,getSelectors:T,get selectors(){return T(A)},selectSlice:A}}const _={name:a,reducer:b,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:j,...N(i),injectInto(S,{reducerPath:k,...A}={}){const T=k??i;return S.inject({reducerPath:T,reducer:b},A),{..._,...N(T,!0)}}};return _}}function Yfe(e,t,r,n){function a(i,...o){let c=t(i);return typeof c>"u"&&n&&(c=r()),e(c,...o)}return a.unwrapped=e,a}var Yn=Qfe();function Xfe(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Zfe({type:e,reducerName:t,createNotation:r},n,a){let i,o;if("reducer"in n){if(r&&!eme(n))throw new Error(hs(17));i=n.reducer,o=n.prepare}else i=n;a.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?Ys(e,o):Ys(e))}function Jfe(e){return e._reducerDefinitionType==="asyncThunk"}function eme(e){return e._reducerDefinitionType==="reducerWithPrepare"}function tme({type:e,reducerName:t},r,n,a){if(!a)throw new Error(hs(18));const{payloadCreator:i,fulfilled:o,pending:c,rejected:d,settled:f,options:m}=r,h=a(e,i,m);n.exposeAction(t,h),o&&n.addCase(h.fulfilled,o),c&&n.addCase(h.pending,c),d&&n.addCase(h.rejected,d),f&&n.addMatcher(h.settled,f),n.exposeCaseReducer(t,{fulfilled:o||Sx,pending:c||Sx,rejected:d||Sx,settled:f||Sx})}function Sx(){}var rme="task",oF="listener",lF="completed",nk="cancelled",nme=`task-${nk}`,sme=`task-${lF}`,k2=`${oF}-${nk}`,ame=`${oF}-${lF}`,Eb=class{constructor(e){this.code=e,this.message=`${rme} ${nk} (reason: ${e})`}name="TaskAbortError";message},sk=(e,t)=>{if(typeof e!="function")throw new TypeError(hs(32))},Yy=()=>{},cF=(e,t=Yy)=>(e.catch(t),e),uF=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Ec=e=>{if(e.aborted)throw new Eb(e.reason)};function dF(e,t){let r=Yy;return new Promise((n,a)=>{const i=()=>a(new Eb(e.reason));if(e.aborted){i();return}r=uF(e,i),t.finally(()=>r()).then(n,a)}).finally(()=>{r=Yy})}var ime=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Eb?"cancelled":"rejected",error:r}}finally{t?.()}},Xy=e=>t=>cF(dF(e,t).then(r=>(Ec(e),r))),fF=e=>{const t=Xy(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Ad}=Object,uR={},Ab="listenerMiddleware",ome=(e,t)=>{const r=n=>uF(e,()=>n.abort(e.reason));return(n,a)=>{sk(n);const i=new AbortController;r(i);const o=ime(async()=>{Ec(e),Ec(i.signal);const c=await n({pause:Xy(i.signal),delay:fF(i.signal),signal:i.signal});return Ec(i.signal),c},()=>i.abort(sme));return a?.autoJoin&&t.push(o.catch(Yy)),{result:Xy(e)(o),cancel(){i.abort(nme)}}}},lme=(e,t)=>{const r=async(n,a)=>{Ec(t);let i=()=>{};const c=[new Promise((d,f)=>{let m=e({predicate:n,effect:(h,g)=>{g.unsubscribe(),d([h,g.getState(),g.getOriginalState()])}});i=()=>{m(),f()}})];a!=null&&c.push(new Promise(d=>setTimeout(d,a,null)));try{const d=await dF(t,Promise.race(c));return Ec(t),d}finally{i()}};return(n,a)=>cF(r(n,a))},mF=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:i}=e;if(t)a=Ys(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(hs(21));return sk(i),{predicate:a,type:t,effect:i}},hF=Ad(e=>{const{type:t,predicate:r,effect:n}=mF(e);return{id:Hfe(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(hs(22))}}},{withTypes:()=>hF}),dR=(e,t)=>{const{type:r,effect:n,predicate:a}=mF(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===a)&&i.effect===n)},E2=e=>{e.pending.forEach(t=>{t.abort(k2)})},cme=(e,t)=>()=>{for(const r of t.keys())E2(r);e.clear()},fR=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},pF=Ad(Ys(`${Ab}/add`),{withTypes:()=>pF}),ume=Ys(`${Ab}/removeAll`),gF=Ad(Ys(`${Ab}/remove`),{withTypes:()=>gF}),dme=(...e)=>{console.error(`${Ab}/error`,...e)},cp=(e={})=>{const t=new Map,r=new Map,n=x=>{const w=r.get(x)??0;r.set(x,w+1)},a=x=>{const w=r.get(x)??1;w===1?r.delete(x):r.set(x,w-1)},{extra:i,onError:o=dme}=e;sk(o);const c=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),w=>{x.unsubscribe(),w?.cancelActive&&E2(x)}),d=x=>{const w=dR(t,x)??hF(x);return c(w)};Ad(d,{withTypes:()=>d});const f=x=>{const w=dR(t,x);return w&&(w.unsubscribe(),x.cancelActive&&E2(w)),!!w};Ad(f,{withTypes:()=>f});const m=async(x,w,b,j)=>{const N=new AbortController,_=lme(d,N.signal),S=[];try{x.pending.add(N),n(x),await Promise.resolve(x.effect(w,Ad({},b,{getOriginalState:j,condition:(k,A)=>_(k,A).then(Boolean),take:_,delay:fF(N.signal),pause:Xy(N.signal),extra:i,signal:N.signal,fork:ome(N.signal,S),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((k,A,T)=>{k!==N&&(k.abort(k2),T.delete(k))})},cancel:()=>{N.abort(k2),x.pending.delete(N)},throwIfCancelled:()=>{Ec(N.signal)}})))}catch(k){k instanceof Eb||fR(o,k,{raisedBy:"effect"})}finally{await Promise.all(S),N.abort(ame),a(x),x.pending.delete(N)}},h=cme(t,r);return{middleware:x=>w=>b=>{if(!KU(b))return w(b);if(pF.match(b))return d(b.payload);if(ume.match(b)){h();return}if(gF.match(b))return f(b.payload);let j=x.getState();const N=()=>{if(j===uR)throw new Error(hs(23));return j};let _;try{if(_=w(b),t.size>0){const S=x.getState(),k=Array.from(t.values());for(const A of k){let T=!1;try{T=A.predicate(b,S,j)}catch(O){T=!1,fR(o,O,{raisedBy:"predicate"})}T&&m(A,b,x,N)}}}finally{j=uR}return _},startListening:d,stopListening:f,clearListeners:h}};function hs(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var fme={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},xF=Yn({name:"chartLayout",initialState:fme,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,a,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(a=t.payload.bottom)!==null&&a!==void 0?a:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:mme,setLayout:hme,setChartSize:pme,setScale:gme}=xF.actions,xme=xF.reducer;function yF(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function ft(e){return Number.isFinite(e)}function ai(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function mR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mR(Object(r),!0).forEach(function(n){yme(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yme(e,t,r){return(t=vme(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vme(e){var t=bme(e,"string");return typeof t=="symbol"?t:t+""}function bme(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bt(e,t,r){return Xr(e)||Xr(t)?r:si(t)?Ic(e,t,r):typeof t=="function"?t(e):r}var wme=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:i,verticalAlign:o,layout:c}=t;if((c==="vertical"||c==="horizontal"&&o==="middle")&&i!=="center"&&Ie(e[i]))return yd(yd({},e),{},{[i]:e[i]+(n||0)});if((c==="horizontal"||c==="vertical"&&i==="center")&&o!=="middle"&&Ie(e[o]))return yd(yd({},e),{},{[o]:e[o]+(a||0)})}return e},kl=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",vF=(e,t,r,n)=>{if(n)return e.map(c=>c.coordinate);var a,i,o=e.map(c=>(c.coordinate===t&&(a=!0),c.coordinate===r&&(i=!0),c.coordinate));return a||o.push(t),i||o.push(r),o},bF=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:i,scale:o,realScaleType:c,isCategorical:d,categoricalDomain:f,tickCount:m,ticks:h,niceTicks:g,axisType:x}=e;if(!o)return null;var w=c==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,b=a==="category"&&o.bandwidth?o.bandwidth()/w:0;if(b=x==="angleAxis"&&i&&i.length>=2?Yr(i[0]-i[1])*2*b:b,h||g){var j=(h||g||[]).map((N,_)=>{var S=n?n.indexOf(N):N,k=o.map(S);return ft(k)?{coordinate:k+b,value:N,offset:b,index:_}:null}).filter(Kn);return j}return d&&f?f.map((N,_)=>{var S=o.map(N);return ft(S)?{coordinate:S+b,value:N,index:_,offset:b}:null}).filter(Kn):o.ticks&&m!=null?o.ticks(m).map((N,_)=>{var S=o.map(N);return ft(S)?{coordinate:S+b,value:N,index:_,offset:b}:null}).filter(Kn):o.domain().map((N,_)=>{var S=o.map(N);return ft(S)?{coordinate:S+b,value:n?n[N]:N,index:_,offset:b}:null}).filter(Kn)},jme=(e,t)=>{if(!t||t.length!==2||!Ie(t[0])||!Ie(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!Ie(e[0])||e[0]<r)&&(a[0]=r),(!Ie(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},Nme=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var i=0,o=0,c=0;c<r;++c){var d=e[c],f=d?.[a];if(f!=null){var m=f[1],h=f[0],g=ni(m)?h:m;g>=0?(f[0]=i,i+=g,f[1]=i):(f[0]=o,o+=g,f[1]=o)}}}},Sme=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var i=0,o=0;o<r;++o){var c=e[o],d=c?.[a];if(d!=null){var f=ni(d[1])?d[0]:d[1];f>=0?(d[0]=i,i+=f,d[1]=i):(d[0]=0,d[1]=0)}}}},_me={sign:Nme,expand:Xue,none:Dc,silhouette:Zue,wiggle:Jue,positive:Sme},Cme=(e,t,r)=>{var n,a=(n=_me[r])!==null&&n!==void 0?n:Dc,i=Yue().keys(t).value((c,d)=>Number(Bt(c,d,0))).order(x2).offset(a),o=i(e);return o.forEach((c,d)=>{c.forEach((f,m)=>{var h=Bt(e[m],t[d],0);Array.isArray(h)&&h.length===2&&Ie(h[0])&&Ie(h[1])&&(f[0]=h[0],f[1]=h[1])})}),o};function kme(e){return e==null?void 0:String(e)}var hR=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:i,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+n:null;var c=Bt(i,t.dataKey,t.scale.domain()[o]);if(Xr(c))return null;var d=t.scale.map(c);return Ie(d)?d-a/2+n:null},Eme=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},Ame=e=>{var t=e.flat(2).filter(Ie);return[Math.min(...t),Math.max(...t)]},Tme=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],Ome=(e,t,r)=>{if(e!=null)return Tme(Object.keys(e).reduce((n,a)=>{var i=e[a];if(!i)return n;var{stackedData:o}=i,c=o.reduce((d,f)=>{var m=yF(f,t,r),h=Ame(m);return!ft(h[0])||!ft(h[1])?d:[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],n[0]),Math.max(c[1],n[1])]},[1/0,-1/0]))},pR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,gR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Zy=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=bb(t,m=>m.coordinate),i=1/0,o=1,c=a.length;o<c;o++){var d=a[o],f=a[o-1];i=Math.min((d?.coordinate||0)-(f?.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function xR(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:i}=e;return yd(yd({},t),{},{dataKey:r,payload:n,value:a,name:i})}function Tb(e,t){if(e)return String(e);if(typeof t=="string")return t}var Pme=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},Mme=(e,t)=>t==="centric"?e.angle:e.radius,ho=e=>e.layout.width,po=e=>e.layout.height,Rme=e=>e.layout.scale,wF=e=>e.layout.margin,Ob=fe(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Pb=fe(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),jF="data-recharts-item-index",NF="data-recharts-item-id",up=60;function yR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _x(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yR(Object(r),!0).forEach(function(n){Dme(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dme(e,t,r){return(t=Ime(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ime(e){var t=Lme(e,"string");return typeof t=="symbol"?t:t+""}function Lme(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $me=e=>e.brush.height;function zme(e){var t=Pb(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:up;return r+a}return r},0)}function Ume(e){var t=Pb(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:up;return r+a}return r},0)}function Fme(e){var t=Ob(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function Bme(e){var t=Ob(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Br=fe([ho,po,wF,$me,zme,Ume,Fme,Bme,BU,pfe],(e,t,r,n,a,i,o,c,d,f)=>{var m={left:(r.left||0)+a,right:(r.right||0)+i},h={top:(r.top||0)+o,bottom:(r.bottom||0)+c},g=_x(_x({},h),m),x=g.bottom;g.bottom+=n,g=wme(g,d,f);var w=e-g.left-g.right,b=t-g.top-g.bottom;return _x(_x({brushBottom:x},g),{},{width:Math.max(w,0),height:Math.max(b,0)})}),qme=fe(Br,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),ak=fe(ho,po,(e,t)=>({x:0,y:0,width:e,height:t})),Vme=y.createContext(null),Xn=()=>y.useContext(Vme)!=null,Mb=e=>e.brush,Rb=fe([Mb,Br,wF],(e,t,r)=>({height:e.height,x:Ie(e.x)?e.x:t.left,y:Ie(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:Ie(e.width)?e.width:t.width})),NN={},SN={},_N={},vR;function Kme(){return vR||(vR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:i}={}){let o,c=null;const d=i!=null&&i.includes("leading"),f=i==null||i.includes("trailing"),m=()=>{c!==null&&(r.apply(o,c),o=void 0,c=null)},h=()=>{f&&m(),b()};let g=null;const x=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,h()},n)},w=()=>{g!==null&&(clearTimeout(g),g=null)},b=()=>{w(),o=void 0,c=null},j=()=>{m()},N=function(..._){if(a?.aborted)return;o=this,c=_;const S=g==null;x(),d&&S&&m()};return N.schedule=x,N.cancel=b,N.flush=j,a?.addEventListener("abort",b,{once:!0}),N}e.debounce=t})(_N)),_N}var bR;function Hme(){return bR||(bR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kme();function r(n,a=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:c=!0,maxWait:d}=i,f=Array(2);o&&(f[0]="leading"),c&&(f[1]="trailing");let m,h=null;const g=t.debounce(function(...b){m=n.apply(this,b),h=null},a,{edges:f}),x=function(...b){return d!=null&&(h===null&&(h=Date.now()),Date.now()-h>=d)?(m=n.apply(this,b),h=Date.now(),g.cancel(),g.schedule(),m):(g.apply(this,b),m)},w=()=>(g.flush(),m);return x.cancel=g.cancel,x.flush=w,x}e.debounce=r})(SN)),SN}var wR;function Gme(){return wR||(wR=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Hme();function r(n,a=0,i={}){const{leading:o=!0,trailing:c=!0}=i;return t.debounce(n,a,{leading:o,maxWait:a,trailing:c})}e.throttle=r})(NN)),NN}var CN,jR;function Wme(){return jR||(jR=1,CN=Gme().throttle),CN}var Qme=Wme();const Yme=Ea(Qme);var Jy=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(r.replace(/%s/g,()=>a[o++]))}},Ga={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},SF=(e,t,r)=>{var{width:n=Ga.width,height:a=Ga.height,aspect:i,maxHeight:o}=r,c=Lc(n)?e:Number(n),d=Lc(a)?t:Number(a);return i&&i>0&&(c?d=c/i:d&&(c=d*i),o&&d!=null&&d>o&&(d=o)),{calculatedWidth:c,calculatedHeight:d}},Xme={width:0,height:0,overflow:"visible"},Zme={width:0,overflowX:"visible"},Jme={height:0,overflowY:"visible"},ehe={},the=e=>{var{width:t,height:r}=e,n=Lc(t),a=Lc(r);return n&&a?Xme:n?Zme:a?Jme:ehe};function rhe(e){var{width:t,height:r,aspect:n}=e,a=t,i=r;return a===void 0&&i===void 0?(a=Ga.width,i=Ga.height):a===void 0?a=n&&n>0?void 0:Ga.width:i===void 0&&(i=n&&n>0?void 0:Ga.height),{width:a,height:i}}function A2(){return A2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A2.apply(null,arguments)}function NR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function SR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NR(Object(r),!0).forEach(function(n){nhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nhe(e,t,r){return(t=she(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function she(e){var t=ahe(e,"string");return typeof t=="symbol"?t:t+""}function ahe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _F=y.createContext(Ga.initialDimension);function ihe(e){return ai(e.width)&&ai(e.height)}function CF(e){var{children:t,width:r,height:n}=e,a=y.useMemo(()=>({width:r,height:n}),[r,n]);return ihe(a)?y.createElement(_F.Provider,{value:a},t):null}var ik=()=>y.useContext(_F),ohe=y.forwardRef((e,t)=>{var{aspect:r,initialDimension:n=Ga.initialDimension,width:a,height:i,minWidth:o=Ga.minWidth,minHeight:c,maxHeight:d,children:f,debounce:m=Ga.debounce,id:h,className:g,onResize:x,style:w={}}=e,b=y.useRef(null),j=y.useRef();j.current=x,y.useImperativeHandle(t,()=>b.current);var[N,_]=y.useState({containerWidth:n.width,containerHeight:n.height}),S=y.useCallback((P,R)=>{_(M=>{var D=Math.round(P),z=Math.round(R);return M.containerWidth===D&&M.containerHeight===z?M:{containerWidth:D,containerHeight:z}})},[]);y.useEffect(()=>{if(b.current==null||typeof ResizeObserver>"u")return hf;var P=z=>{var Y,I=z[0];if(I!=null){var{width:K,height:U}=I.contentRect;S(K,U),(Y=j.current)===null||Y===void 0||Y.call(j,K,U)}};m>0&&(P=Yme(P,m,{trailing:!0,leading:!1}));var R=new ResizeObserver(P),{width:M,height:D}=b.current.getBoundingClientRect();return S(M,D),R.observe(b.current),()=>{R.disconnect()}},[S,m]);var{containerWidth:k,containerHeight:A}=N;Jy(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:T,calculatedHeight:O}=SF(k,A,{width:a,height:i,aspect:r,maxHeight:d});return Jy(T!=null&&T>0||O!=null&&O>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,O,a,i,o,c,r),y.createElement("div",{id:h?"".concat(h):void 0,className:Nt("recharts-responsive-container",g),style:SR(SR({},w),{},{width:a,height:i,minWidth:o,minHeight:c,maxHeight:d}),ref:b},y.createElement("div",{style:the({width:a,height:i})},y.createElement(CF,{width:T,height:O},f)))}),Db=y.forwardRef((e,t)=>{var r=ik();if(ai(r.width)&&ai(r.height))return e.children;var{width:n,height:a}=rhe({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:o}=SF(void 0,void 0,{width:n,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return Ie(i)&&Ie(o)?y.createElement(CF,{width:i,height:o},e.children):y.createElement(ohe,A2({},e,{width:n,height:a,ref:t}))});function ok(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Ib=()=>{var e,t=Xn(),r=Ue(qme),n=Ue(Rb),a=(e=Ue(Mb))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},lhe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},kF=()=>{var e;return(e=Ue(Br))!==null&&e!==void 0?e:lhe},EF=()=>Ue(ho),AF=()=>Ue(po),St=e=>e.layout.layoutType,pf=()=>Ue(St),TF=()=>{var e=pf();if(e==="horizontal"||e==="vertical")return e},OF=e=>{var t=e.layout.layoutType;if(t==="centric"||t==="radial")return t},che=()=>{var e=pf();return e!==void 0},dp=e=>{var t=Xt(),r=Xn(),{width:n,height:a}=e,i=ik(),o=n,c=a;return i&&(o=i.width>0?i.width:n,c=i.height>0?i.height:a),y.useEffect(()=>{!r&&ai(o)&&ai(c)&&t(pme({width:o,height:c}))},[t,r,o,c]),null},PF=Symbol.for("immer-nothing"),_R=Symbol.for("immer-draftable"),gs=Symbol.for("immer-state");function fa(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ah=Object.getPrototypeOf;function zd(e){return!!e&&!!e[gs]}function zc(e){return e?MF(e)||Array.isArray(e)||!!e[_R]||!!e.constructor?.[_R]||fp(e)||$b(e):!1}var uhe=Object.prototype.constructor.toString(),CR=new WeakMap;function MF(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=CR.get(r);return n===void 0&&(n=Function.toString.call(r),CR.set(r,n)),n===uhe}function ev(e,t,r=!0){Lb(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(a=>{t(a,e[a],e)}):e.forEach((n,a)=>t(a,n,e))}function Lb(e){const t=e[gs];return t?t.type_:Array.isArray(e)?1:fp(e)?2:$b(e)?3:0}function T2(e,t){return Lb(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function RF(e,t,r){const n=Lb(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function dhe(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function fp(e){return e instanceof Map}function $b(e){return e instanceof Set}function dc(e){return e.copy_||e.base_}function O2(e,t){if(fp(e))return new Map(e);if($b(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=MF(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[gs];let a=Reflect.ownKeys(n);for(let i=0;i<a.length;i++){const o=a[i],c=n[o];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(n[o]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[o]})}return Object.create(Ah(e),n)}else{const n=Ah(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function lk(e,t=!1){return zb(e)||zd(e)||!zc(e)||(Lb(e)>1&&Object.defineProperties(e,{set:Cx,add:Cx,clear:Cx,delete:Cx}),Object.freeze(e),t&&Object.values(e).forEach(r=>lk(r,!0))),e}function fhe(){fa(2)}var Cx={value:fhe};function zb(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var mhe={};function Uc(e){const t=mhe[e];return t||fa(0,e),t}var Th;function DF(){return Th}function hhe(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function kR(e,t){t&&(Uc("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function P2(e){M2(e),e.drafts_.forEach(phe),e.drafts_=null}function M2(e){e===Th&&(Th=e.parent_)}function ER(e){return Th=hhe(Th,e)}function phe(e){const t=e[gs];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function AR(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[gs].modified_&&(P2(t),fa(4)),zc(e)&&(e=tv(t,e),t.parent_||rv(t,e)),t.patches_&&Uc("Patches").generateReplacementPatches_(r[gs].base_,e,t.patches_,t.inversePatches_)):e=tv(t,r,[]),P2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==PF?e:void 0}function tv(e,t,r){if(zb(t))return t;const n=e.immer_.shouldUseStrictIteration(),a=t[gs];if(!a)return ev(t,(i,o)=>TR(e,a,t,i,o,r),n),t;if(a.scope_!==e)return t;if(!a.modified_)return rv(e,a.base_,!0),a.base_;if(!a.finalized_){a.finalized_=!0,a.scope_.unfinalizedDrafts_--;const i=a.copy_;let o=i,c=!1;a.type_===3&&(o=new Set(i),i.clear(),c=!0),ev(o,(d,f)=>TR(e,a,i,d,f,r,c),n),rv(e,i,!1),r&&e.patches_&&Uc("Patches").generatePatches_(a,r,e.patches_,e.inversePatches_)}return a.copy_}function TR(e,t,r,n,a,i,o){if(a==null||typeof a!="object"&&!o)return;const c=zb(a);if(!(c&&!o)){if(zd(a)){const d=i&&t&&t.type_!==3&&!T2(t.assigned_,n)?i.concat(n):void 0,f=tv(e,a,d);if(RF(r,n,f),zd(f))e.canAutoFreeze_=!1;else return}else o&&r.add(a);if(zc(a)&&!c){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===a&&c)return;tv(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(fp(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&rv(e,a)}}}function rv(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&lk(t,r)}function ghe(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:DF(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,i=ck;r&&(a=[n],i=Oh);const{revoke:o,proxy:c}=Proxy.revocable(a,i);return n.draft_=c,n.revoke_=o,c}var ck={get(e,t){if(t===gs)return e;const r=dc(e);if(!T2(r,t))return xhe(e,r,t);const n=r[t];return e.finalized_||!zc(n)?n:n===kN(e.base_,t)?(EN(e),e.copy_[t]=D2(n,e)):n},has(e,t){return t in dc(e)},ownKeys(e){return Reflect.ownKeys(dc(e))},set(e,t,r){const n=IF(dc(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=kN(dc(e),t),i=a?.[gs];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(dhe(r,a)&&(r!==void 0||T2(e.base_,t)))return!0;EN(e),R2(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return kN(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,EN(e),R2(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=dc(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){fa(11)},getPrototypeOf(e){return Ah(e.base_)},setPrototypeOf(){fa(12)}},Oh={};ev(ck,(e,t)=>{Oh[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Oh.deleteProperty=function(e,t){return Oh.set.call(this,e,t,void 0)};Oh.set=function(e,t,r){return ck.set.call(this,e[0],t,r,e[0])};function kN(e,t){const r=e[gs];return(r?dc(r):e)[t]}function xhe(e,t,r){const n=IF(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function IF(e,t){if(!(t in e))return;let r=Ah(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Ah(r)}}function R2(e){e.modified_||(e.modified_=!0,e.parent_&&R2(e.parent_))}function EN(e){e.copy_||(e.copy_=O2(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var yhe=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(d=i,...f){return o.produce(d,m=>r.call(this,m,...f))}}typeof r!="function"&&fa(6),n!==void 0&&typeof n!="function"&&fa(7);let a;if(zc(t)){const i=ER(this),o=D2(t,void 0);let c=!0;try{a=r(o),c=!1}finally{c?P2(i):M2(i)}return kR(i,n),AR(a,i)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===PF&&(a=void 0),this.autoFreeze_&&lk(a,!0),n){const i=[],o=[];Uc("Patches").generateReplacementPatches_(t,a,i,o),n(i,o)}return a}else fa(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...c)=>this.produceWithPatches(o,d=>t(d,...c));let n,a;return[this.produce(t,r,(o,c)=>{n=o,a=c}),n,a]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){zc(e)||fa(8),zd(e)&&(e=vhe(e));const t=ER(this),r=D2(e,void 0);return r[gs].isManual_=!0,M2(t),r}finishDraft(e,t){const r=e&&e[gs];(!r||!r.isManual_)&&fa(9);const{scope_:n}=r;return kR(n,t),AR(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=Uc("Patches").applyPatches_;return zd(e)?n(e,t):this.produce(e,a=>n(a,t))}};function D2(e,t){const r=fp(e)?Uc("MapSet").proxyMap_(e,t):$b(e)?Uc("MapSet").proxySet_(e,t):ghe(e,t);return(t?t.scope_:DF()).drafts_.push(r),r}function vhe(e){return zd(e)||fa(10,e),LF(e)}function LF(e){if(!zc(e)||zb(e))return e;const t=e[gs];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=O2(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=O2(e,!0);return ev(r,(a,i)=>{RF(r,a,LF(i))},n),t&&(t.finalized_=!1),r}var bhe=new yhe;bhe.produce;var whe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},$F=Yn({name:"legend",initialState:whe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Kt()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,a=xa(e).payload.indexOf(r);a>-1&&(e.payload[a]=n)},prepare:Kt()},removeLegendPayload:{reducer(e,t){var r=xa(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Kt()}}}),{setLegendSize:gUe,setLegendSettings:xUe,addLegendPayload:zF,replaceLegendPayload:UF,removeLegendPayload:FF}=$F.actions,jhe=$F.reducer;function I2(){return I2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I2.apply(null,arguments)}function OR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Am(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OR(Object(r),!0).forEach(function(n){Nhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nhe(e,t,r){return(t=She(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function She(e){var t=_he(e,"string");return typeof t=="symbol"?t:t+""}function _he(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Che(e){return Array.isArray(e)&&si(e[0])&&si(e[1])?e.join(" ~ "):e}var td={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},khe=e=>{var{separator:t=td.separator,contentStyle:r,itemStyle:n,labelStyle:a=td.labelStyle,payload:i,formatter:o,itemSorter:c,wrapperClassName:d,labelClassName:f,label:m,labelFormatter:h,accessibilityLayer:g=td.accessibilityLayer}=e,x=()=>{if(i&&i.length){var A={padding:0,margin:0},T=(c?bb(i,c):i).map((O,P)=>{if(O.type==="none")return null;var R=O.formatter||o||Che,{value:M,name:D}=O,z=M,Y=D;if(R){var I=R(M,D,O,P,i);if(Array.isArray(I))[z,Y]=I;else if(I!=null)z=I;else return null}var K=Am(Am({},td.itemStyle),{},{color:O.color||td.itemStyle.color},n);return y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:K},si(Y)?y.createElement("span",{className:"recharts-tooltip-item-name"},Y):null,si(Y)?y.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,y.createElement("span",{className:"recharts-tooltip-item-value"},z),y.createElement("span",{className:"recharts-tooltip-item-unit"},O.unit||""))});return y.createElement("ul",{className:"recharts-tooltip-item-list",style:A},T)}return null},w=Am(Am({},td.contentStyle),r),b=Am({margin:0},a),j=!Xr(m),N=j?m:"",_=Nt("recharts-default-tooltip",d),S=Nt("recharts-tooltip-label",f);j&&h&&i!==void 0&&i!==null&&(N=h(m,i));var k=g?{role:"status","aria-live":"assertive"}:{};return y.createElement("div",I2({className:_,style:w},k),y.createElement("p",{className:S,style:b},y.isValidElement(N)?N:"".concat(N)),x())},Tm="recharts-tooltip-wrapper",Ehe={visibility:"hidden"};function Ahe(e){var{coordinate:t,translateX:r,translateY:n}=e;return Nt(Tm,{["".concat(Tm,"-right")]:Ie(r)&&t&&Ie(t.x)&&r>=t.x,["".concat(Tm,"-left")]:Ie(r)&&t&&Ie(t.x)&&r<t.x,["".concat(Tm,"-bottom")]:Ie(n)&&t&&Ie(t.y)&&n>=t.y,["".concat(Tm,"-top")]:Ie(n)&&t&&Ie(t.y)&&n<t.y})}function PR(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offset:a,position:i,reverseDirection:o,tooltipDimension:c,viewBox:d,viewBoxDimension:f}=e;if(i&&Ie(i[n]))return i[n];var m=r[n]-c-(a>0?a:0),h=r[n]+a;if(t[n])return o[n]?m:h;var g=d[n];if(g==null)return 0;if(o[n]){var x=m,w=g;return x<w?Math.max(h,g):Math.max(m,g)}if(f==null)return 0;var b=h+c,j=g+f;return b>j?Math.max(m,g):Math.max(h,g)}function The(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Ohe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTop:n,offsetLeft:a,position:i,reverseDirection:o,tooltipBox:c,useTranslate3d:d,viewBox:f}=e,m,h,g;return c.height>0&&c.width>0&&r?(h=PR({allowEscapeViewBox:t,coordinate:r,key:"x",offset:a,position:i,reverseDirection:o,tooltipDimension:c.width,viewBox:f,viewBoxDimension:f.width}),g=PR({allowEscapeViewBox:t,coordinate:r,key:"y",offset:n,position:i,reverseDirection:o,tooltipDimension:c.height,viewBox:f,viewBoxDimension:f.height}),m=The({translateX:h,translateY:g,useTranslate3d:d})):m=Ehe,{cssProperties:m,cssClasses:Ahe({translateX:h,translateY:g,coordinate:r})}}function MR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function kx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MR(Object(r),!0).forEach(function(n){L2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function L2(e,t,r){return(t=Phe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Phe(e){var t=Mhe(e,"string");return typeof t=="symbol"?t:t+""}function Mhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Rhe extends y.PureComponent{constructor(){super(...arguments),L2(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),L2(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:i,coordinate:o,hasPayload:c,isAnimationActive:d,offset:f,position:m,reverseDirection:h,useTranslate3d:g,viewBox:x,wrapperStyle:w,lastBoundingBox:b,innerRef:j,hasPortalFromProps:N}=this.props,_=typeof f=="number"?f:f.x,S=typeof f=="number"?f:f.y,{cssClasses:k,cssProperties:A}=Ohe({allowEscapeViewBox:r,coordinate:o,offsetLeft:_,offsetTop:S,position:m,reverseDirection:h,tooltipBox:{height:b.height,width:b.width},useTranslate3d:g,viewBox:x}),T=N?{}:kx(kx({transition:d&&t?"transform ".concat(n,"ms ").concat(a):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&c?"visible":"hidden",position:"absolute",top:0,left:0}),O=kx(kx({},T),{},{visibility:!this.state.dismissed&&t&&c?"visible":"hidden"},w);return y.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:k,style:O,ref:j},i)}}var BF=()=>{var e;return(e=Ue(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function $2(){return $2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$2.apply(null,arguments)}function RR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function DR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RR(Object(r),!0).forEach(function(n){Dhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dhe(e,t,r){return(t=Ihe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ihe(e){var t=Lhe(e,"string");return typeof t=="symbol"?t:t+""}function Lhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IR={curveBasisClosed:zue,curveBasisOpen:Uue,curveBasis:$ue,curveBumpX:Sue,curveBumpY:_ue,curveLinearClosed:Fue,curveLinear:xb,curveMonotoneX:Bue,curveMonotoneY:que,curveNatural:Vue,curveStep:Kue,curveStepAfter:Gue,curveStepBefore:Hue},nv=e=>ft(e.x)&&ft(e.y),LR=e=>e.base!=null&&nv(e.base)&&nv(e),Om=e=>e.x,Pm=e=>e.y,$he=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(op(e));if((r==="curveMonotone"||r==="curveBump")&&t){var n=IR["".concat(r).concat(t==="vertical"?"Y":"X")];if(n)return n}return IR[r]||xb},$R={connectNulls:!1,type:"linear"},zhe=e=>{var{type:t=$R.type,points:r=[],baseLine:n,layout:a,connectNulls:i=$R.connectNulls}=e,o=$he(t,a),c=i?r.filter(nv):r;if(Array.isArray(n)){var d,f=r.map((w,b)=>DR(DR({},w),{},{base:n[b]}));a==="vertical"?d=vx().y(Pm).x1(Om).x0(w=>w.base.x):d=vx().x(Om).y1(Pm).y0(w=>w.base.y);var m=d.defined(LR).curve(o),h=i?f.filter(LR):f;return m(h)}var g;a==="vertical"&&Ie(n)?g=vx().y(Pm).x1(Om).x0(n):Ie(n)?g=vx().x(Om).y1(Pm).y0(n):g=hU().x(Om).y(Pm);var x=g.defined(nv).curve(o);return x(c)},uk=e=>{var{className:t,points:r,path:n,pathRef:a}=e,i=pf();if((!r||!r.length)&&!n)return null;var o={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||i,connectNulls:e.connectNulls},c=r&&r.length?zhe(o):n;return y.createElement("path",$2({},Sa(e),xde(e),{className:Nt("recharts-curve",t),d:c===null?void 0:c,ref:a}))},Uhe=["x","y","top","left","width","height","className"];function z2(){return z2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},z2.apply(null,arguments)}function zR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fhe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zR(Object(r),!0).forEach(function(n){Bhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bhe(e,t,r){return(t=qhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qhe(e){var t=Vhe(e,"string");return typeof t=="symbol"?t:t+""}function Vhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Khe(e,t){if(e==null)return{};var r,n,a=Hhe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Hhe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ghe=(e,t,r,n,a,i)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),Whe=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:i=0,height:o=0,className:c}=e,d=Khe(e,Uhe),f=Fhe({x:t,y:r,top:n,left:a,width:i,height:o},d);return!Ie(t)||!Ie(r)||!Ie(i)||!Ie(o)||!Ie(n)||!Ie(a)?null:y.createElement("path",z2({},Qs(f),{className:Nt("recharts-cross",c),d:Ghe(t,r,i,o,n,a)}))};function Qhe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function UR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function FR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UR(Object(r),!0).forEach(function(n){Yhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yhe(e,t,r){return(t=Xhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xhe(e){var t=Zhe(e,"string");return typeof t=="symbol"?t:t+""}function Zhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jhe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),qF=(e,t,r)=>e.map(n=>"".concat(Jhe(n)," ").concat(t,"ms ").concat(r)).join(","),epe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),Ph=(e,t)=>Object.keys(t).reduce((r,n)=>FR(FR({},r),{},{[n]:e(n,t[n])}),{});function BR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function zr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BR(Object(r),!0).forEach(function(n){tpe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tpe(e,t,r){return(t=rpe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rpe(e){var t=npe(e,"string");return typeof t=="symbol"?t:t+""}function npe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sv=(e,t,r)=>e+(t-e)*r,U2=e=>{var{from:t,to:r}=e;return t!==r},VF=(e,t,r)=>{var n=Ph((a,i)=>{if(U2(i)){var[o,c]=e(i.from,i.to,i.velocity);return zr(zr({},i),{},{from:o,velocity:c})}return i},t);return r<1?Ph((a,i)=>U2(i)&&n[a]!=null?zr(zr({},i),{},{velocity:sv(i.velocity,n[a].velocity,r),from:sv(i.from,n[a].from,r)}):i,t):VF(e,n,r-1)};function spe(e,t,r,n,a,i){var o,c=n.reduce((g,x)=>zr(zr({},g),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),d=()=>Ph((g,x)=>x.from,c),f=()=>!Object.values(c).filter(U2).length,m=null,h=g=>{o||(o=g);var x=g-o,w=x/r.dt;c=VF(r,c,w),a(zr(zr(zr({},e),t),d())),o=g,f()||(m=i.setTimeout(h))};return()=>(m=i.setTimeout(h),()=>{var g;(g=m)===null||g===void 0||g()})}function ape(e,t,r,n,a,i,o){var c=null,d=a.reduce((h,g)=>{var x=e[g],w=t[g];return x==null||w==null?h:zr(zr({},h),{},{[g]:[x,w]})},{}),f,m=h=>{f||(f=h);var g=(h-f)/n,x=Ph((b,j)=>sv(...j,r(g)),d);if(i(zr(zr(zr({},e),t),x)),g<1)c=o.setTimeout(m);else{var w=Ph((b,j)=>sv(...j,r(1)),d);i(zr(zr(zr({},e),t),w))}};return()=>(c=o.setTimeout(m),()=>{var h;(h=c)===null||h===void 0||h()})}const ipe=(e,t,r,n,a,i)=>{var o=epe(e,t);return r==null?()=>(a(zr(zr({},e),t)),()=>{}):r.isStepper===!0?spe(e,t,r,o,a,i):ape(e,t,r,n,o,a,i)};var av=1e-4,KF=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],HF=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),qR=(e,t)=>r=>{var n=KF(e,t);return HF(n,r)},ope=(e,t)=>r=>{var n=KF(e,t),a=[...n.map((i,o)=>i*o).slice(1),0];return HF(a,r)},lpe=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var a=n.map(i=>parseFloat(i));return[a[0],a[1],a[2],a[3]]},cpe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a=lpe(r[0]);if(a)return a}}return r.length===4?r:[0,0,1,1]},upe=(e,t,r,n)=>{var a=qR(e,r),i=qR(t,n),o=ope(e,r),c=f=>f>1?1:f<0?0:f,d=f=>{for(var m=f>1?1:f,h=m,g=0;g<8;++g){var x=a(h)-m,w=o(h);if(Math.abs(x-m)<av||w<av)return i(h);h=c(h-x/w)}return i(h)};return d.isStepper=!1,d},VR=function(){return upe(...cpe(...arguments))},dpe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,i=(o,c,d)=>{var f=-(o-c)*r,m=d*n,h=d+(f-m)*a/1e3,g=d*a/1e3+o;return Math.abs(g-c)<av&&Math.abs(h)<av?[c,0]:[g,h]};return i.isStepper=!0,i.dt=a,i},fpe=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return VR(e);case"spring":return dpe();default:if(e.split("(")[0]==="cubic-bezier")return VR(e)}return typeof e=="function"?e:null};function mpe(e){var t,r=()=>null,n=!1,a=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var c=o,[d,...f]=c;if(typeof d=="number"){a=e.setTimeout(i.bind(null,f),d);return}i(d),a=e.setTimeout(i.bind(null,f));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class hpe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(i))};return a=requestAnimationFrame(i),()=>{a!=null&&cancelAnimationFrame(a)}}}function ppe(){return mpe(new hpe)}var gpe=y.createContext(ppe);function xpe(e,t){var r=y.useContext(gpe);return y.useMemo(()=>t??r(e),[e,t,r])}var ype=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ub={isSsr:ype()},vpe={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},KR={t:0},AN={t:1};function Fb(e){var t=Sn(e,vpe),{isActive:r,canBegin:n,duration:a,easing:i,begin:o,onAnimationEnd:c,onAnimationStart:d,children:f}=t,m=r==="auto"?!Ub.isSsr:r,h=xpe(t.animationId,t.animationManager),[g,x]=y.useState(m?KR:AN),w=y.useRef(null);return y.useEffect(()=>{m||x(AN)},[m]),y.useEffect(()=>{if(!m||!n)return hf;var b=ipe(KR,AN,fpe(i),a,x,h.getTimeoutController()),j=()=>{w.current=b()};return h.start([d,o,j,a,c]),()=>{h.stop(),w.current&&w.current(),c()}},[m,n,a,i,o,d,c,h]),f(g.t)}function Bb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=y.useRef(_h(t)),n=y.useRef(e);return n.current!==e&&(r.current=_h(t),n.current=e),r.current}var bpe=["radius"],wpe=["radius"],HR,GR,WR,QR,YR,XR,ZR,JR,eD,tD;function rD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rD(Object(r),!0).forEach(function(n){jpe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jpe(e,t,r){return(t=Npe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Npe(e){var t=Spe(e,"string");return typeof t=="symbol"?t:t+""}function Spe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iv(){return iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iv.apply(null,arguments)}function sD(e,t){if(e==null)return{};var r,n,a=_pe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _pe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ua(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var aD=(e,t,r,n,a)=>{var i=dl(r),o=dl(n),c=Math.min(Math.abs(i)/2,Math.abs(o)/2),d=o>=0?1:-1,f=i>=0?1:-1,m=o>=0&&i>=0||o<0&&i<0?1:0,h;if(c>0&&Array.isArray(a)){for(var g=[0,0,0,0],x=0,w=4;x<w;x++){var b,j=(b=a[x])!==null&&b!==void 0?b:0;g[x]=j>c?c:j}h=cr(HR||(HR=Ua(["M",",",""])),e,t+d*g[0]),g[0]>0&&(h+=cr(GR||(GR=Ua(["A ",",",",0,0,",",",",",""])),g[0],g[0],m,e+f*g[0],t)),h+=cr(WR||(WR=Ua(["L ",",",""])),e+r-f*g[1],t),g[1]>0&&(h+=cr(QR||(QR=Ua(["A ",",",",0,0,",`,
        `,",",""])),g[1],g[1],m,e+r,t+d*g[1])),h+=cr(YR||(YR=Ua(["L ",",",""])),e+r,t+n-d*g[2]),g[2]>0&&(h+=cr(XR||(XR=Ua(["A ",",",",0,0,",`,
        `,",",""])),g[2],g[2],m,e+r-f*g[2],t+n)),h+=cr(ZR||(ZR=Ua(["L ",",",""])),e+f*g[3],t+n),g[3]>0&&(h+=cr(JR||(JR=Ua(["A ",",",",0,0,",`,
        `,",",""])),g[3],g[3],m,e,t+n-d*g[3])),h+="Z"}else if(c>0&&a===+a&&a>0){var N=Math.min(c,a);h=cr(eD||(eD=Ua(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+d*N,N,N,m,e+f*N,t,e+r-f*N,t,N,N,m,e+r,t+d*N,e+r,t+n-d*N,N,N,m,e+r-f*N,t+n,e+f*N,t+n,N,N,m,e,t+n-d*N)}else h=cr(tD||(tD=Ua(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return h},iD={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},GF=e=>{var t=Sn(e,iD),r=y.useRef(null),[n,a]=y.useState(-1);y.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var L=r.current.getTotalLength();L&&a(L)}catch{}},[]);var{x:i,y:o,width:c,height:d,radius:f,className:m}=t,{animationEasing:h,animationDuration:g,animationBegin:x,isAnimationActive:w,isUpdateAnimationActive:b}=t,j=y.useRef(c),N=y.useRef(d),_=y.useRef(i),S=y.useRef(o),k=y.useMemo(()=>({x:i,y:o,width:c,height:d,radius:f}),[i,o,c,d,f]),A=Bb(k,"rectangle-");if(i!==+i||o!==+o||c!==+c||d!==+d||c===0||d===0)return null;var T=Nt("recharts-rectangle",m);if(!b){var O=Qs(t),{radius:P}=O,R=sD(O,bpe);return y.createElement("path",iv({},R,{x:dl(i),y:dl(o),width:dl(c),height:dl(d),radius:typeof f=="number"?f:void 0,className:T,d:aD(i,o,c,d,f)}))}var M=j.current,D=N.current,z=_.current,Y=S.current,I="0px ".concat(n===-1?1:n,"px"),K="".concat(n,"px 0px"),U=qF(["strokeDasharray"],g,typeof h=="string"?h:iD.animationEasing);return y.createElement(Fb,{animationId:A,key:A,canBegin:n>0,duration:g,easing:h,isActive:b,begin:x},L=>{var F=$r(M,c,L),q=$r(D,d,L),Z=$r(z,i,L),B=$r(Y,o,L);r.current&&(j.current=F,N.current=q,_.current=Z,S.current=B);var V;w?L>0?V={transition:U,strokeDasharray:K}:V={strokeDasharray:I}:V={strokeDasharray:K};var ee=Qs(t),{radius:ae}=ee,J=sD(ee,wpe);return y.createElement("path",iv({},J,{radius:typeof f=="number"?f:void 0,className:T,d:aD(Z,B,F,q,f),ref:r,style:nD(nD({},V),t.style)}))})};function oD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oD(Object(r),!0).forEach(function(n){Cpe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oD(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cpe(e,t,r){return(t=kpe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kpe(e){var t=Epe(e,"string");return typeof t=="symbol"?t:t+""}function Epe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ov=Math.PI/180,Ape=e=>e*180/Math.PI,Ar=(e,t,r,n)=>({x:e+Math.cos(-ov*n)*r,y:t+Math.sin(-ov*n)*r}),WF=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Tpe=(e,t)=>{var{x:r,y:n}=e,{x:a,y:i}=t;return Math.sqrt((r-a)**2+(n-i)**2)},Ope=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:i}=t,o=Tpe({x:r,y:n},{x:a,y:i});if(o<=0)return{radius:o,angle:0};var c=(r-a)/o,d=Math.acos(c);return n>i&&(d=2*Math.PI-d),{radius:o,angle:Ape(d),angleInRadian:d}},Ppe=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),i=Math.min(n,a);return{startAngle:t-i*360,endAngle:r-i*360}},Mpe=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return e+o*360},Rpe=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:a,angle:i}=Ope({x:r,y:n},t),{innerRadius:o,outerRadius:c}=t;if(a<o||a>c||a===0)return null;var{startAngle:d,endAngle:f}=Ppe(t),m=i,h;if(d<=f){for(;m>f;)m-=360;for(;m<d;)m+=360;h=m>=d&&m<=f}else{for(;m>d;)m-=360;for(;m<f;)m+=360;h=m>=f&&m<=d}return h?lD(lD({},t),{},{radius:a,angle:Mpe(m,t)}):null};function QF(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:i}=e,o=Ar(t,r,n,a),c=Ar(t,r,n,i);return{points:[o,c],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}var cD,uD,dD,fD,mD,hD,pD;function F2(){return F2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F2.apply(null,arguments)}function bc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Dpe=(e,t)=>{var r=Yr(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Ex=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:i,isExternal:o,cornerRadius:c,cornerIsExternal:d}=e,f=c*(o?1:-1)+n,m=Math.asin(c/f)/ov,h=d?a:a+i*m,g=Ar(t,r,f,h),x=Ar(t,r,n,h),w=d?a-i*m:a,b=Ar(t,r,f*Math.cos(m*ov),w);return{center:g,circleTangency:x,lineTangency:b,theta:m}},YF=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:i,endAngle:o}=e,c=Dpe(i,o),d=i+c,f=Ar(t,r,a,i),m=Ar(t,r,a,d),h=cr(cD||(cD=bc(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),f.x,f.y,a,a,+(Math.abs(c)>180),+(i>d),m.x,m.y);if(n>0){var g=Ar(t,r,n,i),x=Ar(t,r,n,d);h+=cr(uD||(uD=bc(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,n,n,+(Math.abs(c)>180),+(i<=d),g.x,g.y)}else h+=cr(dD||(dD=bc(["L ",","," Z"])),t,r);return h},Ipe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:c,startAngle:d,endAngle:f}=e,m=Yr(f-d),{circleTangency:h,lineTangency:g,theta:x}=Ex({cx:t,cy:r,radius:a,angle:d,sign:m,cornerRadius:i,cornerIsExternal:c}),{circleTangency:w,lineTangency:b,theta:j}=Ex({cx:t,cy:r,radius:a,angle:f,sign:-m,cornerRadius:i,cornerIsExternal:c}),N=c?Math.abs(d-f):Math.abs(d-f)-x-j;if(N<0)return o?cr(fD||(fD=bc(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),g.x,g.y,i,i,i*2,i,i,-i*2):YF({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:d,endAngle:f});var _=cr(mD||(mD=bc(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),g.x,g.y,i,i,+(m<0),h.x,h.y,a,a,+(N>180),+(m<0),w.x,w.y,i,i,+(m<0),b.x,b.y);if(n>0){var{circleTangency:S,lineTangency:k,theta:A}=Ex({cx:t,cy:r,radius:n,angle:d,sign:m,isExternal:!0,cornerRadius:i,cornerIsExternal:c}),{circleTangency:T,lineTangency:O,theta:P}=Ex({cx:t,cy:r,radius:n,angle:f,sign:-m,isExternal:!0,cornerRadius:i,cornerIsExternal:c}),R=c?Math.abs(d-f):Math.abs(d-f)-A-P;if(R<0&&i===0)return"".concat(_,"L").concat(t,",").concat(r,"Z");_+=cr(hD||(hD=bc(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),O.x,O.y,i,i,+(m<0),T.x,T.y,n,n,+(R>180),+(m>0),S.x,S.y,i,i,+(m<0),k.x,k.y)}else _+=cr(pD||(pD=bc(["L",",","Z"])),t,r);return _},Lpe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},XF=e=>{var t=Sn(e,Lpe),{cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:o,forceCornerRadius:c,cornerIsExternal:d,startAngle:f,endAngle:m,className:h}=t;if(i<a||f===m)return null;var g=Nt("recharts-sector",h),x=i-a,w=jn(o,x,0,!0),b;return w>0&&Math.abs(f-m)<360?b=Ipe({cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:Math.min(w,x/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:f,endAngle:m}):b=YF({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:f,endAngle:m}),y.createElement("path",F2({},Qs(t),{className:g,d:b}))};function $pe(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(AU(t)){if(e==="centric"){var{cx:n,cy:a,innerRadius:i,outerRadius:o,angle:c}=t,d=Ar(n,a,i,c),f=Ar(n,a,o,c);return[{x:d.x,y:d.y},{x:f.x,y:f.y}]}return QF(t)}}var TN={},ON={},PN={},gD;function zpe(){return gD||(gD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UU();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(PN)),PN}var xD;function Upe(){return xD||(xD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zpe();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(ON)),ON}var yD;function Fpe(){return yD||(yD=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FU(),r=Upe();function n(a,i,o){o&&typeof o!="number"&&t.isIterateeCall(a,i,o)&&(i=o=void 0),a=r.toFinite(a),i===void 0?(i=a,a=0):i=r.toFinite(i),o=o===void 0?a<i?1:-1:r.toFinite(o);const c=Math.max(Math.ceil((i-a)/(o||1)),0),d=new Array(c);for(let f=0;f<c;f++)d[f]=a,a+=o;return d}e.range=n})(TN)),TN}var MN,vD;function Bpe(){return vD||(vD=1,MN=Fpe().range),MN}var qpe=Bpe();const ZF=Ea(qpe);function hl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Vpe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function dk(e){let t,r,n;e.length!==2?(t=hl,r=(c,d)=>hl(e(c),d),n=(c,d)=>e(c)-d):(t=e===hl||e===Vpe?e:Kpe,r=e,n=e);function a(c,d,f=0,m=c.length){if(f<m){if(t(d,d)!==0)return m;do{const h=f+m>>>1;r(c[h],d)<0?f=h+1:m=h}while(f<m)}return f}function i(c,d,f=0,m=c.length){if(f<m){if(t(d,d)!==0)return m;do{const h=f+m>>>1;r(c[h],d)<=0?f=h+1:m=h}while(f<m)}return f}function o(c,d,f=0,m=c.length){const h=a(c,d,f,m-1);return h>f&&n(c[h-1],d)>-n(c[h],d)?h-1:h}return{left:a,center:o,right:i}}function Kpe(){return 0}function JF(e){return e===null?NaN:+e}function*Hpe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Gpe=dk(hl),mp=Gpe.right;dk(JF).center;class bD extends Map{constructor(t,r=Ype){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(wD(this,t))}has(t){return super.has(wD(this,t))}set(t,r){return super.set(Wpe(this,t),r)}delete(t){return super.delete(Qpe(this,t))}}function wD({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Wpe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Qpe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Ype(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Xpe(e=hl){if(e===hl)return eB;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function eB(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Zpe=Math.sqrt(50),Jpe=Math.sqrt(10),ege=Math.sqrt(2);function lv(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=Zpe?10:i>=Jpe?5:i>=ege?2:1;let c,d,f;return a<0?(f=Math.pow(10,-a)/o,c=Math.round(e*f),d=Math.round(t*f),c/f<e&&++c,d/f>t&&--d,f=-f):(f=Math.pow(10,a)*o,c=Math.round(e/f),d=Math.round(t/f),c*f<e&&++c,d*f>t&&--d),d<c&&.5<=r&&r<2?lv(e,t,r*2):[c,d,f]}function B2(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?lv(t,e,r):lv(e,t,r);if(!(i>=a))return[];const c=i-a+1,d=new Array(c);if(n)if(o<0)for(let f=0;f<c;++f)d[f]=(i-f)/-o;else for(let f=0;f<c;++f)d[f]=(i-f)*o;else if(o<0)for(let f=0;f<c;++f)d[f]=(a+f)/-o;else for(let f=0;f<c;++f)d[f]=(a+f)*o;return d}function q2(e,t,r){return t=+t,e=+e,r=+r,lv(e,t,r)[2]}function V2(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?q2(t,e,r):q2(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function jD(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function ND(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function tB(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?eB:Xpe(a);n>r;){if(n-r>600){const d=n-r+1,f=t-r+1,m=Math.log(d),h=.5*Math.exp(2*m/3),g=.5*Math.sqrt(m*h*(d-h)/d)*(f-d/2<0?-1:1),x=Math.max(r,Math.floor(t-f*h/d+g)),w=Math.min(n,Math.floor(t+(d-f)*h/d+g));tB(e,t,x,w,a)}const i=e[t];let o=r,c=n;for(Mm(e,r,t),a(e[n],i)>0&&Mm(e,r,n);o<c;){for(Mm(e,o,c),++o,--c;a(e[o],i)<0;)++o;for(;a(e[c],i)>0;)--c}a(e[r],i)===0?Mm(e,r,c):(++c,Mm(e,c,n)),c<=t&&(r=c+1),t<=c&&(n=c-1)}return e}function Mm(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function tge(e,t,r){if(e=Float64Array.from(Hpe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return ND(e);if(t>=1)return jD(e);var n,a=(n-1)*t,i=Math.floor(a),o=jD(tB(e,i).subarray(0,i+1)),c=ND(e.subarray(i+1));return o+(c-o)*(a-i)}}function rge(e,t,r=JF){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),c=+r(e[i+1],i+1,e);return o+(c-o)*(a-i)}}function nge(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function Zs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function go(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const K2=Symbol("implicit");function fk(){var e=new bD,t=[],r=[],n=K2;function a(i){let o=e.get(i);if(o===void 0){if(n!==K2)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new bD;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return fk(t,r).unknown(n)},Zs.apply(a,arguments),a}function mk(){var e=fk().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,c=!1,d=0,f=0,m=.5;delete e.unknown;function h(){var g=t().length,x=a<n,w=x?a:n,b=x?n:a;i=(b-w)/Math.max(1,g-d+f*2),c&&(i=Math.floor(i)),w+=(b-w-i*(g-d))*m,o=i*(1-d),c&&(w=Math.round(w),o=Math.round(o));var j=nge(g).map(function(N){return w+i*N});return r(x?j.reverse():j)}return e.domain=function(g){return arguments.length?(t(g),h()):t()},e.range=function(g){return arguments.length?([n,a]=g,n=+n,a=+a,h()):[n,a]},e.rangeRound=function(g){return[n,a]=g,n=+n,a=+a,c=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(g){return arguments.length?(c=!!g,h()):c},e.padding=function(g){return arguments.length?(d=Math.min(1,f=+g),h()):d},e.paddingInner=function(g){return arguments.length?(d=Math.min(1,g),h()):d},e.paddingOuter=function(g){return arguments.length?(f=+g,h()):f},e.align=function(g){return arguments.length?(m=Math.max(0,Math.min(1,g)),h()):m},e.copy=function(){return mk(t(),[n,a]).round(c).paddingInner(d).paddingOuter(f).align(m)},Zs.apply(h(),arguments)}function rB(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return rB(t())},e}function sge(){return rB(mk.apply(null,arguments).paddingInner(1))}function hk(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function nB(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function hp(){}var Mh=.7,cv=1/Mh,Td="\\s*([+-]?\\d+)\\s*",Rh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Za="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",age=/^#([0-9a-f]{3,8})$/,ige=new RegExp(`^rgb\\(${Td},${Td},${Td}\\)$`),oge=new RegExp(`^rgb\\(${Za},${Za},${Za}\\)$`),lge=new RegExp(`^rgba\\(${Td},${Td},${Td},${Rh}\\)$`),cge=new RegExp(`^rgba\\(${Za},${Za},${Za},${Rh}\\)$`),uge=new RegExp(`^hsl\\(${Rh},${Za},${Za}\\)$`),dge=new RegExp(`^hsla\\(${Rh},${Za},${Za},${Rh}\\)$`),SD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};hk(hp,Fc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_D,formatHex:_D,formatHex8:fge,formatHsl:mge,formatRgb:CD,toString:CD});function _D(){return this.rgb().formatHex()}function fge(){return this.rgb().formatHex8()}function mge(){return sB(this).formatHsl()}function CD(){return this.rgb().formatRgb()}function Fc(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=age.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?kD(t):r===3?new Hn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Ax(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Ax(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ige.exec(e))?new Hn(t[1],t[2],t[3],1):(t=oge.exec(e))?new Hn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=lge.exec(e))?Ax(t[1],t[2],t[3],t[4]):(t=cge.exec(e))?Ax(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=uge.exec(e))?TD(t[1],t[2]/100,t[3]/100,1):(t=dge.exec(e))?TD(t[1],t[2]/100,t[3]/100,t[4]):SD.hasOwnProperty(e)?kD(SD[e]):e==="transparent"?new Hn(NaN,NaN,NaN,0):null}function kD(e){return new Hn(e>>16&255,e>>8&255,e&255,1)}function Ax(e,t,r,n){return n<=0&&(e=t=r=NaN),new Hn(e,t,r,n)}function hge(e){return e instanceof hp||(e=Fc(e)),e?(e=e.rgb(),new Hn(e.r,e.g,e.b,e.opacity)):new Hn}function H2(e,t,r,n){return arguments.length===1?hge(e):new Hn(e,t,r,n??1)}function Hn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}hk(Hn,H2,nB(hp,{brighter(e){return e=e==null?cv:Math.pow(cv,e),new Hn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Mh:Math.pow(Mh,e),new Hn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Hn(Ac(this.r),Ac(this.g),Ac(this.b),uv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ED,formatHex:ED,formatHex8:pge,formatRgb:AD,toString:AD}));function ED(){return`#${wc(this.r)}${wc(this.g)}${wc(this.b)}`}function pge(){return`#${wc(this.r)}${wc(this.g)}${wc(this.b)}${wc((isNaN(this.opacity)?1:this.opacity)*255)}`}function AD(){const e=uv(this.opacity);return`${e===1?"rgb(":"rgba("}${Ac(this.r)}, ${Ac(this.g)}, ${Ac(this.b)}${e===1?")":`, ${e})`}`}function uv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ac(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function wc(e){return e=Ac(e),(e<16?"0":"")+e.toString(16)}function TD(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ma(e,t,r,n)}function sB(e){if(e instanceof ma)return new ma(e.h,e.s,e.l,e.opacity);if(e instanceof hp||(e=Fc(e)),!e)return new ma;if(e instanceof ma)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,c=i-a,d=(i+a)/2;return c?(t===i?o=(r-n)/c+(r<n)*6:r===i?o=(n-t)/c+2:o=(t-r)/c+4,c/=d<.5?i+a:2-i-a,o*=60):c=d>0&&d<1?0:o,new ma(o,c,d,e.opacity)}function gge(e,t,r,n){return arguments.length===1?sB(e):new ma(e,t,r,n??1)}function ma(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}hk(ma,gge,nB(hp,{brighter(e){return e=e==null?cv:Math.pow(cv,e),new ma(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Mh:Math.pow(Mh,e),new ma(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Hn(RN(e>=240?e-240:e+120,a,n),RN(e,a,n),RN(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new ma(OD(this.h),Tx(this.s),Tx(this.l),uv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=uv(this.opacity);return`${e===1?"hsl(":"hsla("}${OD(this.h)}, ${Tx(this.s)*100}%, ${Tx(this.l)*100}%${e===1?")":`, ${e})`}`}}));function OD(e){return e=(e||0)%360,e<0?e+360:e}function Tx(e){return Math.max(0,Math.min(1,e||0))}function RN(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const pk=e=>()=>e;function xge(e,t){return function(r){return e+r*t}}function yge(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function vge(e){return(e=+e)==1?aB:function(t,r){return r-t?yge(t,r,e):pk(isNaN(t)?r:t)}}function aB(e,t){var r=t-e;return r?xge(e,r):pk(isNaN(e)?t:e)}const dv=(function e(t){var r=vge(t);function n(a,i){var o=r((a=H2(a)).r,(i=H2(i)).r),c=r(a.g,i.g),d=r(a.b,i.b),f=aB(a.opacity,i.opacity);return function(m){return a.r=o(m),a.g=c(m),a.b=d(m),a.opacity=f(m),a+""}}return n.gamma=e,n})(1);function bge(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function wge(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function jge(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=Ki(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(c){for(o=0;o<n;++o)i[o]=a[o](c);return i}}function Nge(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function ua(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Sge(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Ki(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var G2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,DN=new RegExp(G2.source,"g");function _ge(e){return function(){return e}}function Cge(e){return function(t){return e(t)+""}}function iB(e,t){var r=G2.lastIndex=DN.lastIndex=0,n,a,i,o=-1,c=[],d=[];for(e=e+"",t=t+"";(n=G2.exec(e))&&(a=DN.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),c[o]?c[o]+=i:c[++o]=i),(n=n[0])===(a=a[0])?c[o]?c[o]+=a:c[++o]=a:(c[++o]=null,d.push({i:o,x:ua(n,a)})),r=DN.lastIndex;return r<t.length&&(i=t.slice(r),c[o]?c[o]+=i:c[++o]=i),c.length<2?d[0]?Cge(d[0].x):_ge(t):(t=d.length,function(f){for(var m=0,h;m<t;++m)c[(h=d[m]).i]=h.x(f);return c.join("")})}function Ki(e,t){var r=typeof t,n;return t==null||r==="boolean"?pk(t):(r==="number"?ua:r==="string"?(n=Fc(t))?(t=n,dv):iB:t instanceof Fc?dv:t instanceof Date?Nge:wge(t)?bge:Array.isArray(t)?jge:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Sge:ua)(e,t)}function gk(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var PD=180/Math.PI,W2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function oB(e,t,r,n,a,i){var o,c,d;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(d=e*r+t*n)&&(r-=e*d,n-=t*d),(c=Math.sqrt(r*r+n*n))&&(r/=c,n/=c,d/=c),e*n<t*r&&(e=-e,t=-t,d=-d,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*PD,skewX:Math.atan(d)*PD,scaleX:o,scaleY:c}}var Ox;function kge(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?W2:oB(t.a,t.b,t.c,t.d,t.e,t.f)}function Ege(e){return e==null||(Ox||(Ox=document.createElementNS("http://www.w3.org/2000/svg","g")),Ox.setAttribute("transform",e),!(e=Ox.transform.baseVal.consolidate()))?W2:(e=e.matrix,oB(e.a,e.b,e.c,e.d,e.e,e.f))}function lB(e,t,r,n){function a(f){return f.length?f.pop()+" ":""}function i(f,m,h,g,x,w){if(f!==h||m!==g){var b=x.push("translate(",null,t,null,r);w.push({i:b-4,x:ua(f,h)},{i:b-2,x:ua(m,g)})}else(h||g)&&x.push("translate("+h+t+g+r)}function o(f,m,h,g){f!==m?(f-m>180?m+=360:m-f>180&&(f+=360),g.push({i:h.push(a(h)+"rotate(",null,n)-2,x:ua(f,m)})):m&&h.push(a(h)+"rotate("+m+n)}function c(f,m,h,g){f!==m?g.push({i:h.push(a(h)+"skewX(",null,n)-2,x:ua(f,m)}):m&&h.push(a(h)+"skewX("+m+n)}function d(f,m,h,g,x,w){if(f!==h||m!==g){var b=x.push(a(x)+"scale(",null,",",null,")");w.push({i:b-4,x:ua(f,h)},{i:b-2,x:ua(m,g)})}else(h!==1||g!==1)&&x.push(a(x)+"scale("+h+","+g+")")}return function(f,m){var h=[],g=[];return f=e(f),m=e(m),i(f.translateX,f.translateY,m.translateX,m.translateY,h,g),o(f.rotate,m.rotate,h,g),c(f.skewX,m.skewX,h,g),d(f.scaleX,f.scaleY,m.scaleX,m.scaleY,h,g),f=m=null,function(x){for(var w=-1,b=g.length,j;++w<b;)h[(j=g[w]).i]=j.x(x);return h.join("")}}}var Age=lB(kge,"px, ","px)","deg)"),Tge=lB(Ege,", ",")",")"),Oge=1e-12;function MD(e){return((e=Math.exp(e))+1/e)/2}function Pge(e){return((e=Math.exp(e))-1/e)/2}function Mge(e){return((e=Math.exp(2*e))-1)/(e+1)}const ly=(function e(t,r,n){function a(i,o){var c=i[0],d=i[1],f=i[2],m=o[0],h=o[1],g=o[2],x=m-c,w=h-d,b=x*x+w*w,j,N;if(b<Oge)N=Math.log(g/f)/t,j=function(O){return[c+O*x,d+O*w,f*Math.exp(t*O*N)]};else{var _=Math.sqrt(b),S=(g*g-f*f+n*b)/(2*f*r*_),k=(g*g-f*f-n*b)/(2*g*r*_),A=Math.log(Math.sqrt(S*S+1)-S),T=Math.log(Math.sqrt(k*k+1)-k);N=(T-A)/t,j=function(O){var P=O*N,R=MD(A),M=f/(r*_)*(R*Mge(t*P+A)-Pge(A));return[c+M*x,d+M*w,f*R/MD(t*P+A)]}}return j.duration=N*1e3*t/Math.SQRT2,j}return a.rho=function(i){var o=Math.max(.001,+i),c=o*o,d=c*c;return e(o,c,d)},a})(Math.SQRT2,2,4);function Rge(e,t){t===void 0&&(t=e,e=Ki);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var c=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[c](o-c)}}function Dge(e){return function(){return e}}function fv(e){return+e}var RD=[0,1];function Tn(e){return e}function Q2(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Dge(isNaN(t)?NaN:.5)}function Ige(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Lge(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=Q2(a,n),i=r(o,i)):(n=Q2(n,a),i=r(i,o)),function(c){return i(n(c))}}function $ge(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=Q2(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(c){var d=mp(e,c,1,n)-1;return i[d](a[d](c))}}function pp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function qb(){var e=RD,t=RD,r=Ki,n,a,i,o=Tn,c,d,f;function m(){var g=Math.min(e.length,t.length);return o!==Tn&&(o=Ige(e[0],e[g-1])),c=g>2?$ge:Lge,d=f=null,h}function h(g){return g==null||isNaN(g=+g)?i:(d||(d=c(e.map(n),t,r)))(n(o(g)))}return h.invert=function(g){return o(a((f||(f=c(t,e.map(n),ua)))(g)))},h.domain=function(g){return arguments.length?(e=Array.from(g,fv),m()):e.slice()},h.range=function(g){return arguments.length?(t=Array.from(g),m()):t.slice()},h.rangeRound=function(g){return t=Array.from(g),r=gk,m()},h.clamp=function(g){return arguments.length?(o=g?!0:Tn,m()):o!==Tn},h.interpolate=function(g){return arguments.length?(r=g,m()):r},h.unknown=function(g){return arguments.length?(i=g,h):i},function(g,x){return n=g,a=x,m()}}function xk(){return qb()(Tn,Tn)}function zge(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function mv(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Ud(e){return e=mv(Math.abs(e)),e?e[1]:NaN}function Uge(e,t){return function(r,n){for(var a=r.length,i=[],o=0,c=e[0],d=0;a>0&&c>0&&(d+c+1>n&&(c=Math.max(1,n-d)),i.push(r.substring(a-=c,a+c)),!((d+=c+1)>n));)c=e[o=(o+1)%e.length];return i.reverse().join(t)}}function Fge(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Bge=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Dh(e){if(!(t=Bge.exec(e)))throw new Error("invalid format: "+e);var t;return new yk({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Dh.prototype=yk.prototype;function yk(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}yk.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function qge(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var hv;function Vge(e,t){var r=mv(e,t);if(!r)return hv=void 0,e.toPrecision(t);var n=r[0],a=r[1],i=a-(hv=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+mv(e,Math.max(0,t+i-1))[0]}function DD(e,t){var r=mv(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const ID={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:zge,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>DD(e*100,t),r:DD,s:Vge,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function LD(e){return e}var $D=Array.prototype.map,zD=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Kge(e){var t=e.grouping===void 0||e.thousands===void 0?LD:Uge($D.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?LD:Fge($D.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function f(h,g){h=Dh(h);var x=h.fill,w=h.align,b=h.sign,j=h.symbol,N=h.zero,_=h.width,S=h.comma,k=h.precision,A=h.trim,T=h.type;T==="n"?(S=!0,T="g"):ID[T]||(k===void 0&&(k=12),A=!0,T="g"),(N||x==="0"&&w==="=")&&(N=!0,x="0",w="=");var O=(g&&g.prefix!==void 0?g.prefix:"")+(j==="$"?r:j==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():""),P=(j==="$"?n:/[%p]/.test(T)?o:"")+(g&&g.suffix!==void 0?g.suffix:""),R=ID[T],M=/[defgprs%]/.test(T);k=k===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function D(z){var Y=O,I=P,K,U,L;if(T==="c")I=R(z)+I,z="";else{z=+z;var F=z<0||1/z<0;if(z=isNaN(z)?d:R(Math.abs(z),k),A&&(z=qge(z)),F&&+z==0&&b!=="+"&&(F=!1),Y=(F?b==="("?b:c:b==="-"||b==="("?"":b)+Y,I=(T==="s"&&!isNaN(z)&&hv!==void 0?zD[8+hv/3]:"")+I+(F&&b==="("?")":""),M){for(K=-1,U=z.length;++K<U;)if(L=z.charCodeAt(K),48>L||L>57){I=(L===46?a+z.slice(K+1):z.slice(K))+I,z=z.slice(0,K);break}}}S&&!N&&(z=t(z,1/0));var q=Y.length+z.length+I.length,Z=q<_?new Array(_-q+1).join(x):"";switch(S&&N&&(z=t(Z+z,Z.length?_-I.length:1/0),Z=""),w){case"<":z=Y+z+I+Z;break;case"=":z=Y+Z+z+I;break;case"^":z=Z.slice(0,q=Z.length>>1)+Y+z+I+Z.slice(q);break;default:z=Z+Y+z+I;break}return i(z)}return D.toString=function(){return h+""},D}function m(h,g){var x=Math.max(-8,Math.min(8,Math.floor(Ud(g)/3)))*3,w=Math.pow(10,-x),b=f((h=Dh(h),h.type="f",h),{suffix:zD[8+x/3]});return function(j){return b(w*j)}}return{format:f,formatPrefix:m}}var Px,vk,cB;Hge({thousands:",",grouping:[3],currency:["$",""]});function Hge(e){return Px=Kge(e),vk=Px.format,cB=Px.formatPrefix,Px}function Gge(e){return Math.max(0,-Ud(Math.abs(e)))}function Wge(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ud(t)/3)))*3-Ud(Math.abs(e)))}function Qge(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ud(t)-Ud(e))+1}function uB(e,t,r,n){var a=V2(e,t,r),i;switch(n=Dh(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=Wge(a,o))&&(n.precision=i),cB(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Qge(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=Gge(a))&&(n.precision=i-(n.type==="%")*2);break}}return vk(n)}function El(e){var t=e.domain;return e.ticks=function(r){var n=t();return B2(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return uB(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],c=n[i],d,f,m=10;for(c<o&&(f=o,o=c,c=f,f=a,a=i,i=f);m-- >0;){if(f=q2(o,c,r),f===d)return n[a]=o,n[i]=c,t(n);if(f>0)o=Math.floor(o/f)*f,c=Math.ceil(c/f)*f;else if(f<0)o=Math.ceil(o*f)/f,c=Math.floor(c*f)/f;else break;d=f}return e},e}function dB(){var e=xk();return e.copy=function(){return pp(e,dB())},Zs.apply(e,arguments),El(e)}function fB(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,fv),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return fB(e).unknown(t)},e=arguments.length?Array.from(e,fv):[0,1],El(r)}function mB(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function UD(e){return Math.log(e)}function FD(e){return Math.exp(e)}function Yge(e){return-Math.log(-e)}function Xge(e){return-Math.exp(-e)}function Zge(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Jge(e){return e===10?Zge:e===Math.E?Math.exp:t=>Math.pow(e,t)}function exe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function BD(e){return(t,r)=>-e(-t,r)}function bk(e){const t=e(UD,FD),r=t.domain;let n=10,a,i;function o(){return a=exe(n),i=Jge(n),r()[0]<0?(a=BD(a),i=BD(i),e(Yge,Xge)):e(UD,FD),t}return t.base=function(c){return arguments.length?(n=+c,o()):n},t.domain=function(c){return arguments.length?(r(c),o()):r()},t.ticks=c=>{const d=r();let f=d[0],m=d[d.length-1];const h=m<f;h&&([f,m]=[m,f]);let g=a(f),x=a(m),w,b;const j=c==null?10:+c;let N=[];if(!(n%1)&&x-g<j){if(g=Math.floor(g),x=Math.ceil(x),f>0){for(;g<=x;++g)for(w=1;w<n;++w)if(b=g<0?w/i(-g):w*i(g),!(b<f)){if(b>m)break;N.push(b)}}else for(;g<=x;++g)for(w=n-1;w>=1;--w)if(b=g>0?w/i(-g):w*i(g),!(b<f)){if(b>m)break;N.push(b)}N.length*2<j&&(N=B2(f,m,j))}else N=B2(g,x,Math.min(x-g,j)).map(i);return h?N.reverse():N},t.tickFormat=(c,d)=>{if(c==null&&(c=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=Dh(d)).precision==null&&(d.trim=!0),d=vk(d)),c===1/0)return d;const f=Math.max(1,n*c/t.ticks().length);return m=>{let h=m/i(Math.round(a(m)));return h*n<n-.5&&(h*=n),h<=f?d(m):""}},t.nice=()=>r(mB(r(),{floor:c=>i(Math.floor(a(c))),ceil:c=>i(Math.ceil(a(c)))})),t}function hB(){const e=bk(qb()).domain([1,10]);return e.copy=()=>pp(e,hB()).base(e.base()),Zs.apply(e,arguments),e}function qD(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function VD(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function wk(e){var t=1,r=e(qD(t),VD(t));return r.constant=function(n){return arguments.length?e(qD(t=+n),VD(t)):t},El(r)}function pB(){var e=wk(qb());return e.copy=function(){return pp(e,pB()).constant(e.constant())},Zs.apply(e,arguments)}function KD(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function txe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function rxe(e){return e<0?-e*e:e*e}function jk(e){var t=e(Tn,Tn),r=1;function n(){return r===1?e(Tn,Tn):r===.5?e(txe,rxe):e(KD(r),KD(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},El(t)}function Nk(){var e=jk(qb());return e.copy=function(){return pp(e,Nk()).exponent(e.exponent())},Zs.apply(e,arguments),e}function nxe(){return Nk.apply(null,arguments).exponent(.5)}function HD(e){return Math.sign(e)*e*e}function sxe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function gB(){var e=xk(),t=[0,1],r=!1,n;function a(i){var o=sxe(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(HD(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,fv)).map(HD)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return gB(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Zs.apply(a,arguments),El(a)}function xB(){var e=[],t=[],r=[],n;function a(){var o=0,c=Math.max(1,t.length);for(r=new Array(c-1);++o<c;)r[o-1]=rge(e,o/c);return i}function i(o){return o==null||isNaN(o=+o)?n:t[mp(r,o)]}return i.invertExtent=function(o){var c=t.indexOf(o);return c<0?[NaN,NaN]:[c>0?r[c-1]:e[0],c<r.length?r[c]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let c of o)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(hl),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return xB().domain(e).range(t).unknown(n)},Zs.apply(i,arguments)}function yB(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(d){return d!=null&&d<=d?a[mp(n,d,0,r)]:i}function c(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return o}return o.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,c()):[e,t]},o.range=function(d){return arguments.length?(r=(a=Array.from(d)).length-1,c()):a.slice()},o.invertExtent=function(d){var f=a.indexOf(d);return f<0?[NaN,NaN]:f<1?[e,n[0]]:f>=r?[n[r-1],t]:[n[f-1],n[f]]},o.unknown=function(d){return arguments.length&&(i=d),o},o.thresholds=function(){return n.slice()},o.copy=function(){return yB().domain([e,t]).range(a).unknown(i)},Zs.apply(El(o),arguments)}function vB(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[mp(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return vB().domain(e).range(t).unknown(r)},Zs.apply(a,arguments)}const IN=new Date,LN=new Date;function qr(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),c=a.ceil(i);return i-o<c-i?o:c},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,c)=>{const d=[];if(i=a.ceil(i),c=c==null?1:Math.floor(c),!(i<o)||!(c>0))return d;let f;do d.push(f=new Date(+i)),t(i,c),e(i);while(f<i&&i<o);return d},a.filter=i=>qr(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;t(o,-1),!i(o););else for(;--c>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(IN.setTime(+i),LN.setTime(+o),e(IN),e(LN),Math.floor(r(IN,LN))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const pv=qr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);pv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?qr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):pv);pv.range;const Fi=1e3,Bs=Fi*60,Bi=Bs*60,eo=Bi*24,Sk=eo*7,GD=eo*30,$N=eo*365,jc=qr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Fi)},(e,t)=>(t-e)/Fi,e=>e.getUTCSeconds());jc.range;const _k=qr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Fi)},(e,t)=>{e.setTime(+e+t*Bs)},(e,t)=>(t-e)/Bs,e=>e.getMinutes());_k.range;const Ck=qr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Bs)},(e,t)=>(t-e)/Bs,e=>e.getUTCMinutes());Ck.range;const kk=qr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Fi-e.getMinutes()*Bs)},(e,t)=>{e.setTime(+e+t*Bi)},(e,t)=>(t-e)/Bi,e=>e.getHours());kk.range;const Ek=qr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Bi)},(e,t)=>(t-e)/Bi,e=>e.getUTCHours());Ek.range;const gp=qr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Bs)/eo,e=>e.getDate()-1);gp.range;const Vb=qr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/eo,e=>e.getUTCDate()-1);Vb.range;const bB=qr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/eo,e=>Math.floor(e/eo));bB.range;function ru(e){return qr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Bs)/Sk)}const Kb=ru(0),gv=ru(1),axe=ru(2),ixe=ru(3),Fd=ru(4),oxe=ru(5),lxe=ru(6);Kb.range;gv.range;axe.range;ixe.range;Fd.range;oxe.range;lxe.range;function nu(e){return qr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Sk)}const Hb=nu(0),xv=nu(1),cxe=nu(2),uxe=nu(3),Bd=nu(4),dxe=nu(5),fxe=nu(6);Hb.range;xv.range;cxe.range;uxe.range;Bd.range;dxe.range;fxe.range;const Ak=qr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Ak.range;const Tk=qr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Tk.range;const to=qr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());to.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:qr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});to.range;const ro=qr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ro.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:qr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});ro.range;function wB(e,t,r,n,a,i){const o=[[jc,1,Fi],[jc,5,5*Fi],[jc,15,15*Fi],[jc,30,30*Fi],[i,1,Bs],[i,5,5*Bs],[i,15,15*Bs],[i,30,30*Bs],[a,1,Bi],[a,3,3*Bi],[a,6,6*Bi],[a,12,12*Bi],[n,1,eo],[n,2,2*eo],[r,1,Sk],[t,1,GD],[t,3,3*GD],[e,1,$N]];function c(f,m,h){const g=m<f;g&&([f,m]=[m,f]);const x=h&&typeof h.range=="function"?h:d(f,m,h),w=x?x.range(f,+m+1):[];return g?w.reverse():w}function d(f,m,h){const g=Math.abs(m-f)/h,x=dk(([,,j])=>j).right(o,g);if(x===o.length)return e.every(V2(f/$N,m/$N,h));if(x===0)return pv.every(Math.max(V2(f,m,h),1));const[w,b]=o[g/o[x-1][2]<o[x][2]/g?x-1:x];return w.every(b)}return[c,d]}const[mxe,hxe]=wB(ro,Tk,Hb,bB,Ek,Ck),[pxe,gxe]=wB(to,Ak,Kb,gp,kk,_k);function zN(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function UN(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Rm(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function xxe(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,c=e.months,d=e.shortMonths,f=Dm(a),m=Im(a),h=Dm(i),g=Im(i),x=Dm(o),w=Im(o),b=Dm(c),j=Im(c),N=Dm(d),_=Im(d),S={a:L,A:F,b:q,B:Z,c:null,d:JD,e:JD,f:Uxe,g:Yxe,G:Zxe,H:Lxe,I:$xe,j:zxe,L:jB,m:Fxe,M:Bxe,p:B,q:V,Q:r4,s:n4,S:qxe,u:Vxe,U:Kxe,V:Hxe,w:Gxe,W:Wxe,x:null,X:null,y:Qxe,Y:Xxe,Z:Jxe,"%":t4},k={a:ee,A:ae,b:J,B:se,c:null,d:e4,e:e4,f:nye,g:mye,G:pye,H:eye,I:tye,j:rye,L:SB,m:sye,M:aye,p:ne,q:oe,Q:r4,s:n4,S:iye,u:oye,U:lye,V:cye,w:uye,W:dye,x:null,X:null,y:fye,Y:hye,Z:gye,"%":t4},A={a:M,A:D,b:z,B:Y,c:I,d:XD,e:XD,f:Mxe,g:YD,G:QD,H:ZD,I:ZD,j:Axe,L:Pxe,m:Exe,M:Txe,p:R,q:kxe,Q:Dxe,s:Ixe,S:Oxe,u:jxe,U:Nxe,V:Sxe,w:wxe,W:_xe,x:K,X:U,y:YD,Y:QD,Z:Cxe,"%":Rxe};S.x=T(r,S),S.X=T(n,S),S.c=T(t,S),k.x=T(r,k),k.X=T(n,k),k.c=T(t,k);function T(Q,pe){return function(he){var te=[],we=-1,ke=0,Ve=Q.length,Be,rt,Pr;for(he instanceof Date||(he=new Date(+he));++we<Ve;)Q.charCodeAt(we)===37&&(te.push(Q.slice(ke,we)),(rt=WD[Be=Q.charAt(++we)])!=null?Be=Q.charAt(++we):rt=Be==="e"?" ":"0",(Pr=pe[Be])&&(Be=Pr(he,rt)),te.push(Be),ke=we+1);return te.push(Q.slice(ke,we)),te.join("")}}function O(Q,pe){return function(he){var te=Rm(1900,void 0,1),we=P(te,Q,he+="",0),ke,Ve;if(we!=he.length)return null;if("Q"in te)return new Date(te.Q);if("s"in te)return new Date(te.s*1e3+("L"in te?te.L:0));if(pe&&!("Z"in te)&&(te.Z=0),"p"in te&&(te.H=te.H%12+te.p*12),te.m===void 0&&(te.m="q"in te?te.q:0),"V"in te){if(te.V<1||te.V>53)return null;"w"in te||(te.w=1),"Z"in te?(ke=UN(Rm(te.y,0,1)),Ve=ke.getUTCDay(),ke=Ve>4||Ve===0?xv.ceil(ke):xv(ke),ke=Vb.offset(ke,(te.V-1)*7),te.y=ke.getUTCFullYear(),te.m=ke.getUTCMonth(),te.d=ke.getUTCDate()+(te.w+6)%7):(ke=zN(Rm(te.y,0,1)),Ve=ke.getDay(),ke=Ve>4||Ve===0?gv.ceil(ke):gv(ke),ke=gp.offset(ke,(te.V-1)*7),te.y=ke.getFullYear(),te.m=ke.getMonth(),te.d=ke.getDate()+(te.w+6)%7)}else("W"in te||"U"in te)&&("w"in te||(te.w="u"in te?te.u%7:"W"in te?1:0),Ve="Z"in te?UN(Rm(te.y,0,1)).getUTCDay():zN(Rm(te.y,0,1)).getDay(),te.m=0,te.d="W"in te?(te.w+6)%7+te.W*7-(Ve+5)%7:te.w+te.U*7-(Ve+6)%7);return"Z"in te?(te.H+=te.Z/100|0,te.M+=te.Z%100,UN(te)):zN(te)}}function P(Q,pe,he,te){for(var we=0,ke=pe.length,Ve=he.length,Be,rt;we<ke;){if(te>=Ve)return-1;if(Be=pe.charCodeAt(we++),Be===37){if(Be=pe.charAt(we++),rt=A[Be in WD?pe.charAt(we++):Be],!rt||(te=rt(Q,he,te))<0)return-1}else if(Be!=he.charCodeAt(te++))return-1}return te}function R(Q,pe,he){var te=f.exec(pe.slice(he));return te?(Q.p=m.get(te[0].toLowerCase()),he+te[0].length):-1}function M(Q,pe,he){var te=x.exec(pe.slice(he));return te?(Q.w=w.get(te[0].toLowerCase()),he+te[0].length):-1}function D(Q,pe,he){var te=h.exec(pe.slice(he));return te?(Q.w=g.get(te[0].toLowerCase()),he+te[0].length):-1}function z(Q,pe,he){var te=N.exec(pe.slice(he));return te?(Q.m=_.get(te[0].toLowerCase()),he+te[0].length):-1}function Y(Q,pe,he){var te=b.exec(pe.slice(he));return te?(Q.m=j.get(te[0].toLowerCase()),he+te[0].length):-1}function I(Q,pe,he){return P(Q,t,pe,he)}function K(Q,pe,he){return P(Q,r,pe,he)}function U(Q,pe,he){return P(Q,n,pe,he)}function L(Q){return o[Q.getDay()]}function F(Q){return i[Q.getDay()]}function q(Q){return d[Q.getMonth()]}function Z(Q){return c[Q.getMonth()]}function B(Q){return a[+(Q.getHours()>=12)]}function V(Q){return 1+~~(Q.getMonth()/3)}function ee(Q){return o[Q.getUTCDay()]}function ae(Q){return i[Q.getUTCDay()]}function J(Q){return d[Q.getUTCMonth()]}function se(Q){return c[Q.getUTCMonth()]}function ne(Q){return a[+(Q.getUTCHours()>=12)]}function oe(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var pe=T(Q+="",S);return pe.toString=function(){return Q},pe},parse:function(Q){var pe=O(Q+="",!1);return pe.toString=function(){return Q},pe},utcFormat:function(Q){var pe=T(Q+="",k);return pe.toString=function(){return Q},pe},utcParse:function(Q){var pe=O(Q+="",!0);return pe.toString=function(){return Q},pe}}}var WD={"-":"",_:" ",0:"0"},Zr=/^\s*\d+/,yxe=/^%/,vxe=/[\\^$*+?|[\]().{}]/g;function yt(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function bxe(e){return e.replace(vxe,"\\$&")}function Dm(e){return new RegExp("^(?:"+e.map(bxe).join("|")+")","i")}function Im(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function wxe(e,t,r){var n=Zr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function jxe(e,t,r){var n=Zr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function Nxe(e,t,r){var n=Zr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function Sxe(e,t,r){var n=Zr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function _xe(e,t,r){var n=Zr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function QD(e,t,r){var n=Zr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function YD(e,t,r){var n=Zr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Cxe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function kxe(e,t,r){var n=Zr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function Exe(e,t,r){var n=Zr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function XD(e,t,r){var n=Zr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Axe(e,t,r){var n=Zr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function ZD(e,t,r){var n=Zr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Txe(e,t,r){var n=Zr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function Oxe(e,t,r){var n=Zr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function Pxe(e,t,r){var n=Zr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Mxe(e,t,r){var n=Zr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Rxe(e,t,r){var n=yxe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Dxe(e,t,r){var n=Zr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Ixe(e,t,r){var n=Zr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function JD(e,t){return yt(e.getDate(),t,2)}function Lxe(e,t){return yt(e.getHours(),t,2)}function $xe(e,t){return yt(e.getHours()%12||12,t,2)}function zxe(e,t){return yt(1+gp.count(to(e),e),t,3)}function jB(e,t){return yt(e.getMilliseconds(),t,3)}function Uxe(e,t){return jB(e,t)+"000"}function Fxe(e,t){return yt(e.getMonth()+1,t,2)}function Bxe(e,t){return yt(e.getMinutes(),t,2)}function qxe(e,t){return yt(e.getSeconds(),t,2)}function Vxe(e){var t=e.getDay();return t===0?7:t}function Kxe(e,t){return yt(Kb.count(to(e)-1,e),t,2)}function NB(e){var t=e.getDay();return t>=4||t===0?Fd(e):Fd.ceil(e)}function Hxe(e,t){return e=NB(e),yt(Fd.count(to(e),e)+(to(e).getDay()===4),t,2)}function Gxe(e){return e.getDay()}function Wxe(e,t){return yt(gv.count(to(e)-1,e),t,2)}function Qxe(e,t){return yt(e.getFullYear()%100,t,2)}function Yxe(e,t){return e=NB(e),yt(e.getFullYear()%100,t,2)}function Xxe(e,t){return yt(e.getFullYear()%1e4,t,4)}function Zxe(e,t){var r=e.getDay();return e=r>=4||r===0?Fd(e):Fd.ceil(e),yt(e.getFullYear()%1e4,t,4)}function Jxe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+yt(t/60|0,"0",2)+yt(t%60,"0",2)}function e4(e,t){return yt(e.getUTCDate(),t,2)}function eye(e,t){return yt(e.getUTCHours(),t,2)}function tye(e,t){return yt(e.getUTCHours()%12||12,t,2)}function rye(e,t){return yt(1+Vb.count(ro(e),e),t,3)}function SB(e,t){return yt(e.getUTCMilliseconds(),t,3)}function nye(e,t){return SB(e,t)+"000"}function sye(e,t){return yt(e.getUTCMonth()+1,t,2)}function aye(e,t){return yt(e.getUTCMinutes(),t,2)}function iye(e,t){return yt(e.getUTCSeconds(),t,2)}function oye(e){var t=e.getUTCDay();return t===0?7:t}function lye(e,t){return yt(Hb.count(ro(e)-1,e),t,2)}function _B(e){var t=e.getUTCDay();return t>=4||t===0?Bd(e):Bd.ceil(e)}function cye(e,t){return e=_B(e),yt(Bd.count(ro(e),e)+(ro(e).getUTCDay()===4),t,2)}function uye(e){return e.getUTCDay()}function dye(e,t){return yt(xv.count(ro(e)-1,e),t,2)}function fye(e,t){return yt(e.getUTCFullYear()%100,t,2)}function mye(e,t){return e=_B(e),yt(e.getUTCFullYear()%100,t,2)}function hye(e,t){return yt(e.getUTCFullYear()%1e4,t,4)}function pye(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Bd(e):Bd.ceil(e),yt(e.getUTCFullYear()%1e4,t,4)}function gye(){return"+0000"}function t4(){return"%"}function r4(e){return+e}function n4(e){return Math.floor(+e/1e3)}var rd,CB,kB;xye({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function xye(e){return rd=xxe(e),CB=rd.format,rd.parse,kB=rd.utcFormat,rd.utcParse,rd}function yye(e){return new Date(e)}function vye(e){return e instanceof Date?+e:+new Date(+e)}function Ok(e,t,r,n,a,i,o,c,d,f){var m=xk(),h=m.invert,g=m.domain,x=f(".%L"),w=f(":%S"),b=f("%I:%M"),j=f("%I %p"),N=f("%a %d"),_=f("%b %d"),S=f("%B"),k=f("%Y");function A(T){return(d(T)<T?x:c(T)<T?w:o(T)<T?b:i(T)<T?j:n(T)<T?a(T)<T?N:_:r(T)<T?S:k)(T)}return m.invert=function(T){return new Date(h(T))},m.domain=function(T){return arguments.length?g(Array.from(T,vye)):g().map(yye)},m.ticks=function(T){var O=g();return e(O[0],O[O.length-1],T??10)},m.tickFormat=function(T,O){return O==null?A:f(O)},m.nice=function(T){var O=g();return(!T||typeof T.range!="function")&&(T=t(O[0],O[O.length-1],T??10)),T?g(mB(O,T)):m},m.copy=function(){return pp(m,Ok(e,t,r,n,a,i,o,c,d,f))},m}function bye(){return Zs.apply(Ok(pxe,gxe,to,Ak,Kb,gp,kk,_k,jc,CB).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function wye(){return Zs.apply(Ok(mxe,hxe,ro,Tk,Hb,Vb,Ek,Ck,jc,kB).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Gb(){var e=0,t=1,r,n,a,i,o=Tn,c=!1,d;function f(h){return h==null||isNaN(h=+h)?d:o(a===0?.5:(h=(i(h)-r)*a,c?Math.max(0,Math.min(1,h)):h))}f.domain=function(h){return arguments.length?([e,t]=h,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),f):[e,t]},f.clamp=function(h){return arguments.length?(c=!!h,f):c},f.interpolator=function(h){return arguments.length?(o=h,f):o};function m(h){return function(g){var x,w;return arguments.length?([x,w]=g,o=h(x,w),f):[o(0),o(1)]}}return f.range=m(Ki),f.rangeRound=m(gk),f.unknown=function(h){return arguments.length?(d=h,f):d},function(h){return i=h,r=h(e),n=h(t),a=r===n?0:1/(n-r),f}}function Al(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function EB(){var e=El(Gb()(Tn));return e.copy=function(){return Al(e,EB())},go.apply(e,arguments)}function AB(){var e=bk(Gb()).domain([1,10]);return e.copy=function(){return Al(e,AB()).base(e.base())},go.apply(e,arguments)}function TB(){var e=wk(Gb());return e.copy=function(){return Al(e,TB()).constant(e.constant())},go.apply(e,arguments)}function Pk(){var e=jk(Gb());return e.copy=function(){return Al(e,Pk()).exponent(e.exponent())},go.apply(e,arguments)}function jye(){return Pk.apply(null,arguments).exponent(.5)}function OB(){var e=[],t=Tn;function r(n){if(n!=null&&!isNaN(n=+n))return t((mp(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(hl),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>tge(e,i/n))},r.copy=function(){return OB(t).domain(e)},go.apply(r,arguments)}function Wb(){var e=0,t=.5,r=1,n=1,a,i,o,c,d,f=Tn,m,h=!1,g;function x(b){return isNaN(b=+b)?g:(b=.5+((b=+m(b))-i)*(n*b<n*i?c:d),f(h?Math.max(0,Math.min(1,b)):b))}x.domain=function(b){return arguments.length?([e,t,r]=b,a=m(e=+e),i=m(t=+t),o=m(r=+r),c=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),n=i<a?-1:1,x):[e,t,r]},x.clamp=function(b){return arguments.length?(h=!!b,x):h},x.interpolator=function(b){return arguments.length?(f=b,x):f};function w(b){return function(j){var N,_,S;return arguments.length?([N,_,S]=j,f=Rge(b,[N,_,S]),x):[f(0),f(.5),f(1)]}}return x.range=w(Ki),x.rangeRound=w(gk),x.unknown=function(b){return arguments.length?(g=b,x):g},function(b){return m=b,a=b(e),i=b(t),o=b(r),c=a===i?0:.5/(i-a),d=i===o?0:.5/(o-i),n=i<a?-1:1,x}}function PB(){var e=El(Wb()(Tn));return e.copy=function(){return Al(e,PB())},go.apply(e,arguments)}function MB(){var e=bk(Wb()).domain([.1,1,10]);return e.copy=function(){return Al(e,MB()).base(e.base())},go.apply(e,arguments)}function RB(){var e=wk(Wb());return e.copy=function(){return Al(e,RB()).constant(e.constant())},go.apply(e,arguments)}function Mk(){var e=jk(Wb());return e.copy=function(){return Al(e,Mk()).exponent(e.exponent())},go.apply(e,arguments)}function Nye(){return Mk.apply(null,arguments).exponent(.5)}const Gm=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:mk,scaleDiverging:PB,scaleDivergingLog:MB,scaleDivergingPow:Mk,scaleDivergingSqrt:Nye,scaleDivergingSymlog:RB,scaleIdentity:fB,scaleImplicit:K2,scaleLinear:dB,scaleLog:hB,scaleOrdinal:fk,scalePoint:sge,scalePow:Nk,scaleQuantile:xB,scaleQuantize:yB,scaleRadial:gB,scaleSequential:EB,scaleSequentialLog:AB,scaleSequentialPow:Pk,scaleSequentialQuantile:OB,scaleSequentialSqrt:jye,scaleSequentialSymlog:TB,scaleSqrt:nxe,scaleSymlog:pB,scaleThreshold:vB,scaleTime:bye,scaleUtc:wye,tickFormat:uB},Symbol.toStringTag,{value:"Module"}));var xo=e=>e.chartData,Qb=fe([xo],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),DB=(e,t,r,n)=>n?Qb(e):xo(e),Sye=(e,t,r)=>r?Qb(e):xo(e);function no(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(ft(t)&&ft(r))return!0}return!1}function s4(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function IB(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,i;if(ft(r))a=r;else if(typeof r=="function")return;if(ft(n))i=n;else if(typeof n=="function")return;var o=[a,i];if(no(o))return o}}function _ye(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(no(n))return s4(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,i]=e,o,c;if(a==="auto")t!=null&&(o=Math.min(...t));else if(Ie(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t?.[0]))}catch{}else if(typeof a=="string"&&pR.test(a)){var d=pR.exec(a);if(d==null||d[1]==null||t==null)o=void 0;else{var f=+d[1];o=t[0]-f}}else o=t?.[0];if(i==="auto")t!=null&&(c=Math.max(...t));else if(Ie(i))c=i;else if(typeof i=="function")try{t!=null&&(c=i(t?.[1]))}catch{}else if(typeof i=="string"&&gR.test(i)){var m=gR.exec(i);if(m==null||m[1]==null||t==null)c=void 0;else{var h=+m[1];c=t[1]+h}}else c=t?.[1];var g=[o,c];if(no(g))return t==null?g:s4(g,t,r)}}}var gf=1e9,Cye={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Dk,Ht=!0,Xs="[DecimalError] ",Tc=Xs+"Invalid argument: ",Rk=Xs+"Exponent out of range: ",xf=Math.floor,fc=Math.pow,kye=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ls,Wr=1e7,Ft=7,LB=9007199254740991,yv=xf(LB/Ft),Te={};Te.absoluteValue=Te.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Te.comparedTo=Te.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Te.decimalPlaces=Te.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ft;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Te.dividedBy=Te.div=function(e){return Hi(this,new this.constructor(e))};Te.dividedToIntegerBy=Te.idiv=function(e){var t=this,r=t.constructor;return Rt(Hi(t,new r(e),0,1),r.precision)};Te.equals=Te.eq=function(e){return!this.cmp(e)};Te.exponent=function(){return Tr(this)};Te.greaterThan=Te.gt=function(e){return this.cmp(e)>0};Te.greaterThanOrEqualTo=Te.gte=function(e){return this.cmp(e)>=0};Te.isInteger=Te.isint=function(){return this.e>this.d.length-2};Te.isNegative=Te.isneg=function(){return this.s<0};Te.isPositive=Te.ispos=function(){return this.s>0};Te.isZero=function(){return this.s===0};Te.lessThan=Te.lt=function(e){return this.cmp(e)<0};Te.lessThanOrEqualTo=Te.lte=function(e){return this.cmp(e)<1};Te.logarithm=Te.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(ls))throw Error(Xs+"NaN");if(r.s<1)throw Error(Xs+(r.s?"NaN":"-Infinity"));return r.eq(ls)?new n(0):(Ht=!1,t=Hi(Ih(r,i),Ih(e,i),i),Ht=!0,Rt(t,a))};Te.minus=Te.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?UB(t,e):$B(t,(e.s=-e.s,e))};Te.modulo=Te.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Xs+"NaN");return r.s?(Ht=!1,t=Hi(r,e,0,1).times(e),Ht=!0,r.minus(t)):Rt(new n(r),a)};Te.naturalExponential=Te.exp=function(){return zB(this)};Te.naturalLogarithm=Te.ln=function(){return Ih(this)};Te.negated=Te.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Te.plus=Te.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?$B(t,e):UB(t,(e.s=-e.s,e))};Te.precision=Te.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Tc+e);if(t=Tr(a)+1,n=a.d.length-1,r=n*Ft+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Te.squareRoot=Te.sqrt=function(){var e,t,r,n,a,i,o,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(Xs+"NaN")}for(e=Tr(c),Ht=!1,a=Math.sqrt(+c),a==0||a==1/0?(t=Wa(c.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=xf((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new d(t)):n=new d(a.toString()),r=d.precision,a=o=r+3;;)if(i=n,n=i.plus(Hi(c,i,o+2)).times(.5),Wa(i.d).slice(0,o)===(t=Wa(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Rt(i,r+1,0),i.times(i).eq(c)){n=i;break}}else if(t!="9999")break;o+=4}return Ht=!0,Rt(n,r)};Te.times=Te.mul=function(e){var t,r,n,a,i,o,c,d,f,m=this,h=m.constructor,g=m.d,x=(e=new h(e)).d;if(!m.s||!e.s)return new h(0);for(e.s*=m.s,r=m.e+e.e,d=g.length,f=x.length,d<f&&(i=g,g=x,x=i,o=d,d=f,f=o),i=[],o=d+f,n=o;n--;)i.push(0);for(n=f;--n>=0;){for(t=0,a=d+n;a>n;)c=i[a]+x[n]*g[a-n-1]+t,i[a--]=c%Wr|0,t=c/Wr|0;i[a]=(i[a]+t)%Wr|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Ht?Rt(e,h.precision):e};Te.toDecimalPlaces=Te.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(ii(e,0,gf),t===void 0?t=n.rounding:ii(t,0,8),Rt(r,e+Tr(r)+1,t))};Te.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Bc(n,!0):(ii(e,0,gf),t===void 0?t=a.rounding:ii(t,0,8),n=Rt(new a(n),e+1,t),r=Bc(n,!0,e+1)),r};Te.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?Bc(a):(ii(e,0,gf),t===void 0?t=i.rounding:ii(t,0,8),n=Rt(new i(a),e+Tr(a)+1,t),r=Bc(n.abs(),!1,e+Tr(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Te.toInteger=Te.toint=function(){var e=this,t=e.constructor;return Rt(new t(e),Tr(e)+1,t.rounding)};Te.toNumber=function(){return+this};Te.toPower=Te.pow=function(e){var t,r,n,a,i,o,c=this,d=c.constructor,f=12,m=+(e=new d(e));if(!e.s)return new d(ls);if(c=new d(c),!c.s){if(e.s<1)throw Error(Xs+"Infinity");return c}if(c.eq(ls))return c;if(n=d.precision,e.eq(ls))return Rt(c,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=c.s,o){if((r=m<0?-m:m)<=LB){for(a=new d(ls),t=Math.ceil(n/Ft+4),Ht=!1;r%2&&(a=a.times(c),i4(a.d,t)),r=xf(r/2),r!==0;)c=c.times(c),i4(c.d,t);return Ht=!0,e.s<0?new d(ls).div(a):Rt(a,n)}}else if(i<0)throw Error(Xs+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,c.s=1,Ht=!1,a=e.times(Ih(c,n+f)),Ht=!0,a=zB(a),a.s=i,a};Te.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Tr(a),n=Bc(a,r<=i.toExpNeg||r>=i.toExpPos)):(ii(e,1,gf),t===void 0?t=i.rounding:ii(t,0,8),a=Rt(new i(a),e,t),r=Tr(a),n=Bc(a,e<=r||r<=i.toExpNeg,e)),n};Te.toSignificantDigits=Te.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(ii(e,1,gf),t===void 0?t=n.rounding:ii(t,0,8)),Rt(new n(r),e,t)};Te.toString=Te.valueOf=Te.val=Te.toJSON=Te[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Tr(e),r=e.constructor;return Bc(e,t<=r.toExpNeg||t>=r.toExpPos)};function $B(e,t){var r,n,a,i,o,c,d,f,m=e.constructor,h=m.precision;if(!e.s||!t.s)return t.s||(t=new m(e)),Ht?Rt(t,h):t;if(d=e.d,f=t.d,o=e.e,a=t.e,d=d.slice(),i=o-a,i){for(i<0?(n=d,i=-i,c=f.length):(n=f,a=o,c=d.length),o=Math.ceil(h/Ft),c=o>c?o+1:c+1,i>c&&(i=c,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(c=d.length,i=f.length,c-i<0&&(i=c,n=f,f=d,d=n),r=0;i;)r=(d[--i]=d[i]+f[i]+r)/Wr|0,d[i]%=Wr;for(r&&(d.unshift(r),++a),c=d.length;d[--c]==0;)d.pop();return t.d=d,t.e=a,Ht?Rt(t,h):t}function ii(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Tc+e)}function Wa(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=Ft-n.length,r&&(i+=il(r)),i+=n;o=e[t],n=o+"",r=Ft-n.length,r&&(i+=il(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Hi=(function(){function e(n,a){var i,o=0,c=n.length;for(n=n.slice();c--;)i=n[c]*a+o,n[c]=i%Wr|0,o=i/Wr|0;return o&&n.unshift(o),n}function t(n,a,i,o){var c,d;if(i!=o)d=i>o?1:-1;else for(c=d=0;c<i;c++)if(n[c]!=a[c]){d=n[c]>a[c]?1:-1;break}return d}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*Wr+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var c,d,f,m,h,g,x,w,b,j,N,_,S,k,A,T,O,P,R=n.constructor,M=n.s==a.s?1:-1,D=n.d,z=a.d;if(!n.s)return new R(n);if(!a.s)throw Error(Xs+"Division by zero");for(d=n.e-a.e,O=z.length,A=D.length,x=new R(M),w=x.d=[],f=0;z[f]==(D[f]||0);)++f;if(z[f]>(D[f]||0)&&--d,i==null?_=i=R.precision:o?_=i+(Tr(n)-Tr(a))+1:_=i,_<0)return new R(0);if(_=_/Ft+2|0,f=0,O==1)for(m=0,z=z[0],_++;(f<A||m)&&_--;f++)S=m*Wr+(D[f]||0),w[f]=S/z|0,m=S%z|0;else{for(m=Wr/(z[0]+1)|0,m>1&&(z=e(z,m),D=e(D,m),O=z.length,A=D.length),k=O,b=D.slice(0,O),j=b.length;j<O;)b[j++]=0;P=z.slice(),P.unshift(0),T=z[0],z[1]>=Wr/2&&++T;do m=0,c=t(z,b,O,j),c<0?(N=b[0],O!=j&&(N=N*Wr+(b[1]||0)),m=N/T|0,m>1?(m>=Wr&&(m=Wr-1),h=e(z,m),g=h.length,j=b.length,c=t(h,b,g,j),c==1&&(m--,r(h,O<g?P:z,g))):(m==0&&(c=m=1),h=z.slice()),g=h.length,g<j&&h.unshift(0),r(b,h,j),c==-1&&(j=b.length,c=t(z,b,O,j),c<1&&(m++,r(b,O<j?P:z,j))),j=b.length):c===0&&(m++,b=[0]),w[f++]=m,c&&b[0]?b[j++]=D[k]||0:(b=[D[k]],j=1);while((k++<A||b[0]!==void 0)&&_--)}return w[0]||w.shift(),x.e=d,Rt(x,o?i+Tr(x)+1:i)}})();function zB(e,t){var r,n,a,i,o,c,d=0,f=0,m=e.constructor,h=m.precision;if(Tr(e)>16)throw Error(Rk+Tr(e));if(!e.s)return new m(ls);for(Ht=!1,c=h,o=new m(.03125);e.abs().gte(.1);)e=e.times(o),f+=5;for(n=Math.log(fc(2,f))/Math.LN10*2+5|0,c+=n,r=a=i=new m(ls),m.precision=c;;){if(a=Rt(a.times(e),c),r=r.times(++d),o=i.plus(Hi(a,r,c)),Wa(o.d).slice(0,c)===Wa(i.d).slice(0,c)){for(;f--;)i=Rt(i.times(i),c);return m.precision=h,t==null?(Ht=!0,Rt(i,h)):i}i=o}}function Tr(e){for(var t=e.e*Ft,r=e.d[0];r>=10;r/=10)t++;return t}function FN(e,t,r){if(t>e.LN10.sd())throw Ht=!0,r&&(e.precision=r),Error(Xs+"LN10 precision limit exceeded");return Rt(new e(e.LN10),t)}function il(e){for(var t="";e--;)t+="0";return t}function Ih(e,t){var r,n,a,i,o,c,d,f,m,h=1,g=10,x=e,w=x.d,b=x.constructor,j=b.precision;if(x.s<1)throw Error(Xs+(x.s?"NaN":"-Infinity"));if(x.eq(ls))return new b(0);if(t==null?(Ht=!1,f=j):f=t,x.eq(10))return t==null&&(Ht=!0),FN(b,f);if(f+=g,b.precision=f,r=Wa(w),n=r.charAt(0),i=Tr(x),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=Wa(x.d),n=r.charAt(0),h++;i=Tr(x),n>1?(x=new b("0."+r),i++):x=new b(n+"."+r.slice(1))}else return d=FN(b,f+2,j).times(i+""),x=Ih(new b(n+"."+r.slice(1)),f-g).plus(d),b.precision=j,t==null?(Ht=!0,Rt(x,j)):x;for(c=o=x=Hi(x.minus(ls),x.plus(ls),f),m=Rt(x.times(x),f),a=3;;){if(o=Rt(o.times(m),f),d=c.plus(Hi(o,new b(a),f)),Wa(d.d).slice(0,f)===Wa(c.d).slice(0,f))return c=c.times(2),i!==0&&(c=c.plus(FN(b,f+2,j).times(i+""))),c=Hi(c,new b(h),f),b.precision=j,t==null?(Ht=!0,Rt(c,j)):c;c=d,a+=2}}function a4(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=xf(r/Ft),e.d=[],n=(r+1)%Ft,r<0&&(n+=Ft),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Ft;n<a;)e.d.push(+t.slice(n,n+=Ft));t=t.slice(n),n=Ft-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Ht&&(e.e>yv||e.e<-yv))throw Error(Rk+r)}else e.s=0,e.e=0,e.d=[0];return e}function Rt(e,t,r){var n,a,i,o,c,d,f,m,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Ft,a=t,f=h[m=0];else{if(m=Math.ceil((n+1)/Ft),i=h.length,m>=i)return e;for(f=i=h[m],o=1;i>=10;i/=10)o++;n%=Ft,a=n-Ft+o}if(r!==void 0&&(i=fc(10,o-a-1),c=f/i%10|0,d=t<0||h[m+1]!==void 0||f%i,d=r<4?(c||d)&&(r==0||r==(e.s<0?3:2)):c>5||c==5&&(r==4||d||r==6&&(n>0?a>0?f/fc(10,o-a):0:h[m-1])%10&1||r==(e.s<0?8:7))),t<1||!h[0])return d?(i=Tr(e),h.length=1,t=t-i-1,h[0]=fc(10,(Ft-t%Ft)%Ft),e.e=xf(-t/Ft)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(n==0?(h.length=m,i=1,m--):(h.length=m+1,i=fc(10,Ft-n),h[m]=a>0?(f/fc(10,o-a)%fc(10,a)|0)*i:0),d)for(;;)if(m==0){(h[0]+=i)==Wr&&(h[0]=1,++e.e);break}else{if(h[m]+=i,h[m]!=Wr)break;h[m--]=0,i=1}for(n=h.length;h[--n]===0;)h.pop();if(Ht&&(e.e>yv||e.e<-yv))throw Error(Rk+Tr(e));return e}function UB(e,t){var r,n,a,i,o,c,d,f,m,h,g=e.constructor,x=g.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new g(e),Ht?Rt(t,x):t;if(d=e.d,h=t.d,n=t.e,f=e.e,d=d.slice(),o=f-n,o){for(m=o<0,m?(r=d,o=-o,c=h.length):(r=h,n=f,c=d.length),a=Math.max(Math.ceil(x/Ft),c)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=d.length,c=h.length,m=a<c,m&&(c=a),a=0;a<c;a++)if(d[a]!=h[a]){m=d[a]<h[a];break}o=0}for(m&&(r=d,d=h,h=r,t.s=-t.s),c=d.length,a=h.length-c;a>0;--a)d[c++]=0;for(a=h.length;a>o;){if(d[--a]<h[a]){for(i=a;i&&d[--i]===0;)d[i]=Wr-1;--d[i],d[a]+=Wr}d[a]-=h[a]}for(;d[--c]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=n,Ht?Rt(t,x):t):new g(0)}function Bc(e,t,r){var n,a=Tr(e),i=Wa(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+il(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+il(-a-1)+i,r&&(n=r-o)>0&&(i+=il(n))):a>=o?(i+=il(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+il(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=il(n))),e.s<0?"-"+i:i}function i4(e,t){if(e.length>t)return e.length=t,!0}function FB(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Tc+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return a4(o,i.toString())}else if(typeof i!="string")throw Error(Tc+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,kye.test(i))a4(o,i);else throw Error(Tc+i)}if(a.prototype=Te,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=FB,a.config=a.set=Eye,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function Eye(e){if(!e||typeof e!="object")throw Error(Xs+"Object expected");var t,r,n,a=["precision",1,gf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(xf(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Tc+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Tc+r+": "+n);return this}var Dk=FB(Cye);ls=new Dk(1);const kt=Dk;function BB(e){var t;return e===0?t=1:t=Math.floor(new kt(e).abs().log(10).toNumber())+1,t}function qB(e,t,r){for(var n=new kt(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var VB=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},KB=(e,t,r)=>{if(e.lte(0))return new kt(0);var n=BB(e.toNumber()),a=new kt(10).pow(n),i=e.div(a),o=n!==1?.05:.1,c=new kt(Math.ceil(i.div(o).toNumber())).add(r).mul(o),d=c.mul(a);return t?new kt(d.toNumber()):new kt(Math.ceil(d.toNumber()))},Aye=(e,t,r)=>{var n=new kt(1),a=new kt(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new kt(10).pow(BB(e)-1),a=new kt(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new kt(Math.floor(e)))}else e===0?a=new kt(Math.floor((t-1)/2)):r||(a=new kt(Math.floor(e)));for(var o=Math.floor((t-1)/2),c=[],d=0;d<t;d++)c.push(a.add(new kt(d-o).mul(n)).toNumber());return c},HB=function(t,r,n,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new kt(0),tickMin:new kt(0),tickMax:new kt(0)};var o=KB(new kt(r).sub(t).div(n-1),a,i),c;t<=0&&r>=0?c=new kt(0):(c=new kt(t).add(r).div(2),c=c.sub(new kt(c).mod(o)));var d=Math.ceil(c.sub(t).div(o).toNumber()),f=Math.ceil(new kt(r).sub(c).div(o).toNumber()),m=d+f+1;return m>n?HB(t,r,n,a,i+1):(m<n&&(f=r>0?f+(n-m):f,d=r>0?d:d+(n-m)),{step:o,tickMin:c.sub(new kt(d).mul(o)),tickMax:c.add(new kt(f).mul(o))})},Tye=function(t){var[r,n]=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),[c,d]=VB([r,n]);if(c===-1/0||d===1/0){var f=d===1/0?[c,...Array(a-1).fill(1/0)]:[...Array(a-1).fill(-1/0),d];return r>n?f.reverse():f}if(c===d)return Aye(c,a,i);var{step:m,tickMin:h,tickMax:g}=HB(c,d,o,i,0),x=qB(h,g.add(new kt(.1).mul(m)),m);return r>n?x.reverse():x},Oye=function(t,r){var[n,a]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,c]=VB([n,a]);if(o===-1/0||c===1/0)return[n,a];if(o===c)return[o];var d=Math.max(r,2),f=KB(new kt(c).sub(o).div(d-1),i,0),m=[...qB(new kt(o),new kt(c),f),c];return i===!1&&(m=m.map(h=>Math.round(h))),n>a?m.reverse():m},GB=e=>e.rootProps.maxBarSize,Pye=e=>e.rootProps.barGap,WB=e=>e.rootProps.barCategoryGap,Mye=e=>e.rootProps.barSize,xp=e=>e.rootProps.stackOffset,QB=e=>e.rootProps.reverseStackOrder,Ik=e=>e.options.chartName,Lk=e=>e.rootProps.syncId,YB=e=>e.rootProps.syncMethod,$k=e=>e.options.eventEmitter,dn={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},ic={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},Fa={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},Yb=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t};function Xb(e,t,r){if(r!=="auto")return r;if(e!=null)return kl(e,t)?"category":"number"}function o4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o4(Object(r),!0).forEach(function(n){Rye(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rye(e,t,r){return(t=Dye(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dye(e){var t=Iye(e,"string");return typeof t=="symbol"?t:t+""}function Iye(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var l4={allowDataOverflow:ic.allowDataOverflow,allowDecimals:ic.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:ic.angleAxisId,includeHidden:!1,name:void 0,reversed:ic.reversed,scale:ic.scale,tick:ic.tick,tickCount:void 0,ticks:void 0,type:ic.type,unit:void 0},c4={allowDataOverflow:Fa.allowDataOverflow,allowDecimals:Fa.allowDecimals,allowDuplicatedCategory:Fa.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Fa.radiusAxisId,includeHidden:Fa.includeHidden,name:void 0,reversed:Fa.reversed,scale:Fa.scale,tick:Fa.tick,tickCount:Fa.tickCount,ticks:void 0,type:Fa.type,unit:void 0},Lye=(e,t)=>{if(t!=null)return e.polarAxis.angleAxis[t]},zk=fe([Lye,OF],(e,t)=>{var r;if(e!=null)return e;var n=(r=Xb(t,"angleAxis",l4.type))!==null&&r!==void 0?r:"category";return vv(vv({},l4),{},{type:n})}),$ye=(e,t)=>e.polarAxis.radiusAxis[t],Uk=fe([$ye,OF],(e,t)=>{var r;if(e!=null)return e;var n=(r=Xb(t,"radiusAxis",c4.type))!==null&&r!==void 0?r:"category";return vv(vv({},c4),{},{type:n})}),Zb=e=>e.polarOptions,Fk=fe([ho,po,Br],WF),XB=fe([Zb,Fk],(e,t)=>{if(e!=null)return jn(e.innerRadius,t,0)}),ZB=fe([Zb,Fk],(e,t)=>{if(e!=null)return jn(e.outerRadius,t,t*.8)}),zye=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},JB=fe([Zb],zye);fe([zk,JB],Yb);var eq=fe([Fk,XB,ZB],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});fe([Uk,eq],Yb);var tq=fe([St,Zb,XB,ZB,ho,po],(e,t,r,n,a,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:c,startAngle:d,endAngle:f}=t;return{cx:jn(o,a,a/2),cy:jn(c,i,i/2),innerRadius:r,outerRadius:n,startAngle:d,endAngle:f,clockWise:!1}}}),rr=(e,t)=>t,yp=(e,t,r)=>r;function Bk(e){return e?.id}function rq(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:a,dataKey:i}=r,o=new Map;return e.forEach(c=>{var d,f=(d=c.data)!==null&&d!==void 0?d:n;if(!(f==null||f.length===0)){var m=Bk(c);f.forEach((h,g)=>{var x=i==null||a?g:String(Bt(h,i,null)),w=Bt(h,c.dataKey,0),b;o.has(x)?b=o.get(x):b={},Object.assign(b,{[m]:w}),o.set(x,b)})}}),Array.from(o.values())}function Jb(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var e0=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function t0(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function Uye(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Jr=e=>{var t=St(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},yf=e=>e.tooltip.settings.axisId;function Fye(e){if(e in Gm)return Gm[e]();var t="scale".concat(op(e));if(t in Gm)return Gm[t]()}function u4(e){var t=e.ticks,r=e.bandwidth,n=e.range(),a=[Math.min(...n),Math.max(...n)];return{domain:()=>e.domain(),range:(function(i){function o(){return i.apply(this,arguments)}return o.toString=function(){return i.toString()},o})(()=>a),rangeMin:()=>a[0],rangeMax:()=>a[1],isInRange(i){var o=a[0],c=a[1];return o<=c?i>=o&&i<=c:i>=c&&i<=o},bandwidth:r?()=>r.call(e):void 0,ticks:t?i=>t.call(e,i):void 0,map:(i,o)=>{var c=e(i);if(c!=null){if(e.bandwidth&&o!==null&&o!==void 0&&o.position){var d=e.bandwidth();switch(o.position){case"middle":c+=d/2;break;case"end":c+=d;break}}return c}}}}function d4(e,t,r){if(typeof e=="function")return u4(e.copy().domain(t).range(r));if(e!=null){var n=Fye(e);if(n!=null)return n.domain(t).range(r),u4(n)}}var nq=(e,t)=>{if(t!=null)switch(e){case"linear":{if(!no(t)){for(var r,n,a=0;a<t.length;a++){var i=t[a];ft(i)&&((r===void 0||i<r)&&(r=i),(n===void 0||i>n)&&(n=i))}return r!==void 0&&n!==void 0?[r,n]:void 0}return t}default:return t}};function f4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f4(Object(r),!0).forEach(function(n){Bye(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bye(e,t,r){return(t=qye(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qye(e){var t=Vye(e,"string");return typeof t=="symbol"?t:t+""}function Vye(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y2=[0,"auto"],Hr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},sq=(e,t)=>e.cartesianAxis.xAxis[t],yo=(e,t)=>{var r=sq(e,t);return r??Hr},Gr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Y2,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:up},aq=(e,t)=>e.cartesianAxis.yAxis[t],vo=(e,t)=>{var r=aq(e,t);return r??Gr},Kye={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},qk=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??Kye},mr=(e,t,r)=>{switch(t){case"xAxis":return yo(e,r);case"yAxis":return vo(e,r);case"zAxis":return qk(e,r);case"angleAxis":return zk(e,r);case"radiusAxis":return Uk(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Hye=(e,t,r)=>{switch(t){case"xAxis":return yo(e,r);case"yAxis":return vo(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},vf=(e,t,r)=>{switch(t){case"xAxis":return yo(e,r);case"yAxis":return vo(e,r);case"angleAxis":return zk(e,r);case"radiusAxis":return Uk(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},iq=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function Vk(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Kk=e=>e.graphicalItems.cartesianItems,Gye=fe([rr,yp],Vk),Hk=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),vp=fe([Kk,mr,Gye],Hk,{memoizeOptions:{resultEqualityCheck:t0}}),oq=fe([vp],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Jb)),lq=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Wye=fe([vp],lq),Gk=e=>e.map(t=>t.data).filter(Boolean).flat(1),Qye=fe([vp],Gk,{memoizeOptions:{resultEqualityCheck:t0}}),Wk=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},Qk=fe([Qye,DB],Wk),Yk=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:Bt(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Bt(a,n)}))):e.map(n=>({value:n})),r0=fe([Qk,mr,vp],Yk);function cq(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function cy(e){if(si(e)||e instanceof Date){var t=Number(e);if(ft(t))return t}}function m4(e){if(Array.isArray(e)){var t=[cy(e[0]),cy(e[1])];return no(t)?t:void 0}var r=cy(e);if(r!=null)return[r,r]}function so(e){return e.map(cy).filter(Kn)}function Yye(e,t,r){return!r||typeof t!="number"||ni(t)?[]:r.length?so(r.flatMap(n=>{var a=Bt(e,n.dataKey),i,o;if(Array.isArray(a)?[i,o]=a:i=o=a,!(!ft(i)||!ft(o)))return[t-i,t+o]})):[]}var Vr=e=>{var t=Jr(e),r=yf(e);return vf(e,t,r)},bp=fe([Vr],e=>e?.dataKey),Xye=fe([oq,DB,Vr],rq),uq=(e,t,r,n)=>{var a={},i=t.reduce((o,c)=>{if(c.stackId==null)return o;var d=o[c.stackId];return d==null&&(d=[]),d.push(c),o[c.stackId]=d,o},a);return Object.fromEntries(Object.entries(i).map(o=>{var[c,d]=o,f=n?[...d].reverse():d,m=f.map(Bk);return[c,{stackedData:Cme(e,m,r),graphicalItems:f}]}))},X2=fe([Xye,oq,xp,QB],uq),dq=(e,t,r,n)=>{var{dataStartIndex:a,dataEndIndex:i}=t;if(n==null&&r!=="zAxis"){var o=Ome(e,a,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},Zye=fe([mr],e=>e.allowDataOverflow),Xk=e=>{var t;if(e==null||!("domain"in e))return Y2;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=so(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:Y2},Zk=fe([mr],Xk),Jk=fe([Zk,Zye],IB),Jye=fe([X2,xo,rr,Jk],dq,{memoizeOptions:{resultEqualityCheck:e0}}),n0=e=>e.errorBars,eve=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>cq(r,n)),wv=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var i=a.flat(),o=Math.min(...i),c=Math.max(...i);return[o,c]}},eE=(e,t,r,n,a)=>{var i,o;if(r.length>0&&e.forEach(c=>{r.forEach(d=>{var f,m,h=(f=n[d.id])===null||f===void 0?void 0:f.filter(N=>cq(a,N)),g=Bt(c,(m=t.dataKey)!==null&&m!==void 0?m:d.dataKey),x=Yye(c,g,h);if(x.length>=2){var w=Math.min(...x),b=Math.max(...x);(i==null||w<i)&&(i=w),(o==null||b>o)&&(o=b)}var j=m4(g);j!=null&&(i=i==null?j[0]:Math.min(i,j[0]),o=o==null?j[1]:Math.max(o,j[1]))})}),t?.dataKey!=null&&e.forEach(c=>{var d=m4(Bt(c,t.dataKey));d!=null&&(i=i==null?d[0]:Math.min(i,d[0]),o=o==null?d[1]:Math.max(o,d[1]))}),ft(i)&&ft(o))return[i,o]},tve=fe([Qk,mr,Wye,n0,rr],eE,{memoizeOptions:{resultEqualityCheck:e0}});function rve(e){var{value:t}=e;if(si(t)||t instanceof Date)return t}var nve=(e,t,r)=>{var n=e.map(rve).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&CU(n))?ZF(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},fq=e=>e.referenceElements.dots,bf=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),sve=fe([fq,rr,yp],bf),mq=e=>e.referenceElements.areas,ave=fe([mq,rr,yp],bf),hq=e=>e.referenceElements.lines,ive=fe([hq,rr,yp],bf),pq=(e,t)=>{if(e!=null){var r=so(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},ove=fe(sve,rr,pq),gq=(e,t)=>{if(e!=null){var r=so(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},lve=fe([ave,rr],gq);function cve(e){var t;if(e.x!=null)return so([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:so(r)}function uve(e){var t;if(e.y!=null)return so([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:so(r)}var xq=(e,t)=>{if(e!=null){var r=e.flatMap(n=>t==="xAxis"?cve(n):uve(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},dve=fe([ive,rr],xq),fve=fe(ove,dve,lve,(e,t,r)=>wv(e,r,t)),tE=(e,t,r,n,a,i,o,c)=>{if(r!=null)return r;var d=o==="vertical"&&c==="xAxis"||o==="horizontal"&&c==="yAxis",f=d?wv(n,i,a):wv(i,a);return _ye(t,f,e.allowDataOverflow)},mve=fe([mr,Zk,Jk,Jye,tve,fve,St,rr],tE,{memoizeOptions:{resultEqualityCheck:e0}}),hve=[0,1],rE=(e,t,r,n,a,i,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:c,type:d}=e,f=kl(t,i);if(f&&c==null){var m;return ZF(0,(m=r?.length)!==null&&m!==void 0?m:0)}return d==="category"?nve(n,e,f):a==="expand"?hve:o}},nE=fe([mr,St,Qk,r0,xp,rr,mve],rE);function pve(e){return e in Gm}var yq=(e,t,r)=>{if(e!=null){var{scale:n,type:a}=e;if(n==="auto")return a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!t)?"point":a==="category"?"band":"linear";if(typeof n=="string"){var i="scale".concat(op(n));return pve(i)?i:"point"}}},Tl=fe([mr,iq,Ik],yq);function sE(e,t,r,n){if(!(r==null||n==null))return typeof e.scale=="function"?d4(e.scale,r,n):d4(t,r,n)}var aE=(e,t,r)=>{var n=Xk(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&no(e))return Tye(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&no(e))return Oye(e,t.tickCount,t.allowDecimals)}},iE=fe([nE,vf,Tl],aE),oE=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&no(t)&&Array.isArray(r)&&r.length>0){var a,i,o=t[0],c=(a=r[0])!==null&&a!==void 0?a:0,d=t[1],f=(i=r[r.length-1])!==null&&i!==void 0?i:0;return[Math.min(o,c),Math.max(d,f)]}return t},gve=fe([mr,nE,iE,rr],oE),xve=fe(r0,mr,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(so(e.map(h=>h.value))).sort((h,g)=>h-g),a=n[0],i=n[n.length-1];if(a==null||i==null)return 1/0;var o=i-a;if(o===0)return 1/0;for(var c=0;c<n.length-1;c++){var d=n[c],f=n[c+1];if(!(d==null||f==null)){var m=f-d;r=Math.min(r,m)}}return r/o}}),vq=fe(xve,St,WB,Br,(e,t,r,n,a)=>a,(e,t,r,n,a)=>{if(!ft(e))return 0;var i=t==="vertical"?n.height:n.width;if(a==="gap")return e*i/2;if(a==="no-gap"){var o=jn(r,e*i),c=e*i/2;return c-o-(c-o)/i*o}return 0}),yve=(e,t,r)=>{var n=yo(e,t);return n==null||typeof n.padding!="string"?0:vq(e,"xAxis",t,r,n.padding)},vve=(e,t,r)=>{var n=vo(e,t);return n==null||typeof n.padding!="string"?0:vq(e,"yAxis",t,r,n.padding)},bve=fe(yo,yve,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),wve=fe(vo,vve,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),jve=fe([Br,bve,Rb,Mb,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:i}=n;return a?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),Nve=fe([Br,St,wve,Rb,Mb,(e,t,r)=>r],(e,t,r,n,a,i)=>{var{padding:o}=a;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),wp=(e,t,r,n)=>{var a;switch(t){case"xAxis":return jve(e,r,n);case"yAxis":return Nve(e,r,n);case"zAxis":return(a=qk(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return JB(e);case"radiusAxis":return eq(e,r);default:return}},bq=fe([mr,wp],Yb),Sve=fe([Tl,gve],nq),s0=fe([mr,Tl,Sve,bq],sE);fe([vp,n0,rr],eve);function wq(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var a0=(e,t)=>t,i0=(e,t,r)=>r,_ve=fe(Ob,a0,i0,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(wq)),Cve=fe(Pb,a0,i0,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(wq)),jq=(e,t)=>({width:e.width,height:t.height}),kve=(e,t)=>{var r=typeof t.width=="number"?t.width:up;return{width:r,height:e.height}},Nq=fe(Br,yo,jq),Eve=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},Ave=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},Tve=fe(po,Br,_ve,a0,i0,(e,t,r,n,a)=>{var i={},o;return r.forEach(c=>{var d=jq(t,c);o==null&&(o=Eve(t,n,e));var f=n==="top"&&!a||n==="bottom"&&a;i[c.id]=o-Number(f)*d.height,o+=(f?-1:1)*d.height}),i}),Ove=fe(ho,Br,Cve,a0,i0,(e,t,r,n,a)=>{var i={},o;return r.forEach(c=>{var d=kve(t,c);o==null&&(o=Ave(t,n,e));var f=n==="left"&&!a||n==="right"&&a;i[c.id]=o-Number(f)*d.width,o+=(f?-1:1)*d.width}),i}),Pve=(e,t)=>{var r=yo(e,t);if(r!=null)return Tve(e,r.orientation,r.mirror)},Mve=fe([Br,yo,Pve,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r?.[n];return a==null?{x:e.left,y:0}:{x:e.left,y:a}}}),Rve=(e,t)=>{var r=vo(e,t);if(r!=null)return Ove(e,r.orientation,r.mirror)},Dve=fe([Br,vo,Rve,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r?.[n];return a==null?{x:0,y:e.top}:{x:a,y:e.top}}}),Sq=fe(Br,vo,(e,t)=>{var r=typeof t.width=="number"?t.width:up;return{width:r,height:e.height}}),h4=(e,t,r)=>{switch(t){case"xAxis":return Nq(e,r).width;case"yAxis":return Sq(e,r).height;default:return}},_q=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:i,dataKey:o}=r,c=kl(e,n),d=t.map(f=>f.value);if(o&&c&&i==="category"&&a&&CU(d))return d}},lE=fe([St,r0,mr,rr],_q),Cq=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:i}=r,o=kl(e,n);if(o&&(a==="number"||i!=="auto"))return t.map(c=>c.value)}},cE=fe([St,r0,vf,rr],Cq),p4=fe([St,Hye,Tl,s0,lE,cE,wp,iE,rr],(e,t,r,n,a,i,o,c,d)=>{if(t!=null){var f=kl(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:i,duplicateDomain:a,isCategorical:f,niceTicks:c,range:o,realScaleType:r,scale:n}}}),Ive=(e,t,r,n,a,i,o,c,d)=>{if(!(t==null||n==null)){var f=kl(e,d),{type:m,ticks:h,tickCount:g}=t,x=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,w=m==="category"&&n.bandwidth?n.bandwidth()/x:0;w=d==="angleAxis"&&i!=null&&i.length>=2?Yr(i[0]-i[1])*2*w:w;var b=h||a;return b?b.map((j,N)=>{var _=o?o.indexOf(j):j,S=n.map(_);return ft(S)?{index:N,coordinate:S+w,value:j,offset:w}:null}).filter(Kn):f&&c?c.map((j,N)=>{var _=n.map(j);return ft(_)?{coordinate:_+w,value:j,index:N,offset:w}:null}).filter(Kn):n.ticks?n.ticks(g).map((j,N)=>{var _=n.map(j);return ft(_)?{coordinate:_+w,value:j,index:N,offset:w}:null}).filter(Kn):n.domain().map((j,N)=>{var _=n.map(j);return ft(_)?{coordinate:_+w,value:o?o[j]:j,index:N,offset:w}:null}).filter(Kn)}},kq=fe([St,vf,Tl,s0,iE,wp,lE,cE,rr],Ive),Lve=(e,t,r,n,a,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var c=kl(e,o),{tickCount:d}=t,f=0;return f=o==="angleAxis"&&n?.length>=2?Yr(n[0]-n[1])*2*f:f,c&&i?i.map((m,h)=>{var g=r.map(m);return ft(g)?{coordinate:g+f,value:m,index:h,offset:f}:null}).filter(Kn):r.ticks?r.ticks(d).map((m,h)=>{var g=r.map(m);return ft(g)?{coordinate:g+f,value:m,index:h,offset:f}:null}).filter(Kn):r.domain().map((m,h)=>{var g=r.map(m);return ft(g)?{coordinate:g+f,value:a?a[m]:m,index:h,offset:f}:null}).filter(Kn)}},qd=fe([St,vf,s0,wp,lE,cE,rr],Lve),Vd=fe(mr,s0,(e,t)=>{if(!(e==null||t==null))return bv(bv({},e),{},{scale:t})}),$ve=fe([mr,Tl,nE,bq],sE);fe((e,t,r)=>qk(e,r),$ve,(e,t)=>{if(!(e==null||t==null))return bv(bv({},e),{},{scale:t})});var zve=fe([St,Ob,Pb],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Eq=e=>e.options.defaultTooltipEventType,Aq=e=>e.options.validateTooltipEventTypes;function Tq(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function uE(e,t){var r=Eq(e),n=Aq(e);return Tq(t,r,n)}function Uve(e){return Ue(t=>uE(t,e))}var Oq=(e,t)=>{var r,n=Number(t);if(!(ni(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},Fve=e=>e.tooltip.settings,cl={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Bve={itemInteraction:{click:cl,hover:cl},axisInteraction:{click:cl,hover:cl},keyboardInteraction:cl,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Pq=Yn({name:"tooltip",initialState:Bve,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Kt()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,a=xa(e).tooltipItemPayloads.indexOf(r);a>-1&&(e.tooltipItemPayloads[a]=n)},prepare:Kt()},removeTooltipEntrySettings:{reducer(e,t){var r=xa(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Kt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:qve,replaceTooltipEntrySettings:Vve,removeTooltipEntrySettings:Kve,setTooltipSettingsState:Hve,setActiveMouseOverItemIndex:Mq,mouseLeaveItem:Gve,mouseLeaveChart:Rq,setActiveClickItemIndex:Wve,setMouseOverAxisIndex:Dq,setMouseClickAxisIndex:Qve,setSyncInteraction:Z2,setKeyboardInteraction:J2}=Pq.actions,Yve=Pq.reducer;function g4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g4(Object(r),!0).forEach(function(n){Xve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xve(e,t,r){return(t=Zve(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zve(e){var t=Jve(e,"string");return typeof t=="symbol"?t:t+""}function Jve(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ebe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function tbe(e){return e.index!=null}var Iq=(e,t,r,n)=>{if(t==null)return cl;var a=ebe(e,t,r);if(a==null)return cl;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(tbe(a)){if(i)return Mx(Mx({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return Mx(Mx({},cl),{},{coordinate:a.coordinate})};function rbe(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function nbe(e,t){var r=rbe(e),n=t[0],a=t[1];if(r===void 0)return!1;var i=Math.min(n,a),o=Math.max(n,a);return r>=i&&r<=o}function sbe(e,t,r){if(r==null||t==null)return!0;var n=Bt(e,t);return n==null||!no(r)?!0:nbe(n,r)}var dE=(e,t,r,n)=>{var a=e?.index;if(a==null)return null;var i=Number(a);if(!ft(i))return a;var o=0,c=1/0;t.length>0&&(c=t.length-1);var d=Math.max(o,Math.min(i,c)),f=t[d];return f==null||sbe(f,r,n)?String(d):null},Lq=(e,t,r,n,a,i,o)=>{if(i!=null){var c=o[0],d=c?.getPosition(i);if(d!=null)return d;var f=a?.[Number(i)];if(f)return r==="horizontal"?{x:f.coordinate,y:(n.top+t)/2}:{x:(n.left+e)/2,y:f.coordinate}}},$q=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;if(r==="hover"?a=e.itemInteraction.hover.graphicalItemId:a=e.itemInteraction.click.graphicalItemId,a==null&&n!=null){var i=e.tooltipItemPayloads[0];return i!=null?[i]:[]}return e.tooltipItemPayloads.filter(o=>{var c;return((c=o.settings)===null||c===void 0?void 0:c.graphicalItemId)===a})},zq=e=>e.options.tooltipPayloadSearcher,wf=e=>e.tooltip;function x4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function y4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x4(Object(r),!0).forEach(function(n){abe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function abe(e,t,r){return(t=ibe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ibe(e){var t=obe(e,"string");return typeof t=="symbol"?t:t+""}function obe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lbe(e,t){return e??t}var Uq=(e,t,r,n,a,i,o)=>{if(!(t==null||i==null)){var{chartData:c,computedData:d,dataStartIndex:f,dataEndIndex:m}=r,h=[];return e.reduce((g,x)=>{var w,{dataDefinedOnItem:b,settings:j}=x,N=lbe(b,c),_=Array.isArray(N)?yF(N,f,m):N,S=(w=j?.dataKey)!==null&&w!==void 0?w:n,k=j?.nameKey,A;if(n&&Array.isArray(_)&&!Array.isArray(_[0])&&o==="axis"?A=ide(_,n,a):A=i(_,t,d,k),Array.isArray(A))A.forEach(O=>{var P=y4(y4({},j),{},{name:O.name,unit:O.unit,color:void 0,fill:void 0});g.push(xR({tooltipEntrySettings:P,dataKey:O.dataKey,payload:O.payload,value:Bt(O.payload,O.dataKey),name:O.name}))});else{var T;g.push(xR({tooltipEntrySettings:j,dataKey:S,payload:A,value:Bt(A,S),name:(T=Bt(A,k))!==null&&T!==void 0?T:j?.name}))}return g},h)}},fE=fe([Vr,iq,Ik],yq),cbe=fe([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),ube=fe([Jr,yf],Vk),jf=fe([cbe,Vr,ube],Hk,{memoizeOptions:{resultEqualityCheck:t0}}),dbe=fe([jf],e=>e.filter(Jb)),fbe=fe([jf],Gk,{memoizeOptions:{resultEqualityCheck:t0}}),Nf=fe([fbe,xo],Wk),mbe=fe([dbe,xo,Vr],rq),mE=fe([Nf,Vr,jf],Yk),Fq=fe([Vr],Xk),hbe=fe([Vr],e=>e.allowDataOverflow),Bq=fe([Fq,hbe],IB),pbe=fe([jf],e=>e.filter(Jb)),gbe=fe([mbe,pbe,xp,QB],uq),xbe=fe([gbe,xo,Jr,Bq],dq),ybe=fe([jf],lq),vbe=fe([Nf,Vr,ybe,n0,Jr],eE,{memoizeOptions:{resultEqualityCheck:e0}}),bbe=fe([fq,Jr,yf],bf),wbe=fe([bbe,Jr],pq),jbe=fe([mq,Jr,yf],bf),Nbe=fe([jbe,Jr],gq),Sbe=fe([hq,Jr,yf],bf),_be=fe([Sbe,Jr],xq),Cbe=fe([wbe,_be,Nbe],wv),kbe=fe([Vr,Fq,Bq,xbe,vbe,Cbe,St,Jr],tE),jp=fe([Vr,St,Nf,mE,xp,Jr,kbe],rE),Ebe=fe([jp,Vr,fE],aE),Abe=fe([Vr,jp,Ebe,Jr],oE),qq=e=>{var t=Jr(e),r=yf(e),n=!1;return wp(e,t,r,n)},Vq=fe([Vr,qq],Yb),Kq=fe([Vr,fE,Abe,Vq],sE),Tbe=fe([St,mE,Vr,Jr],_q),Obe=fe([St,mE,Vr,Jr],Cq),Pbe=(e,t,r,n,a,i,o,c)=>{if(t){var{type:d}=t,f=kl(e,c);if(n){var m=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,h=d==="category"&&n.bandwidth?n.bandwidth()/m:0;return h=c==="angleAxis"&&a!=null&&a?.length>=2?Yr(a[0]-a[1])*2*h:h,f&&o?o.map((g,x)=>{var w=n.map(g);return ft(w)?{coordinate:w+h,value:g,index:x,offset:h}:null}).filter(Kn):n.domain().map((g,x)=>{var w=n.map(g);return ft(w)?{coordinate:w+h,value:i?i[g]:g,index:x,offset:h}:null}).filter(Kn)}}},bo=fe([St,Vr,fE,Kq,qq,Tbe,Obe,Jr],Pbe),hE=fe([Eq,Aq,Fve],(e,t,r)=>Tq(r.shared,e,t)),Hq=e=>e.tooltip.settings.trigger,pE=e=>e.tooltip.settings.defaultIndex,Np=fe([wf,hE,Hq,pE],Iq),qc=fe([Np,Nf,bp,jp],dE),Gq=fe([bo,qc],Oq),gE=fe([Np],e=>{if(e)return e.dataKey}),Mbe=fe([Np],e=>{if(e)return e.graphicalItemId}),Wq=fe([wf,hE,Hq,pE],$q),Rbe=fe([ho,po,St,Br,bo,pE,Wq],Lq),Dbe=fe([Np,Rbe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Ibe=fe([Np],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),Lbe=fe([Wq,qc,xo,bp,Gq,zq,hE],Uq);fe([Lbe],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function v4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function b4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v4(Object(r),!0).forEach(function(n){$be(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $be(e,t,r){return(t=zbe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zbe(e){var t=Ube(e,"string");return typeof t=="symbol"?t:t+""}function Ube(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fbe=()=>Ue(Vr),Bbe=()=>{var e=Fbe(),t=Ue(bo),r=Ue(Kq);return Zy(!e||!r?void 0:b4(b4({},e),{},{scale:r}),t)};function w4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w4(Object(r),!0).forEach(function(n){qbe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qbe(e,t,r){return(t=Vbe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vbe(e){var t=Kbe(e,"string");return typeof t=="symbol"?t:t+""}function Kbe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hbe=(e,t,r,n)=>{var a=t.find(i=>i&&i.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},Gbe=(e,t,r,n)=>{var a=t.find(f=>f&&f.index===r);if(a){if(e==="centric"){var i=a.coordinate,{radius:o}=n;return nd(nd(nd({},n),Ar(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var c=a.coordinate,{angle:d}=n;return nd(nd(nd({},n),Ar(n.cx,n.cy,c,d)),{},{angle:d,radius:c})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Wbe(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var Qq=(e,t,r,n,a)=>{var i,o=(i=t?.length)!==null&&i!==void 0?i:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<o;c++){var d,f,m,h,g,x=c>0?(d=r[c-1])===null||d===void 0?void 0:d.coordinate:(f=r[o-1])===null||f===void 0?void 0:f.coordinate,w=(m=r[c])===null||m===void 0?void 0:m.coordinate,b=c>=o-1?(h=r[0])===null||h===void 0?void 0:h.coordinate:(g=r[c+1])===null||g===void 0?void 0:g.coordinate,j=void 0;if(!(x==null||w==null||b==null))if(Yr(w-x)!==Yr(b-w)){var N=[];if(Yr(b-w)===Yr(a[1]-a[0])){j=b;var _=w+a[1]-a[0];N[0]=Math.min(_,(_+x)/2),N[1]=Math.max(_,(_+x)/2)}else{j=x;var S=b+a[1]-a[0];N[0]=Math.min(w,(S+w)/2),N[1]=Math.max(w,(S+w)/2)}var k=[Math.min(w,(j+w)/2),Math.max(w,(j+w)/2)];if(e>k[0]&&e<=k[1]||e>=N[0]&&e<=N[1]){var A;return(A=r[c])===null||A===void 0?void 0:A.index}}else{var T=Math.min(x,b),O=Math.max(x,b);if(e>(T+w)/2&&e<=(O+w)/2){var P;return(P=r[c])===null||P===void 0?void 0:P.index}}}else if(t)for(var R=0;R<o;R++){var M=t[R];if(M!=null){var D=t[R+1],z=t[R-1];if(R===0&&D!=null&&e<=(M.coordinate+D.coordinate)/2||R===o-1&&z!=null&&e>(M.coordinate+z.coordinate)/2||R>0&&R<o-1&&z!=null&&D!=null&&e>(M.coordinate+z.coordinate)/2&&e<=(M.coordinate+D.coordinate)/2)return M.index}}return-1},Qbe=()=>Ue(Ik),xE=(e,t)=>t,Yq=(e,t,r)=>r,yE=(e,t,r,n)=>n,Ybe=fe(bo,e=>bb(e,t=>t.coordinate)),vE=fe([wf,xE,Yq,yE],Iq),bE=fe([vE,Nf,bp,jp],dE),Xbe=(e,t,r)=>{if(t!=null){var n=wf(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},Xq=fe([wf,xE,Yq,yE],$q),jv=fe([ho,po,St,Br,bo,yE,Xq],Lq),Zbe=fe([vE,jv],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),Zq=fe([bo,bE],Oq),Jbe=fe([Xq,bE,xo,bp,Zq,zq,xE],Uq),e0e=fe([vE,bE],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),t0e=(e,t,r,n,a,i,o)=>{if(!(!e||!r||!n||!a)&&Wbe(e,o)){var c=Pme(e,t),d=Qq(c,i,a,r,n),f=Hbe(t,a,d,e);return{activeIndex:String(d),activeCoordinate:f}}},r0e=(e,t,r,n,a,i,o)=>{if(!(!e||!n||!a||!i||!r)){var c=Rpe(e,r);if(c){var d=Mme(c,t),f=Qq(d,o,i,n,a),m=Gbe(t,i,f,c);return{activeIndex:String(f),activeCoordinate:m}}}},n0e=(e,t,r,n,a,i,o,c)=>{if(!(!e||!t||!n||!a||!i))return t==="horizontal"||t==="vertical"?t0e(e,t,n,a,i,o,c):r0e(e,t,r,n,a,i,o)},s0e=fe(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElement:n.element}}),a0e=fe(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(dn)),r=Array.from(new Set(t));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:Uye}});function j4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function N4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j4(Object(r),!0).forEach(function(n){i0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function i0e(e,t,r){return(t=o0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o0e(e){var t=l0e(e,"string");return typeof t=="symbol"?t:t+""}function l0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var c0e={},u0e={zIndexMap:Object.values(dn).reduce((e,t)=>N4(N4({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),c0e)},d0e=new Set(Object.values(dn));function f0e(e){return d0e.has(e)}var Jq=Yn({name:"zIndex",initialState:u0e,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Kt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!f0e(r)&&delete e.zIndexMap[r])},prepare:Kt()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:a}=t.payload;e.zIndexMap[r]?a?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:a?void 0:n,panoramaElement:a?n:void 0}},prepare:Kt()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:Kt()}}}),{registerZIndexPortal:m0e,unregisterZIndexPortal:h0e,registerZIndexPortalElement:p0e,unregisterZIndexPortalElement:g0e}=Jq.actions,x0e=Jq.reducer;function Oa(e){var{zIndex:t,children:r}=e,n=che(),a=n&&t!==void 0&&t!==0,i=Xn(),o=Xt();y.useLayoutEffect(()=>a?(o(m0e({zIndex:t})),()=>{o(h0e({zIndex:t}))}):hf,[o,t,a]);var c=Ue(d=>s0e(d,t,i));return a?c?Zc.createPortal(r,c):null:r}function e_(){return e_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e_.apply(null,arguments)}function S4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S4(Object(r),!0).forEach(function(n){y0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function y0e(e,t,r){return(t=v0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v0e(e){var t=b0e(e,"string");return typeof t=="symbol"?t:t+""}function b0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function w0e(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return y.isValidElement(t)?y.cloneElement(t,n):y.createElement(r,n)}function j0e(e){var t,{coordinate:r,payload:n,index:a,offset:i,tooltipAxisBandSize:o,layout:c,cursor:d,tooltipEventType:f,chartName:m}=e,h=r,g=n,x=a;if(!d||!h||m!=="ScatterChart"&&f!=="axis")return null;var w,b,j;if(m==="ScatterChart")w=h,b=Whe,j=dn.cursorLine;else if(m==="BarChart")w=Qhe(c,h,i,o),b=GF,j=dn.cursorRectangle;else if(c==="radial"&&AU(h)){var{cx:N,cy:_,radius:S,startAngle:k,endAngle:A}=QF(h);w={cx:N,cy:_,startAngle:k,endAngle:A,innerRadius:S,outerRadius:S},b=XF,j=dn.cursorLine}else w={points:$pe(c,h,i)},b=uk,j=dn.cursorLine;var T=typeof d=="object"&&"className"in d?d.className:void 0,O=Rx(Rx(Rx(Rx({stroke:"#ccc",pointerEvents:"none"},i),w),Sh(d)),{},{payload:g,payloadIndex:x,className:Nt("recharts-tooltip-cursor",T)});return y.createElement(Oa,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:j},y.createElement(w0e,{cursor:d,cursorComp:b,cursorProps:O}))}function N0e(e){var t=Bbe(),r=kF(),n=pf(),a=Qbe();return t==null||r==null||n==null||a==null?null:y.createElement(j0e,e_({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var e9=y.createContext(null),S0e=()=>y.useContext(e9),BN={exports:{}},_4;function _0e(){return _4||(_4=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(d,f,m){this.fn=d,this.context=f,this.once=m||!1}function i(d,f,m,h,g){if(typeof m!="function")throw new TypeError("The listener must be a function");var x=new a(m,h||d,g),w=r?r+f:f;return d._events[w]?d._events[w].fn?d._events[w]=[d._events[w],x]:d._events[w].push(x):(d._events[w]=x,d._eventsCount++),d}function o(d,f){--d._eventsCount===0?d._events=new n:delete d._events[f]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var f=[],m,h;if(this._eventsCount===0)return f;for(h in m=this._events)t.call(m,h)&&f.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(m)):f},c.prototype.listeners=function(f){var m=r?r+f:f,h=this._events[m];if(!h)return[];if(h.fn)return[h.fn];for(var g=0,x=h.length,w=new Array(x);g<x;g++)w[g]=h[g].fn;return w},c.prototype.listenerCount=function(f){var m=r?r+f:f,h=this._events[m];return h?h.fn?1:h.length:0},c.prototype.emit=function(f,m,h,g,x,w){var b=r?r+f:f;if(!this._events[b])return!1;var j=this._events[b],N=arguments.length,_,S;if(j.fn){switch(j.once&&this.removeListener(f,j.fn,void 0,!0),N){case 1:return j.fn.call(j.context),!0;case 2:return j.fn.call(j.context,m),!0;case 3:return j.fn.call(j.context,m,h),!0;case 4:return j.fn.call(j.context,m,h,g),!0;case 5:return j.fn.call(j.context,m,h,g,x),!0;case 6:return j.fn.call(j.context,m,h,g,x,w),!0}for(S=1,_=new Array(N-1);S<N;S++)_[S-1]=arguments[S];j.fn.apply(j.context,_)}else{var k=j.length,A;for(S=0;S<k;S++)switch(j[S].once&&this.removeListener(f,j[S].fn,void 0,!0),N){case 1:j[S].fn.call(j[S].context);break;case 2:j[S].fn.call(j[S].context,m);break;case 3:j[S].fn.call(j[S].context,m,h);break;case 4:j[S].fn.call(j[S].context,m,h,g);break;default:if(!_)for(A=1,_=new Array(N-1);A<N;A++)_[A-1]=arguments[A];j[S].fn.apply(j[S].context,_)}}return!0},c.prototype.on=function(f,m,h){return i(this,f,m,h,!1)},c.prototype.once=function(f,m,h){return i(this,f,m,h,!0)},c.prototype.removeListener=function(f,m,h,g){var x=r?r+f:f;if(!this._events[x])return this;if(!m)return o(this,x),this;var w=this._events[x];if(w.fn)w.fn===m&&(!g||w.once)&&(!h||w.context===h)&&o(this,x);else{for(var b=0,j=[],N=w.length;b<N;b++)(w[b].fn!==m||g&&!w[b].once||h&&w[b].context!==h)&&j.push(w[b]);j.length?this._events[x]=j.length===1?j[0]:j:o(this,x)}return this},c.prototype.removeAllListeners=function(f){var m;return f?(m=r?r+f:f,this._events[m]&&o(this,m)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,e.exports=c})(BN)),BN.exports}var C0e=_0e();const k0e=Ea(C0e);var Lh=new k0e,t_="recharts.syncEvent.tooltip",C4="recharts.syncEvent.brush",t9=(e,t)=>{if(t&&Array.isArray(e)){var r=Number.parseInt(t,10);if(!ni(r))return e[r]}},E0e={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},r9=Yn({name:"options",initialState:E0e,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),A0e=r9.reducer,{createEventEmitter:T0e}=r9.actions;function O0e(e){return e.tooltip.syncInteraction}var P0e={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},n9=Yn({name:"chartData",initialState:P0e,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:k4,setDataStartEndIndexes:M0e,setComputedData:yUe}=n9.actions,R0e=n9.reducer,D0e=["x","y"];function E4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function sd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E4(Object(r),!0).forEach(function(n){I0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I0e(e,t,r){return(t=L0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L0e(e){var t=$0e(e,"string");return typeof t=="symbol"?t:t+""}function $0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z0e(e,t){if(e==null)return{};var r,n,a=U0e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function U0e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function F0e(){var e=Ue(Lk),t=Ue($k),r=Xt(),n=Ue(YB),a=Ue(bo),i=pf(),o=Ib(),c=Ue(d=>d.rootProps.className);y.useEffect(()=>{if(e==null)return hf;var d=(f,m,h)=>{if(t!==h&&e===f){if(n==="index"){var g;if(o&&m!==null&&m!==void 0&&(g=m.payload)!==null&&g!==void 0&&g.coordinate&&m.payload.sourceViewBox){var x=m.payload.coordinate,{x:w,y:b}=x,j=z0e(x,D0e),{x:N,y:_,width:S,height:k}=m.payload.sourceViewBox,A=sd(sd({},j),{},{x:o.x+(S?(w-N)/S:0)*o.width,y:o.y+(k?(b-_)/k:0)*o.height});r(sd(sd({},m),{},{payload:sd(sd({},m.payload),{},{coordinate:A})}))}else r(m);return}if(a!=null){var T;if(typeof n=="function"){var O={activeTooltipIndex:m.payload.index==null?void 0:Number(m.payload.index),isTooltipActive:m.payload.active,activeIndex:m.payload.index==null?void 0:Number(m.payload.index),activeLabel:m.payload.label,activeDataKey:m.payload.dataKey,activeCoordinate:m.payload.coordinate},P=n(a,O);T=a[P]}else n==="value"&&(T=a.find(U=>String(U.value)===m.payload.label));var{coordinate:R}=m.payload;if(T==null||m.payload.active===!1||R==null||o==null){r(Z2({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:M,y:D}=R,z=Math.min(M,o.x+o.width),Y=Math.min(D,o.y+o.height),I={x:i==="horizontal"?T.coordinate:z,y:i==="horizontal"?Y:T.coordinate},K=Z2({active:m.payload.active,coordinate:I,dataKey:m.payload.dataKey,index:String(T.index),label:m.payload.label,sourceViewBox:m.payload.sourceViewBox,graphicalItemId:m.payload.graphicalItemId});r(K)}}};return Lh.on(t_,d),()=>{Lh.off(t_,d)}},[c,r,t,e,n,a,i,o])}function B0e(){var e=Ue(Lk),t=Ue($k),r=Xt();y.useEffect(()=>{if(e==null)return hf;var n=(a,i,o)=>{t!==o&&e===a&&r(M0e(i))};return Lh.on(C4,n),()=>{Lh.off(C4,n)}},[r,t,e])}function q0e(){var e=Xt();y.useEffect(()=>{e(T0e())},[e]),F0e(),B0e()}function V0e(e,t,r,n,a,i){var o=Ue(x=>Xbe(x,e,t)),c=Ue($k),d=Ue(Lk),f=Ue(YB),m=Ue(O0e),h=m?.active,g=Ib();y.useEffect(()=>{if(!h&&d!=null&&c!=null){var x=Z2({active:i,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:g,graphicalItemId:void 0});Lh.emit(t_,d,x,c)}},[h,r,o,a,n,c,d,f,i,g])}function A4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function T4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A4(Object(r),!0).forEach(function(n){K0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K0e(e,t,r){return(t=H0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H0e(e){var t=G0e(e,"string");return typeof t=="symbol"?t:t+""}function G0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function W0e(e){return e.dataKey}function Q0e(e,t){return y.isValidElement(e)?y.cloneElement(e,t):typeof e=="function"?y.createElement(e,t):y.createElement(khe,t)}var O4=[],Y0e={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function s9(e){var t,r,n=Sn(e,Y0e),{active:a,allowEscapeViewBox:i,animationDuration:o,animationEasing:c,content:d,filterNull:f,isAnimationActive:m,offset:h,payloadUniqBy:g,position:x,reverseDirection:w,useTranslate3d:b,wrapperStyle:j,cursor:N,shared:_,trigger:S,defaultIndex:k,portal:A,axisId:T}=n,O=Xt(),P=typeof k=="number"?String(k):k;y.useEffect(()=>{O(Hve({shared:_,trigger:S,axisId:T,active:a,defaultIndex:P}))},[O,_,S,T,a,P]);var R=Ib(),M=BF(),D=Uve(_),{activeIndex:z,isActive:Y}=(t=Ue(ne=>e0e(ne,D,S,P)))!==null&&t!==void 0?t:{},I=Ue(ne=>Jbe(ne,D,S,P)),K=Ue(ne=>Zq(ne,D,S,P)),U=Ue(ne=>Zbe(ne,D,S,P)),L=I,F=S0e(),q=(r=a??Y)!==null&&r!==void 0?r:!1,[Z,B]=xfe([L,q]),V=D==="axis"?K:void 0;V0e(D,S,U,V,z,q);var ee=A??F;if(ee==null||R==null||D==null)return null;var ae=L??O4;q||(ae=O4),f&&ae.length&&(ae=qde(ae.filter(ne=>ne.value!=null&&(ne.hide!==!0||n.includeHidden)),g,W0e));var J=ae.length>0,se=y.createElement(Rhe,{allowEscapeViewBox:i,animationDuration:o,animationEasing:c,isAnimationActive:m,active:q,coordinate:U,hasPayload:J,offset:h,position:x,reverseDirection:w,useTranslate3d:b,viewBox:R,wrapperStyle:j,lastBoundingBox:Z,innerRef:B,hasPortalFromProps:!!A},Q0e(d,T4(T4({},n),{},{payload:ae,label:V,active:q,activeIndex:z,coordinate:U,accessibilityLayer:M})));return y.createElement(y.Fragment,null,Zc.createPortal(se,ee),q&&y.createElement(N0e,{cursor:N,tooltipEventType:D,coordinate:U,payload:ae,index:z}))}var su=e=>null;su.displayName="Cell";function X0e(e,t,r){return(t=Z0e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z0e(e){var t=J0e(e,"string");return typeof t=="symbol"?t:t+""}function J0e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ewe{constructor(t){X0e(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function P4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function twe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P4(Object(r),!0).forEach(function(n){rwe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rwe(e,t,r){return(t=nwe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nwe(e){var t=swe(e,"string");return typeof t=="symbol"?t:t+""}function swe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var awe={cacheSize:2e3,enableCache:!0},a9=twe({},awe),M4=new ewe(a9.cacheSize),iwe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},R4="recharts_measurement_span";function owe(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",c=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(i,"|").concat(o,"|").concat(c)}var D4=(e,t)=>{try{var r=document.getElementById(R4);r||(r=document.createElement("span"),r.setAttribute("id",R4),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,iwe,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},nh=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ub.isSsr)return{width:0,height:0};if(!a9.enableCache)return D4(t,r);var n=owe(t,r),a=M4.get(n);if(a)return a;var i=D4(t,r);return M4.set(n,i),i},i9;function lwe(e,t,r){return(t=cwe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cwe(e){var t=uwe(e,"string");return typeof t=="symbol"?t:t+""}function uwe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var I4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,L4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,dwe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,fwe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,mwe={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},hwe=["cm","mm","pt","pc","in","Q","px"];function pwe(e){return hwe.includes(e)}var vd="NaN";function gwe(e,t){return e*mwe[t]}class cn{static parse(t){var r,[,n,a]=(r=fwe.exec(t))!==null&&r!==void 0?r:[];return n==null?cn.NaN:new cn(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,ni(t)&&(this.unit=""),r!==""&&!dwe.test(r)&&(this.num=NaN,this.unit=""),pwe(r)&&(this.num=gwe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new cn(NaN,""):new cn(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new cn(NaN,""):new cn(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new cn(NaN,""):new cn(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new cn(NaN,""):new cn(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ni(this.num)}}i9=cn;lwe(cn,"NaN",new i9(NaN,""));function o9(e){if(e==null||e.includes(vd))return vd;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,i]=(r=I4.exec(t))!==null&&r!==void 0?r:[],o=cn.parse(n??""),c=cn.parse(i??""),d=a==="*"?o.multiply(c):o.divide(c);if(d.isNaN())return vd;t=t.replace(I4,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,[,m,h,g]=(f=L4.exec(t))!==null&&f!==void 0?f:[],x=cn.parse(m??""),w=cn.parse(g??""),b=h==="+"?x.add(w):x.subtract(w);if(b.isNaN())return vd;t=t.replace(L4,b.toString())}return t}var $4=/\(([^()]*)\)/;function xwe(e){for(var t=e,r;(r=$4.exec(t))!=null;){var[,n]=r;t=t.replace($4,o9(n))}return t}function ywe(e){var t=e.replace(/\s+/g,"");return t=xwe(t),t=o9(t),t}function vwe(e){try{return ywe(e)}catch{return vd}}function qN(e){var t=vwe(e.slice(5,-1));return t===vd?"":t}var bwe=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],wwe=["dx","dy","angle","className","breakAll"];function r_(){return r_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r_.apply(null,arguments)}function z4(e,t){if(e==null)return{};var r,n,a=jwe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function jwe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var l9=/[ \f\n\r\t\v\u2028\u2029]+/,c9=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];Xr(t)||(r?a=t.toString().split(""):a=t.toString().split(l9));var i=a.map(c=>({word:c,width:nh(c,n).width})),o=r?0:nh("",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}};function Nwe(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var u9=(e,t,r,n)=>e.reduce((a,i)=>{var{word:o,width:c}=i,d=a[a.length-1];if(d&&c!=null&&(t==null||n||d.width+c+r<Number(t)))d.words.push(o),d.width+=c+r;else{var f={words:[o],width:c};a.push(f)}return a},[]),d9=e=>e.reduce((t,r)=>t.width>r.width?t:r),Swe="",U4=(e,t,r,n,a,i,o,c)=>{var d=e.slice(0,t),f=c9({breakAll:r,style:n,children:d+Swe});if(!f)return[!1,[]];var m=u9(f.wordsWithComputedWidth,i,o,c),h=m.length>a||d9(m).width>Number(i);return[h,m]},_we=(e,t,r,n,a)=>{var{maxLines:i,children:o,style:c,breakAll:d}=e,f=Ie(i),m=String(o),h=u9(t,n,r,a);if(!f||a)return h;var g=h.length>i||d9(h).width>Number(n);if(!g)return h;for(var x=0,w=m.length-1,b=0,j;x<=w&&b<=m.length-1;){var N=Math.floor((x+w)/2),_=N-1,[S,k]=U4(m,_,d,c,i,n,r,a),[A]=U4(m,N,d,c,i,n,r,a);if(!S&&!A&&(x=N+1),S&&A&&(w=N-1),!S&&A){j=k;break}b++}return j||h},F4=e=>{var t=Xr(e)?[]:e.toString().split(l9);return[{words:t,width:void 0}]},Cwe=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:i,maxLines:o}=e;if((t||r)&&!Ub.isSsr){var c,d,f=c9({breakAll:i,children:n,style:a});if(f){var{wordsWithComputedWidth:m,spaceWidth:h}=f;c=m,d=h}else return F4(n);return _we({breakAll:i,children:n,maxLines:o,style:a},c,d,t,!!r)}return F4(n)},f9="#808080",kwe={angle:0,breakAll:!1,capHeight:"0.71em",fill:f9,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},o0=y.forwardRef((e,t)=>{var r=Sn(e,kwe),{x:n,y:a,lineHeight:i,capHeight:o,fill:c,scaleToFit:d,textAnchor:f,verticalAnchor:m}=r,h=z4(r,bwe),g=y.useMemo(()=>Cwe({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:d,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,d,h.style,h.width]),{dx:x,dy:w,angle:b,className:j,breakAll:N}=h,_=z4(h,wwe);if(!si(n)||!si(a)||g.length===0)return null;var S=Number(n)+(Ie(x)?x:0),k=Number(a)+(Ie(w)?w:0);if(!ft(S)||!ft(k))return null;var A;switch(m){case"start":A=qN("calc(".concat(o,")"));break;case"middle":A=qN("calc(".concat((g.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:A=qN("calc(".concat(g.length-1," * -").concat(i,")"));break}var T=[],O=g[0];if(d&&O!=null){var P=O.width,{width:R}=h;T.push("scale(".concat(Ie(R)&&Ie(P)?R/P:1,")"))}return b&&T.push("rotate(".concat(b,", ").concat(S,", ").concat(k,")")),T.length&&(_.transform=T.join(" ")),y.createElement("text",r_({},Qs(_),{ref:t,x:S,y:k,className:Nt("recharts-text",j),textAnchor:f,fill:c.includes("url")?f9:c}),g.map((M,D)=>{var z=M.words.join(N?"":" ");return y.createElement("tspan",{x:S,dy:D===0?A:i,key:"".concat(z,"-").concat(D)},z)}))});o0.displayName="Text";function B4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ba(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B4(Object(r),!0).forEach(function(n){Ewe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ewe(e,t,r){return(t=Awe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Awe(e){var t=Twe(e,"string");return typeof t=="symbol"?t:t+""}function Twe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Owe=e=>{var{viewBox:t,position:r,offset:n=0,parentViewBox:a}=e,{x:i,y:o,height:c,upperWidth:d,lowerWidth:f}=ok(t),m=i,h=i+(d-f)/2,g=(m+h)/2,x=(d+f)/2,w=m+d/2,b=c>=0?1:-1,j=b*n,N=b>0?"end":"start",_=b>0?"start":"end",S=d>=0?1:-1,k=S*n,A=S>0?"end":"start",T=S>0?"start":"end",O=a;if(r==="top"){var P={x:m+d/2,y:o-j,horizontalAnchor:"middle",verticalAnchor:N};return O&&(P.height=Math.max(o-O.y,0),P.width=d),P}if(r==="bottom"){var R={x:h+f/2,y:o+c+j,horizontalAnchor:"middle",verticalAnchor:_};return O&&(R.height=Math.max(O.y+O.height-(o+c),0),R.width=f),R}if(r==="left"){var M={x:g-k,y:o+c/2,horizontalAnchor:A,verticalAnchor:"middle"};return O&&(M.width=Math.max(M.x-O.x,0),M.height=c),M}if(r==="right"){var D={x:g+x+k,y:o+c/2,horizontalAnchor:T,verticalAnchor:"middle"};return O&&(D.width=Math.max(O.x+O.width-D.x,0),D.height=c),D}var z=O?{width:x,height:c}:{};return r==="insideLeft"?Ba({x:g+k,y:o+c/2,horizontalAnchor:T,verticalAnchor:"middle"},z):r==="insideRight"?Ba({x:g+x-k,y:o+c/2,horizontalAnchor:A,verticalAnchor:"middle"},z):r==="insideTop"?Ba({x:m+d/2,y:o+j,horizontalAnchor:"middle",verticalAnchor:_},z):r==="insideBottom"?Ba({x:h+f/2,y:o+c-j,horizontalAnchor:"middle",verticalAnchor:N},z):r==="insideTopLeft"?Ba({x:m+k,y:o+j,horizontalAnchor:T,verticalAnchor:_},z):r==="insideTopRight"?Ba({x:m+d-k,y:o+j,horizontalAnchor:A,verticalAnchor:_},z):r==="insideBottomLeft"?Ba({x:h+k,y:o+c-j,horizontalAnchor:T,verticalAnchor:N},z):r==="insideBottomRight"?Ba({x:h+f-k,y:o+c-j,horizontalAnchor:A,verticalAnchor:N},z):r&&typeof r=="object"&&(Ie(r.x)||Lc(r.x))&&(Ie(r.y)||Lc(r.y))?Ba({x:i+jn(r.x,x),y:o+jn(r.y,c),horizontalAnchor:"end",verticalAnchor:"end"},z):Ba({x:w,y:o+c/2,horizontalAnchor:"middle",verticalAnchor:"middle"},z)},Pwe=["labelRef"],Mwe=["content"];function q4(e,t){if(e==null)return{};var r,n,a=Rwe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Rwe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function V4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V4(Object(r),!0).forEach(function(n){Dwe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dwe(e,t,r){return(t=Iwe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iwe(e){var t=Lwe(e,"string");return typeof t=="symbol"?t:t+""}function Lwe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zi(){return zi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zi.apply(null,arguments)}var m9=y.createContext(null),$we=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:a,width:i,height:o,children:c}=e,d=y.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:a,width:i,height:o}),[t,r,n,a,i,o]);return y.createElement(m9.Provider,{value:d},c)},h9=()=>{var e=y.useContext(m9),t=Ib();return e||(t?ok(t):void 0)},zwe=y.createContext(null),Uwe=()=>{var e=y.useContext(zwe),t=Ue(tq);return e||t},Fwe=e=>{var{value:t,formatter:r}=e,n=Xr(e.children)?t:e.children;return typeof r=="function"?r(n):n},wE=e=>e!=null&&typeof e=="function",Bwe=(e,t)=>{var r=Yr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},qwe=(e,t,r,n,a)=>{var{offset:i,className:o}=e,{cx:c,cy:d,innerRadius:f,outerRadius:m,startAngle:h,endAngle:g,clockWise:x}=a,w=(f+m)/2,b=Bwe(h,g),j=b>=0?1:-1,N,_;switch(t){case"insideStart":N=h+j*i,_=x;break;case"insideEnd":N=g-j*i,_=!x;break;case"end":N=g+j*i,_=x;break;default:throw new Error("Unsupported position ".concat(t))}_=b<=0?_:!_;var S=Ar(c,d,w,N),k=Ar(c,d,w,N+(_?1:-1)*359),A="M".concat(S.x,",").concat(S.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(_?0:1,`,
    `).concat(k.x,",").concat(k.y),T=Xr(e.id)?_h("recharts-radial-line-"):e.id;return y.createElement("text",zi({},n,{dominantBaseline:"central",className:Nt("recharts-radial-bar-label",o)}),y.createElement("defs",null,y.createElement("path",{id:T,d:A})),y.createElement("textPath",{xlinkHref:"#".concat(T)},r))},Vwe=(e,t,r)=>{var{cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:c,endAngle:d}=e,f=(c+d)/2;if(r==="outside"){var{x:m,y:h}=Ar(n,a,o+t,f);return{x:m,y:h,textAnchor:m>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var g=(i+o)/2,{x,y:w}=Ar(n,a,g,f);return{x,y:w,textAnchor:"middle",verticalAnchor:"middle"}},uy=e=>e!=null&&"cx"in e&&Ie(e.cx),Kwe={angle:0,offset:5,zIndex:dn.label,position:"middle",textBreakAll:!1};function Hwe(e){if(!uy(e))return e;var{cx:t,cy:r,outerRadius:n}=e,a=n*2;return{x:t-n,y:r-n,width:a,upperWidth:a,lowerWidth:a,height:a}}function ol(e){var t=Sn(e,Kwe),{viewBox:r,parentViewBox:n,position:a,value:i,children:o,content:c,className:d="",textBreakAll:f,labelRef:m}=t,h=Uwe(),g=h9(),x=a==="center"?g:h??g,w,b,j;r==null?w=x:uy(r)?w=r:w=ok(r);var N=Hwe(w);if(!w||Xr(i)&&Xr(o)&&!y.isValidElement(c)&&typeof c!="function")return null;var _=Wm(Wm({},t),{},{viewBox:w});if(y.isValidElement(c)){var{labelRef:S}=_,k=q4(_,Pwe);return y.cloneElement(c,k)}if(typeof c=="function"){var{content:A}=_,T=q4(_,Mwe);if(b=y.createElement(c,T),y.isValidElement(b))return b}else b=Fwe(t);var O=Qs(t);if(uy(w)){if(a==="insideStart"||a==="insideEnd"||a==="end")return qwe(t,a,b,O,w);j=Vwe(w,t.offset,t.position)}else{if(!N)return null;var P=Owe({viewBox:N,position:a,offset:t.offset,parentViewBox:uy(n)?void 0:n});j=Wm(Wm({x:P.x,y:P.y,textAnchor:P.horizontalAnchor,verticalAnchor:P.verticalAnchor},P.width!==void 0?{width:P.width}:{}),P.height!==void 0?{height:P.height}:{})}return y.createElement(Oa,{zIndex:t.zIndex},y.createElement(o0,zi({ref:m,className:Nt("recharts-label",d)},O,j,{textAnchor:Nwe(O.textAnchor)?O.textAnchor:j.textAnchor,breakAll:f}),b))}ol.displayName="Label";var Gwe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?y.createElement(ol,zi({key:"label-implicit"},n)):si(e)?y.createElement(ol,zi({key:"label-implicit",value:e},n)):y.isValidElement(e)?e.type===ol?y.cloneElement(e,Wm({key:"label-implicit"},n)):y.createElement(ol,zi({key:"label-implicit",content:e},n)):wE(e)?y.createElement(ol,zi({key:"label-implicit",content:e},n)):e&&typeof e=="object"?y.createElement(ol,zi({},e,{key:"label-implicit"},n)):null};function Wwe(e){var{label:t,labelRef:r}=e,n=h9();return Gwe(t,n,r)||null}var VN={},KN={},K4;function Qwe(){return K4||(K4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(KN)),KN}var HN={},H4;function Ywe(){return H4||(H4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(HN)),HN}var G4;function Xwe(){return G4||(G4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qwe(),r=Ywe(),n=YC();function a(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=a})(VN)),VN}var GN,W4;function Zwe(){return W4||(W4=1,GN=Xwe().last),GN}var Jwe=Zwe();const e1e=Ea(Jwe);var t1e=["valueAccessor"],r1e=["dataKey","clockWise","id","textBreakAll","zIndex"];function Nv(){return Nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nv.apply(null,arguments)}function Q4(e,t){if(e==null)return{};var r,n,a=n1e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function n1e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var s1e=e=>Array.isArray(e.value)?e1e(e.value):e.value,p9=y.createContext(void 0),a1e=p9.Provider,g9=y.createContext(void 0),i1e=g9.Provider;function o1e(){return y.useContext(p9)}function l1e(){return y.useContext(g9)}function dy(e){var{valueAccessor:t=s1e}=e,r=Q4(e,t1e),{dataKey:n,clockWise:a,id:i,textBreakAll:o,zIndex:c}=r,d=Q4(r,r1e),f=o1e(),m=l1e(),h=f||m;return!h||!h.length?null:y.createElement(Oa,{zIndex:c??dn.label},y.createElement(Mn,{className:"recharts-label-list"},h.map((g,x)=>{var w,b=Xr(n)?t(g,x):Bt(g.payload,n),j=Xr(i)?{}:{id:"".concat(i,"-").concat(x)};return y.createElement(ol,Nv({key:"label-".concat(x)},Qs(g),d,j,{fill:(w=r.fill)!==null&&w!==void 0?w:g.fill,parentViewBox:g.parentViewBox,value:b,textBreakAll:o,viewBox:g.viewBox,index:x,zIndex:0}))})))}dy.displayName="LabelList";function x9(e){var{label:t}=e;return t?t===!0?y.createElement(dy,{key:"labelList-implicit"}):y.isValidElement(t)||wE(t)?y.createElement(dy,{key:"labelList-implicit",content:t}):typeof t=="object"?y.createElement(dy,Nv({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var y9=e=>e.graphicalItems.polarItems,c1e=fe([rr,yp],Vk),l0=fe([y9,mr,c1e],Hk),u1e=fe([l0],Gk),c0=fe([u1e,Qb],Wk),d1e=fe([c0,mr,l0],Yk);fe([c0,mr,l0],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var i,o=Bt(n,(i=t.dataKey)!==null&&i!==void 0?i:a.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(n=>({value:Bt(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var Y4=()=>{},f1e=fe([c0,mr,l0,n0,rr],eE),m1e=fe([mr,Zk,Jk,Y4,f1e,Y4,St,rr],tE),v9=fe([mr,St,c0,d1e,xp,rr,m1e],rE),h1e=fe([v9,vf,Tl],aE),p1e=fe([mr,v9,h1e,rr],oE);fe([Tl,p1e],nq);var g1e={radiusAxis:{},angleAxis:{}},b9=Yn({name:"polarAxis",initialState:g1e,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:vUe,removeRadiusAxis:bUe,addAngleAxis:wUe,removeAngleAxis:jUe}=b9.actions,x1e=b9.reducer;function w9(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}function X4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Z4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X4(Object(r),!0).forEach(function(n){y1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X4(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function y1e(e,t,r){return(t=v1e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v1e(e){var t=b1e(e,"string");return typeof t=="symbol"?t:t+""}function b1e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var w1e=(e,t)=>t,jE=fe([y9,w1e],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),j1e=[],NE=(e,t,r)=>r?.length===0?j1e:r,j9=fe([Qb,jE,NE],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if(t?.data!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(i=>Z4(Z4({},t.presentationProps),i.props))),a!=null)return a}}),N1e=fe([j9,jE,NE],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var i,o=Bt(n,t.nameKey,t.name),c;return r!=null&&(i=r[a])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?c=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?c=n.fill:c=t.fill,{value:Tb(o,t.dataKey),color:c,payload:n,type:t.legendType}})}),S1e=fe([j9,jE,NE,Br],(e,t,r,n)=>{if(!(t==null||e==null))return kje({offset:n,pieSettings:t,displayedData:e,cells:r})}),WN={exports:{}},jt={};var J4;function _1e(){if(J4)return jt;J4=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),w;w=Symbol.for("react.module.reference");function b(j){if(typeof j=="object"&&j!==null){var N=j.$$typeof;switch(N){case e:switch(j=j.type,j){case r:case a:case n:case f:case m:return j;default:switch(j=j&&j.$$typeof,j){case c:case o:case d:case g:case h:case i:return j;default:return N}}case t:return N}}}return jt.ContextConsumer=o,jt.ContextProvider=i,jt.Element=e,jt.ForwardRef=d,jt.Fragment=r,jt.Lazy=g,jt.Memo=h,jt.Portal=t,jt.Profiler=a,jt.StrictMode=n,jt.Suspense=f,jt.SuspenseList=m,jt.isAsyncMode=function(){return!1},jt.isConcurrentMode=function(){return!1},jt.isContextConsumer=function(j){return b(j)===o},jt.isContextProvider=function(j){return b(j)===i},jt.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},jt.isForwardRef=function(j){return b(j)===d},jt.isFragment=function(j){return b(j)===r},jt.isLazy=function(j){return b(j)===g},jt.isMemo=function(j){return b(j)===h},jt.isPortal=function(j){return b(j)===t},jt.isProfiler=function(j){return b(j)===a},jt.isStrictMode=function(j){return b(j)===n},jt.isSuspense=function(j){return b(j)===f},jt.isSuspenseList=function(j){return b(j)===m},jt.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===r||j===a||j===n||j===f||j===m||j===x||typeof j=="object"&&j!==null&&(j.$$typeof===g||j.$$typeof===h||j.$$typeof===i||j.$$typeof===o||j.$$typeof===d||j.$$typeof===w||j.getModuleId!==void 0)},jt.typeOf=b,jt}var eI;function C1e(){return eI||(eI=1,WN.exports=_1e()),WN.exports}var k1e=C1e(),tI=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",rI=null,QN=null,N9=e=>{if(e===rI&&Array.isArray(QN))return QN;var t=[];return y.Children.forEach(e,r=>{Xr(r)||(k1e.isFragment(r)?t=t.concat(N9(r.props.children)):t.push(r))}),QN=t,rI=e,t};function SE(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>tI(a)):n=[tI(t)],N9(e).forEach(a=>{var i=Ic(a,"type.displayName")||Ic(a,"type.name");i&&n.indexOf(i)!==-1&&r.push(a)}),r}var YN={},nI;function E1e(){return nI||(nI=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const a=r[Symbol.toStringTag];return a==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${a}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(YN)),YN}var XN,sI;function A1e(){return sI||(sI=1,XN=E1e().isPlainObject),XN}var T1e=A1e();const O1e=Ea(T1e);var aI,iI,oI,lI,cI;function uI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function dI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uI(Object(r),!0).forEach(function(n){P1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P1e(e,t,r){return(t=M1e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M1e(e){var t=R1e(e,"string");return typeof t=="symbol"?t:t+""}function R1e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sv(){return Sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sv.apply(null,arguments)}function Lm(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var fI=(e,t,r,n,a)=>{var i=r-n,o;return o=cr(aI||(aI=Lm(["M ",",",""])),e,t),o+=cr(iI||(iI=Lm(["L ",",",""])),e+r,t),o+=cr(oI||(oI=Lm(["L ",",",""])),e+r-i/2,t+a),o+=cr(lI||(lI=Lm(["L ",",",""])),e+r-i/2-n,t+a),o+=cr(cI||(cI=Lm(["L ",","," Z"])),e,t),o},D1e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},I1e=e=>{var t=Sn(e,D1e),{x:r,y:n,upperWidth:a,lowerWidth:i,height:o,className:c}=t,{animationEasing:d,animationDuration:f,animationBegin:m,isUpdateAnimationActive:h}=t,g=y.useRef(null),[x,w]=y.useState(-1),b=y.useRef(a),j=y.useRef(i),N=y.useRef(o),_=y.useRef(r),S=y.useRef(n),k=Bb(e,"trapezoid-");if(y.useEffect(()=>{if(g.current&&g.current.getTotalLength)try{var I=g.current.getTotalLength();I&&w(I)}catch{}},[]),r!==+r||n!==+n||a!==+a||i!==+i||o!==+o||a===0&&i===0||o===0)return null;var A=Nt("recharts-trapezoid",c);if(!h)return y.createElement("g",null,y.createElement("path",Sv({},Qs(t),{className:A,d:fI(r,n,a,i,o)})));var T=b.current,O=j.current,P=N.current,R=_.current,M=S.current,D="0px ".concat(x===-1?1:x,"px"),z="".concat(x,"px 0px"),Y=qF(["strokeDasharray"],f,d);return y.createElement(Fb,{animationId:k,key:k,canBegin:x>0,duration:f,easing:d,isActive:h,begin:m},I=>{var K=$r(T,a,I),U=$r(O,i,I),L=$r(P,o,I),F=$r(R,r,I),q=$r(M,n,I);g.current&&(b.current=K,j.current=U,N.current=L,_.current=F,S.current=q);var Z=I>0?{transition:Y,strokeDasharray:z}:{strokeDasharray:D};return y.createElement("path",Sv({},Qs(t),{className:A,d:fI(F,q,K,U,L),ref:g,style:dI(dI({},Z),t.style)}))})},L1e=["option","shapeType","activeClassName"];function $1e(e,t){if(e==null)return{};var r,n,a=z1e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function z1e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function mI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _v(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mI(Object(r),!0).forEach(function(n){U1e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function U1e(e,t,r){return(t=F1e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F1e(e){var t=B1e(e,"string");return typeof t=="symbol"?t:t+""}function B1e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q1e(e,t){return _v(_v({},t),e)}function V1e(e,t){return e==="symbols"}function hI(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return y.createElement(GF,r);case"trapezoid":return y.createElement(I1e,r);case"sector":return y.createElement(XF,r);case"symbols":if(V1e(t))return y.createElement(EU,r);break;case"curve":return y.createElement(uk,r);default:return null}}function K1e(e){return y.isValidElement(e)?e.props:e}function S9(e){var{option:t,shapeType:r,activeClassName:n="recharts-active-shape"}=e,a=$1e(e,L1e),i;if(y.isValidElement(t))i=y.cloneElement(t,_v(_v({},a),K1e(t)));else if(typeof t=="function")i=t(a,a.index);else if(O1e(t)&&typeof t!="boolean"){var o=q1e(t,a);i=y.createElement(hI,{shapeType:r,elementProps:o})}else{var c=a;i=y.createElement(hI,{shapeType:r,elementProps:c})}return a.isActive?y.createElement(Mn,{className:n},i):i}var _E=(e,t,r)=>{var n=Xt();return(a,i)=>o=>{e?.(a,i,o),n(Mq({activeIndex:String(i),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}},CE=e=>{var t=Xt();return(r,n)=>a=>{e?.(r,n,a),t(Gve())}},kE=(e,t,r)=>{var n=Xt();return(a,i)=>o=>{e?.(a,i,o),n(Wve({activeIndex:String(i),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}};function _9(e){var{tooltipEntrySettings:t}=e,r=Xt(),n=Xn(),a=y.useRef(null);return y.useLayoutEffect(()=>{n||(a.current===null?r(qve(t)):a.current!==t&&r(Vve({prev:a.current,next:t})),a.current=t)},[t,r,n]),y.useLayoutEffect(()=>()=>{a.current&&(r(Kve(a.current)),a.current=null)},[r]),null}function H1e(e){var{legendPayload:t}=e,r=Xt(),n=Xn(),a=y.useRef(null);return y.useLayoutEffect(()=>{n||(a.current===null?r(zF(t)):a.current!==t&&r(UF({prev:a.current,next:t})),a.current=t)},[r,n,t]),y.useLayoutEffect(()=>()=>{a.current&&(r(FF(a.current)),a.current=null)},[r]),null}function G1e(e){var{legendPayload:t}=e,r=Xt(),n=Ue(St),a=y.useRef(null);return y.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(a.current===null?r(zF(t)):a.current!==t&&r(UF({prev:a.current,next:t})),a.current=t)},[r,n,t]),y.useLayoutEffect(()=>()=>{a.current&&(r(FF(a.current)),a.current=null)},[r]),null}var ZN,W1e=()=>{var[e]=y.useState(()=>_h("uid-"));return e},Q1e=(ZN=sb.useId)!==null&&ZN!==void 0?ZN:W1e;function Y1e(e,t){var r=Q1e();return t||(e?"".concat(e,"-").concat(r):r)}var X1e=y.createContext(void 0),C9=e=>{var{id:t,type:r,children:n}=e,a=Y1e("recharts-".concat(r),t);return y.createElement(X1e.Provider,{value:a},n(a))},Z1e={cartesianItems:[],polarItems:[]},k9=Yn({name:"graphicalItems",initialState:Z1e,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Kt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,a=xa(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},prepare:Kt()},removeCartesianGraphicalItem:{reducer(e,t){var r=xa(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Kt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Kt()},removePolarGraphicalItem:{reducer(e,t){var r=xa(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Kt()}}}),{addCartesianGraphicalItem:J1e,replaceCartesianGraphicalItem:eje,removeCartesianGraphicalItem:tje,addPolarGraphicalItem:rje,removePolarGraphicalItem:nje}=k9.actions,sje=k9.reducer,aje=e=>{var t=Xt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(J1e(e)):r.current!==e&&t(eje({prev:r.current,next:e})),r.current=e},[t,e]),y.useLayoutEffect(()=>()=>{r.current&&(t(tje(r.current)),r.current=null)},[t]),null},ije=y.memo(aje);function oje(e){var t=Xt();return y.useLayoutEffect(()=>(t(rje(e)),()=>{t(nje(e))}),[t,e]),null}var lje=["key"],cje=["onMouseEnter","onClick","onMouseLeave"],uje=["id"],dje=["id"];function pI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function dr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pI(Object(r),!0).forEach(function(n){fje(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fje(e,t,r){return(t=mje(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mje(e){var t=hje(e,"string");return typeof t=="symbol"?t:t+""}function hje(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vl(){return vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vl.apply(null,arguments)}function u0(e,t){if(e==null)return{};var r,n,a=pje(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pje(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function gje(e){var t=y.useMemo(()=>SE(e.children,su),[e.children]),r=Ue(n=>N1e(n,e.id,t));return r==null?null:y.createElement(G1e,{legendPayload:r})}var xje=y.memo(e=>{var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:i,fill:o,name:c,hide:d,tooltipType:f,id:m}=e,h={dataDefinedOnItem:n.map(g=>g.tooltipPayload),getPosition:g=>{var x;return(x=n[Number(g)])===null||x===void 0?void 0:x.tooltipPosition},settings:{stroke:a,strokeWidth:i,fill:o,dataKey:t,nameKey:r,name:Tb(c,t),hide:d,type:f,color:o,unit:"",graphicalItemId:m}};return y.createElement(_9,{tooltipEntrySettings:h})}),yje=(e,t)=>e>t?"start":e<t?"end":"middle",vje=(e,t,r)=>jn(typeof t=="function"?t(e):t,r,r*.8),bje=(e,t,r)=>{var{top:n,left:a,width:i,height:o}=t,c=WF(i,o),d=a+jn(e.cx,i,i/2),f=n+jn(e.cy,o,o/2),m=jn(e.innerRadius,c,0),h=vje(r,e.outerRadius,c),g=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:d,cy:f,innerRadius:m,outerRadius:h,maxRadius:g}},wje=(e,t)=>{var r=Yr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},jje=(e,t)=>{if(y.isValidElement(e))return y.cloneElement(e,t);if(typeof e=="function")return e(t);var r=Nt("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,a=u0(t,lje);return y.createElement(uk,vl({},a,{type:"linear",className:r}))},Nje=(e,t,r)=>{if(y.isValidElement(e))return y.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),y.isValidElement(n)))return n;var a=Nt("recharts-pie-label-text",w9(e));return y.createElement(o0,vl({},t,{alignmentBaseline:"middle",className:a}),n)};function Sje(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:i,dataKey:o}=r;if(!n||!a||!t)return null;var c=Sa(r),d=Sh(a),f=Sh(i),m=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,h=t.map((g,x)=>{var w=(g.startAngle+g.endAngle)/2,b=Ar(g.cx,g.cy,g.outerRadius+m,w),j=dr(dr(dr(dr({},c),g),{},{stroke:"none"},d),{},{index:x,textAnchor:yje(b.x,g.cx)},b),N=dr(dr(dr(dr({},c),g),{},{fill:"none",stroke:g.fill},f),{},{index:x,points:[Ar(g.cx,g.cy,g.outerRadius,w),b],key:"line"});return y.createElement(Oa,{zIndex:dn.label,key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(x)},y.createElement(Mn,null,i&&jje(i,N),Nje(a,j,Bt(g,o))))});return y.createElement(Mn,{className:"recharts-pie-labels"},h)}function _je(e){var{sectors:t,props:r,showLabels:n}=e,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?y.createElement(x9,{label:a}):y.createElement(Sje,{sectors:t,props:r,showLabels:n})}function Cje(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,shape:i,id:o}=e,c=Ue(qc),d=Ue(gE),f=Ue(Mbe),{onMouseEnter:m,onClick:h,onMouseLeave:g}=a,x=u0(a,cje),w=_E(m,a.dataKey,o),b=CE(g),j=kE(h,a.dataKey,o);return t==null||t.length===0?null:y.createElement(y.Fragment,null,t.map((N,_)=>{if(N?.startAngle===0&&N?.endAngle===0&&t.length!==1)return null;var S=f==null||f===o,k=String(_)===c&&(d==null||a.dataKey===d)&&S,A=c?n:null,T=r&&k?r:A,O=dr(dr({},N),{},{stroke:N.stroke,tabIndex:-1,[jF]:_,[NF]:o});return y.createElement(Mn,vl({key:"sector-".concat(N?.startAngle,"-").concat(N?.endAngle,"-").concat(N.midAngle,"-").concat(_),tabIndex:-1,className:"recharts-pie-sector"},vb(x,N,_),{onMouseEnter:w(N,_),onMouseLeave:b(N,_),onClick:j(N,_)}),y.createElement(S9,vl({option:i??T,index:_,shapeType:"sector",isActive:k},O)))}))}function kje(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:i}=e,{cornerRadius:o,startAngle:c,endAngle:d,dataKey:f,nameKey:m,tooltipType:h}=r,g=Math.abs(r.minAngle),x=wje(c,d),w=Math.abs(x),b=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,j=n.filter(T=>Bt(T,f,0)!==0).length,N=(w>=360?j:j-1)*b,_=w-j*g-N,S=n.reduce((T,O)=>{var P=Bt(O,f,0);return T+(Ie(P)?P:0)},0),k;if(S>0){var A;k=n.map((T,O)=>{var P=Bt(T,f,0),R=Bt(T,m,O),M=bje(r,i,T),D=(Ie(P)?P:0)/S,z,Y=dr(dr({},T),a&&a[O]&&a[O].props);O?z=A.endAngle+Yr(x)*b*(P!==0?1:0):z=c;var I=z+Yr(x)*((P!==0?g:0)+D*_),K=(z+I)/2,U=(M.innerRadius+M.outerRadius)/2,L=[{name:R,value:P,payload:Y,dataKey:f,type:h,graphicalItemId:r.id}],F=Ar(M.cx,M.cy,U,K);return A=dr(dr(dr(dr({},r.presentationProps),{},{percent:D,cornerRadius:typeof o=="string"?parseFloat(o):o,name:R,tooltipPayload:L,midAngle:K,middleRadius:U,tooltipPosition:F},Y),M),{},{value:P,dataKey:f,startAngle:z,endAngle:I,payload:Y,paddingAngle:Yr(x)*b}),A})}return k}function Eje(e){var{showLabels:t,sectors:r,children:n}=e,a=y.useMemo(()=>!t||!r?[]:r.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[r,t]);return y.createElement(i1e,{value:t?a:void 0},n)}function Aje(e){var{props:t,previousSectorsRef:r,id:n}=e,{sectors:a,isAnimationActive:i,animationBegin:o,animationDuration:c,animationEasing:d,activeShape:f,inactiveShape:m,onAnimationStart:h,onAnimationEnd:g}=t,x=Bb(t,"recharts-pie-"),w=r.current,[b,j]=y.useState(!1),N=y.useCallback(()=>{typeof g=="function"&&g(),j(!1)},[g]),_=y.useCallback(()=>{typeof h=="function"&&h(),j(!0)},[h]);return y.createElement(Eje,{showLabels:!b,sectors:a},y.createElement(Fb,{animationId:x,begin:o,duration:c,isActive:i,easing:d,onAnimationStart:_,onAnimationEnd:N,key:x},S=>{var k,A=[],T=a&&a[0],O=(k=T?.startAngle)!==null&&k!==void 0?k:0;return a?.forEach((P,R)=>{var M=w&&w[R],D=R>0?Ic(P,"paddingAngle",0):0;if(M){var z=$r(M.endAngle-M.startAngle,P.endAngle-P.startAngle,S),Y=dr(dr({},P),{},{startAngle:O+D,endAngle:O+z+D});A.push(Y),O=Y.endAngle}else{var{endAngle:I,startAngle:K}=P,U=$r(0,I-K,S),L=dr(dr({},P),{},{startAngle:O+D,endAngle:O+U+D});A.push(L),O=L.endAngle}}),r.current=A,y.createElement(Mn,null,y.createElement(Cje,{sectors:A,activeShape:f,inactiveShape:m,allOtherPieProps:t,shape:t.shape,id:n}))}),y.createElement(_je,{showLabels:!b,sectors:a,props:t}),t.children)}var Tje={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:dn.area};function Oje(e){var{id:t}=e,r=u0(e,uje),{hide:n,className:a,rootTabIndex:i}=e,o=y.useMemo(()=>SE(e.children,su),[e.children]),c=Ue(m=>S1e(m,t,o)),d=y.useRef(null),f=Nt("recharts-pie",a);return n||c==null?(d.current=null,y.createElement(Mn,{tabIndex:i,className:f})):y.createElement(Oa,{zIndex:e.zIndex},y.createElement(xje,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:c,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),y.createElement(Mn,{tabIndex:i,className:f},y.createElement(Aje,{props:dr(dr({},r),{},{sectors:c}),previousSectorsRef:d,id:t})))}function EE(e){var t=Sn(e,Tje),{id:r}=t,n=u0(t,dje),a=Sa(n);return y.createElement(C9,{id:r,type:"pie"},i=>y.createElement(y.Fragment,null,y.createElement(oje,{type:"pie",id:i,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:t.maxRadius}),y.createElement(gje,vl({},n,{id:i})),y.createElement(Oje,vl({},n,{id:i}))))}EE.displayName="Pie";function gI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function xI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gI(Object(r),!0).forEach(function(n){Pje(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pje(e,t,r){return(t=Mje(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mje(e){var t=Rje(e,"string");return typeof t=="symbol"?t:t+""}function Rje(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var E9=0,Dje={xAxis:{},yAxis:{},zAxis:{}},A9=Yn({name:"cartesianAxis",initialState:Dje,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Kt()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Kt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Kt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Kt()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Kt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Kt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Kt()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Kt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Kt()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,a=e.yAxis[r];if(a){var i,o=a.widthHistory||[];if(o.length===3&&o[0]===o[2]&&n===o[1]&&n!==a.width&&Math.abs(n-((i=o[0])!==null&&i!==void 0?i:0))<=1)return;var c=[...o,n].slice(-3);e.yAxis[r]=xI(xI({},a),{},{width:n,widthHistory:c})}}}}),{addXAxis:Ije,replaceXAxis:Lje,removeXAxis:$je,addYAxis:zje,replaceYAxis:Uje,removeYAxis:Fje,addZAxis:NUe,replaceZAxis:SUe,removeZAxis:_Ue,updateYAxisWidth:Bje}=A9.actions,qje=A9.reducer,Vje=fe([Br],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),Kje=fe([Vje,ho,po],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),T9=()=>Ue(Kje),yI=(e,t,r)=>{var n=r??e;if(!Xr(n))return jn(n,t,0)},Hje=(e,t,r)=>{var n={},a=e.filter(Jb),i=e.filter(f=>f.stackId==null),o=a.reduce((f,m)=>{var h=f[m.stackId];return h==null&&(h=[]),h.push(m),f[m.stackId]=h,f},n),c=Object.entries(o).map(f=>{var m,[h,g]=f,x=g.map(b=>b.dataKey),w=yI(t,r,(m=g[0])===null||m===void 0?void 0:m.barSize);return{stackId:h,dataKeys:x,barSize:w}}),d=i.map(f=>{var m=[f.dataKey].filter(g=>g!=null),h=yI(t,r,f.barSize);return{stackId:void 0,dataKeys:m,barSize:h}});return[...c,...d]};function vI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Dx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vI(Object(r),!0).forEach(function(n){Gje(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gje(e,t,r){return(t=Wje(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wje(e){var t=Qje(e,"string");return typeof t=="symbol"?t:t+""}function Qje(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yje(e,t,r,n,a){var i,o=n.length;if(!(o<1)){var c=jn(e,r,0,!0),d,f=[];if(ft((i=n[0])===null||i===void 0?void 0:i.barSize)){var m=!1,h=r/o,g=n.reduce((_,S)=>_+(S.barSize||0),0);g+=(o-1)*c,g>=r&&(g-=(o-1)*c,c=0),g>=r&&h>0&&(m=!0,h*=.9,g=o*h);var x=(r-g)/2>>0,w={offset:x-c,size:0};d=n.reduce((_,S)=>{var k,A={stackId:S.stackId,dataKeys:S.dataKeys,position:{offset:w.offset+w.size+c,size:m?h:(k=S.barSize)!==null&&k!==void 0?k:0}},T=[..._,A];return w=A.position,T},f)}else{var b=jn(t,r,0,!0);r-2*b-(o-1)*c<=0&&(c=0);var j=(r-2*b-(o-1)*c)/o;j>1&&(j>>=0);var N=ft(a)?Math.min(j,a):j;d=n.reduce((_,S,k)=>[..._,{stackId:S.stackId,dataKeys:S.dataKeys,position:{offset:b+(j+c)*k+(j-N)/2,size:N}}],f)}return d}}var Xje=(e,t,r,n,a,i,o)=>{var c=Xr(o)?t:o,d=Yje(r,n,a!==i?a:i,e,c);return a!==i&&d!=null&&(d=d.map(f=>Dx(Dx({},f),{},{position:Dx(Dx({},f.position),{},{offset:f.position.offset-a/2})}))),d},Zje=(e,t)=>{var r=Bk(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:i}=a;if(i)return i.find(o=>o.key===r)}}}},Jje=(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}};function eNe(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&ft(e.zIndex)?e.zIndex:t}var O9=e=>{var{chartData:t}=e,r=Xt(),n=Xn();return y.useEffect(()=>n?()=>{}:(r(k4(t)),()=>{r(k4(void 0))}),[t,r,n]),null},bI={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},P9=Yn({name:"brush",initialState:bI,reducers:{setBrushSettings(e,t){return t.payload==null?bI:t.payload}}}),{setBrushSettings:CUe}=P9.actions,tNe=P9.reducer;function rNe(e){return(e%180+180)%180}var nNe=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=rNe(a),o=i*Math.PI/180,c=Math.atan(n/r),d=o>c&&o<Math.PI-c?n/Math.sin(o):r/Math.cos(o);return Math.abs(d)},sNe={dots:[],areas:[],lines:[]},M9=Yn({name:"referenceElements",initialState:sNe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=xa(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=xa(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=xa(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:kUe,removeDot:EUe,addArea:AUe,removeArea:TUe,addLine:OUe,removeLine:PUe}=M9.actions,aNe=M9.reducer,iNe=y.createContext(void 0),oNe=e=>{var{children:t}=e,[r]=y.useState("".concat(_h("recharts"),"-clip")),n=T9();if(n==null)return null;var{x:a,y:i,width:o,height:c}=n;return y.createElement(iNe.Provider,{value:r},y.createElement("defs",null,y.createElement("clipPath",{id:r},y.createElement("rect",{x:a,y:i,height:c,width:o}))),t)};function R9(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t){var a=e[n];a!==void 0&&r.push(a)}return r}function lNe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return nNe(n,r)}function cNe(e,t,r){var n=r==="width",{x:a,y:i,width:o,height:c}=e;return t===1?{start:n?a:i,end:n?a+o:i+c}:{start:n?a+o:i+c,end:n?a:i}}function $h(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function uNe(e,t){return R9(e,t+1)}function dNe(e,t,r,n,a){for(var i=(n||[]).slice(),{start:o,end:c}=t,d=0,f=1,m=o,h=function(){var w=n?.[d];if(w===void 0)return{v:R9(n,f)};var b=d,j,N=()=>(j===void 0&&(j=r(w,b)),j),_=w.coordinate,S=d===0||$h(e,_,N,m,c);S||(d=0,m=o,f+=1),S&&(m=_+e*(N()/2+a),d+=f)},g;f<=i.length;)if(g=h(),g)return g.v;return[]}function fNe(e,t,r,n,a){var i=(n||[]).slice(),o=i.length;if(o===0)return[];for(var{start:c,end:d}=t,f=1;f<=o;f++){for(var m=(o-1)%f,h=c,g=!0,x=function(){var k=n[b];if(k==null)return 0;var A=b,T,O=()=>(T===void 0&&(T=r(k,A)),T),P=k.coordinate,R=b===m||$h(e,P,O,h,d);if(!R)return g=!1,1;R&&(h=P+e*(O()/2+a))},w,b=m;b<o&&(w=x(),!(w!==0&&w===1));b+=f);if(g){for(var j=[],N=m;N<o;N+=f){var _=n[N];_!=null&&j.push(_)}return j}}return[]}function wI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wI(Object(r),!0).forEach(function(n){mNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mNe(e,t,r){return(t=hNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hNe(e){var t=pNe(e,"string");return typeof t=="symbol"?t:t+""}function pNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gNe(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,{start:c}=t,{end:d}=t,f=function(g){var x=i[g];if(x==null)return 1;var w=x,b,j=()=>(b===void 0&&(b=r(x,g)),b);if(g===o-1){var N=e*(w.coordinate+e*j()/2-d);i[g]=w=yn(yn({},w),{},{tickCoord:N>0?w.coordinate-N*e:w.coordinate})}else i[g]=w=yn(yn({},w),{},{tickCoord:w.coordinate});if(w.tickCoord!=null){var _=$h(e,w.tickCoord,j,c,d);_&&(d=w.tickCoord-e*(j()/2+a),i[g]=yn(yn({},w),{},{isShow:!0}))}},m=o-1;m>=0;m--)f(m);return i}function xNe(e,t,r,n,a,i){var o=(n||[]).slice(),c=o.length,{start:d,end:f}=t;if(i){var m=n[c-1];if(m!=null){var h=r(m,c-1),g=e*(m.coordinate+e*h/2-f);if(o[c-1]=m=yn(yn({},m),{},{tickCoord:g>0?m.coordinate-g*e:m.coordinate}),m.tickCoord!=null){var x=$h(e,m.tickCoord,()=>h,d,f);x&&(f=m.tickCoord-e*(h/2+a),o[c-1]=yn(yn({},m),{},{isShow:!0}))}}}for(var w=i?c-1:c,b=function(_){var S=o[_];if(S==null)return 1;var k=S,A,T=()=>(A===void 0&&(A=r(S,_)),A);if(_===0){var O=e*(k.coordinate-e*T()/2-d);o[_]=k=yn(yn({},k),{},{tickCoord:O<0?k.coordinate-O*e:k.coordinate})}else o[_]=k=yn(yn({},k),{},{tickCoord:k.coordinate});if(k.tickCoord!=null){var P=$h(e,k.tickCoord,T,d,f);P&&(d=k.tickCoord+e*(T()/2+a),o[_]=yn(yn({},k),{},{isShow:!0}))}},j=0;j<w;j++)b(j);return o}function AE(e,t,r){var{tick:n,ticks:a,viewBox:i,minTickGap:o,orientation:c,interval:d,tickFormatter:f,unit:m,angle:h}=e;if(!a||!a.length||!n)return[];if(Ie(d)||Ub.isSsr){var g;return(g=uNe(a,Ie(d)?d:0))!==null&&g!==void 0?g:[]}var x=[],w=c==="top"||c==="bottom"?"width":"height",b=m&&w==="width"?nh(m,{fontSize:t,letterSpacing:r}):{width:0,height:0},j=(A,T)=>{var O=typeof f=="function"?f(A.value,T):A.value;return w==="width"?lNe(nh(O,{fontSize:t,letterSpacing:r}),b,h):nh(O,{fontSize:t,letterSpacing:r})[w]},N=a[0],_=a[1],S=a.length>=2&&N!=null&&_!=null?Yr(_.coordinate-N.coordinate):1,k=cNe(i,S,w);return d==="equidistantPreserveStart"?dNe(S,k,j,a,o):d==="equidistantPreserveEnd"?fNe(S,k,j,a,o):(d==="preserveStart"||d==="preserveStartEnd"?x=xNe(S,k,j,a,o,d==="preserveStartEnd"):x=gNe(S,k,j,a,o),x.filter(A=>A.isShow))}var yNe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:i=0}=e,o=0;if(t){Array.from(t).forEach(m=>{if(m){var h=m.getBoundingClientRect();h.width>o&&(o=h.width)}});var c=r?r.getBoundingClientRect().width:0,d=a+i,f=o+d+c+(r?n:0);return Math.round(f)}return 0},vNe=["axisLine","width","height","className","hide","ticks","axisType"];function bNe(e,t){if(e==null)return{};var r,n,a=wNe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Vc(){return Vc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vc.apply(null,arguments)}function jI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jI(Object(r),!0).forEach(function(n){jNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jNe(e,t,r){return(t=NNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NNe(e){var t=SNe(e,"string");return typeof t=="symbol"?t:t+""}function SNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gi={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:dn.axis};function _Ne(e){var{x:t,y:r,width:n,height:a,orientation:i,mirror:o,axisLine:c,otherSvgProps:d}=e;if(!c)return null;var f=lr(lr(lr({},d),Sa(c)),{},{fill:"none"});if(i==="top"||i==="bottom"){var m=+(i==="top"&&!o||i==="bottom"&&o);f=lr(lr({},f),{},{x1:t,y1:r+m*a,x2:t+n,y2:r+m*a})}else{var h=+(i==="left"&&!o||i==="right"&&o);f=lr(lr({},f),{},{x1:t+h*n,y1:r,x2:t+h*n,y2:r+a})}return y.createElement("line",Vc({},f,{className:Nt("recharts-cartesian-axis-line",Ic(c,"className"))}))}function CNe(e,t,r,n,a,i,o,c,d){var f,m,h,g,x,w,b=c?-1:1,j=e.tickSize||o,N=Ie(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":f=m=e.coordinate,g=r+ +!c*a,h=g-b*j,w=h-b*d,x=N;break;case"left":h=g=e.coordinate,m=t+ +!c*n,f=m-b*j,x=f-b*d,w=N;break;case"right":h=g=e.coordinate,m=t+ +c*n,f=m+b*j,x=f+b*d,w=N;break;default:f=m=e.coordinate,g=r+ +c*a,h=g+b*j,w=h+b*d,x=N;break}return{line:{x1:f,y1:h,x2:m,y2:g},tick:{x,y:w}}}function kNe(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function ENe(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function ANe(e){var{option:t,tickProps:r,value:n}=e,a,i=Nt(r.className,"recharts-cartesian-axis-tick-value");if(y.isValidElement(t))a=y.cloneElement(t,lr(lr({},r),{},{className:i}));else if(typeof t=="function")a=t(lr(lr({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=Nt(o,w9(t))),a=y.createElement(o0,Vc({},r,{className:o}),n)}return a}var TNe=y.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:i,tickFormatter:o,unit:c,padding:d,tickTextProps:f,orientation:m,mirror:h,x:g,y:x,width:w,height:b,tickSize:j,tickMargin:N,fontSize:_,letterSpacing:S,getTicksConfig:k,events:A,axisType:T}=e,O=AE(lr(lr({},k),{},{ticks:r}),_,S),P=kNe(m,h),R=ENe(m,h),M=Sa(k),D=Sh(n),z={};typeof a=="object"&&(z=a);var Y=lr(lr({},M),{},{fill:"none"},z),I=O.map(L=>lr({entry:L},CNe(L,g,x,w,b,m,j,h,N))),K=I.map(L=>{var{entry:F,line:q}=L;return y.createElement(Mn,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(F.value,"-").concat(F.coordinate,"-").concat(F.tickCoord)},a&&y.createElement("line",Vc({},Y,q,{className:Nt("recharts-cartesian-axis-tick-line",Ic(a,"className"))})))}),U=I.map((L,F)=>{var q,Z,{entry:B,tick:V}=L,ee=lr(lr(lr(lr({verticalAnchor:R},M),{},{textAnchor:P,stroke:"none",fill:i},V),{},{index:F,payload:B,visibleTicksCount:O.length,tickFormatter:o,padding:d},f),{},{angle:(q=(Z=f?.angle)!==null&&Z!==void 0?Z:M.angle)!==null&&q!==void 0?q:0}),ae=lr(lr({},ee),D);return y.createElement(Mn,Vc({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(B.value,"-").concat(B.coordinate,"-").concat(B.tickCoord)},vb(A,B,F)),n&&y.createElement(ANe,{option:n,tickProps:ae,value:"".concat(typeof o=="function"?o(B.value,F):B.value).concat(c||"")}))});return y.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(T,"-ticks")},U.length>0&&y.createElement(Oa,{zIndex:dn.label},y.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(T,"-tick-labels"),ref:t},U)),K.length>0&&y.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(T,"-tick-lines")},K))}),ONe=y.forwardRef((e,t)=>{var{axisLine:r,width:n,height:a,className:i,hide:o,ticks:c,axisType:d}=e,f=bNe(e,vNe),[m,h]=y.useState(""),[g,x]=y.useState(""),w=y.useRef(null);y.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var j;return yNe({ticks:w.current,label:(j=e.labelRef)===null||j===void 0?void 0:j.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var b=y.useCallback(j=>{if(j){var N=j.getElementsByClassName("recharts-cartesian-axis-tick-value");w.current=N;var _=N[0];if(_){var S=window.getComputedStyle(_),k=S.fontSize,A=S.letterSpacing;(k!==m||A!==g)&&(h(k),x(A))}}},[m,g]);return o||n!=null&&n<=0||a!=null&&a<=0?null:y.createElement(Oa,{zIndex:e.zIndex},y.createElement(Mn,{className:Nt("recharts-cartesian-axis",i)},y.createElement(_Ne,{x:e.x,y:e.y,width:n,height:a,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Sa(e)}),y.createElement(TNe,{ref:b,axisType:d,events:f,fontSize:m,getTicksConfig:e,height:e.height,letterSpacing:g,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:c,unit:e.unit,width:e.width,x:e.x,y:e.y}),y.createElement($we,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},y.createElement(Wwe,{label:e.label,labelRef:e.labelRef}),e.children)))}),TE=y.forwardRef((e,t)=>{var r=Sn(e,Gi);return y.createElement(ONe,Vc({},r,{ref:t}))});TE.displayName="CartesianAxis";var PNe=["x1","y1","x2","y2","key"],MNe=["offset"],RNe=["xAxisId","yAxisId"],DNe=["xAxisId","yAxisId"];function NI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NI(Object(r),!0).forEach(function(n){INe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function INe(e,t,r){return(t=LNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LNe(e){var t=$Ne(e,"string");return typeof t=="symbol"?t:t+""}function $Ne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nc(){return Nc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nc.apply(null,arguments)}function Cv(e,t){if(e==null)return{};var r,n,a=zNe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function zNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var UNe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:i,height:o,ry:c}=e;return y.createElement("rect",{x:n,y:a,ry:c,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function D9(e){var{option:t,lineItemProps:r}=e,n;if(y.isValidElement(t))n=y.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var a,{x1:i,y1:o,x2:c,y2:d,key:f}=r,m=Cv(r,PNe),h=(a=Sa(m))!==null&&a!==void 0?a:{},{offset:g}=h,x=Cv(h,MNe);n=y.createElement("line",Nc({},x,{x1:i,y1:o,x2:c,y2:d,fill:"none",key:f}))}return n}function FNe(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:o}=e,c=Cv(e,RNe),d=a.map((f,m)=>{var h=vn(vn({},c),{},{x1:t,y1:f,x2:t+r,y2:f,key:"line-".concat(m),index:m});return y.createElement(D9,{key:"line-".concat(m),option:n,lineItemProps:h})});return y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},d)}function BNe(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:i,yAxisId:o}=e,c=Cv(e,DNe),d=a.map((f,m)=>{var h=vn(vn({},c),{},{x1:f,y1:t,x2:f,y2:t+r,key:"line-".concat(m),index:m});return y.createElement(D9,{option:n,lineItemProps:h,key:"line-".concat(m)})});return y.createElement("g",{className:"recharts-cartesian-grid-vertical"},d)}function qNe(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:i,height:o,horizontalPoints:c,horizontal:d=!0}=e;if(!d||!t||!t.length||c==null)return null;var f=c.map(h=>Math.round(h+a-a)).sort((h,g)=>h-g);a!==f[0]&&f.unshift(0);var m=f.map((h,g)=>{var x=f[g+1],w=x==null,b=w?a+o-h:x-h;if(b<=0)return null;var j=g%t.length;return y.createElement("rect",{key:"react-".concat(g),y:h,x:n,height:b,width:i,stroke:"none",fill:t[j],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function VNe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:i,width:o,height:c,verticalPoints:d}=e;if(!t||!r||!r.length)return null;var f=d.map(h=>Math.round(h+a-a)).sort((h,g)=>h-g);a!==f[0]&&f.unshift(0);var m=f.map((h,g)=>{var x=f[g+1],w=x==null,b=w?a+o-h:x-h;if(b<=0)return null;var j=g%r.length;return y.createElement("rect",{key:"react-".concat(g),x:h,y:i,width:b,height:c,stroke:"none",fill:r[j],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var KNe=(e,t)=>{var{xAxis:r,width:n,height:a,offset:i}=e;return vF(AE(vn(vn(vn({},Gi),r),{},{ticks:bF(r),viewBox:{x:0,y:0,width:n,height:a}})),i.left,i.left+i.width,t)},HNe=(e,t)=>{var{yAxis:r,width:n,height:a,offset:i}=e;return vF(AE(vn(vn(vn({},Gi),r),{},{ticks:bF(r),viewBox:{x:0,y:0,width:n,height:a}})),i.top,i.top+i.height,t)},GNe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:dn.grid};function OE(e){var t=EF(),r=AF(),n=kF(),a=vn(vn({},Sn(e,GNe)),{},{x:Ie(e.x)?e.x:n.left,y:Ie(e.y)?e.y:n.top,width:Ie(e.width)?e.width:n.width,height:Ie(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:c,y:d,width:f,height:m,syncWithTicks:h,horizontalValues:g,verticalValues:x}=a,w=Xn(),b=Ue(R=>p4(R,"xAxis",i,w)),j=Ue(R=>p4(R,"yAxis",o,w));if(!ai(f)||!ai(m)||!Ie(c)||!Ie(d))return null;var N=a.verticalCoordinatesGenerator||KNe,_=a.horizontalCoordinatesGenerator||HNe,{horizontalPoints:S,verticalPoints:k}=a;if((!S||!S.length)&&typeof _=="function"){var A=g&&g.length,T=_({yAxis:j?vn(vn({},j),{},{ticks:A?g:j.ticks}):void 0,width:t??f,height:r??m,offset:n},A?!0:h);Jy(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(S=T)}if((!k||!k.length)&&typeof N=="function"){var O=x&&x.length,P=N({xAxis:b?vn(vn({},b),{},{ticks:O?x:b.ticks}):void 0,width:t??f,height:r??m,offset:n},O?!0:h);Jy(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof P,"]")),Array.isArray(P)&&(k=P)}return y.createElement(Oa,{zIndex:a.zIndex},y.createElement("g",{className:"recharts-cartesian-grid"},y.createElement(UNe,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),y.createElement(qNe,Nc({},a,{horizontalPoints:S})),y.createElement(VNe,Nc({},a,{verticalPoints:k})),y.createElement(FNe,Nc({},a,{offset:n,horizontalPoints:S,xAxis:b,yAxis:j})),y.createElement(BNe,Nc({},a,{offset:n,verticalPoints:k,xAxis:b,yAxis:j}))))}OE.displayName="CartesianGrid";var WNe={},I9=Yn({name:"errorBars",initialState:WNe,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:a}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?a:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:MUe,replaceErrorBar:RUe,removeErrorBar:DUe}=I9.actions,QNe=I9.reducer,YNe=["children"];function XNe(e,t){if(e==null)return{};var r,n,a=ZNe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ZNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var JNe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},eSe=y.createContext(JNe);function tSe(e){var{children:t}=e,r=XNe(e,YNe);return y.createElement(eSe.Provider,{value:r},t)}function L9(e,t){var r,n,a=Ue(f=>yo(f,e)),i=Ue(f=>vo(f,t)),o=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:Hr.allowDataOverflow,c=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Gr.allowDataOverflow,d=o||c;return{needClip:d,needClipX:o,needClipY:c}}function rSe(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=T9(),{needClipX:i,needClipY:o,needClip:c}=L9(t,r);if(!c||!a)return null;var{x:d,y:f,width:m,height:h}=a;return y.createElement("clipPath",{id:"clipPath-".concat(n)},y.createElement("rect",{x:i?d:d-m/2,y:o?f:f-h/2,width:i?m:m*2,height:o?h:h*2}))}var JN={exports:{}},eS={};var SI;function nSe(){if(SI)return eS;SI=1;var e=ef();function t(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,i=e.useEffect,o=e.useMemo,c=e.useDebugValue;return eS.useSyncExternalStoreWithSelector=function(d,f,m,h,g){var x=a(null);if(x.current===null){var w={hasValue:!1,value:null};x.current=w}else w=x.current;x=o(function(){function j(A){if(!N){if(N=!0,_=A,A=h(A),g!==void 0&&w.hasValue){var T=w.value;if(g(T,A))return S=T}return S=A}if(T=S,r(_,A))return T;var O=h(A);return g!==void 0&&g(T,O)?(_=A,T):(_=A,S=O)}var N=!1,_,S,k=m===void 0?null:m;return[function(){return j(f())},k===null?void 0:function(){return j(k())}]},[f,m,h,g]);var b=n(d,x[0],x[1]);return i(function(){w.hasValue=!0,w.value=b},[b]),c(b),b},eS}var _I;function sSe(){return _I||(_I=1,JN.exports=nSe()),JN.exports}sSe();function aSe(e){e()}function iSe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){aSe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var CI={notify(){},get:()=>[]};function oSe(e,t){let r,n=CI,a=0,i=!1;function o(b){m();const j=n.subscribe(b);let N=!1;return()=>{N||(N=!0,j(),h())}}function c(){n.notify()}function d(){w.onStateChange&&w.onStateChange()}function f(){return i}function m(){a++,r||(r=e.subscribe(d),n=iSe())}function h(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=CI)}function g(){i||(i=!0,m())}function x(){i&&(i=!1,h())}const w={addNestedSub:o,notifyNestedSubs:c,handleChangeWrapper:d,isSubscribed:f,trySubscribe:g,tryUnsubscribe:x,getListeners:()=>n};return w}var lSe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cSe=lSe(),uSe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",dSe=uSe(),fSe=()=>cSe||dSe?y.useLayoutEffect:y.useEffect,mSe=fSe();function kI(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function hSe(e,t){if(kI(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!kI(e[r[a]],t[r[a]]))return!1;return!0}var pSe=Symbol.for("react-redux-context"),gSe=typeof globalThis<"u"?globalThis:{};function xSe(){if(!y.createContext)return{};const e=gSe[pSe]??=new Map;let t=e.get(y.createContext);return t||(t=y.createContext(null),e.set(y.createContext,t)),t}var ySe=xSe();function vSe(e){const{children:t,context:r,serverState:n,store:a}=e,i=y.useMemo(()=>{const d=oSe(a);return{store:a,subscription:d,getServerState:n?()=>n:void 0}},[a,n]),o=y.useMemo(()=>a.getState(),[a]);mSe(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),o!==a.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,o]);const c=r||ySe;return y.createElement(c.Provider,{value:i},t)}var bSe=vSe,wSe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function jSe(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function PE(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(wSe.has(n)){if(e[n]==null&&t[n]==null)continue;if(!hSe(e[n],t[n]))return!1}else if(!jSe(e[n],t[n]))return!1;return!0}function au(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(a=>a.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:E9}function iu(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(a=>a.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:E9}var NSe="Invariant failed";function SSe(e,t){throw new Error(NSe)}function n_(){return n_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n_.apply(null,arguments)}function kv(e){return y.createElement(S9,n_({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var _Se=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(Ie(t))return t;var i=Ie(n)||Xr(n);return i?t(n,a):(i||SSe(),r)}},CSe=(e,t,r)=>r,kSe=(e,t)=>t,Sp=fe([Kk,kSe],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),ESe=fe([Sp],e=>e?.maxBarSize),ASe=(e,t,r,n)=>n,TSe=fe([St,Kk,au,iu,CSe],(e,t,r,n,a)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===a).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),OSe=(e,t,r)=>{var n=St(e),a=au(e,t),i=iu(e,t);if(!(a==null||i==null))return n==="horizontal"?X2(e,"yAxis",i,r):X2(e,"xAxis",a,r)},PSe=(e,t)=>{var r=St(e),n=au(e,t),a=iu(e,t);if(!(n==null||a==null))return r==="horizontal"?h4(e,"xAxis",n):h4(e,"yAxis",a)},MSe=fe([TSe,Mye,PSe],Hje),RSe=(e,t,r)=>{var n,a,i=Sp(e,t);if(i==null)return 0;var o=au(e,t),c=iu(e,t);if(o==null||c==null)return 0;var d=St(e),f=GB(e),{maxBarSize:m}=i,h=Xr(m)?f:m,g,x;return d==="horizontal"?(g=Vd(e,"xAxis",o,r),x=qd(e,"xAxis",o,r)):(g=Vd(e,"yAxis",c,r),x=qd(e,"yAxis",c,r)),(n=(a=Zy(g,x,!0))!==null&&a!==void 0?a:h)!==null&&n!==void 0?n:0},$9=(e,t,r)=>{var n=St(e),a=au(e,t),i=iu(e,t);if(!(a==null||i==null)){var o,c;return n==="horizontal"?(o=Vd(e,"xAxis",a,r),c=qd(e,"xAxis",a,r)):(o=Vd(e,"yAxis",i,r),c=qd(e,"yAxis",i,r)),Zy(o,c)}},DSe=fe([MSe,GB,Pye,WB,RSe,$9,ESe],Xje),ISe=(e,t,r)=>{var n=au(e,t);if(n!=null)return Vd(e,"xAxis",n,r)},LSe=(e,t,r)=>{var n=iu(e,t);if(n!=null)return Vd(e,"yAxis",n,r)},$Se=(e,t,r)=>{var n=au(e,t);if(n!=null)return qd(e,"xAxis",n,r)},zSe=(e,t,r)=>{var n=iu(e,t);if(n!=null)return qd(e,"yAxis",n,r)},USe=fe([DSe,Sp],Jje),FSe=fe([OSe,Sp],Zje),BSe=fe([Br,ak,ISe,LSe,$Se,zSe,USe,St,Sye,$9,FSe,Sp,ASe],(e,t,r,n,a,i,o,c,d,f,m,h,g)=>{var{chartData:x,dataStartIndex:w,dataEndIndex:b}=d;if(!(h==null||o==null||t==null||c!=="horizontal"&&c!=="vertical"||r==null||n==null||a==null||i==null||f==null)){var{data:j}=h,N;if(j!=null&&j.length>0?N=j:N=x?.slice(w,b+1),N!=null)return g2e({layout:c,barSettings:h,pos:o,parentViewBox:t,bandSize:f,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:i,stackedData:m,displayedData:N,offset:e,cells:g,dataStartIndex:w})}}),qSe=["index"];function s_(){return s_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s_.apply(null,arguments)}function VSe(e,t){if(e==null)return{};var r,n,a=KSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function KSe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var z9=y.createContext(void 0),HSe=e=>{var t=y.useContext(z9);if(t!=null)return t.stackId;if(e!=null)return kme(e)},GSe=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),WSe=e=>{var t=y.useContext(z9);if(t!=null){var{stackId:r}=t;return"url(#".concat(GSe(r,e),")")}},U9=e=>{var{index:t}=e,r=VSe(e,qSe),n=WSe(t);return y.createElement(Mn,s_({className:"recharts-bar-stack-layer",clipPath:n},r))},QSe=["onMouseEnter","onMouseLeave","onClick"],YSe=["value","background","tooltipPosition"],XSe=["id"],ZSe=["onMouseEnter","onClick","onMouseLeave"];function ao(){return ao=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ao.apply(null,arguments)}function EI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function An(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EI(Object(r),!0).forEach(function(n){JSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JSe(e,t,r){return(t=e2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e2e(e){var t=t2e(e,"string");return typeof t=="symbol"?t:t+""}function t2e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ev(e,t){if(e==null)return{};var r,n,a=r2e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function r2e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var n2e=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:Tb(r,t),payload:e}]},s2e=y.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:i,hide:o,unit:c,tooltipType:d,id:f}=e,m={dataDefinedOnItem:void 0,getPosition:hf,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:Tb(i,t),hide:o,type:d,color:a,unit:c,graphicalItemId:f}};return y.createElement(_9,{tooltipEntrySettings:m})});function a2e(e){var t=Ue(qc),{data:r,dataKey:n,background:a,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:c,onClick:d}=i,f=Ev(i,QSe),m=_E(o,n,i.id),h=CE(c),g=kE(d,n,i.id);if(!a||r==null)return null;var x=Sh(a);return y.createElement(Oa,{zIndex:eNe(a,dn.barBackground)},r.map((w,b)=>{var{value:j,background:N,tooltipPosition:_}=w,S=Ev(w,YSe);if(!N)return null;var k=m(w,b),A=h(w,b),T=g(w,b),O=An(An(An(An(An({option:a,isActive:String(b)===t},S),{},{fill:"#eee"},N),x),vb(f,w,b)),{},{onMouseEnter:k,onMouseLeave:A,onClick:T,dataKey:n,index:b,className:"recharts-bar-background-rectangle"});return y.createElement(kv,ao({key:"background-bar-".concat(b)},O))}))}function i2e(e){var{showLabels:t,children:r,rects:n}=e,a=n?.map(i=>{var o={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return An(An({},o),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:o,fill:i.fill})});return y.createElement(a1e,{value:t?a:void 0},r)}function o2e(e){var{shape:t,activeBar:r,baseProps:n,entry:a,index:i,dataKey:o}=e,c=Ue(qc),d=Ue(gE),f=r&&String(i)===c&&(d==null||o===d),m=f?r:t;return f?y.createElement(Oa,{zIndex:dn.activeBar},y.createElement(U9,{index:i},y.createElement(kv,ao({},n,{name:String(n.name)},a,{isActive:f,option:m,index:i,dataKey:o})))):y.createElement(kv,ao({},n,{name:String(n.name)},a,{isActive:f,option:m,index:i,dataKey:o}))}function l2e(e){var{shape:t,baseProps:r,entry:n,index:a,dataKey:i}=e;return y.createElement(kv,ao({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:a,dataKey:i}))}function c2e(e){var t,{data:r,props:n}=e,a=(t=Sa(n))!==null&&t!==void 0?t:{},{id:i}=a,o=Ev(a,XSe),{shape:c,dataKey:d,activeBar:f}=n,{onMouseEnter:m,onClick:h,onMouseLeave:g}=n,x=Ev(n,ZSe),w=_E(m,d,i),b=CE(g),j=kE(h,d,i);return r?y.createElement(y.Fragment,null,r.map((N,_)=>y.createElement(U9,ao({index:_,key:"rectangle-".concat(N?.x,"-").concat(N?.y,"-").concat(N?.value,"-").concat(_),className:"recharts-bar-rectangle"},vb(x,N,_),{onMouseEnter:w(N,_),onMouseLeave:b(N,_),onClick:j(N,_)}),f?y.createElement(o2e,{shape:c,activeBar:f,baseProps:o,entry:N,index:_,dataKey:d}):y.createElement(l2e,{shape:c,baseProps:o,entry:N,index:_,dataKey:d})))):null}function u2e(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:i,animationBegin:o,animationDuration:c,animationEasing:d,onAnimationEnd:f,onAnimationStart:m}=t,h=r.current,g=Bb(t,"recharts-bar-"),[x,w]=y.useState(!1),b=!x,j=y.useCallback(()=>{typeof f=="function"&&f(),w(!1)},[f]),N=y.useCallback(()=>{typeof m=="function"&&m(),w(!0)},[m]);return y.createElement(i2e,{showLabels:b,rects:n},y.createElement(Fb,{animationId:g,begin:o,duration:c,isActive:i,easing:d,onAnimationEnd:j,onAnimationStart:N,key:g},_=>{var S=_===1?n:n?.map((k,A)=>{var T=h&&h[A];if(T)return An(An({},k),{},{x:$r(T.x,k.x,_),y:$r(T.y,k.y,_),width:$r(T.width,k.width,_),height:$r(T.height,k.height,_)});if(a==="horizontal"){var O=$r(0,k.height,_),P=$r(k.stackedBarStart,k.y,_);return An(An({},k),{},{y:P,height:O})}var R=$r(0,k.width,_),M=$r(k.stackedBarStart,k.x,_);return An(An({},k),{},{width:R,x:M})});return _>0&&(r.current=S??null),S==null?null:y.createElement(Mn,null,y.createElement(c2e,{props:t,data:S}))}),y.createElement(x9,{label:t.label}),t.children)}function d2e(e){var t=y.useRef(null);return y.createElement(u2e,{previousRectanglesRef:t,props:e})}var F9=0,f2e=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Bt(e,t)}};class m2e extends y.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:i,yAxisId:o,needClip:c,background:d,id:f}=this.props;if(t||r==null)return null;var m=Nt("recharts-bar",a),h=f;return y.createElement(Mn,{className:m,id:f},c&&y.createElement("defs",null,y.createElement(rSe,{clipPathId:h,xAxisId:i,yAxisId:o})),y.createElement(Mn,{className:"recharts-bar-rectangles",clipPath:c?"url(#clipPath-".concat(h,")"):void 0},y.createElement(a2e,{data:r,dataKey:n,background:d,allOtherBarProps:this.props}),y.createElement(d2e,this.props)))}}var h2e={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:F9,xAxisId:0,yAxisId:0,zIndex:dn.bar};function p2e(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:i,activeBar:o,animationBegin:c,animationDuration:d,animationEasing:f,isAnimationActive:m}=e,{needClip:h}=L9(t,r),g=pf(),x=Xn(),w=SE(e.children,su),b=Ue(_=>BSe(_,e.id,x,w));if(g!=="vertical"&&g!=="horizontal")return null;var j,N=b?.[0];return N==null||N.height==null||N.width==null?j=0:j=g==="vertical"?N.height/2:N.width/2,y.createElement(tSe,{xAxisId:t,yAxisId:r,data:b,dataPointFormatter:f2e,errorBarOffset:j},y.createElement(m2e,ao({},e,{layout:g,needClip:h,data:b,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:i,activeBar:o,animationBegin:c,animationDuration:d,animationEasing:f,isAnimationActive:m})))}function g2e(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:i,xAxis:o,yAxis:c,xAxisTicks:d,yAxisTicks:f,stackedData:m,displayedData:h,offset:g,cells:x,parentViewBox:w,dataStartIndex:b}=e,j=t==="horizontal"?c:o,N=m?j.scale.domain():null,_=Eme({numericAxis:j}),S=j.scale.map(_);return h.map((k,A)=>{var T,O,P,R,M,D;if(m){var z=m[A+b];if(z==null)return null;T=jme(z,N)}else T=Bt(k,r),Array.isArray(T)||(T=[_,T]);var Y=_Se(n,F9)(T[1],A);if(t==="horizontal"){var I,K=c.scale.map(T[0]),U=c.scale.map(T[1]);if(K==null||U==null)return null;O=hR({axis:o,ticks:d,bandSize:i,offset:a.offset,entry:k,index:A}),P=(I=U??K)!==null&&I!==void 0?I:void 0,R=a.size;var L=K-U;if(M=ni(L)?0:L,D={x:O,y:g.top,width:R,height:g.height},Math.abs(Y)>0&&Math.abs(M)<Math.abs(Y)){var F=Yr(M||Y)*(Math.abs(Y)-Math.abs(M));P-=F,M+=F}}else{var q=o.scale.map(T[0]),Z=o.scale.map(T[1]);if(q==null||Z==null)return null;if(O=q,P=hR({axis:c,ticks:f,bandSize:i,offset:a.offset,entry:k,index:A}),R=Z-q,M=a.size,D={x:g.left,y:P,width:g.width,height:M},Math.abs(Y)>0&&Math.abs(R)<Math.abs(Y)){var B=Yr(R||Y)*(Math.abs(Y)-Math.abs(R));R+=B}}if(O==null||P==null||R==null||M==null)return null;var V=An(An({},k),{},{stackedBarStart:S,x:O,y:P,width:R,height:M,value:m?T:T[1],payload:k,background:D,tooltipPosition:{x:O+R/2,y:P+M/2},parentViewBox:w},x&&x[A]&&x[A].props);return V}).filter(Boolean)}function x2e(e){var t=Sn(e,h2e),r=HSe(t.stackId),n=Xn();return y.createElement(C9,{id:t.id,type:"bar"},a=>y.createElement(y.Fragment,null,y.createElement(H1e,{legendPayload:n2e(t)}),y.createElement(s2e,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),y.createElement(ije,{type:"bar",id:a,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),y.createElement(Oa,{zIndex:t.zIndex},y.createElement(p2e,ao({},t,{id:a})))))}var bd=y.memo(x2e,PE);bd.displayName="Bar";var y2e=["domain","range"],v2e=["domain","range"];function AI(e,t){if(e==null)return{};var r,n,a=b2e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function b2e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function TI(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function B9(e,t){if(e===t)return!0;var{domain:r,range:n}=e,a=AI(e,y2e),{domain:i,range:o}=t,c=AI(t,v2e);return!TI(r,i)||!TI(n,o)?!1:PE(a,c)}var w2e=["type"],j2e=["dangerouslySetInnerHTML","ticks","scale"],N2e=["id","scale"];function a_(){return a_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a_.apply(null,arguments)}function OI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function PI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OI(Object(r),!0).forEach(function(n){S2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S2e(e,t,r){return(t=_2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _2e(e){var t=C2e(e,"string");return typeof t=="symbol"?t:t+""}function C2e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function i_(e,t){if(e==null)return{};var r,n,a=k2e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function k2e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function E2e(e){var t=Xt(),r=y.useRef(null),n=TF(),{type:a}=e,i=i_(e,w2e),o=Xb(n,"xAxis",a),c=y.useMemo(()=>{if(o!=null)return PI(PI({},i),{},{type:o})},[i,o]);return y.useLayoutEffect(()=>{c!=null&&(r.current===null?t(Ije(c)):r.current!==c&&t(Lje({prev:r.current,next:c})),r.current=c)},[c,t]),y.useLayoutEffect(()=>()=>{r.current&&(t($je(r.current)),r.current=null)},[t]),null}var A2e=e=>{var{xAxisId:t,className:r}=e,n=Ue(ak),a=Xn(),i="xAxis",o=Ue(N=>kq(N,i,t,a)),c=Ue(N=>Nq(N,t)),d=Ue(N=>Mve(N,t)),f=Ue(N=>sq(N,t));if(c==null||d==null||f==null)return null;var{dangerouslySetInnerHTML:m,ticks:h,scale:g}=e,x=i_(e,j2e),{id:w,scale:b}=f,j=i_(f,N2e);return y.createElement(TE,a_({},x,j,{x:d.x,y:d.y,width:c.width,height:c.height,className:Nt("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:o,axisType:i}))},T2e={allowDataOverflow:Hr.allowDataOverflow,allowDecimals:Hr.allowDecimals,allowDuplicatedCategory:Hr.allowDuplicatedCategory,angle:Hr.angle,axisLine:Gi.axisLine,height:Hr.height,hide:!1,includeHidden:Hr.includeHidden,interval:Hr.interval,label:!1,minTickGap:Hr.minTickGap,mirror:Hr.mirror,orientation:Hr.orientation,padding:Hr.padding,reversed:Hr.reversed,scale:Hr.scale,tick:Hr.tick,tickCount:Hr.tickCount,tickLine:Gi.tickLine,tickSize:Gi.tickSize,type:Hr.type,xAxisId:0},O2e=e=>{var t=Sn(e,T2e);return y.createElement(y.Fragment,null,y.createElement(E2e,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),y.createElement(A2e,t))},ME=y.memo(O2e,B9);ME.displayName="XAxis";var P2e=["type"],M2e=["dangerouslySetInnerHTML","ticks","scale"],R2e=["id","scale"];function o_(){return o_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o_.apply(null,arguments)}function MI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function RI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MI(Object(r),!0).forEach(function(n){D2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function D2e(e,t,r){return(t=I2e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I2e(e){var t=L2e(e,"string");return typeof t=="symbol"?t:t+""}function L2e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function l_(e,t){if(e==null)return{};var r,n,a=$2e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function $2e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function z2e(e){var t=Xt(),r=y.useRef(null),n=TF(),{type:a}=e,i=l_(e,P2e),o=Xb(n,"yAxis",a),c=y.useMemo(()=>{if(o!=null)return RI(RI({},i),{},{type:o})},[o,i]);return y.useLayoutEffect(()=>{c!=null&&(r.current===null?t(zje(c)):r.current!==c&&t(Uje({prev:r.current,next:c})),r.current=c)},[c,t]),y.useLayoutEffect(()=>()=>{r.current&&(t(Fje(r.current)),r.current=null)},[t]),null}function U2e(e){var{yAxisId:t,className:r,width:n,label:a}=e,i=y.useRef(null),o=y.useRef(null),c=Ue(ak),d=Xn(),f=Xt(),m="yAxis",h=Ue(T=>Sq(T,t)),g=Ue(T=>Dve(T,t)),x=Ue(T=>kq(T,m,t,d)),w=Ue(T=>aq(T,t));if(y.useLayoutEffect(()=>{if(!(n!=="auto"||!h||wE(a)||y.isValidElement(a)||w==null)){var T=i.current;if(T){var O=T.getCalculatedWidth();Math.round(h.width)!==Math.round(O)&&f(Bje({id:t,width:O}))}}},[x,h,f,a,t,n,w]),h==null||g==null||w==null)return null;var{dangerouslySetInnerHTML:b,ticks:j,scale:N}=e,_=l_(e,M2e),{id:S,scale:k}=w,A=l_(w,R2e);return y.createElement(TE,o_({},_,A,{ref:i,labelRef:o,x:g.x,y:g.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:h.width,height:h.height,className:Nt("recharts-".concat(m," ").concat(m),r),viewBox:c,ticks:x,axisType:m}))}var F2e={allowDataOverflow:Gr.allowDataOverflow,allowDecimals:Gr.allowDecimals,allowDuplicatedCategory:Gr.allowDuplicatedCategory,angle:Gr.angle,axisLine:Gi.axisLine,hide:!1,includeHidden:Gr.includeHidden,interval:Gr.interval,label:!1,minTickGap:Gr.minTickGap,mirror:Gr.mirror,orientation:Gr.orientation,padding:Gr.padding,reversed:Gr.reversed,scale:Gr.scale,tick:Gr.tick,tickCount:Gr.tickCount,tickLine:Gi.tickLine,tickSize:Gi.tickSize,type:Gr.type,width:Gr.width,yAxisId:0},B2e=e=>{var t=Sn(e,F2e);return y.createElement(y.Fragment,null,y.createElement(z2e,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),y.createElement(U2e,t))},RE=y.memo(B2e,B9);RE.displayName="YAxis";var q2e=(e,t)=>t,DE=fe([q2e,St,tq,Jr,Vq,bo,Ybe,Br],n0e),IE=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},q9=Ys("mouseClick"),V9=cp();V9.startListening({actionCreator:q9,effect:(e,t)=>{var r=e.payload,n=DE(t.getState(),IE(r));n?.activeIndex!=null&&t.dispatch(Qve({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var c_=Ys("mouseMove"),K9=cp(),Ix=null;K9.startListening({actionCreator:c_,effect:(e,t)=>{var r=e.payload;Ix!==null&&cancelAnimationFrame(Ix);var n=IE(r);Ix=requestAnimationFrame(()=>{var a=t.getState(),i=uE(a,a.tooltip.settings.shared);if(i==="axis"){var o=DE(a,n);o?.activeIndex!=null?t.dispatch(Dq({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(Rq())}Ix=null})}});function V2e(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var DI={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},H9=Yn({name:"rootProps",initialState:DI,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:DI.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),K2e=H9.reducer,{updateOptions:H2e}=H9.actions,G2e=null,W2e={updatePolarOptions:(e,t)=>t.payload},G9=Yn({name:"polarOptions",initialState:G2e,reducers:W2e}),{updatePolarOptions:Q2e}=G9.actions,Y2e=G9.reducer,W9=Ys("keyDown"),Q9=Ys("focus"),LE=cp();LE.startListening({actionCreator:W9,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=dE(a,Nf(r),bp(r),jp(r)),c=o==null?-1:Number(o);if(!(!Number.isFinite(c)||c<0)){var d=bo(r);if(i==="Enter"){var f=jv(r,"axis","hover",String(a.index));t.dispatch(J2({active:!a.active,activeIndex:a.index,activeCoordinate:f}));return}var m=zve(r),h=m==="left-to-right"?1:-1,g=i==="ArrowRight"?1:-1,x=c+g*h;if(!(d==null||x>=d.length||x<0)){var w=jv(r,"axis","hover",String(x));t.dispatch(J2({active:!0,activeIndex:x.toString(),activeCoordinate:w}))}}}}}});LE.startListening({actionCreator:Q9,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var i="0",o=jv(r,"axis","hover",String(i));t.dispatch(J2({active:!0,activeIndex:i,activeCoordinate:o}))}}}});var Is=Ys("externalEvent"),Y9=cp(),tS=new Map;Y9.startListening({actionCreator:Is,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var a=n.type,i=tS.get(a);i!==void 0&&cancelAnimationFrame(i);var o=requestAnimationFrame(()=>{try{var c=t.getState(),d={activeCoordinate:Dbe(c),activeDataKey:gE(c),activeIndex:qc(c),activeLabel:Gq(c),activeTooltipIndex:qc(c),isTooltipActive:Ibe(c)};r(d,n)}finally{tS.delete(a)}});tS.set(a,o)}}});var X2e=fe([wf],e=>e.tooltipItemPayloads),Z2e=fe([X2e,(e,t)=>t,(e,t,r)=>r],(e,t,r)=>{if(t!=null){var n=e.find(i=>i.settings.graphicalItemId===r);if(n!=null){var{getPosition:a}=n;if(a!=null)return a(t)}}}),X9=Ys("touchMove"),Z9=cp();Z9.startListening({actionCreator:X9,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),a=uE(n,n.tooltip.settings.shared);if(a==="axis"){var i=r.touches[0];if(i==null)return;var o=DE(n,IE({clientX:i.clientX,clientY:i.clientY,currentTarget:r.currentTarget}));o?.activeIndex!=null&&t.dispatch(Dq({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(a==="item"){var c,d=r.touches[0];if(document.elementFromPoint==null||d==null)return;var f=document.elementFromPoint(d.clientX,d.clientY);if(!f||!f.getAttribute)return;var m=f.getAttribute(jF),h=(c=f.getAttribute(NF))!==null&&c!==void 0?c:void 0,g=jf(n).find(b=>b.id===h);if(m==null||g==null||h==null)return;var{dataKey:x}=g,w=Z2e(n,m,h);t.dispatch(Mq({activeDataKey:x,activeIndex:m,activeCoordinate:w,activeGraphicalItemId:h}))}}}});var J2e=VU({brush:tNe,cartesianAxis:qje,chartData:R0e,errorBars:QNe,graphicalItems:sje,layout:xme,legend:jhe,options:A0e,polarAxis:x1e,polarOptions:Y2e,referenceElements:aNe,rootProps:K2e,tooltip:Yve,zIndex:x0e}),e_e=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Bfe({reducer:J2e,preloadedState:t,middleware:n=>{var a;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([V9.middleware,K9.middleware,LE.middleware,Y9.middleware,Z9.middleware])},enhancers:n=>{var a=n;return typeof n=="function"&&(a=n()),a.concat(aF({type:"raf"}))},devTools:{serialize:{replacer:V2e},name:"recharts-".concat(r)}})};function J9(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=Xn(),i=y.useRef(null);if(a)return r;i.current==null&&(i.current=e_e(t,n));var o=ZC;return y.createElement(bSe,{context:o,store:i.current},r)}function t_e(e){var{layout:t,margin:r}=e,n=Xt(),a=Xn();return y.useEffect(()=>{a||(n(hme(t)),n(mme(r)))},[n,a,t,r]),null}var eV=y.memo(t_e,PE);function tV(e){var t=Xt();return y.useEffect(()=>{t(H2e(e))},[t,e]),null}function II(e){var{zIndex:t,isPanorama:r}=e,n=y.useRef(null),a=Xt();return y.useLayoutEffect(()=>(n.current&&a(p0e({zIndex:t,element:n.current,isPanorama:r})),()=>{a(g0e({zIndex:t,isPanorama:r}))}),[a,t,r]),y.createElement("g",{tabIndex:-1,ref:n})}function LI(e){var{children:t,isPanorama:r}=e,n=Ue(a0e);if(!n||n.length===0)return t;var a=n.filter(o=>o<0),i=n.filter(o=>o>0);return y.createElement(y.Fragment,null,a.map(o=>y.createElement(II,{key:o,zIndex:o,isPanorama:r})),t,i.map(o=>y.createElement(II,{key:o,zIndex:o,isPanorama:r})))}var r_e=["children"];function n_e(e,t){if(e==null)return{};var r,n,a=s_e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function s_e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Av(){return Av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Av.apply(null,arguments)}var a_e={width:"100%",height:"100%",display:"block"},i_e=y.forwardRef((e,t)=>{var r=EF(),n=AF(),a=BF();if(!ai(r)||!ai(n))return null;var{children:i,otherAttributes:o,title:c,desc:d}=e,f,m;return o!=null&&(typeof o.tabIndex=="number"?f=o.tabIndex:f=a?0:void 0,typeof o.role=="string"?m=o.role:m=a?"application":void 0),y.createElement(lU,Av({},o,{title:c,desc:d,role:m,tabIndex:f,width:r,height:n,style:a_e,ref:t}),i)}),o_e=e=>{var{children:t}=e,r=Ue(Rb);if(!r)return null;var{width:n,height:a,y:i,x:o}=r;return y.createElement(lU,{width:n,height:a,x:o,y:i},t)},$I=y.forwardRef((e,t)=>{var{children:r}=e,n=n_e(e,r_e),a=Xn();return a?y.createElement(o_e,null,y.createElement(LI,{isPanorama:!0},r)):y.createElement(i_e,Av({ref:t},n),y.createElement(LI,{isPanorama:!1},r))});function l_e(){var e=Xt(),[t,r]=y.useState(null),n=Ue(Rme);return y.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),i=a.width/t.offsetWidth;ft(i)&&i!==n&&e(gme(i))}},[t,e,n]),r}function zI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function c_e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zI(Object(r),!0).forEach(function(n){u_e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function u_e(e,t,r){return(t=d_e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d_e(e){var t=f_e(e,"string");return typeof t=="symbol"?t:t+""}function f_e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pl(){return pl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pl.apply(null,arguments)}var m_e=()=>(q0e(),null);function Tv(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var h_e=y.forwardRef((e,t)=>{var r,n,a=y.useRef(null),[i,o]=y.useState({containerWidth:Tv((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Tv((n=e.style)===null||n===void 0?void 0:n.height)}),c=y.useCallback((f,m)=>{o(h=>{var g=Math.round(f),x=Math.round(m);return h.containerWidth===g&&h.containerHeight===x?h:{containerWidth:g,containerHeight:x}})},[]),d=y.useCallback(f=>{if(typeof t=="function"&&t(f),f!=null&&typeof ResizeObserver<"u"){var{width:m,height:h}=f.getBoundingClientRect();c(m,h);var g=w=>{var b=w[0];if(b!=null){var{width:j,height:N}=b.contentRect;c(j,N)}},x=new ResizeObserver(g);x.observe(f),a.current=x}},[t,c]);return y.useEffect(()=>()=>{var f=a.current;f?.disconnect()},[c]),y.createElement(y.Fragment,null,y.createElement(dp,{width:i.containerWidth,height:i.containerHeight}),y.createElement("div",pl({ref:d},e)))}),p_e=y.forwardRef((e,t)=>{var{width:r,height:n}=e,[a,i]=y.useState({containerWidth:Tv(r),containerHeight:Tv(n)}),o=y.useCallback((d,f)=>{i(m=>{var h=Math.round(d),g=Math.round(f);return m.containerWidth===h&&m.containerHeight===g?m:{containerWidth:h,containerHeight:g}})},[]),c=y.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:f,height:m}=d.getBoundingClientRect();o(f,m)}},[t,o]);return y.createElement(y.Fragment,null,y.createElement(dp,{width:a.containerWidth,height:a.containerHeight}),y.createElement("div",pl({ref:c},e)))}),g_e=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return y.createElement(y.Fragment,null,y.createElement(dp,{width:r,height:n}),y.createElement("div",pl({ref:t},e)))}),x_e=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return typeof r=="string"||typeof n=="string"?y.createElement(p_e,pl({},e,{ref:t})):typeof r=="number"&&typeof n=="number"?y.createElement(g_e,pl({},e,{width:r,height:n,ref:t})):y.createElement(y.Fragment,null,y.createElement(dp,{width:r,height:n}),y.createElement("div",pl({ref:t},e)))});function y_e(e){return e?h_e:x_e}var v_e=y.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:i,onContextMenu:o,onDoubleClick:c,onMouseDown:d,onMouseEnter:f,onMouseLeave:m,onMouseMove:h,onMouseUp:g,onTouchEnd:x,onTouchMove:w,onTouchStart:b,style:j,width:N,responsive:_,dispatchTouchEvents:S=!0}=e,k=y.useRef(null),A=Xt(),[T,O]=y.useState(null),[P,R]=y.useState(null),M=l_e(),D=ik(),z=D?.width>0?D.width:N,Y=D?.height>0?D.height:a,I=y.useCallback(Q=>{M(Q),typeof t=="function"&&t(Q),O(Q),R(Q),Q!=null&&(k.current=Q)},[M,t,O,R]),K=y.useCallback(Q=>{A(q9(Q)),A(Is({handler:i,reactEvent:Q}))},[A,i]),U=y.useCallback(Q=>{A(c_(Q)),A(Is({handler:f,reactEvent:Q}))},[A,f]),L=y.useCallback(Q=>{A(Rq()),A(Is({handler:m,reactEvent:Q}))},[A,m]),F=y.useCallback(Q=>{A(c_(Q)),A(Is({handler:h,reactEvent:Q}))},[A,h]),q=y.useCallback(()=>{A(Q9())},[A]),Z=y.useCallback(Q=>{A(W9(Q.key))},[A]),B=y.useCallback(Q=>{A(Is({handler:o,reactEvent:Q}))},[A,o]),V=y.useCallback(Q=>{A(Is({handler:c,reactEvent:Q}))},[A,c]),ee=y.useCallback(Q=>{A(Is({handler:d,reactEvent:Q}))},[A,d]),ae=y.useCallback(Q=>{A(Is({handler:g,reactEvent:Q}))},[A,g]),J=y.useCallback(Q=>{A(Is({handler:b,reactEvent:Q}))},[A,b]),se=y.useCallback(Q=>{S&&A(X9(Q)),A(Is({handler:w,reactEvent:Q}))},[A,S,w]),ne=y.useCallback(Q=>{A(Is({handler:x,reactEvent:Q}))},[A,x]),oe=y_e(_);return y.createElement(e9.Provider,{value:T},y.createElement(bue.Provider,{value:P},y.createElement(oe,{width:z??j?.width,height:Y??j?.height,className:Nt("recharts-wrapper",n),style:c_e({position:"relative",cursor:"default",width:z,height:Y},j),onClick:K,onContextMenu:B,onDoubleClick:V,onFocus:q,onKeyDown:Z,onMouseDown:ee,onMouseEnter:U,onMouseLeave:L,onMouseMove:F,onMouseUp:ae,onTouchEnd:ne,onTouchMove:se,onTouchStart:J,ref:I},y.createElement(m_e,null),r)))}),b_e=["width","height","responsive","children","className","style","compact","title","desc"];function w_e(e,t){if(e==null)return{};var r,n,a=j_e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function j_e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var rV=y.forwardRef((e,t)=>{var{width:r,height:n,responsive:a,children:i,className:o,style:c,compact:d,title:f,desc:m}=e,h=w_e(e,b_e),g=Sa(h);return d?y.createElement(y.Fragment,null,y.createElement(dp,{width:r,height:n}),y.createElement($I,{otherAttributes:g,title:f,desc:m},i)):y.createElement(v_e,{className:o,style:c,width:r,height:n,responsive:a??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},y.createElement($I,{otherAttributes:g,title:f,desc:m,ref:t},y.createElement(oNe,null,i)))});function u_(){return u_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u_.apply(null,arguments)}var N_e={top:5,right:5,bottom:5,left:5},S_e={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:N_e,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},__e=y.forwardRef(function(t,r){var n,a=Sn(t.categoricalChartProps,S_e),{chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:c,tooltipPayloadSearcher:d,categoricalChartProps:f}=t,m={chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:c,tooltipPayloadSearcher:d,eventEmitter:void 0};return y.createElement(J9,{preloadedState:{options:m},reduxStoreName:(n=f.id)!==null&&n!==void 0?n:i},y.createElement(O9,{chartData:f.data}),y.createElement(eV,{layout:a.layout,margin:a.margin}),y.createElement(tV,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),y.createElement(rV,u_({},a,{ref:r})))}),C_e=["axis","item"],nV=y.forwardRef((e,t)=>y.createElement(__e,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:C_e,tooltipPayloadSearcher:t9,categoricalChartProps:e,ref:t}));function k_e(e){var t=Xt();return y.useEffect(()=>{t(Q2e(e))},[t,e]),null}var E_e=["layout"];function d_(){return d_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d_.apply(null,arguments)}function A_e(e,t){if(e==null)return{};var r,n,a=T_e(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function T_e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var O_e={top:5,right:5,bottom:5,left:5},sV={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:O_e,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},P_e=y.forwardRef(function(t,r){var n,a=Sn(t.categoricalChartProps,sV),{layout:i}=a,o=A_e(a,E_e),{chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:m}=t,h={chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:m,eventEmitter:void 0};return y.createElement(J9,{preloadedState:{options:h},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:c},y.createElement(O9,{chartData:a.data}),y.createElement(eV,{layout:i,margin:a.margin}),y.createElement(tV,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),y.createElement(k_e,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),y.createElement(rV,d_({},o,{ref:r})))});function UI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function FI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UI(Object(r),!0).forEach(function(n){M_e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M_e(e,t,r){return(t=R_e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R_e(e){var t=D_e(e,"string");return typeof t=="symbol"?t:t+""}function D_e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var I_e=["item"],L_e=FI(FI({},sV),{},{layout:"centric",startAngle:0,endAngle:360}),aV=y.forwardRef((e,t)=>{var r=Sn(e,L_e);return y.createElement(P_e,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:I_e,tooltipPayloadSearcher:t9,categoricalChartProps:r,ref:t})});const $_e=[{key:"documents",label:"Documents",icon:Wt,color:"#6366f1",route:"/files"},{key:"facts",label:"Facts",icon:np,color:"#3b82f6",route:"/sot"},{key:"questions",label:"Questions",icon:I6,color:"#f59e0b",route:"/sot"},{key:"risks",label:"Risks",icon:vr,color:"#ef4444",route:"/sot"},{key:"actions",label:"Actions",icon:Oy,color:"#8b5cf6",route:"/sot"},{key:"decisions",label:"Decisions",icon:nte,color:"#10b981",route:"/sot"},{key:"contacts",label:"People",icon:yr,color:"#06b6d4",route:"/contacts"},{key:"overdue",label:"Overdue",icon:rp,color:"#dc2626",route:"/sot"}],z_e={completed:"#10b981",in_progress:"#3b82f6",pending:"#f59e0b",cancelled:"#9ca3af"},U_e={technical:"#3b82f6",process:"#8b5cf6",policy:"#f59e0b",people:"#06b6d4",timeline:"#ec4899",general:"#64748b"},$m={facts:"#3b82f6",questions:"#f59e0b",risks:"#ef4444",actions:"#8b5cf6"};function F_e(){return s.jsxs("div",{className:"flex flex-col items-center justify-center h-64 gap-4",children:[s.jsxs("svg",{className:"animate-spin h-10 w-10 text-gm-interactive-primary",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("p",{className:"text-gm-text-secondary text-sm",children:"Loading dashboard..."})]})}function B_e({health:e}){if(!e||typeof e.score!="number")return s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-6 flex flex-col items-center justify-center gap-2 min-h-[240px]",children:[s.jsx(q6,{className:"h-8 w-8 text-gm-text-tertiary"}),s.jsx("span",{className:"text-sm text-gm-text-tertiary",children:"Health data unavailable"})]});const t=e.score,r=e.color||"#64748b",n=e.factors||[];return s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-6 flex flex-col items-center gap-4 shadow-gm-sm",children:[s.jsxs("div",{className:"relative w-24 h-24",children:[s.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full -rotate-90",children:[s.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"var(--gm-border-primary)",strokeWidth:"3"}),s.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:r,strokeWidth:"3",strokeDasharray:`${t}, 100`,strokeLinecap:"round"})]}),s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[s.jsx("span",{className:"text-2xl font-bold text-gm-text-primary",children:t}),s.jsx("span",{className:"text-[10px] uppercase tracking-wider text-gm-text-tertiary",children:"Health"})]})]}),s.jsx("span",{className:"text-sm font-semibold",style:{color:r},children:e.status}),n.length>0&&s.jsx("div",{className:"w-full space-y-1.5",children:n.map((a,i)=>s.jsxs("div",{className:`flex items-start gap-2 text-xs px-3 py-1.5 rounded-md ${a.type==="positive"?"bg-gm-status-success-bg text-gm-status-success":"bg-gm-status-danger-bg text-gm-status-danger"}`,children:[s.jsx("span",{className:"mt-0.5 shrink-0",children:a.type==="positive"?"":"!"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("span",{className:"block truncate",children:a.factor}),a.detail&&s.jsx("span",{className:"block text-[10px] opacity-70 truncate",children:a.detail})]}),a.impact&&s.jsx("span",{className:"ml-auto text-[10px] font-semibold uppercase shrink-0 opacity-70",children:a.impact})]},i))})]})}function q_e({refresh:e}){const{data:t,isLoading:r}=F8(e),{data:n}=nle(5),[a,i]=y.useState(!1),o=t?.content||t?.briefing||"",c=t?.analysis||"",d=t?.generated_at||"",f=t?.cached,m=n?.history??[];return s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary shadow-gm-sm overflow-hidden flex-1",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gm-border-primary flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-lg font-semibold text-gm-text-primary flex items-center gap-2",children:[s.jsx(hee,{className:"h-5 w-5 text-gm-interactive-primary"}),"Daily Briefing"]}),d&&s.jsxs("p",{className:"text-xs text-gm-text-tertiary mt-0.5",children:[new Date(d).toLocaleString(),f&&s.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-gm-surface-secondary rounded text-[10px]",children:"cached"})]})]}),m.length>0&&s.jsxs("button",{onClick:()=>i(!a),className:"flex items-center gap-1 text-xs text-gm-text-tertiary hover:text-gm-text-primary transition-colors",children:[s.jsx(hh,{className:"w-3.5 h-3.5"}),"History",a?s.jsx(Sl,{className:"w-3 h-3"}):s.jsx(un,{className:"w-3 h-3"})]})]}),s.jsx("div",{className:"p-6",children:a&&m.length>0?s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary mb-2",children:"Past Briefings"}),m.map((h,g)=>s.jsxs("div",{className:"p-3 rounded-lg bg-gm-surface-hover/40 border border-gm-border-primary/50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[s.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:h.generated_at||h.created_at?new Date(h.generated_at||h.created_at).toLocaleString():`Briefing ${g+1}`}),h.model&&s.jsx("span",{className:"text-[9px] text-gm-text-tertiary bg-gm-surface-secondary px-1.5 py-0.5 rounded",children:h.model})]}),s.jsx("p",{className:"text-xs text-gm-text-secondary line-clamp-3",children:h.summary||h.briefing?.substring(0,200)||h.content?.substring(0,200)||"No content"})]},g))]}):r?s.jsxs("div",{className:"flex items-center gap-3 py-8 justify-center text-gm-text-secondary text-sm",children:[s.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating briefing..."]}):o?s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:`prose prose-sm max-w-none text-gm-text-primary leading-relaxed
                         [&_h3]:text-sm [&_h3]:font-semibold [&_h3]:text-gm-text-primary [&_h3]:mt-4 [&_h3]:mb-2
                         [&_h4]:text-xs [&_h4]:font-semibold [&_h4]:uppercase [&_h4]:tracking-wide [&_h4]:text-gm-text-secondary
                         [&_ul]:pl-5 [&_li]:text-sm [&_li]:text-gm-text-secondary [&_li]:mb-1
                         [&_strong]:text-gm-text-primary [&_p]:text-sm [&_p]:text-gm-text-secondary`,dangerouslySetInnerHTML:{__html:KI(o)}}),c&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-gm-border-primary",children:[s.jsx("h4",{className:"text-xs font-semibold uppercase tracking-wide text-gm-text-tertiary mb-2",children:"Analysis"}),s.jsx("div",{className:"text-sm text-gm-text-secondary leading-relaxed",dangerouslySetInnerHTML:{__html:KI(c)}})]})]}):s.jsx("p",{className:"text-sm text-gm-text-tertiary py-4 text-center",children:"No briefing available yet."})})]})}function V_e({actionsByStatus:e}){const t=y.useMemo(()=>e?Object.entries(e).filter(([,n])=>n>0).map(([n,a])=>({name:n.replace(/_/g," ").replace(/^\w/,i=>i.toUpperCase()),value:a,color:z_e[n]||"#9ca3af"})):[],[e]),r=t.reduce((n,a)=>n+a.value,0);return r===0?s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-6 shadow-gm-sm",children:[s.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary mb-4",children:"Actions by Status"}),s.jsx("div",{className:"flex items-center justify-center h-48 text-sm text-gm-text-tertiary",children:"No actions yet"})]}):s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-6 shadow-gm-sm",children:[s.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary mb-4",children:"Actions by Status"}),s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs("div",{className:"relative w-36 h-36",children:[s.jsx(Db,{width:"100%",height:"100%",children:s.jsx(aV,{children:s.jsx(EE,{data:t,cx:"50%",cy:"50%",innerRadius:38,outerRadius:58,dataKey:"value",stroke:"none",children:t.map((n,a)=>s.jsx(su,{fill:n.color},a))})})}),s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[s.jsx("span",{className:"text-xl font-bold text-gm-text-primary",children:r}),s.jsx("span",{className:"text-[10px] uppercase text-gm-text-tertiary",children:"Total"})]})]}),s.jsx("div",{className:"space-y-2",children:t.map((n,a)=>s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full shrink-0",style:{backgroundColor:n.color}}),s.jsxs("span",{className:"text-gm-text-secondary",children:[n.name||"",": ",s.jsx("span",{className:"font-semibold text-gm-text-primary",children:n.value})]})]},a))})]})]})}function K_e({factsByCategory:e}){if(!e)return null;const t=["technical","process","policy","people","timeline","general"],r=t.reduce((n,a)=>n+(e[a]??0),0);return r===0?s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-6 shadow-gm-sm",children:[s.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary mb-4",children:"Facts by Category"}),s.jsx("div",{className:"flex items-center justify-center h-48 text-sm text-gm-text-tertiary",children:"No facts yet"})]}):s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-6 shadow-gm-sm",children:[s.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary mb-4",children:"Facts by Category"}),s.jsx("div",{className:"space-y-3",children:t.map(n=>{const a=e[n]??0,i=r>0?a/r*100:0;return s.jsxs("div",{className:"grid grid-cols-[70px_1fr_36px] items-center gap-2",children:[s.jsx("span",{className:"text-xs text-gm-text-secondary capitalize",children:n}),s.jsx("div",{className:"h-2.5 bg-gm-surface-hover rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${i}%`,backgroundColor:U_e[n]||"#64748b"}})}),s.jsx("span",{className:"text-xs font-semibold text-gm-text-primary text-right tabular-nums",children:a})]},n)})})]})}function H_e({insights:e}){if(!e||e.length===0)return null;const t={success:"text-gm-status-success",warning:"text-gm-status-warning",info:"text-gm-text-tertiary"};return s.jsx("div",{className:"space-y-1 mt-3 pt-3 border-t border-gm-border-primary",children:e.map((r,n)=>s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:`shrink-0 ${t[r.severity]||t.info}`,children:r.direction==="up"?s.jsx(sp,{className:"w-3 h-3"}):s.jsx(t8,{className:"w-3 h-3"})}),s.jsx("span",{className:"text-gm-text-secondary truncate",children:r.message||""})]},n))})}function G_e({history:e,insights:t}){const r=y.useMemo(()=>!e||e.length===0?[]:e.map(n=>({day:n.date?new Date(n.date).toLocaleDateString(void 0,{weekday:"short"}):"",facts:n.facts??0,questions:n.questions??0,risks:n.risks??0,actions:n.actions??0})),[e]);return r.length===0?s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-6 shadow-gm-sm",children:[s.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary mb-4",children:"Weekly Activity"}),s.jsx("div",{className:"flex items-center justify-center h-48 text-sm text-gm-text-tertiary",children:"No trend data yet"})]}):s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-6 shadow-gm-sm",children:[s.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary mb-2",children:"Weekly Activity"}),s.jsx("div",{className:"flex gap-4 mb-4 flex-wrap",children:Object.entries($m).map(([n,a])=>s.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gm-text-tertiary",children:[s.jsx("span",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:a}}),s.jsx("span",{className:"capitalize",children:n})]},n))}),s.jsx(Db,{width:"100%",height:200,children:s.jsxs(nV,{data:r,barGap:1,barCategoryGap:"15%",children:[s.jsx(OE,{strokeDasharray:"3 3",stroke:"var(--gm-border-primary)"}),s.jsx(ME,{dataKey:"day",tick:{fontSize:11,fill:"var(--gm-text-tertiary)"},tickLine:!1,axisLine:!1}),s.jsx(RE,{allowDecimals:!1,tick:{fontSize:11,fill:"var(--gm-text-tertiary)"},tickLine:!1,axisLine:!1}),s.jsx(s9,{contentStyle:{backgroundColor:"var(--gm-surface-primary)",border:"1px solid var(--gm-border-primary)",borderRadius:"0.5rem",fontSize:"12px"}}),s.jsx(bd,{dataKey:"facts",fill:$m.facts,radius:[2,2,0,0]}),s.jsx(bd,{dataKey:"questions",fill:$m.questions,radius:[2,2,0,0]}),s.jsx(bd,{dataKey:"risks",fill:$m.risks,radius:[2,2,0,0]}),s.jsx(bd,{dataKey:"actions",fill:$m.actions,radius:[2,2,0,0]})]})}),s.jsx(H_e,{insights:t||[]})]})}const BI={fresh:"#10b981",aging:"#f59e0b",stale:"#f97316",critical:"#ef4444"};function W_e({aging:e}){if(!e)return null;const t=[{key:"fresh",label:"Fresh",count:e.fresh??0},{key:"aging",label:"Aging",count:e.aging??0},{key:"stale",label:"Stale",count:e.stale??0},{key:"critical",label:"Critical",count:e.critical??0}],r=t.reduce((n,a)=>n+a.count,0);return r===0?null:s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-5 shadow-gm-sm",children:[s.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary mb-4",children:"Question Aging"}),s.jsx("div",{className:"flex h-3 rounded-full overflow-hidden mb-4 bg-gm-surface-hover",children:t.map(n=>{const a=r>0?n.count/r*100:0;return a===0?null:s.jsx("div",{className:"h-full transition-all duration-500",style:{width:`${a}%`,backgroundColor:BI[n.key]},title:`${n.label}: ${n.count}`},n.key)})}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:t.map(n=>s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-lg font-bold text-gm-text-primary tabular-nums",children:n.count}),s.jsxs("div",{className:"flex items-center justify-center gap-1 mt-0.5",children:[s.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:BI[n.key]}}),s.jsx("span",{className:"text-[10px] text-gm-text-tertiary uppercase",children:n.label})]})]},n.key))})]})}const Q_e={critical:"#dc2626",high:"#ef4444",medium:"#f59e0b",low:"#10b981"};function Y_e({risksByImpact:e}){if(!e)return null;const r=["critical","high","medium","low"].map(a=>({key:a,count:e[a]??0})),n=r.reduce((a,i)=>a+i.count,0);return n===0?null:s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-5 shadow-gm-sm",children:[s.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary mb-4",children:"Risks by Impact"}),s.jsx("div",{className:"space-y-3",children:r.map(a=>{const i=n>0?a.count/n*100:0;return s.jsxs("div",{className:"grid grid-cols-[70px_1fr_36px] items-center gap-2",children:[s.jsx("span",{className:"text-xs text-gm-text-secondary capitalize",children:a.key}),s.jsx("div",{className:"h-2.5 bg-gm-surface-hover rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${i}%`,backgroundColor:Q_e[a.key]}})}),s.jsx("span",{className:"text-xs font-semibold text-gm-text-primary text-right tabular-nums",children:a.count})]},a.key)})})]})}const qI={critical:"#dc2626",high:"#ef4444",medium:"#f59e0b",low:"#10b981",none:"#94a3b8"};function X_e({questionsByPriority:e}){if(!e)return null;const r=["critical","high","medium","low","none"].map(a=>({key:a,count:e[a]??0})).filter(a=>a.count>0),n=r.reduce((a,i)=>a+i.count,0);return n===0?null:s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-5 shadow-gm-sm",children:[s.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary mb-4",children:"Questions by Priority"}),s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsxs("div",{className:"relative w-32 h-32",children:[s.jsx(Db,{width:"100%",height:"100%",children:s.jsx(aV,{children:s.jsx(EE,{data:r,cx:"50%",cy:"50%",innerRadius:34,outerRadius:52,dataKey:"count",stroke:"none",children:r.map((a,i)=>s.jsx(su,{fill:qI[a.key]||"#94a3b8"},i))})})}),s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[s.jsx("span",{className:"text-lg font-bold text-gm-text-primary",children:n}),s.jsx("span",{className:"text-[9px] uppercase text-gm-text-tertiary",children:"Total"})]})]}),s.jsx("div",{className:"space-y-1.5",children:r.map(a=>s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full shrink-0",style:{backgroundColor:qI[a.key]}}),s.jsxs("span",{className:"text-gm-text-secondary capitalize",children:[a.key,": ",s.jsx("span",{className:"font-semibold text-gm-text-primary",children:a.count})]})]},a.key))})]})]})}function Z_e({documents:e}){if(!e||!e.total||e.total===0)return null;const t=e.processed??0,r=e.pending??0,n=e.total,a=Math.round(t/n*100);return r===0?null:s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-5 shadow-gm-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary",children:"Document Processing"}),s.jsxs("span",{className:"text-xs text-gm-text-secondary tabular-nums",children:[t,"/",n]})]}),s.jsx("div",{className:"h-2.5 bg-gm-surface-hover rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gm-interactive-primary rounded-full transition-all duration-700",style:{width:`${a}%`}})}),s.jsxs("div",{className:"flex justify-between mt-2 text-[10px] text-gm-text-tertiary",children:[s.jsxs("span",{children:[a,"% complete"]}),s.jsxs("span",{children:[r," pending"]})]})]})}function J_e({costs:e}){if(!e)return null;const t=e.total??0,r=e.percentChange,n=e.budgetLimit,a=e.budgetUsedPercent,i=e.budgetAlertTriggered;return s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-5 shadow-gm-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(jC,{className:"h-4 w-4 text-gm-text-tertiary"}),s.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary",children:"LLM Costs (Month)"})]}),s.jsxs("div",{className:"flex items-end gap-3 mb-3",children:[s.jsxs("span",{className:"text-2xl font-bold text-gm-text-primary tabular-nums",children:["$",t.toFixed(2)]}),r!=null&&s.jsxs("span",{className:`flex items-center gap-0.5 text-xs font-medium pb-0.5 ${r>0?"text-gm-status-danger":r<0?"text-gm-status-success":"text-gm-text-tertiary"}`,children:[r>0?s.jsx(sp,{className:"w-3 h-3"}):r<0?s.jsx(t8,{className:"w-3 h-3"}):s.jsx(Q6,{className:"w-3 h-3"}),Math.abs(r),"%"]})]}),n&&n>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-[10px] text-gm-text-tertiary mb-1",children:[s.jsxs("span",{children:["Budget: $",n.toFixed(2)]}),s.jsxs("span",{className:i?"text-gm-status-danger font-semibold":"",children:[a,"% used"]})]}),s.jsx("div",{className:"h-1.5 bg-gm-surface-hover rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${i?"bg-gm-status-danger":"bg-gm-interactive-primary"}`,style:{width:`${Math.min(100,a??0)}%`}})})]}),e.byProvider&&Object.keys(e.byProvider).length>0&&s.jsx("div",{className:"mt-3 pt-3 border-t border-gm-border-primary space-y-1",children:Object.entries(e.byProvider).slice(0,4).map(([o,c])=>s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gm-text-secondary capitalize",children:o}),s.jsxs("span",{className:"text-gm-text-primary tabular-nums font-medium",children:["$",c.toFixed(2)]})]},o))})]})}function eCe({count:e}){return e===0?null:s.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-gm-status-info-bg text-gm-status-info text-xs font-semibold",children:[s.jsx(cee,{className:"w-3.5 h-3.5"}),e," unread"]})}const VI={critical:"bg-gm-status-danger-bg border-gm-status-danger/20 text-gm-status-danger",high:"bg-gm-status-danger-bg border-gm-status-danger/20 text-gm-status-danger",warning:"bg-gm-status-warning-bg border-gm-status-warning/20 text-gm-status-warning",medium:"bg-gm-status-warning-bg border-gm-status-warning/20 text-gm-status-warning",info:"bg-gm-status-info-bg border-gm-status-info/20 text-gm-status-info",low:"bg-gm-status-info-bg border-gm-status-info/20 text-gm-status-info"};function tCe({alerts:e}){return!e||e.length===0?null:s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-5 shadow-gm-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(X6,{className:"h-5 w-5 text-gm-status-warning"}),s.jsx("h3",{className:"text-sm font-semibold text-gm-text-primary",children:"Alerts"}),s.jsx("span",{className:"ml-auto text-xs font-semibold px-2 py-0.5 rounded-full bg-gm-status-warning/10 text-gm-status-warning",children:e.length})]}),s.jsx("div",{className:"space-y-2",children:e.slice(0,5).map((t,r)=>{const n=t.severity?.toLowerCase()||"info",a=VI[n]||VI.info;return s.jsxs("div",{className:`flex items-start gap-2.5 text-sm px-3 py-2.5 rounded-lg border ${a}`,children:[s.jsx(vr,{className:"w-4 h-4 mt-0.5 shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gm-text-primary",children:t.message||"(no message)"}),t.entity_type&&s.jsxs("p",{className:"text-[10px] text-gm-text-tertiary mt-0.5 uppercase",children:[t.entity_type," ",t.entity_id?`#${t.entity_id.slice(0,8)}`:""]})]})]},r)})})]})}function rCe({emails:e}){return!e||e.length===0?null:s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-5 shadow-gm-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Wn,{className:"h-5 w-5 text-gm-status-warning"}),s.jsx("h3",{className:"text-sm font-semibold text-gm-text-primary",children:"Emails Needing Response"}),s.jsx("span",{className:"ml-auto text-xs font-semibold px-2 py-0.5 rounded-full bg-gm-status-warning/10 text-gm-status-warning",children:e.length})]}),s.jsx("div",{className:"space-y-2",children:e.slice(0,5).map(t=>s.jsxs("div",{className:"flex items-start gap-3 p-2.5 rounded-lg bg-gm-surface-hover/40 hover:bg-gm-surface-hover transition-colors",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gm-interactive-primary/10 flex items-center justify-center shrink-0 mt-0.5",children:s.jsx(Wn,{className:"w-4 h-4 text-gm-interactive-primary"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gm-text-primary truncate",children:t.subject||"No subject"}),s.jsxs("p",{className:"text-xs text-gm-text-tertiary mt-0.5",children:[t.from_name||t.from||"Unknown",t.received_at&&`  ${new Date(t.received_at).toLocaleDateString()}`]})]})]},t.id))})]})}function nCe({sprints:e}){if(!e||e.length===0)return null;const t=e.find(c=>c.status==="active")||e[0];if(!t)return null;const r=t.start_date?new Date(t.start_date):null,n=t.end_date?new Date(t.end_date):null,a=new Date;let i=0,o=0;if(r&&n){const c=n.getTime()-r.getTime(),d=a.getTime()-r.getTime();i=c>0?Math.min(100,Math.max(0,Math.round(d/c*100))):0,o=Math.max(0,Math.ceil((n.getTime()-a.getTime())/(1e3*60*60*24)))}return s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-5 shadow-gm-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(Ld,{className:"h-4 w-4 text-gm-interactive-primary"}),s.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary",children:"Current Sprint"})]}),s.jsx("p",{className:"text-sm font-semibold text-gm-text-primary mb-1",children:t.name||"(unnamed sprint)"}),t.goal&&s.jsx("p",{className:"text-xs text-gm-text-secondary mb-3 line-clamp-2",children:t.goal}),r&&n&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between text-[10px] text-gm-text-tertiary mb-1",children:[s.jsx("span",{children:r.toLocaleDateString()}),s.jsx("span",{children:o>0?`${o}d left`:"Ended"}),s.jsx("span",{children:n.toLocaleDateString()})]}),s.jsx("div",{className:"h-2 bg-gm-surface-hover rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gm-interactive-primary rounded-full transition-all duration-500",style:{width:`${i}%`}})})]})]})}function sCe({conflicts:e,analyzedFacts:t}){return!e||e.length===0?null:s.jsxs("div",{className:"rounded-xl border border-gm-status-danger/20 bg-gm-status-danger-bg p-5 shadow-gm-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(hn,{className:"h-4 w-4 text-gm-status-danger"}),s.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary",children:"AI Conflicts Detected"}),s.jsx("span",{className:"ml-auto text-[10px] font-semibold px-1.5 py-0.5 rounded-full bg-gm-status-danger/10 text-gm-status-danger",children:e.length})]}),t!==void 0&&s.jsxs("p",{className:"text-[10px] text-gm-text-tertiary mb-3",children:[t," facts analyzed"]}),s.jsx("div",{className:"space-y-2",children:e.slice(0,4).map((r,n)=>s.jsxs("div",{className:"p-2.5 rounded-lg bg-gm-bg-primary/50 border border-gm-border-primary/50 text-xs",children:[r.explanation&&s.jsx("p",{className:"text-gm-text-primary font-medium mb-1",children:r.explanation}),r.fact_a&&s.jsxs("p",{className:"text-gm-text-secondary truncate",children:["A: ",r.fact_a]}),r.fact_b&&s.jsxs("p",{className:"text-gm-text-secondary truncate",children:["B: ",r.fact_b]}),r.decision_a&&s.jsxs("p",{className:"text-gm-text-secondary truncate",children:["A: ",r.decision_a]}),r.decision_b&&s.jsxs("p",{className:"text-gm-text-secondary truncate",children:["B: ",r.decision_b]})]},n))})]})}function aCe({stats:e}){if(!e||e.total===0)return null;const t=e.byOrganization?Object.entries(e.byOrganization).sort(([,r],[,n])=>n-r).slice(0,5):[];return s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-5 shadow-gm-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(of,{className:"h-4 w-4 text-gm-text-tertiary"}),s.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary",children:"Contacts"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-lg font-bold text-gm-text-primary tabular-nums",children:e.total}),s.jsx("p",{className:"text-[10px] text-gm-text-tertiary uppercase",children:"Total"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-lg font-bold text-gm-text-primary tabular-nums",children:e.teams??0}),s.jsx("p",{className:"text-[10px] text-gm-text-tertiary uppercase",children:"Teams"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-lg font-bold text-gm-text-primary tabular-nums",children:e.unmatchedCount??0}),s.jsx("p",{className:"text-[10px] text-gm-text-tertiary uppercase",children:"Unmatched"})]})]}),t.length>0&&s.jsx("div",{className:"pt-3 border-t border-gm-border-primary space-y-1",children:t.map(([r,n])=>s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gm-text-secondary truncate mr-2",children:r}),s.jsx("span",{className:"text-gm-text-primary tabular-nums font-medium",children:n})]},r))})]})}function iCe({stats:e}){if(!e||e.total===0)return null;const t=e.bySource?Object.entries(e.bySource).sort(([,r],[,n])=>n-r):[];return s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-5 shadow-gm-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(ms,{className:"h-4 w-4 text-gm-text-tertiary"}),s.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary",children:"Conversations"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-lg font-bold text-gm-text-primary tabular-nums",children:e.total}),s.jsx("p",{className:"text-[10px] text-gm-text-tertiary uppercase",children:"Total"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-lg font-bold text-gm-text-primary tabular-nums",children:e.totalMessages??0}),s.jsx("p",{className:"text-[10px] text-gm-text-tertiary uppercase",children:"Messages"})]})]}),t.length>0&&s.jsx("div",{className:"pt-3 border-t border-gm-border-primary space-y-1",children:t.map(([r,n])=>s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gm-text-secondary capitalize",children:r}),s.jsx("span",{className:"text-gm-text-primary tabular-nums font-medium",children:n})]},r))})]})}function oCe({sync:e}){if(!e)return null;const t=e.summary;if(!t)return null;const r=n=>n==="healthy"?"text-gm-status-success":n==="warning"?"text-gm-status-warning":"text-gm-status-danger";return s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-5 shadow-gm-sm",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(Ty,{className:"h-4 w-4 text-gm-text-tertiary"}),s.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary",children:"Sync Health"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-lg font-bold text-gm-text-primary tabular-nums",children:t.totalDeletes??0}),s.jsx("p",{className:"text-[10px] text-gm-text-tertiary uppercase",children:"Deletes"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("span",{className:"text-lg font-bold text-gm-text-primary tabular-nums",children:t.totalRestores??0}),s.jsx("p",{className:"text-[10px] text-gm-text-tertiary uppercase",children:"Restores"})]})]}),e.health&&s.jsxs("div",{className:"pt-3 border-t border-gm-border-primary space-y-1.5",children:[s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gm-text-secondary",children:"Graph Sync"}),s.jsx("span",{className:`font-semibold capitalize ${r(e.health.graphSync)}`,children:e.health.graphSync})]}),s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gm-text-secondary",children:"Performance"}),s.jsx("span",{className:`font-semibold capitalize ${r(e.health.performance)}`,children:e.health.performance})]}),t.graphSyncRate&&s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsx("span",{className:"text-gm-text-secondary",children:"Sync Rate"}),s.jsx("span",{className:"text-gm-text-primary font-medium",children:t.graphSyncRate})]})]})]})}function KI(e){return e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/^### (.*$)/gm,"<h5>$1</h5>").replace(/^## (.*$)/gm,"<h4>$1</h4>").replace(/^# (.*$)/gm,"<h3>$1</h3>").replace(/^- (.*$)/gm,"<li>$1</li>").replace(/(<li>[\s\S]*?<\/li>)/g,"<ul>$1</ul>").replace(/<\/ul>\s*<ul>/g,"").replace(/\n\n/g,"</p><p>").replace(/^(?!<[hul])(.*\S.*)$/gm,"<p>$1</p>")}function lCe(){const{data:e,isLoading:t}=bie(),{data:r,isLoading:n}=wie(),{data:a}=rU(),{data:i}=sle(7),{data:o}=BC(),{data:c}=mf(),{data:d}=ale("month"),{data:f}=ile(),{data:m}=nU(),{data:h}=mle(),{data:g}=sU(),{data:x}=hle(),{data:w}=ple(),{data:b}=gle(),{data:j}=xle(),{projectId:N}=aU(),_=sf(),S=Ee(),[k,A]=y.useState(!1),T=y.useMemo(()=>{const te=c?.contacts;return te?te.map(we=>({id:String(we.id??""),name:String(we.name??"Unknown"),role:String(we.role??""),organization:String(we.organization??""),email:we.email?String(we.email):void 0,phone:we.phone?String(we.phone):void 0,timezone:we.timezone?String(we.timezone):void 0,avatarUrl:(()=>{const ke=we.avatarUrl??we.avatar??we.photo_url;return typeof ke=="string"&&ke.length>0&&ke!=="undefined"&&ke!=="null"?ke:void 0})(),avatar:we.avatar?String(we.avatar):void 0,mentionCount:Number(we.mentionCount??we.mention_count??0)})):[]},[c]),O=y.useMemo(()=>T.filter(te=>te.timezone),[T]);if(!N)return s.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[s.jsx("div",{className:"rounded-2xl bg-gm-surface-secondary p-6 mb-6",children:s.jsx(Zi,{className:"h-12 w-12 text-gm-text-tertiary"})}),s.jsx("h2",{className:"text-xl font-semibold text-gm-text-primary mb-2",children:"No Project Selected"}),s.jsx("p",{className:"text-gm-text-secondary mb-6 max-w-sm",children:"Select a project from the dropdown in the header, or create a new project to get started."}),s.jsx(Mt,{onClick:()=>_("/settings"),children:"Go to Settings"})]});if(t||n)return s.jsx(F_e,{});const P=e||{},R=r||{},M={documents:P.documents?.total??P.stats?.documents??R.documents??0,facts:P.totalFacts??P.stats?.facts??R.facts??0,questions:P.totalQuestions??P.stats?.questions??R.questions??0,risks:P.totalRisks??P.stats?.risks??R.risks??0,actions:P.totalActions??P.stats?.actions??R.actions??0,decisions:P.totalDecisions??P.stats?.decisions??R.decisions??0,contacts:P.totalPeople??P.stats?.contacts??R.contacts??0,overdue:P.overdueActions??0},D=P.actionsByStatus?P.actionsByStatus:o?{completed:o.filter(te=>te.status==="completed").length,in_progress:o.filter(te=>te.status==="in_progress").length,pending:o.filter(te=>te.status==="pending").length,cancelled:o.filter(te=>te.status==="cancelled").length}:{},z=P.factsByCategory,Y=P.questionsByPriority,I=P.questionAging,K=P.risksByImpact,U=m?.alerts??[],L=h?.emails??[],F=g?.sprints??[],q=f?.count??0,Z=d,B=x?.conflicts??[],V=x?.analyzed_facts,ee=w,ae=b,J=j?.dashboard,se=P.trendInsights??[],ne=i?.history??P.weeklyActivity??[],oe=new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Q=()=>{S.invalidateQueries({queryKey:["dashboard"]}),S.invalidateQueries({queryKey:["stats"]}),S.invalidateQueries({queryKey:["health"]}),S.invalidateQueries({queryKey:["trends"]}),S.invalidateQueries({queryKey:["contacts"]}),S.invalidateQueries({queryKey:["costsSummary"]}),S.invalidateQueries({queryKey:["notificationsCount"]}),S.invalidateQueries({queryKey:["sotAlerts"]}),S.invalidateQueries({queryKey:["emailsNeedingResponse"]}),S.invalidateQueries({queryKey:["sprints"]}),S.invalidateQueries({queryKey:["conflicts"]}),S.invalidateQueries({queryKey:["contactsStats"]}),S.invalidateQueries({queryKey:["conversationsStats"]}),S.invalidateQueries({queryKey:["syncDashboard"]}),S.invalidateQueries({queryKey:["briefingHistory"]}),A(!0),setTimeout(()=>A(!1),500)};function pe(te){if(te==="documents")return P.documents?.pending?`+${P.documents.pending} pending`:"";if(te==="facts")return P.factsVerifiedCount?`${P.factsVerifiedCount} verified`:"";if(te==="questions"){const we=P.questionAging;return we?.critical?`${we.critical} critical`:""}if(te==="risks"){const we=P.risksByImpact;return we?.high?`${we.high} high`:""}return te==="overdue"&&M.overdue>0?"actions":""}const he=[{name:"Facts",count:M.facts,fill:"#3b82f6"},{name:"Questions",count:M.questions,fill:"#f59e0b"},{name:"Risks",count:M.risks,fill:"#ef4444"},{name:"Actions",count:M.actions,fill:"#8b5cf6"},{name:"Decisions",count:M.decisions,fill:"#10b981"},{name:"People",count:M.contacts,fill:"#06b6d4"},{name:"Docs",count:M.documents,fill:"#6366f1"}];return s.jsxs("div",{className:"w-full space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gm-text-primary",children:"Dashboard"}),s.jsx("p",{className:"text-sm text-gm-text-secondary mt-0.5",children:oe})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(eCe,{count:q}),s.jsxs(Mt,{variant:"outline",size:"sm",onClick:Q,children:[s.jsx(Gs,{className:"h-4 w-4 mr-1.5"}),"Refresh"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[320px_1fr] gap-6",children:[s.jsx(B_e,{health:a}),s.jsx(q_e,{refresh:k})]}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-8 gap-3",children:$_e.map(te=>{const we=te.icon,ke=M[te.key]??0,Ve=pe(te.key),Be=te.key==="overdue"&&ke>0;return s.jsxs("button",{onClick:()=>_(te.route),className:`group relative rounded-xl border border-gm-border-primary bg-gm-surface-primary p-4 text-center
                         overflow-hidden transition-all duration-200
                         hover:shadow-gm-md hover:-translate-y-1 hover:border-gm-border-secondary
                         focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gm-border-focus`,children:[s.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 transition-all duration-200 group-hover:h-1.5",style:{backgroundColor:te.color}}),s.jsx("div",{className:"text-2xl mb-1 mt-1",children:s.jsx(we,{className:"h-5 w-5 mx-auto",style:{color:te.color}})}),s.jsx("div",{className:"text-xl font-bold text-gm-text-primary tabular-nums",children:ke}),s.jsx("div",{className:"text-[10px] font-semibold text-gm-text-tertiary uppercase tracking-wider mt-0.5",children:te.label}),Ve&&s.jsx("div",{className:`text-[10px] mt-0.5 font-medium ${Be?"text-gm-status-danger":"text-gm-text-tertiary"}`,children:Ve})]},te.key)})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(V_e,{actionsByStatus:D}),s.jsx(K_e,{factsByCategory:z}),s.jsx(G_e,{history:ne,insights:se})]}),(I||Y||K||P.documents?.pending)&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[I&&s.jsx(W_e,{aging:I}),K&&s.jsx(Y_e,{risksByImpact:K}),Y&&s.jsx(X_e,{questionsByPriority:Y}),P.documents?.pending?s.jsx(Z_e,{documents:P.documents}):null]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-5 shadow-gm-sm",children:[s.jsx("h2",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary mb-4",children:"Knowledge Overview"}),s.jsx(Db,{width:"100%",height:180,children:s.jsxs(nV,{data:he,barCategoryGap:"20%",children:[s.jsx(OE,{strokeDasharray:"3 3",stroke:"var(--gm-border-primary)"}),s.jsx(ME,{dataKey:"name",tick:{fontSize:10,fill:"var(--gm-text-tertiary)"},tickLine:!1,axisLine:!1}),s.jsx(RE,{allowDecimals:!1,tick:{fontSize:10,fill:"var(--gm-text-tertiary)"},tickLine:!1,axisLine:!1,width:28}),s.jsx(s9,{contentStyle:{backgroundColor:"var(--gm-surface-primary)",border:"1px solid var(--gm-border-primary)",borderRadius:"0.5rem",boxShadow:"var(--shadow-md)",color:"var(--gm-text-primary)"},cursor:{fill:"var(--gm-surface-hover)",opacity:.5}}),s.jsx(bd,{dataKey:"count",radius:[4,4,0,0],children:he.map((te,we)=>s.jsx(su,{fill:te.fill},we))})]})})]}),s.jsx(J_e,{costs:Z}),s.jsx(nCe,{sprints:F})]}),(U.length>0||L.length>0||B.length>0)&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(tCe,{alerts:U}),s.jsx(rCe,{emails:L}),s.jsx(sCe,{conflicts:B,analyzedFacts:V})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(aCe,{stats:ee}),s.jsx(iCe,{stats:ae}),s.jsx(oCe,{sync:J})]}),s.jsx("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-6 shadow-gm-sm",children:s.jsx(rue,{contacts:O,allContacts:T})}),(P.recentActivity?.length>0||P.overdueItems?.length)&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[P.recentActivity&&P.recentActivity.length>0&&s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-5 shadow-gm-sm lg:col-span-2",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(fh,{className:"h-4 w-4 text-gm-interactive-primary"}),s.jsx("h2",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary",children:"Recent Activity"})]}),s.jsx("ul",{className:"divide-y divide-gm-border-primary",children:P.recentActivity.slice(0,8).map((te,we)=>s.jsxs("li",{className:"flex items-center justify-between py-2 first:pt-0 last:pb-0 transition-colors hover:bg-gm-surface-hover rounded px-2 -mx-2",children:[s.jsx("span",{className:"text-sm text-gm-text-primary truncate mr-3",children:te.description||""}),s.jsx("span",{className:"text-[10px] text-gm-text-tertiary whitespace-nowrap",children:new Date(te.timestamp).toLocaleString()})]},we))})]}),P.overdueItems&&P.overdueItems.length>0&&s.jsxs("div",{className:"rounded-xl border border-gm-status-warning/30 bg-gm-status-warning-bg p-5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(tr,{className:"h-4 w-4 text-gm-status-warning"}),s.jsx("h2",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary",children:"Overdue"}),s.jsx("span",{className:"ml-auto text-[10px] font-semibold px-1.5 py-0.5 rounded-full bg-gm-status-warning text-white",children:P.overdueItems.length})]}),s.jsx("ul",{className:"space-y-1.5",children:P.overdueItems.slice(0,6).map(te=>s.jsxs("li",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gm-text-primary truncate mr-2",children:te.content||te.id}),te.due_date&&s.jsx("span",{className:"text-[10px] text-gm-status-danger whitespace-nowrap",children:new Date(te.due_date).toLocaleDateString()})]},te.id))})]})]})]})}function cCe(e){return(e||"?").split(/\s+/).map(t=>t[0]).join("").substring(0,2).toUpperCase()}function HI({contact:e,compact:t}){const r=e.avatarUrl||e.avatar,n=typeof r=="string"&&r.length>0&&r!=="undefined"&&r!=="null"?r:null;return s.jsxs("div",{className:H("flex items-center gap-2 min-w-0",t?"py-0":"py-0.5"),children:[n?s.jsx("img",{src:n,alt:"",className:H("rounded-full object-cover shrink-0 bg-secondary",t?"w-5 h-5":"w-7 h-7")}):s.jsx("div",{className:H("rounded-full bg-primary/10 text-primary font-bold flex items-center justify-center shrink-0",t?"w-5 h-5 text-[8px]":"w-7 h-7 text-[10px]"),children:cCe(e.name||"?")}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("span",{className:H("font-medium text-foreground block truncate",t?"text-[11px]":"text-xs"),children:e.name}),!t&&(e.role||e.organization)&&s.jsx("span",{className:"text-[10px] text-muted-foreground block truncate",children:[e.role,e.organization].filter(Boolean).join("  ")})]}),e.role&&t&&s.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded-full bg-secondary text-muted-foreground shrink-0",children:e.role})]})}function GI({contacts:e,value:t,onChange:r,placeholder:n="No context",className:a,compact:i}){const[o,c]=y.useState(!1),[d,f]=y.useState(""),m=y.useRef(null),h=y.useRef(null),g=e.find(b=>b.id===t)??null,x=d.trim()?e.filter(b=>{const j=d.toLowerCase();return b.name?.toLowerCase().includes(j)||b.role?.toLowerCase().includes(j)||b.organization?.toLowerCase().includes(j)||b.email?.toLowerCase().includes(j)}):e;y.useEffect(()=>{if(!o)return;const b=j=>{m.current&&!m.current.contains(j.target)&&(c(!1),f(""))};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[o]),y.useEffect(()=>{o&&h.current&&h.current.focus()},[o]);const w=y.useCallback(b=>{r(b),c(!1),f("")},[r]);return s.jsxs("div",{ref:m,className:H("relative",a),children:[s.jsxs("button",{type:"button",onClick:()=>c(!o),className:H("w-full flex items-center gap-2 rounded-lg border border-border bg-card px-2.5 text-left transition-colors hover:bg-secondary/50 focus:outline-none focus:ring-2 focus:ring-ring",i?"py-1":"py-1.5"),children:[g?s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx(HI,{contact:g,compact:i})}):s.jsx("span",{className:H("flex-1 text-muted-foreground",i?"text-[11px]":"text-xs"),children:n}),g&&s.jsx("button",{type:"button",onClick:b=>{b.stopPropagation(),w(null)},className:"p-0.5 rounded hover:bg-secondary text-muted-foreground hover:text-foreground shrink-0",children:s.jsx(mn,{className:"w-3 h-3"})}),s.jsx(un,{className:H("w-3 h-3 text-muted-foreground shrink-0 transition-transform",o&&"rotate-180")})]}),o&&s.jsxs("div",{className:"absolute z-50 top-full left-0 right-0 mt-1 rounded-lg border border-border bg-popover shadow-lg overflow-hidden animate-in fade-in-0 zoom-in-95 duration-100",children:[e.length>5&&s.jsxs("div",{className:"flex items-center gap-2 px-2.5 py-2 border-b border-border",children:[s.jsx(bs,{className:"w-3 h-3 text-muted-foreground shrink-0"}),s.jsx("input",{ref:h,type:"text",value:d,onChange:b=>f(b.target.value),placeholder:"Search contacts...",className:"flex-1 bg-transparent text-xs text-foreground placeholder:text-muted-foreground focus:outline-none"})]}),s.jsx("button",{type:"button",onClick:()=>w(null),className:H("w-full text-left px-3 py-2 text-xs text-muted-foreground hover:bg-secondary/50 transition-colors border-b border-border/50",!t&&"bg-primary/5 text-primary font-medium"),children:n}),s.jsx("div",{className:"max-h-[240px] overflow-y-auto scrollbar-thin",children:x.length===0?s.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No contacts found"}):x.map(b=>s.jsx("button",{type:"button",onClick:()=>w(b.id),className:H("w-full text-left px-3 py-2 hover:bg-secondary/50 transition-colors",b.id===t&&"bg-primary/5"),children:s.jsx(HI,{contact:b})},b.id))})]})]})}const WI=["Summarize key risks","List open questions","What actions are overdue?","Who are the key contacts?"];function uCe(e){if(!e)return"";const t=new Date(e).getTime();if(isNaN(t))return"";const r=Date.now()-t,n=Math.floor(r/6e4);if(n<1)return"just now";if(n<60)return`${n}m ago`;const a=Math.floor(n/60);return a<24?`${a}h ago`:`${Math.floor(a/24)}d ago`}function dCe({msg:e}){if(e.role!=="assistant")return null;const t=[];if(e.confidence){const r=e.confidence==="high"?"bg-emerald-500/15 text-emerald-400":e.confidence==="medium"?"bg-amber-500/15 text-amber-400":"bg-red-500/15 text-red-400";t.push({label:e.confidence,cls:r,title:"Confidence"})}if(e.queryType&&t.push({label:e.queryType,cls:"bg-indigo-500/15 text-indigo-400",title:"Query type"}),e.rag){const r=e.rag.usedHyDE?"HyDE+RRF":e.rag.graphResults>0?"Graph+Vector":"Hybrid";t.push({label:r,cls:"bg-purple-500/15 text-purple-400",title:`RAG: ${e.rag.method??r}`});const n=e.rag.fusedResults||e.rag.vectorResults+e.rag.graphResults;n>0&&t.push({label:`${n} sources`,cls:"bg-sky-500/15 text-sky-400",title:"Sources found"})}return t.length===0?null:s.jsx("div",{className:"flex flex-wrap gap-1.5 mt-2 pt-2 border-t border-white/10",children:t.map((r,n)=>s.jsx("span",{title:r.title,className:H("text-[10px] font-semibold uppercase tracking-wide px-2 py-0.5 rounded-full",r.cls),children:r.label},n))})}function fCe({sources:e}){const t=e.filter(r=>r.contactName);return t.length===0?null:s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.map((r,n)=>s.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-purple-500/10 border border-purple-500/20 text-xs",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-purple-500/30 text-purple-400 flex items-center justify-center text-[10px] font-bold shrink-0",children:(r.contactName||"?")[0]}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("span",{className:"font-semibold text-purple-300 block truncate",children:r.contactName}),r.contactRole&&s.jsx("span",{className:"text-[10px] text-purple-400/70",children:r.contactRole})]})]},n))})}function mCe({sources:e}){const[t,r]=y.useState(!1),n=e.filter(i=>!i.contactName);if(n.length===0)return null;const a=n.slice(0,5);return s.jsxs("div",{className:"mt-2 text-xs",children:[s.jsxs("button",{onClick:()=>r(!t),className:"flex items-center gap-1 text-muted-foreground hover:text-foreground transition-colors",children:[s.jsx(Ui,{className:H("w-3 h-3 transition-transform",t&&"rotate-90")}),e.length," sources used"]}),t&&s.jsxs("div",{className:"mt-1.5 p-2 rounded-lg bg-secondary/50 space-y-1",children:[a.map((i,o)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-muted text-muted-foreground capitalize text-[10px] font-medium",children:i.type||"unknown"}),s.jsxs("span",{className:"text-primary font-semibold text-[10px] min-w-[30px]",children:[Math.round((i.rrfScore??i.score??0)*100),"%"]}),i.sourceCount&&i.sourceCount>1&&s.jsxs("span",{className:"text-[9px] px-1 rounded bg-purple-500/20 text-purple-400 font-semibold",children:["x",i.sourceCount]}),i.source&&s.jsx("span",{className:"ml-auto text-muted-foreground text-[9px] truncate max-w-[120px]",children:i.source})]},o)),n.length>5&&s.jsxs("div",{className:"text-muted-foreground text-[10px] text-center pt-1 border-t border-border",children:["+",n.length-5," more"]})]})]})}function hCe({sessions:e,currentId:t,onSelect:r,onCreate:n,contacts:a,onContextChange:i}){const[o,c]=y.useState(""),d=e.find(f=>f.id===t);return s.jsxs("div",{className:"w-60 min-w-[200px] border-r border-border bg-secondary/30 flex flex-col overflow-hidden shrink-0",children:[s.jsxs("button",{onClick:()=>n(o||null),className:"flex items-center gap-2 m-2 px-3 py-2 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90 transition-colors",children:[s.jsx(br,{className:"w-4 h-4"})," New Conversation"]}),a.length>0&&s.jsxs("div",{className:"px-3 pb-2 space-y-1",children:[s.jsx("span",{className:"text-[10px] text-muted-foreground",children:"As who?"}),s.jsx(GI,{contacts:a,value:o||null,onChange:f=>c(f??""),placeholder:"No context",compact:!0})]}),d&&a.length>0&&s.jsxs("div",{className:"px-3 pb-2 pt-1 border-t border-border space-y-1",children:[s.jsx("span",{className:"text-[10px] text-muted-foreground",children:"Session context"}),s.jsx(GI,{contacts:a,value:d.context_contact_id??null,onChange:i,placeholder:"No context",compact:!0})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-0.5",children:[e.map(f=>s.jsxs("button",{onClick:()=>r(f.id),className:H("w-full text-left flex flex-col gap-0.5 px-3 py-2 rounded-lg text-xs transition-colors",f.id===t?"bg-primary/15 text-primary font-medium":"text-muted-foreground hover:bg-secondary hover:text-foreground"),children:[s.jsx("span",{className:"truncate",children:(f.title||"Untitled").length>40?(f.title||"Untitled").substring(0,37)+"...":f.title||"Untitled"}),s.jsx("span",{className:"text-[10px] opacity-60",children:uCe(f.updated_at)})]},f.id)),e.length===0&&s.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No conversations yet"})]})]})}function pCe(){const[e,t]=y.useState("rag"),[r,n]=y.useState(null),[a,i]=y.useState([]),[o,c]=y.useState(""),[d,f]=y.useState(!1),m=y.useRef(null),h=y.useRef(null),g=Soe(),x=Qn(),w=F8(d),{data:b,refetch:j}=_oe(),N=Coe(),_=koe(),{data:S}=mf(),{data:k}=Eoe(r),A=b?.sessions??[],T=y.useMemo(()=>{if(!S)return[];const K=S?.contacts??S;return Array.isArray(K)?K:[]},[S]),O=g.isPending||x.isPending;y.useEffect(()=>{if(!k)return;const K=k?.messages??[];i(K.map(U=>({id:U.id,role:U.role,content:U.content,timestamp:U.created_at,sources:U.sources,confidence:U.metadata?.confidence,queryType:U.metadata?.queryType,rag:U.metadata?.rag,contextQuality:U.metadata?.contextQuality})))},[k]),y.useEffect(()=>{m.current?.scrollIntoView({behavior:"smooth"})},[a]);const P=y.useCallback(K=>{c(K.target.value);const U=K.target;U.style.height="auto",U.style.height=Math.min(U.scrollHeight,120)+"px"},[]),R=y.useCallback(K=>{n(K)},[]),M=y.useCallback(K=>{N.mutate({title:"New conversation",contextContactId:K??null},{onSuccess:U=>{const L=U?.session;L&&(n(L.id),i([]),j())}})},[N,j]),D=y.useCallback(K=>{r&&_.mutate({sessionId:r,contextContactId:K},{onSuccess:()=>{G.success("Context updated"),j()},onError:()=>G.error("Failed to update context")})},[r,_,j]),z=y.useCallback(K=>{const U=(K??o).trim();if(!U||O)return;const L={id:`msg-${Date.now()}-user`,role:"user",content:U,timestamp:new Date().toISOString()};i(B=>[...B,L]),c(""),h.current&&(h.current.style.height="auto");const F=a.slice(-10).map(B=>({role:B.role,content:B.content})),q=e==="sot"?x:g,Z={message:U,history:F};e==="rag"&&r&&(Z.sessionId=r),q.mutate(Z,{onSuccess:B=>{const V=B,ee={id:`msg-${Date.now()}-assistant`,role:"assistant",content:V.response,timestamp:new Date().toISOString(),sources:V.sources,contextQuality:V.contextQuality,confidence:V.confidence,queryType:V.queryType,rag:V.rag};i(ae=>[...ae,ee]),V.sessionId&&!r&&(n(V.sessionId),j())},onError:B=>{i(V=>[...V,{id:`msg-${Date.now()}-error`,role:"system",content:`Error: ${B.message}`,timestamp:new Date().toISOString()}])}})},[o,a,O,e,g,x,r,j]),Y=y.useCallback(()=>{i([]),n(null)},[]),I=[{key:"rag",label:"RAG Chat",icon:cb,desc:"Query all project knowledge"},{key:"sot",label:"SOT Chat",icon:cf,desc:"Source of Truth focused"},{key:"briefing",label:"Briefing",icon:Hee,desc:"Daily project briefing"}];return e==="briefing"?s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Daily Briefing"}),s.jsxs("button",{onClick:()=>{f(!0),w.refetch().then(()=>f(!1))},disabled:w.isFetching,className:"px-3 py-1.5 rounded-lg bg-primary text-primary-foreground text-xs font-medium hover:bg-primary/90 flex items-center gap-1.5 disabled:opacity-50",children:[w.isFetching?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Qr,{className:"w-3.5 h-3.5"}),"Refresh"]})]}),s.jsx(QI,{modes:I,current:e,onChange:t}),w.isLoading?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx(ye,{className:"h-8 w-8 animate-spin text-primary"})}):w.error?s.jsx("div",{className:"bg-card border border-border rounded-xl p-6 text-center text-muted-foreground",children:"Failed to load briefing."}):s.jsxs("div",{className:"bg-card border border-border rounded-xl p-6",children:[w.data?.generated_at&&s.jsxs("p",{className:"text-[10px] text-muted-foreground mb-4",children:["Generated: ",new Date(w.data.generated_at).toLocaleString()]}),s.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none text-foreground whitespace-pre-wrap",children:w.data?.briefing||w.data?.content||"No briefing available."}),w.data?.analysis&&s.jsxs("div",{className:"mt-6 pt-4 border-t border-border",children:[s.jsx("h3",{className:"text-sm font-semibold text-foreground mb-2",children:"Analysis"}),s.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none text-muted-foreground whitespace-pre-wrap",children:w.data.analysis})]})]})]}):s.jsxs("div",{className:"flex h-[calc(100vh-4rem)]",children:[e==="rag"&&s.jsx(hCe,{sessions:A,currentId:r,onSelect:R,onCreate:M,contacts:T,onContextChange:D}),s.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-3 border-b border-border shrink-0",children:[s.jsx("h1",{className:"text-lg font-bold text-foreground",children:"Chat"}),s.jsx("div",{className:"flex gap-2",children:a.length>0&&s.jsxs("button",{onClick:Y,className:"px-3 py-1.5 rounded-lg bg-secondary text-secondary-foreground text-xs font-medium hover:bg-muted flex items-center gap-1.5",children:[s.jsx(Et,{className:"w-3.5 h-3.5"})," Clear"]})})]}),s.jsx("div",{className:"px-6 pt-3",children:s.jsx(QI,{modes:I,current:e,onChange:t})}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[a.length===0&&s.jsxs("div",{className:"text-center text-muted-foreground py-12 space-y-4",children:[s.jsx("p",{children:e==="sot"?"Ask about facts, decisions, risks, and actions.":"Ask a question about your project knowledge base."}),s.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:WI.map(K=>s.jsx("button",{onClick:()=>z(K),className:"px-3 py-1.5 text-xs rounded-full border border-border bg-card text-muted-foreground hover:border-primary hover:text-primary transition-colors",children:K},K))})]}),a.map(K=>s.jsxs("div",{children:[s.jsxs("div",{className:H("max-w-[80%] rounded-xl p-3 text-sm",K.role==="user"?"ml-auto bg-primary text-primary-foreground":K.role==="system"?"mx-auto bg-destructive/10 text-destructive":"bg-secondary"),children:[s.jsx("div",{className:"whitespace-pre-wrap",children:K.content}),s.jsxs("div",{className:"flex items-center justify-between mt-1.5",children:[s.jsx("span",{className:"text-[10px] opacity-50",children:K.timestamp?new Date(K.timestamp).toLocaleTimeString():""}),K.contextQuality&&K.role==="assistant"&&s.jsxs("span",{className:H("text-[9px] px-2 py-0.5 rounded-full font-medium ml-2",K.contextQuality==="high"?"bg-emerald-500/10 text-emerald-400":K.contextQuality==="medium"?"bg-amber-500/10 text-amber-400":"bg-muted text-muted-foreground"),children:[K.contextQuality," confidence"]})]}),s.jsx(dCe,{msg:K})]}),K.sources&&K.sources.length>0&&s.jsxs("div",{className:"max-w-[80%]",children:[s.jsx(fCe,{sources:K.sources}),s.jsx(mCe,{sources:K.sources})]})]},K.id)),O&&s.jsxs("div",{className:"max-w-[80%] rounded-xl p-3 text-sm bg-secondary flex items-center gap-2",children:[s.jsx(ye,{className:"h-3.5 w-3.5 animate-spin text-muted-foreground"}),s.jsx("span",{className:"text-muted-foreground",children:"Thinking..."})]}),s.jsx("div",{ref:m})]}),a.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1.5 px-6 pb-2",children:WI.map(K=>s.jsx("button",{onClick:()=>z(K),className:"px-2.5 py-1 text-[10px] rounded-full border border-border bg-card text-muted-foreground hover:border-primary hover:text-primary transition-colors",children:K},K))}),s.jsxs("div",{className:"flex gap-2 px-6 py-3 border-t border-border bg-secondary/30 shrink-0",children:[s.jsx("textarea",{ref:h,value:o,onChange:P,onKeyDown:K=>{K.key==="Enter"&&!K.shiftKey&&(K.preventDefault(),z())},placeholder:e==="sot"?"Ask about facts, decisions, risks...":"Ask a question...",rows:1,className:"flex-1 min-h-[44px] max-h-[120px] resize-none rounded-lg border border-border bg-card px-3 py-2.5 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),s.jsx("button",{onClick:()=>z(),disabled:!o.trim()||O,className:"h-11 px-4 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90 disabled:opacity-50 flex items-center gap-1.5 self-end",children:s.jsx(ore,{className:"h-4 w-4"})})]})]})]})}function QI({modes:e,current:t,onChange:r}){return s.jsx("div",{className:"flex gap-1 bg-secondary rounded-xl p-1 max-w-md mb-3",children:e.map(n=>{const a=n.icon;return s.jsxs("button",{onClick:()=>r(n.key),className:H("flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors",t===n.key?"bg-card text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"),children:[s.jsx(a,{className:"w-3.5 h-3.5"})," ",n.label]},n.key)})})}const $E=y.createContext({});function zE(e){const t=y.useRef(null);return t.current===null&&(t.current=e()),t.current}const iV=typeof window<"u",oV=iV?y.useLayoutEffect:y.useEffect,d0=y.createContext(null);function UE(e,t){e.indexOf(t)===-1&&e.push(t)}function Ov(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const oi=(e,t,r)=>r>t?t:r<e?e:r;let FE=()=>{};const io={},lV=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function cV(e){return typeof e=="object"&&e!==null}const uV=e=>/^0[^.\s]+$/u.test(e);function dV(e){let t;return()=>(t===void 0&&(t=e()),t)}const Vs=e=>e,gCe=(e,t)=>r=>t(e(r)),_p=(...e)=>e.reduce(gCe),zh=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class BE{constructor(){this.subscriptions=[]}add(t){return UE(this.subscriptions,t),()=>Ov(this.subscriptions,t)}notify(t,r,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,r,n);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ya=e=>e*1e3,qs=e=>e/1e3;function fV(e,t){return t?e*(1e3/t):0}const mV=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,xCe=1e-7,yCe=12;function vCe(e,t,r,n,a){let i,o,c=0;do o=t+(r-t)/2,i=mV(o,n,a)-e,i>0?r=o:t=o;while(Math.abs(i)>xCe&&++c<yCe);return o}function Cp(e,t,r,n){if(e===t&&r===n)return Vs;const a=i=>vCe(i,0,1,e,r);return i=>i===0||i===1?i:mV(a(i),t,n)}const hV=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,pV=e=>t=>1-e(1-t),gV=Cp(.33,1.53,.69,.99),qE=pV(gV),xV=hV(qE),yV=e=>(e*=2)<1?.5*qE(e):.5*(2-Math.pow(2,-10*(e-1))),VE=e=>1-Math.sin(Math.acos(e)),vV=pV(VE),bV=hV(VE),bCe=Cp(.42,0,1,1),wCe=Cp(0,0,.58,1),wV=Cp(.42,0,.58,1),jCe=e=>Array.isArray(e)&&typeof e[0]!="number",jV=e=>Array.isArray(e)&&typeof e[0]=="number",NCe={linear:Vs,easeIn:bCe,easeInOut:wV,easeOut:wCe,circIn:VE,circInOut:bV,circOut:vV,backIn:qE,backInOut:xV,backOut:gV,anticipate:yV},SCe=e=>typeof e=="string",YI=e=>{if(jV(e)){FE(e.length===4);const[t,r,n,a]=e;return Cp(t,r,n,a)}else if(SCe(e))return NCe[e];return e},Lx=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function _Ce(e,t){let r=new Set,n=new Set,a=!1,i=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function d(m){o.has(m)&&(f.schedule(m),e()),m(c)}const f={schedule:(m,h=!1,g=!1)=>{const w=g&&a?r:n;return h&&o.add(m),w.has(m)||w.add(m),m},cancel:m=>{n.delete(m),o.delete(m)},process:m=>{if(c=m,a){i=!0;return}a=!0,[r,n]=[n,r],r.forEach(d),r.clear(),a=!1,i&&(i=!1,f.process(m))}};return f}const CCe=40;function NV(e,t){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=Lx.reduce((S,k)=>(S[k]=_Ce(i),S),{}),{setup:c,read:d,resolveKeyframes:f,preUpdate:m,update:h,preRender:g,render:x,postRender:w}=o,b=()=>{const S=io.useManualTiming?a.timestamp:performance.now();r=!1,io.useManualTiming||(a.delta=n?1e3/60:Math.max(Math.min(S-a.timestamp,CCe),1)),a.timestamp=S,a.isProcessing=!0,c.process(a),d.process(a),f.process(a),m.process(a),h.process(a),g.process(a),x.process(a),w.process(a),a.isProcessing=!1,r&&t&&(n=!1,e(b))},j=()=>{r=!0,n=!0,a.isProcessing||e(b)};return{schedule:Lx.reduce((S,k)=>{const A=o[k];return S[k]=(T,O=!1,P=!1)=>(r||j(),A.schedule(T,O,P)),S},{}),cancel:S=>{for(let k=0;k<Lx.length;k++)o[Lx[k]].cancel(S)},state:a,steps:o}}const{schedule:$t,cancel:bl,state:ln,steps:rS}=NV(typeof requestAnimationFrame<"u"?requestAnimationFrame:Vs,!0);let fy;function kCe(){fy=void 0}const On={now:()=>(fy===void 0&&On.set(ln.isProcessing||io.useManualTiming?ln.timestamp:performance.now()),fy),set:e=>{fy=e,queueMicrotask(kCe)}},SV=e=>t=>typeof t=="string"&&t.startsWith(e),_V=SV("--"),ECe=SV("var(--"),KE=e=>ECe(e)?ACe.test(e.split("/*")[0].trim()):!1,ACe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function XI(e){return typeof e!="string"?!1:e.split("/*")[0].includes("var(--")}const Sf={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Uh={...Sf,transform:e=>oi(0,1,e)},$x={...Sf,default:1},sh=e=>Math.round(e*1e5)/1e5,HE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function TCe(e){return e==null}const OCe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,GE=(e,t)=>r=>!!(typeof r=="string"&&OCe.test(r)&&r.startsWith(e)||t&&!TCe(r)&&Object.prototype.hasOwnProperty.call(r,t)),CV=(e,t,r)=>n=>{if(typeof n!="string")return n;const[a,i,o,c]=n.match(HE);return{[e]:parseFloat(a),[t]:parseFloat(i),[r]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},PCe=e=>oi(0,255,e),nS={...Sf,transform:e=>Math.round(PCe(e))},Sc={test:GE("rgb","red"),parse:CV("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+nS.transform(e)+", "+nS.transform(t)+", "+nS.transform(r)+", "+sh(Uh.transform(n))+")"};function MCe(e){let t="",r="",n="",a="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),a=e.substring(4,5),t+=t,r+=r,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const f_={test:GE("#"),parse:MCe,transform:Sc.transform},kp=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),nl=kp("deg"),Ja=kp("%"),Pe=kp("px"),RCe=kp("vh"),DCe=kp("vw"),ZI={...Ja,parse:e=>Ja.parse(e)/100,transform:e=>Ja.transform(e*100)},wd={test:GE("hsl","hue"),parse:CV("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Ja.transform(sh(t))+", "+Ja.transform(sh(r))+", "+sh(Uh.transform(n))+")"},Er={test:e=>Sc.test(e)||f_.test(e)||wd.test(e),parse:e=>Sc.test(e)?Sc.parse(e):wd.test(e)?wd.parse(e):f_.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Sc.transform(e):wd.transform(e),getAnimatableNone:e=>{const t=Er.parse(e);return t.alpha=0,Er.transform(t)}},ICe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function LCe(e){return isNaN(e)&&typeof e=="string"&&(e.match(HE)?.length||0)+(e.match(ICe)?.length||0)>0}const kV="number",EV="color",$Ce="var",zCe="var(",JI="${}",UCe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Fh(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},a=[];let i=0;const c=t.replace(UCe,d=>(Er.test(d)?(n.color.push(i),a.push(EV),r.push(Er.parse(d))):d.startsWith(zCe)?(n.var.push(i),a.push($Ce),r.push(d)):(n.number.push(i),a.push(kV),r.push(parseFloat(d))),++i,JI)).split(JI);return{values:r,split:c,indexes:n,types:a}}function AV(e){return Fh(e).values}function TV(e){const{split:t,types:r}=Fh(e),n=t.length;return a=>{let i="";for(let o=0;o<n;o++)if(i+=t[o],a[o]!==void 0){const c=r[o];c===kV?i+=sh(a[o]):c===EV?i+=Er.transform(a[o]):i+=a[o]}return i}}const FCe=e=>typeof e=="number"?0:Er.test(e)?Er.getAnimatableNone(e):e;function BCe(e){const t=AV(e);return TV(e)(t.map(FCe))}const va={test:LCe,parse:AV,createTransformer:TV,getAnimatableNone:BCe};function sS(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function qCe({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let a=0,i=0,o=0;if(!t)a=i=o=r;else{const c=r<.5?r*(1+t):r+t-r*t,d=2*r-c;a=sS(d,c,e+1/3),i=sS(d,c,e),o=sS(d,c,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function Pv(e,t){return r=>r>0?t:e}const er=(e,t,r)=>e+(t-e)*r,aS=(e,t,r)=>{const n=e*e,a=r*(t*t-n)+n;return a<0?0:Math.sqrt(a)},VCe=[f_,Sc,wd],KCe=e=>VCe.find(t=>t.test(e));function eL(e){const t=KCe(e);if(!t)return!1;let r=t.parse(e);return t===wd&&(r=qCe(r)),r}const tL=(e,t)=>{const r=eL(e),n=eL(t);if(!r||!n)return Pv(e,t);const a={...r};return i=>(a.red=aS(r.red,n.red,i),a.green=aS(r.green,n.green,i),a.blue=aS(r.blue,n.blue,i),a.alpha=er(r.alpha,n.alpha,i),Sc.transform(a))},m_=new Set(["none","hidden"]);function HCe(e,t){return m_.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function GCe(e,t){return r=>er(e,t,r)}function WE(e){return typeof e=="number"?GCe:typeof e=="string"?KE(e)?Pv:Er.test(e)?tL:YCe:Array.isArray(e)?OV:typeof e=="object"?Er.test(e)?tL:WCe:Pv}function OV(e,t){const r=[...e],n=r.length,a=e.map((i,o)=>WE(i)(i,t[o]));return i=>{for(let o=0;o<n;o++)r[o]=a[o](i);return r}}function WCe(e,t){const r={...e,...t},n={};for(const a in r)e[a]!==void 0&&t[a]!==void 0&&(n[a]=WE(e[a])(e[a],t[a]));return a=>{for(const i in n)r[i]=n[i](a);return r}}function QCe(e,t){const r=[],n={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const i=t.types[a],o=e.indexes[i][n[i]],c=e.values[o]??0;r[a]=c,n[i]++}return r}const YCe=(e,t)=>{const r=va.createTransformer(t),n=Fh(e),a=Fh(t);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?m_.has(e)&&!a.values.length||m_.has(t)&&!n.values.length?HCe(e,t):_p(OV(QCe(n,a),a.values),r):Pv(e,t)};function PV(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?er(e,t,r):WE(e)(e,t)}const XCe=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>$t.update(t,r),stop:()=>bl(t),now:()=>ln.isProcessing?ln.timestamp:On.now()}},MV=(e,t,r=10)=>{let n="";const a=Math.max(Math.round(t/r),2);for(let i=0;i<a;i++)n+=Math.round(e(i/(a-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Mv=2e4;function QE(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<Mv;)t+=r,n=e.next(t);return t>=Mv?1/0:t}function ZCe(e,t=100,r){const n=r({...e,keyframes:[0,t]}),a=Math.min(QE(n),Mv);return{type:"keyframes",ease:i=>n.next(a*i).value/t,duration:qs(a)}}const JCe=5;function RV(e,t,r){const n=Math.max(t-JCe,0);return fV(r-e(n),t-n)}const ur={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},iS=.001;function eke({duration:e=ur.duration,bounce:t=ur.bounce,velocity:r=ur.velocity,mass:n=ur.mass}){let a,i,o=1-t;o=oi(ur.minDamping,ur.maxDamping,o),e=oi(ur.minDuration,ur.maxDuration,qs(e)),o<1?(a=f=>{const m=f*o,h=m*e,g=m-r,x=h_(f,o),w=Math.exp(-h);return iS-g/x*w},i=f=>{const h=f*o*e,g=h*r+r,x=Math.pow(o,2)*Math.pow(f,2)*e,w=Math.exp(-h),b=h_(Math.pow(f,2),o);return(-a(f)+iS>0?-1:1)*((g-x)*w)/b}):(a=f=>{const m=Math.exp(-f*e),h=(f-r)*e+1;return-iS+m*h},i=f=>{const m=Math.exp(-f*e),h=(r-f)*(e*e);return m*h});const c=5/e,d=rke(a,i,c);if(e=ya(e),isNaN(d))return{stiffness:ur.stiffness,damping:ur.damping,duration:e};{const f=Math.pow(d,2)*n;return{stiffness:f,damping:o*2*Math.sqrt(n*f),duration:e}}}const tke=12;function rke(e,t,r){let n=r;for(let a=1;a<tke;a++)n=n-e(n)/t(n);return n}function h_(e,t){return e*Math.sqrt(1-t*t)}const nke=["duration","bounce"],ske=["stiffness","damping","mass"];function rL(e,t){return t.some(r=>e[r]!==void 0)}function ake(e){let t={velocity:ur.velocity,stiffness:ur.stiffness,damping:ur.damping,mass:ur.mass,isResolvedFromDuration:!1,...e};if(!rL(e,ske)&&rL(e,nke))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),a=n*n,i=2*oi(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:ur.mass,stiffness:a,damping:i}}else{const r=eke(e);t={...t,...r,mass:ur.mass},t.isResolvedFromDuration=!0}return t}function Rv(e=ur.visualDuration,t=ur.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:a}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],c={done:!1,value:i},{stiffness:d,damping:f,mass:m,duration:h,velocity:g,isResolvedFromDuration:x}=ake({...r,velocity:-qs(r.velocity||0)}),w=g||0,b=f/(2*Math.sqrt(d*m)),j=o-i,N=qs(Math.sqrt(d/m)),_=Math.abs(j)<5;n||(n=_?ur.restSpeed.granular:ur.restSpeed.default),a||(a=_?ur.restDelta.granular:ur.restDelta.default);let S;if(b<1){const A=h_(N,b);S=T=>{const O=Math.exp(-b*N*T);return o-O*((w+b*N*j)/A*Math.sin(A*T)+j*Math.cos(A*T))}}else if(b===1)S=A=>o-Math.exp(-N*A)*(j+(w+N*j)*A);else{const A=N*Math.sqrt(b*b-1);S=T=>{const O=Math.exp(-b*N*T),P=Math.min(A*T,300);return o-O*((w+b*N*j)*Math.sinh(P)+A*j*Math.cosh(P))/A}}const k={calculatedDuration:x&&h||null,next:A=>{const T=S(A);if(x)c.done=A>=h;else{let O=A===0?w:0;b<1&&(O=A===0?ya(w):RV(S,A,T));const P=Math.abs(O)<=n,R=Math.abs(o-T)<=a;c.done=P&&R}return c.value=c.done?o:T,c},toString:()=>{const A=Math.min(QE(k),Mv),T=MV(O=>k.next(A*O).value,A,30);return A+"ms "+T},toTransition:()=>{}};return k}Rv.applyToOptions=e=>{const t=ZCe(e,100,Rv);return e.ease=t.ease,e.duration=ya(t.duration),e.type="keyframes",e};function p_({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:c,max:d,restDelta:f=.5,restSpeed:m}){const h=e[0],g={done:!1,value:h},x=P=>c!==void 0&&P<c||d!==void 0&&P>d,w=P=>c===void 0?d:d===void 0||Math.abs(c-P)<Math.abs(d-P)?c:d;let b=r*t;const j=h+b,N=o===void 0?j:o(j);N!==j&&(b=N-h);const _=P=>-b*Math.exp(-P/n),S=P=>N+_(P),k=P=>{const R=_(P),M=S(P);g.done=Math.abs(R)<=f,g.value=g.done?N:M};let A,T;const O=P=>{x(g.value)&&(A=P,T=Rv({keyframes:[g.value,w(g.value)],velocity:RV(S,P,g.value),damping:a,stiffness:i,restDelta:f,restSpeed:m}))};return O(0),{calculatedDuration:null,next:P=>{let R=!1;return!T&&A===void 0&&(R=!0,k(P),O(P)),A!==void 0&&P>=A?T.next(P-A):(!R&&k(P),g)}}}function ike(e,t,r){const n=[],a=r||io.mix||PV,i=e.length-1;for(let o=0;o<i;o++){let c=a(e[o],e[o+1]);if(t){const d=Array.isArray(t)?t[o]||Vs:t;c=_p(d,c)}n.push(c)}return n}function oke(e,t,{clamp:r=!0,ease:n,mixer:a}={}){const i=e.length;if(FE(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const c=ike(t,n,a),d=c.length,f=m=>{if(o&&m<e[0])return t[0];let h=0;if(d>1)for(;h<e.length-2&&!(m<e[h+1]);h++);const g=zh(e[h],e[h+1],m);return c[h](g)};return r?m=>f(oi(e[0],e[i-1],m)):f}function lke(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const a=zh(0,t,n);e.push(er(r,1,a))}}function cke(e){const t=[0];return lke(t,e.length-1),t}function uke(e,t){return e.map(r=>r*t)}function dke(e,t){return e.map(()=>t||wV).splice(0,e.length-1)}function ah({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const a=jCe(n)?n.map(YI):YI(n),i={done:!1,value:t[0]},o=uke(r&&r.length===t.length?r:cke(t),e),c=oke(o,t,{ease:Array.isArray(a)?a:dke(t,a)});return{calculatedDuration:e,next:d=>(i.value=c(d),i.done=d>=e,i)}}const fke=e=>e!==null;function YE(e,{repeat:t,repeatType:r="loop"},n,a=1){const i=e.filter(fke),c=a<0||t&&r!=="loop"&&t%2===1?0:i.length-1;return!c||n===void 0?i[c]:n}const mke={decay:p_,inertia:p_,tween:ah,keyframes:ah,spring:Rv};function DV(e){typeof e.type=="string"&&(e.type=mke[e.type])}class XE{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const hke=e=>e/100;class ZE extends XE{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==On.now()&&this.tick(On.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;DV(t);const{type:r=ah,repeat:n=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=t;let{keyframes:c}=t;const d=r||ah;d!==ah&&typeof c[0]!="number"&&(this.mixKeyframes=_p(hke,PV(c[0],c[1])),c=[0,100]);const f=d({...t,keyframes:c});i==="mirror"&&(this.mirroredGenerator=d({...t,keyframes:[...c].reverse(),velocity:-o})),f.calculatedDuration===null&&(f.calculatedDuration=QE(f));const{calculatedDuration:m}=f;this.calculatedDuration=m,this.resolvedDuration=m+a,this.totalDuration=this.resolvedDuration*(n+1)-a,this.generator=f}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:a,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return n.next(0);const{delay:f=0,keyframes:m,repeat:h,repeatType:g,repeatDelay:x,type:w,onUpdate:b,finalKeyframe:j}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const N=this.currentTime-f*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?N<0:N>a;this.currentTime=Math.max(N,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let S=this.currentTime,k=n;if(h){const P=Math.min(this.currentTime,a)/c;let R=Math.floor(P),M=P%1;!M&&P>=1&&(M=1),M===1&&R--,R=Math.min(R,h+1),R%2&&(g==="reverse"?(M=1-M,x&&(M-=x/c)):g==="mirror"&&(k=o)),S=oi(0,1,M)*c}const A=_?{done:!1,value:m[0]}:k.next(S);i&&(A.value=i(A.value));let{done:T}=A;!_&&d!==null&&(T=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return O&&w!==p_&&(A.value=YE(m,this.options,j,this.speed)),b&&b(A.value),O&&this.finish(),A}then(t,r){return this.finished.then(t,r)}get duration(){return qs(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+qs(t)}get time(){return qs(this.currentTime)}set time(t){t=ya(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(On.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=qs(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=XCe,startTime:r}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(On.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function pke(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const _c=e=>e*180/Math.PI,g_=e=>{const t=_c(Math.atan2(e[1],e[0]));return x_(t)},gke={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:g_,rotateZ:g_,skewX:e=>_c(Math.atan(e[1])),skewY:e=>_c(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},x_=e=>(e=e%360,e<0&&(e+=360),e),nL=g_,sL=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),aL=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),xke={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:sL,scaleY:aL,scale:e=>(sL(e)+aL(e))/2,rotateX:e=>x_(_c(Math.atan2(e[6],e[5]))),rotateY:e=>x_(_c(Math.atan2(-e[2],e[0]))),rotateZ:nL,rotate:nL,skewX:e=>_c(Math.atan(e[4])),skewY:e=>_c(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function y_(e){return e.includes("scale")?1:0}function v_(e,t){if(!e||e==="none")return y_(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,a;if(r)n=xke,a=r;else{const c=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=gke,a=c}if(!a)return y_(t);const i=n[t],o=a[1].split(",").map(vke);return typeof i=="function"?i(o):o[i]}const yke=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return v_(r,t)};function vke(e){return parseFloat(e.trim())}const _f=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Cf=new Set(_f),iL=e=>e===Sf||e===Pe,bke=new Set(["x","y","z"]),wke=_f.filter(e=>!bke.has(e));function jke(e){const t=[];return wke.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const fl={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>v_(t,"x"),y:(e,{transform:t})=>v_(t,"y")};fl.translateX=fl.x;fl.translateY=fl.y;const Oc=new Set;let b_=!1,w_=!1,j_=!1;function IV(){if(w_){const e=Array.from(Oc).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const a=jke(n);a.length&&(r.set(n,a),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const a=r.get(n);a&&a.forEach(([i,o])=>{n.getValue(i)?.set(o)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}w_=!1,b_=!1,Oc.forEach(e=>e.complete(j_)),Oc.clear()}function LV(){Oc.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(w_=!0)})}function Nke(){j_=!0,LV(),IV(),j_=!1}class JE{constructor(t,r,n,a,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Oc.add(this),b_||(b_=!0,$t.read(LV),$t.resolveKeyframes(IV))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:a}=this;if(t[0]===null){const i=a?.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(n&&r){const c=n.readValue(r,o);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=o),a&&i===void 0&&a.set(t[0])}pke(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Oc.delete(this)}cancel(){this.state==="scheduled"&&(Oc.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Ske=e=>e.startsWith("--");function _ke(e,t,r){Ske(t)?e.style.setProperty(t,r):e.style[t]=r}const Cke={};function $V(e,t){const r=dV(e);return()=>Cke[t]??r()}const kke=$V(()=>window.ScrollTimeline!==void 0,"scrollTimeline"),zV=$V(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Qm=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,oL={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Qm([0,.65,.55,1]),circOut:Qm([.55,0,1,.45]),backIn:Qm([.31,.01,.66,-.59]),backOut:Qm([.33,1.53,.69,.99])};function UV(e,t){if(e)return typeof e=="function"?zV()?MV(e,t):"ease-out":jV(e)?Qm(e):Array.isArray(e)?e.map(r=>UV(r,t)||oL.easeOut):oL[e]}function Eke(e,t,r,{delay:n=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:c="easeOut",times:d}={},f=void 0){const m={[t]:r};d&&(m.offset=d);const h=UV(c,a);Array.isArray(h)&&(m.easing=h);const g={delay:n,duration:a,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return f&&(g.pseudoElement=f),e.animate(m,g)}function FV(e){return typeof e=="function"&&"applyToOptions"in e}function Ake({type:e,...t}){return FV(e)&&zV()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class BV extends XE{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:r,name:n,keyframes:a,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:c,onComplete:d}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,FE(typeof t.type!="string");const f=Ake(t);this.animation=Eke(r,n,a,f,i),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const m=YE(a,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(m):_ke(r,n,m),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){const t=this.options?.element;!this.isPseudoElement&&t?.isConnected&&this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return qs(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+qs(t)}get time(){return qs(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=ya(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&kke()?(this.animation.timeline=t,Vs):r(this)}}const qV={anticipate:yV,backInOut:xV,circInOut:bV};function Tke(e){return e in qV}function Oke(e){typeof e.ease=="string"&&Tke(e.ease)&&(e.ease=qV[e.ease])}const oS=10;class Pke extends BV{constructor(t){Oke(t),DV(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:a,element:i,...o}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const c=new ZE({...o,autoplay:!1}),d=Math.max(oS,On.now()-this.startTime),f=oi(0,oS,d-oS);r.setWithVelocity(c.sample(Math.max(0,d-f)).value,c.sample(d).value,f),c.stop()}}const lL=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(va.test(e)||e==="0")&&!e.startsWith("url("));function Mke(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function Rke(e,t,r,n){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=lL(a,t),c=lL(i,t);return!o||!c?!1:Mke(e)||(r==="spring"||FV(r))&&n}function N_(e){e.duration=0,e.type="keyframes"}const Dke=new Set(["opacity","clipPath","filter","transform"]),Ike=dV(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Lke(e){const{motionValue:t,name:r,repeatDelay:n,repeatType:a,damping:i,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:f}=t.owner.getProps();return Ike()&&r&&Dke.has(r)&&(r!=="transform"||!f)&&!d&&!n&&a!=="mirror"&&i!==0&&o!=="inertia"}const $ke=40;class zke extends XE{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",keyframes:c,name:d,motionValue:f,element:m,...h}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=On.now();const g={autoplay:t,delay:r,type:n,repeat:a,repeatDelay:i,repeatType:o,name:d,motionValue:f,element:m,...h},x=m?.KeyframeResolver||JE;this.keyframeResolver=new x(c,(w,b,j)=>this.onKeyframesResolved(w,b,g,!j),d,f,m),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,r,n,a){this.keyframeResolver=void 0;const{name:i,type:o,velocity:c,delay:d,isHandoff:f,onUpdate:m}=n;this.resolvedAt=On.now(),Rke(t,i,o,c)||((io.instantAnimations||!d)&&m?.(YE(t,n,r)),t[0]=t[t.length-1],N_(n),n.repeat=0);const g={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>$ke?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},x=!f&&Lke(g),w=g.motionValue?.owner?.current,b=x?new Pke({...g,element:w}):new ZE(g);b.finished.then(()=>{this.notifyFinished()}).catch(Vs),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Nke()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function VV(e,t,r,n=0,a=1){const i=Array.from(e).sort((f,m)=>f.sortNodePosition(m)).indexOf(t),o=e.size,c=(o-1)*n;return typeof r=="function"?r(i,o):a===1?i*n:c-i*n}const Uke=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Fke(e){const t=Uke.exec(e);if(!t)return[,];const[,r,n,a]=t;return[`--${r??n}`,a]}function KV(e,t,r=1){const[n,a]=Fke(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return lV(o)?parseFloat(o):o}return KE(a)?KV(a,t,r+1):a}const Bke={type:"spring",stiffness:500,damping:25,restSpeed:10},qke=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Vke={type:"keyframes",duration:.8},Kke={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Hke=(e,{keyframes:t})=>t.length>2?Vke:Cf.has(e)?e.startsWith("scale")?qke(t[1]):Bke:Kke,Gke=e=>e!==null;function Wke(e,{repeat:t,repeatType:r="loop"},n){const a=e.filter(Gke),i=t&&r!=="loop"&&t%2===1?0:a.length-1;return a[i]}function HV(e,t){if(e?.inherit&&t){const{inherit:r,...n}=e;return{...t,...n}}return e}function eA(e,t){const r=e?.[t]??e?.default??e;return r!==e?HV(r,e):r}function Qke({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:c,from:d,elapsed:f,...m}){return!!Object.keys(m).length}const tA=(e,t,r,n={},a,i)=>o=>{const c=eA(n,e)||{},d=c.delay||n.delay||0;let{elapsed:f=0}=n;f=f-ya(d);const m={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-f,onUpdate:g=>{t.set(g),c.onUpdate&&c.onUpdate(g)},onComplete:()=>{o(),c.onComplete&&c.onComplete()},name:e,motionValue:t,element:i?void 0:a};Qke(c)||Object.assign(m,Hke(e,m)),m.duration&&(m.duration=ya(m.duration)),m.repeatDelay&&(m.repeatDelay=ya(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let h=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(N_(m),m.delay===0&&(h=!0)),(io.instantAnimations||io.skipAnimations||a?.shouldSkipAnimations)&&(h=!0,N_(m),m.delay=0),m.allowFlatten=!c.type&&!c.ease,h&&!i&&t.get()!==void 0){const g=Wke(m.keyframes,c);if(g!==void 0){$t.update(()=>{m.onUpdate(g),m.onComplete()});return}}return c.isSync?new ZE(m):new zke(m)};function cL(e){const t=[{},{}];return e?.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function rA(e,t,r,n){if(typeof t=="function"){const[a,i]=cL(n);t=t(r!==void 0?r:e.custom,a,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,i]=cL(n);t=t(r!==void 0?r:e.custom,a,i)}return t}function Od(e,t,r){const n=e.getProps();return rA(n,t,r!==void 0?r:n.custom,e)}const GV=new Set(["width","height","top","left","right","bottom",..._f]),uL=30,Yke=e=>!isNaN(parseFloat(e));class Xke{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const a=On.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=On.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Yke(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new BE);const n=this.events[t].add(r);return t==="change"?()=>{n(),$t.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=On.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>uL)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,uL);return fV(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Kd(e,t){return new Xke(e,t)}const S_=e=>Array.isArray(e);function Zke(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Kd(r))}function Jke(e){return S_(e)?e[e.length-1]||0:e}function eEe(e,t){const r=Od(e,t);let{transitionEnd:n={},transition:a={},...i}=r||{};i={...i,...n};for(const o in i){const c=Jke(i[o]);Zke(e,o,c)}}const wn=e=>!!(e&&e.getVelocity);function tEe(e){return!!(wn(e)&&e.add)}function __(e,t){const r=e.getValue("willChange");if(tEe(r))return r.add(t);if(!r&&io.WillChange){const n=new io.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function nA(e){return e.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const rEe="framerAppearId",WV="data-"+nA(rEe);function QV(e){return e.props[WV]}function nEe({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function YV(e,t,{delay:r=0,transitionOverride:n,type:a}={}){let{transition:i,transitionEnd:o,...c}=t;const d=e.getDefaultTransition();i=i?HV(i,d):d;const f=i?.reduceMotion;n&&(i=n);const m=[],h=a&&e.animationState&&e.animationState.getState()[a];for(const g in c){const x=e.getValue(g,e.latestValues[g]??null),w=c[g];if(w===void 0||h&&nEe(h,g))continue;const b={delay:r,...eA(i||{},g)},j=x.get();if(j!==void 0&&!x.isAnimating&&!Array.isArray(w)&&w===j&&!b.velocity)continue;let N=!1;if(window.MotionHandoffAnimation){const k=QV(e);if(k){const A=window.MotionHandoffAnimation(k,g,$t);A!==null&&(b.startTime=A,N=!0)}}__(e,g);const _=f??e.shouldReduceMotion;x.start(tA(g,x,w,_&&GV.has(g)?{type:!1}:b,e,N));const S=x.animation;S&&m.push(S)}if(o){const g=()=>$t.update(()=>{o&&eEe(e,o)});m.length?Promise.all(m).then(g):g()}return m}function C_(e,t,r={}){const n=Od(e,t,r.type==="exit"?e.presenceContext?.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(a=r.transitionOverride);const i=n?()=>Promise.all(YV(e,n,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:f=0,staggerChildren:m,staggerDirection:h}=a;return sEe(e,t,d,f,m,h,r)}:()=>Promise.resolve(),{when:c}=a;if(c){const[d,f]=c==="beforeChildren"?[i,o]:[o,i];return d().then(()=>f())}else return Promise.all([i(),o(r.delay)])}function sEe(e,t,r=0,n=0,a=0,i=1,o){const c=[];for(const d of e.variantChildren)d.notify("AnimationStart",t),c.push(C_(d,t,{...o,delay:r+(typeof n=="function"?0:n)+VV(e.variantChildren,d,n,a,i)}).then(()=>d.notify("AnimationComplete",t)));return Promise.all(c)}function aEe(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const a=t.map(i=>C_(e,i,r));n=Promise.all(a)}else if(typeof t=="string")n=C_(e,t,r);else{const a=typeof t=="function"?Od(e,t,r.custom):t;n=Promise.all(YV(e,a,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}const iEe={test:e=>e==="auto",parse:e=>e},XV=e=>t=>t.test(e),ZV=[Sf,Pe,Ja,nl,DCe,RCe,iEe],dL=e=>ZV.find(XV(e));function oEe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||uV(e):!0}const lEe=new Set(["brightness","contrast","saturate","opacity"]);function cEe(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(HE)||[];if(!n)return e;const a=r.replace(n,"");let i=lEe.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+a+")"}const uEe=/\b([a-z-]*)\(.*?\)/gu,k_={...va,getAnimatableNone:e=>{const t=e.match(uEe);return t?t.map(cEe).join(" "):e}},E_={...va,getAnimatableNone:e=>{const t=va.parse(e);return va.createTransformer(e)(t.map(n=>typeof n=="number"?0:typeof n=="object"?{...n,alpha:1}:n))}},fL={...Sf,transform:Math.round},dEe={rotate:nl,rotateX:nl,rotateY:nl,rotateZ:nl,scale:$x,scaleX:$x,scaleY:$x,scaleZ:$x,skew:nl,skewX:nl,skewY:nl,distance:Pe,translateX:Pe,translateY:Pe,translateZ:Pe,x:Pe,y:Pe,z:Pe,perspective:Pe,transformPerspective:Pe,opacity:Uh,originX:ZI,originY:ZI,originZ:Pe},sA={borderWidth:Pe,borderTopWidth:Pe,borderRightWidth:Pe,borderBottomWidth:Pe,borderLeftWidth:Pe,borderRadius:Pe,borderTopLeftRadius:Pe,borderTopRightRadius:Pe,borderBottomRightRadius:Pe,borderBottomLeftRadius:Pe,width:Pe,maxWidth:Pe,height:Pe,maxHeight:Pe,top:Pe,right:Pe,bottom:Pe,left:Pe,inset:Pe,insetBlock:Pe,insetBlockStart:Pe,insetBlockEnd:Pe,insetInline:Pe,insetInlineStart:Pe,insetInlineEnd:Pe,padding:Pe,paddingTop:Pe,paddingRight:Pe,paddingBottom:Pe,paddingLeft:Pe,paddingBlock:Pe,paddingBlockStart:Pe,paddingBlockEnd:Pe,paddingInline:Pe,paddingInlineStart:Pe,paddingInlineEnd:Pe,margin:Pe,marginTop:Pe,marginRight:Pe,marginBottom:Pe,marginLeft:Pe,marginBlock:Pe,marginBlockStart:Pe,marginBlockEnd:Pe,marginInline:Pe,marginInlineStart:Pe,marginInlineEnd:Pe,fontSize:Pe,backgroundPositionX:Pe,backgroundPositionY:Pe,...dEe,zIndex:fL,fillOpacity:Uh,strokeOpacity:Uh,numOctaves:fL},fEe={...sA,color:Er,backgroundColor:Er,outlineColor:Er,fill:Er,stroke:Er,borderColor:Er,borderTopColor:Er,borderRightColor:Er,borderBottomColor:Er,borderLeftColor:Er,filter:k_,WebkitFilter:k_,mask:E_,WebkitMask:E_},JV=e=>fEe[e],mEe=new Set([k_,E_]);function eK(e,t){let r=JV(e);return mEe.has(r)||(r=va),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const hEe=new Set(["auto","none","0"]);function pEe(e,t,r){let n=0,a;for(;n<e.length&&!a;){const i=e[n];typeof i=="string"&&!hEe.has(i)&&Fh(i).values.length&&(a=e[n]),n++}if(a&&r)for(const i of t)e[i]=eK(r,a)}class gEe extends JE{constructor(t,r,n,a,i){super(t,r,n,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let m=0;m<t.length;m++){let h=t[m];if(typeof h=="string"&&(h=h.trim(),KE(h))){const g=KV(h,r.current);g!==void 0&&(t[m]=g),m===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!GV.has(n)||t.length!==2)return;const[a,i]=t,o=dL(a),c=dL(i),d=XI(a),f=XI(i);if(d!==f&&fl[n]){this.needsMeasurement=!0;return}if(o!==c)if(iL(o)&&iL(c))for(let m=0;m<t.length;m++){const h=t[m];typeof h=="string"&&(t[m]=parseFloat(h))}else fl[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let a=0;a<t.length;a++)(t[a]===null||oEe(t[a]))&&n.push(a);n.length&&pEe(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=fl[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const a=r[r.length-1];a!==void 0&&t.getValue(n,a).jump(a,!1)}measureEndState(){const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const a=t.getValue(r);a&&a.jump(this.measuredOrigin,!1);const i=n.length-1,o=n[i];n[i]=fl[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,d])=>{t.getValue(c).set(d)}),this.resolveNoneKeyframes()}}const xEe=new Set(["opacity","clipPath","filter","transform"]);function tK(e,t,r){if(e==null)return[];if(e instanceof EventTarget)return[e];if(typeof e=="string"){let n=document;const a=r?.[e]??n.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e).filter(n=>n!=null)}const rK=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function A_(e){return cV(e)&&"offsetHeight"in e}const{schedule:aA}=NV(queueMicrotask,!1),aa={x:!1,y:!1};function nK(){return aa.x||aa.y}function yEe(e){return e==="x"||e==="y"?aa[e]?null:(aa[e]=!0,()=>{aa[e]=!1}):aa.x||aa.y?null:(aa.x=aa.y=!0,()=>{aa.x=aa.y=!1})}function sK(e,t){const r=tK(e),n=new AbortController,a={passive:!0,...t,signal:n.signal};return[r,a,()=>n.abort()]}function vEe(e){return!(e.pointerType==="touch"||nK())}function bEe(e,t,r={}){const[n,a,i]=sK(e,r);return n.forEach(o=>{let c=!1,d=!1,f;const m=()=>{o.removeEventListener("pointerleave",w)},h=j=>{f&&(f(j),f=void 0),m()},g=j=>{c=!1,window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",g),d&&(d=!1,h(j))},x=()=>{c=!0,window.addEventListener("pointerup",g,a),window.addEventListener("pointercancel",g,a)},w=j=>{if(j.pointerType!=="touch"){if(c){d=!0;return}h(j)}},b=j=>{if(!vEe(j))return;d=!1;const N=t(o,j);typeof N=="function"&&(f=N,o.addEventListener("pointerleave",w,a))};o.addEventListener("pointerenter",b,a),o.addEventListener("pointerdown",x,a)}),i}const aK=(e,t)=>t?e===t?!0:aK(e,t.parentElement):!1,iA=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,wEe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function jEe(e){return wEe.has(e.tagName)||e.isContentEditable===!0}const NEe=new Set(["INPUT","SELECT","TEXTAREA"]);function SEe(e){return NEe.has(e.tagName)||e.isContentEditable===!0}const my=new WeakSet;function mL(e){return t=>{t.key==="Enter"&&e(t)}}function lS(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const _Ee=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=mL(()=>{if(my.has(r))return;lS(r,"down");const a=mL(()=>{lS(r,"up")}),i=()=>lS(r,"cancel");r.addEventListener("keyup",a,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function hL(e){return iA(e)&&!nK()}const pL=new WeakSet;function CEe(e,t,r={}){const[n,a,i]=sK(e,r),o=c=>{const d=c.currentTarget;if(!hL(c)||pL.has(c))return;my.add(d),r.stopPropagation&&pL.add(c);const f=t(d,c),m=(x,w)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",g),my.has(d)&&my.delete(d),hL(x)&&typeof f=="function"&&f(x,{success:w})},h=x=>{m(x,d===window||d===document||r.useGlobalTarget||aK(d,x.target))},g=x=>{m(x,!1)};window.addEventListener("pointerup",h,a),window.addEventListener("pointercancel",g,a)};return n.forEach(c=>{(r.useGlobalTarget?window:c).addEventListener("pointerdown",o,a),A_(c)&&(c.addEventListener("focus",f=>_Ee(f,a)),!jEe(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),i}function oA(e){return cV(e)&&"ownerSVGElement"in e}const hy=new WeakMap;let py;const iK=(e,t,r)=>(n,a)=>a&&a[0]?a[0][e+"Size"]:oA(n)&&"getBBox"in n?n.getBBox()[t]:n[r],kEe=iK("inline","width","offsetWidth"),EEe=iK("block","height","offsetHeight");function AEe({target:e,borderBoxSize:t}){hy.get(e)?.forEach(r=>{r(e,{get width(){return kEe(e,t)},get height(){return EEe(e,t)}})})}function TEe(e){e.forEach(AEe)}function OEe(){typeof ResizeObserver>"u"||(py=new ResizeObserver(TEe))}function PEe(e,t){py||OEe();const r=tK(e);return r.forEach(n=>{let a=hy.get(n);a||(a=new Set,hy.set(n,a)),a.add(t),py?.observe(n)}),()=>{r.forEach(n=>{const a=hy.get(n);a?.delete(t),a?.size||py?.unobserve(n)})}}const gy=new Set;let jd;function MEe(){jd=()=>{const e={get width(){return window.innerWidth},get height(){return window.innerHeight}};gy.forEach(t=>t(e))},window.addEventListener("resize",jd)}function REe(e){return gy.add(e),jd||MEe(),()=>{gy.delete(e),!gy.size&&typeof jd=="function"&&(window.removeEventListener("resize",jd),jd=void 0)}}function gL(e,t){return typeof e=="function"?REe(e):PEe(e,t)}function DEe(e){return oA(e)&&e.tagName==="svg"}const IEe=[...ZV,Er,va],LEe=e=>IEe.find(XV(e)),xL=()=>({translate:0,scale:1,origin:0,originPoint:0}),Nd=()=>({x:xL(),y:xL()}),yL=()=>({min:0,max:0}),Lr=()=>({x:yL(),y:yL()}),$Ee=new WeakMap;function f0(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Bh(e){return typeof e=="string"||Array.isArray(e)}const lA=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],cA=["initial",...lA];function m0(e){return f0(e.animate)||cA.some(t=>Bh(e[t]))}function oK(e){return!!(m0(e)||e.variants)}function zEe(e,t,r){for(const n in t){const a=t[n],i=r[n];if(wn(a))e.addValue(n,a);else if(wn(i))e.addValue(n,Kd(a,{owner:e}));else if(i!==a)if(e.hasValue(n)){const o=e.getValue(n);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=e.getStaticValue(n);e.addValue(n,Kd(o!==void 0?o:a,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const T_={current:null},lK={current:!1},UEe=typeof window<"u";function FEe(){if(lK.current=!0,!!UEe)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>T_.current=e.matches;e.addEventListener("change",t),t()}else T_.current=!1}const vL=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Dv={};function cK(e){Dv=e}function BEe(){return Dv}class qEe{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:a,skipAnimations:i,blockInitialAnimation:o,visualState:c},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=JE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=On.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,$t.render(this.render,!1,!0))};const{latestValues:f,renderState:m}=c;this.latestValues=f,this.baseTarget={...f},this.initialValues=r.initial?{...f}:{},this.renderState=m,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.skipAnimationsConfig=i,this.options=d,this.blockInitialAnimation=!!o,this.isControllingVariants=m0(r),this.isVariantNode=oK(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...g}=this.scrapeMotionValuesFromProps(r,{},this);for(const x in g){const w=g[x];f[x]!==void 0&&wn(w)&&w.set(f[x])}}mount(t){if(this.hasBeenMounted)for(const r in this.initialValues)this.values.get(r)?.jump(this.initialValues[r]),this.latestValues[r]=this.initialValues[r];this.current=t,$Ee.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(lK.current||FEe(),this.shouldReduceMotion=T_.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,this.parent?.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){this.projection&&this.projection.unmount(),bl(this.notifyUpdate),bl(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){if(this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)(),r.accelerate&&xEe.has(t)&&this.current instanceof HTMLElement){const{factory:o,keyframes:c,times:d,ease:f,duration:m}=r.accelerate,h=new BV({element:this.current,name:t,keyframes:c,times:d,ease:f,duration:ya(m)}),g=o(h);this.valueSubscriptions.set(t,()=>{g(),h.cancel()});return}const n=Cf.has(t);n&&this.onBindTransform&&this.onBindTransform();const a=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&$t.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;typeof window<"u"&&window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{a(),i&&i(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Dv){const r=Dv[t];if(!r)continue;const{isEnabled:n,Feature:a}=r;if(!this.features[t]&&a&&n(this.props)&&(this.features[t]=new a(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Lr()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<vL.length;n++){const a=vL[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=t[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=zEe(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=Kd(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(lV(n)||uV(n))?n=parseFloat(n):!LEe(n)&&va.test(r)&&(n=eK(t,r)),this.setBaseTarget(t,wn(n)?n.get():n)),wn(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const i=rA(this.props,r,this.presenceContext?.custom);i&&(n=i[t])}if(r&&n!==void 0)return n;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!wn(a)?a:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new BE),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){aA.render(this.render)}}class uK extends qEe{constructor(){super(...arguments),this.KeyframeResolver=gEe}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){const n=t.style;return n?n[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;wn(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}class Ol{constructor(t){this.isMounted=!1,this.node=t}update(){}}function dK({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function VEe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function KEe(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function cS(e){return e===void 0||e===1}function O_({scale:e,scaleX:t,scaleY:r}){return!cS(e)||!cS(t)||!cS(r)}function mc(e){return O_(e)||fK(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function fK(e){return bL(e.x)||bL(e.y)}function bL(e){return e&&e!=="0%"}function Iv(e,t,r){const n=e-r,a=t*n;return r+a}function wL(e,t,r,n,a){return a!==void 0&&(e=Iv(e,a,n)),Iv(e,r,n)+t}function P_(e,t=0,r=1,n,a){e.min=wL(e.min,t,r,n,a),e.max=wL(e.max,t,r,n,a)}function mK(e,{x:t,y:r}){P_(e.x,t.translate,t.scale,t.originPoint),P_(e.y,r.translate,r.scale,r.originPoint)}const jL=.999999999999,NL=1.0000000000001;function HEe(e,t,r,n=!1){const a=r.length;if(!a)return;t.x=t.y=1;let i,o;for(let c=0;c<a;c++){i=r[c],o=i.projectionDelta;const{visualElement:d}=i.options;d&&d.props.style&&d.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&_d(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,mK(e,o)),n&&mc(i.latestValues)&&_d(e,i.latestValues))}t.x<NL&&t.x>jL&&(t.x=1),t.y<NL&&t.y>jL&&(t.y=1)}function Sd(e,t){e.min=e.min+t,e.max=e.max+t}function SL(e,t,r,n,a=.5){const i=er(e.min,e.max,a);P_(e,t,r,i,n)}function _d(e,t){SL(e.x,t.x,t.scaleX,t.scale,t.originX),SL(e.y,t.y,t.scaleY,t.scale,t.originY)}function hK(e,t){return dK(KEe(e.getBoundingClientRect(),t))}function GEe(e,t,r){const n=hK(e,r),{scroll:a}=t;return a&&(Sd(n.x,a.offset.x),Sd(n.y,a.offset.y)),n}const WEe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},QEe=_f.length;function YEe(e,t,r){let n="",a=!0;for(let i=0;i<QEe;i++){const o=_f[i],c=e[o];if(c===void 0)continue;let d=!0;if(typeof c=="number")d=c===(o.startsWith("scale")?1:0);else{const f=parseFloat(c);d=o.startsWith("scale")?f===1:f===0}if(!d||r){const f=rK(c,sA[o]);if(!d){a=!1;const m=WEe[o]||o;n+=`${m}(${f}) `}r&&(t[o]=f)}}return n=n.trim(),r?n=r(t,a?"":n):a&&(n="none"),n}function uA(e,t,r){const{style:n,vars:a,transformOrigin:i}=e;let o=!1,c=!1;for(const d in t){const f=t[d];if(Cf.has(d)){o=!0;continue}else if(_V(d)){a[d]=f;continue}else{const m=rK(f,sA[d]);d.startsWith("origin")?(c=!0,i[d]=m):n[d]=m}}if(t.transform||(o||r?n.transform=YEe(t,e.transform,r):n.transform&&(n.transform="none")),c){const{originX:d="50%",originY:f="50%",originZ:m=0}=i;n.transformOrigin=`${d} ${f} ${m}`}}function pK(e,{style:t,vars:r},n,a){const i=e.style;let o;for(o in t)i[o]=t[o];a?.applyProjectionStyles(i,n);for(o in r)i.setProperty(o,r[o])}function _L(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const zm={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Pe.test(e))e=parseFloat(e);else return e;const r=_L(e,t.target.x),n=_L(e,t.target.y);return`${r}% ${n}%`}},XEe={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,a=va.parse(e);if(a.length>5)return n;const i=va.createTransformer(e),o=typeof a[0]!="number"?1:0,c=r.x.scale*t.x,d=r.y.scale*t.y;a[0+o]/=c,a[1+o]/=d;const f=er(c,d,.5);return typeof a[2+o]=="number"&&(a[2+o]/=f),typeof a[3+o]=="number"&&(a[3+o]/=f),i(a)}},M_={borderRadius:{...zm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:zm,borderTopRightRadius:zm,borderBottomLeftRadius:zm,borderBottomRightRadius:zm,boxShadow:XEe};function gK(e,{layout:t,layoutId:r}){return Cf.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!M_[e]||e==="opacity")}function dA(e,t,r){const n=e.style,a=t?.style,i={};if(!n)return i;for(const o in n)(wn(n[o])||a&&wn(a[o])||gK(o,e)||r?.getValue(o)?.liveStyle!==void 0)&&(i[o]=n[o]);return i}function ZEe(e){return window.getComputedStyle(e)}class JEe extends uK{constructor(){super(...arguments),this.type="html",this.renderInstance=pK}readValueFromInstance(t,r){if(Cf.has(r))return this.projection?.isProjecting?y_(r):yke(t,r);{const n=ZEe(t),a=(_V(r)?n.getPropertyValue(r):n[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:r}){return hK(t,r)}build(t,r,n){uA(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return dA(t,r,n)}}const eAe={offset:"stroke-dashoffset",array:"stroke-dasharray"},tAe={offset:"strokeDashoffset",array:"strokeDasharray"};function rAe(e,t,r=1,n=0,a=!0){e.pathLength=1;const i=a?eAe:tAe;e[i.offset]=`${-n}`,e[i.array]=`${t} ${r}`}const nAe=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function xK(e,{attrX:t,attrY:r,attrScale:n,pathLength:a,pathSpacing:i=1,pathOffset:o=0,...c},d,f,m){if(uA(e,c,f),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:g}=e;h.transform&&(g.transform=h.transform,delete h.transform),(g.transform||h.transformOrigin)&&(g.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),g.transform&&(g.transformBox=m?.transformBox??"fill-box",delete h.transformBox);for(const x of nAe)h[x]!==void 0&&(g[x]=h[x],delete h[x]);t!==void 0&&(h.x=t),r!==void 0&&(h.y=r),n!==void 0&&(h.scale=n),a!==void 0&&rAe(h,a,i,o,!1)}const yK=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),vK=e=>typeof e=="string"&&e.toLowerCase()==="svg";function sAe(e,t,r,n){pK(e,t,void 0,n);for(const a in t.attrs)e.setAttribute(yK.has(a)?a:nA(a),t.attrs[a])}function bK(e,t,r){const n=dA(e,t,r);for(const a in e)if(wn(e[a])||wn(t[a])){const i=_f.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[i]=e[a]}return n}class aAe extends uK{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Lr}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Cf.has(r)){const n=JV(r);return n&&n.default||0}return r=yK.has(r)?r:nA(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return bK(t,r,n)}build(t,r,n){xK(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,a){sAe(t,r,n,a)}mount(t){this.isSVGTag=vK(t.tagName),super.mount(t)}}const iAe=cA.length;function wK(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?wK(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<iAe;r++){const n=cA[r],a=e.props[n];(Bh(a)||a===!1)&&(t[n]=a)}return t}function jK(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const oAe=[...lA].reverse(),lAe=lA.length;function cAe(e){return t=>Promise.all(t.map(({animation:r,options:n})=>aEe(e,r,n)))}function uAe(e){let t=cAe(e),r=CL(),n=!0;const a=d=>(f,m)=>{const h=Od(e,m,d==="exit"?e.presenceContext?.custom:void 0);if(h){const{transition:g,transitionEnd:x,...w}=h;f={...f,...w,...x}}return f};function i(d){t=d(e)}function o(d){const{props:f}=e,m=wK(e.parent)||{},h=[],g=new Set;let x={},w=1/0;for(let j=0;j<lAe;j++){const N=oAe[j],_=r[N],S=f[N]!==void 0?f[N]:m[N],k=Bh(S),A=N===d?_.isActive:null;A===!1&&(w=j);let T=S===m[N]&&S!==f[N]&&k;if(T&&n&&e.manuallyAnimateOnMount&&(T=!1),_.protectedKeys={...x},!_.isActive&&A===null||!S&&!_.prevProp||f0(S)||typeof S=="boolean")continue;if(N==="exit"&&_.isActive&&A!==!0){_.prevResolvedValues&&(x={...x,..._.prevResolvedValues});continue}const O=dAe(_.prevProp,S);let P=O||N===d&&_.isActive&&!T&&k||j>w&&k,R=!1;const M=Array.isArray(S)?S:[S];let D=M.reduce(a(N),{});A===!1&&(D={});const{prevResolvedValues:z={}}=_,Y={...z,...D},I=L=>{P=!0,g.has(L)&&(R=!0,g.delete(L)),_.needsAnimating[L]=!0;const F=e.getValue(L);F&&(F.liveStyle=!1)};for(const L in Y){const F=D[L],q=z[L];if(x.hasOwnProperty(L))continue;let Z=!1;S_(F)&&S_(q)?Z=!jK(F,q):Z=F!==q,Z?F!=null?I(L):g.add(L):F!==void 0&&g.has(L)?I(L):_.protectedKeys[L]=!0}_.prevProp=S,_.prevResolvedValues=D,_.isActive&&(x={...x,...D}),n&&e.blockInitialAnimation&&(P=!1);const K=T&&O;P&&(!K||R)&&h.push(...M.map(L=>{const F={type:N};if(typeof L=="string"&&n&&!K&&e.manuallyAnimateOnMount&&e.parent){const{parent:q}=e,Z=Od(q,L);if(q.enteringChildren&&Z){const{delayChildren:B}=Z.transition||{};F.delay=VV(q.enteringChildren,e,B)}}return{animation:L,options:F}}))}if(g.size){const j={};if(typeof f.initial!="boolean"){const N=Od(e,Array.isArray(f.initial)?f.initial[0]:f.initial);N&&N.transition&&(j.transition=N.transition)}g.forEach(N=>{const _=e.getBaseTarget(N),S=e.getValue(N);S&&(S.liveStyle=!0),j[N]=_??null}),h.push({animation:j})}let b=!!h.length;return n&&(f.initial===!1||f.initial===f.animate)&&!e.manuallyAnimateOnMount&&(b=!1),n=!1,b?t(h):Promise.resolve()}function c(d,f){if(r[d].isActive===f)return Promise.resolve();e.variantChildren?.forEach(h=>h.animationState?.setActive(d,f)),r[d].isActive=f;const m=o(d);for(const h in r)r[h].protectedKeys={};return m}return{animateChanges:o,setActive:c,setAnimateFunction:i,getState:()=>r,reset:()=>{r=CL()}}}function dAe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!jK(t,e):!1}function oc(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function CL(){return{animate:oc(!0),whileInView:oc(),whileHover:oc(),whileTap:oc(),whileDrag:oc(),whileFocus:oc(),exit:oc()}}function kL(e,t){e.min=t.min,e.max=t.max}function na(e,t){kL(e.x,t.x),kL(e.y,t.y)}function EL(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}const NK=1e-4,fAe=1-NK,mAe=1+NK,SK=.01,hAe=0-SK,pAe=0+SK;function Pn(e){return e.max-e.min}function gAe(e,t,r){return Math.abs(e-t)<=r}function AL(e,t,r,n=.5){e.origin=n,e.originPoint=er(t.min,t.max,e.origin),e.scale=Pn(r)/Pn(t),e.translate=er(r.min,r.max,e.origin)-e.originPoint,(e.scale>=fAe&&e.scale<=mAe||isNaN(e.scale))&&(e.scale=1),(e.translate>=hAe&&e.translate<=pAe||isNaN(e.translate))&&(e.translate=0)}function ih(e,t,r,n){AL(e.x,t.x,r.x,n?n.originX:void 0),AL(e.y,t.y,r.y,n?n.originY:void 0)}function TL(e,t,r){e.min=r.min+t.min,e.max=e.min+Pn(t)}function xAe(e,t,r){TL(e.x,t.x,r.x),TL(e.y,t.y,r.y)}function OL(e,t,r){e.min=t.min-r.min,e.max=e.min+Pn(t)}function Lv(e,t,r){OL(e.x,t.x,r.x),OL(e.y,t.y,r.y)}function PL(e,t,r,n,a){return e-=t,e=Iv(e,1/r,n),a!==void 0&&(e=Iv(e,1/a,n)),e}function yAe(e,t=0,r=1,n=.5,a,i=e,o=e){if(Ja.test(t)&&(t=parseFloat(t),t=er(o.min,o.max,t/100)-o.min),typeof t!="number")return;let c=er(i.min,i.max,n);e===i&&(c-=t),e.min=PL(e.min,t,r,c,a),e.max=PL(e.max,t,r,c,a)}function ML(e,t,[r,n,a],i,o){yAe(e,t[r],t[n],t[a],t.scale,i,o)}const vAe=["x","scaleX","originX"],bAe=["y","scaleY","originY"];function RL(e,t,r,n){ML(e.x,t,vAe,r?r.x:void 0,n?n.x:void 0),ML(e.y,t,bAe,r?r.y:void 0,n?n.y:void 0)}function DL(e){return e.translate===0&&e.scale===1}function _K(e){return DL(e.x)&&DL(e.y)}function IL(e,t){return e.min===t.min&&e.max===t.max}function wAe(e,t){return IL(e.x,t.x)&&IL(e.y,t.y)}function LL(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function CK(e,t){return LL(e.x,t.x)&&LL(e.y,t.y)}function $L(e){return Pn(e.x)/Pn(e.y)}function zL(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}function Ka(e){return[e("x"),e("y")]}function jAe(e,t,r){let n="";const a=e.x.translate/t.x,i=e.y.translate/t.y,o=r?.z||0;if((a||i||o)&&(n=`translate3d(${a}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:f,rotate:m,rotateX:h,rotateY:g,skewX:x,skewY:w}=r;f&&(n=`perspective(${f}px) ${n}`),m&&(n+=`rotate(${m}deg) `),h&&(n+=`rotateX(${h}deg) `),g&&(n+=`rotateY(${g}deg) `),x&&(n+=`skewX(${x}deg) `),w&&(n+=`skewY(${w}deg) `)}const c=e.x.scale*t.x,d=e.y.scale*t.y;return(c!==1||d!==1)&&(n+=`scale(${c}, ${d})`),n||"none"}const kK=["TopLeft","TopRight","BottomLeft","BottomRight"],NAe=kK.length,UL=e=>typeof e=="string"?parseFloat(e):e,FL=e=>typeof e=="number"||Pe.test(e);function SAe(e,t,r,n,a,i){a?(e.opacity=er(0,r.opacity??1,_Ae(n)),e.opacityExit=er(t.opacity??1,0,CAe(n))):i&&(e.opacity=er(t.opacity??1,r.opacity??1,n));for(let o=0;o<NAe;o++){const c=`border${kK[o]}Radius`;let d=BL(t,c),f=BL(r,c);if(d===void 0&&f===void 0)continue;d||(d=0),f||(f=0),d===0||f===0||FL(d)===FL(f)?(e[c]=Math.max(er(UL(d),UL(f),n),0),(Ja.test(f)||Ja.test(d))&&(e[c]+="%")):e[c]=f}(t.rotate||r.rotate)&&(e.rotate=er(t.rotate||0,r.rotate||0,n))}function BL(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const _Ae=EK(0,.5,vV),CAe=EK(.5,.95,Vs);function EK(e,t,r){return n=>n<e?0:n>t?1:r(zh(e,t,n))}function kAe(e,t,r){const n=wn(e)?e:Kd(e);return n.start(tA("",n,t,r)),n.animation}function qh(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const EAe=(e,t)=>e.depth-t.depth;class AAe{constructor(){this.children=[],this.isDirty=!1}add(t){UE(this.children,t),this.isDirty=!0}remove(t){Ov(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(EAe),this.isDirty=!1,this.children.forEach(t)}}function TAe(e,t){const r=On.now(),n=({timestamp:a})=>{const i=a-r;i>=t&&(bl(n),e(i-t))};return $t.setup(n,!0),()=>bl(n)}function xy(e){return wn(e)?e.get():e}class OAe{constructor(){this.members=[]}add(t){UE(this.members,t);for(let r=this.members.length-1;r>=0;r--){const n=this.members[r];if(n===t||n===this.lead||n===this.prevLead)continue;const a=n.instance;a&&a.isConnected===!1&&n.isPresent!==!1&&!n.snapshot&&Ov(this.members,n)}t.scheduleRender()}remove(t){if(Ov(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(a=>t===a);if(r===0)return!1;let n;for(let a=r;a>=0;a--){const i=this.members[a],o=i.instance;if(i.isPresent!==!1&&(!o||o.isConnected!==!1)){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender();const a=n.options.layoutDependency,i=t.options.layoutDependency;if(!(a!==void 0&&i!==void 0&&a===i)){const d=n.instance;d&&d.isConnected===!1&&!n.snapshot||(t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0))}const{crossfade:c}=t.options;c===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const yy={hasAnimatedSinceResize:!0,hasEverUpdated:!1},uS=["","X","Y","Z"],PAe=1e3;let MAe=0;function dS(e,t,r,n){const{latestValues:a}=t;a[e]&&(r[e]=a[e],t.setStaticValue(e,0),n&&(n[e]=0))}function AK(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=QV(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:a,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",$t,!(a||i))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&AK(n)}function TK({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},c=t?.()){this.id=MAe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(IAe),this.nodes.forEach(UAe),this.nodes.forEach(FAe),this.nodes.forEach(LAe)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new AAe)}addEventListener(o,c){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new BE),this.eventHandlers.get(o).add(c)}notifyListeners(o,...c){const d=this.eventHandlers.get(o);d&&d.notify(...c)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=oA(o)&&!DEe(o),this.instance=o;const{layoutId:c,layout:d,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),e){let m,h=0;const g=()=>this.root.updateBlockedByResize=!1;$t.read(()=>{h=window.innerWidth}),e(o,()=>{const x=window.innerWidth;x!==h&&(h=x,this.root.updateBlockedByResize=!0,m&&m(),m=TAe(g,250),yy.hasAnimatedSinceResize&&(yy.hasAnimatedSinceResize=!1,this.nodes.forEach(KL)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&f&&(c||d)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:h,hasRelativeLayoutChanged:g,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||f.getDefaultTransition()||HAe,{onLayoutAnimationStart:b,onLayoutAnimationComplete:j}=f.getProps(),N=!this.targetLayout||!CK(this.targetLayout,x),_=!h&&g;if(this.options.layoutRoot||this.resumeFrom||_||h&&(N||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const S={...eA(w,"layout"),onPlay:b,onComplete:j};(f.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S),this.setAnimationOrigin(m,_)}else h||KL(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),bl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(BAe),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&AK(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const h=this.path[m];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(qL);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(VL);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(zAe),this.nodes.forEach(RAe),this.nodes.forEach(DAe)):this.nodes.forEach(VL),this.clearAllSnapshots();const c=On.now();ln.delta=oi(0,1e3/60,c-ln.timestamp),ln.timestamp=c,ln.isProcessing=!0,rS.update.process(ln),rS.preRender.process(ln),rS.render.process(ln),ln.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,aA.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach($Ae),this.sharedNodes.forEach(qAe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$t.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$t.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Pn(this.snapshot.measuredBox.x)&&!Pn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Lr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(c=!1),c&&this.instance){const d=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:d,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!_K(this.projectionDelta),d=this.getTransformTemplate(),f=d?d(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;o&&this.instance&&(c||mc(this.latestValues)||m)&&(a(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return o&&(d=this.removeTransform(d)),GAe(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Lr();const c=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(WAe))){const{scroll:f}=this.root;f&&(Sd(c.x,f.offset.x),Sd(c.y,f.offset.y))}return c}removeElementScroll(o){const c=Lr();if(na(c,o),this.scroll?.wasRoot)return c;for(let d=0;d<this.path.length;d++){const f=this.path[d],{scroll:m,options:h}=f;f!==this.root&&m&&h.layoutScroll&&(m.wasRoot&&na(c,o),Sd(c.x,m.offset.x),Sd(c.y,m.offset.y))}return c}applyTransform(o,c=!1){const d=Lr();na(d,o);for(let f=0;f<this.path.length;f++){const m=this.path[f];!c&&m.options.layoutScroll&&m.scroll&&m!==m.root&&_d(d,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),mc(m.latestValues)&&_d(d,m.latestValues)}return mc(this.latestValues)&&_d(d,this.latestValues),d}removeTransform(o){const c=Lr();na(c,o);for(let d=0;d<this.path.length;d++){const f=this.path[d];if(!f.instance||!mc(f.latestValues))continue;O_(f.latestValues)&&f.updateSnapshot();const m=Lr(),h=f.measurePageBox();na(m,h),RL(c,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return mc(this.latestValues)&&RL(c,this.latestValues),c}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ln.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:m,layoutId:h}=this.options;if(!this.layout||!(m||h))return;this.resolvedRelativeTargetAt=ln.timestamp;const g=this.getClosestProjectingParent();g&&this.linkedParentVersion!==g.layoutVersion&&!g.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(g&&g.layout?this.createRelativeTarget(g,this.layout.layoutBox,g.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Lr(),this.targetWithTransforms=Lr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),xAe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):na(this.target,this.layout.layoutBox),mK(this.target,this.targetDelta)):na(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?this.createRelativeTarget(g,this.target,g.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||O_(this.parent.latestValues)||fK(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,c,d){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Lr(),this.relativeTargetOrigin=Lr(),Lv(this.relativeTargetOrigin,c,d),na(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const o=this.getLead(),c=!!this.resumingFrom||this!==o;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===ln.timestamp&&(d=!1),d)return;const{layout:f,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||m))return;na(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,g=this.treeScale.y;HEe(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Lr());const{target:x}=o;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(EL(this.prevProjectionDelta.x,this.projectionDelta.x),EL(this.prevProjectionDelta.y,this.projectionDelta.y)),ih(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==g||!zL(this.projectionDelta.x,this.prevProjectionDelta.x)||!zL(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Nd(),this.projectionDelta=Nd(),this.projectionDeltaWithTransform=Nd()}setAnimationOrigin(o,c=!1){const d=this.snapshot,f=d?d.latestValues:{},m={...this.latestValues},h=Nd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const g=Lr(),x=d?d.source:void 0,w=this.layout?this.layout.source:void 0,b=x!==w,j=this.getStack(),N=!j||j.members.length<=1,_=!!(b&&!N&&this.options.crossfade===!0&&!this.path.some(KAe));this.animationProgress=0;let S;this.mixTargetDelta=k=>{const A=k/1e3;HL(h.x,o.x,A),HL(h.y,o.y,A),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Lv(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),VAe(this.relativeTarget,this.relativeTargetOrigin,g,A),S&&wAe(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=Lr()),na(S,this.relativeTarget)),b&&(this.animationValues=m,SAe(m,f,this.latestValues,A,_,N)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(bl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$t.update(()=>{yy.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Kd(0)),this.currentAnimation=kAe(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(PAe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:c,target:d,layout:f,latestValues:m}=o;if(!(!c||!d||!f)){if(this!==o&&this.layout&&f&&OK(this.options.animationType,this.layout.layoutBox,f.layoutBox)){d=this.target||Lr();const h=Pn(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+h;const g=Pn(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+g}na(c,d),_d(c,m),ih(this.projectionDeltaWithTransform,this.layoutCorrected,c,m)}}registerSharedNode(o,c){this.sharedNodes.has(o)||this.sharedNodes.set(o,new OAe),this.sharedNodes.get(o).add(c);const f=c.options.initialPromotionConfig;c.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(c):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:c,preserveFollowOpacity:d}={}){const f=this.getStack();f&&f.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let c=!1;const{latestValues:d}=o;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const f={};d.z&&dS("z",o,f,this.animationValues);for(let m=0;m<uS.length;m++)dS(`rotate${uS[m]}`,o,f,this.animationValues),dS(`skew${uS[m]}`,o,f,this.animationValues);o.render();for(const m in f)o.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);o.scheduleRender()}applyProjectionStyles(o,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=xy(c?.pointerEvents)||"",o.transform=d?d(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=xy(c?.pointerEvents)||""),this.hasProjected&&!mc(this.latestValues)&&(o.transform=d?d({},""):"none",this.hasProjected=!1);return}o.visibility="";const m=f.animationValues||f.latestValues;this.applyTransformsToTarget();let h=jAe(this.projectionDeltaWithTransform,this.treeScale,m);d&&(h=d(m,h)),o.transform=h;const{x:g,y:x}=this.projectionDelta;o.transformOrigin=`${g.origin*100}% ${x.origin*100}% 0`,f.animationValues?o.opacity=f===this?m.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:o.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const w in M_){if(m[w]===void 0)continue;const{correct:b,applyTo:j,isCSSVariable:N}=M_[w],_=h==="none"?m[w]:b(m[w],f);if(j){const S=j.length;for(let k=0;k<S;k++)o[j[k]]=_}else N?this.options.visualElement.renderState.vars[w]=_:o[w]=_}this.options.layoutId&&(o.pointerEvents=f===this?xy(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(qL),this.root.sharedNodes.clear()}}}function RAe(e){e.updateLayout()}function DAe(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=e.layout,{animationType:a}=e.options,i=t.source!==e.layout.source;a==="size"?Ka(m=>{const h=i?t.measuredBox[m]:t.layoutBox[m],g=Pn(h);h.min=r[m].min,h.max=h.min+g}):OK(a,t.layoutBox,r)&&Ka(m=>{const h=i?t.measuredBox[m]:t.layoutBox[m],g=Pn(r[m]);h.max=h.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[m].max=e.relativeTarget[m].min+g)});const o=Nd();ih(o,r,t.layoutBox);const c=Nd();i?ih(c,e.applyTransform(n,!0),t.measuredBox):ih(c,r,t.layoutBox);const d=!_K(o);let f=!1;if(!e.resumeFrom){const m=e.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:h,layout:g}=m;if(h&&g){const x=Lr();Lv(x,t.layoutBox,h.layoutBox);const w=Lr();Lv(w,r,g.layoutBox),CK(x,w)||(f=!0),m.options.layoutRoot&&(e.relativeTarget=w,e.relativeTargetOrigin=x,e.relativeParent=m)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:c,layoutDelta:o,hasLayoutChanged:d,hasRelativeLayoutChanged:f})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function IAe(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function LAe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function $Ae(e){e.clearSnapshot()}function qL(e){e.clearMeasurements()}function VL(e){e.isLayoutDirty=!1}function zAe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function KL(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function UAe(e){e.resolveTargetDelta()}function FAe(e){e.calcProjection()}function BAe(e){e.resetSkewAndRotation()}function qAe(e){e.removeLeadSnapshot()}function HL(e,t,r){e.translate=er(t.translate,0,r),e.scale=er(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function GL(e,t,r,n){e.min=er(t.min,r.min,n),e.max=er(t.max,r.max,n)}function VAe(e,t,r,n){GL(e.x,t.x,r.x,n),GL(e.y,t.y,r.y,n)}function KAe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const HAe={duration:.45,ease:[.4,0,.1,1]},WL=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),QL=WL("applewebkit/")&&!WL("chrome/")?Math.round:Vs;function YL(e){e.min=QL(e.min),e.max=QL(e.max)}function GAe(e){YL(e.x),YL(e.y)}function OK(e,t,r){return e==="position"||e==="preserve-aspect"&&!gAe($L(t),$L(r),.2)}function WAe(e){return e!==e.root&&e.scroll?.wasRoot}const QAe=TK({attachResizeListener:(e,t)=>qh(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),fS={current:void 0},PK=TK({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!fS.current){const e=new QAe({});e.mount(window),e.setOptions({layoutScroll:!0}),fS.current=e}return fS.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),fA=y.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function XL(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function YAe(...e){return t=>{let r=!1;const n=e.map(a=>{const i=XL(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():XL(e[a],null)}}}}function XAe(...e){return y.useCallback(YAe(...e),e)}class ZAe extends y.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const n=r.offsetParent,a=A_(n)&&n.offsetWidth||0,i=A_(n)&&n.offsetHeight||0,o=this.props.sizeRef.current;o.height=r.offsetHeight||0,o.width=r.offsetWidth||0,o.top=r.offsetTop,o.left=r.offsetLeft,o.right=a-o.width-o.left,o.bottom=i-o.height-o.top}return null}componentDidUpdate(){}render(){return this.props.children}}function JAe({children:e,isPresent:t,anchorX:r,anchorY:n,root:a,pop:i}){const o=y.useId(),c=y.useRef(null),d=y.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:f}=y.useContext(fA),m=e.props?.ref??e?.ref,h=XAe(c,m);return y.useInsertionEffect(()=>{const{width:g,height:x,top:w,left:b,right:j,bottom:N}=d.current;if(t||i===!1||!c.current||!g||!x)return;const _=r==="left"?`left: ${b}`:`right: ${j}`,S=n==="bottom"?`bottom: ${N}`:`top: ${w}`;c.current.dataset.motionPopId=o;const k=document.createElement("style");f&&(k.nonce=f);const A=a??document.head;return A.appendChild(k),k.sheet&&k.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${x}px !important;
            ${_}px !important;
            ${S}px !important;
          }
        `),()=>{A.contains(k)&&A.removeChild(k)}},[t]),s.jsx(ZAe,{isPresent:t,childRef:c,sizeRef:d,pop:i,children:i===!1?e:y.cloneElement(e,{ref:h})})}const e5e=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:a,presenceAffectsLayout:i,mode:o,anchorX:c,anchorY:d,root:f})=>{const m=zE(t5e),h=y.useId();let g=!0,x=y.useMemo(()=>(g=!1,{id:h,initial:t,isPresent:r,custom:a,onExitComplete:w=>{m.set(w,!0);for(const b of m.values())if(!b)return;n&&n()},register:w=>(m.set(w,!1),()=>m.delete(w))}),[r,m,n]);return i&&g&&(x={...x}),y.useMemo(()=>{m.forEach((w,b)=>m.set(b,!1))},[r]),y.useEffect(()=>{!r&&!m.size&&n&&n()},[r]),e=s.jsx(JAe,{pop:o==="popLayout",isPresent:r,anchorX:c,anchorY:d,root:f,children:e}),s.jsx(d0.Provider,{value:x,children:e})};function t5e(){return new Map}function MK(e=!0){const t=y.useContext(d0);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:a}=t,i=y.useId();y.useEffect(()=>{if(e)return a(i)},[e]);const o=y.useCallback(()=>e&&n&&n(i),[i,n,e]);return!r&&n?[!1,o]:[!0]}const zx=e=>e.key||"";function ZL(e){const t=[];return y.Children.forEach(e,r=>{y.isValidElement(r)&&t.push(r)}),t}const ds=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:a=!0,mode:i="sync",propagate:o=!1,anchorX:c="left",anchorY:d="top",root:f})=>{const[m,h]=MK(o),g=y.useMemo(()=>ZL(e),[e]),x=o&&!m?[]:g.map(zx),w=y.useRef(!0),b=y.useRef(g),j=zE(()=>new Map),N=y.useRef(new Set),[_,S]=y.useState(g),[k,A]=y.useState(g);oV(()=>{w.current=!1,b.current=g;for(let P=0;P<k.length;P++){const R=zx(k[P]);x.includes(R)?(j.delete(R),N.current.delete(R)):j.get(R)!==!0&&j.set(R,!1)}},[k,x.length,x.join("-")]);const T=[];if(g!==_){let P=[...g];for(let R=0;R<k.length;R++){const M=k[R],D=zx(M);x.includes(D)||(P.splice(R,0,M),T.push(M))}return i==="wait"&&T.length&&(P=T),A(ZL(P)),S(g),null}const{forceRender:O}=y.useContext($E);return s.jsx(s.Fragment,{children:k.map(P=>{const R=zx(P),M=o&&!m?!1:g===k||x.includes(R),D=()=>{if(N.current.has(R))return;if(N.current.add(R),j.has(R))j.set(R,!0);else return;let z=!0;j.forEach(Y=>{Y||(z=!1)}),z&&(O?.(),A(b.current),o&&h?.(),n&&n())};return s.jsx(e5e,{isPresent:M,initial:!w.current||r?void 0:!1,custom:t,presenceAffectsLayout:a,mode:i,root:f,onExitComplete:M?void 0:D,anchorX:c,anchorY:d,children:P},R)})})},RK=y.createContext({strict:!1}),JL={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let e$=!1;function r5e(){if(e$)return;const e={};for(const t in JL)e[t]={isEnabled:r=>JL[t].some(n=>!!r[n])};cK(e),e$=!0}function DK(){return r5e(),BEe()}function n5e(e){const t=DK();for(const r in e)t[r]={...t[r],...e[r]};cK(t)}const s5e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function $v(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||s5e.has(e)}let IK=e=>!$v(e);function a5e(e){typeof e=="function"&&(IK=t=>t.startsWith("on")?!$v(t):e(t))}try{a5e(require("@emotion/is-prop-valid").default)}catch{}function i5e(e,t,r){const n={};for(const a in e)a==="values"&&typeof e.values=="object"||(IK(a)||r===!0&&$v(a)||!t&&!$v(a)||e.draggable&&a.startsWith("onDrag"))&&(n[a]=e[a]);return n}const h0=y.createContext({});function o5e(e,t){if(m0(e)){const{initial:r,animate:n}=e;return{initial:r===!1||Bh(r)?r:void 0,animate:Bh(n)?n:void 0}}return e.inherit!==!1?t:{}}function l5e(e){const{initial:t,animate:r}=o5e(e,y.useContext(h0));return y.useMemo(()=>({initial:t,animate:r}),[t$(t),t$(r)])}function t$(e){return Array.isArray(e)?e.join(" "):e}const mA=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function LK(e,t,r){for(const n in t)!wn(t[n])&&!gK(n,r)&&(e[n]=t[n])}function c5e({transformTemplate:e},t){return y.useMemo(()=>{const r=mA();return uA(r,t,e),Object.assign({},r.vars,r.style)},[t])}function u5e(e,t){const r=e.style||{},n={};return LK(n,r,e),Object.assign(n,c5e(e,t)),n}function d5e(e,t){const r={},n=u5e(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const $K=()=>({...mA(),attrs:{}});function f5e(e,t,r,n){const a=y.useMemo(()=>{const i=$K();return xK(i,t,vK(n),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};LK(i,e.style,e),a.style={...i,...a.style}}return a}const m5e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function hA(e){return typeof e!="string"||e.includes("-")?!1:!!(m5e.indexOf(e)>-1||/[A-Z]/u.test(e))}function h5e(e,t,r,{latestValues:n},a,i=!1,o){const d=(o??hA(e)?f5e:d5e)(t,n,a,e),f=i5e(t,typeof e=="string",i),m=e!==y.Fragment?{...f,...d,ref:r}:{},{children:h}=t,g=y.useMemo(()=>wn(h)?h.get():h,[h]);return y.createElement(e,{...m,children:g})}function p5e({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,a){return{latestValues:g5e(r,n,a,e),renderState:t()}}function g5e(e,t,r,n){const a={},i=n(e,{});for(const g in i)a[g]=xy(i[g]);let{initial:o,animate:c}=e;const d=m0(e),f=oK(e);t&&f&&!d&&e.inherit!==!1&&(o===void 0&&(o=t.initial),c===void 0&&(c=t.animate));let m=r?r.initial===!1:!1;m=m||o===!1;const h=m?c:o;if(h&&typeof h!="boolean"&&!f0(h)){const g=Array.isArray(h)?h:[h];for(let x=0;x<g.length;x++){const w=rA(e,g[x]);if(w){const{transitionEnd:b,transition:j,...N}=w;for(const _ in N){let S=N[_];if(Array.isArray(S)){const k=m?S.length-1:0;S=S[k]}S!==null&&(a[_]=S)}for(const _ in b)a[_]=b[_]}}}return a}const zK=e=>(t,r)=>{const n=y.useContext(h0),a=y.useContext(d0),i=()=>p5e(e,t,n,a);return r?i():zE(i)},x5e=zK({scrapeMotionValuesFromProps:dA,createRenderState:mA}),y5e=zK({scrapeMotionValuesFromProps:bK,createRenderState:$K}),v5e=Symbol.for("motionComponentSymbol");function b5e(e,t,r){const n=y.useRef(r);y.useInsertionEffect(()=>{n.current=r});const a=y.useRef(null);return y.useCallback(i=>{i&&e.onMount?.(i),t&&(i?t.mount(i):t.unmount());const o=n.current;if(typeof o=="function")if(i){const c=o(i);typeof c=="function"&&(a.current=c)}else a.current?(a.current(),a.current=null):o(i);else o&&(o.current=i)},[t])}const UK=y.createContext({});function hd(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function w5e(e,t,r,n,a,i){const{visualElement:o}=y.useContext(h0),c=y.useContext(RK),d=y.useContext(d0),f=y.useContext(fA),m=f.reducedMotion,h=f.skipAnimations,g=y.useRef(null),x=y.useRef(!1);n=n||c.renderer,!g.current&&n&&(g.current=n(e,{visualState:t,parent:o,props:r,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:m,skipAnimations:h,isSVG:i}),x.current&&g.current&&(g.current.manuallyAnimateOnMount=!0));const w=g.current,b=y.useContext(UK);w&&!w.projection&&a&&(w.type==="html"||w.type==="svg")&&j5e(g.current,r,a,b);const j=y.useRef(!1);y.useInsertionEffect(()=>{w&&j.current&&w.update(r,d)});const N=r[WV],_=y.useRef(!!N&&!window.MotionHandoffIsComplete?.(N)&&window.MotionHasOptimisedAnimation?.(N));return oV(()=>{x.current=!0,w&&(j.current=!0,window.MotionIsMounted=!0,w.updateFeatures(),w.scheduleRenderMicrotask(),_.current&&w.animationState&&w.animationState.animateChanges())}),y.useEffect(()=>{w&&(!_.current&&w.animationState&&w.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(N)}),_.current=!1),w.enteringChildren=void 0)}),w}function j5e(e,t,r,n){const{layoutId:a,layout:i,drag:o,dragConstraints:c,layoutScroll:d,layoutRoot:f,layoutCrossfade:m}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:FK(e.parent)),e.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||c&&hd(c),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:m,layoutScroll:d,layoutRoot:f})}function FK(e){if(e)return e.options.allowProjection!==!1?e.projection:FK(e.parent)}function mS(e,{forwardMotionProps:t=!1,type:r}={},n,a){n&&n5e(n);const i=r?r==="svg":hA(e),o=i?y5e:x5e;function c(f,m){let h;const g={...y.useContext(fA),...f,layoutId:N5e(f)},{isStatic:x}=g,w=l5e(f),b=o(f,x);if(!x&&iV){S5e();const j=_5e(g);h=j.MeasureLayout,w.visualElement=w5e(e,b,g,a,j.ProjectionNode,i)}return s.jsxs(h0.Provider,{value:w,children:[h&&w.visualElement?s.jsx(h,{visualElement:w.visualElement,...g}):null,h5e(e,f,b5e(b,w.visualElement,m),b,x,t,i)]})}c.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const d=y.forwardRef(c);return d[v5e]=e,d}function N5e({layoutId:e}){const t=y.useContext($E).id;return t&&e!==void 0?t+"-"+e:e}function S5e(e,t){y.useContext(RK).strict}function _5e(e){const t=DK(),{drag:r,layout:n}=t;if(!r&&!n)return{};const a={...r,...n};return{MeasureLayout:r?.isEnabled(e)||n?.isEnabled(e)?a.MeasureLayout:void 0,ProjectionNode:a.ProjectionNode}}function C5e(e,t){if(typeof Proxy>"u")return mS;const r=new Map,n=(i,o)=>mS(i,o,e,t),a=(i,o)=>n(i,o);return new Proxy(a,{get:(i,o)=>o==="create"?n:(r.has(o)||r.set(o,mS(o,void 0,e,t)),r.get(o))})}const k5e=(e,t)=>t.isSVG??hA(e)?new aAe(t):new JEe(t,{allowProjection:e!==y.Fragment});class E5e extends Ol{constructor(t){super(t),t.animationState||(t.animationState=uAe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();f0(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let A5e=0;class T5e extends Ol{constructor(){super(...arguments),this.id=A5e++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const a=this.node.animationState.setActive("exit",!t);r&&!t&&a.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const O5e={animation:{Feature:E5e},exit:{Feature:T5e}};function Ep(e){return{point:{x:e.pageX,y:e.pageY}}}const P5e=e=>t=>iA(t)&&e(t,Ep(t));function oh(e,t,r,n){return qh(e,t,P5e(r),n)}const BK=({current:e})=>e?e.ownerDocument.defaultView:null,r$=(e,t)=>Math.abs(e-t);function M5e(e,t){const r=r$(e.x,t.x),n=r$(e.y,t.y);return Math.sqrt(r**2+n**2)}const n$=new Set(["auto","scroll"]);class qK{constructor(t,r,{transformPagePoint:n,contextWindow:a=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3,element:c}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=x=>{this.handleScroll(x.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=pS(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,b=M5e(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!b)return;const{point:j}=x,{timestamp:N}=ln;this.history.push({...j,timestamp:N});const{onStart:_,onMove:S}=this.handlers;w||(_&&_(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,x)},this.handlePointerMove=(x,w)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=hS(w,this.transformPagePoint),$t.update(this.updatePoint,!0)},this.handlePointerUp=(x,w)=>{this.end();const{onEnd:b,onSessionEnd:j,resumeAnimation:N}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=pS(x.type==="pointercancel"?this.lastMoveEventInfo:hS(w,this.transformPagePoint),this.history);this.startEvent&&b&&b(x,_),j&&j(x,_)},!iA(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=a||window;const d=Ep(t),f=hS(d,this.transformPagePoint),{point:m}=f,{timestamp:h}=ln;this.history=[{...m,timestamp:h}];const{onSessionStart:g}=r;g&&g(t,pS(f,this.history)),this.removeListeners=_p(oh(this.contextWindow,"pointermove",this.handlePointerMove),oh(this.contextWindow,"pointerup",this.handlePointerUp),oh(this.contextWindow,"pointercancel",this.handlePointerUp)),c&&this.startScrollTracking(c)}startScrollTracking(t){let r=t.parentElement;for(;r;){const n=getComputedStyle(r);(n$.has(n.overflowX)||n$.has(n.overflowY))&&this.scrollPositions.set(r,{x:r.scrollLeft,y:r.scrollTop}),r=r.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const r=this.scrollPositions.get(t);if(!r)return;const n=t===window,a=n?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},i={x:a.x-r.x,y:a.y-r.y};i.x===0&&i.y===0||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=i.x,this.lastMoveEventInfo.point.y+=i.y):this.history.length>0&&(this.history[0].x-=i.x,this.history[0].y-=i.y),this.scrollPositions.set(t,a),$t.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),bl(this.updatePoint)}}function hS(e,t){return t?{point:t(e.point)}:e}function s$(e,t){return{x:e.x-t.x,y:e.y-t.y}}function pS({point:e},t){return{point:e,delta:s$(e,VK(t)),offset:s$(e,R5e(t)),velocity:D5e(t,.1)}}function R5e(e){return e[0]}function VK(e){return e[e.length-1]}function D5e(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const a=VK(e);for(;r>=0&&(n=e[r],!(a.timestamp-n.timestamp>ya(t)));)r--;if(!n)return{x:0,y:0};n===e[0]&&e.length>2&&a.timestamp-n.timestamp>ya(t)*2&&(n=e[1]);const i=qs(a.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-n.x)/i,y:(a.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function I5e(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?er(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?er(r,e,n.max):Math.min(e,r)),e}function a$(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function L5e(e,{top:t,left:r,bottom:n,right:a}){return{x:a$(e.x,r,a),y:a$(e.y,t,n)}}function i$(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function $5e(e,t){return{x:i$(e.x,t.x),y:i$(e.y,t.y)}}function z5e(e,t){let r=.5;const n=Pn(e),a=Pn(t);return a>n?r=zh(t.min,t.max-n,e.min):n>a&&(r=zh(e.min,e.max-a,t.min)),oi(0,1,r)}function U5e(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const R_=.35;function F5e(e=R_){return e===!1?e=0:e===!0&&(e=R_),{x:o$(e,"left","right"),y:o$(e,"top","bottom")}}function o$(e,t,r){return{min:l$(e,t),max:l$(e,r)}}function l$(e,t){return typeof e=="number"?e:e[t]||0}const B5e=new WeakMap;class q5e{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Lr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const i=h=>{r&&this.snapToCursor(Ep(h).point),this.stopAnimation()},o=(h,g)=>{const{drag:x,dragPropagation:w,onDragStart:b}=this.getProps();if(x&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=yEe(x),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ka(N=>{let _=this.getAxisMotionValue(N).get()||0;if(Ja.test(_)){const{projection:S}=this.visualElement;if(S&&S.layout){const k=S.layout.layoutBox[N];k&&(_=Pn(k)*(parseFloat(_)/100))}}this.originPoint[N]=_}),b&&$t.update(()=>b(h,g),!1,!0),__(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},c=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g;const{dragPropagation:x,dragDirectionLock:w,onDirectionLock:b,onDrag:j}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:N}=g;if(w&&this.currentDirection===null){this.currentDirection=K5e(N),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",g.point,N),this.updateAxis("y",g.point,N),this.visualElement.render(),j&&$t.update(()=>j(h,g),!1,!0)},d=(h,g)=>{this.latestPointerEvent=h,this.latestPanInfo=g,this.stop(h,g),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>{const{dragSnapToOrigin:h}=this.getProps();(h||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:m}=this.getProps();this.panSession=new qK(t,{onSessionStart:i,onStart:o,onMove:c,onSessionEnd:d,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,distanceThreshold:n,contextWindow:BK(this.visualElement),element:this.visualElement.current})}stop(t,r){const n=t||this.latestPointerEvent,a=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!a||!n)return;const{velocity:o}=a;this.startAnimation(o);const{onDragEnd:c}=this.getProps();c&&$t.postRender(()=>c(n,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,r,n){const{drag:a}=this.getProps();if(!n||!Ux(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=I5e(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;t&&hd(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=L5e(n.layoutBox,t):this.constraints=!1,this.elastic=F5e(r),a!==this.constraints&&!hd(t)&&n&&this.constraints&&!this.hasMutatedConstraints&&Ka(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=U5e(n.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!hd(t))return!1;const n=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=GEe(n,a.root,this.visualElement.getTransformPagePoint());let o=$5e(a.layout.layoutBox,i);if(r){const c=r(VEe(o));this.hasMutatedConstraints=!!c,c&&(o=dK(c))}return o}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},f=Ka(m=>{if(!Ux(m,r,this.currentDirection))return;let h=d&&d[m]||{};o&&(h={min:0,max:0});const g=a?200:1e6,x=a?40:1e7,w={type:"inertia",velocity:n?t[m]:0,bounceStiffness:g,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(m,w)});return Promise.all(f).then(c)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return __(this.visualElement,t),n.start(tA(t,n,0,r,this.visualElement,!1))}stopAnimation(){Ka(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),a=n[r];return a||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Ka(r=>{const{drag:n}=this.getProps();if(!Ux(r,n,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(r);if(a&&a.layout){const{min:o,max:c}=a.layout.layoutBox[r],d=i.get()||0;i.set(t[r]-er(o,c,.5)+d)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!hd(r)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Ka(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const d=c.get();a[o]=z5e({min:d,max:d},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.constraints=!1,this.resolveConstraints(),Ka(o=>{if(!Ux(o,t,null))return;const c=this.getAxisMotionValue(o),{min:d,max:f}=this.constraints[o];c.set(er(d,f,a[o]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;B5e.set(this.visualElement,this);const t=this.visualElement.current,r=oh(t,"pointerdown",f=>{const{drag:m,dragListener:h=!0}=this.getProps(),g=f.target,x=g!==t&&SEe(g);m&&h&&!x&&this.start(f)});let n;const a=()=>{const{dragConstraints:f}=this.getProps();hd(f)&&f.current&&(this.constraints=this.resolveRefConstraints(),n||(n=V5e(t,f.current,()=>this.scalePositionWithinConstraints())))},{projection:i}=this.visualElement,o=i.addEventListener("measure",a);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),$t.read(a);const c=qh(window,"resize",()=>this.scalePositionWithinConstraints()),d=i.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:m})=>{this.isDragging&&m&&(Ka(h=>{const g=this.getAxisMotionValue(h);g&&(this.originPoint[h]+=f[h].translate,g.set(g.get()+f[h].translate))}),this.visualElement.render())}));return()=>{c(),r(),o(),d&&d(),n&&n()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=R_,dragMomentum:c=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:c}}}function c$(e){let t=!0;return()=>{if(t){t=!1;return}e()}}function V5e(e,t,r){const n=gL(e,c$(r)),a=gL(t,c$(r));return()=>{n(),a()}}function Ux(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function K5e(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class H5e extends Ol{constructor(t){super(t),this.removeGroupControls=Vs,this.removeListeners=Vs,this.controls=new q5e(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Vs}update(){const{dragControls:t}=this.node.getProps(),{dragControls:r}=this.node.prevProps||{};t!==r&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const gS=e=>(t,r)=>{e&&$t.update(()=>e(t,r),!1,!0)};class G5e extends Ol{constructor(){super(...arguments),this.removePointerDownListener=Vs}onPointerDown(t){this.session=new qK(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:BK(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:gS(t),onStart:gS(r),onMove:gS(n),onEnd:(i,o)=>{delete this.session,a&&$t.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=oh(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let xS=!1;class W5e extends y.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:a}=this.props,{projection:i}=t;i&&(r.group&&r.group.add(i),n&&n.register&&a&&n.register(i),xS&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),yy.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:a,isPresent:i}=this.props,{projection:o}=n;return o&&(o.isPresent=i,t.layoutDependency!==r&&o.setOptions({...o.options,layoutDependency:r}),xS=!0,a||t.layoutDependency!==r||r===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||$t.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),aA.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:a}=t;xS=!0,a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function KK(e){const[t,r]=MK(),n=y.useContext($E);return s.jsx(W5e,{...e,layoutGroup:n,switchLayoutGroup:y.useContext(UK),isPresent:t,safeToRemove:r})}const Q5e={pan:{Feature:G5e},drag:{Feature:H5e,ProjectionNode:PK,MeasureLayout:KK}};function u$(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const a="onHover"+r,i=n[a];i&&$t.postRender(()=>i(t,Ep(t)))}class Y5e extends Ol{mount(){const{current:t}=this.node;t&&(this.unmount=bEe(t,(r,n)=>(u$(this.node,n,"Start"),a=>u$(this.node,a,"End"))))}unmount(){}}class X5e extends Ol{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=_p(qh(this.node.current,"focus",()=>this.onFocus()),qh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function d$(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const a="onTap"+(r==="End"?"":r),i=n[a];i&&$t.postRender(()=>i(t,Ep(t)))}class Z5e extends Ol{mount(){const{current:t}=this.node;if(!t)return;const{globalTapTarget:r,propagate:n}=this.node.props;this.unmount=CEe(t,(a,i)=>(d$(this.node,i,"Start"),(o,{success:c})=>d$(this.node,o,c?"End":"Cancel")),{useGlobalTarget:r,stopPropagation:n?.tap===!1})}unmount(){}}const D_=new WeakMap,yS=new WeakMap,J5e=e=>{const t=D_.get(e.target);t&&t(e)},eTe=e=>{e.forEach(J5e)};function tTe({root:e,...t}){const r=e||document;yS.has(r)||yS.set(r,{});const n=yS.get(r),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver(eTe,{root:e,...t})),n[a]}function rTe(e,t,r){const n=tTe(t);return D_.set(e,r),n.observe(e),()=>{D_.delete(e),n.unobserve(e)}}const nTe={some:0,all:1};class sTe extends Ol{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:a="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:nTe[a]},c=d=>{const{isIntersecting:f}=d;if(this.isInView===f||(this.isInView=f,i&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:h}=this.node.getProps(),g=f?m:h;g&&g(d)};return rTe(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(aTe(t,r))&&this.startObserver()}unmount(){}}function aTe({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const iTe={inView:{Feature:sTe},tap:{Feature:Z5e},focus:{Feature:X5e},hover:{Feature:Y5e}},oTe={layout:{ProjectionNode:PK,MeasureLayout:KK}},lTe={...O5e,...iTe,...Q5e,...oTe},Qe=C5e(lTe,k5e),f$=["from-blue-500 to-cyan-400","from-purple-500 to-pink-400","from-amber-500 to-orange-400","from-emerald-500 to-teal-400","from-rose-500 to-red-400","from-indigo-500 to-violet-400"];function cTe(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return f$[Math.abs(t)%f$.length]}function uTe(e){return(e||"?").split(/\s+/).map(t=>t[0]).filter(Boolean).slice(0,2).join("").toUpperCase()}function vS(e){return typeof e=="string"&&e.length>0&&e!=="undefined"&&e!=="null"}function dTe(e){return vS(e.avatarUrl)||vS(e.avatar)||vS(e.photo_url)}function fTe(e,t){const r=t.toLowerCase().trim(),n=[];for(const a of e){const i=a.name?.toLowerCase()??"",o=a.email?.toLowerCase()??"",c=(a.aliases??[]).map(f=>f.toLowerCase());if(i===r||o===r){n.push(a);continue}if(c.includes(r)){n.push(a);continue}if(i.startsWith(r+" ")||r.startsWith(i+" ")){n.push(a);continue}const d=i.split(" ")[0];if(d&&d.length>=3&&r===d){n.push(a);continue}if(c.some(f=>f.length>=3&&(r.includes(f)||f.includes(r)))){n.push(a);continue}}if(n.length!==0)return n.find(dTe)??n[0]}const Pl=({name:e,role:t,size:r="sm"})=>{const{data:n}=mf(),a=n?.contacts??[],i=fTe(a,e),o=i?.name||e,c=i?.avatarUrl||i?.avatar||i?.photo_url,d=typeof c=="string"&&c.length>0&&c!=="undefined"&&c!=="null"?c:void 0,f=i?.cargo||i?.role||t||"",m=i?.empresa||i?.organization||"",h=[f,m].filter(Boolean).join("  "),g=r==="sm"?"w-7 h-7":"w-9 h-9",x=r==="sm"?"text-[9px]":"text-[11px]",w=r==="sm"?"text-[11px]":"text-xs",b=r==="sm"?"text-[9px]":"text-[10px]";return s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[d?s.jsx("img",{src:d,alt:o,className:H(g,"rounded-full object-cover shrink-0")}):s.jsx("div",{className:H(g,"rounded-full bg-gradient-to-br flex items-center justify-center shrink-0",cTe(o)),children:s.jsx("span",{className:H(x,"font-bold text-white"),children:uTe(o)})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:H("font-medium text-[var(--gm-text-primary)] truncate",w),children:o}),h&&s.jsx("p",{className:H("text-[var(--gm-text-tertiary)] truncate",b),children:h})]})]})},m$=["from-blue-500 to-cyan-400","from-purple-500 to-pink-400","from-amber-500 to-orange-400","from-emerald-500 to-teal-400","from-rose-500 to-red-400","from-indigo-500 to-violet-400"];function mTe(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return m$[Math.abs(t)%m$.length]}function hTe(e){return(e||"?").split(/\s+/).map(t=>t[0]).filter(Boolean).slice(0,2).join("").toUpperCase()}function pTe({contact:e,size:t="sm"}){const r=t==="sm"?"w-7 h-7":"w-9 h-9",n=t==="sm"?"text-[9px]":"text-[11px]",a=e.avatarUrl||e.avatar||e.photo_url,i=typeof a=="string"&&a.length>0&&a!=="undefined"&&a!=="null"?a:null;return i?s.jsx("img",{src:i,alt:e.name,className:H(r,"rounded-full object-cover")}):s.jsx("div",{className:H(r,"rounded-full bg-gradient-to-br flex items-center justify-center shrink-0",mTe(e.name)),children:s.jsx("span",{className:H(n,"font-bold text-white"),children:hTe(e.name||"?")})})}function h$({contact:e,size:t="sm"}){const r=e.cargo||e.role||"",n=e.empresa||e.organization||"";return s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx(pTe,{contact:e,size:t}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:H("font-medium truncate text-[var(--gm-text-primary)]",t==="sm"?"text-[11px]":"text-xs"),children:e.name}),(r||n)&&s.jsx("div",{className:H("truncate text-[var(--gm-text-tertiary)]",t==="sm"?"text-[9px]":"text-[10px]"),children:[r,n].filter(Boolean).join("  ")})]})]})}function p0({value:e,onChange:t,placeholder:r="Select owner...",label:n,className:a}){const[i,o]=y.useState(!1),[c,d]=y.useState(""),f=y.useRef(null),m=y.useRef(null),{data:h}=mf(),g=h?.contacts??[],x=g.filter(b=>{if(!c)return!0;const j=c.toLowerCase();return b.name?.toLowerCase().includes(j)||(b.role||b.cargo||"")?.toLowerCase().includes(j)||(b.organization||b.empresa||"")?.toLowerCase().includes(j)||b.email?.toLowerCase().includes(j)}),w=g.find(b=>b.name===e||b.id===e);return y.useEffect(()=>{function b(j){f.current&&!f.current.contains(j.target)&&o(!1)}return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]),y.useEffect(()=>{i&&m.current&&m.current.focus()},[i]),s.jsxs("div",{ref:f,className:H("relative",a),children:[n&&s.jsx("label",{className:"block text-[10px] font-bold text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-1.5",children:n}),s.jsxs("button",{type:"button",onClick:()=>o(!i),className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] text-left hover:border-[var(--gm-accent-primary)]/50 transition-colors",children:[w?s.jsx(h$,{contact:w,size:"sm"}):e?s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsx("div",{className:"w-7 h-7 rounded-full bg-[var(--gm-bg-tertiary)] flex items-center justify-center shrink-0",children:s.jsx(fn,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]"})}),s.jsx("span",{className:"text-[11px] text-[var(--gm-text-secondary)] truncate",children:e})]}):s.jsx("span",{className:"text-[11px] text-[var(--gm-text-tertiary)] flex-1",children:r}),s.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e&&s.jsx("span",{onClick:b=>{b.stopPropagation(),t("")},className:"p-0.5 hover:bg-[var(--gm-bg-tertiary)] rounded cursor-pointer",children:s.jsx(mn,{className:"w-3 h-3 text-[var(--gm-text-tertiary)]"})}),s.jsx(un,{className:H("w-3.5 h-3.5 text-[var(--gm-text-tertiary)] transition-transform",i&&"rotate-180")})]})]}),i&&s.jsxs("div",{className:"absolute z-50 mt-1 w-full rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-xl overflow-hidden",children:[s.jsx("div",{className:"p-2 border-b border-[var(--gm-border-primary)]",children:s.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5 rounded-lg bg-[var(--gm-bg-tertiary)]",children:[s.jsx(bs,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]"}),s.jsx("input",{ref:m,type:"text",value:c,onChange:b=>d(b.target.value),placeholder:"Search contacts...",className:"flex-1 bg-transparent text-xs text-[var(--gm-text-primary)] outline-none placeholder:text-[var(--gm-text-tertiary)]"})]})}),s.jsx("div",{className:"max-h-64 overflow-y-auto p-1",children:x.length>0?x.map(b=>s.jsx("button",{type:"button",onClick:()=>{t(b.name),o(!1),d("")},className:H("w-full px-2 py-2 rounded-lg flex items-center gap-2 hover:bg-[var(--gm-surface-hover)] transition-colors",(b.name===e||b.id===e)&&"bg-[var(--gm-accent-primary)]/10"),children:s.jsx(h$,{contact:b,size:"sm"})},b.id)):s.jsxs("div",{className:"px-3 py-4 text-center",children:[s.jsx(fn,{className:"w-5 h-5 text-[var(--gm-text-tertiary)] mx-auto mb-1"}),s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:"No contacts found"})]})})]})]})}const HK=e=>e==="answered"?"bg-success/10 text-success":e==="dismissed"?"bg-muted text-[var(--gm-text-tertiary)]":"bg-primary/10 text-primary",GK=e=>e==="high"?"bg-destructive/10 text-destructive":e==="medium"?"bg-warning/10 text-warning":"bg-muted text-[var(--gm-text-tertiary)]",gTe=({open:e,onClose:t,onSave:r,question:n,mode:a})=>{const i={content:"",priority:"medium",status:"open",source:"",assignee:""},[o,c]=y.useState(i),[d,f]=y.useState(null),m=Qn();y.useEffect(()=>{if(n&&a==="edit"){const{id:x,...w}=n;c(w)}else c(i)},[n,a,e]);const h=async()=>{f("suggest"),m.mutate({message:"Suggest one important question that should be asked about this project. Return only the question text, no explanation."},{onSuccess:x=>{const w=x?.response;w&&c(b=>({...b,content:w.replace(/^["']|["']$/g,"").trim()})),f(null),G.success("AI suggestion applied")},onError:()=>{f(null),G.error("AI suggestion failed")}})},g=async()=>{if(!o.content){G.error("Add a question first");return}f("answer"),m.mutate({message:`Answer this question based on the project knowledge: "${o.content}". Be concise and factual.`},{onSuccess:x=>{const w=x?.response;w&&c(b=>({...b,answer:w,status:"answered"})),f(null),G.success("AI generated answer")},onError:()=>{f(null),G.error("AI answer failed")}})};return s.jsx(ds,{children:e&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/60 z-50",onClick:t}),s.jsx(Qe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-[var(--gm-bg-elevated)] border border-[var(--gm-border-primary)] rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",onClick:x=>x.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-[var(--gm-border-primary)]",children:[s.jsx("h2",{className:"text-lg font-semibold text-[var(--gm-text-primary)]",children:a==="create"?"New Question":"Edit Question"}),s.jsx("button",{onClick:t,className:"w-8 h-8 rounded-lg hover:bg-[var(--gm-surface-hover)] flex items-center justify-center",children:s.jsx(mn,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"})})]}),s.jsxs("div",{className:"px-5 pt-4 flex gap-2",children:[s.jsxs("button",{type:"button",onClick:h,disabled:!!d,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-accent/10 text-accent text-xs font-medium hover:bg-accent/20 disabled:opacity-50",children:[d==="suggest"?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(qt,{className:"w-3.5 h-3.5"})," Suggest Question"]}),s.jsxs("button",{type:"button",onClick:g,disabled:!!d,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-primary/10 text-primary text-xs font-medium hover:bg-primary/20 disabled:opacity-50",children:[d==="answer"?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(uf,{className:"w-3.5 h-3.5"})," AI Answer"]})]}),s.jsxs("form",{onSubmit:x=>{x.preventDefault(),o.content.trim()&&(r({id:n?.id||String(Date.now()),...o}),t())},className:"p-5 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Question *"}),s.jsx("textarea",{value:o.content,onChange:x=>c({...o,content:x.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-tertiary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)] min-h-[80px] resize-y",placeholder:"Type your question...",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Priority"}),s.jsxs("select",{value:o.priority,onChange:x=>c({...o,priority:x.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",children:[s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"low",children:"Low"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Status"}),s.jsxs("select",{value:o.status,onChange:x=>c({...o,status:x.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",children:[s.jsx("option",{value:"open",children:"Open"}),s.jsx("option",{value:"answered",children:"Answered"}),s.jsx("option",{value:"dismissed",children:"Dismissed"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx(p0,{value:o.assignee||"",onChange:x=>c({...o,assignee:x}),label:"Assignee",placeholder:"Select assignee..."}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Source"}),s.jsx("input",{value:o.source,onChange:x=>c({...o,source:x.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",placeholder:"Where did this come from?"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Answer"}),s.jsx("textarea",{value:o.answer||"",onChange:x=>c({...o,answer:x.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-tertiary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)] min-h-[60px] resize-y",placeholder:"Answer (if known)..."})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2.5 rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] text-sm font-medium hover:bg-[var(--gm-surface-hover)]",children:"Cancel"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90",children:a==="create"?"Create":"Save"})]})]})]})})]})})},xTe=({question:e,onBack:t,onEdit:r,onDelete:n})=>{const[a,i]=y.useState(null),[o,c]=y.useState([]),d=Qn(),f=async()=>{i("analyze"),d.mutate({message:`Analyze this project question and provide 3 actionable insights:
Question: "${e.content}"
Status: ${e.status}
Priority: ${e.priority}
Assignee: ${e.assignee||"none"}
Source: ${e.source||"unknown"}`},{onSuccess:m=>{const h=m?.response;h&&c(h.split(`
`).filter(g=>g.trim())),i(null),G.success("AI analysis complete")},onError:()=>{i(null),G.error("AI analysis failed")}})};return s.jsxs(Qe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:t,className:"w-8 h-8 rounded-lg bg-[var(--gm-interactive-secondary)] flex items-center justify-center hover:bg-[var(--gm-surface-hover)]",children:s.jsx(vs,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-lg font-semibold text-[var(--gm-text-primary)]",children:"Question Detail"}),s.jsxs("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:["#",e.id]})]}),s.jsxs("button",{onClick:f,disabled:!!a,className:"px-3 py-1.5 rounded-lg bg-accent/10 text-accent text-xs font-medium hover:bg-accent/20 flex items-center gap-1.5 disabled:opacity-50",children:[a==="analyze"?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(qt,{className:"w-3.5 h-3.5"})," Analyze"]}),s.jsxs("button",{onClick:()=>r(e),className:"px-3 py-1.5 rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] text-xs hover:bg-[var(--gm-surface-hover)] flex items-center gap-1.5",children:[s.jsx(_l,{className:"w-3.5 h-3.5"})," Edit"]}),n&&s.jsxs("button",{onClick:()=>{n(e.id),t()},className:"px-3 py-1.5 rounded-lg bg-destructive/10 text-destructive text-xs hover:bg-destructive/20 flex items-center gap-1.5",children:[s.jsx(Et,{className:"w-3.5 h-3.5"})," Delete"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{className:`text-xs px-3 py-1 rounded-full font-medium ${HK(e.status)}`,children:e.status||""}),s.jsx("span",{className:`text-xs px-3 py-1 rounded-full font-medium ${GK(e.priority)}`,children:e.priority||""})]}),s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-4",children:[s.jsx("h3",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-2",children:"Question"}),s.jsx("p",{className:"text-sm text-[var(--gm-text-primary)]",children:e.content||"(no content)"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(fn,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]"}),s.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Assignee"})]}),e.assignee?s.jsx(Pl,{name:e.assignee,size:"md"}):s.jsx("p",{className:"text-sm text-[var(--gm-text-tertiary)]",children:"Unassigned"})]}),s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(cb,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]"}),s.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Source"})]}),s.jsx("p",{className:"text-sm text-[var(--gm-text-primary)]",children:e.source||""})]})]}),e.answer&&s.jsxs("div",{className:"bg-accent/5 border border-accent/20 rounded-xl p-4",children:[s.jsx("h3",{className:"text-xs font-medium text-accent uppercase tracking-wider mb-2",children:"Answer"}),s.jsx("p",{className:"text-sm text-[var(--gm-text-primary)]",children:e.answer})]}),o.length>0&&s.jsxs(Qe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-accent/5 border border-accent/20 rounded-xl p-4",children:[s.jsxs("h3",{className:"text-xs font-medium text-accent uppercase tracking-wider mb-2 flex items-center gap-1.5",children:[s.jsx(qt,{className:"w-3.5 h-3.5"})," AI Insights"]}),s.jsx("ul",{className:"space-y-1.5",children:o.map((m,h)=>s.jsx("li",{className:"text-sm text-[var(--gm-text-primary)]",children:m},h))})]})]})},yTe=({initialData:e=[],onSave:t,onDelete:r})=>{const[n,a]=y.useState(e),i=Qn();y.useEffect(()=>{e&&a(e)},[e]);const[o,c]=y.useState("all"),[d,f]=y.useState("all"),[m,h]=y.useState(!1),[g,x]=y.useState("create"),[w,b]=y.useState(null),[j,N]=y.useState(null),[_,S]=y.useState(!1),k=y.useMemo(()=>{let R=n;return o!=="all"&&(R=R.filter(M=>M.status===o)),d!=="all"&&(R=R.filter(M=>M.priority===d)),R},[n,o,d]),A=y.useMemo(()=>({total:n.length,open:n.filter(R=>R.status==="open").length,answered:n.filter(R=>R.status==="answered").length,dismissed:n.filter(R=>R.status==="dismissed").length}),[n]),T=R=>{a(M=>{const D=M.findIndex(z=>z.id===R.id);if(D>=0){const z=[...M];return z[D]=R,z}return[...M,R]}),t?.(R)},O=R=>{a(M=>M.filter(D=>D.id!==R)),r?.(R),G.success("Question deleted")},P=async()=>{S(!0),i.mutate({message:"Based on the current project knowledge, suggest one new important question that should be raised. Return the question text only, and a suggested priority (high/medium/low) on a second line."},{onSuccess:R=>{const M=R?.response;if(M){const z=M.split(`
`).filter(K=>K.trim())[0]?.replace(/^["'\-*\d.]+\s*/,"").trim()||M.trim(),Y=M.toLowerCase().match(/(high|medium|low)/),I={id:`ai-${Date.now()}`,content:z,priority:Y?.[1]||"medium",status:"open",source:"AI Analysis"};a(K=>[...K,I]),t?.(I)}S(!1),G.success("AI suggested a new question")},onError:()=>{S(!1),G.error("AI suggestion failed")}})};return j?s.jsx(xTe,{question:j,onBack:()=>N(null),onEdit:R=>{N(null),b(R),x("edit"),h(!0)},onDelete:O}):s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"flex gap-2 flex-wrap",children:[{label:"Total",value:A.total,color:"text-[var(--gm-text-primary)]"},{label:"Open",value:A.open,color:"text-primary"},{label:"Answered",value:A.answered,color:"text-success"},{label:"Dismissed",value:A.dismissed,color:"text-[var(--gm-text-tertiary)]"}].map(R=>s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 flex items-center gap-2",children:[s.jsx("span",{className:`text-lg font-bold ${R.color}`,children:R.value}),s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:R.label})]},R.label))}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("select",{value:o,onChange:R=>c(R.target.value),className:"bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-1.5 text-xs text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",children:[s.jsx("option",{value:"all",children:"All statuses"}),s.jsx("option",{value:"open",children:"Open"}),s.jsx("option",{value:"answered",children:"Answered"}),s.jsx("option",{value:"dismissed",children:"Dismissed"})]}),s.jsxs("select",{value:d,onChange:R=>f(R.target.value),className:"bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-1.5 text-xs text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",children:[s.jsx("option",{value:"all",children:"All priorities"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"low",children:"Low"})]}),s.jsx("div",{className:"flex-1"}),s.jsxs("button",{onClick:P,disabled:_,className:"px-3 py-1.5 rounded-lg bg-accent/10 text-accent text-xs font-medium hover:bg-accent/20 flex items-center gap-1.5 disabled:opacity-50",children:[_?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(qt,{className:"w-3.5 h-3.5"})," AI Suggest"]}),s.jsxs("button",{onClick:()=>{b(null),x("create"),h(!0)},className:"px-3 py-1.5 rounded-lg bg-primary text-primary-foreground text-xs font-medium hover:bg-primary/90 flex items-center gap-1.5",children:[s.jsx(br,{className:"w-3.5 h-3.5"})," Add Question"]})]}),s.jsx("div",{className:"space-y-2",children:k.length===0?s.jsx("p",{className:"text-sm text-[var(--gm-text-tertiary)] text-center py-8",children:"No questions match the current filter"}):k.map(R=>s.jsxs(Qe.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-3.5 hover:border-primary/30 transition-colors cursor-pointer group",onClick:()=>N(R),children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsx("p",{className:"text-sm font-medium text-[var(--gm-text-primary)] group-hover:text-primary transition-colors flex-1",children:R.content||"(no content)"}),s.jsxs("div",{className:"flex gap-1.5 flex-shrink-0",children:[s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium ${GK(R.priority)}`,children:R.priority||""}),s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium ${HK(R.status)}`,children:R.status||""})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-2.5",children:[R.assignee?s.jsx(Pl,{name:R.assignee,size:"sm"}):s.jsx("span",{className:"text-[11px] text-[var(--gm-text-tertiary)]",children:"Unassigned"}),s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:R.source||""})]}),R.answer&&s.jsx("p",{className:"text-xs text-accent mt-2 line-clamp-1",children:R.answer})]},R.id))}),s.jsx(gTe,{open:m,onClose:()=>h(!1),onSave:T,question:w,mode:g})]})},I_=e=>e==="technical"?"bg-primary/10 text-primary":e==="process"?"bg-accent/10 text-accent":e==="policy"?"bg-warning/10 text-warning":e==="people"?"bg-destructive/10 text-destructive":"bg-muted text-[var(--gm-text-tertiary)]",WK=e=>e>=.9?"text-success":e>=.7?"text-warning":"text-destructive",vTe=({open:e,onClose:t,onSave:r,fact:n,mode:a})=>{const i={content:"",category:"technical",source:"",confidence:.8,createdAt:new Date().toISOString().split("T")[0]},[o,c]=y.useState(i),[d,f]=y.useState(null),m=Qn();y.useEffect(()=>{if(n&&a==="edit"){const{id:g,...x}=n;c(x)}else c(i)},[n,a,e]);const h=async()=>{if(!o.content){G.error("Add content first");return}f("refine"),m.mutate({message:`Refine and verify this fact against project knowledge. Rewrite it more precisely if needed and estimate confidence (0.0-1.0):
"${o.content}"`},{onSuccess:g=>{const x=g?.response;if(x){const w=x.match(/(\d\.\d+)/);c(b=>({...b,content:x.replace(/confidence[:\s]*\d\.\d+/i,"").trim(),confidence:Math.min(w?parseFloat(w[1]):b.confidence+.05,1)}))}f(null),G.success("Fact refined with AI")},onError:()=>{f(null),G.error("AI refinement failed")}})};return s.jsx(ds,{children:e&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/60 z-50",onClick:t}),s.jsx(Qe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-[var(--gm-bg-elevated)] border border-[var(--gm-border-primary)] rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",onClick:g=>g.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-[var(--gm-border-primary)]",children:[s.jsx("h2",{className:"text-lg font-semibold text-[var(--gm-text-primary)]",children:a==="create"?"New Fact":"Edit Fact"}),s.jsx("button",{onClick:t,className:"w-8 h-8 rounded-lg hover:bg-[var(--gm-surface-hover)] flex items-center justify-center",children:s.jsx(mn,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"})})]}),s.jsx("div",{className:"px-5 pt-4 flex gap-2",children:s.jsxs("button",{type:"button",onClick:h,disabled:!!d,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-primary/10 text-primary text-xs font-medium hover:bg-primary/20 disabled:opacity-50",children:[d==="refine"?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(uf,{className:"w-3.5 h-3.5"})," Refine with AI"]})}),s.jsxs("form",{onSubmit:g=>{g.preventDefault(),o.content.trim()&&(r({id:n?.id||String(Date.now()),...o}),t())},className:"p-5 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Content *"}),s.jsx("textarea",{value:o.content,onChange:g=>c({...o,content:g.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-tertiary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)] min-h-[80px] resize-y",placeholder:"State the fact...",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Category"}),s.jsxs("select",{value:o.category,onChange:g=>c({...o,category:g.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",children:[s.jsx("option",{value:"technical",children:"Technical"}),s.jsx("option",{value:"process",children:"Process"}),s.jsx("option",{value:"policy",children:"Policy"}),s.jsx("option",{value:"people",children:"People"}),s.jsx("option",{value:"timeline",children:"Timeline"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Confidence"}),s.jsx("input",{type:"number",min:0,max:1,step:.05,value:o.confidence,onChange:g=>c({...o,confidence:parseFloat(g.target.value)}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Source"}),s.jsx("input",{value:o.source,onChange:g=>c({...o,source:g.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",placeholder:"Document or meeting source..."})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2.5 rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] text-sm font-medium hover:bg-[var(--gm-surface-hover)]",children:"Cancel"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90",children:a==="create"?"Create":"Save"})]})]})]})})]})})},bTe=({fact:e,onBack:t,onEdit:r,onDelete:n})=>{const[a,i]=y.useState(!1),[o,c]=y.useState([]),d=Qn(),f=async()=>{i(!0),d.mutate({message:`Verify this fact against the project knowledge base. Check accuracy, find related/conflicting facts, and assess confidence:
Fact: "${e.content}"
Category: ${e.category}
Current confidence: ${Math.round(e.confidence*100)}%
Source: ${e.source}`},{onSuccess:m=>{const h=m?.response;h&&c(h.split(`
`).filter(g=>g.trim())),i(!1),G.success("AI verification complete")},onError:()=>{i(!1),G.error("AI verification failed")}})};return s.jsxs(Qe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:t,className:"w-8 h-8 rounded-lg bg-[var(--gm-interactive-secondary)] flex items-center justify-center hover:bg-[var(--gm-surface-hover)]",children:s.jsx(vs,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-lg font-semibold text-[var(--gm-text-primary)]",children:"Fact Detail"}),s.jsxs("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:["#",e.id]})]}),s.jsxs("button",{onClick:f,disabled:a,className:"px-3 py-1.5 rounded-lg bg-accent/10 text-accent text-xs font-medium hover:bg-accent/20 flex items-center gap-1.5 disabled:opacity-50",children:[a?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(qt,{className:"w-3.5 h-3.5"})," Verify"]}),s.jsxs("button",{onClick:()=>r(e),className:"px-3 py-1.5 rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] text-xs hover:bg-[var(--gm-surface-hover)] flex items-center gap-1.5",children:[s.jsx(_l,{className:"w-3.5 h-3.5"})," Edit"]}),n&&s.jsxs("button",{onClick:()=>{n(e.id),t()},className:"px-3 py-1.5 rounded-lg bg-destructive/10 text-destructive text-xs hover:bg-destructive/20 flex items-center gap-1.5",children:[s.jsx(Et,{className:"w-3.5 h-3.5"})," Delete"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{className:`text-xs px-3 py-1 rounded-full font-medium ${I_(e.category)}`,children:e.category||""}),s.jsxs("span",{className:`text-xs px-3 py-1 rounded-full font-medium bg-[var(--gm-interactive-secondary)] ${WK(e.confidence)}`,children:[Math.round(e.confidence*100),"% confidence"]})]}),s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-4",children:[s.jsx("h3",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-2",children:"Content"}),s.jsx("p",{className:"text-sm text-[var(--gm-text-primary)]",children:e.content||"(no content)"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Wt,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]"}),s.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase",children:"Source"})]}),s.jsx("p",{className:"text-sm text-[var(--gm-text-primary)]",children:e.source||""})]}),s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(tr,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]"}),s.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase",children:"Extracted"})]}),s.jsx("p",{className:"text-sm text-[var(--gm-text-primary)]",children:e.createdAt||""})]})]}),o.length>0&&s.jsxs(Qe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-accent/5 border border-accent/20 rounded-xl p-4",children:[s.jsxs("h3",{className:"text-xs font-medium text-accent uppercase tracking-wider mb-2 flex items-center gap-1.5",children:[s.jsx(qt,{className:"w-3.5 h-3.5"})," AI Verification"]}),s.jsx("ul",{className:"space-y-1.5",children:o.map((m,h)=>s.jsx("li",{className:"text-sm text-[var(--gm-text-primary)]",children:m},h))})]})]})},wTe=({initialData:e=[],onSave:t,onDelete:r})=>{const[n,a]=y.useState(e),i=Qn();y.useEffect(()=>{e&&a(e)},[e]);const[o,c]=y.useState("all"),[d,f]=y.useState(!1),[m,h]=y.useState("create"),[g,x]=y.useState(null),[w,b]=y.useState(null),[j,N]=y.useState(!1),_=y.useMemo(()=>o==="all"?n:n.filter(O=>O.category===o),[n,o]),S=y.useMemo(()=>{const O={};return n.forEach(P=>{O[P.category]=(O[P.category]||0)+1}),{total:n.length,categories:O,avgConfidence:n.length?n.reduce((P,R)=>P+R.confidence,0)/n.length:0}},[n]),k=O=>{a(P=>{const R=P.findIndex(M=>M.id===O.id);if(R>=0){const M=[...P];return M[R]=O,M}return[...P,O]}),t?.(O)},A=O=>{a(P=>P.filter(R=>R.id!==O)),r?.(O),G.success("Fact deleted")},T=async()=>{N(!0),i.mutate({message:"Based on the project knowledge, extract one important fact that is not yet documented. Return on line 1: the fact text. Line 2: category (technical/process/policy/people/timeline). Line 3: confidence (0.0-1.0)."},{onSuccess:O=>{const P=O?.response;if(P){const M=P.split(`
`).filter(I=>I.trim())[0]?.replace(/^["'\-*\d.]+\s*/,"").trim()||P.trim(),D=P.toLowerCase().match(/(technical|process|policy|people|timeline)/),z=P.match(/(\d\.\d+)/),Y={id:`ai-${Date.now()}`,content:M,category:D?.[1]||"technical",source:"AI Analysis",confidence:z?parseFloat(z[1]):.8,createdAt:new Date().toISOString().split("T")[0]};a(I=>[...I,Y]),t?.(Y)}N(!1),G.success("AI extracted a new fact")},onError:()=>{N(!1),G.error("AI extraction failed")}})};return w?s.jsx(bTe,{fact:w,onBack:()=>b(null),onEdit:O=>{b(null),x(O),h("edit"),f(!0)},onDelete:A}):s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-lg font-bold text-[var(--gm-text-primary)]",children:S.total}),s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Total"})]}),s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 flex items-center gap-2",children:[s.jsxs("span",{className:"text-lg font-bold text-accent",children:[Math.round(S.avgConfidence*100),"%"]}),s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Avg Confidence"})]}),Object.entries(S.categories).map(([O,P])=>s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 flex items-center gap-2",children:[s.jsx("span",{className:`text-lg font-bold ${I_(O).split(" ")[1]}`,children:P}),s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:O})]},O))]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("select",{value:o,onChange:O=>c(O.target.value),className:"bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-1.5 text-xs text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",children:[s.jsx("option",{value:"all",children:"All categories"}),s.jsx("option",{value:"technical",children:"Technical"}),s.jsx("option",{value:"process",children:"Process"}),s.jsx("option",{value:"policy",children:"Policy"}),s.jsx("option",{value:"people",children:"People"}),s.jsx("option",{value:"timeline",children:"Timeline"})]}),s.jsx("div",{className:"flex-1"}),s.jsxs("button",{onClick:T,disabled:j,className:"px-3 py-1.5 rounded-lg bg-accent/10 text-accent text-xs font-medium hover:bg-accent/20 flex items-center gap-1.5 disabled:opacity-50",children:[j?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(qt,{className:"w-3.5 h-3.5"})," AI Extract"]}),s.jsxs("button",{onClick:()=>{x(null),h("create"),f(!0)},className:"px-3 py-1.5 rounded-lg bg-primary text-primary-foreground text-xs font-medium hover:bg-primary/90 flex items-center gap-1.5",children:[s.jsx(br,{className:"w-3.5 h-3.5"})," Add Fact"]})]}),s.jsx("div",{className:"space-y-2",children:_.length===0?s.jsx("p",{className:"text-sm text-[var(--gm-text-tertiary)] text-center py-8",children:"No facts match the current filter"}):_.map(O=>s.jsxs(Qe.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-3.5 hover:border-primary/30 transition-colors cursor-pointer group",onClick:()=>b(O),children:[s.jsx("p",{className:"text-sm text-[var(--gm-text-primary)] group-hover:text-primary transition-colors",children:O.content||"(no content)"}),s.jsxs("div",{className:"flex items-center gap-2 mt-2.5",children:[s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium ${I_(O.category)}`,children:O.category||""}),s.jsxs("span",{className:`text-[10px] ${WK(O.confidence)}`,children:[Math.round(O.confidence*100),"%"]}),s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:[" ",O.source||""]}),s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] ml-auto",children:O.createdAt||""})]})]},O.id))}),s.jsx(vTe,{open:d,onClose:()=>f(!1),onSave:k,fact:g,mode:m})]})},QK=e=>e==="mitigated"?"bg-success/10 text-success":e==="accepted"?"bg-warning/10 text-warning":"bg-destructive/10 text-destructive",zv=e=>e==="high"?"bg-destructive/10 text-destructive":e==="medium"?"bg-warning/10 text-warning":"bg-muted text-[var(--gm-text-tertiary)]",jTe=({open:e,onClose:t,onSave:r,risk:n,mode:a})=>{const i={content:"",impact:"medium",likelihood:"medium",status:"open",owner:"",mitigation:""},[o,c]=y.useState(i),[d,f]=y.useState(null),m=doe();y.useEffect(()=>{if(n&&a==="edit"){const{id:g,...x}=n;c(x)}else c(i)},[n,a,e]);const h=async()=>{if(!o.content){G.error("Add a description first");return}f("mitigate"),m.mutate({content:o.content,impact:o.impact,likelihood:o.likelihood},{onSuccess:g=>{g.suggested_mitigation&&c(x=>({...x,mitigation:g.suggested_mitigation})),g.suggested_owner&&!o.owner&&c(x=>({...x,owner:g.suggested_owner})),f(null),G.success("AI suggested mitigation strategy")},onError:()=>{f(null),G.error("AI mitigation failed")}})};return s.jsx(ds,{children:e&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/60 z-50",onClick:t}),s.jsx(Qe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-[var(--gm-bg-elevated)] border border-[var(--gm-border-primary)] rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",onClick:g=>g.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-[var(--gm-border-primary)]",children:[s.jsx("h2",{className:"text-lg font-semibold text-[var(--gm-text-primary)]",children:a==="create"?"New Risk":"Edit Risk"}),s.jsx("button",{onClick:t,className:"w-8 h-8 rounded-lg hover:bg-[var(--gm-surface-hover)] flex items-center justify-center",children:s.jsx(mn,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"})})]}),s.jsx("div",{className:"px-5 pt-4 flex gap-2",children:s.jsxs("button",{type:"button",onClick:h,disabled:!!d,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-primary/10 text-primary text-xs font-medium hover:bg-primary/20 disabled:opacity-50",children:[d==="mitigate"?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(uf,{className:"w-3.5 h-3.5"})," AI Mitigation"]})}),s.jsxs("form",{onSubmit:g=>{g.preventDefault(),o.content.trim()&&(r({id:n?.id||String(Date.now()),...o}),t())},className:"p-5 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Risk *"}),s.jsx("input",{value:o.content,onChange:g=>c({...o,content:g.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",placeholder:"Risk title...",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Mitigation Plan"}),s.jsx("textarea",{value:o.mitigation||"",onChange:g=>c({...o,mitigation:g.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-tertiary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)] min-h-[60px] resize-y",placeholder:"Describe the risk..."})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Impact"}),s.jsxs("select",{value:o.impact,onChange:g=>c({...o,impact:g.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",children:[s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"low",children:"Low"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Likelihood"}),s.jsxs("select",{value:o.likelihood,onChange:g=>c({...o,likelihood:g.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",children:[s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"low",children:"Low"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Status"}),s.jsxs("select",{value:o.status,onChange:g=>c({...o,status:g.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",children:[s.jsx("option",{value:"open",children:"Open"}),s.jsx("option",{value:"mitigated",children:"Mitigated"}),s.jsx("option",{value:"accepted",children:"Accepted"})]})]})]}),s.jsx(p0,{value:o.owner||"",onChange:g=>c({...o,owner:g}),label:"Owner",placeholder:"Select risk owner..."}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Mitigation"}),s.jsx("textarea",{value:o.mitigation||"",onChange:g=>c({...o,mitigation:g.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-tertiary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)] min-h-[60px] resize-y",placeholder:"Mitigation strategy..."})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2.5 rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] text-sm font-medium hover:bg-[var(--gm-surface-hover)]",children:"Cancel"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90",children:a==="create"?"Create":"Save"})]})]})]})})]})})},NTe=({risk:e,onBack:t,onEdit:r,onDelete:n})=>{const[a,i]=y.useState(!1),[o,c]=y.useState([]),d=Qn(),f=e.impact==="high"&&e.likelihood==="high"?"Critical":e.impact==="high"||e.likelihood==="high"?"High":e.impact==="medium"&&e.likelihood==="medium"?"Medium":"Low",m=async()=>{i(!0),d.mutate({message:`Analyze this project risk and provide insights:
Risk: "${e.content}"
Impact: ${e.impact}, Likelihood: ${e.likelihood}, Status: ${e.status}
Owner: ${e.owner||"none"}
Mitigation: ${e.mitigation||"none"}
Provide: risk assessment, related risks, and recommendations.`},{onSuccess:h=>{const g=h?.response;g&&c(g.split(`
`).filter(x=>x.trim())),i(!1),G.success("AI risk analysis complete")},onError:()=>{i(!1),G.error("AI analysis failed")}})};return s.jsxs(Qe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:t,className:"w-8 h-8 rounded-lg bg-[var(--gm-interactive-secondary)] flex items-center justify-center hover:bg-[var(--gm-surface-hover)]",children:s.jsx(vs,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-lg font-semibold text-[var(--gm-text-primary)]",children:e.content||e.description||"(untitled risk)"}),s.jsxs("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:["Risk #",e.id?.substring(0,8)]})]}),s.jsxs("button",{onClick:m,disabled:a,className:"px-3 py-1.5 rounded-lg bg-accent/10 text-accent text-xs font-medium hover:bg-accent/20 flex items-center gap-1.5 disabled:opacity-50",children:[a?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(qt,{className:"w-3.5 h-3.5"})," Analyze"]}),s.jsxs("button",{onClick:()=>r(e),className:"px-3 py-1.5 rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] text-xs hover:bg-[var(--gm-surface-hover)] flex items-center gap-1.5",children:[s.jsx(_l,{className:"w-3.5 h-3.5"})," Edit"]}),n&&s.jsxs("button",{onClick:()=>{n(e.id),t()},className:"px-3 py-1.5 rounded-lg bg-destructive/10 text-destructive text-xs hover:bg-destructive/20 flex items-center gap-1.5",children:[s.jsx(Et,{className:"w-3.5 h-3.5"})," Delete"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{className:`text-xs px-3 py-1 rounded-full font-medium ${QK(e.status)}`,children:e.status||""}),s.jsxs("span",{className:`text-xs px-3 py-1 rounded-full font-medium ${zv(e.impact)}`,children:["Impact: ",e.impact||""]}),s.jsxs("span",{className:`text-xs px-3 py-1 rounded-full font-medium ${zv(e.likelihood)}`,children:["Likelihood: ",e.likelihood||""]})]}),s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-4",children:[s.jsx("h3",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-2",children:"Description"}),s.jsx("p",{className:"text-sm text-[var(--gm-text-primary)]",children:e.mitigation||"No mitigation plan defined"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(fn,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]"}),s.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase",children:"Owner"})]}),e.owner?s.jsx(Pl,{name:e.owner,size:"md"}):s.jsx("p",{className:"text-sm text-[var(--gm-text-tertiary)]",children:"Unassigned"})]}),s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(vr,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]"}),s.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase",children:"Risk Score"})]}),s.jsx("p",{className:`text-sm font-semibold ${f==="Critical"?"text-destructive":f==="High"?"text-warning":"text-[var(--gm-text-primary)]"}`,children:f})]})]}),e.mitigation&&s.jsxs("div",{className:"bg-success/5 border border-success/20 rounded-xl p-4",children:[s.jsxs("h3",{className:"text-xs font-medium text-success uppercase tracking-wider mb-2 flex items-center gap-1.5",children:[s.jsx(cf,{className:"w-3.5 h-3.5"})," Mitigation"]}),s.jsx("p",{className:"text-sm text-[var(--gm-text-primary)]",children:e.mitigation})]}),o.length>0&&s.jsxs(Qe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-accent/5 border border-accent/20 rounded-xl p-4",children:[s.jsxs("h3",{className:"text-xs font-medium text-accent uppercase tracking-wider mb-2 flex items-center gap-1.5",children:[s.jsx(qt,{className:"w-3.5 h-3.5"})," AI Analysis"]}),s.jsx("ul",{className:"space-y-1.5",children:o.map((h,g)=>s.jsx("li",{className:"text-sm text-[var(--gm-text-primary)]",children:h},g))})]})]})},STe=({initialData:e=[],onSave:t,onDelete:r})=>{const[n,a]=y.useState(e),i=Qn();y.useEffect(()=>{e&&a(e)},[e]);const[o,c]=y.useState("all"),[d,f]=y.useState("all"),[m,h]=y.useState(!1),[g,x]=y.useState("create"),[w,b]=y.useState(null),[j,N]=y.useState(null),[_,S]=y.useState(!1),k=y.useMemo(()=>{let R=n;return o!=="all"&&(R=R.filter(M=>M.status===o)),d!=="all"&&(R=R.filter(M=>M.impact===d)),R},[n,o,d]),A=y.useMemo(()=>({total:n.length,open:n.filter(R=>R.status==="open").length,mitigated:n.filter(R=>R.status==="mitigated").length,critical:n.filter(R=>R.impact==="high"&&R.likelihood==="high").length}),[n]),T=R=>{a(M=>{const D=M.findIndex(z=>z.id===R.id);if(D>=0){const z=[...M];return z[D]=R,z}return[...M,R]}),t?.(R)},O=R=>{a(M=>M.filter(D=>D.id!==R)),r?.(R),G.success("Risk deleted")},P=async()=>{S(!0),i.mutate({message:"Scan the project for potential risks not yet identified. Return on line 1: risk title. Line 2: brief description. Line 3: impact (high/medium/low). Line 4: likelihood (high/medium/low)."},{onSuccess:R=>{const M=R?.response;if(M){const D=M.split(`
`).filter(L=>L.trim()),z=D[0]?.replace(/^["'\-*\d.]+\s*/,"").trim()||M.trim(),Y=D[1]?.replace(/^["'\-*\d.]+\s*/,"").trim()||"",I=M.toLowerCase().match(/impact[:\s]*(high|medium|low)/),K=M.toLowerCase().match(/likelihood[:\s]*(high|medium|low)/),U={id:`ai-${Date.now()}`,content:z,mitigation:Y,impact:I?.[1]||"medium",likelihood:K?.[1]||"medium",status:"open",owner:""};a(L=>[...L,U]),t?.(U)}S(!1),G.success("AI identified a new risk")},onError:()=>{S(!1),G.error("AI risk scan failed")}})};return j?s.jsx(NTe,{risk:j,onBack:()=>N(null),onEdit:R=>{N(null),b(R),x("edit"),h(!0)},onDelete:O}):s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"flex gap-2 flex-wrap",children:[{label:"Total",value:A.total,color:"text-[var(--gm-text-primary)]"},{label:"Open",value:A.open,color:"text-destructive"},{label:"Mitigated",value:A.mitigated,color:"text-success"},{label:"Critical",value:A.critical,color:"text-destructive"}].map(R=>s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 flex items-center gap-2",children:[s.jsx("span",{className:`text-lg font-bold ${R.color}`,children:R.value}),s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:R.label})]},R.label))}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("select",{value:o,onChange:R=>c(R.target.value),className:"bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-1.5 text-xs text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",children:[s.jsx("option",{value:"all",children:"All statuses"}),s.jsx("option",{value:"open",children:"Open"}),s.jsx("option",{value:"mitigated",children:"Mitigated"}),s.jsx("option",{value:"accepted",children:"Accepted"})]}),s.jsxs("select",{value:d,onChange:R=>f(R.target.value),className:"bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-1.5 text-xs text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",children:[s.jsx("option",{value:"all",children:"All impacts"}),s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"low",children:"Low"})]}),s.jsx("div",{className:"flex-1"}),s.jsxs("button",{onClick:P,disabled:_,className:"px-3 py-1.5 rounded-lg bg-accent/10 text-accent text-xs font-medium hover:bg-accent/20 flex items-center gap-1.5 disabled:opacity-50",children:[_?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(qt,{className:"w-3.5 h-3.5"})," AI Risk Scan"]}),s.jsxs("button",{onClick:()=>{b(null),x("create"),h(!0)},className:"px-3 py-1.5 rounded-lg bg-primary text-primary-foreground text-xs font-medium hover:bg-primary/90 flex items-center gap-1.5",children:[s.jsx(br,{className:"w-3.5 h-3.5"})," Add Risk"]})]}),s.jsx("div",{className:"space-y-2",children:k.length===0?s.jsx("p",{className:"text-sm text-[var(--gm-text-tertiary)] text-center py-8",children:"No risks match the current filter"}):k.map(R=>s.jsxs(Qe.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-3.5 hover:border-primary/30 transition-colors cursor-pointer group",onClick:()=>N(R),children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-[var(--gm-text-primary)] truncate group-hover:text-primary transition-colors",children:R.content||R.description||"(untitled risk)"}),s.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)] mt-0.5 line-clamp-1",children:R.mitigation||""})]}),s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium ${QK(R.status)}`,children:R.status||""})]}),s.jsxs("div",{className:"flex items-center justify-between mt-2.5",children:[s.jsxs("div",{className:"flex gap-1.5",children:[s.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium ${zv(R.impact)}`,children:["Impact: ",R.impact||""]}),s.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium ${zv(R.likelihood)}`,children:["Likelihood: ",R.likelihood||""]})]}),R.owner?s.jsx(Pl,{name:R.owner,size:"sm"}):s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:"No owner"})]}),R.mitigation&&s.jsx("p",{className:"text-xs text-success mt-2 line-clamp-1",children:R.mitigation})]},R.id))}),s.jsx(jTe,{open:m,onClose:()=>h(!1),onSave:T,risk:w,mode:g})]})},p$={task:"",description:"",owner:"",deadline:"",status:"pending",priority:"medium",sprint_id:"",parent_story_id:""},_Te=({open:e,onClose:t,onSave:r,action:n,mode:a,sprints:i=[],userStories:o=[]})=>{const[c,d]=y.useState(p$),[f,m]=y.useState(null),h=foe(),g=Qn();y.useEffect(()=>{if(n&&a==="edit"){const{id:N,..._}=n;d(_)}else d(p$)},[n,a,e]);const x=o.filter(N=>N.sprintId===c.sprintId),w=async N=>{if(m(N),N==="title")g.mutate({message:"Suggest one concise action item title for this project. Return only the title text."},{onSuccess:_=>{const S=_?.response;S&&d(k=>({...k,title:S.replace(/^["'\-*\d.]+\s*/,"").trim()})),m(null),G.success("AI suggestion applied to title")},onError:()=>{m(null),G.error("AI suggestion failed")}});else{const _=c.task||"a new project task";h.mutate({user_input:_},{onSuccess:S=>{const k=[];S.description&&k.push(S.description),S.definition_of_done&&k.push(`Definition of Done: ${S.definition_of_done}`),S.acceptance_criteria&&k.push(`Acceptance Criteria: ${S.acceptance_criteria}`),S.size_estimate&&k.push(`Estimate: ${S.size_estimate}`);const A=k.join(`

`);d(T=>({...T,description:T.description?`${T.description}

${A}`:A})),S.task&&!c.task&&d(T=>({...T,task:S.task})),m(null),G.success("AI suggestion applied to description")},onError:()=>{m(null),G.error("AI suggestion failed")}})}},b=async()=>{if(!c.task&&!c.description){G.error("Add a title or description first");return}m("refine"),g.mutate({message:`Refine this action item. Clarify scope, add measurable outcomes, identify blockers:
Task: "${c.task}"
Description: "${c.description}"`},{onSuccess:N=>{const _=N?.response;_&&d(S=>({...S,description:S.description?`${S.description}

${_}`:_})),m(null),G.success("Action refined with AI")},onError:()=>{m(null),G.error("AI refinement failed")}})},j=N=>{N.preventDefault(),c.title.trim()&&(r({id:n?.id||String(Date.now()),...c,createdAt:n?.createdAt||new Date().toISOString().split("T")[0],updatedAt:new Date().toISOString().split("T")[0]}),t())};return s.jsx(ds,{children:e&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/60 z-50",onClick:t}),s.jsx(Qe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-[var(--gm-bg-elevated)] border border-[var(--gm-border-primary)] rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",onClick:N=>N.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-[var(--gm-border-primary)]",children:[s.jsx("h2",{className:"text-lg font-semibold text-[var(--gm-text-primary)]",children:a==="create"?"New Action":"Edit Action"}),s.jsx("button",{onClick:t,className:"w-8 h-8 rounded-lg hover:bg-[var(--gm-surface-hover)] flex items-center justify-center",children:s.jsx(mn,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"})})]}),s.jsxs("div",{className:"px-5 pt-4 flex gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>w("title"),disabled:!!f,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-accent/10 text-accent text-xs font-medium hover:bg-accent/20 disabled:opacity-50",children:[f==="title"?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(qt,{className:"w-3.5 h-3.5"})," Suggest Title"]}),s.jsxs("button",{type:"button",onClick:()=>w("description"),disabled:!!f,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-accent/10 text-accent text-xs font-medium hover:bg-accent/20 disabled:opacity-50",children:[f==="description"?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(qt,{className:"w-3.5 h-3.5"})," Suggest Description"]}),s.jsxs("button",{type:"button",onClick:b,disabled:!!f,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-primary/10 text-primary text-xs font-medium hover:bg-primary/20 disabled:opacity-50",children:[f==="refine"?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(uf,{className:"w-3.5 h-3.5"})," Refine with AI"]})]}),s.jsxs("form",{onSubmit:j,className:"p-5 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Title *"}),s.jsx("input",{value:c.title,onChange:N=>d({...c,title:N.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-tertiary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",placeholder:"Action title...",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Description"}),s.jsx("textarea",{value:c.description,onChange:N=>d({...c,description:N.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-tertiary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)] min-h-[80px] resize-y",placeholder:"Describe the action..."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx(p0,{value:c.owner||"",onChange:N=>d({...c,owner:N}),label:"Owner",placeholder:"Select assignee..."}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Deadline"}),s.jsx("input",{type:"date",value:c.deadline||"",onChange:N=>d({...c,deadline:N.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Status"}),s.jsxs("select",{value:c.status,onChange:N=>d({...c,status:N.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",children:[s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"in_progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"overdue",children:"Overdue"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Priority"}),s.jsxs("select",{value:c.priority,onChange:N=>d({...c,priority:N.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",children:[s.jsx("option",{value:"high",children:"High"}),s.jsx("option",{value:"medium",children:"Medium"}),s.jsx("option",{value:"low",children:"Low"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Sprint"}),s.jsxs("select",{value:c.sprintId||"",onChange:N=>d({...c,sprintId:N.target.value,storyId:""}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",children:[s.jsx("option",{value:"",children:"No sprint"}),i.map(N=>s.jsx("option",{value:N.id,children:N.name||"(unnamed)"},N.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"User Story"}),s.jsxs("select",{value:c.storyId||"",onChange:N=>d({...c,storyId:N.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",disabled:!c.sprintId,children:[s.jsx("option",{value:"",children:"No story"}),x.map(N=>s.jsx("option",{value:N.id,children:N.title||"(untitled)"},N.id))]})]})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2.5 rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] text-sm font-medium hover:bg-[var(--gm-surface-hover)]",children:"Cancel"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90",children:a==="create"?"Create Action":"Save Changes"})]})]})]})})]})})},CTe=e=>e==="completed"?"bg-success/10 text-success":e==="overdue"?"bg-destructive/10 text-destructive":e==="in_progress"?"bg-primary/10 text-primary":"bg-muted text-[var(--gm-text-tertiary)]",kTe=e=>e==="high"?"bg-destructive/10 text-destructive":e==="medium"?"bg-warning/10 text-warning":"bg-muted text-[var(--gm-text-tertiary)]",ETe=({action:e,onBack:t,onEdit:r,onDelete:n})=>{const[a,i]=y.useState(null),[o,c]=y.useState([]),d=Qn(),f=async()=>{i("analyze"),d.mutate({message:`Analyze this action item and provide insights on urgency, dependencies, and risks:
Title: "${e.title}"
Description: "${e.description}"
Status: ${e.status}
Priority: ${e.priority}
Owner: ${e.owner||"unassigned"}
Deadline: ${e.deadline||"none"}
Sprint: ${e.sprintId||"none"}`},{onSuccess:h=>{const g=h?.response;g&&c(g.split(`
`).filter(x=>x.trim())),i(null),G.success("AI analysis complete")},onError:()=>{i(null),G.error("AI analysis failed")}})},m=async()=>{i("steps"),d.mutate({message:`Suggest 3 concrete next steps for this action:
Title: "${e.title}"
Description: "${e.description}"
Status: ${e.status}
Return each step on a new line.`},{onSuccess:h=>{const g=h?.response;g&&c(x=>[...x,...g.split(`
`).filter(w=>w.trim())]),i(null),G.success("AI suggested next steps")},onError:()=>{i(null),G.error("AI suggestion failed")}})};return s.jsxs(Qe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:t,className:"w-8 h-8 rounded-lg bg-[var(--gm-interactive-secondary)] flex items-center justify-center hover:bg-[var(--gm-surface-hover)]",children:s.jsx(vs,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-lg font-semibold text-[var(--gm-text-primary)]",children:e.title||e.task||e.content||"(untitled action)"}),s.jsxs("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:["Action #",e.id]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:f,disabled:!!a,className:"px-3 py-1.5 rounded-lg bg-accent/10 text-accent text-xs font-medium hover:bg-accent/20 flex items-center gap-1.5 disabled:opacity-50",children:[a==="analyze"?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(qt,{className:"w-3.5 h-3.5"})," Analyze"]}),s.jsxs("button",{onClick:m,disabled:!!a,className:"px-3 py-1.5 rounded-lg bg-primary/10 text-primary text-xs font-medium hover:bg-primary/20 flex items-center gap-1.5 disabled:opacity-50",children:[a==="steps"?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(uf,{className:"w-3.5 h-3.5"})," Suggest Steps"]}),s.jsxs("button",{onClick:()=>r(e),className:"px-3 py-1.5 rounded-lg bg-[var(--gm-interactive-secondary)] text-secondary-foreground text-xs hover:bg-[var(--gm-surface-hover)] flex items-center gap-1.5",children:[s.jsx(_l,{className:"w-3.5 h-3.5"})," Edit"]}),n&&s.jsxs("button",{onClick:()=>{n(e.id),t()},className:"px-3 py-1.5 rounded-lg bg-destructive/10 text-destructive text-xs hover:bg-destructive/20 flex items-center gap-1.5",children:[s.jsx(Et,{className:"w-3.5 h-3.5"})," Delete"]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("span",{className:`text-xs px-3 py-1 rounded-full font-medium ${CTe(e.status)}`,children:(e.status||"").replace("_"," ")}),s.jsxs("span",{className:`text-xs px-3 py-1 rounded-full font-medium ${kTe(e.priority)}`,children:[e.priority," priority"]})]}),s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-4",children:[s.jsx("h3",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-2",children:"Description"}),s.jsx("p",{className:"text-sm text-[var(--gm-text-primary)] whitespace-pre-wrap",children:e.description||""})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(fn,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]"}),s.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Owner"})]}),e.owner?s.jsx(Pl,{name:e.owner,size:"md"}):s.jsx("p",{className:"text-sm text-[var(--gm-text-tertiary)]",children:"Unassigned"})]}),s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(ja,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]"}),s.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Deadline"})]}),s.jsx("p",{className:"text-sm text-[var(--gm-text-primary)]",children:e.deadline||"No deadline"})]}),s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(Ld,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]"}),s.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Sprint"})]}),s.jsx("p",{className:"text-sm text-[var(--gm-text-primary)]",children:e.sprintId||"No sprint"})]}),s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(QS,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]"}),s.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"User Story"})]}),s.jsx("p",{className:"text-sm text-[var(--gm-text-primary)]",children:e.storyId||"No story"})]})]}),o.length>0&&s.jsxs(Qe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-accent/5 border border-accent/20 rounded-xl p-4",children:[s.jsxs("h3",{className:"text-xs font-medium text-accent uppercase tracking-wider mb-2 flex items-center gap-1.5",children:[s.jsx(qt,{className:"w-3.5 h-3.5"})," AI Insights"]}),s.jsx("ul",{className:"space-y-1.5",children:o.map((h,g)=>s.jsx("li",{className:"text-sm text-[var(--gm-text-primary)]",children:h},g))})]}),s.jsxs("div",{className:"flex gap-4 text-[10px] text-[var(--gm-text-tertiary)]",children:[e.createdAt&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(tr,{className:"w-3 h-3"})," Created: ",e.createdAt]}),e.updatedAt&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(tr,{className:"w-3 h-3"})," Updated: ",e.updatedAt]})]})]})},ATe=({open:e,onClose:t,onSave:r})=>{const[n,a]=y.useState({name:"",startDate:"",endDate:"",context:""}),i=o=>{o.preventDefault(),n.name.trim()&&(r({id:`sp-${Date.now()}`,name:n.name,startDate:n.startDate,endDate:n.endDate,context:n.context,status:"planning"}),a({name:"",startDate:"",endDate:"",context:""}),t())};return s.jsx(ds,{children:e&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/60 z-50",onClick:t}),s.jsx(Qe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-[var(--gm-bg-elevated)] border border-[var(--gm-border-primary)] rounded-2xl shadow-2xl w-full max-w-md",onClick:o=>o.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-[var(--gm-border-primary)]",children:[s.jsx("h2",{className:"text-lg font-semibold text-[var(--gm-text-primary)]",children:"Create Sprint"}),s.jsx("button",{onClick:t,className:"w-8 h-8 rounded-lg hover:bg-[var(--gm-surface-hover)] flex items-center justify-center transition-colors",children:s.jsx(mn,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"})})]}),s.jsxs("form",{onSubmit:i,className:"p-5 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Sprint Name *"}),s.jsx("input",{value:n.name,onChange:o=>a({...n,name:o.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-tertiary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",placeholder:"e.g. Sprint 4  Analytics",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Start Date"}),s.jsx("input",{type:"date",value:n.startDate,onChange:o=>a({...n,startDate:o.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"End Date"}),s.jsx("input",{type:"date",value:n.endDate,onChange:o=>a({...n,endDate:o.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Context / Goals"}),s.jsx("textarea",{value:n.context,onChange:o=>a({...n,context:o.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-tertiary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)] min-h-[60px] resize-y",placeholder:"Sprint goals and context..."})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2.5 rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] text-sm font-medium hover:bg-[var(--gm-surface-hover)] transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90 transition-colors",children:"Create Sprint"})]})]})]})})]})})},TTe=e=>e==="completed"?"bg-success/10 text-success":e==="overdue"?"bg-destructive/10 text-destructive":e==="in_progress"?"bg-primary/10 text-primary":"bg-muted text-[var(--gm-text-tertiary)]",OTe=e=>e==="high"?"bg-destructive/10 text-destructive":e==="medium"?"bg-warning/10 text-warning":"bg-muted text-[var(--gm-text-tertiary)]",PTe=e=>e==="active"?"bg-success/10 text-success":e==="completed"?"bg-muted text-[var(--gm-text-tertiary)]":"bg-primary/10 text-primary",MTe=({initialData:e=[],initialSprints:t=[],onSave:r,onDelete:n})=>{const[a,i]=y.useState(e),[o,c]=y.useState(t),d=Qn();y.useEffect(()=>{e&&i(e),t&&c(t)},[e,t]);const[f,m]=y.useState("by_sprint"),[h,g]=y.useState("all"),[x,w]=y.useState(""),[b,j]=y.useState(new Set(["sp-2","sp-1","sp-3","no-sprint"])),[N,_]=y.useState(!1),[S,k]=y.useState("create"),[A,T]=y.useState(null),[O,P]=y.useState(!1),[R,M]=y.useState(null),[D,z]=y.useState(!1),Y=async()=>{z(!0),d.mutate({message:"Based on the project state, suggest one important action item. Return on line 1: the action title. Line 2: description. Line 3: priority (high/medium/low)."},{onSuccess:se=>{const ne=se?.response;if(ne){const oe=ne.split(`
`).filter(we=>we.trim()),Q=oe[0]?.replace(/^["'\-*\d.]+\s*/,"").trim()||ne.trim(),pe=oe[1]?.replace(/^["'\-*\d.]+\s*/,"").trim()||"",he=ne.toLowerCase().match(/(high|medium|low)/),te={id:`ai-${Date.now()}`,title:Q,description:pe,status:"pending",priority:he?.[1]||"medium",owner:"",deadline:new Date(Date.now()+7*864e5).toISOString().split("T")[0],sprintId:o.find(we=>we.status==="active")?.id,createdAt:new Date().toISOString().split("T")[0]};i(we=>[...we,te]),r?.(te)}z(!1),G.success("AI suggested a new action")},onError:()=>{z(!1),G.error("AI suggestion failed")}})},I=y.useMemo(()=>{let se=a;return h!=="all"&&(se=se.filter(ne=>ne.status===h)),x&&(se=se.filter(ne=>ne.sprintId===x)),se},[a,h,x]),K=y.useMemo(()=>({total:a.length,pending:a.filter(se=>se.status==="pending").length,inProgress:a.filter(se=>se.status==="in_progress").length,completed:a.filter(se=>se.status==="completed").length,overdue:a.filter(se=>se.status==="overdue").length}),[a]),U=se=>{j(ne=>{const oe=new Set(ne);return oe.has(se)?oe.delete(se):oe.add(se),oe})},L=se=>{i(ne=>{const oe=ne.findIndex(Q=>Q.id===se.id);if(oe>=0){const Q=[...ne];return Q[oe]=se,Q}return[...ne,se]}),r?.(se)},F=se=>{i(ne=>ne.filter(oe=>oe.id!==se)),n?.(se),G.success("Action deleted")},q=se=>{c(ne=>[...ne,se]),j(ne=>new Set([...ne,se.id]))},Z=se=>{T(se),k("edit"),_(!0)};if(R)return s.jsx(ETe,{action:R,onBack:()=>M(null),onEdit:se=>{M(null),Z(se)},onDelete:F});const B=({action:se})=>s.jsxs(Qe.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-3.5 hover:border-primary/30 transition-colors cursor-pointer group",onClick:()=>M(se),children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-[var(--gm-text-primary)] truncate group-hover:text-primary transition-colors",children:se.task||se.title||se.content||"(no title)"}),s.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)] mt-0.5 line-clamp-1",children:se.description||""})]}),s.jsxs("div",{className:"flex gap-1.5 flex-shrink-0",children:[se.priority&&s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium ${OTe(se.priority)}`,children:se.priority}),se.status&&s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium ${TTe(se.status)}`,children:se.status.replace("_"," ")})]})]}),s.jsxs("div",{className:"flex items-center justify-between mt-2.5",children:[se.owner?s.jsx(Pl,{name:se.owner,size:"sm"}):s.jsx("span",{className:"text-[11px] text-[var(--gm-text-tertiary)]",children:"Unassigned"}),se.deadline&&s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:[" ",se.deadline]})]})]}),V=()=>{const se=o.map(oe=>({sprint:oe,actions:I.filter(Q=>Q.sprintId===oe.id)})),ne=I.filter(oe=>!oe.sprintId);return s.jsxs("div",{className:"space-y-3",children:[se.map(({sprint:oe,actions:Q})=>s.jsxs("div",{className:"bg-[var(--gm-interactive-secondary)]/30 rounded-xl overflow-hidden",children:[s.jsxs("button",{onClick:()=>U(oe.id),className:"w-full flex items-center gap-2 px-4 py-3 hover:bg-[var(--gm-interactive-secondary)]/50 transition-colors text-left",children:[b.has(oe.id)?s.jsx(un,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"}):s.jsx(Ui,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"}),s.jsx(Ld,{className:"w-4 h-4 text-primary"}),s.jsx("span",{className:"text-sm font-medium text-[var(--gm-text-primary)] flex-1",children:oe.name||"(unnamed sprint)"}),s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium ${PTe(oe.status)}`,children:oe.status||""}),s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:[Q.length," actions"]})]}),s.jsx(ds,{children:b.has(oe.id)&&s.jsxs(Qe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:[oe.context&&s.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)] px-4 pb-2",children:oe.context}),s.jsx("div",{className:"px-3 pb-3 space-y-2",children:Q.length===0?s.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)] text-center py-4",children:"No actions in this sprint"}):Q.map(pe=>s.jsx(B,{action:pe},pe.id))})]})})]},oe.id)),ne.length>0&&s.jsxs("div",{className:"bg-[var(--gm-interactive-secondary)]/30 rounded-xl overflow-hidden",children:[s.jsxs("button",{onClick:()=>U("no-sprint"),className:"w-full flex items-center gap-2 px-4 py-3 hover:bg-[var(--gm-interactive-secondary)]/50 transition-colors text-left",children:[b.has("no-sprint")?s.jsx(un,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"}):s.jsx(Ui,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"}),s.jsx("span",{className:"text-sm font-medium text-[var(--gm-text-tertiary)] flex-1",children:"No Sprint"}),s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:[ne.length," actions"]})]}),s.jsx(ds,{children:b.has("no-sprint")&&s.jsx(Qe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden px-3 pb-3 space-y-2",children:ne.map(oe=>s.jsx(B,{action:oe},oe.id))})})]})]})},ee=[],ae=()=>{const se=ee.map(oe=>({story:oe,actions:I.filter(Q=>Q.storyId===oe.id)})).filter(oe=>oe.actions.length>0),ne=I.filter(oe=>!oe.storyId);return s.jsxs("div",{className:"space-y-3",children:[se.map(({story:oe,actions:Q})=>{const pe=o.find(he=>he.id===oe.sprintId);return s.jsxs("div",{className:"bg-[var(--gm-interactive-secondary)]/30 rounded-xl overflow-hidden",children:[s.jsxs("button",{onClick:()=>U(oe.id),className:"w-full flex items-center gap-2 px-4 py-3 hover:bg-[var(--gm-interactive-secondary)]/50 transition-colors text-left",children:[b.has(oe.id)?s.jsx(un,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"}):s.jsx(Ui,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"}),s.jsx(QS,{className:"w-4 h-4 text-accent"}),s.jsx("span",{className:"text-sm font-medium text-[var(--gm-text-primary)] flex-1 truncate",children:oe.title||"(untitled story)"}),pe&&s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:pe.name||""}),s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:Q.length})]}),s.jsx(ds,{children:b.has(oe.id)&&s.jsx(Qe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden px-3 pb-3 space-y-2",children:Q.map(he=>s.jsx(B,{action:he},he.id))})})]},oe.id)}),ne.length>0&&s.jsxs("div",{className:"bg-[var(--gm-interactive-secondary)]/30 rounded-xl overflow-hidden",children:[s.jsxs("button",{onClick:()=>U("no-story"),className:"w-full flex items-center gap-2 px-4 py-3 hover:bg-[var(--gm-interactive-secondary)]/50 transition-colors text-left",children:[b.has("no-story")?s.jsx(un,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"}):s.jsx(Ui,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"}),s.jsx("span",{className:"text-sm font-medium text-[var(--gm-text-tertiary)] flex-1",children:"No Story"}),s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:ne.length})]}),s.jsx(ds,{children:b.has("no-story")&&s.jsx(Qe.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden px-3 pb-3 space-y-2",children:ne.map(oe=>s.jsx(B,{action:oe},oe.id))})})]})]})},J=()=>s.jsx("div",{className:"space-y-2",children:I.length===0?s.jsx("p",{className:"text-sm text-[var(--gm-text-tertiary)] text-center py-8",children:"No actions match the current filter"}):I.map(se=>s.jsx(B,{action:se},se.id))});return s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"flex gap-2 flex-wrap",children:[{label:"Total",value:K.total,color:"text-[var(--gm-text-primary)]"},{label:"Pending",value:K.pending,color:"text-[var(--gm-text-tertiary)]"},{label:"In Progress",value:K.inProgress,color:"text-primary"},{label:"Completed",value:K.completed,color:"text-success"},{label:"Overdue",value:K.overdue,color:"text-destructive"}].map(se=>s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 flex items-center gap-2",children:[s.jsx("span",{className:`text-lg font-bold ${se.color}`,children:se.value}),s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:se.label})]},se.label))}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("div",{className:"flex bg-[var(--gm-interactive-secondary)] rounded-lg p-0.5",children:[{id:"list",icon:EC,label:"List"},{id:"by_sprint",icon:kC,label:"Sprints"},{id:"by_story",icon:QS,label:"Stories"}].map(se=>s.jsxs("button",{onClick:()=>m(se.id),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-md text-xs font-medium transition-colors ${f===se.id?"bg-[var(--gm-surface-primary)] text-[var(--gm-text-primary)] shadow-sm":"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)]"}`,children:[s.jsx(se.icon,{className:"w-3.5 h-3.5"}),se.label]},se.id))}),f==="list"&&s.jsxs("select",{value:x,onChange:se=>w(se.target.value),className:"bg-[var(--gm-interactive-secondary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-1.5 text-xs text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",children:[s.jsx("option",{value:"",children:"All sprints"}),o.map(se=>s.jsx("option",{value:se.id,children:se.name||"(unnamed)"},se.id))]}),s.jsxs("select",{value:h,onChange:se=>g(se.target.value),className:"bg-[var(--gm-interactive-secondary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-1.5 text-xs text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",children:[s.jsx("option",{value:"all",children:"All statuses"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"in_progress",children:"In Progress"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"overdue",children:"Overdue"})]}),s.jsx("div",{className:"flex-1"}),s.jsxs("button",{onClick:()=>P(!0),className:"px-3 py-1.5 rounded-lg bg-[var(--gm-interactive-secondary)] text-secondary-foreground text-xs font-medium hover:bg-[var(--gm-surface-hover)] transition-colors flex items-center gap-1.5",children:[s.jsx(Ld,{className:"w-3.5 h-3.5"})," Sprint"]}),s.jsxs("button",{onClick:Y,disabled:D,className:"px-3 py-1.5 rounded-lg bg-accent/10 text-accent text-xs font-medium hover:bg-accent/20 transition-colors flex items-center gap-1.5 disabled:opacity-50",children:[D?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(qt,{className:"w-3.5 h-3.5"}),"AI Suggest"]}),s.jsxs("button",{onClick:()=>{T(null),k("create"),_(!0)},className:"px-3 py-1.5 rounded-lg bg-primary text-primary-foreground text-xs font-medium hover:bg-primary/90 transition-colors flex items-center gap-1.5",children:[s.jsx(br,{className:"w-3.5 h-3.5"})," Add Action"]})]}),s.jsxs(Qe.div,{initial:{opacity:0},animate:{opacity:1},children:[f==="list"&&J(),f==="by_sprint"&&V(),f==="by_story"&&ae()]},f),s.jsx(_Te,{open:N,onClose:()=>_(!1),onSave:L,action:A,mode:S}),s.jsx(ATe,{open:O,onClose:()=>P(!1),onSave:q})]})},YK=e=>e==="approved"?"bg-success/10 text-success":e==="rejected"?"bg-destructive/10 text-destructive":"bg-primary/10 text-primary",RTe=({open:e,onClose:t,onSave:r,decision:n,mode:a})=>{const i={content:"",rationale:"",owner:"",decision_date:new Date().toISOString().split("T")[0],status:"pending"},[o,c]=y.useState(i),[d,f]=y.useState(null),m=uoe();y.useEffect(()=>{if(n&&a==="edit"){const{id:g,...x}=n;c(x)}else c(i)},[n,a,e]);const h=async()=>{if(!o.content){G.error("Add a title first");return}f("impact"),m.mutate({content:o.content,rationale:o.rationale},{onSuccess:g=>{const x=[];if(g.impact_summary&&x.push(g.impact_summary),g.rationale&&o.rationale!==g.rationale&&x.push(g.rationale),g.summary&&x.push(g.summary),x.length>0){const w=x.join(`

`);c(b=>({...b,rationale:b.rationale?`${b.rationale}

${w}`:w}))}f(null),G.success("AI impact analysis added")},onError:()=>{f(null),G.error("AI impact analysis failed")}})};return s.jsx(ds,{children:e&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 bg-black/60 z-50",onClick:t}),s.jsx(Qe.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-[var(--gm-bg-elevated)] border border-[var(--gm-border-primary)] rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",onClick:g=>g.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-[var(--gm-border-primary)]",children:[s.jsx("h2",{className:"text-lg font-semibold text-[var(--gm-text-primary)]",children:a==="create"?"New Decision":"Edit Decision"}),s.jsx("button",{onClick:t,className:"w-8 h-8 rounded-lg hover:bg-[var(--gm-surface-hover)] flex items-center justify-center",children:s.jsx(mn,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"})})]}),s.jsx("div",{className:"px-5 pt-4 flex gap-2",children:s.jsxs("button",{type:"button",onClick:h,disabled:!!d,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-primary/10 text-primary text-xs font-medium hover:bg-primary/20 disabled:opacity-50",children:[d==="impact"?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(uf,{className:"w-3.5 h-3.5"})," AI Impact Analysis"]})}),s.jsxs("form",{onSubmit:g=>{g.preventDefault(),o.content.trim()&&(r({id:n?.id||String(Date.now()),...o}),t())},className:"p-5 space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Title *"}),s.jsx("input",{value:o.content,onChange:g=>c({...o,content:g.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",placeholder:"Decision title...",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Rationale / Description"}),s.jsx("textarea",{value:o.rationale||"",onChange:g=>c({...o,rationale:g.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-tertiary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)] min-h-[80px] resize-y",placeholder:"Describe the decision and rationale..."})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsx(p0,{value:o.owner||"",onChange:g=>c({...o,owner:g}),label:"Owner",placeholder:"Decision maker..."}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Date"}),s.jsx("input",{type:"date",value:o.decision_date||"",onChange:g=>c({...o,decision_date:g.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:"Status"}),s.jsxs("select",{value:o.status,onChange:g=>c({...o,status:g.target.value}),className:"mt-1 w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",children:[s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"approved",children:"Approved"}),s.jsx("option",{value:"rejected",children:"Rejected"})]})]})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2.5 rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] text-sm font-medium hover:bg-[var(--gm-surface-hover)]",children:"Cancel"}),s.jsx("button",{type:"submit",className:"flex-1 px-4 py-2.5 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90",children:a==="create"?"Create":"Save"})]})]})]})})]})})},DTe=({decision:e,onBack:t,onEdit:r,onDelete:n})=>{const[a,i]=y.useState(!1),[o,c]=y.useState([]),d=Qn(),f=async()=>{i(!0),d.mutate({message:`Analyze this project decision and provide insights:
Title: "${e.content}"
Rationale: "${e.rationale||""}"
Owner: ${e.owner||"unknown"}
Date: ${e.decision_date||""}
Status: ${e.status}
Provide: impact assessment, related actions/risks, and recommendations.`},{onSuccess:m=>{const h=m?.response;h&&c(h.split(`
`).filter(g=>g.trim())),i(!1),G.success("AI analysis complete")},onError:()=>{i(!1),G.error("AI analysis failed")}})};return s.jsxs(Qe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:t,className:"w-8 h-8 rounded-lg bg-[var(--gm-interactive-secondary)] flex items-center justify-center hover:bg-[var(--gm-surface-hover)]",children:s.jsx(vs,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-lg font-semibold text-[var(--gm-text-primary)]",children:e.content||e.decision||e.summary||"(untitled decision)"}),s.jsxs("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:["Decision #",e.id?.substring(0,8)]})]}),s.jsxs("button",{onClick:f,disabled:a,className:"px-3 py-1.5 rounded-lg bg-accent/10 text-accent text-xs font-medium hover:bg-accent/20 flex items-center gap-1.5 disabled:opacity-50",children:[a?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(qt,{className:"w-3.5 h-3.5"})," Analyze"]}),s.jsxs("button",{onClick:()=>r(e),className:"px-3 py-1.5 rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] text-xs hover:bg-[var(--gm-surface-hover)] flex items-center gap-1.5",children:[s.jsx(_l,{className:"w-3.5 h-3.5"})," Edit"]}),n&&s.jsxs("button",{onClick:()=>{n(e.id),t()},className:"px-3 py-1.5 rounded-lg bg-destructive/10 text-destructive text-xs hover:bg-destructive/20 flex items-center gap-1.5",children:[s.jsx(Et,{className:"w-3.5 h-3.5"})," Delete"]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsx("span",{className:`text-xs px-3 py-1 rounded-full font-medium ${YK(e.status)}`,children:e.status||""})}),e.rationale&&s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-4",children:[s.jsx("h3",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-2",children:"Rationale"}),s.jsx("p",{className:"text-sm text-[var(--gm-text-primary)] whitespace-pre-wrap",children:e.rationale})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(fn,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]"}),s.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase",children:"Decision Maker"})]}),e.owner?s.jsx(Pl,{name:e.owner,size:"md"}):s.jsx("p",{className:"text-sm text-[var(--gm-text-tertiary)]",children:"Unknown"})]}),s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(ja,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]"}),s.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] uppercase",children:"Date"})]}),s.jsx("p",{className:"text-sm text-[var(--gm-text-primary)]",children:e.decision_date||""})]})]}),o.length>0&&s.jsxs(Qe.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-accent/5 border border-accent/20 rounded-xl p-4",children:[s.jsxs("h3",{className:"text-xs font-medium text-accent uppercase tracking-wider mb-2 flex items-center gap-1.5",children:[s.jsx(qt,{className:"w-3.5 h-3.5"})," AI Insights"]}),s.jsx("ul",{className:"space-y-1.5",children:o.map((m,h)=>s.jsx("li",{className:"text-sm text-[var(--gm-text-primary)]",children:m},h))})]})]})},ITe=({initialData:e=[],onSave:t,onDelete:r})=>{const[n,a]=y.useState(e),i=Qn();y.useEffect(()=>{e&&a(e)},[e]);const[o,c]=y.useState("all"),[d,f]=y.useState(!1),[m,h]=y.useState("create"),[g,x]=y.useState(null),[w,b]=y.useState(null),[j,N]=y.useState(!1),_=y.useMemo(()=>o==="all"?n:n.filter(O=>O.status===o),[n,o]),S=y.useMemo(()=>({total:n.length,approved:n.filter(O=>O.status==="approved").length,pending:n.filter(O=>O.status==="pending").length,active:n.filter(O=>O.status==="active").length,rejected:n.filter(O=>O.status==="rejected").length}),[n]),k=O=>{a(P=>{const R=P.findIndex(M=>M.id===O.id);if(R>=0){const M=[...P];return M[R]=O,M}return[...P,O]}),t?.(O)},A=O=>{a(P=>P.filter(R=>R.id!==O)),r?.(O),G.success("Decision deleted")},T=async()=>{N(!0),i.mutate({message:"Based on the current project state, suggest one important decision that should be made. Return on line 1: the decision title. Line 2: brief rationale."},{onSuccess:O=>{const P=O?.response;if(P){const R=P.split(`
`).filter(Y=>Y.trim()),M=R[0]?.replace(/^["'\-*\d.]+\s*/,"").trim()||P.trim(),D=R.slice(1).join(`
`).trim(),z={id:`ai-${Date.now()}`,content:M,rationale:D,owner:"",decision_date:new Date().toISOString().split("T")[0],status:"pending"};a(Y=>[...Y,z]),t?.(z)}N(!1),G.success("AI suggested a new decision")},onError:()=>{N(!1),G.error("AI suggestion failed")}})};return w?s.jsx(DTe,{decision:w,onBack:()=>b(null),onEdit:O=>{b(null),x(O),h("edit"),f(!0)},onDelete:A}):s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"flex gap-2 flex-wrap",children:[{label:"Total",value:S.total,color:"text-[var(--gm-text-primary)]"},{label:"Approved",value:S.approved,color:"text-success"},{label:"Pending",value:S.pending,color:"text-primary"},{label:"Active",value:S.active,color:"text-accent"},{label:"Rejected",value:S.rejected,color:"text-destructive"}].map(O=>s.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 flex items-center gap-2",children:[s.jsx("span",{className:`text-lg font-bold ${O.color}`,children:O.value}),s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:O.label})]},O.label))}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("select",{value:o,onChange:O=>c(O.target.value),className:"bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-1.5 text-xs text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",children:[s.jsx("option",{value:"all",children:"All statuses"}),s.jsx("option",{value:"approved",children:"Approved"}),s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"rejected",children:"Rejected"})]}),s.jsx("div",{className:"flex-1"}),s.jsxs("button",{onClick:T,disabled:j,className:"px-3 py-1.5 rounded-lg bg-accent/10 text-accent text-xs font-medium hover:bg-accent/20 flex items-center gap-1.5 disabled:opacity-50",children:[j?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(qt,{className:"w-3.5 h-3.5"})," AI Suggest"]}),s.jsxs("button",{onClick:()=>{x(null),h("create"),f(!0)},className:"px-3 py-1.5 rounded-lg bg-primary text-primary-foreground text-xs font-medium hover:bg-primary/90 flex items-center gap-1.5",children:[s.jsx(br,{className:"w-3.5 h-3.5"})," Add Decision"]})]}),s.jsx("div",{className:"space-y-2",children:_.length===0?s.jsx("p",{className:"text-sm text-[var(--gm-text-tertiary)] text-center py-8",children:"No decisions match the current filter"}):_.map(O=>s.jsxs(Qe.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-3.5 hover:border-primary/30 transition-colors cursor-pointer group",onClick:()=>b(O),children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-[var(--gm-text-primary)] truncate group-hover:text-primary transition-colors",children:O.content||O.decision||O.summary||O.context||"(no title)"}),s.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)] mt-0.5 line-clamp-1",children:O.rationale||O.context||""})]}),s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium ${YK(O.status)}`,children:O.status||""})]}),s.jsxs("div",{className:"flex items-center justify-between mt-2.5",children:[O.owner?s.jsx(Pl,{name:O.owner,size:"sm"}):s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:"No owner"}),s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:O.decision_date||""})]})]},O.id))}),s.jsx(RTe,{open:d,onClose:()=>f(!1),onSave:k,decision:g,mode:m})]})},qa="rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-[var(--shadow-sm)]",ad="text-[10px] font-bold text-[var(--gm-accent-primary)] uppercase tracking-[0.1em]";function lc(e){return e&&typeof e=="object"?e:{}}function LTe(){const[e,t]=y.useState("overview"),[r,n]=y.useState("questions"),[a,i]=y.useState(""),[o,c]=y.useState(""),[d,f]=y.useState(!0),{data:m}=rU(),{data:h}=nU(),{data:g}=ole(),{data:x}=lle(),w=K8(),b=H8(),j=eoe(),N=BC(),_=G8(),S=Wie(),k=Qie(),A=Yie(),T=Xie(),O=Zie(),P=Jie(),R=toe(),M=roe(),D=noe(),z=soe(),Y=aoe(),I=ioe(),K=ooe(),U=loe(),L=coe(),F=Dce(),q=Ice(),Z=Lce(),B=$ce(),V=zce(),ee=Uce(),ae=Fce(),J=Bce(),{data:se,isLoading:ne}=cle(100),{data:oe}=ule(),Q=dle(a,o),pe=fle(),he=lc(m),te=lc(h).alerts??[],we=lc(g).insights??[],ke=lc(x),Ve=ke.changes??[],Be=lc(se).timeline??[],rt=lc(oe).versions??[],Pr=lc(Q.data),hr=Number(he.score??0),pn=hr>=70?"#22c55e":hr>=40?"#f59e0b":"#ef4444",Dn=F.data?.facts??[],Ns=Z.data?.decisions??[],Ss=V.data?.risks??[],nr=ae.data?.actions??[],_s=Dn.length+Ns.length+Ss.length+nr.length,ge=[{key:"questions",label:"Questions",count:w.data?.length??0},{key:"facts",label:"Facts",count:b.data?.length??0},{key:"risks",label:"Risks",count:j.data?.length??0},{key:"actions",label:"Actions",count:N.data?.length??0},{key:"decisions",label:"Decisions",count:_.data?.length??0},{key:"trash",label:"Trash",count:_s}],Fe=ge.reduce((_e,pt)=>_e+pt.count,0),nt=w.isLoading||b.isLoading||j.isLoading||N.isLoading||_.isLoading;function it(_e,pt,Je){return wr=>{if(_e?.some(So=>So.id===wr.id))Je.mutate(wr);else{const{id:So,..._o}=wr;pt.mutate(_o)}}}const _n=_e=>{const pt=`/api/sot/export/${_e}`;window.open(pt,"_blank"),G.success(`Exporting as ${_e.toUpperCase()}`)};te.filter(_e=>_e.severity==="critical"||_e.severity==="high");const Ra=y.useMemo(()=>{const _e={};for(const pt of Be){const Je=pt.date||pt.created_at||pt.timestamp,wr=Je?new Date(Je).toLocaleDateString():"Unknown";_e[wr]||(_e[wr]=[]),_e[wr].push(pt)}return Object.entries(_e)},[Be]);return s.jsxs("div",{className:"p-6 space-y-5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-[var(--gm-text-primary)]",children:"Source of Truth"}),s.jsxs("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:[Fe," entities  ",te.length," alerts  Score ",hr,"%"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>_n("markdown"),className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-[10px] font-medium rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] hover:bg-[var(--gm-interactive-secondary-hover)] border border-[var(--gm-border-primary)]",children:[s.jsx(Wt,{className:"w-3 h-3"})," MD"]}),s.jsxs("button",{onClick:()=>_n("html"),className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-[10px] font-medium rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] hover:bg-[var(--gm-interactive-secondary-hover)] border border-[var(--gm-border-primary)]",children:[s.jsx(lf,{className:"w-3 h-3"})," HTML"]}),s.jsxs("button",{onClick:()=>_n("json"),className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-[10px] font-medium rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] hover:bg-[var(--gm-interactive-secondary-hover)] border border-[var(--gm-border-primary)]",children:[s.jsx(SC,{className:"w-3 h-3"})," JSON"]})]})]}),s.jsx("div",{className:H(qa,"p-1 flex gap-1"),children:[{key:"overview",label:"Overview",icon:q6},{key:"entities",label:`Entities (${Fe})`,icon:Wt},{key:"timeline",label:`Timeline (${Be.length})`,icon:tr},{key:"history",label:`History (${rt.length})`,icon:hh}].map(_e=>s.jsxs("button",{onClick:()=>t(_e.key),className:H("flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-[11px] font-medium rounded-lg transition-colors",e===_e.key?"bg-[var(--gm-accent-primary)]/15 text-[var(--gm-accent-primary)]":"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-secondary)]"),children:[s.jsx(_e.icon,{className:"w-3.5 h-3.5"})," ",_e.label]},_e.key))}),e==="overview"&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:H(qa,"p-5 flex items-center gap-5"),children:[s.jsxs("div",{className:"relative w-20 h-20 shrink-0",children:[s.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full -rotate-90",children:[s.jsx("circle",{cx:"18",cy:"18",r:"15.5",fill:"none",stroke:"var(--gm-bg-tertiary)",strokeWidth:"3"}),s.jsx("circle",{cx:"18",cy:"18",r:"15.5",fill:"none",stroke:pn,strokeWidth:"3",strokeDasharray:`${hr/100*97.4} 97.4`,strokeLinecap:"round",className:"transition-all duration-700"})]}),s.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-lg font-bold tabular-nums",style:{color:pn},children:hr})]}),s.jsxs("div",{children:[s.jsx("div",{className:ad,children:"Health Score"}),s.jsx("p",{className:"text-xs text-[var(--gm-text-secondary)] mt-1 capitalize",children:he.status||""}),Array.isArray(he.factors)&&s.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:he.factors.slice(0,3).map((_e,pt)=>s.jsx("span",{className:"text-[8px] px-1.5 py-0.5 rounded bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)]",children:_e.name||_e.label||_e.factor},pt))})]})]}),s.jsxs("div",{className:H(qa,"p-5"),children:[s.jsx("div",{className:ad,children:"Changes Since Last View"}),ke.isFirstView?s.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)] mt-2",children:"First view  no prior snapshot"}):Ve.length>0?s.jsx("div",{className:"mt-2 space-y-1.5",children:Ve.map((_e,pt)=>{const Je=Number(_e.change??0);return s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"text-[var(--gm-text-secondary)] capitalize",children:_e.metric||""}),s.jsxs("span",{className:H("flex items-center gap-1 font-medium tabular-nums",Je>0?"text-green-400":Je<0?"text-red-400":"text-[var(--gm-text-tertiary)]"),children:[Je>0?s.jsx(D6,{className:"w-3 h-3"}):Je<0?s.jsx(eee,{className:"w-3 h-3"}):s.jsx(Q6,{className:"w-3 h-3"}),Je>0?"+":"",Je]})]},pt)})}):s.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)] mt-2",children:"No changes since last view"}),ke.summary&&s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-2",children:ke.summary})]}),s.jsxs("div",{className:H(qa,"p-5"),children:[s.jsxs("div",{className:ad,children:["Alerts (",te.length,")"]}),te.length>0?s.jsx("div",{className:"mt-2 space-y-2 max-h-40 overflow-y-auto",children:te.slice(0,8).map((_e,pt)=>s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:H("w-1.5 h-1.5 rounded-full mt-1.5 shrink-0",_e.severity==="critical"?"bg-red-500":_e.severity==="high"?"bg-orange-500":_e.severity==="medium"?"bg-amber-500":"bg-blue-500")}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("span",{className:"text-[10px] font-medium text-[var(--gm-text-primary)] block truncate",children:_e.title||_e.message||""}),_e.message&&_e.title&&s.jsx("span",{className:"text-[9px] text-[var(--gm-text-tertiary)] block truncate",children:_e.message})]})]},pt))}):s.jsx("p",{className:"text-xs text-green-400 mt-2",children:"No active alerts"})]})]}),we.length>0&&s.jsxs("div",{className:H(qa,"overflow-hidden"),children:[s.jsxs("button",{onClick:()=>f(!d),className:"w-full px-5 py-3 flex items-center justify-between border-b border-[var(--gm-border-primary)] hover:bg-[var(--gm-surface-hover)]",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(np,{className:"w-3.5 h-3.5 text-[var(--gm-accent-primary)]"}),s.jsxs("span",{className:ad,children:["Insights (",we.length,")"]})]}),d?s.jsx(Sl,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]"}):s.jsx(un,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]"})]}),d&&s.jsx("div",{className:"divide-y divide-[var(--gm-border-primary)]",children:we.map((_e,pt)=>s.jsxs("div",{className:"px-5 py-3 flex items-start gap-3 hover:bg-[var(--gm-surface-hover)]",children:[s.jsx("span",{className:"text-lg shrink-0",children:_e.icon||""}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-semibold text-[var(--gm-text-primary)]",children:_e.title||""}),_e.category&&s.jsx("span",{className:"text-[8px] px-1.5 py-0.5 rounded bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)] capitalize",children:_e.category})]}),s.jsx("p",{className:"text-[10px] text-[var(--gm-text-secondary)] mt-0.5",children:_e.message||""}),_e.suggestion&&s.jsxs("p",{className:"text-[10px] text-[var(--gm-accent-primary)] mt-1",children:[" ",_e.suggestion]})]})]},pt))})]}),s.jsxs("div",{className:H(qa,"p-4 flex items-center gap-3"),children:[s.jsxs("button",{onClick:()=>pe.mutate(void 0,{onSuccess:_e=>{_e?.content||_e?.summary?G.success("Executive summary generated"):G.info("No summary content returned")},onError:_e=>G.error(_e.message)}),disabled:pe.isPending,className:"inline-flex items-center gap-1.5 px-4 py-2 text-xs font-medium rounded-lg bg-[var(--gm-accent-primary)] text-white hover:opacity-90 transition-opacity",children:[pe.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(hn,{className:"w-3.5 h-3.5"}),"Generate Executive Summary"]}),s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:"AI-generated summary of health, risks, and key decisions"})]})]}),e==="entities"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex gap-1 bg-[var(--gm-bg-tertiary)] rounded-xl p-1",children:ge.map(_e=>s.jsxs("button",{onClick:()=>n(_e.key),className:H("flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors relative",r===_e.key?"bg-[var(--gm-surface-primary)] text-[var(--gm-text-primary)] shadow-sm":"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-secondary)]"),children:[_e.label,s.jsx("span",{className:"ml-1.5 text-[10px] opacity-60",children:_e.count})]},_e.key))}),nt?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx(ye,{className:"h-8 w-8 animate-spin text-[var(--gm-accent-primary)]"})}):s.jsxs(Qe.div,{initial:{opacity:0},animate:{opacity:1},children:[r==="questions"&&s.jsx(yTe,{initialData:w.data??[],onSave:it(w.data,S,k),onDelete:_e=>A.mutate(_e)}),r==="facts"&&s.jsx(wTe,{initialData:b.data??[],onSave:it(b.data,T,O),onDelete:_e=>P.mutate(_e)}),r==="risks"&&s.jsx(STe,{initialData:j.data??[],onSave:it(j.data,R,M),onDelete:_e=>D.mutate(_e)}),r==="actions"&&s.jsx(MTe,{initialData:N.data??[],onSave:it(N.data,z,Y),onDelete:_e=>I.mutate(_e)}),r==="decisions"&&s.jsx(ITe,{initialData:_.data??[],onSave:it(_.data,K,U),onDelete:_e=>L.mutate(_e)}),r==="trash"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-[var(--gm-text-tertiary)]",children:[s.jsx(Et,{className:"w-4 h-4"}),s.jsxs("span",{className:"text-sm font-medium",children:["Deleted entities (",_s,")"]})]}),_s===0?s.jsx("p",{className:"text-sm text-[var(--gm-text-tertiary)] text-center py-12",children:"Trash is empty"}):s.jsxs("div",{className:"space-y-2",children:[Dn.map(_e=>s.jsxs("div",{className:"flex items-center gap-3 bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-3",children:[s.jsx("span",{className:"text-[9px] font-medium px-2 py-0.5 rounded-full bg-blue-500/10 text-blue-400",children:"fact"}),s.jsx("span",{className:"flex-1 text-sm text-[var(--gm-text-secondary)] truncate",children:_e.content||""}),s.jsxs("button",{onClick:()=>{q.mutate(String(_e.id)),G.success("Fact restored")},disabled:q.isPending,className:"inline-flex items-center gap-1 px-2.5 py-1 text-[10px] font-medium rounded-lg bg-green-500/10 text-green-400 hover:bg-green-500/20",children:[s.jsx(Qr,{className:"w-3 h-3"})," Restore"]})]},String(_e.id))),Ns.map(_e=>s.jsxs("div",{className:"flex items-center gap-3 bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-3",children:[s.jsx("span",{className:"text-[9px] font-medium px-2 py-0.5 rounded-full bg-purple-500/10 text-purple-400",children:"decision"}),s.jsx("span",{className:"flex-1 text-sm text-[var(--gm-text-secondary)] truncate",children:_e.content||""}),s.jsxs("button",{onClick:()=>{B.mutate(String(_e.id)),G.success("Decision restored")},disabled:B.isPending,className:"inline-flex items-center gap-1 px-2.5 py-1 text-[10px] font-medium rounded-lg bg-green-500/10 text-green-400 hover:bg-green-500/20",children:[s.jsx(Qr,{className:"w-3 h-3"})," Restore"]})]},String(_e.id))),Ss.map(_e=>s.jsxs("div",{className:"flex items-center gap-3 bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-3",children:[s.jsx("span",{className:"text-[9px] font-medium px-2 py-0.5 rounded-full bg-red-500/10 text-red-400",children:"risk"}),s.jsx("span",{className:"flex-1 text-sm text-[var(--gm-text-secondary)] truncate",children:_e.content||""}),s.jsxs("button",{onClick:()=>{ee.mutate(String(_e.id)),G.success("Risk restored")},disabled:ee.isPending,className:"inline-flex items-center gap-1 px-2.5 py-1 text-[10px] font-medium rounded-lg bg-green-500/10 text-green-400 hover:bg-green-500/20",children:[s.jsx(Qr,{className:"w-3 h-3"})," Restore"]})]},String(_e.id))),nr.map(_e=>s.jsxs("div",{className:"flex items-center gap-3 bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-3",children:[s.jsx("span",{className:"text-[9px] font-medium px-2 py-0.5 rounded-full bg-amber-500/10 text-amber-400",children:"action"}),s.jsx("span",{className:"flex-1 text-sm text-[var(--gm-text-secondary)] truncate",children:_e.task||_e.content||""}),s.jsxs("button",{onClick:()=>{J.mutate(String(_e.id)),G.success("Action restored")},disabled:J.isPending,className:"inline-flex items-center gap-1 px-2.5 py-1 text-[10px] font-medium rounded-lg bg-green-500/10 text-green-400 hover:bg-green-500/20",children:[s.jsx(Qr,{className:"w-3 h-3"})," Restore"]})]},String(_e.id)))]})]})]},r)]}),e==="timeline"&&s.jsx("div",{className:"space-y-4",children:ne?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx(ye,{className:"h-8 w-8 animate-spin text-[var(--gm-accent-primary)]"})}):Ra.length>0?s.jsx("div",{className:"space-y-6",children:Ra.map(([_e,pt])=>s.jsxs("div",{children:[s.jsx("div",{className:"sticky top-0 z-10 py-1.5 px-3 bg-[var(--gm-bg-primary)]",children:s.jsx("span",{className:"text-[10px] font-bold text-[var(--gm-accent-primary)] uppercase tracking-wider",children:_e})}),s.jsx("div",{className:"relative ml-4 border-l-2 border-[var(--gm-border-primary)] space-y-0",children:pt.map((Je,wr)=>{const sr=Je.type||Je.entity_type||"event",So={decision:"bg-purple-500",risk:"bg-red-500",action:"bg-amber-500",fact:"bg-blue-500",question:"bg-cyan-500",document:"bg-green-500",email:"bg-pink-500",conversation:"bg-indigo-500"},_o=Je.date||Je.created_at||Je.timestamp;return s.jsxs("div",{className:"relative pl-6 py-2.5 hover:bg-[var(--gm-surface-hover)] transition-colors rounded-r-lg",children:[s.jsx("span",{className:H("absolute left-[-5px] top-3.5 w-2.5 h-2.5 rounded-full border-2 border-[var(--gm-bg-primary)]",So[sr]||"bg-gray-500")}),s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:H("text-[8px] px-1.5 py-0.5 rounded-full font-medium capitalize border",sr==="risk"?"bg-red-500/10 border-red-500/30 text-red-400":sr==="decision"?"bg-purple-500/10 border-purple-500/30 text-purple-400":sr==="action"?"bg-amber-500/10 border-amber-500/30 text-amber-400":"bg-[var(--gm-bg-tertiary)] border-[var(--gm-border-primary)] text-[var(--gm-text-tertiary)]"),children:sr}),s.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-primary)] truncate",children:Je.title||Je.content||Je.name||""})]}),Je.description&&s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-0.5 truncate",children:Je.description||Je.content})]}),s.jsx("span",{className:"text-[9px] text-[var(--gm-text-tertiary)] tabular-nums shrink-0 mt-0.5",children:_o?new Date(_o).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]})]},wr)})})]},_e))}):s.jsxs("div",{className:H(qa,"p-8 text-center"),children:[s.jsx(tr,{className:"w-8 h-8 text-[var(--gm-text-tertiary)] mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-[var(--gm-text-tertiary)]",children:"No timeline events yet"})]})}),e==="history"&&s.jsxs("div",{className:"space-y-5",children:[rt.length>0?s.jsxs("div",{className:H(qa,"overflow-hidden"),children:[s.jsxs("div",{className:"px-5 py-3 border-b border-[var(--gm-border-primary)] flex items-center justify-between",children:[s.jsx("span",{className:ad,children:"Version History"}),s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:[rt.length," snapshots"]})]}),s.jsx("div",{className:"max-h-72 overflow-y-auto divide-y divide-[var(--gm-border-primary)]",children:rt.map((_e,pt)=>s.jsxs("div",{className:"px-5 py-3 flex items-center hover:bg-[var(--gm-surface-hover)] transition-colors",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs font-bold text-[var(--gm-accent-primary)] tabular-nums",children:["v",_e.version_number||pt+1]}),s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] tabular-nums",children:_e.created_at?new Date(_e.created_at).toLocaleString():""})]}),s.jsxs("div",{className:"flex gap-3 mt-1 text-[9px] text-[var(--gm-text-tertiary)]",children:[_e.facts_count!=null&&s.jsxs("span",{children:[_e.facts_count," facts"]}),_e.decisions_count!=null&&s.jsxs("span",{children:[_e.decisions_count," decisions"]}),_e.risks_count!=null&&s.jsxs("span",{children:[_e.risks_count," risks"]})]})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>i(String(_e.version_number??_e.id)),className:H("text-[9px] px-2 py-1 rounded border",a===String(_e.version_number??_e.id)?"bg-[var(--gm-accent-primary)]/15 border-[var(--gm-accent-primary)]/40 text-[var(--gm-accent-primary)]":"bg-[var(--gm-bg-tertiary)] border-[var(--gm-border-primary)] text-[var(--gm-text-tertiary)]"),children:"V1"}),s.jsx("button",{onClick:()=>c(String(_e.version_number??_e.id)),className:H("text-[9px] px-2 py-1 rounded border",o===String(_e.version_number??_e.id)?"bg-[var(--gm-accent-primary)]/15 border-[var(--gm-accent-primary)]/40 text-[var(--gm-accent-primary)]":"bg-[var(--gm-bg-tertiary)] border-[var(--gm-border-primary)] text-[var(--gm-text-tertiary)]"),children:"V2"})]})]},pt))})]}):s.jsxs("div",{className:H(qa,"p-8 text-center"),children:[s.jsx(hh,{className:"w-8 h-8 text-[var(--gm-text-tertiary)] mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-[var(--gm-text-tertiary)]",children:"No version history yet"})]}),a&&o&&s.jsxs("div",{className:H(qa,"p-5 space-y-3"),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:ad,children:["Compare v",a,"  v",o]}),Q.isFetching&&s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin text-[var(--gm-accent-primary)]"})]}),Pr.ok?s.jsx("pre",{className:"text-[10px] text-[var(--gm-text-secondary)] font-mono bg-[var(--gm-bg-tertiary)] p-3 rounded-lg overflow-auto max-h-64 whitespace-pre-wrap",children:JSON.stringify(Pr,null,2)}):Q.isError?s.jsx("p",{className:"text-xs text-red-400",children:"Failed to compare versions"}):Q.isFetching?null:s.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:"Select V1 and V2 to compare"})]})]})]})}const g$={question:{icon:I6,color:"text-blue-500 bg-blue-500/10",label:"Question"},fact:{icon:np,color:"text-amber-500 bg-amber-500/10",label:"Fact"},decision:{icon:ate,color:"text-purple-500 bg-purple-500/10",label:"Decision"},risk:{icon:X6,color:"text-red-500 bg-red-500/10",label:"Risk"},action:{icon:Oy,color:"text-green-500 bg-green-500/10",label:"Action"},document:{icon:Wt,color:"text-cyan-500 bg-cyan-500/10",label:"Document"},contact:{icon:ja,color:"text-pink-500 bg-pink-500/10",label:"Contact"},email:{icon:ja,color:"text-orange-500 bg-orange-500/10",label:"Email"}};function $Te(){const{data:e,isLoading:t}=eU(),[r,n]=y.useState(""),a=e??[],i=y.useMemo(()=>r?a.filter(c=>{const d=c;return String(d.entity_type||d.type||d.table_name||"").toLowerCase().includes(r)}):a,[a,r]),o=y.useMemo(()=>{const c={};return i.forEach(d=>{const f=d,m=String(f.timestamp||f.changed_at||f.created_at||""),h=m?new Date(m).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"Unknown Date";c[h]||(c[h]=[]),c[h].push(d)}),c},[i]);return t?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(ye,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Timeline"}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[i.length," events"]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(_C,{className:"w-3.5 h-3.5 text-muted-foreground"}),["","question","fact","decision","risk","action","document"].map(c=>s.jsx("button",{onClick:()=>n(c),className:H("px-2.5 py-1 rounded-lg text-[10px] font-medium transition-colors border",r===c?"bg-primary/10 border-primary/30 text-primary":"bg-secondary border-border text-muted-foreground hover:text-foreground"),children:c?g$[c]?.label||c:"All"},c))]}),i.length===0?s.jsxs("div",{className:"rounded-xl border border-border bg-card p-8 text-center text-muted-foreground",children:[s.jsx(ja,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/40"}),"No timeline events",r?` for "${r}"`:"","."]}):s.jsx("div",{className:"space-y-6",children:Object.entries(o).map(([c,d])=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"}),s.jsx("h2",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:c}),s.jsx("div",{className:"flex-1 h-px bg-border"})]}),s.jsx("div",{className:"space-y-2 ml-4 border-l-2 border-border pl-4",children:d.map((f,m)=>{const h=f,g=String(h.entity_type||h.type||h.table_name||"").toLowerCase(),x=g$[g]||{icon:ja,color:"text-muted-foreground bg-secondary",label:g||"Event"},w=x.icon,b=String(h.timestamp||h.changed_at||h.created_at||""),j=String(h.operation||h.action||"");return s.jsxs("div",{className:"bg-card border border-border rounded-xl p-3.5 flex items-start gap-3",children:[s.jsx("div",{className:H("w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",x.color),children:s.jsx(w,{className:"w-4 h-4"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"text-[10px] font-medium px-1.5 py-0.5 rounded bg-secondary text-muted-foreground capitalize",children:x.label}),j&&s.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-secondary text-muted-foreground capitalize",children:j})]}),s.jsx("p",{className:"text-sm text-foreground mt-1",children:String(h.description||h.content||h.title||h.filename||`${x.label} ${j||"event"}`)}),s.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[b&&s.jsx("span",{className:"text-[10px] text-muted-foreground",children:new Date(b).toLocaleTimeString()}),h.changed_by_email&&s.jsx("span",{className:"text-[10px] text-muted-foreground",children:String(h.changed_by_email)})]})]})]},m)})})]},c))})]})}const Ks=y.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:H("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));Ks.displayName="Input";function x$(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function kf(...e){return t=>{let r=!1;const n=e.map(a=>{const i=x$(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():x$(e[a],null)}}}}function Qt(...e){return y.useCallback(kf(...e),e)}var zTe=Symbol.for("react.lazy"),Uv=sb[" use ".trim().toString()];function UTe(e){return typeof e=="object"&&e!==null&&"then"in e}function XK(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===zTe&&"_payload"in e&&UTe(e._payload)}function FTe(e){const t=BTe(e),r=y.forwardRef((n,a)=>{let{children:i,...o}=n;XK(i)&&typeof Uv=="function"&&(i=Uv(i._payload));const c=y.Children.toArray(i),d=c.find(VTe);if(d){const f=d.props.children,m=c.map(h=>h===d?y.Children.count(f)>1?y.Children.only(null):y.isValidElement(f)?f.props.children:null:h);return s.jsx(t,{...o,ref:a,children:y.isValidElement(f)?y.cloneElement(f,void 0,m):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}function BTe(e){const t=y.forwardRef((r,n)=>{let{children:a,...i}=r;if(XK(a)&&typeof Uv=="function"&&(a=Uv(a._payload)),y.isValidElement(a)){const o=HTe(a),c=KTe(i,a.props);return a.type!==y.Fragment&&(c.ref=n?kf(n,o):o),y.cloneElement(a,c)}return y.Children.count(a)>1?y.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var qTe=Symbol("radix.slottable");function VTe(e){return y.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===qTe}function KTe(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...c)=>{const d=i(...c);return a(...c),d}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function HTe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var GTe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],WTe=GTe.reduce((e,t)=>{const r=FTe(`Primitive.${t}`),n=y.forwardRef((a,i)=>{const{asChild:o,...c}=a,d=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(d,{...c,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),QTe="Label",ZK=y.forwardRef((e,t)=>s.jsx(WTe.label,{...e,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));ZK.displayName=QTe;var JK=ZK;const YTe=Nt,XTe=(e,t)=>r=>YTe(e,r?.class,r?.className),ZTe=XTe("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),hc=y.forwardRef(({className:e,...t},r)=>s.jsx(JK,{ref:r,className:H(ZTe(),e),...t}));hc.displayName=JK.displayName;const eH=y.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:H("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));eH.displayName="Textarea";function y$(e,[t,r]){return Math.min(r,Math.max(t,e))}function dt(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e?.(a),r===!1||!a.defaultPrevented)return t?.(a)}}function JTe(e,t){const r=y.createContext(t),n=i=>{const{children:o,...c}=i,d=y.useMemo(()=>c,Object.values(c));return s.jsx(r.Provider,{value:d,children:o})};n.displayName=e+"Provider";function a(i){const o=y.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function ou(e,t=[]){let r=[];function n(i,o){const c=y.createContext(o),d=r.length;r=[...r,o];const f=h=>{const{scope:g,children:x,...w}=h,b=g?.[e]?.[d]||c,j=y.useMemo(()=>w,Object.values(w));return s.jsx(b.Provider,{value:j,children:x})};f.displayName=i+"Provider";function m(h,g){const x=g?.[e]?.[d]||c,w=y.useContext(x);if(w)return w;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[f,m]}const a=()=>{const i=r.map(o=>y.createContext(o));return function(c){const d=c?.[e]||i;return y.useMemo(()=>({[`__scope${e}`]:{...c,[e]:d}}),[c,d])}};return a.scopeName=e,[n,e3e(a,...t)]}function e3e(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((c,{useScope:d,scopeName:f})=>{const h=d(i)[`__scope${f}`];return{...c,...h}},{});return y.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function v$(e){const t=t3e(e),r=y.forwardRef((n,a)=>{const{children:i,...o}=n,c=y.Children.toArray(i),d=c.find(n3e);if(d){const f=d.props.children,m=c.map(h=>h===d?y.Children.count(f)>1?y.Children.only(null):y.isValidElement(f)?f.props.children:null:h);return s.jsx(t,{...o,ref:a,children:y.isValidElement(f)?y.cloneElement(f,void 0,m):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}function t3e(e){const t=y.forwardRef((r,n)=>{const{children:a,...i}=r;if(y.isValidElement(a)){const o=a3e(a),c=s3e(i,a.props);return a.type!==y.Fragment&&(c.ref=n?kf(n,o):o),y.cloneElement(a,c)}return y.Children.count(a)>1?y.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var r3e=Symbol("radix.slottable");function n3e(e){return y.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===r3e}function s3e(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...c)=>{const d=i(...c);return a(...c),d}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function a3e(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function tH(e){const t=e+"CollectionProvider",[r,n]=ou(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=b=>{const{scope:j,children:N}=b,_=En.useRef(null),S=En.useRef(new Map).current;return s.jsx(a,{scope:j,itemMap:S,collectionRef:_,children:N})};o.displayName=t;const c=e+"CollectionSlot",d=v$(c),f=En.forwardRef((b,j)=>{const{scope:N,children:_}=b,S=i(c,N),k=Qt(j,S.collectionRef);return s.jsx(d,{ref:k,children:_})});f.displayName=c;const m=e+"CollectionItemSlot",h="data-radix-collection-item",g=v$(m),x=En.forwardRef((b,j)=>{const{scope:N,children:_,...S}=b,k=En.useRef(null),A=Qt(j,k),T=i(m,N);return En.useEffect(()=>(T.itemMap.set(k,{ref:k,...S}),()=>{T.itemMap.delete(k)})),s.jsx(g,{[h]:"",ref:A,children:_})});x.displayName=m;function w(b){const j=i(e+"CollectionConsumer",b);return En.useCallback(()=>{const _=j.collectionRef.current;if(!_)return[];const S=Array.from(_.querySelectorAll(`[${h}]`));return Array.from(j.itemMap.values()).sort((T,O)=>S.indexOf(T.ref.current)-S.indexOf(O.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:o,Slot:f,ItemSlot:x},w,n]}var i3e=y.createContext(void 0);function pA(e){const t=y.useContext(i3e);return e||t||"ltr"}function o3e(e){const t=l3e(e),r=y.forwardRef((n,a)=>{const{children:i,...o}=n,c=y.Children.toArray(i),d=c.find(u3e);if(d){const f=d.props.children,m=c.map(h=>h===d?y.Children.count(f)>1?y.Children.only(null):y.isValidElement(f)?f.props.children:null:h);return s.jsx(t,{...o,ref:a,children:y.isValidElement(f)?y.cloneElement(f,void 0,m):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}function l3e(e){const t=y.forwardRef((r,n)=>{const{children:a,...i}=r;if(y.isValidElement(a)){const o=f3e(a),c=d3e(i,a.props);return a.type!==y.Fragment&&(c.ref=n?kf(n,o):o),y.cloneElement(a,c)}return y.Children.count(a)>1?y.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var c3e=Symbol("radix.slottable");function u3e(e){return y.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===c3e}function d3e(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...c)=>{const d=i(...c);return a(...c),d}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function f3e(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var m3e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],vt=m3e.reduce((e,t)=>{const r=o3e(`Primitive.${t}`),n=y.forwardRef((a,i)=>{const{asChild:o,...c}=a,d=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(d,{...c,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function h3e(e,t){e&&Zc.flushSync(()=>e.dispatchEvent(t))}function wl(e){const t=y.useRef(e);return y.useEffect(()=>{t.current=e}),y.useMemo(()=>(...r)=>t.current?.(...r),[])}function p3e(e,t=globalThis?.document){const r=wl(e);y.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var g3e="DismissableLayer",L_="dismissableLayer.update",x3e="dismissableLayer.pointerDownOutside",y3e="dismissableLayer.focusOutside",b$,rH=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gA=y.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:c,...d}=e,f=y.useContext(rH),[m,h]=y.useState(null),g=m?.ownerDocument??globalThis?.document,[,x]=y.useState({}),w=Qt(t,O=>h(O)),b=Array.from(f.layers),[j]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),N=b.indexOf(j),_=m?b.indexOf(m):-1,S=f.layersWithOutsidePointerEventsDisabled.size>0,k=_>=N,A=w3e(O=>{const P=O.target,R=[...f.branches].some(M=>M.contains(P));!k||R||(a?.(O),o?.(O),O.defaultPrevented||c?.())},g),T=j3e(O=>{const P=O.target;[...f.branches].some(M=>M.contains(P))||(i?.(O),o?.(O),O.defaultPrevented||c?.())},g);return p3e(O=>{_===f.layers.size-1&&(n?.(O),!O.defaultPrevented&&c&&(O.preventDefault(),c()))},g),y.useEffect(()=>{if(m)return r&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(b$=g.body.style.pointerEvents,g.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(m)),f.layers.add(m),w$(),()=>{r&&f.layersWithOutsidePointerEventsDisabled.size===1&&(g.body.style.pointerEvents=b$)}},[m,g,r,f]),y.useEffect(()=>()=>{m&&(f.layers.delete(m),f.layersWithOutsidePointerEventsDisabled.delete(m),w$())},[m,f]),y.useEffect(()=>{const O=()=>x({});return document.addEventListener(L_,O),()=>document.removeEventListener(L_,O)},[]),s.jsx(vt.div,{...d,ref:w,style:{pointerEvents:S?k?"auto":"none":void 0,...e.style},onFocusCapture:dt(e.onFocusCapture,T.onFocusCapture),onBlurCapture:dt(e.onBlurCapture,T.onBlurCapture),onPointerDownCapture:dt(e.onPointerDownCapture,A.onPointerDownCapture)})});gA.displayName=g3e;var v3e="DismissableLayerBranch",b3e=y.forwardRef((e,t)=>{const r=y.useContext(rH),n=y.useRef(null),a=Qt(t,n);return y.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(vt.div,{...e,ref:a})});b3e.displayName=v3e;function w3e(e,t=globalThis?.document){const r=wl(e),n=y.useRef(!1),a=y.useRef(()=>{});return y.useEffect(()=>{const i=c=>{if(c.target&&!n.current){let d=function(){nH(x3e,r,f,{discrete:!0})};const f={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=d,t.addEventListener("click",a.current,{once:!0})):d()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function j3e(e,t=globalThis?.document){const r=wl(e),n=y.useRef(!1);return y.useEffect(()=>{const a=i=>{i.target&&!n.current&&nH(y3e,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function w$(){const e=new CustomEvent(L_);document.dispatchEvent(e)}function nH(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?h3e(a,i):a.dispatchEvent(i)}var bS=0;function sH(){y.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??j$()),document.body.insertAdjacentElement("beforeend",e[1]??j$()),bS++,()=>{bS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),bS--}},[])}function j$(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var wS="focusScope.autoFocusOnMount",jS="focusScope.autoFocusOnUnmount",N$={bubbles:!1,cancelable:!0},N3e="FocusScope",xA=y.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[c,d]=y.useState(null),f=wl(a),m=wl(i),h=y.useRef(null),g=Qt(t,b=>d(b)),x=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(n){let b=function(S){if(x.paused||!c)return;const k=S.target;c.contains(k)?h.current=k:sl(h.current,{select:!0})},j=function(S){if(x.paused||!c)return;const k=S.relatedTarget;k!==null&&(c.contains(k)||sl(h.current,{select:!0}))},N=function(S){if(document.activeElement===document.body)for(const A of S)A.removedNodes.length>0&&sl(c)};document.addEventListener("focusin",b),document.addEventListener("focusout",j);const _=new MutationObserver(N);return c&&_.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",j),_.disconnect()}}},[n,c,x.paused]),y.useEffect(()=>{if(c){_$.add(x);const b=document.activeElement;if(!c.contains(b)){const N=new CustomEvent(wS,N$);c.addEventListener(wS,f),c.dispatchEvent(N),N.defaultPrevented||(S3e(A3e(aH(c)),{select:!0}),document.activeElement===b&&sl(c))}return()=>{c.removeEventListener(wS,f),setTimeout(()=>{const N=new CustomEvent(jS,N$);c.addEventListener(jS,m),c.dispatchEvent(N),N.defaultPrevented||sl(b??document.body,{select:!0}),c.removeEventListener(jS,m),_$.remove(x)},0)}}},[c,f,m,x]);const w=y.useCallback(b=>{if(!r&&!n||x.paused)return;const j=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,N=document.activeElement;if(j&&N){const _=b.currentTarget,[S,k]=_3e(_);S&&k?!b.shiftKey&&N===k?(b.preventDefault(),r&&sl(S,{select:!0})):b.shiftKey&&N===S&&(b.preventDefault(),r&&sl(k,{select:!0})):N===_&&b.preventDefault()}},[r,n,x.paused]);return s.jsx(vt.div,{tabIndex:-1,...o,ref:g,onKeyDown:w})});xA.displayName=N3e;function S3e(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(sl(n,{select:t}),document.activeElement!==r)return}function _3e(e){const t=aH(e),r=S$(t,e),n=S$(t.reverse(),e);return[r,n]}function aH(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function S$(e,t){for(const r of e)if(!C3e(r,{upTo:t}))return r}function C3e(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function k3e(e){return e instanceof HTMLInputElement&&"select"in e}function sl(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&k3e(e)&&t&&e.select()}}var _$=E3e();function E3e(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=C$(e,t),e.unshift(t)},remove(t){e=C$(e,t),e[0]?.resume()}}}function C$(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function A3e(e){return e.filter(t=>t.tagName!=="A")}var Nn=globalThis?.document?y.useLayoutEffect:()=>{},T3e=sb[" useId ".trim().toString()]||(()=>{}),O3e=0;function gl(e){const[t,r]=y.useState(T3e());return Nn(()=>{r(n=>n??String(O3e++))},[e]),t?`radix-${t}`:""}const P3e=["top","right","bottom","left"],jl=Math.min,is=Math.max,Fv=Math.round,Fx=Math.floor,ei=e=>({x:e,y:e}),M3e={left:"right",right:"left",bottom:"top",top:"bottom"},R3e={start:"end",end:"start"};function $_(e,t,r){return is(e,jl(t,r))}function oo(e,t){return typeof e=="function"?e(t):e}function lo(e){return e.split("-")[0]}function Ef(e){return e.split("-")[1]}function yA(e){return e==="x"?"y":"x"}function vA(e){return e==="y"?"height":"width"}const D3e=new Set(["top","bottom"]);function Qa(e){return D3e.has(lo(e))?"y":"x"}function bA(e){return yA(Qa(e))}function I3e(e,t,r){r===void 0&&(r=!1);const n=Ef(e),a=bA(e),i=vA(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Bv(o)),[o,Bv(o)]}function L3e(e){const t=Bv(e);return[z_(e),t,z_(t)]}function z_(e){return e.replace(/start|end/g,t=>R3e[t])}const k$=["left","right"],E$=["right","left"],$3e=["top","bottom"],z3e=["bottom","top"];function U3e(e,t,r){switch(e){case"top":case"bottom":return r?t?E$:k$:t?k$:E$;case"left":case"right":return t?$3e:z3e;default:return[]}}function F3e(e,t,r,n){const a=Ef(e);let i=U3e(lo(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(z_)))),i}function Bv(e){return e.replace(/left|right|bottom|top/g,t=>M3e[t])}function B3e(e){return{top:0,right:0,bottom:0,left:0,...e}}function iH(e){return typeof e!="number"?B3e(e):{top:e,right:e,bottom:e,left:e}}function qv(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function A$(e,t,r){let{reference:n,floating:a}=e;const i=Qa(t),o=bA(t),c=vA(o),d=lo(t),f=i==="y",m=n.x+n.width/2-a.width/2,h=n.y+n.height/2-a.height/2,g=n[c]/2-a[c]/2;let x;switch(d){case"top":x={x:m,y:n.y-a.height};break;case"bottom":x={x:m,y:n.y+n.height};break;case"right":x={x:n.x+n.width,y:h};break;case"left":x={x:n.x-a.width,y:h};break;default:x={x:n.x,y:n.y}}switch(Ef(t)){case"start":x[o]-=g*(r&&f?-1:1);break;case"end":x[o]+=g*(r&&f?-1:1);break}return x}async function q3e(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:c,strategy:d}=e,{boundary:f="clippingAncestors",rootBoundary:m="viewport",elementContext:h="floating",altBoundary:g=!1,padding:x=0}=oo(t,e),w=iH(x),j=c[g?h==="floating"?"reference":"floating":h],N=qv(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(j)))==null||r?j:j.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(c.floating)),boundary:f,rootBoundary:m,strategy:d})),_=h==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c.floating)),k=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},A=qv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:_,offsetParent:S,strategy:d}):_);return{top:(N.top-A.top+w.top)/k.y,bottom:(A.bottom-N.bottom+w.bottom)/k.y,left:(N.left-A.left+w.left)/k.x,right:(A.right-N.right+w.right)/k.x}}const V3e=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,c=i.filter(Boolean),d=await(o.isRTL==null?void 0:o.isRTL(t));let f=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:m,y:h}=A$(f,n,d),g=n,x={},w=0;for(let j=0;j<c.length;j++){var b;const{name:N,fn:_}=c[j],{x:S,y:k,data:A,reset:T}=await _({x:m,y:h,initialPlacement:n,placement:g,strategy:a,middlewareData:x,rects:f,platform:{...o,detectOverflow:(b=o.detectOverflow)!=null?b:q3e},elements:{reference:e,floating:t}});m=S??m,h=k??h,x={...x,[N]:{...x[N],...A}},T&&w<=50&&(w++,typeof T=="object"&&(T.placement&&(g=T.placement),T.rects&&(f=T.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):T.rects),{x:m,y:h}=A$(f,g,d)),j=-1)}return{x:m,y:h,placement:g,strategy:a,middlewareData:x}},K3e=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:o,elements:c,middlewareData:d}=t,{element:f,padding:m=0}=oo(e,t)||{};if(f==null)return{};const h=iH(m),g={x:r,y:n},x=bA(a),w=vA(x),b=await o.getDimensions(f),j=x==="y",N=j?"top":"left",_=j?"bottom":"right",S=j?"clientHeight":"clientWidth",k=i.reference[w]+i.reference[x]-g[x]-i.floating[w],A=g[x]-i.reference[x],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(f));let O=T?T[S]:0;(!O||!await(o.isElement==null?void 0:o.isElement(T)))&&(O=c.floating[S]||i.floating[w]);const P=k/2-A/2,R=O/2-b[w]/2-1,M=jl(h[N],R),D=jl(h[_],R),z=M,Y=O-b[w]-D,I=O/2-b[w]/2+P,K=$_(z,I,Y),U=!d.arrow&&Ef(a)!=null&&I!==K&&i.reference[w]/2-(I<z?M:D)-b[w]/2<0,L=U?I<z?I-z:I-Y:0;return{[x]:g[x]+L,data:{[x]:K,centerOffset:I-K-L,...U&&{alignmentOffset:L}},reset:U}}}),H3e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:c,platform:d,elements:f}=t,{mainAxis:m=!0,crossAxis:h=!0,fallbackPlacements:g,fallbackStrategy:x="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:b=!0,...j}=oo(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const N=lo(a),_=Qa(c),S=lo(c)===c,k=await(d.isRTL==null?void 0:d.isRTL(f.floating)),A=g||(S||!b?[Bv(c)]:L3e(c)),T=w!=="none";!g&&T&&A.push(...F3e(c,b,w,k));const O=[c,...A],P=await d.detectOverflow(t,j),R=[];let M=((n=i.flip)==null?void 0:n.overflows)||[];if(m&&R.push(P[N]),h){const I=I3e(a,o,k);R.push(P[I[0]],P[I[1]])}if(M=[...M,{placement:a,overflows:R}],!R.every(I=>I<=0)){var D,z;const I=(((D=i.flip)==null?void 0:D.index)||0)+1,K=O[I];if(K&&(!(h==="alignment"?_!==Qa(K):!1)||M.every(F=>Qa(F.placement)===_?F.overflows[0]>0:!0)))return{data:{index:I,overflows:M},reset:{placement:K}};let U=(z=M.filter(L=>L.overflows[0]<=0).sort((L,F)=>L.overflows[1]-F.overflows[1])[0])==null?void 0:z.placement;if(!U)switch(x){case"bestFit":{var Y;const L=(Y=M.filter(F=>{if(T){const q=Qa(F.placement);return q===_||q==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(q=>q>0).reduce((q,Z)=>q+Z,0)]).sort((F,q)=>F[1]-q[1])[0])==null?void 0:Y[0];L&&(U=L);break}case"initialPlacement":U=c;break}if(a!==U)return{reset:{placement:U}}}return{}}}};function T$(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function O$(e){return P3e.some(t=>e[t]>=0)}const G3e=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r,platform:n}=t,{strategy:a="referenceHidden",...i}=oo(e,t);switch(a){case"referenceHidden":{const o=await n.detectOverflow(t,{...i,elementContext:"reference"}),c=T$(o,r.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:O$(c)}}}case"escaped":{const o=await n.detectOverflow(t,{...i,altBoundary:!0}),c=T$(o,r.floating);return{data:{escapedOffsets:c,escaped:O$(c)}}}default:return{}}}}},oH=new Set(["left","top"]);async function W3e(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=lo(r),c=Ef(r),d=Qa(r)==="y",f=oH.has(o)?-1:1,m=i&&d?-1:1,h=oo(t,e);let{mainAxis:g,crossAxis:x,alignmentAxis:w}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return c&&typeof w=="number"&&(x=c==="end"?w*-1:w),d?{x:x*m,y:g*f}:{x:g*f,y:x*m}}const Q3e=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:o,middlewareData:c}=t,d=await W3e(t,e);return o===((r=c.offset)==null?void 0:r.placement)&&(n=c.arrow)!=null&&n.alignmentOffset?{}:{x:a+d.x,y:i+d.y,data:{...d,placement:o}}}}},Y3e=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a,platform:i}=t,{mainAxis:o=!0,crossAxis:c=!1,limiter:d={fn:N=>{let{x:_,y:S}=N;return{x:_,y:S}}},...f}=oo(e,t),m={x:r,y:n},h=await i.detectOverflow(t,f),g=Qa(lo(a)),x=yA(g);let w=m[x],b=m[g];if(o){const N=x==="y"?"top":"left",_=x==="y"?"bottom":"right",S=w+h[N],k=w-h[_];w=$_(S,w,k)}if(c){const N=g==="y"?"top":"left",_=g==="y"?"bottom":"right",S=b+h[N],k=b-h[_];b=$_(S,b,k)}const j=d.fn({...t,[x]:w,[g]:b});return{...j,data:{x:j.x-r,y:j.y-n,enabled:{[x]:o,[g]:c}}}}}},X3e=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:c=0,mainAxis:d=!0,crossAxis:f=!0}=oo(e,t),m={x:r,y:n},h=Qa(a),g=yA(h);let x=m[g],w=m[h];const b=oo(c,t),j=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(d){const S=g==="y"?"height":"width",k=i.reference[g]-i.floating[S]+j.mainAxis,A=i.reference[g]+i.reference[S]-j.mainAxis;x<k?x=k:x>A&&(x=A)}if(f){var N,_;const S=g==="y"?"width":"height",k=oH.has(lo(a)),A=i.reference[h]-i.floating[S]+(k&&((N=o.offset)==null?void 0:N[h])||0)+(k?0:j.crossAxis),T=i.reference[h]+i.reference[S]+(k?0:((_=o.offset)==null?void 0:_[h])||0)-(k?j.crossAxis:0);w<A?w=A:w>T&&(w=T)}return{[g]:x,[h]:w}}}},Z3e=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:o,elements:c}=t,{apply:d=()=>{},...f}=oo(e,t),m=await o.detectOverflow(t,f),h=lo(a),g=Ef(a),x=Qa(a)==="y",{width:w,height:b}=i.floating;let j,N;h==="top"||h==="bottom"?(j=h,N=g===(await(o.isRTL==null?void 0:o.isRTL(c.floating))?"start":"end")?"left":"right"):(N=h,j=g==="end"?"top":"bottom");const _=b-m.top-m.bottom,S=w-m.left-m.right,k=jl(b-m[j],_),A=jl(w-m[N],S),T=!t.middlewareData.shift;let O=k,P=A;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(P=S),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(O=_),T&&!g){const M=is(m.left,0),D=is(m.right,0),z=is(m.top,0),Y=is(m.bottom,0);x?P=w-2*(M!==0||D!==0?M+D:is(m.left,m.right)):O=b-2*(z!==0||Y!==0?z+Y:is(m.top,m.bottom))}await d({...t,availableWidth:P,availableHeight:O});const R=await o.getDimensions(c.floating);return w!==R.width||b!==R.height?{reset:{rects:!0}}:{}}}};function g0(){return typeof window<"u"}function Af(e){return lH(e)?(e.nodeName||"").toLowerCase():"#document"}function ps(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function di(e){var t;return(t=(lH(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function lH(e){return g0()?e instanceof Node||e instanceof ps(e).Node:!1}function Ca(e){return g0()?e instanceof Element||e instanceof ps(e).Element:!1}function li(e){return g0()?e instanceof HTMLElement||e instanceof ps(e).HTMLElement:!1}function P$(e){return!g0()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ps(e).ShadowRoot}const J3e=new Set(["inline","contents"]);function Ap(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=ka(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!J3e.has(a)}const eOe=new Set(["table","td","th"]);function tOe(e){return eOe.has(Af(e))}const rOe=[":popover-open",":modal"];function x0(e){return rOe.some(t=>{try{return e.matches(t)}catch{return!1}})}const nOe=["transform","translate","scale","rotate","perspective"],sOe=["transform","translate","scale","rotate","perspective","filter"],aOe=["paint","layout","strict","content"];function wA(e){const t=jA(),r=Ca(e)?ka(e):e;return nOe.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||sOe.some(n=>(r.willChange||"").includes(n))||aOe.some(n=>(r.contain||"").includes(n))}function iOe(e){let t=Nl(e);for(;li(t)&&!Hd(t);){if(wA(t))return t;if(x0(t))return null;t=Nl(t)}return null}function jA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const oOe=new Set(["html","body","#document"]);function Hd(e){return oOe.has(Af(e))}function ka(e){return ps(e).getComputedStyle(e)}function y0(e){return Ca(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Nl(e){if(Af(e)==="html")return e;const t=e.assignedSlot||e.parentNode||P$(e)&&e.host||di(e);return P$(t)?t.host:t}function cH(e){const t=Nl(e);return Hd(t)?e.ownerDocument?e.ownerDocument.body:e.body:li(t)&&Ap(t)?t:cH(t)}function Vh(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=cH(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=ps(a);if(i){const c=U_(o);return t.concat(o,o.visualViewport||[],Ap(a)?a:[],c&&r?Vh(c):[])}return t.concat(a,Vh(a,[],r))}function U_(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function uH(e){const t=ka(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=li(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,c=Fv(r)!==i||Fv(n)!==o;return c&&(r=i,n=o),{width:r,height:n,$:c}}function NA(e){return Ca(e)?e:e.contextElement}function Pd(e){const t=NA(e);if(!li(t))return ei(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=uH(t);let o=(i?Fv(r.width):r.width)/n,c=(i?Fv(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const lOe=ei(0);function dH(e){const t=ps(e);return!jA()||!t.visualViewport?lOe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function cOe(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==ps(e)?!1:t}function Kc(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=NA(e);let o=ei(1);t&&(n?Ca(n)&&(o=Pd(n)):o=Pd(e));const c=cOe(i,r,n)?dH(i):ei(0);let d=(a.left+c.x)/o.x,f=(a.top+c.y)/o.y,m=a.width/o.x,h=a.height/o.y;if(i){const g=ps(i),x=n&&Ca(n)?ps(n):n;let w=g,b=U_(w);for(;b&&n&&x!==w;){const j=Pd(b),N=b.getBoundingClientRect(),_=ka(b),S=N.left+(b.clientLeft+parseFloat(_.paddingLeft))*j.x,k=N.top+(b.clientTop+parseFloat(_.paddingTop))*j.y;d*=j.x,f*=j.y,m*=j.x,h*=j.y,d+=S,f+=k,w=ps(b),b=U_(w)}}return qv({width:m,height:h,x:d,y:f})}function v0(e,t){const r=y0(e).scrollLeft;return t?t.left+r:Kc(di(e)).left+r}function fH(e,t){const r=e.getBoundingClientRect(),n=r.left+t.scrollLeft-v0(e,r),a=r.top+t.scrollTop;return{x:n,y:a}}function uOe(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=di(n),c=t?x0(t.floating):!1;if(n===o||c&&i)return r;let d={scrollLeft:0,scrollTop:0},f=ei(1);const m=ei(0),h=li(n);if((h||!h&&!i)&&((Af(n)!=="body"||Ap(o))&&(d=y0(n)),li(n))){const x=Kc(n);f=Pd(n),m.x=x.x+n.clientLeft,m.y=x.y+n.clientTop}const g=o&&!h&&!i?fH(o,d):ei(0);return{width:r.width*f.x,height:r.height*f.y,x:r.x*f.x-d.scrollLeft*f.x+m.x+g.x,y:r.y*f.y-d.scrollTop*f.y+m.y+g.y}}function dOe(e){return Array.from(e.getClientRects())}function fOe(e){const t=di(e),r=y0(e),n=e.ownerDocument.body,a=is(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=is(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+v0(e);const c=-r.scrollTop;return ka(n).direction==="rtl"&&(o+=is(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:c}}const M$=25;function mOe(e,t){const r=ps(e),n=di(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,c=0,d=0;if(a){i=a.width,o=a.height;const m=jA();(!m||m&&t==="fixed")&&(c=a.offsetLeft,d=a.offsetTop)}const f=v0(n);if(f<=0){const m=n.ownerDocument,h=m.body,g=getComputedStyle(h),x=m.compatMode==="CSS1Compat"&&parseFloat(g.marginLeft)+parseFloat(g.marginRight)||0,w=Math.abs(n.clientWidth-h.clientWidth-x);w<=M$&&(i-=w)}else f<=M$&&(i+=f);return{width:i,height:o,x:c,y:d}}const hOe=new Set(["absolute","fixed"]);function pOe(e,t){const r=Kc(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=li(e)?Pd(e):ei(1),o=e.clientWidth*i.x,c=e.clientHeight*i.y,d=a*i.x,f=n*i.y;return{width:o,height:c,x:d,y:f}}function R$(e,t,r){let n;if(t==="viewport")n=mOe(e,r);else if(t==="document")n=fOe(di(e));else if(Ca(t))n=pOe(t,r);else{const a=dH(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return qv(n)}function mH(e,t){const r=Nl(e);return r===t||!Ca(r)||Hd(r)?!1:ka(r).position==="fixed"||mH(r,t)}function gOe(e,t){const r=t.get(e);if(r)return r;let n=Vh(e,[],!1).filter(c=>Ca(c)&&Af(c)!=="body"),a=null;const i=ka(e).position==="fixed";let o=i?Nl(e):e;for(;Ca(o)&&!Hd(o);){const c=ka(o),d=wA(o);!d&&c.position==="fixed"&&(a=null),(i?!d&&!a:!d&&c.position==="static"&&!!a&&hOe.has(a.position)||Ap(o)&&!d&&mH(e,o))?n=n.filter(m=>m!==o):a=c,o=Nl(o)}return t.set(e,n),n}function xOe(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?x0(t)?[]:gOe(t,this._c):[].concat(r),n],c=o[0],d=o.reduce((f,m)=>{const h=R$(t,m,a);return f.top=is(h.top,f.top),f.right=jl(h.right,f.right),f.bottom=jl(h.bottom,f.bottom),f.left=is(h.left,f.left),f},R$(t,c,a));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function yOe(e){const{width:t,height:r}=uH(e);return{width:t,height:r}}function vOe(e,t,r){const n=li(t),a=di(t),i=r==="fixed",o=Kc(e,!0,i,t);let c={scrollLeft:0,scrollTop:0};const d=ei(0);function f(){d.x=v0(a)}if(n||!n&&!i)if((Af(t)!=="body"||Ap(a))&&(c=y0(t)),n){const x=Kc(t,!0,i,t);d.x=x.x+t.clientLeft,d.y=x.y+t.clientTop}else a&&f();i&&!n&&a&&f();const m=a&&!n&&!i?fH(a,c):ei(0),h=o.left+c.scrollLeft-d.x-m.x,g=o.top+c.scrollTop-d.y-m.y;return{x:h,y:g,width:o.width,height:o.height}}function NS(e){return ka(e).position==="static"}function D$(e,t){if(!li(e)||ka(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return di(e)===r&&(r=r.ownerDocument.body),r}function hH(e,t){const r=ps(e);if(x0(e))return r;if(!li(e)){let a=Nl(e);for(;a&&!Hd(a);){if(Ca(a)&&!NS(a))return a;a=Nl(a)}return r}let n=D$(e,t);for(;n&&tOe(n)&&NS(n);)n=D$(n,t);return n&&Hd(n)&&NS(n)&&!wA(n)?r:n||iOe(e)||r}const bOe=async function(e){const t=this.getOffsetParent||hH,r=this.getDimensions,n=await r(e.floating);return{reference:vOe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function wOe(e){return ka(e).direction==="rtl"}const jOe={convertOffsetParentRelativeRectToViewportRelativeRect:uOe,getDocumentElement:di,getClippingRect:xOe,getOffsetParent:hH,getElementRects:bOe,getClientRects:dOe,getDimensions:yOe,getScale:Pd,isElement:Ca,isRTL:wOe};function pH(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function NOe(e,t){let r=null,n;const a=di(e);function i(){var c;clearTimeout(n),(c=r)==null||c.disconnect(),r=null}function o(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),i();const f=e.getBoundingClientRect(),{left:m,top:h,width:g,height:x}=f;if(c||t(),!g||!x)return;const w=Fx(h),b=Fx(a.clientWidth-(m+g)),j=Fx(a.clientHeight-(h+x)),N=Fx(m),S={rootMargin:-w+"px "+-b+"px "+-j+"px "+-N+"px",threshold:is(0,jl(1,d))||1};let k=!0;function A(T){const O=T[0].intersectionRatio;if(O!==d){if(!k)return o();O?o(!1,O):n=setTimeout(()=>{o(!1,1e-7)},1e3)}O===1&&!pH(f,e.getBoundingClientRect())&&o(),k=!1}try{r=new IntersectionObserver(A,{...S,root:a.ownerDocument})}catch{r=new IntersectionObserver(A,S)}r.observe(e)}return o(!0),i}function SOe(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=n,f=NA(e),m=a||i?[...f?Vh(f):[],...Vh(t)]:[];m.forEach(N=>{a&&N.addEventListener("scroll",r,{passive:!0}),i&&N.addEventListener("resize",r)});const h=f&&c?NOe(f,r):null;let g=-1,x=null;o&&(x=new ResizeObserver(N=>{let[_]=N;_&&_.target===f&&x&&(x.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var S;(S=x)==null||S.observe(t)})),r()}),f&&!d&&x.observe(f),x.observe(t));let w,b=d?Kc(e):null;d&&j();function j(){const N=Kc(e);b&&!pH(b,N)&&r(),b=N,w=requestAnimationFrame(j)}return r(),()=>{var N;m.forEach(_=>{a&&_.removeEventListener("scroll",r),i&&_.removeEventListener("resize",r)}),h?.(),(N=x)==null||N.disconnect(),x=null,d&&cancelAnimationFrame(w)}}const _Oe=Q3e,COe=Y3e,kOe=H3e,EOe=Z3e,AOe=G3e,I$=K3e,TOe=X3e,OOe=(e,t,r)=>{const n=new Map,a={platform:jOe,...r},i={...a.platform,_c:n};return V3e(e,t,{...a,platform:i})};var POe=typeof document<"u",MOe=function(){},vy=POe?y.useLayoutEffect:MOe;function Vv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Vv(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!Vv(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function gH(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function L$(e,t){const r=gH(e);return Math.round(t*r)/r}function SS(e){const t=y.useRef(e);return vy(()=>{t.current=e}),t}function ROe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:c=!0,whileElementsMounted:d,open:f}=e,[m,h]=y.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[g,x]=y.useState(n);Vv(g,n)||x(n);const[w,b]=y.useState(null),[j,N]=y.useState(null),_=y.useCallback(F=>{F!==T.current&&(T.current=F,b(F))},[]),S=y.useCallback(F=>{F!==O.current&&(O.current=F,N(F))},[]),k=i||w,A=o||j,T=y.useRef(null),O=y.useRef(null),P=y.useRef(m),R=d!=null,M=SS(d),D=SS(a),z=SS(f),Y=y.useCallback(()=>{if(!T.current||!O.current)return;const F={placement:t,strategy:r,middleware:g};D.current&&(F.platform=D.current),OOe(T.current,O.current,F).then(q=>{const Z={...q,isPositioned:z.current!==!1};I.current&&!Vv(P.current,Z)&&(P.current=Z,Zc.flushSync(()=>{h(Z)}))})},[g,t,r,D,z]);vy(()=>{f===!1&&P.current.isPositioned&&(P.current.isPositioned=!1,h(F=>({...F,isPositioned:!1})))},[f]);const I=y.useRef(!1);vy(()=>(I.current=!0,()=>{I.current=!1}),[]),vy(()=>{if(k&&(T.current=k),A&&(O.current=A),k&&A){if(M.current)return M.current(k,A,Y);Y()}},[k,A,Y,M,R]);const K=y.useMemo(()=>({reference:T,floating:O,setReference:_,setFloating:S}),[_,S]),U=y.useMemo(()=>({reference:k,floating:A}),[k,A]),L=y.useMemo(()=>{const F={position:r,left:0,top:0};if(!U.floating)return F;const q=L$(U.floating,m.x),Z=L$(U.floating,m.y);return c?{...F,transform:"translate("+q+"px, "+Z+"px)",...gH(U.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:q,top:Z}},[r,c,U.floating,m.x,m.y]);return y.useMemo(()=>({...m,update:Y,refs:K,elements:U,floatingStyles:L}),[m,Y,K,U,L])}const DOe=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?I$({element:n.current,padding:a}).fn(r):{}:n?I$({element:n,padding:a}).fn(r):{}}}},IOe=(e,t)=>({..._Oe(e),options:[e,t]}),LOe=(e,t)=>({...COe(e),options:[e,t]}),$Oe=(e,t)=>({...TOe(e),options:[e,t]}),zOe=(e,t)=>({...kOe(e),options:[e,t]}),UOe=(e,t)=>({...EOe(e),options:[e,t]}),FOe=(e,t)=>({...AOe(e),options:[e,t]}),BOe=(e,t)=>({...DOe(e),options:[e,t]});var qOe="Arrow",xH=y.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return s.jsx(vt.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});xH.displayName=qOe;var VOe=xH;function KOe(e){const[t,r]=y.useState(void 0);return Nn(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,c;if("borderBoxSize"in i){const d=i.borderBoxSize,f=Array.isArray(d)?d[0]:d;o=f.inlineSize,c=f.blockSize}else o=e.offsetWidth,c=e.offsetHeight;r({width:o,height:c})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var SA="Popper",[yH,vH]=ou(SA),[HOe,bH]=yH(SA),wH=e=>{const{__scopePopper:t,children:r}=e,[n,a]=y.useState(null);return s.jsx(HOe,{scope:t,anchor:n,onAnchorChange:a,children:r})};wH.displayName=SA;var jH="PopperAnchor",NH=y.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=bH(jH,r),o=y.useRef(null),c=Qt(t,o),d=y.useRef(null);return y.useEffect(()=>{const f=d.current;d.current=n?.current||o.current,f!==d.current&&i.onAnchorChange(d.current)}),n?null:s.jsx(vt.div,{...a,ref:c})});NH.displayName=jH;var _A="PopperContent",[GOe,WOe]=yH(_A),SH=y.forwardRef((e,t)=>{const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:f=[],collisionPadding:m=0,sticky:h="partial",hideWhenDetached:g=!1,updatePositionStrategy:x="optimized",onPlaced:w,...b}=e,j=bH(_A,r),[N,_]=y.useState(null),S=Qt(t,ne=>_(ne)),[k,A]=y.useState(null),T=KOe(k),O=T?.width??0,P=T?.height??0,R=n+(i!=="center"?"-"+i:""),M=typeof m=="number"?m:{top:0,right:0,bottom:0,left:0,...m},D=Array.isArray(f)?f:[f],z=D.length>0,Y={padding:M,boundary:D.filter(YOe),altBoundary:z},{refs:I,floatingStyles:K,placement:U,isPositioned:L,middlewareData:F}=ROe({strategy:"fixed",placement:R,whileElementsMounted:(...ne)=>SOe(...ne,{animationFrame:x==="always"}),elements:{reference:j.anchor},middleware:[IOe({mainAxis:a+P,alignmentAxis:o}),d&&LOe({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?$Oe():void 0,...Y}),d&&zOe({...Y}),UOe({...Y,apply:({elements:ne,rects:oe,availableWidth:Q,availableHeight:pe})=>{const{width:he,height:te}=oe.reference,we=ne.floating.style;we.setProperty("--radix-popper-available-width",`${Q}px`),we.setProperty("--radix-popper-available-height",`${pe}px`),we.setProperty("--radix-popper-anchor-width",`${he}px`),we.setProperty("--radix-popper-anchor-height",`${te}px`)}}),k&&BOe({element:k,padding:c}),XOe({arrowWidth:O,arrowHeight:P}),g&&FOe({strategy:"referenceHidden",...Y})]}),[q,Z]=kH(U),B=wl(w);Nn(()=>{L&&B?.()},[L,B]);const V=F.arrow?.x,ee=F.arrow?.y,ae=F.arrow?.centerOffset!==0,[J,se]=y.useState();return Nn(()=>{N&&se(window.getComputedStyle(N).zIndex)},[N]),s.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:L?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[F.transformOrigin?.x,F.transformOrigin?.y].join(" "),...F.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(GOe,{scope:r,placedSide:q,onArrowChange:A,arrowX:V,arrowY:ee,shouldHideArrow:ae,children:s.jsx(vt.div,{"data-side":q,"data-align":Z,...b,ref:S,style:{...b.style,animation:L?void 0:"none"}})})})});SH.displayName=_A;var _H="PopperArrow",QOe={top:"bottom",right:"left",bottom:"top",left:"right"},CH=y.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=WOe(_H,n),o=QOe[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(VOe,{...a,ref:r,style:{...a.style,display:"block"}})})});CH.displayName=_H;function YOe(e){return e!==null}var XOe=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:n,middlewareData:a}=t,o=a.arrow?.centerOffset!==0,c=o?0:e.arrowWidth,d=o?0:e.arrowHeight,[f,m]=kH(r),h={start:"0%",center:"50%",end:"100%"}[m],g=(a.arrow?.x??0)+c/2,x=(a.arrow?.y??0)+d/2;let w="",b="";return f==="bottom"?(w=o?h:`${g}px`,b=`${-d}px`):f==="top"?(w=o?h:`${g}px`,b=`${n.floating.height+d}px`):f==="right"?(w=`${-d}px`,b=o?h:`${x}px`):f==="left"&&(w=`${n.floating.width+d}px`,b=o?h:`${x}px`),{data:{x:w,y:b}}}});function kH(e){const[t,r="center"]=e.split("-");return[t,r]}var ZOe=wH,JOe=NH,ePe=SH,tPe=CH,rPe="Portal",CA=y.forwardRef((e,t)=>{const{container:r,...n}=e,[a,i]=y.useState(!1);Nn(()=>i(!0),[]);const o=r||a&&globalThis?.document?.body;return o?iJ.createPortal(s.jsx(vt.div,{...n,ref:t}),o):null});CA.displayName=rPe;function nPe(e){const t=sPe(e),r=y.forwardRef((n,a)=>{const{children:i,...o}=n,c=y.Children.toArray(i),d=c.find(iPe);if(d){const f=d.props.children,m=c.map(h=>h===d?y.Children.count(f)>1?y.Children.only(null):y.isValidElement(f)?f.props.children:null:h);return s.jsx(t,{...o,ref:a,children:y.isValidElement(f)?y.cloneElement(f,void 0,m):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}function sPe(e){const t=y.forwardRef((r,n)=>{const{children:a,...i}=r;if(y.isValidElement(a)){const o=lPe(a),c=oPe(i,a.props);return a.type!==y.Fragment&&(c.ref=n?kf(n,o):o),y.cloneElement(a,c)}return y.Children.count(a)>1?y.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var aPe=Symbol("radix.slottable");function iPe(e){return y.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===aPe}function oPe(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...c)=>{const d=i(...c);return a(...c),d}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function lPe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var cPe=sb[" useInsertionEffect ".trim().toString()]||Nn;function Kh({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,i,o]=uPe({defaultProp:t,onChange:r}),c=e!==void 0,d=c?e:a;{const m=y.useRef(e!==void 0);y.useEffect(()=>{const h=m.current;h!==c&&console.warn(`${n} is changing from ${h?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=c},[c,n])}const f=y.useCallback(m=>{if(c){const h=dPe(m)?m(e):m;h!==e&&o.current?.(h)}else i(m)},[c,e,i,o]);return[d,f]}function uPe({defaultProp:e,onChange:t}){const[r,n]=y.useState(e),a=y.useRef(r),i=y.useRef(t);return cPe(()=>{i.current=t},[t]),y.useEffect(()=>{a.current!==r&&(i.current?.(r),a.current=r)},[r,a]),[r,n,i]}function dPe(e){return typeof e=="function"}function fPe(e){const t=y.useRef({value:e,previous:e});return y.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var EH=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),mPe="VisuallyHidden",hPe=y.forwardRef((e,t)=>s.jsx(vt.span,{...e,ref:t,style:{...EH,...e.style}}));hPe.displayName=mPe;var pPe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},id=new WeakMap,Bx=new WeakMap,qx={},_S=0,AH=function(e){return e&&(e.host||AH(e.parentNode))},gPe=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=AH(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},xPe=function(e,t,r,n){var a=gPe(t,Array.isArray(e)?e:[e]);qx[r]||(qx[r]=new WeakMap);var i=qx[r],o=[],c=new Set,d=new Set(a),f=function(h){!h||c.has(h)||(c.add(h),f(h.parentNode))};a.forEach(f);var m=function(h){!h||d.has(h)||Array.prototype.forEach.call(h.children,function(g){if(c.has(g))m(g);else try{var x=g.getAttribute(n),w=x!==null&&x!=="false",b=(id.get(g)||0)+1,j=(i.get(g)||0)+1;id.set(g,b),i.set(g,j),o.push(g),b===1&&w&&Bx.set(g,!0),j===1&&g.setAttribute(r,"true"),w||g.setAttribute(n,"true")}catch(N){console.error("aria-hidden: cannot operate on ",g,N)}})};return m(t),c.clear(),_S++,function(){o.forEach(function(h){var g=id.get(h)-1,x=i.get(h)-1;id.set(h,g),i.set(h,x),g||(Bx.has(h)||h.removeAttribute(n),Bx.delete(h)),x||h.removeAttribute(r)}),_S--,_S||(id=new WeakMap,id=new WeakMap,Bx=new WeakMap,qx={})}},TH=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=pPe(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),xPe(n,a,r,"aria-hidden")):function(){return null}},by="right-scroll-bar-position",wy="width-before-scroll-bar",yPe="with-scroll-bars-hidden",vPe="--removed-body-scroll-bar-size";function CS(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function bPe(e,t){var r=y.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var wPe=typeof window<"u"?y.useLayoutEffect:y.useEffect,$$=new WeakMap;function jPe(e,t){var r=bPe(null,function(n){return e.forEach(function(a){return CS(a,n)})});return wPe(function(){var n=$$.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(c){i.has(c)||CS(c,null)}),i.forEach(function(c){a.has(c)||CS(c,o)})}$$.set(r,e)},[e]),r}function NPe(e){return e}function SPe(e,t){t===void 0&&(t=NPe);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(c){return c!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(c){return i(c)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var c=r;r=[],c.forEach(i),o=r}var d=function(){var m=o;o=[],m.forEach(i)},f=function(){return Promise.resolve().then(d)};f(),r={push:function(m){o.push(m),f()},filter:function(m){return o=o.filter(m),r}}}};return a}function _Pe(e){e===void 0&&(e={});var t=SPe(null);return t.options=Ha({async:!0,ssr:!1},e),t}var OH=function(e){var t=e.sideCar,r=df(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return y.createElement(n,Ha({},r))};OH.isSideCarExport=!0;function CPe(e,t){return e.useMedium(t),OH}var PH=_Pe(),kS=function(){},b0=y.forwardRef(function(e,t){var r=y.useRef(null),n=y.useState({onScrollCapture:kS,onWheelCapture:kS,onTouchMoveCapture:kS}),a=n[0],i=n[1],o=e.forwardProps,c=e.children,d=e.className,f=e.removeScrollBar,m=e.enabled,h=e.shards,g=e.sideCar,x=e.noRelative,w=e.noIsolation,b=e.inert,j=e.allowPinchZoom,N=e.as,_=N===void 0?"div":N,S=e.gapMode,k=df(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=g,T=jPe([r,t]),O=Ha(Ha({},k),a);return y.createElement(y.Fragment,null,m&&y.createElement(A,{sideCar:PH,removeScrollBar:f,shards:h,noRelative:x,noIsolation:w,inert:b,setCallbacks:i,allowPinchZoom:!!j,lockRef:r,gapMode:S}),o?y.cloneElement(y.Children.only(c),Ha(Ha({},O),{ref:T})):y.createElement(_,Ha({},O,{className:d,ref:T}),c))});b0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};b0.classNames={fullWidth:wy,zeroRight:by};var kPe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function EPe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=kPe();return t&&e.setAttribute("nonce",t),e}function APe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function TPe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var OPe=function(){var e=0,t=null;return{add:function(r){e==0&&(t=EPe())&&(APe(t,r),TPe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},PPe=function(){var e=OPe();return function(t,r){y.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},MH=function(){var e=PPe(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},MPe={left:0,top:0,right:0,gap:0},ES=function(e){return parseInt(e||"",10)||0},RPe=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[ES(r),ES(n),ES(a)]},DPe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return MPe;var t=RPe(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},IPe=MH(),Md="data-scroll-locked",LPe=function(e,t,r,n){var a=e.left,i=e.top,o=e.right,c=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(yPe,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(c,"px ").concat(n,`;
  }
  body[`).concat(Md,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(c,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(by,` {
    right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(wy,` {
    margin-right: `).concat(c,"px ").concat(n,`;
  }
  
  .`).concat(by," .").concat(by,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(wy," .").concat(wy,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Md,`] {
    `).concat(vPe,": ").concat(c,`px;
  }
`)},z$=function(){var e=parseInt(document.body.getAttribute(Md)||"0",10);return isFinite(e)?e:0},$Pe=function(){y.useEffect(function(){return document.body.setAttribute(Md,(z$()+1).toString()),function(){var e=z$()-1;e<=0?document.body.removeAttribute(Md):document.body.setAttribute(Md,e.toString())}},[])},zPe=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;$Pe();var i=y.useMemo(function(){return DPe(a)},[a]);return y.createElement(IPe,{styles:LPe(i,!t,a,r?"":"!important")})},F_=!1;if(typeof window<"u")try{var Vx=Object.defineProperty({},"passive",{get:function(){return F_=!0,!0}});window.addEventListener("test",Vx,Vx),window.removeEventListener("test",Vx,Vx)}catch{F_=!1}var od=F_?{passive:!1}:!1,UPe=function(e){return e.tagName==="TEXTAREA"},RH=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!UPe(e)&&r[t]==="visible")},FPe=function(e){return RH(e,"overflowY")},BPe=function(e){return RH(e,"overflowX")},U$=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=DH(e,n);if(a){var i=IH(e,n),o=i[1],c=i[2];if(o>c)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},qPe=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},VPe=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},DH=function(e,t){return e==="v"?FPe(t):BPe(t)},IH=function(e,t){return e==="v"?qPe(t):VPe(t)},KPe=function(e,t){return e==="h"&&t==="rtl"?-1:1},HPe=function(e,t,r,n,a){var i=KPe(e,window.getComputedStyle(t).direction),o=i*n,c=r.target,d=t.contains(c),f=!1,m=o>0,h=0,g=0;do{if(!c)break;var x=IH(e,c),w=x[0],b=x[1],j=x[2],N=b-j-i*w;(w||N)&&DH(e,c)&&(h+=N,g+=w);var _=c.parentNode;c=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!d&&c!==document.body||d&&(t.contains(c)||t===c));return(m&&Math.abs(h)<1||!m&&Math.abs(g)<1)&&(f=!0),f},Kx=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},F$=function(e){return[e.deltaX,e.deltaY]},B$=function(e){return e&&"current"in e?e.current:e},GPe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},WPe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},QPe=0,ld=[];function YPe(e){var t=y.useRef([]),r=y.useRef([0,0]),n=y.useRef(),a=y.useState(QPe++)[0],i=y.useState(MH)[0],o=y.useRef(e);y.useEffect(function(){o.current=e},[e]),y.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var b=Mne([e.lockRef.current],(e.shards||[]).map(B$),!0).filter(Boolean);return b.forEach(function(j){return j.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),b.forEach(function(j){return j.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var c=y.useCallback(function(b,j){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!o.current.allowPinchZoom;var N=Kx(b),_=r.current,S="deltaX"in b?b.deltaX:_[0]-N[0],k="deltaY"in b?b.deltaY:_[1]-N[1],A,T=b.target,O=Math.abs(S)>Math.abs(k)?"h":"v";if("touches"in b&&O==="h"&&T.type==="range")return!1;var P=window.getSelection(),R=P&&P.anchorNode,M=R?R===T||R.contains(T):!1;if(M)return!1;var D=U$(O,T);if(!D)return!0;if(D?A=O:(A=O==="v"?"h":"v",D=U$(O,T)),!D)return!1;if(!n.current&&"changedTouches"in b&&(S||k)&&(n.current=A),!A)return!0;var z=n.current||A;return HPe(z,j,b,z==="h"?S:k)},[]),d=y.useCallback(function(b){var j=b;if(!(!ld.length||ld[ld.length-1]!==i)){var N="deltaY"in j?F$(j):Kx(j),_=t.current.filter(function(A){return A.name===j.type&&(A.target===j.target||j.target===A.shadowParent)&&GPe(A.delta,N)})[0];if(_&&_.should){j.cancelable&&j.preventDefault();return}if(!_){var S=(o.current.shards||[]).map(B$).filter(Boolean).filter(function(A){return A.contains(j.target)}),k=S.length>0?c(j,S[0]):!o.current.noIsolation;k&&j.cancelable&&j.preventDefault()}}},[]),f=y.useCallback(function(b,j,N,_){var S={name:b,delta:j,target:N,should:_,shadowParent:XPe(N)};t.current.push(S),setTimeout(function(){t.current=t.current.filter(function(k){return k!==S})},1)},[]),m=y.useCallback(function(b){r.current=Kx(b),n.current=void 0},[]),h=y.useCallback(function(b){f(b.type,F$(b),b.target,c(b,e.lockRef.current))},[]),g=y.useCallback(function(b){f(b.type,Kx(b),b.target,c(b,e.lockRef.current))},[]);y.useEffect(function(){return ld.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:g}),document.addEventListener("wheel",d,od),document.addEventListener("touchmove",d,od),document.addEventListener("touchstart",m,od),function(){ld=ld.filter(function(b){return b!==i}),document.removeEventListener("wheel",d,od),document.removeEventListener("touchmove",d,od),document.removeEventListener("touchstart",m,od)}},[]);var x=e.removeScrollBar,w=e.inert;return y.createElement(y.Fragment,null,w?y.createElement(i,{styles:WPe(a)}):null,x?y.createElement(zPe,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function XPe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const ZPe=CPe(PH,YPe);var kA=y.forwardRef(function(e,t){return y.createElement(b0,Ha({},e,{ref:t,sideCar:ZPe}))});kA.classNames=b0.classNames;var JPe=[" ","Enter","ArrowUp","ArrowDown"],eMe=[" ","Enter"],Hc="Select",[w0,j0,tMe]=tH(Hc),[Tf]=ou(Hc,[tMe,vH]),N0=vH(),[rMe,Ml]=Tf(Hc),[nMe,sMe]=Tf(Hc),LH=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:c,onValueChange:d,dir:f,name:m,autoComplete:h,disabled:g,required:x,form:w}=e,b=N0(t),[j,N]=y.useState(null),[_,S]=y.useState(null),[k,A]=y.useState(!1),T=pA(f),[O,P]=Kh({prop:n,defaultProp:a??!1,onChange:i,caller:Hc}),[R,M]=Kh({prop:o,defaultProp:c,onChange:d,caller:Hc}),D=y.useRef(null),z=j?w||!!j.closest("form"):!0,[Y,I]=y.useState(new Set),K=Array.from(Y).map(U=>U.props.value).join(";");return s.jsx(ZOe,{...b,children:s.jsxs(rMe,{required:x,scope:t,trigger:j,onTriggerChange:N,valueNode:_,onValueNodeChange:S,valueNodeHasChildren:k,onValueNodeHasChildrenChange:A,contentId:gl(),value:R,onValueChange:M,open:O,onOpenChange:P,dir:T,triggerPointerDownPosRef:D,disabled:g,children:[s.jsx(w0.Provider,{scope:t,children:s.jsx(nMe,{scope:e.__scopeSelect,onNativeOptionAdd:y.useCallback(U=>{I(L=>new Set(L).add(U))},[]),onNativeOptionRemove:y.useCallback(U=>{I(L=>{const F=new Set(L);return F.delete(U),F})},[]),children:r})}),z?s.jsxs(l7,{"aria-hidden":!0,required:x,tabIndex:-1,name:m,autoComplete:h,value:R,onChange:U=>M(U.target.value),disabled:g,form:w,children:[R===void 0?s.jsx("option",{value:""}):null,Array.from(Y)]},K):null]})})};LH.displayName=Hc;var $H="SelectTrigger",zH=y.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=N0(r),o=Ml($H,r),c=o.disabled||n,d=Qt(t,o.onTriggerChange),f=j0(r),m=y.useRef("touch"),[h,g,x]=u7(b=>{const j=f().filter(S=>!S.disabled),N=j.find(S=>S.value===o.value),_=d7(j,b,N);_!==void 0&&o.onValueChange(_.value)}),w=b=>{c||(o.onOpenChange(!0),x()),b&&(o.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return s.jsx(JOe,{asChild:!0,...i,children:s.jsx(vt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":c7(o.value)?"":void 0,...a,ref:d,onClick:dt(a.onClick,b=>{b.currentTarget.focus(),m.current!=="mouse"&&w(b)}),onPointerDown:dt(a.onPointerDown,b=>{m.current=b.pointerType;const j=b.target;j.hasPointerCapture(b.pointerId)&&j.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(w(b),b.preventDefault())}),onKeyDown:dt(a.onKeyDown,b=>{const j=h.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&g(b.key),!(j&&b.key===" ")&&JPe.includes(b.key)&&(w(),b.preventDefault())})})})});zH.displayName=$H;var UH="SelectValue",FH=y.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...c}=e,d=Ml(UH,r),{onValueNodeHasChildrenChange:f}=d,m=i!==void 0,h=Qt(t,d.onValueNodeChange);return Nn(()=>{f(m)},[f,m]),s.jsx(vt.span,{...c,ref:h,style:{pointerEvents:"none"},children:c7(d.value)?s.jsx(s.Fragment,{children:o}):i})});FH.displayName=UH;var aMe="SelectIcon",BH=y.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(vt.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});BH.displayName=aMe;var iMe="SelectPortal",qH=e=>s.jsx(CA,{asChild:!0,...e});qH.displayName=iMe;var Gc="SelectContent",VH=y.forwardRef((e,t)=>{const r=Ml(Gc,e.__scopeSelect),[n,a]=y.useState();if(Nn(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?Zc.createPortal(s.jsx(KH,{scope:e.__scopeSelect,children:s.jsx(w0.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(HH,{...e,ref:t})});VH.displayName=Gc;var ia=10,[KH,Rl]=Tf(Gc),oMe="SelectContentImpl",lMe=nPe("SelectContent.RemoveScroll"),HH=y.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:c,sideOffset:d,align:f,alignOffset:m,arrowPadding:h,collisionBoundary:g,collisionPadding:x,sticky:w,hideWhenDetached:b,avoidCollisions:j,...N}=e,_=Ml(Gc,r),[S,k]=y.useState(null),[A,T]=y.useState(null),O=Qt(t,ne=>k(ne)),[P,R]=y.useState(null),[M,D]=y.useState(null),z=j0(r),[Y,I]=y.useState(!1),K=y.useRef(!1);y.useEffect(()=>{if(S)return TH(S)},[S]),sH();const U=y.useCallback(ne=>{const[oe,...Q]=z().map(te=>te.ref.current),[pe]=Q.slice(-1),he=document.activeElement;for(const te of ne)if(te===he||(te?.scrollIntoView({block:"nearest"}),te===oe&&A&&(A.scrollTop=0),te===pe&&A&&(A.scrollTop=A.scrollHeight),te?.focus(),document.activeElement!==he))return},[z,A]),L=y.useCallback(()=>U([P,S]),[U,P,S]);y.useEffect(()=>{Y&&L()},[Y,L]);const{onOpenChange:F,triggerPointerDownPosRef:q}=_;y.useEffect(()=>{if(S){let ne={x:0,y:0};const oe=pe=>{ne={x:Math.abs(Math.round(pe.pageX)-(q.current?.x??0)),y:Math.abs(Math.round(pe.pageY)-(q.current?.y??0))}},Q=pe=>{ne.x<=10&&ne.y<=10?pe.preventDefault():S.contains(pe.target)||F(!1),document.removeEventListener("pointermove",oe),q.current=null};return q.current!==null&&(document.addEventListener("pointermove",oe),document.addEventListener("pointerup",Q,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",oe),document.removeEventListener("pointerup",Q,{capture:!0})}}},[S,F,q]),y.useEffect(()=>{const ne=()=>F(!1);return window.addEventListener("blur",ne),window.addEventListener("resize",ne),()=>{window.removeEventListener("blur",ne),window.removeEventListener("resize",ne)}},[F]);const[Z,B]=u7(ne=>{const oe=z().filter(he=>!he.disabled),Q=oe.find(he=>he.ref.current===document.activeElement),pe=d7(oe,ne,Q);pe&&setTimeout(()=>pe.ref.current.focus())}),V=y.useCallback((ne,oe,Q)=>{const pe=!K.current&&!Q;(_.value!==void 0&&_.value===oe||pe)&&(R(ne),pe&&(K.current=!0))},[_.value]),ee=y.useCallback(()=>S?.focus(),[S]),ae=y.useCallback((ne,oe,Q)=>{const pe=!K.current&&!Q;(_.value!==void 0&&_.value===oe||pe)&&D(ne)},[_.value]),J=n==="popper"?B_:GH,se=J===B_?{side:c,sideOffset:d,align:f,alignOffset:m,arrowPadding:h,collisionBoundary:g,collisionPadding:x,sticky:w,hideWhenDetached:b,avoidCollisions:j}:{};return s.jsx(KH,{scope:r,content:S,viewport:A,onViewportChange:T,itemRefCallback:V,selectedItem:P,onItemLeave:ee,itemTextRefCallback:ae,focusSelectedItem:L,selectedItemText:M,position:n,isPositioned:Y,searchRef:Z,children:s.jsx(kA,{as:lMe,allowPinchZoom:!0,children:s.jsx(xA,{asChild:!0,trapped:_.open,onMountAutoFocus:ne=>{ne.preventDefault()},onUnmountAutoFocus:dt(a,ne=>{_.trigger?.focus({preventScroll:!0}),ne.preventDefault()}),children:s.jsx(gA,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ne=>ne.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:s.jsx(J,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:ne=>ne.preventDefault(),...N,...se,onPlaced:()=>I(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...N.style},onKeyDown:dt(N.onKeyDown,ne=>{const oe=ne.ctrlKey||ne.altKey||ne.metaKey;if(ne.key==="Tab"&&ne.preventDefault(),!oe&&ne.key.length===1&&B(ne.key),["ArrowUp","ArrowDown","Home","End"].includes(ne.key)){let pe=z().filter(he=>!he.disabled).map(he=>he.ref.current);if(["ArrowUp","End"].includes(ne.key)&&(pe=pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(ne.key)){const he=ne.target,te=pe.indexOf(he);pe=pe.slice(te+1)}setTimeout(()=>U(pe)),ne.preventDefault()}})})})})})})});HH.displayName=oMe;var cMe="SelectItemAlignedPosition",GH=y.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=Ml(Gc,r),o=Rl(Gc,r),[c,d]=y.useState(null),[f,m]=y.useState(null),h=Qt(t,O=>m(O)),g=j0(r),x=y.useRef(!1),w=y.useRef(!0),{viewport:b,selectedItem:j,selectedItemText:N,focusSelectedItem:_}=o,S=y.useCallback(()=>{if(i.trigger&&i.valueNode&&c&&f&&b&&j&&N){const O=i.trigger.getBoundingClientRect(),P=f.getBoundingClientRect(),R=i.valueNode.getBoundingClientRect(),M=N.getBoundingClientRect();if(i.dir!=="rtl"){const he=M.left-P.left,te=R.left-he,we=O.left-te,ke=O.width+we,Ve=Math.max(ke,P.width),Be=window.innerWidth-ia,rt=y$(te,[ia,Math.max(ia,Be-Ve)]);c.style.minWidth=ke+"px",c.style.left=rt+"px"}else{const he=P.right-M.right,te=window.innerWidth-R.right-he,we=window.innerWidth-O.right-te,ke=O.width+we,Ve=Math.max(ke,P.width),Be=window.innerWidth-ia,rt=y$(te,[ia,Math.max(ia,Be-Ve)]);c.style.minWidth=ke+"px",c.style.right=rt+"px"}const D=g(),z=window.innerHeight-ia*2,Y=b.scrollHeight,I=window.getComputedStyle(f),K=parseInt(I.borderTopWidth,10),U=parseInt(I.paddingTop,10),L=parseInt(I.borderBottomWidth,10),F=parseInt(I.paddingBottom,10),q=K+U+Y+F+L,Z=Math.min(j.offsetHeight*5,q),B=window.getComputedStyle(b),V=parseInt(B.paddingTop,10),ee=parseInt(B.paddingBottom,10),ae=O.top+O.height/2-ia,J=z-ae,se=j.offsetHeight/2,ne=j.offsetTop+se,oe=K+U+ne,Q=q-oe;if(oe<=ae){const he=D.length>0&&j===D[D.length-1].ref.current;c.style.bottom="0px";const te=f.clientHeight-b.offsetTop-b.offsetHeight,we=Math.max(J,se+(he?ee:0)+te+L),ke=oe+we;c.style.height=ke+"px"}else{const he=D.length>0&&j===D[0].ref.current;c.style.top="0px";const we=Math.max(ae,K+b.offsetTop+(he?V:0)+se)+Q;c.style.height=we+"px",b.scrollTop=oe-ae+b.offsetTop}c.style.margin=`${ia}px 0`,c.style.minHeight=Z+"px",c.style.maxHeight=z+"px",n?.(),requestAnimationFrame(()=>x.current=!0)}},[g,i.trigger,i.valueNode,c,f,b,j,N,i.dir,n]);Nn(()=>S(),[S]);const[k,A]=y.useState();Nn(()=>{f&&A(window.getComputedStyle(f).zIndex)},[f]);const T=y.useCallback(O=>{O&&w.current===!0&&(S(),_?.(),w.current=!1)},[S,_]);return s.jsx(dMe,{scope:r,contentWrapper:c,shouldExpandOnScrollRef:x,onScrollButtonChange:T,children:s.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:s.jsx(vt.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});GH.displayName=cMe;var uMe="SelectPopperPosition",B_=y.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=ia,...i}=e,o=N0(r);return s.jsx(ePe,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});B_.displayName=uMe;var[dMe,EA]=Tf(Gc,{}),q_="SelectViewport",WH=y.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=Rl(q_,r),o=EA(q_,r),c=Qt(t,i.onViewportChange),d=y.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(w0.Slot,{scope:r,children:s.jsx(vt.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:dt(a.onScroll,f=>{const m=f.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:g}=o;if(g?.current&&h){const x=Math.abs(d.current-m.scrollTop);if(x>0){const w=window.innerHeight-ia*2,b=parseFloat(h.style.minHeight),j=parseFloat(h.style.height),N=Math.max(b,j);if(N<w){const _=N+x,S=Math.min(w,_),k=_-S;h.style.height=S+"px",h.style.bottom==="0px"&&(m.scrollTop=k>0?k:0,h.style.justifyContent="flex-end")}}}d.current=m.scrollTop})})})]})});WH.displayName=q_;var QH="SelectGroup",[fMe,mMe]=Tf(QH),YH=y.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=gl();return s.jsx(fMe,{scope:r,id:a,children:s.jsx(vt.div,{role:"group","aria-labelledby":a,...n,ref:t})})});YH.displayName=QH;var XH="SelectLabel",ZH=y.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=mMe(XH,r);return s.jsx(vt.div,{id:a.id,...n,ref:t})});ZH.displayName=XH;var Kv="SelectItem",[hMe,JH]=Tf(Kv),e7=y.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,c=Ml(Kv,r),d=Rl(Kv,r),f=c.value===n,[m,h]=y.useState(i??""),[g,x]=y.useState(!1),w=Qt(t,_=>d.itemRefCallback?.(_,n,a)),b=gl(),j=y.useRef("touch"),N=()=>{a||(c.onValueChange(n),c.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(hMe,{scope:r,value:n,disabled:a,textId:b,isSelected:f,onItemTextChange:y.useCallback(_=>{h(S=>S||(_?.textContent??"").trim())},[]),children:s.jsx(w0.ItemSlot,{scope:r,value:n,disabled:a,textValue:m,children:s.jsx(vt.div,{role:"option","aria-labelledby":b,"data-highlighted":g?"":void 0,"aria-selected":f&&g,"data-state":f?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:w,onFocus:dt(o.onFocus,()=>x(!0)),onBlur:dt(o.onBlur,()=>x(!1)),onClick:dt(o.onClick,()=>{j.current!=="mouse"&&N()}),onPointerUp:dt(o.onPointerUp,()=>{j.current==="mouse"&&N()}),onPointerDown:dt(o.onPointerDown,_=>{j.current=_.pointerType}),onPointerMove:dt(o.onPointerMove,_=>{j.current=_.pointerType,a?d.onItemLeave?.():j.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:dt(o.onPointerLeave,_=>{_.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:dt(o.onKeyDown,_=>{d.searchRef?.current!==""&&_.key===" "||(eMe.includes(_.key)&&N(),_.key===" "&&_.preventDefault())})})})})});e7.displayName=Kv;var Ym="SelectItemText",t7=y.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=Ml(Ym,r),c=Rl(Ym,r),d=JH(Ym,r),f=sMe(Ym,r),[m,h]=y.useState(null),g=Qt(t,N=>h(N),d.onItemTextChange,N=>c.itemTextRefCallback?.(N,d.value,d.disabled)),x=m?.textContent,w=y.useMemo(()=>s.jsx("option",{value:d.value,disabled:d.disabled,children:x},d.value),[d.disabled,d.value,x]),{onNativeOptionAdd:b,onNativeOptionRemove:j}=f;return Nn(()=>(b(w),()=>j(w)),[b,j,w]),s.jsxs(s.Fragment,{children:[s.jsx(vt.span,{id:d.textId,...i,ref:g}),d.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Zc.createPortal(i.children,o.valueNode):null]})});t7.displayName=Ym;var r7="SelectItemIndicator",n7=y.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return JH(r7,r).isSelected?s.jsx(vt.span,{"aria-hidden":!0,...n,ref:t}):null});n7.displayName=r7;var V_="SelectScrollUpButton",s7=y.forwardRef((e,t)=>{const r=Rl(V_,e.__scopeSelect),n=EA(V_,e.__scopeSelect),[a,i]=y.useState(!1),o=Qt(t,n.onScrollButtonChange);return Nn(()=>{if(r.viewport&&r.isPositioned){let c=function(){const f=d.scrollTop>0;i(f)};const d=r.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),a?s.jsx(i7,{...e,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=r;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});s7.displayName=V_;var K_="SelectScrollDownButton",a7=y.forwardRef((e,t)=>{const r=Rl(K_,e.__scopeSelect),n=EA(K_,e.__scopeSelect),[a,i]=y.useState(!1),o=Qt(t,n.onScrollButtonChange);return Nn(()=>{if(r.viewport&&r.isPositioned){let c=function(){const f=d.scrollHeight-d.clientHeight,m=Math.ceil(d.scrollTop)<f;i(m)};const d=r.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[r.viewport,r.isPositioned]),a?s.jsx(i7,{...e,ref:o,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=r;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});a7.displayName=K_;var i7=y.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=Rl("SelectScrollButton",r),o=y.useRef(null),c=j0(r),d=y.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return y.useEffect(()=>()=>d(),[d]),Nn(()=>{c().find(m=>m.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),s.jsx(vt.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:dt(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:dt(a.onPointerMove,()=>{i.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:dt(a.onPointerLeave,()=>{d()})})}),pMe="SelectSeparator",o7=y.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(vt.div,{"aria-hidden":!0,...n,ref:t})});o7.displayName=pMe;var H_="SelectArrow",gMe=y.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=N0(r),i=Ml(H_,r),o=Rl(H_,r);return i.open&&o.position==="popper"?s.jsx(tPe,{...a,...n,ref:t}):null});gMe.displayName=H_;var xMe="SelectBubbleInput",l7=y.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=y.useRef(null),i=Qt(n,a),o=fPe(t);return y.useEffect(()=>{const c=a.current;if(!c)return;const d=window.HTMLSelectElement.prototype,m=Object.getOwnPropertyDescriptor(d,"value").set;if(o!==t&&m){const h=new Event("change",{bubbles:!0});m.call(c,t),c.dispatchEvent(h)}},[o,t]),s.jsx(vt.select,{...r,style:{...EH,...r.style},ref:i,defaultValue:t})});l7.displayName=xMe;function c7(e){return e===""||e===void 0}function u7(e){const t=wl(e),r=y.useRef(""),n=y.useRef(0),a=y.useCallback(o=>{const c=r.current+o;t(c),(function d(f){r.current=f,window.clearTimeout(n.current),f!==""&&(n.current=window.setTimeout(()=>d(""),1e3))})(c)},[t]),i=y.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return y.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function d7(e,t,r){const a=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=yMe(e,Math.max(i,0));a.length===1&&(o=o.filter(f=>f!==r));const d=o.find(f=>f.textValue.toLowerCase().startsWith(a.toLowerCase()));return d!==r?d:void 0}function yMe(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var vMe=LH,f7=zH,bMe=FH,wMe=BH,jMe=qH,m7=VH,NMe=WH,SMe=YH,h7=ZH,p7=e7,_Me=t7,CMe=n7,g7=s7,x7=a7,y7=o7;const Wi=vMe,q$=SMe,Qi=bMe,ti=y.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(f7,{ref:n,className:H("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(wMe,{asChild:!0,children:s.jsx(un,{className:"h-4 w-4 opacity-50"})})]}));ti.displayName=f7.displayName;const v7=y.forwardRef(({className:e,...t},r)=>s.jsx(g7,{ref:r,className:H("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Sl,{className:"h-4 w-4"})}));v7.displayName=g7.displayName;const b7=y.forwardRef(({className:e,...t},r)=>s.jsx(x7,{ref:r,className:H("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(un,{className:"h-4 w-4"})}));b7.displayName=x7.displayName;const ri=y.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(jMe,{children:s.jsxs(m7,{ref:a,className:H("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(v7,{}),s.jsx(NMe,{className:H("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(b7,{})]})}));ri.displayName=m7.displayName;const G_=y.forwardRef(({className:e,...t},r)=>s.jsx(h7,{ref:r,className:H("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));G_.displayName=h7.displayName;const bn=y.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(p7,{ref:n,className:H("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(CMe,{children:s.jsx(Jc,{className:"h-4 w-4"})})}),s.jsx(_Me,{children:t})]}));bn.displayName=p7.displayName;const kMe=y.forwardRef(({className:e,...t},r)=>s.jsx(y7,{ref:r,className:H("-mx-1 my-1 h-px bg-muted",e),...t}));kMe.displayName=y7.displayName;const EMe=({contact:e,onSubmit:t,onCancel:r,mode:n})=>{const[a,i]=y.useState({name:"",role:"",organization:"",email:"",phone:"",linkedin:"",avatarUrl:"",department:"",location:"",timezone:"",notes:"",aliases:[]}),[o,c]=y.useState(""),[d,f]=y.useState([]),[m,h]=y.useState([]),[g,x]=y.useState([]);y.useEffect(()=>{(async()=>{try{const[k,A,T]=await Promise.all([X.get("/api/role-templates"),X.get("/api/timezones"),X.get("/api/contacts/metadata/companies")]),O=k.roles||[],P=A.timezones||[],R=T.companies||[];f(O),h(P),x(R)}catch(k){console.error("Failed to load metadata",k)}})(),e&&i({name:e.name,role:e.role,organization:e.organization,email:e.email||"",phone:e.phone||"",linkedin:e.linkedin||"",avatarUrl:e.avatarUrl||e.avatar||"",department:e.department||"",location:e.location||"",timezone:e.timezone||"",notes:e.notes||"",aliases:e.aliases||[]})},[e]);const w=()=>{!a.name.trim()||!a.role.trim()||t({name:a.name.trim(),role:a.role.trim(),organization:a.organization.trim()||"Unknown",email:a.email.trim()||void 0,phone:a.phone.trim()||void 0,linkedin:a.linkedin.trim()||void 0,avatarUrl:a.avatarUrl.trim()||void 0,department:a.department.trim()||void 0,location:a.location.trim()||void 0,timezone:a.timezone.trim()||void 0,notes:a.notes.trim()||void 0,aliases:a.aliases})},b=(S,k)=>i(A=>({...A,[S]:k})),j=()=>{o.trim()&&!a.aliases.includes(o.trim())&&(i(S=>({...S,aliases:[...S.aliases,o.trim()]})),c(""))},N=S=>{i(k=>({...k,aliases:k.aliases.filter(A=>A!==S)}))},_=({icon:S,label:k,id:A,placeholder:T,value:O,type:P="text",required:R=!1})=>s.jsxs("div",{children:[s.jsxs(hc,{htmlFor:A,className:"flex items-center gap-1.5 text-xs text-muted-foreground mb-1.5",children:[s.jsx(S,{className:"w-3.5 h-3.5"})," ",k," ",R&&"*"]}),s.jsx(Ks,{id:A,type:P,placeholder:T,value:O,onChange:M=>b(A,M.target.value)})]});return s.jsxs("div",{className:"space-y-4 mt-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-3",children:[s.jsx("div",{className:"col-span-2 sm:col-span-1",children:s.jsx(_,{icon:fn,label:"Name",id:"name",placeholder:"Full name",value:a.name,required:!0})}),s.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[s.jsxs(hc,{className:"flex items-center gap-1.5 text-xs text-muted-foreground mb-1.5",children:[s.jsx(Id,{className:"w-3.5 h-3.5"})," Role *"]}),s.jsxs(Wi,{value:a.role,onValueChange:S=>b("role",S),children:[s.jsx(ti,{className:"w-full",children:s.jsx(Qi,{placeholder:"Select role..."})}),s.jsx(ri,{children:d.filter(S=>S&&(S.name||S.display_name)).map(S=>s.jsx(bn,{value:S.display_name||S.name||"Unknown",children:S.display_name||S.name||"Unknown Role"},S.id||S.name))})]})]}),s.jsx(_,{icon:Wn,label:"Email",id:"email",placeholder:"email@example.com",value:a.email,type:"email"}),s.jsx(_,{icon:TC,label:"Phone",id:"phone",placeholder:"+351 900 000 000",value:a.phone,type:"tel"}),s.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[s.jsxs(hc,{className:"flex items-center gap-1.5 text-xs text-muted-foreground mb-1.5",children:[s.jsx(of,{className:"w-3.5 h-3.5"})," Organization"]}),s.jsxs(Wi,{value:a.organization,onValueChange:S=>b("organization",S),children:[s.jsx(ti,{className:"w-full",children:s.jsx(Qi,{placeholder:"Select organization..."})}),s.jsx(ri,{children:g.filter(S=>S&&S.name).map(S=>s.jsx(bn,{value:S.name||"Unknown",children:S.name||"Unknown Company"},S.id||S.name))})]})]}),s.jsx(_,{icon:K6,label:"LinkedIn",id:"linkedin",placeholder:"https://linkedin.com/in/...",value:a.linkedin}),s.jsxs("div",{className:"col-span-2",children:[s.jsxs(hc,{className:"flex items-center gap-1.5 text-xs text-muted-foreground mb-1.5",children:[s.jsx(fn,{className:"w-3.5 h-3.5"})," Aliases"]}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx(Ks,{value:o,onChange:S=>c(S.target.value),placeholder:"Add alias (e.g. nickname, alternate name)",onKeyDown:S=>S.key==="Enter"&&(S.preventDefault(),j())}),s.jsx(Mt,{type:"button",size:"sm",onClick:j,variant:"secondary",children:"Add"})]}),a.aliases.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:a.aliases.map(S=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded bg-secondary text-xs",children:[S,s.jsx("button",{onClick:()=>N(S),className:"hover:text-destructive",children:""})]},S))})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx(_,{icon:CC,label:"Avatar URL",id:"avatarUrl",placeholder:"https://...",value:a.avatarUrl}),!a.avatarUrl&&s.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"Enter a URL to set the contact's profile picture"})]}),s.jsx(_,{icon:Id,label:"Department",id:"department",placeholder:"Engineering, Sales, etc.",value:a.department}),s.jsx(_,{icon:W6,label:"Location",id:"location",placeholder:"e.g. Lisbon, Portugal",value:a.location}),s.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[s.jsxs(hc,{className:"flex items-center gap-1.5 text-xs text-muted-foreground mb-1.5",children:[s.jsx(tr,{className:"w-3.5 h-3.5"})," Timezone"]}),s.jsxs(Wi,{value:a.timezone,onValueChange:S=>b("timezone",S),children:[s.jsx(ti,{className:"w-full",children:s.jsx(Qi,{placeholder:"Select timezone..."})}),s.jsx(ri,{children:m.filter(S=>S&&S.name).map(S=>s.jsxs(bn,{value:S.code||S.name,children:[S.name||"Unknown Timezone"," (",S.code,")"]},S.id||S.code||S.name))})]})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsxs(hc,{htmlFor:"notes",className:"flex items-center gap-1.5 text-xs text-muted-foreground mb-1.5",children:[s.jsx(J6,{className:"w-3.5 h-3.5"})," Notes"]}),s.jsx(eH,{id:"notes",placeholder:"Additional notes...",value:a.notes,onChange:S=>b("notes",S.target.value),rows:2})]})]}),s.jsxs("div",{className:"flex gap-2 pt-1",children:[s.jsx(Mt,{variant:"outline",onClick:r,className:"flex-1",children:"Cancel"}),s.jsx(Mt,{onClick:w,disabled:!a.name.trim()||!a.role.trim(),className:"flex-1 gap-1.5",children:n==="add"?s.jsxs(s.Fragment,{children:[s.jsx(br,{className:"w-4 h-4"})," Add Contact"]}):s.jsxs(s.Fragment,{children:[s.jsx(Us,{className:"w-4 h-4"})," Save Changes"]})})]})]})};var AS="rovingFocusGroup.onEntryFocus",AMe={bubbles:!1,cancelable:!0},Tp="RovingFocusGroup",[W_,w7,TMe]=tH(Tp),[OMe,j7]=ou(Tp,[TMe]),[PMe,MMe]=OMe(Tp),N7=y.forwardRef((e,t)=>s.jsx(W_.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(W_.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(RMe,{...e,ref:t})})}));N7.displayName=Tp;var RMe=y.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:f,preventScrollOnEntryFocus:m=!1,...h}=e,g=y.useRef(null),x=Qt(t,g),w=pA(i),[b,j]=Kh({prop:o,defaultProp:c??null,onChange:d,caller:Tp}),[N,_]=y.useState(!1),S=wl(f),k=w7(r),A=y.useRef(!1),[T,O]=y.useState(0);return y.useEffect(()=>{const P=g.current;if(P)return P.addEventListener(AS,S),()=>P.removeEventListener(AS,S)},[S]),s.jsx(PMe,{scope:r,orientation:n,dir:w,loop:a,currentTabStopId:b,onItemFocus:y.useCallback(P=>j(P),[j]),onItemShiftTab:y.useCallback(()=>_(!0),[]),onFocusableItemAdd:y.useCallback(()=>O(P=>P+1),[]),onFocusableItemRemove:y.useCallback(()=>O(P=>P-1),[]),children:s.jsx(vt.div,{tabIndex:N||T===0?-1:0,"data-orientation":n,...h,ref:x,style:{outline:"none",...e.style},onMouseDown:dt(e.onMouseDown,()=>{A.current=!0}),onFocus:dt(e.onFocus,P=>{const R=!A.current;if(P.target===P.currentTarget&&R&&!N){const M=new CustomEvent(AS,AMe);if(P.currentTarget.dispatchEvent(M),!M.defaultPrevented){const D=k().filter(U=>U.focusable),z=D.find(U=>U.active),Y=D.find(U=>U.id===b),K=[z,Y,...D].filter(Boolean).map(U=>U.ref.current);C7(K,m)}}A.current=!1}),onBlur:dt(e.onBlur,()=>_(!1))})})}),S7="RovingFocusGroupItem",_7=y.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...c}=e,d=gl(),f=i||d,m=MMe(S7,r),h=m.currentTabStopId===f,g=w7(r),{onFocusableItemAdd:x,onFocusableItemRemove:w,currentTabStopId:b}=m;return y.useEffect(()=>{if(n)return x(),()=>w()},[n,x,w]),s.jsx(W_.ItemSlot,{scope:r,id:f,focusable:n,active:a,children:s.jsx(vt.span,{tabIndex:h?0:-1,"data-orientation":m.orientation,...c,ref:t,onMouseDown:dt(e.onMouseDown,j=>{n?m.onItemFocus(f):j.preventDefault()}),onFocus:dt(e.onFocus,()=>m.onItemFocus(f)),onKeyDown:dt(e.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){m.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const N=LMe(j,m.orientation,m.dir);if(N!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let S=g().filter(k=>k.focusable).map(k=>k.ref.current);if(N==="last")S.reverse();else if(N==="prev"||N==="next"){N==="prev"&&S.reverse();const k=S.indexOf(j.currentTarget);S=m.loop?$Me(S,k+1):S.slice(k+1)}setTimeout(()=>C7(S))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:b!=null}):o})})});_7.displayName=S7;var DMe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function IMe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function LMe(e,t,r){const n=IMe(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return DMe[n]}function C7(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function $Me(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var zMe=N7,UMe=_7;function FMe(e,t){return y.useReducer((r,n)=>t[r][n]??r,e)}var Op=e=>{const{present:t,children:r}=e,n=BMe(t),a=typeof r=="function"?r({present:n.isPresent}):y.Children.only(r),i=Qt(n.ref,qMe(a));return typeof r=="function"||n.isPresent?y.cloneElement(a,{ref:i}):null};Op.displayName="Presence";function BMe(e){const[t,r]=y.useState(),n=y.useRef(null),a=y.useRef(e),i=y.useRef("none"),o=e?"mounted":"unmounted",[c,d]=FMe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const f=Hx(n.current);i.current=c==="mounted"?f:"none"},[c]),Nn(()=>{const f=n.current,m=a.current;if(m!==e){const g=i.current,x=Hx(f);e?d("MOUNT"):x==="none"||f?.display==="none"?d("UNMOUNT"):d(m&&g!==x?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,d]),Nn(()=>{if(t){let f;const m=t.ownerDocument.defaultView??window,h=x=>{const b=Hx(n.current).includes(CSS.escape(x.animationName));if(x.target===t&&b&&(d("ANIMATION_END"),!a.current)){const j=t.style.animationFillMode;t.style.animationFillMode="forwards",f=m.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=j)})}},g=x=>{x.target===t&&(i.current=Hx(n.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{m.clearTimeout(f),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:y.useCallback(f=>{n.current=f?getComputedStyle(f):null,r(f)},[])}}function Hx(e){return e?.animationName||"none"}function qMe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var S0="Tabs",[VMe]=ou(S0,[j7]),k7=j7(),[KMe,AA]=VMe(S0),E7=y.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:c,activationMode:d="automatic",...f}=e,m=pA(c),[h,g]=Kh({prop:n,onChange:a,defaultProp:i??"",caller:S0});return s.jsx(KMe,{scope:r,baseId:gl(),value:h,onValueChange:g,orientation:o,dir:m,activationMode:d,children:s.jsx(vt.div,{dir:m,"data-orientation":o,...f,ref:t})})});E7.displayName=S0;var A7="TabsList",T7=y.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=AA(A7,r),o=k7(r);return s.jsx(zMe,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(vt.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});T7.displayName=A7;var O7="TabsTrigger",P7=y.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=AA(O7,r),c=k7(r),d=D7(o.baseId,n),f=I7(o.baseId,n),m=n===o.value;return s.jsx(UMe,{asChild:!0,...c,focusable:!a,active:m,children:s.jsx(vt.button,{type:"button",role:"tab","aria-selected":m,"aria-controls":f,"data-state":m?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...i,ref:t,onMouseDown:dt(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:dt(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:dt(e.onFocus,()=>{const h=o.activationMode!=="manual";!m&&!a&&h&&o.onValueChange(n)})})})});P7.displayName=O7;var M7="TabsContent",R7=y.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,c=AA(M7,r),d=D7(c.baseId,n),f=I7(c.baseId,n),m=n===c.value,h=y.useRef(m);return y.useEffect(()=>{const g=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(g)},[]),s.jsx(Op,{present:a||m,children:({present:g})=>s.jsx(vt.div,{"data-state":m?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":d,hidden:!g,id:f,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:g&&i})})});R7.displayName=M7;function D7(e,t){return`${e}-trigger-${t}`}function I7(e,t){return`${e}-content-${t}`}var HMe=E7,L7=T7,$7=P7,z7=R7;const GMe=HMe,U7=y.forwardRef(({className:e,...t},r)=>s.jsx(L7,{ref:r,className:H("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));U7.displayName=L7.displayName;const F7=y.forwardRef(({className:e,...t},r)=>s.jsx($7,{ref:r,className:H("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",e),...t}));F7.displayName=$7.displayName;const pd=y.forwardRef(({className:e,...t},r)=>s.jsx(z7,{ref:r,className:H("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));pd.displayName=z7.displayName;const WMe=e=>(e||"?").split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2),V$=["from-rose-400 to-pink-500","from-violet-400 to-purple-500","from-blue-400 to-cyan-500","from-emerald-400 to-teal-500","from-amber-400 to-orange-500","from-fuchsia-400 to-pink-500"],K$=e=>{let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);return V$[Math.abs(t)%V$.length]},Va=({icon:e,label:t,value:r})=>r?s.jsxs("div",{className:"grid grid-cols-2 gap-4 py-2.5 border-b border-border last:border-0",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(e,{className:"w-4 h-4 text-destructive/70"})," ",t]}),s.jsx("p",{className:"text-sm text-foreground break-all",children:r})]}):null,QMe=({contact:e,open:t,onClose:r,onEdit:n,onDelete:a,onUpdateProjects:i})=>{const[o,c]=y.useState("info"),[d,f]=y.useState(!1),[m,h]=y.useState([]),[g,x]=y.useState([]),[w,b]=y.useState(null),[j,N]=y.useState([]),[_,S]=y.useState([]),[k,A]=y.useState([]),[T,O]=y.useState([]),P=W8(),R=Noe(),[M,D]=y.useState(!1),[z,Y]=y.useState(""),[I,K]=y.useState("works_with"),[U,L]=y.useState(null);y.useEffect(()=>{e&&t&&F()},[e,t]);const F=async()=>{if(e){f(!0);try{const V=await X.get("/api/projects");h(Array.isArray(V)?V:V.projects||[]);const ae=(await X.get(`/api/contacts/${e.id}/projects`)).projects||[],J=ae.map(he=>he.id);x(J);const se=ae.find(he=>he.is_primary);b(se?se.id:J[0]||null);const ne=await X.get(`/api/contacts/${e.id}/relationships`);N(ne.relationships||[]);const oe=await X.get(`/api/contacts/${e.id}/activity`);S(oe.activities||[]);try{const he=await X.get(`/api/contacts/${e.id}/mentions`);A(he.mentions||[])}catch(he){console.error("Error loading mentions",he)}const pe=(await X.get("/api/contacts")).contacts||[];O(pe.filter(he=>he.id!==e.id))}catch(V){console.error("Error loading contact details:",V)}finally{f(!1)}}};if(!e)return null;const q=async V=>{const ee=g.includes(V);try{ee?(await X.delete(`/api/contacts/${e.id}/projects/${V}`),x(ae=>ae.filter(J=>J!==V)),w===V&&b(null)):(await X.post(`/api/contacts/${e.id}/projects`,{projectId:V}),x(ae=>[...ae,V]),w||b(V)),i?.(e.id,g,w)}catch(ae){console.error("Error toggling project:",ae)}},Z=async V=>{try{g.includes(V)?await X.post(`/api/contacts/${e.id}/projects`,{projectId:V,isPrimary:!0}):(await X.post(`/api/contacts/${e.id}/projects`,{projectId:V,isPrimary:!0}),x(ee=>[...ee,V])),b(V)}catch(ee){console.error("Error setting primary project",ee)}},B=async()=>{if(z)try{const V=T.find(J=>J.id===z);if(!V)return;const ae=(await X.post(`/api/contacts/${e.id}/relationships`,{toContactId:V.id,type:I})).relationship;N(J=>[...J,{id:ae.id,type:I,direction:"forward",other_contact:{id:V.id,name:V.name,role:V.role,avatarUrl:V.avatarUrl}}]),Y(""),D(!1)}catch(V){console.error("Error adding relationship:",V)}};return s.jsx(Ws,{open:t,onOpenChange:V=>!V&&r(),children:s.jsxs(ui,{className:"max-w-2xl p-0 overflow-hidden",children:[s.jsx(Na,{className:"sr-only",children:"Contact Details"}),s.jsxs("div",{className:`bg-gradient-to-r ${K$(e.name)} p-6 pb-12 relative`,children:[s.jsx("button",{onClick:r,className:"absolute top-3 right-3 text-white/80 hover:text-white transition-colors",children:s.jsx("span",{className:"sr-only",children:"Close"})}),s.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[s.jsxs(Mt,{variant:"secondary",size:"sm",className:"gap-1.5 bg-white/20 text-white border-0 hover:bg-white/30 backdrop-blur-sm",disabled:P.isPending,onClick:()=>{P.mutate(e.id,{onSuccess:V=>{if(G.success("AI enrichment complete"),V?.suggestions){const ee=V.suggestions,ae=[];ee.role&&ae.push(`Role: ${ee.role}`),ee.department&&ae.push(`Dept: ${ee.department}`),ee.tags&&ae.push(`Tags: ${ee.tags.join(", ")}`),ae.length&&G.info(ae.join(" | "))}F()},onError:()=>G.error("Enrichment failed")})},children:[P.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(qt,{className:"w-3.5 h-3.5"})," Enrich AI"]}),s.jsx(Mt,{variant:"secondary",size:"sm",className:"gap-1.5 bg-white/20 text-white border-0 hover:bg-white/30 backdrop-blur-sm",onClick:()=>n(e),children:"Edit"})]})]}),s.jsx("div",{className:"px-6 -mt-10 relative z-10",children:s.jsxs("div",{className:"flex items-end gap-4",children:[s.jsx("div",{className:`w-16 h-16 rounded-full bg-gradient-to-br ${K$(e.name)} flex items-center justify-center shadow-lg border-4 border-background`,children:e.avatarUrl&&e.avatarUrl!=="undefined"&&e.avatarUrl!=="null"||e.avatar&&e.avatar!=="undefined"&&e.avatar!=="null"?s.jsx("img",{src:e.avatarUrl&&e.avatarUrl!=="undefined"?e.avatarUrl:e.avatar,alt:e.name,className:"w-full h-full rounded-full object-cover"}):s.jsx("span",{className:"text-lg font-bold text-white",children:WMe(e.name||"?")})}),s.jsxs("div",{className:"pb-1",children:[s.jsx("h2",{className:"text-xl font-bold text-foreground",children:e.name||"(unnamed)"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.role||""})]})]})}),s.jsx("div",{className:"px-6 mt-4",children:s.jsxs(GMe,{value:o,onValueChange:c,children:[s.jsx(U7,{className:"w-full justify-start bg-transparent border-b border-border rounded-none h-auto p-0 gap-0",children:[{id:"info",label:"Info",icon:fn,count:void 0},{id:"projects",label:"Projects",icon:Zi,count:g.length},{id:"relations",label:"Relations",icon:hj,count:j.length},{id:"mentions",label:"Mentions",icon:ms,count:k.length},{id:"activity",label:"Activity",icon:tr,count:_.length>0?_.length:void 0}].map(V=>s.jsxs(F7,{value:V.id,className:"rounded-none border-b-2 border-transparent data-[state=active]:border-destructive data-[state=active]:text-destructive data-[state=active]:shadow-none bg-transparent px-4 py-2.5 text-sm gap-1.5",children:[s.jsx(V.icon,{className:"w-3.5 h-3.5"}),V.label,V.count!==void 0&&s.jsx("span",{className:"ml-1 text-[10px] px-1.5 py-0.5 rounded-full bg-destructive/10 text-destructive font-semibold",children:V.count})]},V.id))}),s.jsx(pd,{value:"info",className:"mt-4 pb-0",children:s.jsxs("div",{className:"divide-y divide-border",children:[s.jsx(Va,{icon:fn,label:"Name *",value:e.name}),s.jsx(Va,{icon:Id,label:"Role",value:e.role}),s.jsx(Va,{icon:Wn,label:"Email",value:e.email}),s.jsx(Va,{icon:TC,label:"Phone",value:e.phone}),s.jsx(Va,{icon:of,label:"Organization",value:e.organization}),s.jsx(Va,{icon:K6,label:"LinkedIn",value:e.linkedin}),s.jsx(Va,{icon:Id,label:"Department",value:e.department}),s.jsx(Va,{icon:W6,label:"Location",value:e.location}),s.jsx(Va,{icon:lf,label:"Timezone",value:e.timezone}),e.aliases&&e.aliases.length>0&&s.jsxs("div",{className:"grid grid-cols-2 gap-4 py-2.5 border-b border-border last:border-0",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(fn,{className:"w-4 h-4 text-destructive/70"})," Aliases"]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:e.aliases.map(V=>s.jsx("span",{className:"text-xs px-1.5 py-0.5 bg-secondary rounded text-muted-foreground",children:V},V))})]}),e.notes&&s.jsx(Va,{icon:J6,label:"Notes",value:e.notes})]})}),s.jsx(pd,{value:"projects",className:"mt-4 pb-0",children:s.jsx("div",{className:"space-y-1 max-h-60 overflow-y-auto",children:m.map(V=>{const ee=g.includes(V.id),ae=w===V.id;return s.jsxs("div",{className:"flex items-center justify-between py-2.5 border-b border-border last:border-0 hover:bg-secondary/10 px-2 rounded",children:[s.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-1",onClick:()=>q(V.id),children:[s.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${ee?"border-primary bg-primary":"border-border hover:border-muted-foreground"}`,children:ee&&s.jsx(sy,{className:"w-3 h-3 text-primary-foreground"})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:`text-sm ${ee?"text-foreground":"text-muted-foreground"}`,children:V.name}),V.description&&s.jsx("span",{className:"text-[10px] text-muted-foreground truncate max-w-[200px]",children:V.description})]})]}),ae?s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-primary text-primary-foreground font-semibold",children:"Primary"}):ee?s.jsx("button",{onClick:J=>{J.stopPropagation(),Z(V.id)},className:"text-[10px] px-2 py-0.5 rounded bg-secondary text-muted-foreground hover:text-foreground transition-colors",children:"Set Primary"}):null]},V.id)})})}),s.jsxs(pd,{value:"relations",className:"mt-4 pb-0",children:[j.length>0?s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:j.map((V,ee)=>{const ae=(V.type||"").replace("_"," "),J=V.other_contact?.name||"Unknown";return s.jsxs("div",{className:"flex items-center gap-3 py-2.5 border-b border-border last:border-0 group/rel",children:[s.jsx(hj,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("div",{className:"flex-1 flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"font-medium text-foreground",children:e.name}),s.jsx("span",{className:"text-muted-foreground text-xs px-1 bg-secondary rounded",children:ae}),s.jsx("span",{className:"font-medium text-foreground",children:J})]}),s.jsx("button",{className:"opacity-0 group-hover/rel:opacity-100 transition-opacity text-destructive/60 hover:text-destructive",title:"Remove relationship",onClick:()=>{V.other_contact?.id&&R.mutate({contactId:e.id,toContactId:V.other_contact.id,type:V.type},{onSuccess:()=>{N(se=>se.filter((ne,oe)=>oe!==ee)),G.success("Relationship removed")},onError:()=>G.error("Failed to remove relationship")})},children:s.jsx(mn,{className:"w-3.5 h-3.5"})})]},ee)})}):s.jsxs("div",{className:"flex flex-col items-center py-8 text-muted-foreground",children:[s.jsx(hj,{className:"w-10 h-10 mb-2 opacity-40"}),s.jsx("p",{className:"text-sm",children:"No relationships yet"})]}),M?s.jsxs("div",{className:"mt-3 p-3 rounded-lg border border-border bg-secondary/30 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs(Wi,{value:z,onValueChange:Y,children:[s.jsx(ti,{className:"text-sm",children:s.jsx(Qi,{placeholder:"Select contact"})}),s.jsx(ri,{children:T.map(V=>s.jsx(bn,{value:V.id,children:V.name},V.id))})]}),s.jsxs(Wi,{value:I,onValueChange:K,children:[s.jsx(ti,{className:"text-sm",children:s.jsx(Qi,{})}),s.jsxs(ri,{children:[s.jsx(bn,{value:"reports_to",children:"Reports to"}),s.jsx(bn,{value:"manages",children:"Manages"}),s.jsx(bn,{value:"leads",children:"Leads"}),s.jsx(bn,{value:"works_with",children:"Works with"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Mt,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>{D(!1),Y("")},children:"Cancel"}),s.jsx(Mt,{size:"sm",className:"flex-1",disabled:!z,onClick:B,children:"Add"})]})]}):s.jsxs("button",{onClick:()=>D(!0),className:"flex items-center gap-1.5 text-sm text-muted-foreground hover:text-foreground mt-4 transition-colors",children:[s.jsx(br,{className:"w-4 h-4"})," Add Relationship"]})]}),s.jsx(pd,{value:"mentions",className:"mt-4 pb-0",children:k.length>0?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex gap-2 pb-2 overflow-x-auto",children:["all","document","email","conversation"].map(V=>s.jsxs("button",{onClick:()=>L(V==="all"?null:V),className:`text-xs px-2.5 py-1 rounded-full border transition-colors ${U===V||U===null&&V==="all"?"bg-destructive/10 text-destructive border-destructive/20":"bg-secondary/50 text-muted-foreground border-transparent hover:bg-secondary"}`,children:[V.charAt(0).toUpperCase()+V.slice(1),"s"]},V))}),s.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:[k.filter(V=>!U||V.type===U).map(V=>s.jsxs("div",{className:"flex gap-3 py-3 border-b border-border last:border-0 group",children:[s.jsx("div",{className:"mt-0.5",children:V.type==="email"?s.jsx(Wn,{className:"w-3.5 h-3.5 text-blue-400"}):V.type==="conversation"?s.jsx(ms,{className:"w-3.5 h-3.5 text-violet-400"}):s.jsx(Wt,{className:"w-3.5 h-3.5 text-amber-400"})}),s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("span",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:V.source||""}),s.jsx("span",{className:"text-[10px] text-muted-foreground whitespace-nowrap ml-2",children:V.date?new Date(V.date).toLocaleDateString():""})]}),s.jsxs("p",{className:"text-sm text-foreground line-clamp-2 bg-secondary/20 p-2 rounded border border-border/50 italic",children:['"',V.text,'"']}),V.link&&s.jsxs("a",{href:V.link,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-primary hover:underline inline-flex items-center gap-1 mt-1 font-medium transition-colors",children:["View Context ",s.jsx(ob,{className:"w-3 h-3"})]})]})]},V.id)),k.filter(V=>!U||V.type===U).length===0&&s.jsx("p",{className:"text-center text-sm text-muted-foreground py-8",children:"No mentions found for this filter"})]})]}):s.jsxs("div",{className:"flex flex-col items-center py-8 text-muted-foreground",children:[s.jsx(ms,{className:"w-10 h-10 mb-2 opacity-40"}),s.jsx("p",{className:"text-sm",children:"No mentions found"})]})}),s.jsx(pd,{value:"activity",className:"mt-4 pb-0",children:_.length>0?s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:_.map(V=>s.jsxs("div",{className:"flex items-center gap-3 py-2.5 border-b border-border last:border-0",children:[V.status==="completed"||V.status==="approved"?s.jsx(sy,{className:"w-4 h-4 text-emerald-500 shrink-0"}):V.status==="overdue"||V.status==="rejected"?s.jsx(vr,{className:"w-4 h-4 text-destructive shrink-0"}):s.jsx(tr,{className:"w-4 h-4 text-muted-foreground shrink-0"}),s.jsx("span",{className:"text-sm text-foreground flex-1 truncate",children:V.description}),s.jsx("span",{className:"text-[10px] text-muted-foreground shrink-0",children:V.date?new Date(V.date).toLocaleDateString():""})]},`${V.type}-${V.id}`))}):s.jsxs("div",{className:"flex flex-col items-center py-8 text-muted-foreground",children:[s.jsx(tr,{className:"w-10 h-10 mb-2 opacity-40"}),s.jsx("p",{className:"text-sm",children:"No activity recorded yet"})]})})]})}),s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t border-border mt-4",children:[s.jsxs(Mt,{variant:"outline",size:"sm",className:"text-destructive border-destructive/30 hover:bg-destructive/10 gap-1.5",onClick:()=>a(e.id),children:[s.jsx(Et,{className:"w-3.5 h-3.5"})," Delete"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Mt,{variant:"outline",size:"sm",onClick:r,children:"Cancel"}),s.jsxs(Mt,{size:"sm",className:"gap-1.5 bg-destructive hover:bg-destructive/90",onClick:()=>n(e),children:[s.jsx(sy,{className:"w-3.5 h-3.5"})," Save Changes"]})]})]})]})})},H$=["from-rose-400 to-pink-500","from-violet-400 to-purple-500","from-blue-400 to-cyan-500","from-emerald-400 to-teal-500","from-amber-400 to-orange-500","from-fuchsia-400 to-pink-500"],G$=e=>{let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);return H$[Math.abs(t)%H$.length]},W$=e=>(e||"?").split(" ").map(t=>t[0]).join("").toUpperCase().slice(0,2);function YMe(){const[e,t]=y.useState(""),[r,n]=y.useState(!1),[a,i]=y.useState(null),[o,c]=y.useState(null),[d,f]=y.useState(""),[m,h]=y.useState(""),[g,x]=y.useState(!1),[w,b]=y.useState(!1),[j,N]=y.useState(new Set),[_,S]=y.useState(!1),[k,A]=y.useState(!1),[T,O]=y.useState({}),[P,R]=y.useState(!1),M=y.useRef(null),[D,z]=y.useState(!1),[Y,I]=y.useState({}),K=mf({search:e||void 0,organization:d||void 0}),U=moe(),L=hoe(),F=poe(),q=goe(),Z=xoe(),B=W8(),V=yoe(),ee=voe(),ae=boe(),J=woe(),se=joe(),ne=K.data,oe=Array.isArray(ne)?ne:ne?.contacts??[],Q=y.useMemo(()=>{const ge=new Set;return oe.forEach(Fe=>{Fe.organization&&ge.add(Fe.organization)}),Array.from(ge).sort()},[oe]),pe=y.useMemo(()=>{const ge=new Set;return oe.forEach(Fe=>{const nt=Fe.tags;Array.isArray(nt)&&nt.forEach(it=>ge.add(it))}),Array.from(ge).sort()},[oe]),he=y.useMemo(()=>{let ge=oe;return m&&(ge=ge.filter(Fe=>Array.isArray(Fe.tags)&&Fe.tags.includes(m))),g&&(ge=ge.filter(Fe=>Fe.is_favorite||Fe.isFavorite)),ge},[oe,m,g]),te=y.useMemo(()=>oe.filter(ge=>ge.is_favorite||ge.isFavorite),[oe]),we=q.data?.duplicates||[],ke=ae.data?.unmatched||[],Ve=ge=>{U.mutate(ge,{onSuccess:()=>{G.success("Contact created"),n(!1)},onError:()=>G.error("Failed to create contact")})},Be=ge=>{a&&L.mutate({id:a.id,...ge},{onSuccess:()=>{G.success("Contact updated"),i(null),n(!1)},onError:()=>G.error("Failed to update contact")})},rt=ge=>{F.mutate(ge,{onSuccess:()=>{G.success("Contact deleted"),c(null)},onError:()=>G.error("Failed to delete contact")})},Pr=ge=>{c(null),i(ge),n(!0)},hr=ge=>{const Fe=ge.is_favorite||ge.isFavorite;L.mutate({id:ge.id,is_favorite:!Fe},{onSuccess:()=>G.success(Fe?"Removed from favorites":"Added to favorites"),onError:()=>G.error("Failed to update")})},pn=ge=>{N(Fe=>{const nt=new Set(Fe);return nt.has(ge)?nt.delete(ge):nt.add(ge),nt})},Dn=()=>{if(j.size<2){G.error("Select at least 2 contacts to merge");return}Z.mutate(Array.from(j),{onSuccess:()=>{G.success("Contacts merged"),N(new Set),S(!1)},onError:()=>G.error("Merge failed")})},Ns=(ge,Fe)=>{if(!T[ge]){G.error("Select a primary contact");return}const it=Fe.map(_n=>_n.id);Z.mutate(it,{onSuccess:()=>{G.success("Duplicates merged"),q.refetch()},onError:()=>G.error("Merge failed")})},Ss=ge=>{B.mutate(ge,{onSuccess:Fe=>{if(G.success("AI enrichment complete"),Fe?.suggestions){const nt=Fe.suggestions,it=[];nt.role&&it.push(`Role: ${nt.role}`),nt.department&&it.push(`Dept: ${nt.department}`),nt.tags&&it.push(`Tags: ${nt.tags.join(", ")}`),it.length&&G.info(it.join(" | "))}K.refetch()},onError:()=>G.error("Enrichment failed")})},nr=ge=>{const Fe=ge.target.files?.[0];if(!Fe)return;const nt=new FileReader;nt.onload=()=>{const it=nt.result;if(Fe.name.endsWith(".csv"))ee.mutate({format:"csv",data:it},{onSuccess:Ra=>{G.success(`Imported ${Ra?.added||0} contacts`),R(!1)},onError:()=>G.error("Import failed")});else try{const Ra=JSON.parse(it);ee.mutate({format:"json",data:Ra},{onSuccess:_e=>{G.success(`Imported ${_e?.added||0} contacts`),R(!1)},onError:()=>G.error("Import failed")})}catch{G.error("Invalid JSON file")}},nt.readAsText(Fe),ge.target.value=""},_s=(ge,Fe)=>{J.mutate({participantName:ge,contactId:Fe},{onSuccess:()=>G.success(`Linked "${ge}"`),onError:()=>G.error("Link failed")})};return r?s.jsxs("div",{className:"p-6 max-w-2xl",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("button",{onClick:()=>{n(!1),i(null)},className:"w-8 h-8 rounded-lg bg-secondary flex items-center justify-center hover:bg-muted",children:s.jsx(mn,{className:"w-4 h-4 text-muted-foreground"})}),s.jsx("h1",{className:"text-2xl font-bold text-foreground",children:a?"Edit Contact":"Add Contact"})]}),s.jsx("div",{className:"bg-card border border-border rounded-xl p-5",children:s.jsx(EMe,{contact:a,mode:a?"edit":"add",onSubmit:a?Be:Ve,onCancel:()=>{n(!1),i(null)}})})]}):s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[s.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Contacts"}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("button",{onClick:()=>se.mutate(void 0,{onSuccess:ge=>G.success(`Synced: ${ge?.added||0} added`),onError:()=>G.error("Sync failed")}),className:"px-2.5 py-1.5 rounded-lg bg-secondary text-muted-foreground text-xs hover:bg-muted flex items-center gap-1.5",title:"Sync people from documents to contacts",children:[s.jsx(Gs,{className:`w-3.5 h-3.5 ${se.isPending?"animate-spin":""}`})," Sync People"]}),ke.length>0&&s.jsxs("button",{onClick:()=>z(!D),className:"px-2.5 py-1.5 rounded-lg bg-amber-500/10 text-amber-600 text-xs hover:bg-amber-500/20 flex items-center gap-1.5",children:[s.jsx(fP,{className:"w-3.5 h-3.5"})," ",ke.length," Unmatched"]}),we.length>0&&s.jsxs("button",{onClick:()=>A(!k),className:"px-2.5 py-1.5 rounded-lg bg-orange-500/10 text-orange-600 text-xs hover:bg-orange-500/20 flex items-center gap-1.5",children:[s.jsx(vr,{className:"w-3.5 h-3.5"})," ",we.length," Duplicate groups"]}),s.jsxs("button",{onClick:()=>{S(!_),N(new Set)},className:`px-2.5 py-1.5 rounded-lg text-xs flex items-center gap-1.5 ${_?"bg-primary text-primary-foreground":"bg-secondary text-muted-foreground hover:bg-muted"}`,children:[s.jsx(Oy,{className:"w-3.5 h-3.5"})," Select"]}),s.jsxs("div",{className:"relative group",children:[s.jsxs("button",{className:"px-2.5 py-1.5 rounded-lg bg-secondary text-muted-foreground text-xs hover:bg-muted flex items-center gap-1.5",children:[s.jsx(Xi,{className:"w-3.5 h-3.5"})," Export ",s.jsx(un,{className:"w-3 h-3"})]}),s.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-card border border-border rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-20 min-w-[120px]",children:[s.jsxs("button",{onClick:()=>V.mutate("json"),className:"w-full px-3 py-2 text-xs text-left hover:bg-secondary flex items-center gap-2 rounded-t-lg",children:[s.jsx(SC,{className:"w-3.5 h-3.5"})," JSON"]}),s.jsxs("button",{onClick:()=>V.mutate("csv"),className:"w-full px-3 py-2 text-xs text-left hover:bg-secondary flex items-center gap-2 rounded-b-lg",children:[s.jsx(Wee,{className:"w-3.5 h-3.5"})," CSV"]})]})]}),s.jsxs("button",{onClick:()=>M.current?.click(),className:"px-2.5 py-1.5 rounded-lg bg-secondary text-muted-foreground text-xs hover:bg-muted flex items-center gap-1.5",children:[s.jsx(db,{className:"w-3.5 h-3.5"})," Import"]}),s.jsx("input",{ref:M,type:"file",accept:".json,.csv",className:"hidden",onChange:nr}),s.jsxs("button",{onClick:()=>{i(null),n(!0)},className:"px-3 py-1.5 rounded-lg bg-primary text-primary-foreground text-xs font-medium hover:bg-primary/90 flex items-center gap-1.5",children:[s.jsx(br,{className:"w-3.5 h-3.5"})," Add Contact"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("div",{className:"relative max-w-sm flex-1 min-w-[200px]",children:[s.jsx(bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-muted-foreground"}),s.jsx("input",{value:e,onChange:ge=>t(ge.target.value),placeholder:"Search contacts...",className:"w-full pl-9 pr-3 py-1.5 bg-secondary border border-border rounded-lg text-xs text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]}),s.jsxs("button",{onClick:()=>b(!w),className:`px-2.5 py-1.5 rounded-lg text-xs flex items-center gap-1.5 ${d||m||g?"bg-primary/10 text-primary border border-primary/30":"bg-secondary text-muted-foreground hover:bg-muted"}`,children:[s.jsx(_C,{className:"w-3.5 h-3.5"})," Filters",(d||m||g)&&s.jsx("span",{className:"px-1.5 py-0.5 rounded-full bg-primary text-primary-foreground text-[10px]",children:[d,m,g].filter(Boolean).length})]}),s.jsxs("button",{onClick:()=>x(!g),className:`px-2.5 py-1.5 rounded-lg text-xs flex items-center gap-1.5 ${g?"bg-amber-500/10 text-amber-500 border border-amber-500/30":"bg-secondary text-muted-foreground hover:bg-muted"}`,children:[s.jsx(Fs,{className:`w-3.5 h-3.5 ${g?"fill-amber-500":""}`})," Favorites ",te.length>0&&`(${te.length})`]})]}),w&&s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-secondary/50 border border-border flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs text-muted-foreground",children:"Organization:"}),s.jsxs("select",{value:d,onChange:ge=>f(ge.target.value),className:"px-2 py-1 bg-background border border-border rounded text-xs text-foreground",children:[s.jsx("option",{value:"",children:"All"}),Q.map(ge=>s.jsx("option",{value:ge,children:ge},ge))]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs text-muted-foreground",children:"Tag:"}),s.jsxs("select",{value:m,onChange:ge=>h(ge.target.value),className:"px-2 py-1 bg-background border border-border rounded text-xs text-foreground",children:[s.jsx("option",{value:"",children:"All"}),pe.map(ge=>s.jsx("option",{value:ge,children:ge},ge))]})]}),(d||m)&&s.jsx("button",{onClick:()=>{f(""),h("")},className:"text-xs text-primary hover:underline",children:"Clear filters"})]}),_&&j.size>0&&s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-primary/5 border border-primary/20",children:[s.jsxs("span",{className:"text-xs text-primary font-medium",children:[j.size," selected"]}),s.jsxs("button",{onClick:Dn,disabled:j.size<2||Z.isPending,className:"px-2.5 py-1 rounded bg-primary text-primary-foreground text-xs flex items-center gap-1.5 disabled:opacity-50",children:[s.jsx(dP,{className:"w-3.5 h-3.5"})," Merge Selected"]}),s.jsx("button",{onClick:()=>{N(new Set),S(!1)},className:"text-xs text-muted-foreground hover:text-foreground",children:"Cancel"})]}),D&&ke.length>0&&s.jsxs("div",{className:"p-4 rounded-xl border border-amber-500/30 bg-amber-500/5 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[s.jsx(fP,{className:"w-4 h-4 text-amber-500"})," Unmatched Participants (",ke.length,")"]}),s.jsx("button",{onClick:()=>z(!1),className:"text-muted-foreground hover:text-foreground",children:s.jsx(mn,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-[11px] text-muted-foreground",children:"These names were found in documents but don't match any contact. Link them to existing contacts."}),s.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:ke.map(ge=>s.jsxs("div",{className:"flex items-center gap-2 p-2 rounded bg-background border border-border",children:[s.jsx("span",{className:"text-xs font-medium text-foreground flex-1",children:ge.name}),ge.count&&s.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[ge.count," mentions"]}),s.jsxs("select",{value:Y[ge.name]||"",onChange:Fe=>I(nt=>({...nt,[ge.name]:Fe.target.value})),className:"px-2 py-1 bg-secondary border border-border rounded text-xs max-w-[150px]",children:[s.jsx("option",{value:"",children:"Link to..."}),oe.map(Fe=>s.jsx("option",{value:Fe.id,children:Fe.name},Fe.id))]}),s.jsxs("button",{disabled:!Y[ge.name],onClick:()=>Y[ge.name]&&_s(ge.name,Y[ge.name]),className:"px-2 py-1 rounded bg-primary text-primary-foreground text-[10px] disabled:opacity-40 flex items-center gap-1",children:[s.jsx(lb,{className:"w-3 h-3"})," Link"]})]},ge.name))})]}),k&&we.length>0&&s.jsxs("div",{className:"p-4 rounded-xl border border-orange-500/30 bg-orange-500/5 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[s.jsx(vr,{className:"w-4 h-4 text-orange-500"})," Duplicate Groups (",we.length,")"]}),s.jsx("button",{onClick:()=>A(!1),className:"text-muted-foreground hover:text-foreground",children:s.jsx(mn,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:we.map((ge,Fe)=>{const nt=Array.isArray(ge)?ge:ge.contacts||[ge];return s.jsxs("div",{className:"p-3 rounded-lg bg-background border border-border space-y-2",children:[s.jsxs("p",{className:"text-[10px] text-muted-foreground uppercase tracking-wider",children:["Group ",Fe+1,"  Select primary"]}),nt.map(it=>s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-1 rounded hover:bg-secondary",children:[s.jsx("input",{type:"radio",name:`merge-group-${Fe}`,checked:T[Fe]===it.id,onChange:()=>O(_n=>({..._n,[Fe]:it.id})),className:"accent-primary"}),s.jsx("span",{className:"text-xs text-foreground",children:it.name}),it.email&&s.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["(",it.email,")"]})]},it.id)),s.jsxs("button",{onClick:()=>Ns(Fe,nt),disabled:!T[Fe]||Z.isPending,className:"px-2.5 py-1 rounded bg-orange-500 text-white text-xs disabled:opacity-50 flex items-center gap-1",children:[s.jsx(dP,{className:"w-3 h-3"})," Merge Group"]})]},Fe)})})]}),te.length>0&&!g&&s.jsxs("div",{children:[s.jsxs("p",{className:"text-xs text-muted-foreground mb-2 flex items-center gap-1",children:[s.jsx(Fs,{className:"w-3 h-3 fill-amber-500 text-amber-500"})," Favorites"]}),s.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:te.map(ge=>s.jsxs("button",{onClick:()=>c(ge),className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-card border border-border hover:border-primary/30 flex-shrink-0",children:[s.jsx("div",{className:`w-7 h-7 rounded-full bg-gradient-to-br ${G$(ge.name)} flex items-center justify-center`,children:ge.avatarUrl&&ge.avatarUrl!=="undefined"&&ge.avatarUrl!=="null"||ge.avatar&&ge.avatar!=="undefined"&&ge.avatar!=="null"?s.jsx("img",{src:ge.avatarUrl&&ge.avatarUrl!=="undefined"?ge.avatarUrl:ge.avatar,alt:ge.name,className:"w-full h-full rounded-full object-cover"}):s.jsx("span",{className:"text-[9px] font-bold text-white",children:W$(ge.name||"?")})}),s.jsxs("div",{className:"text-left",children:[s.jsx("p",{className:"text-xs font-medium text-foreground",children:ge.name}),ge.role&&s.jsx("p",{className:"text-[10px] text-muted-foreground",children:ge.role})]})]},ge.id))})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[he.length," contact",he.length!==1?"s":""]}),K.isLoading?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx(ye,{className:"h-8 w-8 animate-spin text-primary"})}):he.length===0?s.jsxs("div",{className:"rounded-xl border border-border bg-card p-8 text-center text-muted-foreground",children:[s.jsx(yr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/40"}),e||d||m?"No contacts match your filters.":"No contacts found. Add one to get started."]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:he.map(ge=>{const Fe=ge.is_favorite||ge.isFavorite,nt=j.has(ge.id);return s.jsxs("div",{className:`bg-card border rounded-xl p-4 hover:border-primary/30 transition-colors cursor-pointer group relative ${nt?"border-primary bg-primary/5":"border-border"}`,onClick:()=>_?pn(ge.id):c(ge),children:[_&&s.jsx("div",{className:"absolute top-3 left-3 z-10",children:nt?s.jsx(Oy,{className:"w-4 h-4 text-primary"}):s.jsx(vre,{className:"w-4 h-4 text-muted-foreground"})}),s.jsx("button",{className:"absolute top-3 right-3 z-10 opacity-0 group-hover:opacity-100 transition-opacity",onClick:it=>{it.stopPropagation(),hr(ge)},title:Fe?"Remove from favorites":"Add to favorites",children:s.jsx(Fs,{className:`w-4 h-4 ${Fe?"fill-amber-500 text-amber-500":"text-muted-foreground hover:text-amber-500"}`})}),s.jsx("button",{className:"absolute top-3 right-9 z-10 opacity-0 group-hover:opacity-100 transition-opacity",onClick:it=>{it.stopPropagation(),Ss(ge.id)},title:"Enrich with AI",children:s.jsx(qt,{className:`w-4 h-4 text-violet-400 hover:text-violet-300 ${B.isPending?"animate-pulse":""}`})}),s.jsxs("div",{className:`flex items-center gap-3 ${_?"ml-5":""}`,children:[s.jsx("div",{className:`w-10 h-10 rounded-full bg-gradient-to-br ${G$(ge.name)} flex items-center justify-center flex-shrink-0`,children:ge.avatarUrl&&ge.avatarUrl!=="undefined"&&ge.avatarUrl!=="null"||ge.avatar&&ge.avatar!=="undefined"&&ge.avatar!=="null"?s.jsx("img",{src:ge.avatarUrl&&ge.avatarUrl!=="undefined"?ge.avatarUrl:ge.avatar,alt:ge.name,className:"w-full h-full rounded-full object-cover"}):s.jsx("span",{className:"text-xs font-bold text-white",children:W$(ge.name||"?")})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("p",{className:"text-sm font-medium text-foreground truncate group-hover:text-primary transition-colors",children:[ge.name||"(unnamed)",Fe&&s.jsx(Fs,{className:"w-3 h-3 inline ml-1 fill-amber-500 text-amber-500"})]}),ge.role&&s.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[s.jsx(Id,{className:"w-3 h-3 text-muted-foreground"}),s.jsx("span",{className:"text-[10px] text-muted-foreground truncate",children:ge.role})]})]})]}),s.jsxs("div",{className:"mt-3 space-y-1",children:[ge.organization&&s.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-muted-foreground",children:[s.jsx(of,{className:"w-3 h-3"}),s.jsx("span",{className:"truncate",children:ge.organization})]}),ge.email&&s.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-muted-foreground",children:[s.jsx(Wn,{className:"w-3 h-3"}),s.jsx("span",{className:"truncate",children:ge.email})]}),ge.phone&&s.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-muted-foreground",children:[s.jsx(TC,{className:"w-3 h-3"}),s.jsx("span",{className:"truncate",children:ge.phone})]}),ge.tags&&ge.tags.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[ge.tags.slice(0,4).map(it=>s.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded-full bg-secondary text-muted-foreground",children:it},it)),ge.tags.length>4&&s.jsxs("span",{className:"text-[9px] text-muted-foreground",children:["+",ge.tags.length-4]})]})]})]},ge.id)})}),s.jsx(QMe,{contact:o,open:!!o,onClose:()=>c(null),onEdit:Pr,onDelete:rt})]})}function XMe({url:e,name:t,initials:r}){const[n,a]=y.useState(!1);return e&&!n?s.jsx("img",{src:e,alt:t,referrerPolicy:"no-referrer",onError:()=>a(!0),className:"w-14 h-14 rounded-full object-cover border-2 border-gm-interactive-primary/30"}):s.jsx("div",{className:"w-14 h-14 rounded-full flex items-center justify-center text-lg font-bold text-white border-2 border-white/20",style:{background:`linear-gradient(135deg, ${Hh(t)}, ${TA(Hh(t),-30)})`},children:r})}function ZMe({profile:e,open:t,onClose:r}){const n=pb();if(!e)return null;const a=e.contact??{},i=String(a.name||e.person_name||"Unknown"),o=String(a.role||a.organization||""),c=i.split(" ").map(_=>_[0]).join("").substring(0,2).toUpperCase(),d=a.avatar_url||a.photo_url,f=typeof d=="string"&&d.length>0&&d!=="undefined"&&d!=="null"?d:null,m=e.profile_data??{},h=String(e.confidence_level||"low"),g=String(e.contact_id||e.person_id||""),x=Number(e.total_speaking_time_seconds||0),w=e.limitations??[],b=e.last_analysis_at?new Date(String(e.last_analysis_at)).toLocaleString():"",j=()=>{g&&n.mutate({personId:g,forceReanalysis:!0},{onSuccess:()=>G.success(`Re-analysis started for ${i}`),onError:()=>G.error("Failed to start re-analysis")})},N=_=>{if(!_)return"";const S=Math.floor(_/60),k=_%60;return S>0?`${S}m ${k}s`:`${k}s`};return s.jsx(Ws,{open:t,onOpenChange:_=>!_&&r(),children:s.jsxs(ui,{className:"max-w-3xl p-0 overflow-hidden",children:[s.jsxs(Na,{className:"sr-only",children:["Profile: ",i]}),s.jsxs("div",{className:"bg-gradient-to-r from-gm-interactive-primary/20 to-gm-interactive-primary/5 p-5",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:r,className:"text-gm-text-tertiary hover:text-gm-text-primary transition-colors",children:s.jsx(vs,{className:"w-5 h-5"})}),s.jsx(XMe,{url:f,name:i,initials:c}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"text-lg font-bold text-gm-text-primary",children:i}),s.jsxs("div",{className:"flex items-center gap-2 mt-0.5 flex-wrap",children:[o&&s.jsx("span",{className:"text-xs text-gm-text-tertiary",children:o}),s.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium capitalize ${h==="high"||h==="very_high"?"bg-gm-status-success-bg text-gm-status-success":h==="medium"?"bg-gm-status-warning-bg text-gm-status-warning":"bg-gm-surface-secondary text-gm-text-tertiary"}`,children:[h.replace("_"," ")," confidence"]})]})]}),s.jsxs("button",{onClick:j,disabled:n.isPending,className:"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover flex items-center gap-1.5 disabled:opacity-50 transition-colors",children:[n.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Qr,{className:"w-3.5 h-3.5"}),"Re-analyze"]})]}),s.jsxs("div",{className:"flex gap-3 mt-4",children:[s.jsx(Um,{label:"Influence",value:String(e.influence_score||0)}),s.jsx(Um,{label:"Transcripts",value:String(e.transcript_count||0)}),s.jsx(Um,{label:"Risk",value:String(e.risk_tolerance||"")}),s.jsx(Um,{label:"Speaking Time",value:N(x)}),s.jsx(Um,{label:"Last Analysis",value:b})]})]}),s.jsxs("div",{className:"p-5 max-h-[60vh] overflow-y-auto space-y-4",children:[e.communication_style&&s.jsxs("div",{className:"bg-gm-interactive-primary/5 border border-gm-interactive-primary/10 rounded-xl p-4",children:[s.jsx("h4",{className:"text-[10px] text-gm-interactive-primary font-semibold uppercase tracking-wider mb-1",children:"Communication Style"}),s.jsx("p",{className:"text-sm text-gm-text-primary",children:String(e.communication_style)})]}),e.dominant_motivation&&s.jsxs("div",{className:"bg-gm-status-success-bg/30 border border-gm-status-success/10 rounded-xl p-4",children:[s.jsx("h4",{className:"text-[10px] text-gm-status-success font-semibold uppercase tracking-wider mb-1",children:"Dominant Motivation"}),s.jsx("p",{className:"text-sm text-gm-text-primary",children:String(e.dominant_motivation)})]}),s.jsx(JMe,{data:m}),s.jsx(eRe,{data:m}),s.jsx(tRe,{data:m}),s.jsx(rRe,{data:m}),s.jsx(nRe,{data:m}),s.jsx(sRe,{data:m}),s.jsx(aRe,{data:m}),s.jsx(iRe,{data:m}),w.length>0&&s.jsxs("div",{className:"bg-gm-surface-secondary/30 rounded-xl p-4",children:[s.jsx(wo,{icon:Wt,title:"Limitations"}),s.jsx("ul",{className:"space-y-1",children:w.map((_,S)=>s.jsxs("li",{className:"text-xs text-gm-text-tertiary flex items-start gap-2",children:[s.jsx("span",{className:"text-gm-text-tertiary/50 mt-0.5",children:""})," ",_]},S))})]}),Object.keys(m).length===0&&!e.communication_style&&s.jsxs("div",{className:"text-center py-8 text-gm-text-tertiary",children:[s.jsx(eu,{className:"w-10 h-10 mx-auto mb-3 text-gm-text-tertiary/40"}),s.jsx("p",{className:"text-sm",children:"No detailed profile data available yet."}),s.jsx("p",{className:"text-xs mt-1",children:'Click "Re-analyze" to generate AI insights.'})]})]})]})})}function Um({label:e,value:t}){return s.jsxs("div",{className:"bg-gm-surface-primary/60 backdrop-blur rounded-lg px-3 py-1.5 text-center",children:[s.jsx("p",{className:"text-sm font-bold text-gm-text-primary",children:t}),s.jsx("p",{className:"text-[9px] text-gm-text-tertiary uppercase tracking-wider",children:e})]})}function wo({icon:e,title:t}){return s.jsxs("h4",{className:"flex items-center gap-2 text-sm font-semibold text-gm-text-primary mb-3",children:[s.jsx(e,{className:"w-4 h-4 text-gm-interactive-primary"})," ",t]})}function JMe({data:e}){const t=e.communication_identity;return t?s.jsxs("div",{className:"bg-gm-surface-secondary/30 rounded-xl p-4",children:[s.jsx(wo,{icon:ms,title:"Communication Identity"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[t.dominant_style&&s.jsx(TS,{label:"Style",value:String(t.dominant_style)}),t.intervention_rhythm&&s.jsx(TS,{label:"Rhythm",value:String(t.intervention_rhythm)}),t.textual_body_language&&s.jsx(TS,{label:"Textual Cues",value:String(t.textual_body_language)})]}),s.jsx(B7,{evidence:t.evidence})]}):null}function eRe({data:e}){const t=e.motivations_and_priorities;if(!t)return null;const r=t.values_most??[],n=t.avoids??[];return s.jsxs("div",{className:"bg-gm-surface-secondary/30 rounded-xl p-4",children:[s.jsx(wo,{icon:Fs,title:"Motivations & Priorities"}),r.length>0&&s.jsxs("div",{className:"mb-2",children:[s.jsx("span",{className:"text-[10px] text-gm-text-tertiary font-medium",children:"Values most:"}),s.jsx("div",{className:"flex flex-wrap gap-1.5 mt-1",children:r.map((a,i)=>s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-success-bg text-gm-status-success",children:a},i))})]}),n.length>0&&s.jsxs("div",{className:"mb-2",children:[s.jsx("span",{className:"text-[10px] text-gm-text-tertiary font-medium",children:"Avoids:"}),s.jsx("div",{className:"flex flex-wrap gap-1.5 mt-1",children:n.map((a,i)=>s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-danger-bg text-gm-status-danger",children:a},i))})]}),t.based_on&&s.jsxs("p",{className:"text-[10px] text-gm-text-tertiary mt-1",children:["Based on: ",String(t.based_on)]}),t.confidence&&s.jsxs("p",{className:"text-[10px] text-gm-text-tertiary",children:["Confidence: ",String(t.confidence)]}),s.jsx(B7,{evidence:t.evidence})]})}function tRe({data:e}){const t=e.behavior_under_pressure;return t?.length?s.jsxs("div",{className:"bg-gm-surface-secondary/30 rounded-xl p-4",children:[s.jsx(wo,{icon:tr,title:"Behavior Under Pressure"}),s.jsx("div",{className:"space-y-2",children:t.map((r,n)=>s.jsxs("div",{className:"bg-gm-surface-primary/50 rounded-lg p-3",children:[s.jsx("p",{className:"text-xs font-medium text-gm-text-primary",children:String(r.situation)}),s.jsx("p",{className:"text-xs text-gm-text-tertiary mt-0.5",children:String(r.observed_behavior)}),r.quote&&s.jsxs("p",{className:"text-xs italic text-gm-text-tertiary mt-1 border-l-2 border-gm-interactive-primary/30 pl-2",children:['"',String(r.quote),'"']}),r.timestamp&&s.jsx("p",{className:"text-[10px] text-gm-text-tertiary/60 mt-1",children:String(r.timestamp)})]},n))})]}):null}function rRe({data:e}){const t=e.influence_tactics;return t?.length?s.jsxs("div",{className:"bg-gm-surface-secondary/30 rounded-xl p-4",children:[s.jsx(wo,{icon:Ld,title:"Influence Tactics"}),s.jsx("div",{className:"space-y-2",children:t.map((r,n)=>s.jsxs("div",{className:"bg-gm-surface-primary/50 rounded-lg p-3",children:[s.jsx("p",{className:"text-xs font-medium text-gm-text-primary",children:String(r.objective)}),s.jsx("p",{className:"text-xs text-gm-text-tertiary mt-0.5",children:String(r.tactic)}),r.example&&s.jsx("p",{className:"text-xs italic text-gm-text-tertiary mt-1 border-l-2 border-gm-interactive-primary/30 pl-2",children:String(r.example)}),r.timestamp&&s.jsx("p",{className:"text-[10px] text-gm-text-tertiary/60 mt-1",children:String(r.timestamp)})]},n))})]}):null}function nRe({data:e}){const t=e.vulnerabilities;if(!t)return null;const r=t.defense_triggers??[],n=t.blind_spots??[],a=t.discourse_action_inconsistencies??[],i=t.risk_patterns??[];return!r.length&&!n.length&&!a.length&&!i.length?null:s.jsxs("div",{className:"bg-gm-surface-secondary/30 rounded-xl p-4",children:[s.jsx(wo,{icon:cf,title:"Vulnerabilities & Friction Points"}),a.length>0&&s.jsx(Gx,{label:"Discourse-Action Inconsistencies",color:"text-gm-status-danger",items:a,field:"description",evidenceField:"evidence"}),r.length>0&&s.jsx(Gx,{label:"Defense Triggers",color:"text-gm-status-danger",items:r,field:"trigger",evidenceField:"evidence"}),n.length>0&&s.jsx(Gx,{label:"Blind Spots",color:"text-gm-status-warning",items:n,field:"description",evidenceField:"evidence"}),i.length>0&&s.jsx(Gx,{label:"Risk Patterns",color:"text-gm-status-warning",items:i,field:"pattern",evidenceField:"evidence"})]})}function Gx({label:e,color:t,items:r,field:n,evidenceField:a}){return s.jsxs("div",{className:"mb-3 last:mb-0",children:[s.jsx("p",{className:`text-[10px] font-semibold uppercase tracking-wider mb-1.5 ${t}`,children:e}),s.jsx("div",{className:"space-y-1.5",children:r.map((i,o)=>s.jsxs("div",{className:"bg-gm-surface-primary/50 rounded-lg p-2.5",children:[s.jsx("p",{className:"text-xs text-gm-text-primary",children:String(i[n]||i.text||i)}),i[a]&&s.jsx("p",{className:"text-[10px] text-gm-text-tertiary mt-0.5 italic",children:String(i[a])})]},o))})]})}function sRe({data:e}){const t=e.interaction_strategy;if(!t)return null;const r=t.framing_that_works??[],n=t.what_to_avoid??[],a=t.cooperation_triggers??[],i=t.ideal_format;return s.jsxs("div",{className:"bg-gm-surface-secondary/30 rounded-xl p-4",children:[s.jsx(wo,{icon:ms,title:"Recommended Interaction Strategy"}),i&&s.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[i.channel&&s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-interactive-primary/10 text-gm-interactive-primary",children:["Channel: ",String(i.channel)]}),i.structure&&s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-interactive-primary/10 text-gm-interactive-primary",children:["Structure: ",String(i.structure)]}),i.timing&&s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-interactive-primary/10 text-gm-interactive-primary",children:["Timing: ",String(i.timing)]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[r.length>0&&s.jsxs("div",{className:"bg-gm-surface-primary/50 rounded-lg p-3",children:[s.jsx("p",{className:"text-[10px] text-gm-status-success font-semibold uppercase tracking-wider mb-1",children:"What Works"}),s.jsx("ul",{className:"space-y-0.5",children:r.map((o,c)=>s.jsxs("li",{className:"text-xs text-gm-text-primary",children:["+ ",o]},c))})]}),n.length>0&&s.jsxs("div",{className:"bg-gm-surface-primary/50 rounded-lg p-3",children:[s.jsx("p",{className:"text-[10px] text-gm-status-danger font-semibold uppercase tracking-wider mb-1",children:"What to Avoid"}),s.jsx("ul",{className:"space-y-0.5",children:n.map((o,c)=>s.jsxs("li",{className:"text-xs text-gm-text-primary",children:["- ",o]},c))})]}),a.length>0&&s.jsxs("div",{className:"bg-gm-surface-primary/50 rounded-lg p-3",children:[s.jsx("p",{className:"text-[10px] text-gm-interactive-primary font-semibold uppercase tracking-wider mb-1",children:"Cooperation Triggers"}),s.jsx("ul",{className:"space-y-0.5",children:a.map((o,c)=>s.jsxs("li",{className:"text-xs text-gm-text-primary",children:[" ",o]},c))})]})]})]})}function aRe({data:e}){const t=e.early_warning_signs;return t?.length?s.jsxs("div",{className:"bg-gm-surface-secondary/30 rounded-xl p-4",children:[s.jsx(wo,{icon:vr,title:"Early Warning Signs"}),s.jsx("div",{className:"space-y-2",children:t.map((r,n)=>s.jsxs("div",{className:"bg-gm-status-warning-bg/30 rounded-lg p-3",children:[s.jsx("p",{className:"text-xs font-medium text-gm-text-primary",children:String(r.signal)}),s.jsxs("p",{className:"text-xs text-gm-text-tertiary mt-0.5",children:["Indicates: ",String(r.indicates)]}),r.comparison_evidence&&s.jsxs("p",{className:"text-[10px] text-gm-text-tertiary/70 mt-1 italic",children:["Evidence: ",String(r.comparison_evidence)]})]},n))})]}):null}function iRe({data:e}){const t=e.power_analysis;return t?.length?s.jsxs("div",{className:"bg-gm-surface-secondary/30 rounded-xl p-4",children:[s.jsx(wo,{icon:hn,title:"Power & Dependency Analysis"}),s.jsx("div",{className:"space-y-2",children:t.map((r,n)=>s.jsxs("div",{className:"bg-gm-surface-primary/50 rounded-lg p-3",children:[s.jsx("p",{className:"text-xs font-medium text-gm-text-primary",children:String(r.factor)}),s.jsx("p",{className:"text-xs text-gm-text-tertiary mt-0.5",children:String(r.assessment)}),r.strategic_implication&&s.jsxs("p",{className:"text-xs text-gm-interactive-primary mt-1",children:[" ",String(r.strategic_implication)]})]},n))})]}):null}function TS({label:e,value:t}){return s.jsxs("div",{className:"bg-gm-surface-primary/50 rounded-lg p-3",children:[s.jsx("span",{className:"text-[10px] text-gm-text-tertiary uppercase tracking-wider",children:e}),s.jsx("p",{className:"text-xs text-gm-text-primary mt-0.5",children:t})]})}function B7({evidence:e}){return e?.length?s.jsxs("div",{className:"mt-3 space-y-1.5",children:[s.jsx("p",{className:"text-[10px] text-gm-text-tertiary font-medium uppercase tracking-wider",children:"Evidence"}),e.slice(0,5).map((t,r)=>s.jsxs("div",{className:"text-xs bg-gm-surface-primary/30 rounded p-2",children:[t.quote&&s.jsxs("p",{className:"italic text-gm-text-tertiary border-l-2 border-gm-interactive-primary/30 pl-2",children:['"',String(t.quote),'"']}),t.observation&&s.jsx("p",{className:"text-gm-text-tertiary mt-0.5",children:String(t.observation)}),t.timestamp&&s.jsx("p",{className:"text-[10px] text-gm-text-tertiary/60 mt-0.5",children:String(t.timestamp)})]},r))]}):null}function Hh(e){const t=["#9b59b6","#3498db","#e74c3c","#27ae60","#f59e0b","#1abc9c","#e67e22","#34495e"];let r=0;for(let n=0;n<e.length;n++)r=e.charCodeAt(n)+((r<<5)-r);return t[Math.abs(r)%t.length]}function TA(e,t){const r=c=>Math.min(255,Math.max(0,c)),n=e.replace("#",""),a=r(parseInt(n.substring(0,2),16)+t),i=r(parseInt(n.substring(2,4),16)+t),o=r(parseInt(n.substring(4,6),16)+t);return`#${a.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}${o.toString(16).padStart(2,"0")}`}function co(e){return typeof e=="string"&&e.length>0&&e!=="undefined"&&e!=="null"}function Pp({url:e,name:t,size:r="md",className:n=""}){const[a,i]=y.useState(!1),o=t.split(" ").map(m=>m[0]).join("").substring(0,2).toUpperCase(),c=r==="sm"?"w-5 h-5":r==="lg"?"w-14 h-14":"w-8 h-8",d=r==="sm"?"text-[8px]":r==="lg"?"text-lg":"text-[10px]",f=r==="lg"?"border-2 border-white/20":"";return e&&!a?s.jsx("img",{src:e,alt:t,referrerPolicy:"no-referrer",onError:()=>i(!0),className:`${c} rounded-full object-cover flex-shrink-0 ${n}`}):s.jsx("div",{className:`${c} rounded-full flex items-center justify-center ${d} font-bold text-white flex-shrink-0 ${f} ${n}`,style:{background:`linear-gradient(135deg, ${Hh(t)}, ${TA(Hh(t),-30)})`},children:o})}function oRe(e){const t={};return e.forEach((r,n)=>{const a=r.contact??{},i=String(a.name||r.person_name||"Unknown"),o=i.split(" ").map(h=>h[0]).join("").substring(0,2).toUpperCase(),c=a.avatar_url||a.photo_url,d={name:i,initials:o,role:String(a.role||a.organization||""),avatarUrl:c?String(c):void 0};t[`person_${n+1}`]=d,t[`person ${n+1}`]=d,t[i.toLowerCase()]=d;const f=i.split(" ")[0];f&&(t[f.toLowerCase()]=d);const m=String(r.contact_id||r.person_id||"");m&&(t[m]=d)}),r=>{if(!r)return{name:"Unknown",initials:"?",role:""};const n=r.toLowerCase().trim();return t[n]||t[r]||{name:r.replace(/_/g," "),initials:r.split(" ").map(a=>a[0]).join("").substring(0,2).toUpperCase()||r.substring(0,2).toUpperCase(),role:""}}}function Cc(e,t){return e.replace(/Person_(\d+)/gi,r=>t(r).name)}function ha({name:e,resolve:t}){const r=t(e);return s.jsxs("div",{className:"inline-flex items-center gap-1.5 bg-gm-surface-primary border border-gm-border-primary rounded-full px-2.5 py-1",children:[s.jsx(Pp,{url:co(r.avatarUrl)?r.avatarUrl:null,name:r.name,size:"sm"}),s.jsx("span",{className:"text-[10px] font-medium text-gm-text-primary whitespace-nowrap",children:r.name})]})}const Q$={direct:{color:"#3b82f6",bg:"#eff6ff",icon:""},technical:{color:"#8b5cf6",bg:"#f5f3ff",icon:""},political:{color:"#f59e0b",bg:"#fffbeb",icon:""},social:{color:"#10b981",bg:"#ecfdf5",icon:""},resource:{color:"#ef4444",bg:"#fef2f2",icon:""}},Y$={natural:{color:"#10b981",bg:"#ecfdf5",icon:""},circumstantial:{color:"#6366f1",bg:"#eef2ff",icon:""},strategic:{color:"#f59e0b",bg:"#fffbeb",icon:""},historical:{color:"#8b5cf6",bg:"#f5f3ff",icon:""}},X$={technical:{color:"#8b5cf6",bg:"#f5f3ff",icon:""},resource:{color:"#f59e0b",bg:"#fffbeb",icon:""},political:{color:"#ef4444",bg:"#fef2f2",icon:""},communication:{color:"#3b82f6",bg:"#eff6ff",icon:""},values:{color:"#10b981",bg:"#ecfdf5",icon:""}},Z$={technical:{color:"#8b5cf6",bg:"#f5f3ff",icon:""},formal:{color:"#3b82f6",bg:"#eff6ff",icon:""},informal:{color:"#f59e0b",bg:"#fffbeb",icon:""},social:{color:"#10b981",bg:"#ecfdf5",icon:""},resource:{color:"#ef4444",bg:"#fef2f2",icon:""}};function lRe(){const[e,t]=y.useState("profiles"),[r,n]=y.useState(null),[a,i]=y.useState(!1),o=Q8(),c=Y8(),d=X8(),f=Aoe(),m=Z8(),h=J8(),g=y.useMemo(()=>o.data?.profiles??[],[o.data]),x=y.useMemo(()=>oRe(g),[g]),w=[{key:"profiles",label:"Profiles",icon:yr},{key:"team",label:"Team Dynamics",icon:wC},{key:"relationships",label:"Relationships",icon:ob},{key:"graph",label:"Network Graph",icon:yl}],b=()=>{m.mutate({forceReanalysis:!0},{onSuccess:()=>G.success("Team analysis started"),onError:()=>G.error("Failed to start team analysis")})},j=()=>{h.mutate(void 0,{onSuccess:()=>{G.success("Graph synced"),f.refetch()},onError:()=>G.error("Failed to sync graph")})};return s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold text-gm-text-primary",children:"Team Analysis"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>i(!0),className:"px-3 py-1.5 rounded-lg bg-gm-interactive-secondary text-gm-text-primary text-xs font-medium hover:bg-gm-interactive-secondary-hover flex items-center gap-1.5 transition-colors",children:[s.jsx(yr,{className:"w-3.5 h-3.5"})," Analyze Members"]}),s.jsxs("button",{onClick:b,disabled:m.isPending,className:"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover flex items-center gap-1.5 disabled:opacity-50 transition-colors",children:[m.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(OC,{className:"w-3.5 h-3.5"}),"Run Team Analysis"]}),s.jsxs("button",{onClick:j,disabled:h.isPending,className:"px-3 py-1.5 rounded-lg bg-gm-surface-secondary text-gm-text-primary text-xs font-medium hover:bg-gm-surface-hover flex items-center gap-1.5 disabled:opacity-50 transition-colors border border-gm-border-primary",children:[h.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Gs,{className:"w-3.5 h-3.5"}),"Sync Graph"]})]})]}),s.jsx("div",{className:"flex gap-1 bg-gm-surface-secondary rounded-xl p-1",children:w.map(N=>{const _=N.icon;return s.jsxs("button",{onClick:()=>t(N.key),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${e===N.key?"bg-gm-surface-primary text-gm-text-primary shadow-sm":"text-gm-text-tertiary hover:text-gm-text-primary"}`,children:[s.jsx(_,{className:"w-3.5 h-3.5"})," ",N.label]},N.key)})}),e==="profiles"&&s.jsx(cRe,{profiles:g,isLoading:o.isLoading,onSelectProfile:n}),e==="team"&&s.jsx(uRe,{data:c.data?.analysis??c.data,isLoading:c.isLoading,profiles:g,resolveName:x}),e==="relationships"&&s.jsx(xRe,{data:d.data,isLoading:d.isLoading,profiles:g,resolveName:x}),e==="graph"&&s.jsx(yRe,{data:f.data,isLoading:f.isLoading,profiles:g,resolveName:x}),s.jsx(ZMe,{profile:r,open:!!r,onClose:()=>n(null)}),s.jsx(bRe,{open:a,onClose:()=>i(!1),existingProfileIds:new Set(g.map(N=>String(N.contact_id||N.person_id||"")))})]})}function cRe({profiles:e,isLoading:t,onSelectProfile:r}){const n=pb();if(t)return s.jsx(Mp,{});if(e.length===0)return s.jsx(_0,{icon:yr,message:"No team profiles available. Click 'Analyze Members' to generate AI behavioral profiles."});const a=[...e].sort((o,c)=>(Number(c.influence_score)||0)-(Number(o.influence_score)||0)),i=(o,c)=>{o.stopPropagation();const d=String(c.contact_id||c.person_id||"");if(!d)return;const f=c.contact??{},m=String(f.name||c.person_name||"Unknown");n.mutate({personId:d,forceReanalysis:!0},{onSuccess:()=>G.success(`Re-analysis started for ${m}`),onError:()=>G.error("Failed to start re-analysis")})};return s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map((o,c)=>{const d=o.contact??{},f=String(d.name||o.person_name||"Unknown"),m=String(d.role||d.organization||"");f.split(" ").map(j=>j[0]).join("").substring(0,2).toUpperCase();const h=co(d.avatar_url)?d.avatar_url:co(d.photo_url)?d.photo_url:null,g=String(o.confidence_level||"low"),x=String(o.communication_style||""),w=Number(o.total_speaking_time_seconds||0),b=w?`${Math.floor(w/60)}m`:"";return s.jsxs("div",{onClick:()=>r(o),className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4 hover:border-gm-interactive-primary/30 hover:-translate-y-0.5 transition-all cursor-pointer group shadow-sm hover:shadow-md",children:[s.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[s.jsx(Pp,{url:h,name:f,size:"lg",className:"border-2 border-gm-surface-secondary"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"text-sm font-semibold text-gm-text-primary truncate group-hover:text-gm-interactive-primary transition-colors",children:f}),m&&s.jsx("p",{className:"text-[10px] text-gm-text-tertiary mt-0.5",children:m}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5",children:s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium capitalize ${g==="high"||g==="very_high"?"bg-gm-status-success-bg text-gm-status-success":g==="medium"?"bg-gm-status-warning-bg text-gm-status-warning":"bg-gm-surface-secondary text-gm-text-tertiary"}`,children:g.replace("_"," ")})})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 py-3 border-t border-gm-border-primary/50",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-base font-bold text-gm-text-primary",children:String(o.influence_score||0)}),s.jsx("p",{className:"text-[9px] text-gm-text-tertiary uppercase tracking-wider",children:"Influence"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-base font-bold text-gm-text-primary",children:String(o.transcript_count||0)}),s.jsx("p",{className:"text-[9px] text-gm-text-tertiary uppercase tracking-wider",children:"Transcripts"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-base font-bold text-gm-text-primary capitalize",children:String(o.risk_tolerance||"")}),s.jsx("p",{className:"text-[9px] text-gm-text-tertiary uppercase tracking-wider",children:"Risk"})]})]}),x&&s.jsxs("div",{className:"mt-2 bg-gm-surface-secondary/50 rounded-lg p-2.5",children:[s.jsx("p",{className:"text-[9px] text-gm-text-tertiary uppercase tracking-wider mb-0.5",children:"Communication Style"}),s.jsx("p",{className:"text-xs text-gm-text-primary line-clamp-2",children:x})]}),s.jsxs("div",{className:"flex items-center justify-between mt-3",children:[b&&s.jsxs("span",{className:"text-[10px] text-gm-text-tertiary",children:[b," speaking time"]}),s.jsxs("button",{onClick:j=>i(j,o),disabled:n.isPending,className:"ml-auto px-2.5 py-1 rounded-lg bg-gm-surface-secondary text-gm-text-primary text-[10px] font-medium hover:bg-gm-surface-hover flex items-center gap-1 transition-colors border border-gm-border-primary disabled:opacity-50",children:[s.jsx(Qr,{className:"w-3 h-3"})," Re-analyze"]})]})]},c)})})}function uRe({data:e,isLoading:t,profiles:r,resolveName:n}){if(t)return s.jsx(Mp,{});const a=e;if(!a)return s.jsx(_0,{icon:wC,message:"No team dynamics data. Click 'Run Team Analysis' to generate insights."});const i=Number(a.cohesion_score??0),o=String(a.tension_level||"unknown"),c=Number(a.team_size??r.length??0),d=a.analysis_data??{},f=String(d.dominant_communication_pattern||a.summary||""),m=a.influence_map??[],h=a.alliances??[],g=a.tensions??[],x=d.power_centers??[],w=d.risk_factors??[],b=d.recommendations??[],j=d.communication_flow??{},N=a.dynamics??[],_=String(d.analysis_date||a.last_analysis_at||""),S=i>=70?"#22c55e":i>=40?"#f59e0b":"#ef4444";return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-5 flex items-center gap-4",children:[s.jsxs("div",{className:"relative w-16 h-16",children:[s.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full -rotate-90",children:[s.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"var(--gm-border-primary)",strokeWidth:"3"}),s.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:S,strokeWidth:"3",strokeDasharray:`${i}, 100`,strokeLinecap:"round"})]}),s.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:s.jsx("span",{className:"text-lg font-bold text-gm-text-primary",children:i})})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-gm-text-primary",children:"Team Cohesion"}),s.jsxs("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium capitalize ${o==="low"?"bg-gm-status-success-bg text-gm-status-success":o==="medium"?"bg-gm-status-warning-bg text-gm-status-warning":"bg-gm-status-danger-bg text-gm-status-danger"}`,children:[o," tension"]})]})]}),s.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-5 flex flex-col items-center justify-center",children:[s.jsx("p",{className:"text-3xl font-bold text-gm-text-primary",children:c}),s.jsx("p",{className:"text-xs text-gm-text-tertiary",children:"Team Members"})]}),s.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-5 flex items-center gap-3 justify-center",children:[s.jsx(ja,{className:"w-5 h-5 text-gm-text-tertiary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-gm-text-tertiary",children:"Analysis Date"}),s.jsx("p",{className:"text-sm font-semibold text-gm-text-primary",children:_?new Date(_).toLocaleDateString():"N/A"})]})]})]}),f&&s.jsxs("div",{className:"bg-gm-interactive-primary/5 border border-gm-interactive-primary/10 rounded-xl p-4",children:[s.jsx("h3",{className:"text-xs font-semibold text-gm-interactive-primary uppercase tracking-wider mb-2",children:"Executive Summary"}),s.jsx("p",{className:"text-sm text-gm-text-primary leading-relaxed",children:Cc(f,n)})]}),r.length>0&&s.jsx(dRe,{profiles:r}),(j.bottlenecks||j.information_brokers||j.central_nodes||j.isolated_members)&&s.jsx(fRe,{flow:j,resolveName:n}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[m.length>0&&s.jsx(mRe,{items:m,resolveName:n}),h.length>0&&s.jsx(hRe,{items:h,resolveName:n}),g.length>0&&s.jsx(pRe,{items:g,resolveName:n}),x.length>0&&s.jsx(gRe,{items:x,resolveName:n})]}),N.length>0&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:N.map((k,A)=>s.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(sp,{className:"w-4 h-4 text-gm-interactive-primary"}),s.jsx("span",{className:"text-sm font-medium text-gm-text-primary",children:String(k.aspect||k.name||`Dynamic #${A+1}`)})]}),s.jsx("p",{className:"text-xs text-gm-text-tertiary",children:Cc(String(k.description||k.summary||""),n)}),k.score!==void 0&&s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 h-1.5 bg-gm-surface-secondary rounded-full",children:s.jsx("div",{className:"h-1.5 bg-gm-interactive-primary rounded-full",style:{width:`${Math.min(100,Number(k.score))}%`}})}),s.jsxs("span",{className:"text-[10px] font-mono text-gm-text-tertiary",children:[String(k.score),"%"]})]})]},A))}),w.length>0&&s.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4",children:[s.jsxs("h3",{className:"text-xs font-semibold text-gm-status-danger uppercase tracking-wider mb-3 flex items-center gap-2",children:[s.jsx(vr,{className:"w-4 h-4"})," Risk Factors",s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-danger-bg text-gm-status-danger ml-auto",children:[w.length," identified"]})]}),s.jsx("div",{className:"space-y-2",children:w.map((k,A)=>s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("span",{className:"text-[10px] text-gm-status-danger font-bold mt-0.5 flex-shrink-0",children:A+1}),s.jsx("p",{className:"text-xs text-gm-text-primary",children:Cc(k,n)})]},A))})]}),b.length>0&&s.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4",children:[s.jsxs("h3",{className:"text-xs font-semibold text-gm-status-success uppercase tracking-wider mb-3 flex items-center gap-2",children:[s.jsx(Gn,{className:"w-4 h-4"})," Recommendations",s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-success-bg text-gm-status-success ml-auto",children:[b.length," actions"]})]}),s.jsx("div",{className:"space-y-2",children:b.map((k,A)=>s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsxs("span",{className:"text-[10px] text-gm-status-success font-bold mt-0.5 flex-shrink-0",children:["Action ",A+1]}),s.jsx("p",{className:"text-xs text-gm-text-primary",children:Cc(k,n)})]},A))})]})]})}function dRe({profiles:e}){const t=[...e].filter(a=>a.influence_score!==void 0).sort((a,i)=>(Number(i.influence_score)||0)-(Number(a.influence_score)||0));if(t.length===0)return null;const r=Math.max(...t.map(a=>Number(a.influence_score)||0),100),n=["","",""];return s.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4",children:[s.jsxs("h3",{className:"text-xs font-semibold text-gm-text-primary uppercase tracking-wider mb-3 flex items-center gap-2",children:[s.jsx(sp,{className:"w-4 h-4 text-gm-interactive-primary"})," Influence Scoreboard",s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-warning-bg text-gm-status-warning ml-auto",children:[t.length," ranked"]})]}),s.jsx("div",{className:"space-y-2",children:t.map((a,i)=>{const o=a.contact??{},c=String(o.name||a.person_name||"Unknown"),d=String(o.role||o.organization||"");c.split(" ").map(b=>b[0]).join("").substring(0,2).toUpperCase();const f=co(o.avatar_url)?o.avatar_url:co(o.photo_url)?o.photo_url:null,m=Number(a.influence_score)||0,h=m/r*100,g=String(a.risk_tolerance||"medium"),w=String(a.communication_style||"").split(";")[0]?.substring(0,50)||"";return s.jsxs("div",{className:`flex items-center gap-3 py-1.5 ${i<3?"bg-gm-surface-secondary/30 rounded-lg px-2":""}`,children:[s.jsx("span",{className:"w-6 text-center text-sm",children:n[i]||String(i+1)}),s.jsx(Pp,{url:f,name:c,size:"md"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs font-medium text-gm-text-primary truncate",children:c}),d&&s.jsx("p",{className:"text-[10px] text-gm-text-tertiary truncate",children:d}),w&&s.jsx("p",{className:"text-[9px] text-gm-text-tertiary/70 truncate italic",children:w})]}),s.jsxs("div",{className:"w-32 flex items-center gap-1.5",children:[s.jsx("div",{className:"flex-1 h-1.5 bg-gm-surface-secondary rounded-full",children:s.jsx("div",{className:"h-1.5 bg-gm-interactive-primary rounded-full transition-all",style:{width:`${h}%`}})}),s.jsx("span",{className:"text-[10px] font-mono text-gm-text-tertiary w-6 text-right",children:m})]}),s.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full capitalize ${g==="low"?"bg-gm-status-success-bg text-gm-status-success":g==="high"?"bg-gm-status-danger-bg text-gm-status-danger":"bg-gm-status-warning-bg text-gm-status-warning"}`,children:g})]},i)})})]})}function fRe({flow:e,resolveName:t}){const r=e.bottlenecks??[],n=e.information_brokers??[],a=e.central_nodes??[],i=e.isolated_members??[];return s.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4",children:[s.jsx("h3",{className:"text-xs font-semibold text-gm-text-primary uppercase tracking-wider mb-3",children:"Communication Flow"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[r.length>0&&s.jsxs("div",{className:"bg-gm-surface-secondary/30 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wider text-gm-status-danger",children:"Bottlenecks"})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:r.map((o,c)=>s.jsx(ha,{name:o,resolve:t},c))})]}),n.length>0&&s.jsxs("div",{className:"bg-gm-surface-secondary/30 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wider text-gm-interactive-primary",children:"Info Brokers"})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:n.map((o,c)=>s.jsx(ha,{name:o,resolve:t},c))}),s.jsx("p",{className:"text-[9px] text-gm-text-tertiary mt-2",children:"Key connectors who bridge information across the team"})]}),a.length>0&&s.jsxs("div",{className:"bg-gm-surface-secondary/30 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wider text-gm-status-success",children:"Central Nodes"})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:a.map((o,c)=>s.jsx(ha,{name:o,resolve:t},c))}),s.jsx("p",{className:"text-[9px] text-gm-text-tertiary mt-2",children:"Most connected team members"})]}),i.length>0&&s.jsxs("div",{className:"bg-gm-surface-secondary/30 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wider text-gm-status-warning",children:"Isolated"})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:i.map((o,c)=>s.jsx(ha,{name:o,resolve:t},c))}),s.jsx("p",{className:"text-[9px] text-gm-text-tertiary mt-2",children:"Members with fewer connections  may need inclusion"})]})]})]})}function mRe({items:e,resolveName:t}){const[r,n]=y.useState(new Set),a=i=>n(o=>{const c=new Set(o);return c.has(i)?c.delete(i):c.add(i),c});return s.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4",children:[s.jsxs("h3",{className:"text-xs font-semibold text-gm-text-primary uppercase tracking-wider mb-3 flex items-center gap-2",children:[s.jsx(sp,{className:"w-4 h-4 text-gm-interactive-primary"})," Influence Map",s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-surface-secondary text-gm-text-tertiary ml-auto",children:[e.length," connections"]})]}),s.jsx("div",{className:"space-y-2 max-h-72 overflow-y-auto",children:e.slice(0,10).map((i,o)=>{const c=String(i.influence_type||"direct").toLowerCase(),d=Q$[c]||Q$.direct,f=Math.round((Number(i.strength)||.5)*(Number(i.strength)<=1?100:1)),m=!!i.evidence&&String(i.evidence).length>10;return s.jsxs("div",{className:"bg-gm-surface-secondary/30 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(ha,{name:String(i.from_person||i.from||"?"),resolve:t}),s.jsx(ob,{className:"w-3.5 h-3.5 text-gm-text-tertiary flex-shrink-0"}),s.jsx(ha,{name:String(i.to_person||i.to||"?"),resolve:t}),s.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded capitalize ml-auto",style:{background:d.bg,color:d.color},children:[d.icon," ",c]}),s.jsxs("div",{className:"flex items-center gap-1 w-20",children:[s.jsx("div",{className:"flex-1 h-1 rounded-full bg-gm-surface-secondary",children:s.jsx("div",{className:"h-1 rounded-full transition-all",style:{width:`${f}%`,background:d.color}})}),s.jsxs("span",{className:"text-[10px] font-mono text-gm-text-tertiary",children:[f,"%"]})]}),m&&s.jsx("button",{onClick:()=>a(o),className:"text-gm-text-tertiary hover:text-gm-text-primary",children:r.has(o)?s.jsx(Sl,{className:"w-3.5 h-3.5"}):s.jsx(un,{className:"w-3.5 h-3.5"})})]}),r.has(o)&&m&&s.jsx("div",{className:"mt-2 pt-2 border-t border-gm-border-primary/30",children:s.jsxs("p",{className:"text-[10px] text-gm-text-tertiary",children:[s.jsx("strong",{children:"Evidence:"})," ",Cc(String(i.evidence),t)]})})]},o)})})]})}function hRe({items:e,resolveName:t}){const[r,n]=y.useState(new Set),a=i=>n(o=>{const c=new Set(o);return c.has(i)?c.delete(i):c.add(i),c});return s.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4",children:[s.jsxs("h3",{className:"text-xs font-semibold text-gm-text-primary uppercase tracking-wider mb-3 flex items-center gap-2",children:[s.jsx(yr,{className:"w-4 h-4 text-gm-interactive-primary"})," Alliances",s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-surface-secondary text-gm-text-tertiary ml-auto",children:[e.length," groups"]})]}),s.jsx("div",{className:"space-y-2 max-h-72 overflow-y-auto",children:e.slice(0,10).map((i,o)=>{let c=i.members;typeof c=="string"&&(c=c.split(/[\s,]+/).filter(Boolean)),Array.isArray(c)||(c=[]);const d=String(i.alliance_type||"natural").toLowerCase(),f=Y$[d]||Y$.natural,m=Math.round((Number(i.strength)||.5)*(Number(i.strength)<=1?100:1)),h=i.evidence&&String(i.evidence).length>10||Array.isArray(i.shared_values)&&i.shared_values.length>0;return s.jsxs("div",{className:"bg-gm-surface-secondary/30 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("div",{className:"flex items-center gap-1.5 flex-wrap",children:c.map((g,x)=>s.jsxs("span",{className:"contents",children:[x>0&&s.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:"&"}),s.jsx(ha,{name:g,resolve:t})]},x))}),s.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded capitalize ml-auto",style:{background:f.bg,color:f.color},children:[f.icon," ",d]}),s.jsxs("div",{className:"flex items-center gap-1 w-20",children:[s.jsx("div",{className:"flex-1 h-1 rounded-full bg-gm-surface-secondary",children:s.jsx("div",{className:"h-1 rounded-full transition-all",style:{width:`${m}%`,background:f.color}})}),s.jsxs("span",{className:"text-[10px] font-mono text-gm-text-tertiary",children:[m,"%"]})]}),h&&s.jsx("button",{onClick:()=>a(o),className:"text-gm-text-tertiary hover:text-gm-text-primary",children:r.has(o)?s.jsx(Sl,{className:"w-3.5 h-3.5"}):s.jsx(un,{className:"w-3.5 h-3.5"})})]}),r.has(o)&&s.jsxs("div",{className:"mt-2 pt-2 border-t border-gm-border-primary/30 space-y-1",children:[Array.isArray(i.shared_values)&&i.shared_values.length>0&&s.jsxs("p",{className:"text-[10px] text-gm-text-tertiary",children:[s.jsx("strong",{children:"Shared Values:"})," ",i.shared_values.join(", ")]}),i.evidence&&s.jsxs("p",{className:"text-[10px] text-gm-text-tertiary",children:[s.jsx("strong",{children:"Evidence:"})," ",Cc(String(i.evidence),t)]})]})]},o)})})]})}function pRe({items:e,resolveName:t}){const[r,n]=y.useState(new Set),a=i=>n(o=>{const c=new Set(o);return c.has(i)?c.delete(i):c.add(i),c});return s.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4",children:[s.jsxs("h3",{className:"text-xs font-semibold text-gm-text-primary uppercase tracking-wider mb-3 flex items-center gap-2",children:[s.jsx(vr,{className:"w-4 h-4 text-gm-status-danger"})," Tensions",s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-danger-bg text-gm-status-danger ml-auto",children:[e.length," identified"]})]}),s.jsx("div",{className:"space-y-2 max-h-72 overflow-y-auto",children:e.slice(0,10).map((i,o)=>{let c=i.between;typeof c=="string"&&(c=c.split(/[\s,]+/).filter(Boolean)),Array.isArray(c)||(c=[]);const d=String(i.level||"low").toLowerCase(),f=String(i.tension_type||"communication").toLowerCase(),m=X$[f]||X$.communication,h=i.evidence&&String(i.evidence).length>10||Array.isArray(i.triggers)&&i.triggers.length>0;return s.jsxs("div",{className:"bg-gm-surface-secondary/30 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("div",{className:"flex items-center gap-1.5 flex-wrap",children:c.slice(0,2).map((g,x)=>s.jsxs("span",{className:"contents",children:[x>0&&s.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:""}),s.jsx(ha,{name:g,resolve:t})]},x))}),s.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded capitalize ml-auto",style:{background:m.bg,color:m.color},children:[m.icon," ",f]}),s.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full capitalize ${d==="high"?"bg-gm-status-danger-bg text-gm-status-danger":d==="medium"?"bg-gm-status-warning-bg text-gm-status-warning":"bg-gm-status-success-bg text-gm-status-success"}`,children:d}),h&&s.jsx("button",{onClick:()=>a(o),className:"text-gm-text-tertiary hover:text-gm-text-primary",children:r.has(o)?s.jsx(Sl,{className:"w-3.5 h-3.5"}):s.jsx(un,{className:"w-3.5 h-3.5"})})]}),r.has(o)&&s.jsxs("div",{className:"mt-2 pt-2 border-t border-gm-border-primary/30 space-y-1",children:[Array.isArray(i.triggers)&&i.triggers.length>0&&s.jsxs("p",{className:"text-[10px] text-gm-text-tertiary",children:[s.jsx("strong",{children:"Triggers:"})," ",i.triggers.join(", ")]}),i.evidence&&s.jsxs("p",{className:"text-[10px] text-gm-text-tertiary",children:[s.jsx("strong",{children:"Evidence:"})," ",Cc(String(i.evidence),t)]})]})]},o)})})]})}function gRe({items:e,resolveName:t}){const[r,n]=y.useState(new Set),a=i=>n(o=>{const c=new Set(o);return c.has(i)?c.delete(i):c.add(i),c});return s.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4",children:[s.jsxs("h3",{className:"text-xs font-semibold text-gm-text-primary uppercase tracking-wider mb-3 flex items-center gap-2",children:[s.jsx(hn,{className:"w-4 h-4 text-gm-interactive-primary"})," Power Centers",s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-surface-secondary text-gm-text-tertiary ml-auto",children:[e.length," key players"]})]}),s.jsx("div",{className:"space-y-2 max-h-72 overflow-y-auto",children:e.slice(0,10).map((i,o)=>{const c=String(i.power_type||"informal").toLowerCase(),d=Z$[c]||Z$.informal,f=Math.round(Number(i.influence_reach??50)),m=Array.isArray(i.dependencies)&&i.dependencies.length>0;return s.jsxs("div",{className:"bg-gm-surface-secondary/30 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(ha,{name:String(i.person||"?"),resolve:t}),s.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded capitalize ml-auto",style:{background:d.bg,color:d.color},children:[d.icon," ",c]}),s.jsxs("div",{className:"flex items-center gap-1 w-20",children:[s.jsx("div",{className:"flex-1 h-1 rounded-full bg-gm-surface-secondary",children:s.jsx("div",{className:"h-1 rounded-full transition-all",style:{width:`${f}%`,background:d.color}})}),s.jsxs("span",{className:"text-[10px] font-mono text-gm-text-tertiary",children:[f,"%"]})]}),m&&s.jsx("button",{onClick:()=>a(o),className:"text-gm-text-tertiary hover:text-gm-text-primary",children:r.has(o)?s.jsx(Sl,{className:"w-3.5 h-3.5"}):s.jsx(un,{className:"w-3.5 h-3.5"})})]}),r.has(o)&&m&&s.jsx("div",{className:"mt-2 pt-2 border-t border-gm-border-primary/30",children:s.jsxs("p",{className:"text-[10px] text-gm-text-tertiary",children:[s.jsx("strong",{children:"Power Sources:"})," ",i.dependencies.join(", ")]})})]},o)})})]})}function xRe({data:e,isLoading:t,profiles:r,resolveName:n}){if(t)return s.jsx(Mp,{});const a=e?.relationships??[];if(a.length===0)return s.jsx(_0,{icon:yl,message:"No relationship data. Process documents to discover team relationships."});const i={influences:"#3b82f6",aligned_with:"#22c55e",tension_with:"#ef4444",collaborates:"#8b5cf6"},o=(c,d)=>{const f=c[`${d}_contact`];if(f&&typeof f=="object"&&f.name)return String(f.name);const m=c[`${d}_person`];if(m&&typeof m=="object"&&m.name)return String(m.name);const h=c[d]||c[`${d}_person`]||c[`${d}_contact`];if(h&&typeof h=="string")return h;const g=c[`${d}_contact_id`]||c[`${d}_person_id`];if(g){const x=r.find(w=>String(w.contact_id||w.person_id)===String(g));if(x){const w=x.contact??{};return String(w.name||x.person_name||g)}}return"?"};return s.jsx("div",{className:"space-y-2",children:a.map((c,d)=>{const f=String(c.type||c.relationship_type||c.label||"related"),m=i[f]||"#6b7280",h=o(c,"from"),g=o(c,"to"),x=c.evidence,w=Number(c.evidence_count||(Array.isArray(x)?x.length:0));return s.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0 flex-wrap",children:[s.jsx(ha,{name:h,resolve:n}),s.jsx(ob,{className:"w-4 h-4 flex-shrink-0",style:{color:m}}),s.jsx(ha,{name:g,resolve:n})]}),s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full capitalize flex-shrink-0",style:{background:m+"15",color:m},children:f.replace(/_/g," ")}),c.strength!==void 0&&s.jsxs("div",{className:"flex items-center gap-1.5 w-24",children:[s.jsx("div",{className:"flex-1 h-1.5 bg-gm-surface-secondary rounded-full",children:s.jsx("div",{className:"h-1.5 rounded-full",style:{width:`${Math.round(Number(c.strength)*(Number(c.strength)<=1?100:1))}%`,background:m}})}),s.jsxs("span",{className:"text-[10px] font-mono text-gm-text-tertiary",children:[Math.round(Number(c.strength)*(Number(c.strength)<=1?100:1)),"%"]})]}),c.confidence&&s.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-gm-surface-secondary text-gm-text-tertiary capitalize",children:String(c.confidence)})]}),(w>0||typeof x=="string"&&x.length>0)&&s.jsxs("div",{className:"mt-2 pt-2 border-t border-gm-border-primary/30",children:[typeof x=="string"&&x.length>0&&s.jsx("p",{className:"text-[10px] text-gm-text-tertiary",children:x}),Array.isArray(x)&&x.length>0&&s.jsxs("div",{className:"space-y-1",children:[x.slice(0,3).map((b,j)=>s.jsxs("p",{className:"text-[10px] text-gm-text-tertiary",children:[b.quote&&s.jsxs("span",{className:"italic",children:['"',String(b.quote),'" ']}),b.observation&&s.jsx("span",{children:String(b.observation)}),b.timestamp&&s.jsxs("span",{className:"text-gm-text-tertiary/60 ml-1",children:["(",String(b.timestamp),")"]})]},j)),x.length>3&&s.jsxs("p",{className:"text-[9px] text-gm-text-tertiary/50",children:["+",x.length-3," more evidence items"]})]}),w>0&&!x&&s.jsxs("p",{className:"text-[10px] text-gm-text-tertiary",children:[w," evidence items"]})]})]},d)})})}function yRe({data:e,isLoading:t,profiles:r,resolveName:n}){const a=y.useRef(null),[i,o]=y.useState(null),c=e,d=c?.nodes??[],f=c?.edges??[],m=y.useMemo(()=>{const j={};return r.forEach(N=>{const _=String(N.contact_id||N.person_id||"");_&&(j[_]=N)}),j},[r]),h=y.useRef([]),g={influences:{color:"#3b82f6",dash:!1},aligned_with:{color:"#22c55e",dash:!1},tension_with:{color:"#ef4444",dash:!0}},x=y.useCallback(()=>{if(!a.current||d.length===0)return;const j=a.current,N=j.getContext("2d");if(!N)return;const _=j.width=j.parentElement?.clientWidth??800,S=j.height=500,k=new Map;d.forEach((T,O)=>k.set(String(T.id),O));const A=d.map((T,O)=>{const P=T.properties??{},M=.32+Number(P.influenceScore??T.influence_score??T.size??50)/500;return{x:_/2+_*M*Math.cos(2*Math.PI*O/d.length),y:S/2+S*M*Math.sin(2*Math.PI*O/d.length)}});h.current=A,N.clearRect(0,0,_,S),f.forEach(T=>{const O=k.get(String(T.from??T.source)),P=k.get(String(T.to??T.target));if(O===void 0||P===void 0)return;const R=String(T.type||T.label||T.relationship_type||""),M=g[R]||{color:"#94a3b8",dash:!1};if(N.beginPath(),N.setLineDash(M.dash?[5,5]:[]),N.moveTo(A[O].x,A[O].y),N.lineTo(A[P].x,A[P].y),N.strokeStyle=M.color+"80",N.lineWidth=Math.max(1,Number(T.strength??T.value??.5)*4),N.stroke(),N.setLineDash([]),R==="influences"){const D=A[P].x-A[O].x,z=A[P].y-A[O].y,Y=Math.atan2(z,D),I=8,K=d[P].properties??{},U=22+Number(K.influenceScore??d[P].influence_score??50)/10,L=A[P].x-Math.cos(Y)*U,F=A[P].y-Math.sin(Y)*U;N.beginPath(),N.moveTo(L,F),N.lineTo(L-I*Math.cos(Y-Math.PI/6),F-I*Math.sin(Y-Math.PI/6)),N.lineTo(L-I*Math.cos(Y+Math.PI/6),F-I*Math.sin(Y+Math.PI/6)),N.closePath(),N.fillStyle=M.color,N.fill()}}),d.forEach((T,O)=>{const{x:P,y:R}=A[O],M=T.properties??{},z=20+Number(M.influenceScore??T.influence_score??T.size??50)/10,Y=String(T.label||T.name||"?"),I=Hh(Y);N.shadowColor="rgba(0,0,0,0.15)",N.shadowBlur=8,N.shadowOffsetX=2,N.shadowOffsetY=2;const K=N.createRadialGradient(P-z*.3,R-z*.3,0,P,R,z);K.addColorStop(0,I),K.addColorStop(1,TA(I,-40)),N.beginPath(),N.arc(P,R,z,0,2*Math.PI),N.fillStyle=K,N.fill(),N.shadowColor="transparent",N.strokeStyle=i&&String(i.id)===String(T.id)?"#f59e0b":"rgba(255,255,255,0.6)",N.lineWidth=i&&String(i.id)===String(T.id)?3:2,N.stroke();const U=Y.split(" ").map(F=>F[0]).join("").substring(0,2).toUpperCase();N.fillStyle="#fff",N.font=`bold ${Math.max(11,z*.55)}px Inter, system-ui, sans-serif`,N.textAlign="center",N.textBaseline="middle",N.fillText(U,P,R);const L=getComputedStyle(document.documentElement).getPropertyValue("--gm-text-primary").trim()||"#0f172a";N.fillStyle=L,N.font="11px Inter, system-ui, sans-serif",N.fillText(Y,P,R+z+14)})},[d,f,i]);y.useEffect(()=>{x()},[x]);const w=y.useCallback(j=>{if(!a.current||d.length===0)return;const N=a.current.getBoundingClientRect(),_=j.clientX-N.left,S=j.clientY-N.top;for(let k=0;k<d.length;k++){const A=h.current[k];if(!A)continue;const T=d[k].properties??{},O=20+Number(T.influenceScore??d[k].influence_score??d[k].size??50)/10,P=_-A.x,R=S-A.y;if(P*P+R*R<=O*O){o(d[k]);return}}o(null)},[d]);if(t)return s.jsx(Mp,{});if(d.length===0)return s.jsx(_0,{icon:yl,message:"No network data. Analyze profiles and sync graph to build the network."});const b=i?m[String(i.id)]:null;return s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"flex-1 bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("h3",{className:"text-xs font-semibold text-gm-text-primary uppercase tracking-wider flex items-center gap-2",children:[s.jsx(yl,{className:"w-4 h-4 text-gm-interactive-primary"})," Team Network",s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-surface-secondary text-gm-text-tertiary",children:[d.length," nodes, ",f.length," edges"]})]})}),s.jsxs("div",{className:"flex gap-4 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:"w-6 h-0.5 bg-[#3b82f6] rounded"}),s.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:"Influences"})]}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:"w-6 h-0.5 bg-[#22c55e] rounded"}),s.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:"Alliance"})]}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:"w-6 h-0.5 border-t-2 border-dashed border-[#ef4444]"}),s.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:"Tension"})]})]}),s.jsx("div",{className:"bg-gm-surface-secondary/30 rounded-lg overflow-hidden cursor-pointer",children:s.jsx("canvas",{ref:a,className:"w-full",style:{height:500},onClick:w})})]}),s.jsx("div",{className:"w-64 bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4 flex-shrink-0",children:i?s.jsx(vRe,{node:i,profile:b,resolveName:n}):s.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gm-text-tertiary",children:[s.jsx(yr,{className:"w-8 h-8 mb-2 text-gm-text-tertiary/40"}),s.jsx("p",{className:"text-xs text-center",children:"Click on a person to see details"})]})})]})}function vRe({node:e,profile:t,resolveName:r}){const n=e.properties??{},a=String(e.label||e.name||"Unknown");a.split(" ").map(g=>g[0]).join("").substring(0,2).toUpperCase();const i=t?t.contact??{}:{},o=String(i.role||i.organization||n.role||""),c=String(i.organization||n.organization||""),d=Number(t?.influence_score??n.influenceScore??e.influence_score??0),f=String(t?.communication_style||n.communicationStyle||""),m=String(t?.dominant_motivation||n.dominantMotivation||""),h=co(i.avatar_url)?String(i.avatar_url):co(i.photo_url)?String(i.photo_url):null;return s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Pp,{url:h,name:a,size:"lg"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold text-gm-text-primary truncate",children:a}),o&&s.jsx("p",{className:"text-[10px] text-gm-text-tertiary",children:o}),c&&c!==o&&s.jsx("p",{className:"text-[10px] text-gm-text-tertiary",children:c})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] text-gm-text-tertiary uppercase tracking-wider mb-1",children:"Influence"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex-1 h-2 bg-gm-surface-secondary rounded-full",children:s.jsx("div",{className:"h-2 bg-gm-interactive-primary rounded-full",style:{width:`${Math.min(100,d)}%`}})}),s.jsxs("span",{className:"text-xs font-bold text-gm-text-primary",children:[d,"%"]})]})]}),f&&s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] text-gm-text-tertiary uppercase tracking-wider mb-0.5",children:"Communication"}),s.jsx("p",{className:"text-xs text-gm-text-primary",children:f.substring(0,100)})]}),m&&s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] text-gm-text-tertiary uppercase tracking-wider mb-0.5",children:"Motivation"}),s.jsx("p",{className:"text-xs text-gm-text-primary",children:m})]})]})}function bRe({open:e,onClose:t,existingProfileIds:r}){const[n,a]=y.useState(""),[i,o]=y.useState(new Set),c=mf(),d=pb(),[f,m]=y.useState(!1),[h,g]=y.useState({done:0,total:0,current:""}),x=y.useMemo(()=>{const _=[...c.data?.contacts??[]].sort((S,k)=>{const A=r.has(String(S.id)),T=r.has(String(k.id));return A!==T?A?1:-1:String(S.name||"").localeCompare(String(k.name||""))});return n?_.filter(S=>JSON.stringify(S).toLowerCase().includes(n.toLowerCase())):_},[c.data,n,r]),w=N=>o(_=>{const S=new Set(_);return S.has(N)?S.delete(N):S.add(N),S}),b=()=>{const N=x.filter(_=>!r.has(String(_.id))).map(_=>String(_.id));o(new Set(N))},j=async()=>{if(i.size===0)return;m(!0);const N=Array.from(i);g({done:0,total:N.length,current:""});let _=0,S=0;for(const k of N){const A=x.find(O=>String(O.id)===k),T=String(A?.name||"Contact");g(O=>({...O,current:T}));try{await d.mutateAsync({personId:k,forceReanalysis:!0}),_++}catch{S++}g(O=>({...O,done:O.done+1}))}m(!1),_>0&&G.success(`Analyzed ${_} member${_>1?"s":""}`),S>0&&G.error(`Failed for ${S} member${S>1?"s":""}`),o(new Set),t()};return s.jsx(Ws,{open:e,onOpenChange:N=>!N&&!f&&t(),children:s.jsxs(ui,{className:"max-w-lg p-0 overflow-hidden",children:[s.jsx(Na,{className:"sr-only",children:"Analyze Team Members"}),s.jsxs("div",{className:"px-5 pt-5 pb-3",children:[s.jsx("h2",{className:"text-base font-bold text-gm-text-primary",children:"Analyze Team Members"}),s.jsx("p",{className:"text-xs text-gm-text-tertiary mt-1",children:"Select members to analyze with AI behavioral profiling."}),s.jsxs("p",{className:"text-[10px] text-gm-text-tertiary mt-0.5",children:[x.length," contacts  ",r.size," analyzed"]})]}),s.jsxs("div",{className:"px-5 pb-3 flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gm-text-tertiary"}),s.jsx("input",{value:n,onChange:N=>a(N.target.value),placeholder:"Search contacts...",className:"w-full pl-9 pr-3 py-1.5 bg-gm-surface-secondary border border-gm-border-primary rounded-lg text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus"})]}),s.jsx("button",{onClick:b,className:"px-3 py-1.5 rounded-lg bg-gm-surface-secondary text-gm-text-primary text-xs hover:bg-gm-surface-hover transition-colors border border-gm-border-primary whitespace-nowrap",children:"Select Unanalyzed"})]}),s.jsxs("div",{className:"max-h-64 overflow-y-auto px-5 space-y-1",children:[c.isLoading&&s.jsx(Mp,{}),x.map(N=>{const _=String(N.id),S=String(N.name||"Unknown"),k=String(N.role||N.organization||"");S.split(" ").map(P=>P[0]).join("").substring(0,2).toUpperCase();const A=co(N.avatar_url)?String(N.avatar_url):co(N.photo_url)?String(N.photo_url):null,T=r.has(_),O=i.has(_);return s.jsxs("label",{className:`flex items-center gap-3 p-2.5 rounded-lg cursor-pointer transition-colors ${O?"bg-gm-interactive-primary/5 border border-gm-interactive-primary/20":"hover:bg-gm-surface-hover border border-transparent"}`,children:[s.jsx("input",{type:"checkbox",checked:O,onChange:()=>w(_),className:"w-3.5 h-3.5 rounded accent-gm-interactive-primary"}),s.jsx(Pp,{url:A,name:S,size:"md"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs font-medium text-gm-text-primary truncate",children:S}),k&&s.jsx("p",{className:"text-[10px] text-gm-text-tertiary",children:k})]}),s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium ${T?"bg-gm-status-success-bg text-gm-status-success":"bg-gm-surface-secondary text-gm-text-tertiary"}`,children:T?"Analyzed":"Not analyzed"})]},_)}),!c.isLoading&&x.length===0&&s.jsx("p",{className:"text-xs text-gm-text-tertiary text-center py-4",children:"No contacts found."})]}),f&&s.jsxs("div",{className:"px-5 py-3 border-t border-gm-border-primary",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("span",{className:"text-xs text-gm-text-primary",children:[h.current,"..."]}),s.jsxs("span",{className:"text-[10px] text-gm-text-tertiary",children:[h.done,"/",h.total]})]}),s.jsx("div",{className:"w-full bg-gm-surface-secondary rounded-full h-1.5",children:s.jsx("div",{className:"bg-gm-interactive-primary h-1.5 rounded-full transition-all",style:{width:`${h.done/h.total*100}%`}})})]}),s.jsxs("div",{className:"px-5 py-3 border-t border-gm-border-primary flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-gm-text-tertiary",children:[i.size," selected"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:t,disabled:f,className:"px-3 py-1.5 rounded-lg bg-gm-surface-secondary text-gm-text-primary text-xs hover:bg-gm-surface-hover transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:j,disabled:i.size===0||f,className:"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover disabled:opacity-50 flex items-center gap-1.5 transition-colors",children:[f?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(OC,{className:"w-3.5 h-3.5"}),f?`Analyzing ${h.done}/${h.total}...`:`Analyze Selected (${i.size})`]})]})]})]})})}function Mp(){return s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx(ye,{className:"h-8 w-8 animate-spin text-gm-interactive-primary"})})}function _0({icon:e,message:t}){return s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-8 text-center text-gm-text-tertiary",children:[s.jsx(e,{className:"h-12 w-12 mx-auto mb-4 text-gm-text-tertiary/40"}),t]})}const wRe={documents:Wt,document:Wt,transcripts:gh,transcript:gh,emails:Wn,email:Wn,conversations:ms,conversation:ms},jRe=({file:e,open:t,onClose:r,onReprocess:n,onDelete:a})=>{const[i,o]=y.useState("preview"),c=e?.id??null,d=kie(c),f=Eie(i==="entities"?c:null),m=Aie(c),h=Tie(i==="analysis"?c:null),g=Oie(i==="versions"?c:null),x=Pie(i==="activity"?c:null),w=V8(),b=Rie();if(!e)return null;const j=d.data?.document,N=e.original_filename||e.filename||"(unnamed)",_=e.type||"document",S=wRe[_]||Wt,k=j?.metadata??e.metadata??{},A=e.size?`${(Number(e.size)/1024).toFixed(1)} KB`:"",T=!!(j?.is_favorite??e.is_favorite),O=e.entity_counts,P=m.data?.summary,R=[{key:"preview",label:"Preview",icon:eu},{key:"entities",label:"Entities",icon:fee},{key:"analysis",label:"Analysis",icon:wC},{key:"versions",label:"Versions",icon:hh},{key:"activity",label:"Activity",icon:fh},{key:"share",label:"Share",icon:lb}];return s.jsx(Ws,{open:t,onOpenChange:M=>!M&&r(),children:s.jsxs(ui,{className:"max-w-3xl p-0 overflow-hidden",children:[s.jsxs(Na,{className:"sr-only",children:["File Details: ",N]}),s.jsx("div",{className:"bg-gradient-to-r from-gm-interactive-primary/20 to-gm-interactive-primary/5 p-5",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-lg bg-gm-interactive-primary/10 border border-gm-interactive-primary/20 flex items-center justify-center",children:s.jsx(S,{className:"w-5 h-5 text-gm-interactive-primary"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"text-base font-bold text-gm-text-primary truncate",children:N}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-surface-secondary text-gm-text-secondary capitalize",children:_}),s.jsx("span",{className:"text-xs text-gm-text-tertiary",children:A}),s.jsxs("span",{className:`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-full font-medium ${e.status==="processed"||e.status==="completed"?"bg-gm-status-success-bg text-gm-status-success":e.status==="pending"?"bg-gm-status-warning-bg text-gm-status-warning":e.status==="processing"?"bg-gm-interactive-primary/10 text-gm-interactive-primary":"bg-gm-status-danger-bg text-gm-status-danger"}`,children:[e.status==="processed"||e.status==="completed"?s.jsx(Gn,{className:"w-3 h-3"}):e.status==="pending"?s.jsx(tr,{className:"w-3 h-3"}):e.status==="processing"?s.jsx(ye,{className:"w-3 h-3 animate-spin"}):s.jsx(rp,{className:"w-3 h-3"}),e.status||""]})]})]}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("button",{onClick:()=>w.mutate(e.id),className:"w-8 h-8 rounded-lg hover:bg-gm-surface-hover flex items-center justify-center transition-colors",title:"Favorite",children:s.jsx(Fs,{className:`w-4 h-4 ${T?"fill-yellow-400 text-yellow-400":"text-gm-text-tertiary"}`})}),s.jsx("a",{href:`/api/documents/${e.id}/download`,className:"w-8 h-8 rounded-lg hover:bg-gm-surface-hover flex items-center justify-center transition-colors",title:"Download",children:s.jsx(Xi,{className:"w-4 h-4 text-gm-text-tertiary"})}),s.jsx("button",{onClick:()=>n(e.id),className:"w-8 h-8 rounded-lg hover:bg-gm-surface-hover flex items-center justify-center transition-colors",title:"Reprocess",children:s.jsx(Qr,{className:"w-4 h-4 text-gm-text-tertiary"})}),a&&s.jsx("button",{onClick:()=>a(e.id),className:"w-8 h-8 rounded-lg hover:bg-gm-status-danger-bg flex items-center justify-center transition-colors",title:"Delete",children:s.jsx(Et,{className:"w-4 h-4 text-gm-status-danger"})})]})]})}),s.jsx("div",{className:"flex border-b border-gm-border-primary px-5 gap-1 overflow-x-auto",children:R.map(M=>s.jsxs("button",{onClick:()=>o(M.key),className:`flex items-center gap-1.5 px-3 py-2.5 text-xs font-medium border-b-2 transition-colors whitespace-nowrap ${i===M.key?"border-gm-interactive-primary text-gm-interactive-primary":"border-transparent text-gm-text-tertiary hover:text-gm-text-primary"}`,children:[s.jsx(M.icon,{className:"w-3.5 h-3.5"})," ",M.label]},M.key))}),s.jsxs("div",{className:"p-5 max-h-[55vh] overflow-y-auto space-y-4",children:[i==="preview"&&s.jsxs(s.Fragment,{children:[P&&s.jsxs("div",{className:"bg-gm-interactive-primary/5 border border-gm-interactive-primary/10 rounded-xl p-4",children:[s.jsx("h3",{className:"text-xs font-semibold text-gm-interactive-primary uppercase tracking-wider mb-2",children:"AI Summary"}),s.jsx("p",{className:"text-sm text-gm-text-primary leading-relaxed",children:P})]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[{label:"Type",value:_},{label:"Size",value:A},{label:"Created",value:e.created_at?new Date(e.created_at).toLocaleDateString():""},{label:"Updated",value:e.updated_at?new Date(e.updated_at).toLocaleDateString():""},...k.pages?[{label:"Pages",value:String(k.pages)}]:[],...k.language?[{label:"Language",value:String(k.language)}]:[],...k.author?[{label:"Author",value:String(k.author)}]:[],...k.word_count?[{label:"Words",value:Number(k.word_count).toLocaleString()}]:[],...k.source?[{label:"Source",value:String(k.source)}]:[],...k.speakers?[{label:"Speakers",value:k.speakers.join(", ")}]:[]].map(M=>s.jsxs("div",{className:"bg-gm-surface-secondary/50 rounded-lg p-3",children:[s.jsx("span",{className:"text-[10px] text-gm-text-tertiary uppercase tracking-wider",children:M.label}),s.jsx("p",{className:"text-sm font-medium text-gm-text-primary mt-0.5 truncate",children:M.value})]},M.label))}),O&&s.jsx("div",{className:"grid grid-cols-5 gap-2",children:Object.entries(O).map(([M,D])=>s.jsxs("div",{className:"bg-gm-surface-secondary/50 rounded-lg p-3 text-center",children:[s.jsx("p",{className:"text-xl font-bold text-gm-text-primary",children:D??0}),s.jsx("p",{className:"text-[10px] text-gm-text-tertiary uppercase mt-0.5",children:M})]},M))}),e.content_preview&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-xs uppercase text-gm-text-tertiary font-semibold mb-2",children:"Content Preview"}),s.jsx("div",{className:"bg-gm-surface-secondary/30 rounded-lg p-3 text-xs text-gm-text-tertiary font-mono leading-relaxed max-h-40 overflow-y-auto whitespace-pre-wrap",children:e.content_preview})]})]}),i==="entities"&&s.jsxs(s.Fragment,{children:[f.isLoading&&s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(ye,{className:"w-6 h-6 animate-spin text-gm-interactive-primary"})}),f.data&&(()=>{const M=f.data.extraction;return M?["facts","decisions","questions","risks","actions","people","participants"].map(z=>{const Y=M[z];return!Y||Y.length===0?null:s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary mb-2 capitalize",children:[z," (",Y.length,")"]}),s.jsx("div",{className:"space-y-1.5",children:Y.map((I,K)=>s.jsxs("div",{className:"bg-gm-surface-secondary/30 rounded-lg p-3 text-sm",children:[s.jsx("p",{className:"text-gm-text-primary",children:String(I.text||I.name||I.content||JSON.stringify(I))}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[I.category&&s.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-gm-interactive-primary/10 text-gm-interactive-primary",children:String(I.category)}),I.confidence!=null&&s.jsxs("span",{className:"text-[10px] text-gm-text-tertiary",children:[(Number(I.confidence)*100).toFixed(0),"% confidence"]})]})]},K))})]},z)}):s.jsx("p",{className:"text-sm text-gm-text-tertiary text-center py-6",children:"No extraction data available."})})(),!f.isLoading&&!f.data&&s.jsx("p",{className:"text-sm text-gm-text-tertiary text-center py-6",children:"No extraction data available."})]}),i==="analysis"&&s.jsxs(s.Fragment,{children:[h.isLoading&&s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(ye,{className:"w-6 h-6 animate-spin text-gm-interactive-primary"})}),(()=>{const M=h.data?.analyses??[];return!h.isLoading&&M.length===0?s.jsx("p",{className:"text-sm text-gm-text-tertiary text-center py-6",children:"No analysis history yet."}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-xs",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-gm-border-primary text-left",children:[s.jsx("th",{className:"pb-2 pr-3 text-gm-text-tertiary font-medium",children:"Date"}),s.jsx("th",{className:"pb-2 pr-3 text-gm-text-tertiary font-medium",children:"Provider"}),s.jsx("th",{className:"pb-2 pr-3 text-gm-text-tertiary font-medium",children:"Model"}),s.jsx("th",{className:"pb-2 pr-3 text-gm-text-tertiary font-medium",children:"Tokens"}),s.jsx("th",{className:"pb-2 pr-3 text-gm-text-tertiary font-medium",children:"Cost"}),s.jsx("th",{className:"pb-2 pr-3 text-gm-text-tertiary font-medium",children:"Latency"}),s.jsx("th",{className:"pb-2 text-gm-text-tertiary font-medium",children:"Status"})]})}),s.jsx("tbody",{children:M.map((D,z)=>s.jsxs("tr",{className:"border-b border-gm-border-primary/50",children:[s.jsx("td",{className:"py-2 pr-3 text-gm-text-primary",children:D.created_at?new Date(String(D.created_at)).toLocaleString():""}),s.jsx("td",{className:"py-2 pr-3 text-gm-text-primary",children:String(D.provider||"")}),s.jsx("td",{className:"py-2 pr-3 text-gm-text-primary",children:String(D.model||"")}),s.jsx("td",{className:"py-2 pr-3 text-gm-text-primary",children:D.tokens!=null?Number(D.tokens).toLocaleString():""}),s.jsx("td",{className:"py-2 pr-3 text-gm-text-primary",children:D.cost!=null?`$${Number(D.cost).toFixed(4)}`:""}),s.jsx("td",{className:"py-2 pr-3 text-gm-text-primary",children:D.latency_ms!=null?`${Number(D.latency_ms)}ms`:""}),s.jsx("td",{className:"py-2",children:s.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium ${D.status==="completed"?"bg-gm-status-success-bg text-gm-status-success":D.status==="failed"?"bg-gm-status-danger-bg text-gm-status-danger":"bg-gm-status-warning-bg text-gm-status-warning"}`,children:String(D.status||"")})})]},z))})]})})})()]}),i==="versions"&&s.jsxs(s.Fragment,{children:[g.isLoading&&s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(ye,{className:"w-6 h-6 animate-spin text-gm-interactive-primary"})}),(()=>{const M=g.data?.versions??[];return!g.isLoading&&M.length===0?s.jsx("p",{className:"text-sm text-gm-text-tertiary text-center py-6",children:"No version history."}):s.jsx("div",{className:"space-y-2",children:M.map((D,z)=>s.jsxs("div",{className:"bg-gm-surface-secondary/30 rounded-lg p-3 flex items-center gap-3",children:[s.jsxs("div",{className:"w-8 h-8 rounded-full bg-gm-interactive-primary/10 flex items-center justify-center text-xs font-bold text-gm-interactive-primary",children:["v",String(D.version??z+1)]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gm-text-primary",children:String(D.change_notes||D.summary||"Version update")}),s.jsxs("div",{className:"flex items-center gap-3 mt-0.5",children:[D.created_at&&s.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:new Date(String(D.created_at)).toLocaleString()}),D.file_size!=null&&s.jsxs("span",{className:"text-[10px] text-gm-text-tertiary",children:[(Number(D.file_size)/1024).toFixed(1)," KB"]})]})]})]},z))})})()]}),i==="activity"&&s.jsxs(s.Fragment,{children:[x.isLoading&&s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(ye,{className:"w-6 h-6 animate-spin text-gm-interactive-primary"})}),(()=>{const M=x.data?.activities??[];return!x.isLoading&&M.length===0?s.jsx("p",{className:"text-sm text-gm-text-tertiary text-center py-6",children:"No activity yet."}):s.jsx("div",{className:"space-y-1.5",children:M.map((D,z)=>s.jsxs("div",{className:"flex items-start gap-3 py-2 border-b border-gm-border-primary/30 last:border-0",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-gm-interactive-primary/10 flex items-center justify-center flex-shrink-0 mt-0.5",children:s.jsx(fh,{className:"w-3 h-3 text-gm-interactive-primary"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("p",{className:"text-sm text-gm-text-primary",children:[D.user&&s.jsxs("span",{className:"font-medium",children:[String(D.user)," "]}),String(D.action||D.type||"activity")]}),D.created_at&&s.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:new Date(String(D.created_at)).toLocaleString()})]})]},z))})})()]}),i==="share"&&s.jsx(NRe,{fileId:e.id,shareMutation:b})]})]})})};function NRe({fileId:e,shareMutation:t}){const[r,n]=y.useState("7d"),[a,i]=y.useState(100),[o,c]=y.useState(null),d=()=>{t.mutate({id:e,expires:r,maxViews:a},{onSuccess:m=>{const h=m.url;c(h),G.success("Share link created")},onError:()=>G.error("Failed to create share link")})},f=()=>{o&&(navigator.clipboard.writeText(o),G.success("Link copied to clipboard"))};return s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gm-text-tertiary",children:"Generate a shareable link for this document."}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-gm-text-tertiary block mb-1",children:"Expires"}),s.jsxs("select",{value:r,onChange:m=>n(m.target.value),className:"w-full bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-2 text-xs text-gm-text-primary",children:[s.jsx("option",{value:"1h",children:"1 hour"}),s.jsx("option",{value:"24h",children:"24 hours"}),s.jsx("option",{value:"7d",children:"7 days"}),s.jsx("option",{value:"30d",children:"30 days"}),s.jsx("option",{value:"never",children:"Never"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-gm-text-tertiary block mb-1",children:"Max views"}),s.jsx("input",{type:"number",value:a,onChange:m=>i(Number(m.target.value)),min:1,className:"w-full bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-2 text-xs text-gm-text-primary"})]})]}),s.jsxs("button",{onClick:d,disabled:t.isPending,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-sm font-medium hover:bg-gm-interactive-primary-hover disabled:opacity-50 transition-colors",children:[t.isPending?s.jsx(ye,{className:"w-4 h-4 animate-spin"}):s.jsx(MC,{className:"w-4 h-4"}),"Generate Share Link"]}),o&&s.jsxs("div",{className:"bg-gm-surface-secondary/50 rounded-lg p-3 flex items-center gap-2",children:[s.jsx("input",{type:"text",readOnly:!0,value:o,className:"flex-1 bg-transparent text-xs text-gm-text-primary outline-none truncate"}),s.jsx("button",{onClick:f,className:"flex-shrink-0 w-8 h-8 rounded-lg hover:bg-gm-surface-hover flex items-center justify-center",children:s.jsx(L6,{className:"w-3.5 h-3.5 text-gm-text-tertiary"})})]})]})}const J$={documents:Wt,transcripts:gh,emails:Wn,images:ms},SRe=e=>{switch(e){case"processed":case"completed":return{icon:Gn,cls:"bg-gm-status-success-bg text-gm-status-success"};case"processing":return{icon:ye,cls:"bg-gm-interactive-primary/10 text-gm-interactive-primary"};case"pending":return{icon:tr,cls:"bg-gm-status-warning-bg text-gm-status-warning"};case"deleted":return{icon:vC,cls:"bg-gm-surface-secondary text-gm-text-tertiary"};default:return{icon:rp,cls:"bg-gm-status-danger-bg text-gm-status-danger"}}};function _Re(){const[e,t]=y.useState("documents"),[r,n]=y.useState(""),[a,i]=y.useState(""),[o,c]=y.useState(""),[d,f]=y.useState("list"),[m,h]=y.useState(!1),[g,x]=y.useState(new Set),[w,b]=y.useState(null),j=Sie({search:r||void 0,type:a||void 0,status:e==="deleted"?"deleted":o||void 0,limit:100}),N=UC(),{data:_}=L8(),S=z8(),k=FC(),A=_ie(),T=Cie(),O=U8(),P=V8(),R=Mie(),M=Die(),D=Iie(),z=Lie(),Y=_?.status==="processing"||k.isPending,I=j.data?.documents??[],K=j.data?.statusCounts,U=N.data??[],L=y.useMemo(()=>m?I.filter(Q=>Q.is_favorite):I,[I,m]),F=Q=>{x(pe=>{const he=new Set(pe);return he.has(Q)?he.delete(Q):he.add(Q),he})},q=()=>x(new Set(L.map(Q=>Q.id))),Z=()=>x(new Set),B=Q=>{!Q||Q.length===0||S.mutate({files:Array.from(Q),type:"documents"},{onSuccess:()=>G.success(`${Q.length} file(s) uploaded`),onError:()=>G.error("Upload failed")})},V=()=>{k.mutate(void 0,{onSuccess:()=>G.success("Processing started"),onError:()=>G.error("Processing failed to start")})},ee=()=>{const Q=Array.from(g);M.mutate(Q,{onSuccess:()=>{G.success(`${Q.length} document(s) deleted`),Z()},onError:()=>G.error("Bulk delete failed")})},ae=()=>{const Q=Array.from(g);D.mutate(Q,{onSuccess:()=>{G.success(`${Q.length} document(s) queued for reprocessing`),Z()},onError:()=>G.error("Bulk reprocess failed")})},J=()=>{const Q=Array.from(g);z.mutate({ids:Q},{onSuccess:()=>{G.success("Export downloaded"),Z()},onError:()=>G.error("Export failed")})},se=(Q,pe)=>{Q.stopPropagation(),P.mutate(pe)},ne=Q=>{R.mutate(Q,{onSuccess:()=>G.success("Document restored")})},oe=Q=>{const pe=SRe(Q.status),he=J$[Q.type||""]||Wt,te=!!Q.is_favorite,we=g.has(Q.id);return d==="grid"?s.jsxs(Qe.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:`bg-gm-surface-primary border rounded-xl p-4 hover:border-gm-interactive-primary/30 transition-all cursor-pointer group relative ${we?"border-gm-interactive-primary ring-2 ring-gm-interactive-primary/20":"border-gm-border-primary"}`,onClick:()=>b(Q),children:[s.jsx("div",{className:"absolute top-3 left-3 flex items-center gap-1.5",children:s.jsx("input",{type:"checkbox",checked:we,onChange:()=>F(Q.id),onClick:ke=>ke.stopPropagation(),className:"w-3.5 h-3.5 rounded border-gm-border-primary accent-gm-interactive-primary"})}),s.jsx("div",{className:"absolute top-3 right-3 flex items-center gap-1",children:s.jsx("button",{onClick:ke=>se(ke,Q.id),className:"opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(Fs,{className:`w-3.5 h-3.5 ${te?"fill-yellow-400 text-yellow-400":"text-gm-text-tertiary hover:text-yellow-400"}`})})}),s.jsxs("div",{className:"flex flex-col items-center pt-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-lg bg-gm-interactive-primary/10 border border-gm-interactive-primary/20 flex items-center justify-center mb-3",children:s.jsx(he,{className:"w-5 h-5 text-gm-interactive-primary"})}),s.jsx("p",{className:"text-sm font-medium text-gm-text-primary truncate w-full text-center",children:Q.original_filename||Q.filename}),s.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[Q.type&&s.jsx("span",{className:"text-[10px] text-gm-text-tertiary capitalize",children:Q.type}),s.jsxs("span",{className:`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-full font-medium ${pe.cls}`,children:[s.jsx(pe.icon,{className:`w-3 h-3 ${Q.status==="processing"?"animate-spin":""}`})," ",Q.status||""]})]}),Q.size&&s.jsxs("span",{className:"text-[10px] text-gm-text-tertiary mt-1",children:[(Number(Q.size)/1024).toFixed(1)," KB"]})]})]},Q.id):s.jsx(Qe.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},className:`bg-gm-surface-primary border rounded-xl p-3.5 hover:border-gm-interactive-primary/30 transition-all cursor-pointer group ${we?"border-gm-interactive-primary ring-2 ring-gm-interactive-primary/20":"border-gm-border-primary"}`,onClick:()=>b(Q),children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"checkbox",checked:we,onChange:()=>F(Q.id),onClick:ke=>ke.stopPropagation(),className:"w-3.5 h-3.5 rounded border-gm-border-primary accent-gm-interactive-primary flex-shrink-0"}),s.jsx("button",{onClick:ke=>se(ke,Q.id),className:"flex-shrink-0",children:s.jsx(Fs,{className:`w-4 h-4 transition-colors ${te?"fill-yellow-400 text-yellow-400":"text-gm-text-tertiary/30 hover:text-yellow-400"}`})}),s.jsx(he,{className:"w-5 h-5 text-gm-text-tertiary group-hover:text-gm-interactive-primary transition-colors flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gm-text-primary truncate group-hover:text-gm-interactive-primary transition-colors",children:Q.original_filename||Q.filename}),s.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[Q.type&&s.jsx("span",{className:"text-[10px] text-gm-text-tertiary capitalize",children:Q.type}),Q.size&&s.jsxs("span",{className:"text-[10px] text-gm-text-tertiary",children:[(Number(Q.size)/1024).toFixed(1)," KB"]}),Q.created_at&&s.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:new Date(Q.created_at).toLocaleDateString()})]})]}),s.jsxs("span",{className:`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-full font-medium ${pe.cls}`,children:[s.jsx(pe.icon,{className:`w-3 h-3 ${Q.status==="processing"?"animate-spin":""}`})," ",Q.status||""]}),s.jsx("a",{href:`/api/documents/${Q.id}/download`,onClick:ke=>ke.stopPropagation(),className:"w-7 h-7 rounded-lg hover:bg-gm-surface-hover flex items-center justify-center text-gm-text-tertiary hover:text-gm-text-primary transition-colors opacity-0 group-hover:opacity-100",title:"Download",children:s.jsx(Xi,{className:"w-3.5 h-3.5"})})]})},Q.id)};return s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold text-gm-text-primary",children:"Files & Documents"}),s.jsxs("div",{className:"flex gap-2",children:[(U.length>0||Y)&&s.jsxs("button",{onClick:V,disabled:Y,className:"px-3 py-1.5 rounded-lg bg-gm-interactive-secondary text-gm-text-primary text-xs font-medium hover:bg-gm-interactive-secondary-hover flex items-center gap-1.5 disabled:opacity-50",children:[Y?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Qr,{className:"w-3.5 h-3.5"}),Y?"Processing...":`Process ${U.length} file(s)`]}),s.jsxs("label",{className:"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover flex items-center gap-1.5 cursor-pointer transition-colors",children:[s.jsx(db,{className:"w-3.5 h-3.5"})," Upload",s.jsx("input",{type:"file",multiple:!0,className:"hidden",onChange:Q=>B(Q.target.files)})]})]})]}),s.jsx("div",{className:"flex gap-1 bg-gm-surface-secondary rounded-xl p-1",children:[{key:"documents",label:"Documents",count:j.data?.total??0},{key:"pending",label:"Pending",count:U.length},{key:"deleted",label:"Deleted",count:K?.deleted??0}].map(Q=>s.jsxs("button",{onClick:()=>{t(Q.key),Z()},className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${e===Q.key?"bg-gm-surface-primary text-gm-text-primary shadow-sm":"text-gm-text-tertiary hover:text-gm-text-primary"}`,children:[Q.label," ",s.jsx("span",{className:"ml-1 text-[10px] opacity-60",children:Q.count})]},Q.key))}),Y&&_&&s.jsxs(Qe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-gm-interactive-primary/5 border border-gm-interactive-primary/20 rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ye,{className:"w-4 h-4 animate-spin text-gm-interactive-primary"}),s.jsx("span",{className:"text-sm font-medium text-gm-text-primary",children:"Processing files..."})]}),s.jsxs("span",{className:"text-xs text-gm-text-tertiary",children:[_.processedFiles??0," / ",_.totalFiles??"?"," files"]})]}),_.currentFile&&s.jsxs("p",{className:"text-xs text-gm-text-tertiary mb-2 truncate",children:["Current: ",_.currentFile]}),s.jsx("div",{className:"w-full bg-gm-surface-secondary rounded-full h-2 overflow-hidden",children:s.jsx(Qe.div,{className:"bg-gm-interactive-primary h-full rounded-full",initial:{width:0},animate:{width:`${_.progress??(_.processedFiles&&_.totalFiles?Math.round((_.processedFiles??0)/(_.totalFiles||1)*100):0)}%`},transition:{duration:.5}})})]}),e==="documents"&&K&&s.jsx("div",{className:"flex gap-2 flex-wrap",children:[{label:"Processed",value:K.processed??0,color:"text-gm-status-success"},{label:"Processing",value:K.processing??0,color:"text-gm-interactive-primary"},{label:"Pending",value:K.pending??0,color:"text-gm-status-warning"},{label:"Failed",value:K.failed??0,color:"text-gm-status-danger"}].map(Q=>s.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-lg px-3 py-2 flex items-center gap-2",children:[s.jsx("span",{className:`text-lg font-bold ${Q.color}`,children:Q.value}),s.jsx("span",{className:"text-[10px] text-gm-text-tertiary uppercase tracking-wider",children:Q.label})]},Q.label))}),(e==="documents"||e==="deleted")&&s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("div",{className:"relative flex-1 max-w-xs",children:[s.jsx(bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gm-text-tertiary"}),s.jsx("input",{value:r,onChange:Q=>n(Q.target.value),placeholder:"Search documents...",className:"w-full pl-9 pr-3 py-1.5 bg-gm-surface-secondary border border-gm-border-primary rounded-lg text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus"})]}),e==="documents"&&s.jsxs(s.Fragment,{children:[s.jsxs("select",{value:a,onChange:Q=>i(Q.target.value),className:"bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-1.5 text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus",children:[s.jsx("option",{value:"",children:"All types"}),s.jsx("option",{value:"documents",children:"Documents"}),s.jsx("option",{value:"transcripts",children:"Transcripts"}),s.jsx("option",{value:"emails",children:"Emails"}),s.jsx("option",{value:"images",children:"Images"})]}),s.jsxs("select",{value:o,onChange:Q=>c(Q.target.value),className:"bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-1.5 text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus",children:[s.jsx("option",{value:"",children:"All statuses"}),s.jsx("option",{value:"processed",children:"Processed"}),s.jsx("option",{value:"processing",children:"Processing"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"failed",children:"Failed"})]}),s.jsxs("button",{onClick:()=>h(!m),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg border text-xs font-medium transition-colors ${m?"bg-yellow-400/10 border-yellow-400/30 text-yellow-600":"bg-gm-surface-secondary border-gm-border-primary text-gm-text-tertiary hover:text-gm-text-primary"}`,children:[s.jsx(Fs,{className:`w-3.5 h-3.5 ${m?"fill-yellow-400":""}`})," Favorites"]})]}),s.jsxs("div",{className:"ml-auto flex items-center gap-1 bg-gm-surface-secondary rounded-lg p-0.5",children:[s.jsx("button",{onClick:()=>f("list"),className:`p-1.5 rounded-md transition-colors ${d==="list"?"bg-gm-surface-primary shadow-sm text-gm-text-primary":"text-gm-text-tertiary hover:text-gm-text-primary"}`,children:s.jsx(EC,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>f("grid"),className:`p-1.5 rounded-md transition-colors ${d==="grid"?"bg-gm-surface-primary shadow-sm text-gm-text-primary":"text-gm-text-tertiary hover:text-gm-text-primary"}`,children:s.jsx(jte,{className:"w-3.5 h-3.5"})})]})]}),s.jsx(ds,{children:g.size>0&&s.jsxs(Qe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center gap-3 bg-gm-interactive-primary/5 border border-gm-interactive-primary/20 rounded-xl px-4 py-2.5",children:[s.jsxs("span",{className:"text-sm font-medium text-gm-text-primary",children:[g.size," selected"]}),s.jsx("button",{onClick:q,className:"text-xs text-gm-interactive-primary hover:underline",children:"Select all"}),s.jsx("button",{onClick:Z,className:"text-xs text-gm-text-tertiary hover:underline",children:"Clear"}),s.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[s.jsxs("button",{onClick:J,disabled:z.isPending,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-gm-surface-secondary text-gm-text-primary text-xs hover:bg-gm-surface-hover transition-colors",children:[s.jsx(Xi,{className:"w-3.5 h-3.5"})," Export"]}),s.jsxs("button",{onClick:ae,disabled:D.isPending,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs hover:bg-gm-interactive-primary-hover transition-colors",children:[s.jsx(Qr,{className:"w-3.5 h-3.5"})," Reprocess"]}),s.jsxs("button",{onClick:ee,disabled:M.isPending,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-gm-status-danger-bg text-gm-status-danger text-xs hover:bg-gm-status-danger/20 transition-colors",children:[s.jsx(Et,{className:"w-3.5 h-3.5"})," Delete"]})]})]})}),e==="documents"&&s.jsx(Qe.div,{initial:{opacity:0},animate:{opacity:1},children:j.isLoading?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx(ye,{className:"h-8 w-8 animate-spin text-gm-interactive-primary"})}):L.length===0?s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-8 text-center text-gm-text-tertiary",children:[s.jsx(Zi,{className:"h-12 w-12 mx-auto mb-4 text-gm-text-tertiary/40"}),m?"No favorite documents.":"No documents found. Upload files to get started."]}):s.jsx("div",{className:d==="grid"?"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3":"space-y-2",children:L.map(Q=>oe(Q))})}),e==="deleted"&&s.jsx(Qe.div,{initial:{opacity:0},animate:{opacity:1},children:j.isLoading?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx(ye,{className:"h-8 w-8 animate-spin text-gm-interactive-primary"})}):I.length===0?s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-8 text-center text-gm-text-tertiary",children:[s.jsx(vC,{className:"h-12 w-12 mx-auto mb-4 text-gm-text-tertiary/40"}),"No deleted documents."]}):s.jsx("div",{className:"space-y-2",children:I.map(Q=>{const pe=J$[Q.type||""]||Wt;return s.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-3.5 flex items-center gap-3 opacity-70",children:[s.jsx(pe,{className:"w-5 h-5 text-gm-text-tertiary flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gm-text-primary truncate",children:Q.original_filename||Q.filename}),s.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[Q.type&&s.jsx("span",{className:"text-[10px] text-gm-text-tertiary capitalize",children:Q.type}),Q.created_at&&s.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:new Date(Q.created_at).toLocaleDateString()})]})]}),s.jsxs("button",{onClick:()=>ne(Q.id),className:"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs hover:bg-gm-interactive-primary-hover flex items-center gap-1.5 transition-colors",children:[s.jsx(Qr,{className:"w-3.5 h-3.5"})," Restore"]})]},Q.id)})})}),e==="pending"&&s.jsx(Qe.div,{initial:{opacity:0},animate:{opacity:1},children:N.isLoading?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx(ye,{className:"h-8 w-8 animate-spin text-gm-interactive-primary"})}):U.length===0?s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-8 text-center text-gm-text-tertiary",children:[s.jsx(Zi,{className:"h-12 w-12 mx-auto mb-4 text-gm-text-tertiary/40"}),"No pending files. Upload files to add them to the processing queue."]}):s.jsx("div",{className:"space-y-2",children:U.map(Q=>s.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-3.5 flex items-center gap-3",children:[s.jsx(Wt,{className:"w-5 h-5 text-gm-text-tertiary flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gm-text-primary truncate",children:Q.filename}),s.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[s.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:Q.folder}),s.jsxs("span",{className:"text-[10px] text-gm-text-tertiary",children:[((Q.size??0)/1024).toFixed(1)," KB"]})]})]}),s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-warning-bg text-gm-status-warning font-medium",children:Q.status||""}),s.jsx("button",{onClick:()=>O.mutate({folder:Q.folder,filename:Q.filename}),className:"w-7 h-7 rounded-lg hover:bg-gm-status-danger-bg flex items-center justify-center text-gm-text-tertiary hover:text-gm-status-danger transition-colors",children:s.jsx(Et,{className:"w-3.5 h-3.5"})})]},`${Q.folder}/${Q.filename}`))})}),s.jsx(jRe,{file:w,open:!!w,onClose:()=>b(null),onReprocess:Q=>{T.mutate(Q,{onSuccess:()=>G.success("Reprocessing started")})},onDelete:Q=>{A.mutate(Q,{onSuccess:()=>{G.success("Document deleted"),b(null)}})}})]})}const Wx={positive:"bg-gm-status-success-bg text-gm-status-success",neutral:"bg-gm-surface-secondary text-gm-text-tertiary",negative:"bg-gm-status-danger-bg text-gm-status-danger"},ez={inbound:ZJ,outbound:D6,internal:R6};function CRe(){const[e,t]=y.useState(""),[r,n]=y.useState(""),a=Uoe({requires_response:e==="needs_response"?!0:void 0}),i=Foe(),o=Boe(),c=qoe(),d=qie(),f=Vie(),m=Kie(),h=Hie(),[g,x]=y.useState(null),[w,b]=y.useState(""),[j,N]=y.useState(null),[_,S]=y.useState(!1),k=a.data??[],A=k.filter(L=>!(w&&!JSON.stringify(L).toLowerCase().includes(w.toLowerCase())||r&&String(L.direction||"")!==r)),T=k.find(L=>L.id===g),O=T?.thread_id?String(T.thread_id):null,P=Gie(_?O:null),R=P.data?.emails,M=d.data,D=L=>{i.mutate(L,{onSuccess:()=>{G.success("Email deleted"),g===L&&x(null)}})},z=L=>{o.mutate(L,{onSuccess:()=>G.success("Marked as responded")})},Y=L=>{N(null),c.mutate(L,{onSuccess:F=>{N(F.response||"No response generated."),G.success("AI response generated")},onError:()=>G.error("Failed to generate response")})},I=(L,F,q)=>{L.stopPropagation(),f.mutate({id:F,starred:!q})},K=L=>{m.mutate(L,{onSuccess:()=>{G.success("Email archived"),g===L&&x(null)}})},U=(L,F)=>{h.mutate({id:L,read:!F},{onSuccess:()=>G.success(F?"Marked as unread":"Marked as read")})};if(T){const L=!!T.is_read,F=!!T.is_starred;return s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("button",{onClick:()=>{x(null),N(null),S(!1)},className:"flex items-center gap-1.5 text-sm text-gm-text-tertiary hover:text-gm-text-primary transition-colors",children:[s.jsx(vs,{className:"w-4 h-4"})," Back to emails"]}),s.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-5 space-y-4",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gm-text-primary",children:String(T.subject||"No subject")}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs("span",{className:"text-xs text-gm-text-tertiary",children:["From: ",String(T.from||T.sender||"")]}),T.to&&s.jsxs("span",{className:"text-xs text-gm-text-tertiary",children:["To: ",String(T.to)]})]}),T.date&&s.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:new Date(String(T.date)).toLocaleString()})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:q=>I(q,String(T.id),F),className:"p-2 transition-colors",title:F?"Unstar":"Star",children:s.jsx(Fs,{className:`w-4 h-4 ${F?"fill-yellow-400 text-yellow-400":"text-gm-text-tertiary hover:text-yellow-400"}`})}),s.jsx("button",{onClick:()=>U(String(T.id),L),className:"p-2 text-gm-text-tertiary hover:text-gm-text-primary transition-colors",title:L?"Mark unread":"Mark read",children:L?s.jsx(NC,{className:"w-4 h-4"}):s.jsx(eu,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>K(String(T.id)),className:"p-2 text-gm-text-tertiary hover:text-gm-text-primary transition-colors",title:"Archive",children:s.jsx(vC,{className:"w-4 h-4"})}),T.requires_response&&s.jsxs("button",{onClick:()=>z(String(T.id)),disabled:o.isPending,className:"px-2.5 py-1 rounded-lg bg-gm-status-success-bg text-gm-status-success text-[10px] font-medium hover:bg-gm-status-success/20 flex items-center gap-1",children:[s.jsx(Gn,{className:"w-3 h-3"})," Mark Responded"]}),s.jsx("button",{onClick:()=>D(String(T.id)),className:"p-2 text-gm-text-tertiary hover:text-gm-status-danger transition-colors",children:s.jsx(Et,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[T.requires_response&&s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-warning-bg text-gm-status-warning font-medium flex items-center gap-1",children:[s.jsx(tr,{className:"w-3 h-3"})," Needs Response"]}),T.direction&&(()=>{const q=ez[String(T.direction)]||R6;return s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-surface-secondary text-gm-text-tertiary capitalize flex items-center gap-1",children:[s.jsx(q,{className:"w-3 h-3"})," ",String(T.direction)]})})(),T.sentiment&&s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium capitalize ${Wx[String(T.sentiment)]||Wx.neutral}`,children:String(T.sentiment)}),T.ai_category&&s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-interactive-primary/10 text-gm-interactive-primary font-medium capitalize",children:String(T.ai_category)})]}),T.body&&s.jsx("div",{className:"border-t border-gm-border-primary pt-4",children:s.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none text-sm text-gm-text-primary whitespace-pre-wrap",children:String(T.body)})}),T.ai_summary&&s.jsxs("div",{className:"bg-gm-interactive-primary/5 border border-gm-interactive-primary/20 rounded-xl p-4",children:[s.jsxs("h4",{className:"text-xs font-medium text-gm-interactive-primary flex items-center gap-1.5 mb-1",children:[s.jsx(qt,{className:"w-3.5 h-3.5"})," AI Summary"]}),s.jsx("p",{className:"text-xs text-gm-text-primary",children:String(T.ai_summary)})]}),O&&s.jsxs("div",{className:"border-t border-gm-border-primary pt-4 space-y-3",children:[s.jsx("button",{onClick:()=>S(!_),className:"text-xs text-gm-interactive-primary hover:underline font-medium",children:_?"Hide thread":"Show thread"}),_&&P.isLoading&&s.jsx(ye,{className:"w-4 h-4 animate-spin text-gm-interactive-primary"}),_&&R&&R.length>0&&s.jsx("div",{className:"space-y-2 ml-4 border-l-2 border-gm-interactive-primary/20 pl-4",children:R.filter(q=>String(q.id)!==String(T.id)).map((q,Z)=>s.jsxs("div",{className:"bg-gm-surface-secondary/30 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"text-xs font-medium text-gm-text-primary",children:String(q.from||q.sender||"")}),q.date&&s.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:new Date(String(q.date)).toLocaleString()})]}),s.jsx("p",{className:"text-xs text-gm-text-tertiary line-clamp-3",children:String(q.body||q.ai_summary||"")})]},Z))})]}),s.jsxs("div",{className:"border-t border-gm-border-primary pt-4 space-y-3",children:[s.jsxs("button",{onClick:()=>Y(String(T.id)),disabled:c.isPending,className:"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover flex items-center gap-1.5 disabled:opacity-50 transition-colors",children:[c.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(qt,{className:"w-3.5 h-3.5"}),"Generate AI Response"]}),j&&s.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4",children:[s.jsx("h4",{className:"text-xs font-medium text-gm-text-tertiary uppercase tracking-wider mb-2",children:"Draft Response"}),s.jsx("p",{className:"text-sm text-gm-text-primary whitespace-pre-wrap",children:j})]})]}),T.recipients&&Array.isArray(T.recipients)&&T.recipients.length>0&&s.jsxs("div",{className:"border-t border-gm-border-primary pt-4",children:[s.jsx("h4",{className:"text-xs font-medium text-gm-text-tertiary uppercase tracking-wider mb-2",children:"Recipients"}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:T.recipients.map((q,Z)=>s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-surface-secondary text-gm-text-tertiary",children:String(q.name||q.email||`Recipient #${Z+1}`)},Z))})]})]})]})}return s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold text-gm-text-primary",children:"Emails"}),s.jsxs("span",{className:"text-xs text-gm-text-tertiary",children:[A.length," email",A.length!==1?"s":""]})]}),M&&s.jsx("div",{className:"flex gap-2 flex-wrap",children:[{label:"Total",value:M.total??0,color:"text-gm-text-primary"},{label:"Unread",value:M.unread??0,color:"text-gm-interactive-primary"},{label:"Starred",value:M.starred??0,color:"text-yellow-500"},{label:"Needs Response",value:M.needing_response??0,color:"text-gm-status-warning"}].map(L=>s.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-lg px-3 py-2 flex items-center gap-2",children:[s.jsx("span",{className:`text-lg font-bold ${L.color}`,children:String(L.value)}),s.jsx("span",{className:"text-[10px] text-gm-text-tertiary uppercase tracking-wider",children:L.label})]},L.label))}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("div",{className:"relative flex-1 max-w-xs",children:[s.jsx(bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gm-text-tertiary"}),s.jsx("input",{value:w,onChange:L=>b(L.target.value),placeholder:"Search emails...",className:"w-full pl-9 pr-3 py-1.5 bg-gm-surface-secondary border border-gm-border-primary rounded-lg text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus"})]}),s.jsxs("button",{onClick:()=>t(e==="needs_response"?"":"needs_response"),className:H("px-2.5 py-1.5 rounded-lg text-xs font-medium transition-colors border flex items-center gap-1.5",e==="needs_response"?"bg-gm-status-warning-bg border-gm-status-warning/30 text-gm-status-warning":"bg-gm-surface-secondary border-gm-border-primary text-gm-text-tertiary hover:text-gm-text-primary"),children:[s.jsx(tr,{className:"w-3.5 h-3.5"})," Needs Response"]}),s.jsxs("select",{value:r,onChange:L=>n(L.target.value),className:"bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-1.5 text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus",children:[s.jsx("option",{value:"",children:"All directions"}),s.jsx("option",{value:"inbound",children:"Inbound"}),s.jsx("option",{value:"outbound",children:"Outbound"}),s.jsx("option",{value:"internal",children:"Internal"})]})]}),a.isLoading?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx(ye,{className:"h-8 w-8 animate-spin text-gm-interactive-primary"})}):A.length===0?s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-8 text-center text-gm-text-tertiary",children:[s.jsx(Wn,{className:"h-12 w-12 mx-auto mb-4 text-gm-text-tertiary/40"}),k.length===0?"No emails imported yet.":"No emails match your filters."]}):s.jsx("div",{className:"space-y-2",children:A.map(L=>{const F=!!L.is_starred,q=!!L.is_read,Z=ez[String(L.direction||"")]||null;return s.jsxs("div",{className:H("bg-gm-surface-primary border border-gm-border-primary rounded-xl p-3.5 hover:border-gm-interactive-primary/30 transition-all cursor-pointer group",!q&&"border-l-[3px] border-l-gm-interactive-primary"),onClick:()=>{x(String(L.id)),q||h.mutate({id:String(L.id),read:!0})},children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:B=>I(B,String(L.id),F),className:"flex-shrink-0",children:s.jsx(Fs,{className:`w-4 h-4 transition-colors ${F?"fill-yellow-400 text-yellow-400":"text-gm-text-tertiary/30 hover:text-yellow-400"}`})}),s.jsx(Wn,{className:H("w-5 h-5 flex-shrink-0 transition-colors",q?"text-gm-text-tertiary":"text-gm-interactive-primary","group-hover:text-gm-interactive-primary")}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:H("text-sm truncate transition-colors group-hover:text-gm-interactive-primary",q?"text-gm-text-primary":"text-gm-text-primary font-semibold"),children:String(L.subject||"No subject")}),s.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[s.jsx("span",{className:"text-[10px] text-gm-text-tertiary truncate",children:String(L.from||L.sender||"")}),L.date&&s.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:new Date(String(L.date)).toLocaleDateString()})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[L.sentiment&&s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium capitalize ${Wx[String(L.sentiment)]||Wx.neutral}`,children:String(L.sentiment)}),L.ai_category&&s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-interactive-primary/10 text-gm-interactive-primary font-medium capitalize",children:String(L.ai_category)}),L.requires_response&&s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-warning-bg text-gm-status-warning font-medium flex items-center gap-1",children:[s.jsx(tr,{className:"w-3 h-3"})," Needs Response"]}),Z&&s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-surface-secondary text-gm-text-tertiary capitalize flex items-center gap-1",children:[s.jsx(Z,{className:"w-3 h-3"})," ",String(L.direction)]})]})]}),L.ai_summary&&s.jsx("p",{className:"text-[10px] text-gm-text-tertiary mt-1 ml-12 truncate",children:String(L.ai_summary)})]},String(L.id))})})]})}const Q_={whatsapp:"WhatsApp",slack:"Slack",teams:"Teams",discord:"Discord",zoom:"Zoom",telegram:"Telegram"};function kRe(){const[e,t]=y.useState(""),[r,n]=y.useState(""),[a,i]=y.useState(null),[o,c]=y.useState(!1),[d,f]=y.useState(""),[m,h]=y.useState(""),g=$ie({search:e||void 0,sourceApp:r||void 0}),x=zie(a),w=Uie(),b=Fie(),j=Bie(),N=g.data?.conversations??[],_=x.data?.conversation,S=T=>{confirm("Delete this conversation?")&&w.mutate(T,{onSuccess:()=>{G.success("Conversation deleted"),i(null)},onError:()=>G.error("Failed to delete conversation")})},k=T=>{b.mutate(T,{onSuccess:()=>G.success("Re-embedding started"),onError:()=>G.error("Failed to re-embed")})},A=()=>{d.trim()&&j.mutate({text:d,formatHint:m||void 0},{onSuccess:T=>{const O=T;G.success(`Parsed: ${O.format} format, ${O.stats?.messageCount??"?"} messages`),c(!1),f("")},onError:()=>G.error("Failed to parse conversation")})};return s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold text-gm-text-primary",children:"Conversations"}),s.jsx("div",{className:"flex gap-2",children:s.jsxs("button",{onClick:()=>c(!0),className:"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover flex items-center gap-1.5 transition-colors",children:[s.jsx(db,{className:"w-3.5 h-3.5"})," Import"]})})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("div",{className:"relative flex-1 max-w-xs",children:[s.jsx(bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gm-text-tertiary"}),s.jsx("input",{value:e,onChange:T=>t(T.target.value),placeholder:"Search conversations...",className:"w-full pl-9 pr-3 py-1.5 bg-gm-surface-secondary border border-gm-border-primary rounded-lg text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus"})]}),s.jsxs("select",{value:r,onChange:T=>n(T.target.value),className:"bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-1.5 text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus",children:[s.jsx("option",{value:"",children:"All sources"}),Object.entries(Q_).map(([T,O])=>s.jsx("option",{value:T,children:O},T))]}),s.jsxs("span",{className:"text-xs text-gm-text-tertiary ml-auto",children:[N.length," conversation",N.length!==1?"s":""]})]}),g.isLoading?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx(ye,{className:"h-8 w-8 animate-spin text-gm-interactive-primary"})}):N.length===0?s.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-8 text-center text-gm-text-tertiary",children:[s.jsx(ms,{className:"h-12 w-12 mx-auto mb-4 text-gm-text-tertiary/40"}),"No conversations found. Import a conversation to get started."]}):s.jsx("div",{className:"space-y-2",children:N.map(T=>{const O=T.participants?.length??T.participant_count??0,P=T.message_count??T.messages_count??0,R=!!T.is_embedded;return s.jsx(Qe.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-3.5 hover:border-gm-interactive-primary/30 transition-all cursor-pointer group",onClick:()=>i(String(T.id)),children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ms,{className:"w-5 h-5 text-gm-text-tertiary group-hover:text-gm-interactive-primary transition-colors flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gm-text-primary truncate group-hover:text-gm-interactive-primary transition-colors",children:String(T.title||T.name||"Untitled Conversation")}),s.jsxs("div",{className:"flex items-center gap-3 mt-0.5",children:[T.source_app&&s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-surface-secondary text-gm-text-tertiary capitalize",children:Q_[String(T.source_app)]||String(T.source_app)}),s.jsxs("span",{className:"text-[10px] text-gm-text-tertiary flex items-center gap-0.5",children:[s.jsx(yr,{className:"w-3 h-3"})," ",String(O)]}),s.jsxs("span",{className:"text-[10px] text-gm-text-tertiary flex items-center gap-0.5",children:[s.jsx(cte,{className:"w-3 h-3"})," ",String(P)," msgs"]}),T.created_at&&s.jsxs("span",{className:"text-[10px] text-gm-text-tertiary flex items-center gap-0.5",children:[s.jsx(tr,{className:"w-3 h-3"})," ",new Date(String(T.created_at)).toLocaleDateString()]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[R?s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-success-bg text-gm-status-success font-medium flex items-center gap-1",children:[s.jsx(Gn,{className:"w-3 h-3"})," Embedded"]}):s.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-warning-bg text-gm-status-warning font-medium flex items-center gap-1",children:[s.jsx(rp,{className:"w-3 h-3"})," Not embedded"]}),s.jsx("button",{onClick:M=>{M.stopPropagation(),k(String(T.id))},className:"w-7 h-7 rounded-lg hover:bg-gm-surface-hover flex items-center justify-center text-gm-text-tertiary hover:text-gm-interactive-primary transition-colors opacity-0 group-hover:opacity-100",title:"Re-embed",children:s.jsx(Qr,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:M=>{M.stopPropagation(),S(String(T.id))},className:"w-7 h-7 rounded-lg hover:bg-gm-status-danger-bg flex items-center justify-center text-gm-text-tertiary hover:text-gm-status-danger transition-colors opacity-0 group-hover:opacity-100",title:"Delete",children:s.jsx(Et,{className:"w-3.5 h-3.5"})})]})]})},String(T.id))})}),s.jsx(ERe,{open:!!a,onClose:()=>i(null),conversation:_??null,isLoading:x.isLoading,onReembed:()=>a&&k(a),onDelete:()=>a&&S(a)}),s.jsx(Ws,{open:o,onOpenChange:T=>!T&&c(!1),children:s.jsxs(ui,{className:"max-w-lg",children:[s.jsx(Na,{children:"Import Conversation"}),s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-gm-text-tertiary block mb-1",children:"Format hint (optional)"}),s.jsxs("select",{value:m,onChange:T=>h(T.target.value),className:"w-full bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-2 text-xs text-gm-text-primary",children:[s.jsx("option",{value:"",children:"Auto-detect"}),s.jsx("option",{value:"whatsapp",children:"WhatsApp"}),s.jsx("option",{value:"slack",children:"Slack"}),s.jsx("option",{value:"teams",children:"Teams"}),s.jsx("option",{value:"discord",children:"Discord"}),s.jsx("option",{value:"zoom",children:"Zoom"}),s.jsx("option",{value:"telegram",children:"Telegram"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-gm-text-tertiary block mb-1",children:"Paste conversation text"}),s.jsx("textarea",{value:d,onChange:T=>f(T.target.value),rows:10,placeholder:"Paste your exported conversation text here...",className:"w-full bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-2 text-xs text-gm-text-primary resize-y focus:outline-none focus:ring-2 focus:ring-gm-border-focus font-mono"})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>c(!1),className:"px-3 py-1.5 rounded-lg bg-gm-surface-secondary text-gm-text-primary text-xs hover:bg-gm-surface-hover transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:A,disabled:j.isPending||!d.trim(),className:"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover flex items-center gap-1.5 disabled:opacity-50 transition-colors",children:[j.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Wt,{className:"w-3.5 h-3.5"}),"Parse & Import"]})]})]})]})})]})}function ERe({open:e,onClose:t,conversation:r,isLoading:n,onReembed:a,onDelete:i}){const[o,c]=y.useState("messages");return s.jsx(Ws,{open:e,onOpenChange:d=>!d&&t(),children:s.jsxs(ui,{className:"max-w-2xl p-0 overflow-hidden",children:[s.jsx(Na,{className:"sr-only",children:"Conversation Details"}),n&&s.jsx("div",{className:"flex items-center justify-center h-48",children:s.jsx(ye,{className:"w-8 h-8 animate-spin text-gm-interactive-primary"})}),!n&&r&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-gradient-to-r from-gm-interactive-primary/20 to-gm-interactive-primary/5 p-5",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-12 h-12 rounded-lg bg-gm-interactive-primary/10 border border-gm-interactive-primary/20 flex items-center justify-center",children:s.jsx(ms,{className:"w-5 h-5 text-gm-interactive-primary"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h2",{className:"text-base font-bold text-gm-text-primary truncate",children:String(r.title||r.name||"Untitled")}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.source_app&&s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-surface-secondary text-gm-text-secondary capitalize",children:Q_[String(r.source_app)]||String(r.source_app)}),s.jsxs("span",{className:"text-xs text-gm-text-tertiary",children:[String(r.participants?.length??r.participant_count??0)," participants"]}),s.jsxs("span",{className:"text-xs text-gm-text-tertiary",children:[String(r.message_count??r.messages_count??0)," messages"]})]})]}),s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("button",{onClick:a,className:"w-8 h-8 rounded-lg hover:bg-gm-surface-hover flex items-center justify-center",title:"Re-embed",children:s.jsx(Qr,{className:"w-4 h-4 text-gm-text-tertiary"})}),s.jsx("button",{onClick:i,className:"w-8 h-8 rounded-lg hover:bg-gm-status-danger-bg flex items-center justify-center",title:"Delete",children:s.jsx(Et,{className:"w-4 h-4 text-gm-status-danger"})})]})]})}),s.jsx("div",{className:"flex border-b border-gm-border-primary px-5 gap-1",children:["messages","entities"].map(d=>s.jsx("button",{onClick:()=>c(d),className:`px-3 py-2.5 text-xs font-medium border-b-2 transition-colors capitalize ${o===d?"border-gm-interactive-primary text-gm-interactive-primary":"border-transparent text-gm-text-tertiary hover:text-gm-text-primary"}`,children:d},d))}),s.jsxs("div",{className:"p-5 max-h-[55vh] overflow-y-auto space-y-3",children:[o==="messages"&&(()=>{const d=r.messages??[];return d.length===0?s.jsx("p",{className:"text-sm text-gm-text-tertiary text-center py-4",children:"No messages available."}):d.map((f,m)=>s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"w-7 h-7 rounded-full bg-gm-interactive-primary/10 flex items-center justify-center flex-shrink-0 text-[10px] font-bold text-gm-interactive-primary",children:String(f.sender||f.author||"?").charAt(0).toUpperCase()}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-medium text-gm-text-primary",children:String(f.sender||f.author||"Unknown")}),f.timestamp&&s.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:new Date(String(f.timestamp)).toLocaleString()})]}),s.jsx("p",{className:"text-xs text-gm-text-tertiary mt-0.5 whitespace-pre-wrap",children:String(f.text||f.content||f.body||"")})]})]},m))})(),o==="entities"&&(()=>{const d=r.entities??r.extraction??{},f=Object.entries(d).filter(([,m])=>Array.isArray(m)&&m.length>0);return f.length===0?s.jsx("p",{className:"text-sm text-gm-text-tertiary text-center py-4",children:"No entities extracted."}):f.map(([m,h])=>s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary mb-2 capitalize",children:[m," (",h.length,")"]}),s.jsx("div",{className:"space-y-1.5",children:h.map((g,x)=>s.jsx("div",{className:"bg-gm-surface-secondary/30 rounded-lg p-2.5 text-xs text-gm-text-primary",children:String(g.text||g.name||g.content||JSON.stringify(g))},x))})]},m))})()]})]}),!n&&!r&&s.jsx("div",{className:"flex items-center justify-center h-48 text-gm-text-tertiary text-sm",children:"Conversation not found."})]})})}function Or(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=Or(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}var ARe={value:()=>{}};function C0(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new jy(r)}function jy(e){this._=e}function TRe(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}jy.prototype=C0.prototype={constructor:jy,on:function(e,t){var r=this._,n=TRe(e+"",r),a,i=-1,o=n.length;if(arguments.length<2){for(;++i<o;)if((a=(e=n[i]).type)&&(a=ORe(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(a=(e=n[i]).type)r[a]=tz(r[a],e.name,t);else if(t==null)for(a in r)r[a]=tz(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new jy(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,i;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],n=0,a=i.length;n<a;++n)i[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,i=n.length;a<i;++a)n[a].value.apply(t,r)}};function ORe(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function tz(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=ARe,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var Y_="http://www.w3.org/1999/xhtml";const rz={svg:"http://www.w3.org/2000/svg",xhtml:Y_,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function k0(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),rz.hasOwnProperty(t)?{space:rz[t],local:e}:e}function PRe(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===Y_&&t.documentElement.namespaceURI===Y_?t.createElement(e):t.createElementNS(r,e)}}function MRe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function q7(e){var t=k0(e);return(t.local?MRe:PRe)(t)}function RRe(){}function OA(e){return e==null?RRe:function(){return this.querySelector(e)}}function DRe(e){typeof e!="function"&&(e=OA(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var i=t[a],o=i.length,c=n[a]=new Array(o),d,f,m=0;m<o;++m)(d=i[m])&&(f=e.call(d,d.__data__,m,i))&&("__data__"in d&&(f.__data__=d.__data__),c[m]=f);return new xs(n,this._parents)}function IRe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function LRe(){return[]}function V7(e){return e==null?LRe:function(){return this.querySelectorAll(e)}}function $Re(e){return function(){return IRe(e.apply(this,arguments))}}function zRe(e){typeof e=="function"?e=$Re(e):e=V7(e);for(var t=this._groups,r=t.length,n=[],a=[],i=0;i<r;++i)for(var o=t[i],c=o.length,d,f=0;f<c;++f)(d=o[f])&&(n.push(e.call(d,d.__data__,f,o)),a.push(d));return new xs(n,a)}function K7(e){return function(){return this.matches(e)}}function H7(e){return function(t){return t.matches(e)}}var URe=Array.prototype.find;function FRe(e){return function(){return URe.call(this.children,e)}}function BRe(){return this.firstElementChild}function qRe(e){return this.select(e==null?BRe:FRe(typeof e=="function"?e:H7(e)))}var VRe=Array.prototype.filter;function KRe(){return Array.from(this.children)}function HRe(e){return function(){return VRe.call(this.children,e)}}function GRe(e){return this.selectAll(e==null?KRe:HRe(typeof e=="function"?e:H7(e)))}function WRe(e){typeof e!="function"&&(e=K7(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var i=t[a],o=i.length,c=n[a]=[],d,f=0;f<o;++f)(d=i[f])&&e.call(d,d.__data__,f,i)&&c.push(d);return new xs(n,this._parents)}function G7(e){return new Array(e.length)}function QRe(){return new xs(this._enter||this._groups.map(G7),this._parents)}function Hv(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Hv.prototype={constructor:Hv,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function YRe(e){return function(){return e}}function XRe(e,t,r,n,a,i){for(var o=0,c,d=t.length,f=i.length;o<f;++o)(c=t[o])?(c.__data__=i[o],n[o]=c):r[o]=new Hv(e,i[o]);for(;o<d;++o)(c=t[o])&&(a[o]=c)}function ZRe(e,t,r,n,a,i,o){var c,d,f=new Map,m=t.length,h=i.length,g=new Array(m),x;for(c=0;c<m;++c)(d=t[c])&&(g[c]=x=o.call(d,d.__data__,c,t)+"",f.has(x)?a[c]=d:f.set(x,d));for(c=0;c<h;++c)x=o.call(e,i[c],c,i)+"",(d=f.get(x))?(n[c]=d,d.__data__=i[c],f.delete(x)):r[c]=new Hv(e,i[c]);for(c=0;c<m;++c)(d=t[c])&&f.get(g[c])===d&&(a[c]=d)}function JRe(e){return e.__data__}function eDe(e,t){if(!arguments.length)return Array.from(this,JRe);var r=t?ZRe:XRe,n=this._parents,a=this._groups;typeof e!="function"&&(e=YRe(e));for(var i=a.length,o=new Array(i),c=new Array(i),d=new Array(i),f=0;f<i;++f){var m=n[f],h=a[f],g=h.length,x=tDe(e.call(m,m&&m.__data__,f,n)),w=x.length,b=c[f]=new Array(w),j=o[f]=new Array(w),N=d[f]=new Array(g);r(m,h,b,j,N,x,t);for(var _=0,S=0,k,A;_<w;++_)if(k=b[_]){for(_>=S&&(S=_+1);!(A=j[S])&&++S<w;);k._next=A||null}}return o=new xs(o,n),o._enter=c,o._exit=d,o}function tDe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function rDe(){return new xs(this._exit||this._groups.map(G7),this._parents)}function nDe(e,t,r){var n=this.enter(),a=this,i=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?i.remove():r(i),n&&a?n.merge(a).order():a}function sDe(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,i=n.length,o=Math.min(a,i),c=new Array(a),d=0;d<o;++d)for(var f=r[d],m=n[d],h=f.length,g=c[d]=new Array(h),x,w=0;w<h;++w)(x=f[w]||m[w])&&(g[w]=x);for(;d<a;++d)c[d]=r[d];return new xs(c,this._parents)}function aDe(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,i=n[a],o;--a>=0;)(o=n[a])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function iDe(e){e||(e=oDe);function t(h,g){return h&&g?e(h.__data__,g.__data__):!h-!g}for(var r=this._groups,n=r.length,a=new Array(n),i=0;i<n;++i){for(var o=r[i],c=o.length,d=a[i]=new Array(c),f,m=0;m<c;++m)(f=o[m])&&(d[m]=f);d.sort(t)}return new xs(a,this._parents).order()}function oDe(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function lDe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function cDe(){return Array.from(this)}function uDe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,i=n.length;a<i;++a){var o=n[a];if(o)return o}return null}function dDe(){let e=0;for(const t of this)++e;return e}function fDe(){return!this.node()}function mDe(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],i=0,o=a.length,c;i<o;++i)(c=a[i])&&e.call(c,c.__data__,i,a);return this}function hDe(e){return function(){this.removeAttribute(e)}}function pDe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gDe(e,t){return function(){this.setAttribute(e,t)}}function xDe(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function yDe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function vDe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function bDe(e,t){var r=k0(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?pDe:hDe:typeof t=="function"?r.local?vDe:yDe:r.local?xDe:gDe)(r,t))}function W7(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function wDe(e){return function(){this.style.removeProperty(e)}}function jDe(e,t,r){return function(){this.style.setProperty(e,t,r)}}function NDe(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function SDe(e,t,r){return arguments.length>1?this.each((t==null?wDe:typeof t=="function"?NDe:jDe)(e,t,r??"")):Gd(this.node(),e)}function Gd(e,t){return e.style.getPropertyValue(t)||W7(e).getComputedStyle(e,null).getPropertyValue(t)}function _De(e){return function(){delete this[e]}}function CDe(e,t){return function(){this[e]=t}}function kDe(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function EDe(e,t){return arguments.length>1?this.each((t==null?_De:typeof t=="function"?kDe:CDe)(e,t)):this.node()[e]}function Q7(e){return e.trim().split(/^|\s+/)}function PA(e){return e.classList||new Y7(e)}function Y7(e){this._node=e,this._names=Q7(e.getAttribute("class")||"")}Y7.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function X7(e,t){for(var r=PA(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function Z7(e,t){for(var r=PA(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function ADe(e){return function(){X7(this,e)}}function TDe(e){return function(){Z7(this,e)}}function ODe(e,t){return function(){(t.apply(this,arguments)?X7:Z7)(this,e)}}function PDe(e,t){var r=Q7(e+"");if(arguments.length<2){for(var n=PA(this.node()),a=-1,i=r.length;++a<i;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?ODe:t?ADe:TDe)(r,t))}function MDe(){this.textContent=""}function RDe(e){return function(){this.textContent=e}}function DDe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function IDe(e){return arguments.length?this.each(e==null?MDe:(typeof e=="function"?DDe:RDe)(e)):this.node().textContent}function LDe(){this.innerHTML=""}function $De(e){return function(){this.innerHTML=e}}function zDe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function UDe(e){return arguments.length?this.each(e==null?LDe:(typeof e=="function"?zDe:$De)(e)):this.node().innerHTML}function FDe(){this.nextSibling&&this.parentNode.appendChild(this)}function BDe(){return this.each(FDe)}function qDe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function VDe(){return this.each(qDe)}function KDe(e){var t=typeof e=="function"?e:q7(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function HDe(){return null}function GDe(e,t){var r=typeof e=="function"?e:q7(e),n=t==null?HDe:typeof t=="function"?t:OA(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function WDe(){var e=this.parentNode;e&&e.removeChild(this)}function QDe(){return this.each(WDe)}function YDe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function XDe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ZDe(e){return this.select(e?XDe:YDe)}function JDe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function e4e(e){return function(t){e.call(this,t,this.__data__)}}function t4e(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function r4e(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,i;r<a;++r)i=t[r],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++n]=i;++n?t.length=n:delete this.__on}}}function n4e(e,t,r){return function(){var n=this.__on,a,i=e4e(t);if(n){for(var o=0,c=n.length;o<c;++o)if((a=n[o]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=i,a.options=r),a.value=t;return}}this.addEventListener(e.type,i,r),a={type:e.type,name:e.name,value:t,listener:i,options:r},n?n.push(a):this.__on=[a]}}function s4e(e,t,r){var n=t4e(e+""),a,i=n.length,o;if(arguments.length<2){var c=this.node().__on;if(c){for(var d=0,f=c.length,m;d<f;++d)for(a=0,m=c[d];a<i;++a)if((o=n[a]).type===m.type&&o.name===m.name)return m.value}return}for(c=t?n4e:r4e,a=0;a<i;++a)this.each(c(n[a],t,r));return this}function J7(e,t,r){var n=W7(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function a4e(e,t){return function(){return J7(this,e,t)}}function i4e(e,t){return function(){return J7(this,e,t.apply(this,arguments))}}function o4e(e,t){return this.each((typeof t=="function"?i4e:a4e)(e,t))}function*l4e(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,i=n.length,o;a<i;++a)(o=n[a])&&(yield o)}var eG=[null];function xs(e,t){this._groups=e,this._parents=t}function Rp(){return new xs([[document.documentElement]],eG)}function c4e(){return this}xs.prototype=Rp.prototype={constructor:xs,select:DRe,selectAll:zRe,selectChild:qRe,selectChildren:GRe,filter:WRe,data:eDe,enter:QRe,exit:rDe,join:nDe,merge:sDe,selection:c4e,order:aDe,sort:iDe,call:lDe,nodes:cDe,node:uDe,size:dDe,empty:fDe,each:mDe,attr:bDe,style:SDe,property:EDe,classed:PDe,text:IDe,html:UDe,raise:BDe,lower:VDe,append:KDe,insert:GDe,remove:QDe,clone:ZDe,datum:JDe,on:s4e,dispatch:o4e,[Symbol.iterator]:l4e};function cs(e){return typeof e=="string"?new xs([[document.querySelector(e)]],[document.documentElement]):new xs([[e]],eG)}function u4e(e){let t;for(;t=e.sourceEvent;)e=t;return e}function ca(e,t){if(e=u4e(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const d4e={passive:!1},Gh={capture:!0,passive:!1};function OS(e){e.stopImmediatePropagation()}function Rd(e){e.preventDefault(),e.stopImmediatePropagation()}function tG(e){var t=e.document.documentElement,r=cs(e).on("dragstart.drag",Rd,Gh);"onselectstart"in t?r.on("selectstart.drag",Rd,Gh):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function rG(e,t){var r=e.document.documentElement,n=cs(e).on("dragstart.drag",null);t&&(n.on("click.drag",Rd,Gh),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Qx=e=>()=>e;function X_(e,{sourceEvent:t,subject:r,target:n,identifier:a,active:i,x:o,y:c,dx:d,dy:f,dispatch:m}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:m}})}X_.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function f4e(e){return!e.ctrlKey&&!e.button}function m4e(){return this.parentNode}function h4e(e,t){return t??{x:e.x,y:e.y}}function p4e(){return navigator.maxTouchPoints||"ontouchstart"in this}function nG(){var e=f4e,t=m4e,r=h4e,n=p4e,a={},i=C0("start","drag","end"),o=0,c,d,f,m,h=0;function g(k){k.on("mousedown.drag",x).filter(n).on("touchstart.drag",j).on("touchmove.drag",N,d4e).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(k,A){if(!(m||!e.call(this,k,A))){var T=S(this,t.call(this,k,A),k,A,"mouse");T&&(cs(k.view).on("mousemove.drag",w,Gh).on("mouseup.drag",b,Gh),tG(k.view),OS(k),f=!1,c=k.clientX,d=k.clientY,T("start",k))}}function w(k){if(Rd(k),!f){var A=k.clientX-c,T=k.clientY-d;f=A*A+T*T>h}a.mouse("drag",k)}function b(k){cs(k.view).on("mousemove.drag mouseup.drag",null),rG(k.view,f),Rd(k),a.mouse("end",k)}function j(k,A){if(e.call(this,k,A)){var T=k.changedTouches,O=t.call(this,k,A),P=T.length,R,M;for(R=0;R<P;++R)(M=S(this,O,k,A,T[R].identifier,T[R]))&&(OS(k),M("start",k,T[R]))}}function N(k){var A=k.changedTouches,T=A.length,O,P;for(O=0;O<T;++O)(P=a[A[O].identifier])&&(Rd(k),P("drag",k,A[O]))}function _(k){var A=k.changedTouches,T=A.length,O,P;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),O=0;O<T;++O)(P=a[A[O].identifier])&&(OS(k),P("end",k,A[O]))}function S(k,A,T,O,P,R){var M=i.copy(),D=ca(R||T,A),z,Y,I;if((I=r.call(k,new X_("beforestart",{sourceEvent:T,target:g,identifier:P,active:o,x:D[0],y:D[1],dx:0,dy:0,dispatch:M}),O))!=null)return z=I.x-D[0]||0,Y=I.y-D[1]||0,function K(U,L,F){var q=D,Z;switch(U){case"start":a[P]=K,Z=o++;break;case"end":delete a[P],--o;case"drag":D=ca(F||L,A),Z=o;break}M.call(U,k,new X_(U,{sourceEvent:L,subject:I,target:g,identifier:P,active:Z,x:D[0]+z,y:D[1]+Y,dx:D[0]-q[0],dy:D[1]-q[1],dispatch:M}),O)}}return g.filter=function(k){return arguments.length?(e=typeof k=="function"?k:Qx(!!k),g):e},g.container=function(k){return arguments.length?(t=typeof k=="function"?k:Qx(k),g):t},g.subject=function(k){return arguments.length?(r=typeof k=="function"?k:Qx(k),g):r},g.touchable=function(k){return arguments.length?(n=typeof k=="function"?k:Qx(!!k),g):n},g.on=function(){var k=i.on.apply(i,arguments);return k===i?g:k},g.clickDistance=function(k){return arguments.length?(h=(k=+k)*k,g):Math.sqrt(h)},g}var Wd=0,Xm=0,Fm=0,sG=1e3,Gv,Zm,Wv=0,Wc=0,E0=0,Wh=typeof performance=="object"&&performance.now?performance:Date,aG=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function MA(){return Wc||(aG(g4e),Wc=Wh.now()+E0)}function g4e(){Wc=0}function Qv(){this._call=this._time=this._next=null}Qv.prototype=iG.prototype={constructor:Qv,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?MA():+r)+(t==null?0:+t),!this._next&&Zm!==this&&(Zm?Zm._next=this:Gv=this,Zm=this),this._call=e,this._time=r,Z_()},stop:function(){this._call&&(this._call=null,this._time=1/0,Z_())}};function iG(e,t,r){var n=new Qv;return n.restart(e,t,r),n}function x4e(){MA(),++Wd;for(var e=Gv,t;e;)(t=Wc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Wd}function nz(){Wc=(Wv=Wh.now())+E0,Wd=Xm=0;try{x4e()}finally{Wd=0,v4e(),Wc=0}}function y4e(){var e=Wh.now(),t=e-Wv;t>sG&&(E0-=t,Wv=e)}function v4e(){for(var e,t=Gv,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:Gv=r);Zm=e,Z_(n)}function Z_(e){if(!Wd){Xm&&(Xm=clearTimeout(Xm));var t=e-Wc;t>24?(e<1/0&&(Xm=setTimeout(nz,e-Wh.now()-E0)),Fm&&(Fm=clearInterval(Fm))):(Fm||(Wv=Wh.now(),Fm=setInterval(y4e,sG)),Wd=1,aG(nz))}}function sz(e,t,r){var n=new Qv;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var b4e=C0("start","end","cancel","interrupt"),w4e=[],oG=0,az=1,J_=2,Ny=3,iz=4,eC=5,Sy=6;function A0(e,t,r,n,a,i){var o=e.__transition;if(!o)e.__transition={};else if(r in o)return;j4e(e,r,{name:t,index:n,group:a,on:b4e,tween:w4e,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:oG})}function RA(e,t){var r=Pa(e,t);if(r.state>oG)throw new Error("too late; already scheduled");return r}function fi(e,t){var r=Pa(e,t);if(r.state>Ny)throw new Error("too late; already running");return r}function Pa(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function j4e(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=iG(i,0,r.time);function i(f){r.state=az,r.timer.restart(o,r.delay,r.time),r.delay<=f&&o(f-r.delay)}function o(f){var m,h,g,x;if(r.state!==az)return d();for(m in n)if(x=n[m],x.name===r.name){if(x.state===Ny)return sz(o);x.state===iz?(x.state=Sy,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete n[m]):+m<t&&(x.state=Sy,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete n[m])}if(sz(function(){r.state===Ny&&(r.state=iz,r.timer.restart(c,r.delay,r.time),c(f))}),r.state=J_,r.on.call("start",e,e.__data__,r.index,r.group),r.state===J_){for(r.state=Ny,a=new Array(g=r.tween.length),m=0,h=-1;m<g;++m)(x=r.tween[m].value.call(e,e.__data__,r.index,r.group))&&(a[++h]=x);a.length=h+1}}function c(f){for(var m=f<r.duration?r.ease.call(null,f/r.duration):(r.timer.restart(d),r.state=eC,1),h=-1,g=a.length;++h<g;)a[h].call(e,m);r.state===eC&&(r.on.call("end",e,e.__data__,r.index,r.group),d())}function d(){r.state=Sy,r.timer.stop(),delete n[t];for(var f in n)return;delete e.__transition}}function _y(e,t){var r=e.__transition,n,a,i=!0,o;if(r){t=t==null?null:t+"";for(o in r){if((n=r[o]).name!==t){i=!1;continue}a=n.state>J_&&n.state<eC,n.state=Sy,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[o]}i&&delete e.__transition}}function N4e(e){return this.each(function(){_y(this,e)})}function S4e(e,t){var r,n;return function(){var a=fi(this,e),i=a.tween;if(i!==r){n=r=i;for(var o=0,c=n.length;o<c;++o)if(n[o].name===t){n=n.slice(),n.splice(o,1);break}}a.tween=n}}function _4e(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var i=fi(this,e),o=i.tween;if(o!==n){a=(n=o).slice();for(var c={name:t,value:r},d=0,f=a.length;d<f;++d)if(a[d].name===t){a[d]=c;break}d===f&&a.push(c)}i.tween=a}}function C4e(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Pa(this.node(),r).tween,a=0,i=n.length,o;a<i;++a)if((o=n[a]).name===e)return o.value;return null}return this.each((t==null?S4e:_4e)(r,e,t))}function DA(e,t,r){var n=e._id;return e.each(function(){var a=fi(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return Pa(a,n).value[t]}}function lG(e,t){var r;return(typeof t=="number"?ua:t instanceof Fc?dv:(r=Fc(t))?(t=r,dv):iB)(e,t)}function k4e(e){return function(){this.removeAttribute(e)}}function E4e(e){return function(){this.removeAttributeNS(e.space,e.local)}}function A4e(e,t,r){var n,a=r+"",i;return function(){var o=this.getAttribute(e);return o===a?null:o===n?i:i=t(n=o,r)}}function T4e(e,t,r){var n,a=r+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===n?i:i=t(n=o,r)}}function O4e(e,t,r){var n,a,i;return function(){var o,c=r(this),d;return c==null?void this.removeAttribute(e):(o=this.getAttribute(e),d=c+"",o===d?null:o===n&&d===a?i:(a=d,i=t(n=o,c)))}}function P4e(e,t,r){var n,a,i;return function(){var o,c=r(this),d;return c==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),d=c+"",o===d?null:o===n&&d===a?i:(a=d,i=t(n=o,c)))}}function M4e(e,t){var r=k0(e),n=r==="transform"?Tge:lG;return this.attrTween(e,typeof t=="function"?(r.local?P4e:O4e)(r,n,DA(this,"attr."+e,t)):t==null?(r.local?E4e:k4e)(r):(r.local?T4e:A4e)(r,n,t))}function R4e(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function D4e(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function I4e(e,t){var r,n;function a(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&D4e(e,i)),r}return a._value=t,a}function L4e(e,t){var r,n;function a(){var i=t.apply(this,arguments);return i!==n&&(r=(n=i)&&R4e(e,i)),r}return a._value=t,a}function $4e(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=k0(e);return this.tween(r,(n.local?I4e:L4e)(n,t))}function z4e(e,t){return function(){RA(this,e).delay=+t.apply(this,arguments)}}function U4e(e,t){return t=+t,function(){RA(this,e).delay=t}}function F4e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?z4e:U4e)(t,e)):Pa(this.node(),t).delay}function B4e(e,t){return function(){fi(this,e).duration=+t.apply(this,arguments)}}function q4e(e,t){return t=+t,function(){fi(this,e).duration=t}}function V4e(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?B4e:q4e)(t,e)):Pa(this.node(),t).duration}function K4e(e,t){if(typeof t!="function")throw new Error;return function(){fi(this,e).ease=t}}function H4e(e){var t=this._id;return arguments.length?this.each(K4e(t,e)):Pa(this.node(),t).ease}function G4e(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;fi(this,e).ease=r}}function W4e(e){if(typeof e!="function")throw new Error;return this.each(G4e(this._id,e))}function Q4e(e){typeof e!="function"&&(e=K7(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var i=t[a],o=i.length,c=n[a]=[],d,f=0;f<o;++f)(d=i[f])&&e.call(d,d.__data__,f,i)&&c.push(d);return new uo(n,this._parents,this._name,this._id)}function Y4e(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,i=Math.min(n,a),o=new Array(n),c=0;c<i;++c)for(var d=t[c],f=r[c],m=d.length,h=o[c]=new Array(m),g,x=0;x<m;++x)(g=d[x]||f[x])&&(h[x]=g);for(;c<n;++c)o[c]=t[c];return new uo(o,this._parents,this._name,this._id)}function X4e(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function Z4e(e,t,r){var n,a,i=X4e(t)?RA:fi;return function(){var o=i(this,e),c=o.on;c!==n&&(a=(n=c).copy()).on(t,r),o.on=a}}function J4e(e,t){var r=this._id;return arguments.length<2?Pa(this.node(),r).on.on(e):this.each(Z4e(r,e,t))}function eIe(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function tIe(){return this.on("end.remove",eIe(this._id))}function rIe(e){var t=this._name,r=this._id;typeof e!="function"&&(e=OA(e));for(var n=this._groups,a=n.length,i=new Array(a),o=0;o<a;++o)for(var c=n[o],d=c.length,f=i[o]=new Array(d),m,h,g=0;g<d;++g)(m=c[g])&&(h=e.call(m,m.__data__,g,c))&&("__data__"in m&&(h.__data__=m.__data__),f[g]=h,A0(f[g],t,r,g,f,Pa(m,r)));return new uo(i,this._parents,t,r)}function nIe(e){var t=this._name,r=this._id;typeof e!="function"&&(e=V7(e));for(var n=this._groups,a=n.length,i=[],o=[],c=0;c<a;++c)for(var d=n[c],f=d.length,m,h=0;h<f;++h)if(m=d[h]){for(var g=e.call(m,m.__data__,h,d),x,w=Pa(m,r),b=0,j=g.length;b<j;++b)(x=g[b])&&A0(x,t,r,b,g,w);i.push(g),o.push(m)}return new uo(i,o,t,r)}var sIe=Rp.prototype.constructor;function aIe(){return new sIe(this._groups,this._parents)}function iIe(e,t){var r,n,a;return function(){var i=Gd(this,e),o=(this.style.removeProperty(e),Gd(this,e));return i===o?null:i===r&&o===n?a:a=t(r=i,n=o)}}function cG(e){return function(){this.style.removeProperty(e)}}function oIe(e,t,r){var n,a=r+"",i;return function(){var o=Gd(this,e);return o===a?null:o===n?i:i=t(n=o,r)}}function lIe(e,t,r){var n,a,i;return function(){var o=Gd(this,e),c=r(this),d=c+"";return c==null&&(d=c=(this.style.removeProperty(e),Gd(this,e))),o===d?null:o===n&&d===a?i:(a=d,i=t(n=o,c))}}function cIe(e,t){var r,n,a,i="style."+t,o="end."+i,c;return function(){var d=fi(this,e),f=d.on,m=d.value[i]==null?c||(c=cG(t)):void 0;(f!==r||a!==m)&&(n=(r=f).copy()).on(o,a=m),d.on=n}}function uIe(e,t,r){var n=(e+="")=="transform"?Age:lG;return t==null?this.styleTween(e,iIe(e,n)).on("end.style."+e,cG(e)):typeof t=="function"?this.styleTween(e,lIe(e,n,DA(this,"style."+e,t))).each(cIe(this._id,e)):this.styleTween(e,oIe(e,n,t),r).on("end.style."+e,null)}function dIe(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function fIe(e,t,r){var n,a;function i(){var o=t.apply(this,arguments);return o!==a&&(n=(a=o)&&dIe(e,o,r)),n}return i._value=t,i}function mIe(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,fIe(e,t,r??""))}function hIe(e){return function(){this.textContent=e}}function pIe(e){return function(){var t=e(this);this.textContent=t??""}}function gIe(e){return this.tween("text",typeof e=="function"?pIe(DA(this,"text",e)):hIe(e==null?"":e+""))}function xIe(e){return function(t){this.textContent=e.call(this,t)}}function yIe(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&xIe(a)),t}return n._value=e,n}function vIe(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,yIe(e))}function bIe(){for(var e=this._name,t=this._id,r=uG(),n=this._groups,a=n.length,i=0;i<a;++i)for(var o=n[i],c=o.length,d,f=0;f<c;++f)if(d=o[f]){var m=Pa(d,t);A0(d,e,r,f,o,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new uo(n,this._parents,e,r)}function wIe(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(i,o){var c={value:o},d={value:function(){--a===0&&i()}};r.each(function(){var f=fi(this,n),m=f.on;m!==e&&(t=(e=m).copy(),t._.cancel.push(c),t._.interrupt.push(c),t._.end.push(d)),f.on=t}),a===0&&i()})}var jIe=0;function uo(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function uG(){return++jIe}var Ii=Rp.prototype;uo.prototype={constructor:uo,select:rIe,selectAll:nIe,selectChild:Ii.selectChild,selectChildren:Ii.selectChildren,filter:Q4e,merge:Y4e,selection:aIe,transition:bIe,call:Ii.call,nodes:Ii.nodes,node:Ii.node,size:Ii.size,empty:Ii.empty,each:Ii.each,on:J4e,attr:M4e,attrTween:$4e,style:uIe,styleTween:mIe,text:gIe,textTween:vIe,remove:tIe,tween:C4e,delay:F4e,duration:V4e,ease:H4e,easeVarying:W4e,end:wIe,[Symbol.iterator]:Ii[Symbol.iterator]};function NIe(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var SIe={time:null,delay:0,duration:250,ease:NIe};function _Ie(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function CIe(e){var t,r;e instanceof uo?(t=e._id,e=e._name):(t=uG(),(r=SIe).time=MA(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,i=0;i<a;++i)for(var o=n[i],c=o.length,d,f=0;f<c;++f)(d=o[f])&&A0(d,e,t,f,o,r||_Ie(d,t));return new uo(n,this._parents,e,t)}Rp.prototype.interrupt=N4e;Rp.prototype.transition=CIe;const Yx=e=>()=>e;function kIe(e,{sourceEvent:t,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function qi(e,t,r){this.k=e,this.x=t,this.y=r}qi.prototype={constructor:qi,scale:function(e){return e===1?this:new qi(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new qi(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var T0=new qi(1,0,0);dG.prototype=qi.prototype;function dG(e){for(;!e.__zoom;)if(!(e=e.parentNode))return T0;return e.__zoom}function PS(e){e.stopImmediatePropagation()}function Bm(e){e.preventDefault(),e.stopImmediatePropagation()}function EIe(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function AIe(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function oz(){return this.__zoom||T0}function TIe(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function OIe(){return navigator.maxTouchPoints||"ontouchstart"in this}function PIe(e,t,r){var n=e.invertX(t[0][0])-r[0][0],a=e.invertX(t[1][0])-r[1][0],i=e.invertY(t[0][1])-r[0][1],o=e.invertY(t[1][1])-r[1][1];return e.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function fG(){var e=EIe,t=AIe,r=PIe,n=TIe,a=OIe,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],c=250,d=ly,f=C0("start","zoom","end"),m,h,g,x=500,w=150,b=0,j=10;function N(I){I.property("__zoom",oz).on("wheel.zoom",P,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",M).filter(a).on("touchstart.zoom",D).on("touchmove.zoom",z).on("touchend.zoom touchcancel.zoom",Y).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}N.transform=function(I,K,U,L){var F=I.selection?I.selection():I;F.property("__zoom",oz),I!==F?A(I,K,U,L):F.interrupt().each(function(){T(this,arguments).event(L).start().zoom(null,typeof K=="function"?K.apply(this,arguments):K).end()})},N.scaleBy=function(I,K,U,L){N.scaleTo(I,function(){var F=this.__zoom.k,q=typeof K=="function"?K.apply(this,arguments):K;return F*q},U,L)},N.scaleTo=function(I,K,U,L){N.transform(I,function(){var F=t.apply(this,arguments),q=this.__zoom,Z=U==null?k(F):typeof U=="function"?U.apply(this,arguments):U,B=q.invert(Z),V=typeof K=="function"?K.apply(this,arguments):K;return r(S(_(q,V),Z,B),F,o)},U,L)},N.translateBy=function(I,K,U,L){N.transform(I,function(){return r(this.__zoom.translate(typeof K=="function"?K.apply(this,arguments):K,typeof U=="function"?U.apply(this,arguments):U),t.apply(this,arguments),o)},null,L)},N.translateTo=function(I,K,U,L,F){N.transform(I,function(){var q=t.apply(this,arguments),Z=this.__zoom,B=L==null?k(q):typeof L=="function"?L.apply(this,arguments):L;return r(T0.translate(B[0],B[1]).scale(Z.k).translate(typeof K=="function"?-K.apply(this,arguments):-K,typeof U=="function"?-U.apply(this,arguments):-U),q,o)},L,F)};function _(I,K){return K=Math.max(i[0],Math.min(i[1],K)),K===I.k?I:new qi(K,I.x,I.y)}function S(I,K,U){var L=K[0]-U[0]*I.k,F=K[1]-U[1]*I.k;return L===I.x&&F===I.y?I:new qi(I.k,L,F)}function k(I){return[(+I[0][0]+ +I[1][0])/2,(+I[0][1]+ +I[1][1])/2]}function A(I,K,U,L){I.on("start.zoom",function(){T(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(L).end()}).tween("zoom",function(){var F=this,q=arguments,Z=T(F,q).event(L),B=t.apply(F,q),V=U==null?k(B):typeof U=="function"?U.apply(F,q):U,ee=Math.max(B[1][0]-B[0][0],B[1][1]-B[0][1]),ae=F.__zoom,J=typeof K=="function"?K.apply(F,q):K,se=d(ae.invert(V).concat(ee/ae.k),J.invert(V).concat(ee/J.k));return function(ne){if(ne===1)ne=J;else{var oe=se(ne),Q=ee/oe[2];ne=new qi(Q,V[0]-oe[0]*Q,V[1]-oe[1]*Q)}Z.zoom(null,ne)}})}function T(I,K,U){return!U&&I.__zooming||new O(I,K)}function O(I,K){this.that=I,this.args=K,this.active=0,this.sourceEvent=null,this.extent=t.apply(I,K),this.taps=0}O.prototype={event:function(I){return I&&(this.sourceEvent=I),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(I,K){return this.mouse&&I!=="mouse"&&(this.mouse[1]=K.invert(this.mouse[0])),this.touch0&&I!=="touch"&&(this.touch0[1]=K.invert(this.touch0[0])),this.touch1&&I!=="touch"&&(this.touch1[1]=K.invert(this.touch1[0])),this.that.__zoom=K,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(I){var K=cs(this.that).datum();f.call(I,this.that,new kIe(I,{sourceEvent:this.sourceEvent,target:N,transform:this.that.__zoom,dispatch:f}),K)}};function P(I,...K){if(!e.apply(this,arguments))return;var U=T(this,K).event(I),L=this.__zoom,F=Math.max(i[0],Math.min(i[1],L.k*Math.pow(2,n.apply(this,arguments)))),q=ca(I);if(U.wheel)(U.mouse[0][0]!==q[0]||U.mouse[0][1]!==q[1])&&(U.mouse[1]=L.invert(U.mouse[0]=q)),clearTimeout(U.wheel);else{if(L.k===F)return;U.mouse=[q,L.invert(q)],_y(this),U.start()}Bm(I),U.wheel=setTimeout(Z,w),U.zoom("mouse",r(S(_(L,F),U.mouse[0],U.mouse[1]),U.extent,o));function Z(){U.wheel=null,U.end()}}function R(I,...K){if(g||!e.apply(this,arguments))return;var U=I.currentTarget,L=T(this,K,!0).event(I),F=cs(I.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",ee,!0),q=ca(I,U),Z=I.clientX,B=I.clientY;tG(I.view),PS(I),L.mouse=[q,this.__zoom.invert(q)],_y(this),L.start();function V(ae){if(Bm(ae),!L.moved){var J=ae.clientX-Z,se=ae.clientY-B;L.moved=J*J+se*se>b}L.event(ae).zoom("mouse",r(S(L.that.__zoom,L.mouse[0]=ca(ae,U),L.mouse[1]),L.extent,o))}function ee(ae){F.on("mousemove.zoom mouseup.zoom",null),rG(ae.view,L.moved),Bm(ae),L.event(ae).end()}}function M(I,...K){if(e.apply(this,arguments)){var U=this.__zoom,L=ca(I.changedTouches?I.changedTouches[0]:I,this),F=U.invert(L),q=U.k*(I.shiftKey?.5:2),Z=r(S(_(U,q),L,F),t.apply(this,K),o);Bm(I),c>0?cs(this).transition().duration(c).call(A,Z,L,I):cs(this).call(N.transform,Z,L,I)}}function D(I,...K){if(e.apply(this,arguments)){var U=I.touches,L=U.length,F=T(this,K,I.changedTouches.length===L).event(I),q,Z,B,V;for(PS(I),Z=0;Z<L;++Z)B=U[Z],V=ca(B,this),V=[V,this.__zoom.invert(V),B.identifier],F.touch0?!F.touch1&&F.touch0[2]!==V[2]&&(F.touch1=V,F.taps=0):(F.touch0=V,q=!0,F.taps=1+!!m);m&&(m=clearTimeout(m)),q&&(F.taps<2&&(h=V[0],m=setTimeout(function(){m=null},x)),_y(this),F.start())}}function z(I,...K){if(this.__zooming){var U=T(this,K).event(I),L=I.changedTouches,F=L.length,q,Z,B,V;for(Bm(I),q=0;q<F;++q)Z=L[q],B=ca(Z,this),U.touch0&&U.touch0[2]===Z.identifier?U.touch0[0]=B:U.touch1&&U.touch1[2]===Z.identifier&&(U.touch1[0]=B);if(Z=U.that.__zoom,U.touch1){var ee=U.touch0[0],ae=U.touch0[1],J=U.touch1[0],se=U.touch1[1],ne=(ne=J[0]-ee[0])*ne+(ne=J[1]-ee[1])*ne,oe=(oe=se[0]-ae[0])*oe+(oe=se[1]-ae[1])*oe;Z=_(Z,Math.sqrt(ne/oe)),B=[(ee[0]+J[0])/2,(ee[1]+J[1])/2],V=[(ae[0]+se[0])/2,(ae[1]+se[1])/2]}else if(U.touch0)B=U.touch0[0],V=U.touch0[1];else return;U.zoom("touch",r(S(Z,B,V),U.extent,o))}}function Y(I,...K){if(this.__zooming){var U=T(this,K).event(I),L=I.changedTouches,F=L.length,q,Z;for(PS(I),g&&clearTimeout(g),g=setTimeout(function(){g=null},x),q=0;q<F;++q)Z=L[q],U.touch0&&U.touch0[2]===Z.identifier?delete U.touch0:U.touch1&&U.touch1[2]===Z.identifier&&delete U.touch1;if(U.touch1&&!U.touch0&&(U.touch0=U.touch1,delete U.touch1),U.touch0)U.touch0[1]=this.__zoom.invert(U.touch0[0]);else if(U.end(),U.taps===2&&(Z=ca(Z,this),Math.hypot(h[0]-Z[0],h[1]-Z[1])<j)){var B=cs(this).on("dblclick.zoom");B&&B.apply(this,arguments)}}}return N.wheelDelta=function(I){return arguments.length?(n=typeof I=="function"?I:Yx(+I),N):n},N.filter=function(I){return arguments.length?(e=typeof I=="function"?I:Yx(!!I),N):e},N.touchable=function(I){return arguments.length?(a=typeof I=="function"?I:Yx(!!I),N):a},N.extent=function(I){return arguments.length?(t=typeof I=="function"?I:Yx([[+I[0][0],+I[0][1]],[+I[1][0],+I[1][1]]]),N):t},N.scaleExtent=function(I){return arguments.length?(i[0]=+I[0],i[1]=+I[1],N):[i[0],i[1]]},N.translateExtent=function(I){return arguments.length?(o[0][0]=+I[0][0],o[1][0]=+I[1][0],o[0][1]=+I[0][1],o[1][1]=+I[1][1],N):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},N.constrain=function(I){return arguments.length?(r=I,N):r},N.duration=function(I){return arguments.length?(c=+I,N):c},N.interpolate=function(I){return arguments.length?(d=I,N):d},N.on=function(){var I=f.on.apply(f,arguments);return I===f?N:I},N.clickDistance=function(I){return arguments.length?(b=(I=+I)*I,N):Math.sqrt(b)},N.tapDistance=function(I){return arguments.length?(j=+I,N):j},N}const ci={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:r,targetHandle:n})=>`Couldn't create edge for ${e} handle id: "${e==="source"?r:n}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Qh=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],mG=["Enter"," ","Escape"],hG={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:r})=>`Moved selected node ${e}. New position, x: ${t}, y: ${r}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Qd;(function(e){e.Strict="strict",e.Loose="loose"})(Qd||(Qd={}));var Pc;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Pc||(Pc={}));var Yh;(function(e){e.Partial="partial",e.Full="full"})(Yh||(Yh={}));const pG={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var ul;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(ul||(ul={}));var Yv;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Yv||(Yv={}));var Ke;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Ke||(Ke={}));const lz={[Ke.Left]:Ke.Right,[Ke.Right]:Ke.Left,[Ke.Top]:Ke.Bottom,[Ke.Bottom]:Ke.Top};function gG(e){return e===null?null:e?"valid":"invalid"}const xG=e=>"id"in e&&"source"in e&&"target"in e,MIe=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),IA=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Dp=(e,t=[0,0])=>{const{width:r,height:n}=jo(e),a=e.origin??t,i=r*a[0],o=n*a[1];return{x:e.position.x-i,y:e.position.y-o}},RIe=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,a)=>{const i=typeof a=="string";let o=!t.nodeLookup&&!i?a:void 0;t.nodeLookup&&(o=i?t.nodeLookup.get(a):IA(a)?a:t.nodeLookup.get(a.id));const c=o?Xv(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return O0(n,c)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return P0(r)},Ip=(e,t={})=>{let r={x:1/0,y:1/0,x2:-1/0,y2:-1/0},n=!1;return e.forEach(a=>{(t.filter===void 0||t.filter(a))&&(r=O0(r,Xv(a)),n=!0)}),n?P0(r):{x:0,y:0,width:0,height:0}},LA=(e,t,[r,n,a]=[0,0,1],i=!1,o=!1)=>{const c={...$p(t,[r,n,a]),width:t.width/a,height:t.height/a},d=[];for(const f of e.values()){const{measured:m,selectable:h=!0,hidden:g=!1}=f;if(o&&!h||g)continue;const x=m.width??f.width??f.initialWidth??null,w=m.height??f.height??f.initialHeight??null,b=Xh(c,Xd(f)),j=(x??0)*(w??0),N=i&&b>0;(!f.internals.handleBounds||N||b>=j||f.dragging)&&d.push(f)}return d},DIe=(e,t)=>{const r=new Set;return e.forEach(n=>{r.add(n.id)}),t.filter(n=>r.has(n.source)||r.has(n.target))};function IIe(e,t){const r=new Map,n=t?.nodes?new Set(t.nodes.map(a=>a.id)):null;return e.forEach(a=>{a.measured.width&&a.measured.height&&(t?.includeHiddenNodes||!a.hidden)&&(!n||n.has(a.id))&&r.set(a.id,a)}),r}async function LIe({nodes:e,width:t,height:r,panZoom:n,minZoom:a,maxZoom:i},o){if(e.size===0)return Promise.resolve(!0);const c=IIe(e,o),d=Ip(c),f=$A(d,t,r,o?.minZoom??a,o?.maxZoom??i,o?.padding??.1);return await n.setViewport(f,{duration:o?.duration,ease:o?.ease,interpolate:o?.interpolate}),Promise.resolve(!0)}function yG({nodeId:e,nextPosition:t,nodeLookup:r,nodeOrigin:n=[0,0],nodeExtent:a,onError:i}){const o=r.get(e),c=o.parentId?r.get(o.parentId):void 0,{x:d,y:f}=c?c.internals.positionAbsolute:{x:0,y:0},m=o.origin??n;let h=o.extent||a;if(o.extent==="parent"&&!o.expandParent)if(!c)i?.("005",ci.error005());else{const x=c.measured.width,w=c.measured.height;x&&w&&(h=[[d,f],[d+x,f+w]])}else c&&Zd(o.extent)&&(h=[[o.extent[0][0]+d,o.extent[0][1]+f],[o.extent[1][0]+d,o.extent[1][1]+f]]);const g=Zd(h)?Qc(t,h,o.measured):t;return(o.measured.width===void 0||o.measured.height===void 0)&&i?.("015",ci.error015()),{position:{x:g.x-d+(o.measured.width??0)*m[0],y:g.y-f+(o.measured.height??0)*m[1]},positionAbsolute:g}}async function $Ie({nodesToRemove:e=[],edgesToRemove:t=[],nodes:r,edges:n,onBeforeDelete:a}){const i=new Set(e.map(g=>g.id)),o=[];for(const g of r){if(g.deletable===!1)continue;const x=i.has(g.id),w=!x&&g.parentId&&o.find(b=>b.id===g.parentId);(x||w)&&o.push(g)}const c=new Set(t.map(g=>g.id)),d=n.filter(g=>g.deletable!==!1),m=DIe(o,d);for(const g of d)c.has(g.id)&&!m.find(w=>w.id===g.id)&&m.push(g);if(!a)return{edges:m,nodes:o};const h=await a({nodes:o,edges:m});return typeof h=="boolean"?h?{edges:m,nodes:o}:{edges:[],nodes:[]}:h}const Yd=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),Qc=(e={x:0,y:0},t,r)=>({x:Yd(e.x,t[0][0],t[1][0]-(r?.width??0)),y:Yd(e.y,t[0][1],t[1][1]-(r?.height??0))});function vG(e,t,r){const{width:n,height:a}=jo(r),{x:i,y:o}=r.internals.positionAbsolute;return Qc(e,[[i,o],[i+n,o+a]],t)}const cz=(e,t,r)=>e<t?Yd(Math.abs(e-t),1,t)/t:e>r?-Yd(Math.abs(e-r),1,t)/t:0,bG=(e,t,r=15,n=40)=>{const a=cz(e.x,n,t.width-n)*r,i=cz(e.y,n,t.height-n)*r;return[a,i]},O0=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),tC=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),P0=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),Xd=(e,t=[0,0])=>{const{x:r,y:n}=IA(e)?e.internals.positionAbsolute:Dp(e,t);return{x:r,y:n,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Xv=(e,t=[0,0])=>{const{x:r,y:n}=IA(e)?e.internals.positionAbsolute:Dp(e,t);return{x:r,y:n,x2:r+(e.measured?.width??e.width??e.initialWidth??0),y2:n+(e.measured?.height??e.height??e.initialHeight??0)}},wG=(e,t)=>P0(O0(tC(e),tC(t))),Xh=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},uz=e=>pa(e.width)&&pa(e.height)&&pa(e.x)&&pa(e.y),pa=e=>!isNaN(e)&&isFinite(e),zIe=(e,t)=>{},Lp=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),$p=({x:e,y:t},[r,n,a],i=!1,o=[1,1])=>{const c={x:(e-r)/a,y:(t-n)/a};return i?Lp(c,o):c},Zv=({x:e,y:t},[r,n,a])=>({x:e*a+r,y:t*a+n});function cd(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(r)}if(typeof e=="string"&&e.endsWith("%")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(t*r*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function UIe(e,t,r){if(typeof e=="string"||typeof e=="number"){const n=cd(e,r),a=cd(e,t);return{top:n,right:a,bottom:n,left:a,x:a*2,y:n*2}}if(typeof e=="object"){const n=cd(e.top??e.y??0,r),a=cd(e.bottom??e.y??0,r),i=cd(e.left??e.x??0,t),o=cd(e.right??e.x??0,t);return{top:n,right:o,bottom:a,left:i,x:i+o,y:n+a}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function FIe(e,t,r,n,a,i){const{x:o,y:c}=Zv(e,[t,r,n]),{x:d,y:f}=Zv({x:e.x+e.width,y:e.y+e.height},[t,r,n]),m=a-d,h=i-f;return{left:Math.floor(o),top:Math.floor(c),right:Math.floor(m),bottom:Math.floor(h)}}const $A=(e,t,r,n,a,i)=>{const o=UIe(i,t,r),c=(t-o.x)/e.width,d=(r-o.y)/e.height,f=Math.min(c,d),m=Yd(f,n,a),h=e.x+e.width/2,g=e.y+e.height/2,x=t/2-h*m,w=r/2-g*m,b=FIe(e,x,w,m,t,r),j={left:Math.min(b.left-o.left,0),top:Math.min(b.top-o.top,0),right:Math.min(b.right-o.right,0),bottom:Math.min(b.bottom-o.bottom,0)};return{x:x-j.left+j.right,y:w-j.top+j.bottom,zoom:m}},Zh=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Zd(e){return e!=null&&e!=="parent"}function jo(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function jG(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function NG(e,t={width:0,height:0},r,n,a){const i={...e},o=n.get(r);if(o){const c=o.origin||a;i.x+=o.internals.positionAbsolute.x-(t.width??0)*c[0],i.y+=o.internals.positionAbsolute.y-(t.height??0)*c[1]}return i}function dz(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function BIe(){let e,t;return{promise:new Promise((n,a)=>{e=n,t=a}),resolve:e,reject:t}}function qIe(e){return{...hG,...e||{}}}function lh(e,{snapGrid:t=[0,0],snapToGrid:r=!1,transform:n,containerBounds:a}){const{x:i,y:o}=ga(e),c=$p({x:i-(a?.left??0),y:o-(a?.top??0)},n),{x:d,y:f}=r?Lp(c,t):c;return{xSnapped:d,ySnapped:f,...c}}const zA=e=>({width:e.offsetWidth,height:e.offsetHeight}),SG=e=>e?.getRootNode?.()||window?.document,VIe=["INPUT","SELECT","TEXTAREA"];function _G(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:VIe.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const CG=e=>"clientX"in e,ga=(e,t)=>{const r=CG(e),n=r?e.clientX:e.touches?.[0].clientX,a=r?e.clientY:e.touches?.[0].clientY;return{x:n-(t?.left??0),y:a-(t?.top??0)}},fz=(e,t,r,n,a)=>{const i=t.querySelectorAll(`.${e}`);return!i||!i.length?null:Array.from(i).map(o=>{const c=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:a,position:o.getAttribute("data-handlepos"),x:(c.left-r.left)/n,y:(c.top-r.top)/n,...zA(o)}})};function kG({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:a,sourceControlY:i,targetControlX:o,targetControlY:c}){const d=e*.125+a*.375+o*.375+r*.125,f=t*.125+i*.375+c*.375+n*.125,m=Math.abs(d-e),h=Math.abs(f-t);return[d,f,m,h]}function Xx(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function mz({pos:e,x1:t,y1:r,x2:n,y2:a,c:i}){switch(e){case Ke.Left:return[t-Xx(t-n,i),r];case Ke.Right:return[t+Xx(n-t,i),r];case Ke.Top:return[t,r-Xx(r-a,i)];case Ke.Bottom:return[t,r+Xx(a-r,i)]}}function EG({sourceX:e,sourceY:t,sourcePosition:r=Ke.Bottom,targetX:n,targetY:a,targetPosition:i=Ke.Top,curvature:o=.25}){const[c,d]=mz({pos:r,x1:e,y1:t,x2:n,y2:a,c:o}),[f,m]=mz({pos:i,x1:n,y1:a,x2:e,y2:t,c:o}),[h,g,x,w]=kG({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:f,targetControlY:m});return[`M${e},${t} C${c},${d} ${f},${m} ${n},${a}`,h,g,x,w]}function AG({sourceX:e,sourceY:t,targetX:r,targetY:n}){const a=Math.abs(r-e)/2,i=r<e?r+a:r-a,o=Math.abs(n-t)/2,c=n<t?n+o:n-o;return[i,c,a,o]}function KIe({sourceNode:e,targetNode:t,selected:r=!1,zIndex:n=0,elevateOnSelect:a=!1,zIndexMode:i="basic"}){if(i==="manual")return n;const o=a&&r?n+1e3:n,c=Math.max(e.parentId||a&&e.selected?e.internals.z:0,t.parentId||a&&t.selected?t.internals.z:0);return o+c}function HIe({sourceNode:e,targetNode:t,width:r,height:n,transform:a}){const i=O0(Xv(e),Xv(t));i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);const o={x:-a[0]/a[2],y:-a[1]/a[2],width:r/a[2],height:n/a[2]};return Xh(o,P0(i))>0}const GIe=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`xy-edge__${e}${t||""}-${r}${n||""}`,WIe=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),QIe=(e,t,r={})=>{if(!e.source||!e.target)return t;const n=r.getEdgeId||GIe;let a;return xG(e)?a={...e}:a={...e,id:n(e)},WIe(a,t)?t:(a.sourceHandle===null&&delete a.sourceHandle,a.targetHandle===null&&delete a.targetHandle,t.concat(a))};function TG({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[a,i,o,c]=AG({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,a,i,o,c]}const hz={[Ke.Left]:{x:-1,y:0},[Ke.Right]:{x:1,y:0},[Ke.Top]:{x:0,y:-1},[Ke.Bottom]:{x:0,y:1}},YIe=({source:e,sourcePosition:t=Ke.Bottom,target:r})=>t===Ke.Left||t===Ke.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},pz=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function XIe({source:e,sourcePosition:t=Ke.Bottom,target:r,targetPosition:n=Ke.Top,center:a,offset:i,stepPosition:o}){const c=hz[t],d=hz[n],f={x:e.x+c.x*i,y:e.y+c.y*i},m={x:r.x+d.x*i,y:r.y+d.y*i},h=YIe({source:f,sourcePosition:t,target:m}),g=h.x!==0?"x":"y",x=h[g];let w=[],b,j;const N={x:0,y:0},_={x:0,y:0},[,,S,k]=AG({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(c[g]*d[g]===-1){g==="x"?(b=a.x??f.x+(m.x-f.x)*o,j=a.y??(f.y+m.y)/2):(b=a.x??(f.x+m.x)/2,j=a.y??f.y+(m.y-f.y)*o);const T=[{x:b,y:f.y},{x:b,y:m.y}],O=[{x:f.x,y:j},{x:m.x,y:j}];c[g]===x?w=g==="x"?T:O:w=g==="x"?O:T}else{const T=[{x:f.x,y:m.y}],O=[{x:m.x,y:f.y}];if(g==="x"?w=c.x===x?O:T:w=c.y===x?T:O,t===n){const z=Math.abs(e[g]-r[g]);if(z<=i){const Y=Math.min(i-1,i-z);c[g]===x?N[g]=(f[g]>e[g]?-1:1)*Y:_[g]=(m[g]>r[g]?-1:1)*Y}}if(t!==n){const z=g==="x"?"y":"x",Y=c[g]===d[z],I=f[z]>m[z],K=f[z]<m[z];(c[g]===1&&(!Y&&I||Y&&K)||c[g]!==1&&(!Y&&K||Y&&I))&&(w=g==="x"?T:O)}const P={x:f.x+N.x,y:f.y+N.y},R={x:m.x+_.x,y:m.y+_.y},M=Math.max(Math.abs(P.x-w[0].x),Math.abs(R.x-w[0].x)),D=Math.max(Math.abs(P.y-w[0].y),Math.abs(R.y-w[0].y));M>=D?(b=(P.x+R.x)/2,j=w[0].y):(b=w[0].x,j=(P.y+R.y)/2)}return[[e,{x:f.x+N.x,y:f.y+N.y},...w,{x:m.x+_.x,y:m.y+_.y},r],b,j,S,k]}function ZIe(e,t,r,n){const a=Math.min(pz(e,t)/2,pz(t,r)/2,n),{x:i,y:o}=t;if(e.x===i&&i===r.x||e.y===o&&o===r.y)return`L${i} ${o}`;if(e.y===o){const f=e.x<r.x?-1:1,m=e.y<r.y?1:-1;return`L ${i+a*f},${o}Q ${i},${o} ${i},${o+a*m}`}const c=e.x<r.x?1:-1,d=e.y<r.y?-1:1;return`L ${i},${o+a*d}Q ${i},${o} ${i+a*c},${o}`}function rC({sourceX:e,sourceY:t,sourcePosition:r=Ke.Bottom,targetX:n,targetY:a,targetPosition:i=Ke.Top,borderRadius:o=5,centerX:c,centerY:d,offset:f=20,stepPosition:m=.5}){const[h,g,x,w,b]=XIe({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:a},targetPosition:i,center:{x:c,y:d},offset:f,stepPosition:m});return[h.reduce((N,_,S)=>{let k="";return S>0&&S<h.length-1?k=ZIe(h[S-1],_,h[S+1],o):k=`${S===0?"M":"L"}${_.x} ${_.y}`,N+=k,N},""),g,x,w,b]}function gz(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function JIe(e){const{sourceNode:t,targetNode:r}=e;if(!gz(t)||!gz(r))return null;const n=t.internals.handleBounds||xz(t.handles),a=r.internals.handleBounds||xz(r.handles),i=yz(n?.source??[],e.sourceHandle),o=yz(e.connectionMode===Qd.Strict?a?.target??[]:(a?.target??[]).concat(a?.source??[]),e.targetHandle);if(!i||!o)return e.onError?.("008",ci.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const c=i?.position||Ke.Bottom,d=o?.position||Ke.Top,f=Yc(t,i,c),m=Yc(r,o,d);return{sourceX:f.x,sourceY:f.y,targetX:m.x,targetY:m.y,sourcePosition:c,targetPosition:d}}function xz(e){if(!e)return null;const t=[],r=[];for(const n of e)n.width=n.width??1,n.height=n.height??1,n.type==="source"?t.push(n):n.type==="target"&&r.push(n);return{source:t,target:r}}function Yc(e,t,r=Ke.Left,n=!1){const a=(t?.x??0)+e.internals.positionAbsolute.x,i=(t?.y??0)+e.internals.positionAbsolute.y,{width:o,height:c}=t??jo(e);if(n)return{x:a+o/2,y:i+c/2};switch(t?.position??r){case Ke.Top:return{x:a+o/2,y:i};case Ke.Right:return{x:a+o,y:i+c/2};case Ke.Bottom:return{x:a+o/2,y:i+c};case Ke.Left:return{x:a,y:i+c/2}}}function yz(e,t){return e&&(t?e.find(r=>r.id===t):e[0])||null}function nC(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`:""}function eLe(e,{id:t,defaultColor:r,defaultMarkerStart:n,defaultMarkerEnd:a}){const i=new Set;return e.reduce((o,c)=>([c.markerStart||n,c.markerEnd||a].forEach(d=>{if(d&&typeof d=="object"){const f=nC(d,t);i.has(f)||(o.push({id:f,color:d.color||r,...d}),i.add(f))}}),o),[]).sort((o,c)=>o.id.localeCompare(c.id))}const OG=1e3,tLe=10,UA={nodeOrigin:[0,0],nodeExtent:Qh,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},rLe={...UA,checkEquality:!0};function FA(e,t){const r={...e};for(const n in t)t[n]!==void 0&&(r[n]=t[n]);return r}function nLe(e,t,r){const n=FA(UA,r);for(const a of e.values())if(a.parentId)qA(a,e,t,n);else{const i=Dp(a,n.nodeOrigin),o=Zd(a.extent)?a.extent:n.nodeExtent,c=Qc(i,o,jo(a));a.internals.positionAbsolute=c}}function sLe(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;const r=[],n=[];for(const a of e.handles){const i={id:a.id,width:a.width??1,height:a.height??1,nodeId:e.id,x:a.x,y:a.y,position:a.position,type:a.type};a.type==="source"?r.push(i):a.type==="target"&&n.push(i)}return{source:r,target:n}}function BA(e){return e==="manual"}function sC(e,t,r,n={}){const a=FA(rLe,n),i={i:0},o=new Map(t),c=a?.elevateNodesOnSelect&&!BA(a.zIndexMode)?OG:0;let d=e.length>0;t.clear(),r.clear();for(const f of e){let m=o.get(f.id);if(a.checkEquality&&f===m?.internals.userNode)t.set(f.id,m);else{const h=Dp(f,a.nodeOrigin),g=Zd(f.extent)?f.extent:a.nodeExtent,x=Qc(h,g,jo(f));m={...a.defaults,...f,measured:{width:f.measured?.width,height:f.measured?.height},internals:{positionAbsolute:x,handleBounds:sLe(f,m),z:PG(f,c,a.zIndexMode),userNode:f}},t.set(f.id,m)}(m.measured===void 0||m.measured.width===void 0||m.measured.height===void 0)&&!m.hidden&&(d=!1),f.parentId&&qA(m,t,r,n,i)}return d}function aLe(e,t){if(!e.parentId)return;const r=t.get(e.parentId);r?r.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function qA(e,t,r,n,a){const{elevateNodesOnSelect:i,nodeOrigin:o,nodeExtent:c,zIndexMode:d}=FA(UA,n),f=e.parentId,m=t.get(f);if(!m){console.warn(`Parent node ${f} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}aLe(e,r),a&&!m.parentId&&m.internals.rootParentIndex===void 0&&d==="auto"&&(m.internals.rootParentIndex=++a.i,m.internals.z=m.internals.z+a.i*tLe),a&&m.internals.rootParentIndex!==void 0&&(a.i=m.internals.rootParentIndex);const h=i&&!BA(d)?OG:0,{x:g,y:x,z:w}=iLe(e,m,o,c,h,d),{positionAbsolute:b}=e.internals,j=g!==b.x||x!==b.y;(j||w!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:j?{x:g,y:x}:b,z:w}})}function PG(e,t,r){const n=pa(e.zIndex)?e.zIndex:0;return BA(r)?n:n+(e.selected?t:0)}function iLe(e,t,r,n,a,i){const{x:o,y:c}=t.internals.positionAbsolute,d=jo(e),f=Dp(e,r),m=Zd(e.extent)?Qc(f,e.extent,d):f;let h=Qc({x:o+m.x,y:c+m.y},n,d);e.extent==="parent"&&(h=vG(h,d,t));const g=PG(e,a,i),x=t.internals.z??0;return{x:h.x,y:h.y,z:x>=g?x+1:g}}function VA(e,t,r,n=[0,0]){const a=[],i=new Map;for(const o of e){const c=t.get(o.parentId);if(!c)continue;const d=i.get(o.parentId)?.expandedRect??Xd(c),f=wG(d,o.rect);i.set(o.parentId,{expandedRect:f,parent:c})}return i.size>0&&i.forEach(({expandedRect:o,parent:c},d)=>{const f=c.internals.positionAbsolute,m=jo(c),h=c.origin??n,g=o.x<f.x?Math.round(Math.abs(f.x-o.x)):0,x=o.y<f.y?Math.round(Math.abs(f.y-o.y)):0,w=Math.max(m.width,Math.round(o.width)),b=Math.max(m.height,Math.round(o.height)),j=(w-m.width)*h[0],N=(b-m.height)*h[1];(g>0||x>0||j||N)&&(a.push({id:d,type:"position",position:{x:c.position.x-g+j,y:c.position.y-x+N}}),r.get(d)?.forEach(_=>{e.some(S=>S.id===_.id)||a.push({id:_.id,type:"position",position:{x:_.position.x+g,y:_.position.y+x}})})),(m.width<o.width||m.height<o.height||g||x)&&a.push({id:d,type:"dimensions",setAttributes:!0,dimensions:{width:w+(g?h[0]*g-j:0),height:b+(x?h[1]*x-N:0)}})}),a}function oLe(e,t,r,n,a,i,o){const c=n?.querySelector(".xyflow__viewport");let d=!1;if(!c)return{changes:[],updatedInternals:d};const f=[],m=window.getComputedStyle(c),{m22:h}=new window.DOMMatrixReadOnly(m.transform),g=[];for(const x of e.values()){const w=t.get(x.id);if(!w)continue;if(w.hidden){t.set(w.id,{...w,internals:{...w.internals,handleBounds:void 0}}),d=!0;continue}const b=zA(x.nodeElement),j=w.measured.width!==b.width||w.measured.height!==b.height;if(!!(b.width&&b.height&&(j||!w.internals.handleBounds||x.force))){const _=x.nodeElement.getBoundingClientRect(),S=Zd(w.extent)?w.extent:i;let{positionAbsolute:k}=w.internals;w.parentId&&w.extent==="parent"?k=vG(k,b,t.get(w.parentId)):S&&(k=Qc(k,S,b));const A={...w,measured:b,internals:{...w.internals,positionAbsolute:k,handleBounds:{source:fz("source",x.nodeElement,_,h,w.id),target:fz("target",x.nodeElement,_,h,w.id)}}};t.set(w.id,A),w.parentId&&qA(A,t,r,{nodeOrigin:a,zIndexMode:o}),d=!0,j&&(f.push({id:w.id,type:"dimensions",dimensions:b}),w.expandParent&&w.parentId&&g.push({id:w.id,parentId:w.parentId,rect:Xd(A,a)}))}}if(g.length>0){const x=VA(g,t,r,a);f.push(...x)}return{changes:f,updatedInternals:d}}async function lLe({delta:e,panZoom:t,transform:r,translateExtent:n,width:a,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:r[0]+e.x,y:r[1]+e.y,zoom:r[2]},[[0,0],[a,i]],n),c=!!o&&(o.x!==r[0]||o.y!==r[1]||o.k!==r[2]);return Promise.resolve(c)}function vz(e,t,r,n,a,i){let o=a;const c=n.get(o)||new Map;n.set(o,c.set(r,t)),o=`${a}-${e}`;const d=n.get(o)||new Map;if(n.set(o,d.set(r,t)),i){o=`${a}-${e}-${i}`;const f=n.get(o)||new Map;n.set(o,f.set(r,t))}}function MG(e,t,r){e.clear(),t.clear();for(const n of r){const{source:a,target:i,sourceHandle:o=null,targetHandle:c=null}=n,d={edgeId:n.id,source:a,target:i,sourceHandle:o,targetHandle:c},f=`${a}-${o}--${i}-${c}`,m=`${i}-${c}--${a}-${o}`;vz("source",d,m,e,a,o),vz("target",d,f,e,i,c),t.set(n.id,n)}}function RG(e,t){if(!e.parentId)return!1;const r=t.get(e.parentId);return r?r.selected?!0:RG(r,t):!1}function bz(e,t,r){let n=e;do{if(n?.matches?.(t))return!0;if(n===r)return!1;n=n?.parentElement}while(n);return!1}function cLe(e,t,r,n){const a=new Map;for(const[i,o]of e)if((o.selected||o.id===n)&&(!o.parentId||!RG(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const c=e.get(i);c&&a.set(i,{id:i,position:c.position||{x:0,y:0},distance:{x:r.x-c.internals.positionAbsolute.x,y:r.y-c.internals.positionAbsolute.y},extent:c.extent,parentId:c.parentId,origin:c.origin,expandParent:c.expandParent,internals:{positionAbsolute:c.internals.positionAbsolute||{x:0,y:0}},measured:{width:c.measured.width??0,height:c.measured.height??0}})}return a}function MS({nodeId:e,dragItems:t,nodeLookup:r,dragging:n=!0}){const a=[];for(const[o,c]of t){const d=r.get(o)?.internals.userNode;d&&a.push({...d,position:c.position,dragging:n})}if(!e)return[a[0],a];const i=r.get(e)?.internals.userNode;return[i?{...i,position:t.get(e)?.position||i.position,dragging:n}:a[0],a]}function uLe({dragItems:e,snapGrid:t,x:r,y:n}){const a=e.values().next().value;if(!a)return null;const i={x:r-a.distance.x,y:n-a.distance.y},o=Lp(i,t);return{x:o.x-i.x,y:o.y-i.y}}function dLe({onNodeMouseDown:e,getStoreItems:t,onDragStart:r,onDrag:n,onDragStop:a}){let i={x:null,y:null},o=0,c=new Map,d=!1,f={x:0,y:0},m=null,h=!1,g=null,x=!1,w=!1,b=null;function j({noDragClassName:_,handleSelector:S,domNode:k,isSelectable:A,nodeId:T,nodeClickDistance:O=0}){g=cs(k);function P({x:z,y:Y}){const{nodeLookup:I,nodeExtent:K,snapGrid:U,snapToGrid:L,nodeOrigin:F,onNodeDrag:q,onSelectionDrag:Z,onError:B,updateNodePositions:V}=t();i={x:z,y:Y};let ee=!1;const ae=c.size>1,J=ae&&K?tC(Ip(c)):null,se=ae&&L?uLe({dragItems:c,snapGrid:U,x:z,y:Y}):null;for(const[ne,oe]of c){if(!I.has(ne))continue;let Q={x:z-oe.distance.x,y:Y-oe.distance.y};L&&(Q=se?{x:Math.round(Q.x+se.x),y:Math.round(Q.y+se.y)}:Lp(Q,U));let pe=null;if(ae&&K&&!oe.extent&&J){const{positionAbsolute:we}=oe.internals,ke=we.x-J.x+K[0][0],Ve=we.x+oe.measured.width-J.x2+K[1][0],Be=we.y-J.y+K[0][1],rt=we.y+oe.measured.height-J.y2+K[1][1];pe=[[ke,Be],[Ve,rt]]}const{position:he,positionAbsolute:te}=yG({nodeId:ne,nextPosition:Q,nodeLookup:I,nodeExtent:pe||K,nodeOrigin:F,onError:B});ee=ee||oe.position.x!==he.x||oe.position.y!==he.y,oe.position=he,oe.internals.positionAbsolute=te}if(w=w||ee,!!ee&&(V(c,!0),b&&(n||q||!T&&Z))){const[ne,oe]=MS({nodeId:T,dragItems:c,nodeLookup:I});n?.(b,c,ne,oe),q?.(b,ne,oe),T||Z?.(b,oe)}}async function R(){if(!m)return;const{transform:z,panBy:Y,autoPanSpeed:I,autoPanOnNodeDrag:K}=t();if(!K){d=!1,cancelAnimationFrame(o);return}const[U,L]=bG(f,m,I);(U!==0||L!==0)&&(i.x=(i.x??0)-U/z[2],i.y=(i.y??0)-L/z[2],await Y({x:U,y:L})&&P(i)),o=requestAnimationFrame(R)}function M(z){const{nodeLookup:Y,multiSelectionActive:I,nodesDraggable:K,transform:U,snapGrid:L,snapToGrid:F,selectNodesOnDrag:q,onNodeDragStart:Z,onSelectionDragStart:B,unselectNodesAndEdges:V}=t();h=!0,(!q||!A)&&!I&&T&&(Y.get(T)?.selected||V()),A&&q&&T&&e?.(T);const ee=lh(z.sourceEvent,{transform:U,snapGrid:L,snapToGrid:F,containerBounds:m});if(i=ee,c=cLe(Y,K,ee,T),c.size>0&&(r||Z||!T&&B)){const[ae,J]=MS({nodeId:T,dragItems:c,nodeLookup:Y});r?.(z.sourceEvent,c,ae,J),Z?.(z.sourceEvent,ae,J),T||B?.(z.sourceEvent,J)}}const D=nG().clickDistance(O).on("start",z=>{const{domNode:Y,nodeDragThreshold:I,transform:K,snapGrid:U,snapToGrid:L}=t();m=Y?.getBoundingClientRect()||null,x=!1,w=!1,b=z.sourceEvent,I===0&&M(z),i=lh(z.sourceEvent,{transform:K,snapGrid:U,snapToGrid:L,containerBounds:m}),f=ga(z.sourceEvent,m)}).on("drag",z=>{const{autoPanOnNodeDrag:Y,transform:I,snapGrid:K,snapToGrid:U,nodeDragThreshold:L,nodeLookup:F}=t(),q=lh(z.sourceEvent,{transform:I,snapGrid:K,snapToGrid:U,containerBounds:m});if(b=z.sourceEvent,(z.sourceEvent.type==="touchmove"&&z.sourceEvent.touches.length>1||T&&!F.has(T))&&(x=!0),!x){if(!d&&Y&&h&&(d=!0,R()),!h){const Z=ga(z.sourceEvent,m),B=Z.x-f.x,V=Z.y-f.y;Math.sqrt(B*B+V*V)>L&&M(z)}(i.x!==q.xSnapped||i.y!==q.ySnapped)&&c&&h&&(f=ga(z.sourceEvent,m),P(q))}}).on("end",z=>{if(!(!h||x)&&(d=!1,h=!1,cancelAnimationFrame(o),c.size>0)){const{nodeLookup:Y,updateNodePositions:I,onNodeDragStop:K,onSelectionDragStop:U}=t();if(w&&(I(c,!1),w=!1),a||K||!T&&U){const[L,F]=MS({nodeId:T,dragItems:c,nodeLookup:Y,dragging:!1});a?.(z.sourceEvent,c,L,F),K?.(z.sourceEvent,L,F),T||U?.(z.sourceEvent,F)}}}).filter(z=>{const Y=z.target;return!z.button&&(!_||!bz(Y,`.${_}`,k))&&(!S||bz(Y,S,k))});g.call(D)}function N(){g?.on(".drag",null)}return{update:j,destroy:N}}function fLe(e,t,r){const n=[],a={x:e.x-r,y:e.y-r,width:r*2,height:r*2};for(const i of t.values())Xh(a,Xd(i))>0&&n.push(i);return n}const mLe=250;function hLe(e,t,r,n){let a=[],i=1/0;const o=fLe(e,r,t+mLe);for(const c of o){const d=[...c.internals.handleBounds?.source??[],...c.internals.handleBounds?.target??[]];for(const f of d){if(n.nodeId===f.nodeId&&n.type===f.type&&n.id===f.id)continue;const{x:m,y:h}=Yc(c,f,f.position,!0),g=Math.sqrt(Math.pow(m-e.x,2)+Math.pow(h-e.y,2));g>t||(g<i?(a=[{...f,x:m,y:h}],i=g):g===i&&a.push({...f,x:m,y:h}))}}if(!a.length)return null;if(a.length>1){const c=n.type==="source"?"target":"source";return a.find(d=>d.type===c)??a[0]}return a[0]}function DG(e,t,r,n,a,i=!1){const o=n.get(e);if(!o)return null;const c=a==="strict"?o.internals.handleBounds?.[t]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],d=(r?c?.find(f=>f.id===r):c?.[0])??null;return d&&i?{...d,...Yc(o,d,d.position,!0)}:d}function IG(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function pLe(e,t){let r=null;return t?r=!0:e&&!t&&(r=!1),r}const LG=()=>!0;function gLe(e,{connectionMode:t,connectionRadius:r,handleId:n,nodeId:a,edgeUpdaterType:i,isTarget:o,domNode:c,nodeLookup:d,lib:f,autoPanOnConnect:m,flowId:h,panBy:g,cancelConnection:x,onConnectStart:w,onConnect:b,onConnectEnd:j,isValidConnection:N=LG,onReconnectEnd:_,updateConnection:S,getTransform:k,getFromHandle:A,autoPanSpeed:T,dragThreshold:O=1,handleDomNode:P}){const R=SG(e.target);let M=0,D;const{x:z,y:Y}=ga(e),I=IG(i,P),K=c?.getBoundingClientRect();let U=!1;if(!K||!I)return;const L=DG(a,I,n,d,t);if(!L)return;let F=ga(e,K),q=!1,Z=null,B=!1,V=null;function ee(){if(!m||!K)return;const[he,te]=bG(F,K,T);g({x:he,y:te}),M=requestAnimationFrame(ee)}const ae={...L,nodeId:a,type:I,position:L.position},J=d.get(a);let ne={inProgress:!0,isValid:null,from:Yc(J,ae,Ke.Left,!0),fromHandle:ae,fromPosition:ae.position,fromNode:J,to:F,toHandle:null,toPosition:lz[ae.position],toNode:null,pointer:F};function oe(){U=!0,S(ne),w?.(e,{nodeId:a,handleId:n,handleType:I})}O===0&&oe();function Q(he){if(!U){const{x:rt,y:Pr}=ga(he),hr=rt-z,pn=Pr-Y;if(!(hr*hr+pn*pn>O*O))return;oe()}if(!A()||!ae){pe(he);return}const te=k();F=ga(he,K),D=hLe($p(F,te,!1,[1,1]),r,d,ae),q||(ee(),q=!0);const we=$G(he,{handle:D,connectionMode:t,fromNodeId:a,fromHandleId:n,fromType:o?"target":"source",isValidConnection:N,doc:R,lib:f,flowId:h,nodeLookup:d});V=we.handleDomNode,Z=we.connection,B=pLe(!!D,we.isValid);const ke=d.get(a),Ve=ke?Yc(ke,ae,Ke.Left,!0):ne.from,Be={...ne,from:Ve,isValid:B,to:we.toHandle&&B?Zv({x:we.toHandle.x,y:we.toHandle.y},te):F,toHandle:we.toHandle,toPosition:B&&we.toHandle?we.toHandle.position:lz[ae.position],toNode:we.toHandle?d.get(we.toHandle.nodeId):null,pointer:F};S(Be),ne=Be}function pe(he){if(!("touches"in he&&he.touches.length>0)){if(U){(D||V)&&Z&&B&&b?.(Z);const{inProgress:te,...we}=ne,ke={...we,toPosition:ne.toHandle?ne.toPosition:null};j?.(he,ke),i&&_?.(he,ke)}x(),cancelAnimationFrame(M),q=!1,B=!1,Z=null,V=null,R.removeEventListener("mousemove",Q),R.removeEventListener("mouseup",pe),R.removeEventListener("touchmove",Q),R.removeEventListener("touchend",pe)}}R.addEventListener("mousemove",Q),R.addEventListener("mouseup",pe),R.addEventListener("touchmove",Q),R.addEventListener("touchend",pe)}function $G(e,{handle:t,connectionMode:r,fromNodeId:n,fromHandleId:a,fromType:i,doc:o,lib:c,flowId:d,isValidConnection:f=LG,nodeLookup:m}){const h=i==="target",g=t?o.querySelector(`.${c}-flow__handle[data-id="${d}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x,y:w}=ga(e),b=o.elementFromPoint(x,w),j=b?.classList.contains(`${c}-flow__handle`)?b:g,N={handleDomNode:j,isValid:!1,connection:null,toHandle:null};if(j){const _=IG(void 0,j),S=j.getAttribute("data-nodeid"),k=j.getAttribute("data-handleid"),A=j.classList.contains("connectable"),T=j.classList.contains("connectableend");if(!S||!_)return N;const O={source:h?S:n,sourceHandle:h?k:a,target:h?n:S,targetHandle:h?a:k};N.connection=O;const R=A&&T&&(r===Qd.Strict?h&&_==="source"||!h&&_==="target":S!==n||k!==a);N.isValid=R&&f(O),N.toHandle=DG(S,_,k,m,r,!0)}return N}const aC={onPointerDown:gLe,isValid:$G};function xLe({domNode:e,panZoom:t,getTransform:r,getViewScale:n}){const a=cs(e);function i({translateExtent:c,width:d,height:f,zoomStep:m=1,pannable:h=!0,zoomable:g=!0,inversePan:x=!1}){const w=S=>{if(S.sourceEvent.type!=="wheel"||!t)return;const k=r(),A=S.sourceEvent.ctrlKey&&Zh()?10:1,T=-S.sourceEvent.deltaY*(S.sourceEvent.deltaMode===1?.05:S.sourceEvent.deltaMode?1:.002)*m,O=k[2]*Math.pow(2,T*A);t.scaleTo(O)};let b=[0,0];const j=S=>{(S.sourceEvent.type==="mousedown"||S.sourceEvent.type==="touchstart")&&(b=[S.sourceEvent.clientX??S.sourceEvent.touches[0].clientX,S.sourceEvent.clientY??S.sourceEvent.touches[0].clientY])},N=S=>{const k=r();if(S.sourceEvent.type!=="mousemove"&&S.sourceEvent.type!=="touchmove"||!t)return;const A=[S.sourceEvent.clientX??S.sourceEvent.touches[0].clientX,S.sourceEvent.clientY??S.sourceEvent.touches[0].clientY],T=[A[0]-b[0],A[1]-b[1]];b=A;const O=n()*Math.max(k[2],Math.log(k[2]))*(x?-1:1),P={x:k[0]-T[0]*O,y:k[1]-T[1]*O},R=[[0,0],[d,f]];t.setViewportConstrained({x:P.x,y:P.y,zoom:k[2]},R,c)},_=fG().on("start",j).on("zoom",h?N:null).on("zoom.wheel",g?w:null);a.call(_,{})}function o(){a.on("zoom",null)}return{update:i,destroy:o,pointer:ca}}const M0=e=>({x:e.x,y:e.y,zoom:e.k}),RS=({x:e,y:t,zoom:r})=>T0.translate(e,t).scale(r),Cd=(e,t)=>e.target.closest(`.${t}`),zG=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),yLe=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,DS=(e,t=0,r=yLe,n=()=>{})=>{const a=typeof t=="number"&&t>0;return a||n(),a?e.transition().duration(t).ease(r).on("end",n):e},UG=e=>{const t=e.ctrlKey&&Zh()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function vLe({zoomPanValues:e,noWheelClassName:t,d3Selection:r,d3Zoom:n,panOnScrollMode:a,panOnScrollSpeed:i,zoomOnPinch:o,onPanZoomStart:c,onPanZoom:d,onPanZoomEnd:f}){return m=>{if(Cd(m,t))return m.ctrlKey&&m.preventDefault(),!1;m.preventDefault(),m.stopImmediatePropagation();const h=r.property("__zoom").k||1;if(m.ctrlKey&&o){const j=ca(m),N=UG(m),_=h*Math.pow(2,N);n.scaleTo(r,_,j,m);return}const g=m.deltaMode===1?20:1;let x=a===Pc.Vertical?0:m.deltaX*g,w=a===Pc.Horizontal?0:m.deltaY*g;!Zh()&&m.shiftKey&&a!==Pc.Vertical&&(x=m.deltaY*g,w=0),n.translateBy(r,-(x/h)*i,-(w/h)*i,{internal:!0});const b=M0(r.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(d?.(m,b),e.panScrollTimeout=setTimeout(()=>{f?.(m,b),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,c?.(m,b))}}function bLe({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:r}){return function(n,a){const i=n.type==="wheel",o=!t&&i&&!n.ctrlKey,c=Cd(n,e);if(n.ctrlKey&&i&&c&&n.preventDefault(),o||c)return null;n.preventDefault(),r.call(this,n,a)}}function wLe({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:r}){return n=>{if(n.sourceEvent?.internal)return;const a=M0(n.transform);e.mouseButton=n.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=a,n.sourceEvent?.type==="mousedown"&&t(!0),r&&r?.(n.sourceEvent,a)}}function jLe({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:r,onTransformChange:n,onPanZoom:a}){return i=>{e.usedRightMouseButton=!!(r&&zG(t,e.mouseButton??0)),i.sourceEvent?.sync||n([i.transform.x,i.transform.y,i.transform.k]),a&&!i.sourceEvent?.internal&&a?.(i.sourceEvent,M0(i.transform))}}function NLe({zoomPanValues:e,panOnDrag:t,panOnScroll:r,onDraggingChange:n,onPanZoomEnd:a,onPaneContextMenu:i}){return o=>{if(!o.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,i&&zG(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&i(o.sourceEvent),e.usedRightMouseButton=!1,n(!1),a)){const c=M0(o.transform);e.prevViewport=c,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{a?.(o.sourceEvent,c)},r?150:0)}}}function SLe({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:r,panOnDrag:n,panOnScroll:a,zoomOnDoubleClick:i,userSelectionActive:o,noWheelClassName:c,noPanClassName:d,lib:f,connectionInProgress:m}){return h=>{const g=e||t,x=r&&h.ctrlKey,w=h.type==="wheel";if(h.button===1&&h.type==="mousedown"&&(Cd(h,`${f}-flow__node`)||Cd(h,`${f}-flow__edge`)))return!0;if(!n&&!g&&!a&&!i&&!r||o||m&&!w||Cd(h,c)&&w||Cd(h,d)&&(!w||a&&w&&!e)||!r&&h.ctrlKey&&w)return!1;if(!r&&h.type==="touchstart"&&h.touches?.length>1)return h.preventDefault(),!1;if(!g&&!a&&!x&&w||!n&&(h.type==="mousedown"||h.type==="touchstart")||Array.isArray(n)&&!n.includes(h.button)&&h.type==="mousedown")return!1;const b=Array.isArray(n)&&n.includes(h.button)||!h.button||h.button<=1;return(!h.ctrlKey||w)&&b}}function _Le({domNode:e,minZoom:t,maxZoom:r,translateExtent:n,viewport:a,onPanZoom:i,onPanZoomStart:o,onPanZoomEnd:c,onDraggingChange:d}){const f={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},m=e.getBoundingClientRect(),h=fG().scaleExtent([t,r]).translateExtent(n),g=cs(e).call(h);_({x:a.x,y:a.y,zoom:Yd(a.zoom,t,r)},[[0,0],[m.width,m.height]],n);const x=g.on("wheel.zoom"),w=g.on("dblclick.zoom");h.wheelDelta(UG);function b(D,z){return g?new Promise(Y=>{h?.interpolate(z?.interpolate==="linear"?Ki:ly).transform(DS(g,z?.duration,z?.ease,()=>Y(!0)),D)}):Promise.resolve(!1)}function j({noWheelClassName:D,noPanClassName:z,onPaneContextMenu:Y,userSelectionActive:I,panOnScroll:K,panOnDrag:U,panOnScrollMode:L,panOnScrollSpeed:F,preventScrolling:q,zoomOnPinch:Z,zoomOnScroll:B,zoomOnDoubleClick:V,zoomActivationKeyPressed:ee,lib:ae,onTransformChange:J,connectionInProgress:se,paneClickDistance:ne,selectionOnDrag:oe}){I&&!f.isZoomingOrPanning&&N();const Q=K&&!ee&&!I;h.clickDistance(oe?1/0:!pa(ne)||ne<0?0:ne);const pe=Q?vLe({zoomPanValues:f,noWheelClassName:D,d3Selection:g,d3Zoom:h,panOnScrollMode:L,panOnScrollSpeed:F,zoomOnPinch:Z,onPanZoomStart:o,onPanZoom:i,onPanZoomEnd:c}):bLe({noWheelClassName:D,preventScrolling:q,d3ZoomHandler:x});if(g.on("wheel.zoom",pe,{passive:!1}),!I){const te=wLe({zoomPanValues:f,onDraggingChange:d,onPanZoomStart:o});h.on("start",te);const we=jLe({zoomPanValues:f,panOnDrag:U,onPaneContextMenu:!!Y,onPanZoom:i,onTransformChange:J});h.on("zoom",we);const ke=NLe({zoomPanValues:f,panOnDrag:U,panOnScroll:K,onPaneContextMenu:Y,onPanZoomEnd:c,onDraggingChange:d});h.on("end",ke)}const he=SLe({zoomActivationKeyPressed:ee,panOnDrag:U,zoomOnScroll:B,panOnScroll:K,zoomOnDoubleClick:V,zoomOnPinch:Z,userSelectionActive:I,noPanClassName:z,noWheelClassName:D,lib:ae,connectionInProgress:se});h.filter(he),V?g.on("dblclick.zoom",w):g.on("dblclick.zoom",null)}function N(){h.on("zoom",null)}async function _(D,z,Y){const I=RS(D),K=h?.constrain()(I,z,Y);return K&&await b(K),new Promise(U=>U(K))}async function S(D,z){const Y=RS(D);return await b(Y,z),new Promise(I=>I(Y))}function k(D){if(g){const z=RS(D),Y=g.property("__zoom");(Y.k!==D.zoom||Y.x!==D.x||Y.y!==D.y)&&h?.transform(g,z,null,{sync:!0})}}function A(){const D=g?dG(g.node()):{x:0,y:0,k:1};return{x:D.x,y:D.y,zoom:D.k}}function T(D,z){return g?new Promise(Y=>{h?.interpolate(z?.interpolate==="linear"?Ki:ly).scaleTo(DS(g,z?.duration,z?.ease,()=>Y(!0)),D)}):Promise.resolve(!1)}function O(D,z){return g?new Promise(Y=>{h?.interpolate(z?.interpolate==="linear"?Ki:ly).scaleBy(DS(g,z?.duration,z?.ease,()=>Y(!0)),D)}):Promise.resolve(!1)}function P(D){h?.scaleExtent(D)}function R(D){h?.translateExtent(D)}function M(D){const z=!pa(D)||D<0?0:D;h?.clickDistance(z)}return{update:j,destroy:N,setViewport:S,setViewportConstrained:_,getViewport:A,scaleTo:T,scaleBy:O,setScaleExtent:P,setTranslateExtent:R,syncViewport:k,setClickDistance:M}}var Jd;(function(e){e.Line="line",e.Handle="handle"})(Jd||(Jd={}));function CLe({width:e,prevWidth:t,height:r,prevHeight:n,affectsX:a,affectsY:i}){const o=e-t,c=r-n,d=[o>0?1:o<0?-1:0,c>0?1:c<0?-1:0];return o&&a&&(d[0]=d[0]*-1),c&&i&&(d[1]=d[1]*-1),d}function wz(e){const t=e.includes("right")||e.includes("left"),r=e.includes("bottom")||e.includes("top"),n=e.includes("left"),a=e.includes("top");return{isHorizontal:t,isVertical:r,affectsX:n,affectsY:a}}function tl(e,t){return Math.max(0,t-e)}function rl(e,t){return Math.max(0,e-t)}function Zx(e,t,r){return Math.max(0,t-e,e-r)}function jz(e,t){return e?!t:t}function kLe(e,t,r,n,a,i,o,c){let{affectsX:d,affectsY:f}=t;const{isHorizontal:m,isVertical:h}=t,g=m&&h,{xSnapped:x,ySnapped:w}=r,{minWidth:b,maxWidth:j,minHeight:N,maxHeight:_}=n,{x:S,y:k,width:A,height:T,aspectRatio:O}=e;let P=Math.floor(m?x-e.pointerX:0),R=Math.floor(h?w-e.pointerY:0);const M=A+(d?-P:P),D=T+(f?-R:R),z=-i[0]*A,Y=-i[1]*T;let I=Zx(M,b,j),K=Zx(D,N,_);if(o){let F=0,q=0;d&&P<0?F=tl(S+P+z,o[0][0]):!d&&P>0&&(F=rl(S+M+z,o[1][0])),f&&R<0?q=tl(k+R+Y,o[0][1]):!f&&R>0&&(q=rl(k+D+Y,o[1][1])),I=Math.max(I,F),K=Math.max(K,q)}if(c){let F=0,q=0;d&&P>0?F=rl(S+P,c[0][0]):!d&&P<0&&(F=tl(S+M,c[1][0])),f&&R>0?q=rl(k+R,c[0][1]):!f&&R<0&&(q=tl(k+D,c[1][1])),I=Math.max(I,F),K=Math.max(K,q)}if(a){if(m){const F=Zx(M/O,N,_)*O;if(I=Math.max(I,F),o){let q=0;!d&&!f||d&&!f&&g?q=rl(k+Y+M/O,o[1][1])*O:q=tl(k+Y+(d?P:-P)/O,o[0][1])*O,I=Math.max(I,q)}if(c){let q=0;!d&&!f||d&&!f&&g?q=tl(k+M/O,c[1][1])*O:q=rl(k+(d?P:-P)/O,c[0][1])*O,I=Math.max(I,q)}}if(h){const F=Zx(D*O,b,j)/O;if(K=Math.max(K,F),o){let q=0;!d&&!f||f&&!d&&g?q=rl(S+D*O+z,o[1][0])/O:q=tl(S+(f?R:-R)*O+z,o[0][0])/O,K=Math.max(K,q)}if(c){let q=0;!d&&!f||f&&!d&&g?q=tl(S+D*O,c[1][0])/O:q=rl(S+(f?R:-R)*O,c[0][0])/O,K=Math.max(K,q)}}}R=R+(R<0?K:-K),P=P+(P<0?I:-I),a&&(g?M>D*O?R=(jz(d,f)?-P:P)/O:P=(jz(d,f)?-R:R)*O:m?(R=P/O,f=d):(P=R*O,d=f));const U=d?S+P:S,L=f?k+R:k;return{width:A+(d?-P:P),height:T+(f?-R:R),x:i[0]*P*(d?-1:1)+U,y:i[1]*R*(f?-1:1)+L}}const FG={width:0,height:0,x:0,y:0},ELe={...FG,pointerX:0,pointerY:0,aspectRatio:1};function ALe(e){return[[0,0],[e.measured.width,e.measured.height]]}function TLe(e,t,r){const n=t.position.x+e.position.x,a=t.position.y+e.position.y,i=e.measured.width??0,o=e.measured.height??0,c=r[0]*i,d=r[1]*o;return[[n-c,a-d],[n+i-c,a+o-d]]}function OLe({domNode:e,nodeId:t,getStoreItems:r,onChange:n,onEnd:a}){const i=cs(e);let o={controlDirection:wz("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function c({controlPosition:f,boundaries:m,keepAspectRatio:h,resizeDirection:g,onResizeStart:x,onResize:w,onResizeEnd:b,shouldResize:j}){let N={...FG},_={...ELe};o={boundaries:m,resizeDirection:g,keepAspectRatio:h,controlDirection:wz(f)};let S,k=null,A=[],T,O,P,R=!1;const M=nG().on("start",D=>{const{nodeLookup:z,transform:Y,snapGrid:I,snapToGrid:K,nodeOrigin:U,paneDomNode:L}=r();if(S=z.get(t),!S)return;k=L?.getBoundingClientRect()??null;const{xSnapped:F,ySnapped:q}=lh(D.sourceEvent,{transform:Y,snapGrid:I,snapToGrid:K,containerBounds:k});N={width:S.measured.width??0,height:S.measured.height??0,x:S.position.x??0,y:S.position.y??0},_={...N,pointerX:F,pointerY:q,aspectRatio:N.width/N.height},T=void 0,S.parentId&&(S.extent==="parent"||S.expandParent)&&(T=z.get(S.parentId),O=T&&S.extent==="parent"?ALe(T):void 0),A=[],P=void 0;for(const[Z,B]of z)if(B.parentId===t&&(A.push({id:Z,position:{...B.position},extent:B.extent}),B.extent==="parent"||B.expandParent)){const V=TLe(B,S,B.origin??U);P?P=[[Math.min(V[0][0],P[0][0]),Math.min(V[0][1],P[0][1])],[Math.max(V[1][0],P[1][0]),Math.max(V[1][1],P[1][1])]]:P=V}x?.(D,{...N})}).on("drag",D=>{const{transform:z,snapGrid:Y,snapToGrid:I,nodeOrigin:K}=r(),U=lh(D.sourceEvent,{transform:z,snapGrid:Y,snapToGrid:I,containerBounds:k}),L=[];if(!S)return;const{x:F,y:q,width:Z,height:B}=N,V={},ee=S.origin??K,{width:ae,height:J,x:se,y:ne}=kLe(_,o.controlDirection,U,o.boundaries,o.keepAspectRatio,ee,O,P),oe=ae!==Z,Q=J!==B,pe=se!==F&&oe,he=ne!==q&&Q;if(!pe&&!he&&!oe&&!Q)return;if((pe||he||ee[0]===1||ee[1]===1)&&(V.x=pe?se:N.x,V.y=he?ne:N.y,N.x=V.x,N.y=V.y,A.length>0)){const Ve=se-F,Be=ne-q;for(const rt of A)rt.position={x:rt.position.x-Ve+ee[0]*(ae-Z),y:rt.position.y-Be+ee[1]*(J-B)},L.push(rt)}if((oe||Q)&&(V.width=oe&&(!o.resizeDirection||o.resizeDirection==="horizontal")?ae:N.width,V.height=Q&&(!o.resizeDirection||o.resizeDirection==="vertical")?J:N.height,N.width=V.width,N.height=V.height),T&&S.expandParent){const Ve=ee[0]*(V.width??0);V.x&&V.x<Ve&&(N.x=Ve,_.x=_.x-(V.x-Ve));const Be=ee[1]*(V.height??0);V.y&&V.y<Be&&(N.y=Be,_.y=_.y-(V.y-Be))}const te=CLe({width:N.width,prevWidth:Z,height:N.height,prevHeight:B,affectsX:o.controlDirection.affectsX,affectsY:o.controlDirection.affectsY}),we={...N,direction:te};j?.(D,we)!==!1&&(R=!0,w?.(D,we),n(V,L))}).on("end",D=>{R&&(b?.(D,{...N}),a?.({...N}),R=!1)});i.call(M)}function d(){i.on(".drag",null)}return{update:c,destroy:d}}const PLe={},Nz=e=>{let t;const r=new Set,n=(m,h)=>{const g=typeof m=="function"?m(t):m;if(!Object.is(g,t)){const x=t;t=h??(typeof g!="object"||g===null)?g:Object.assign({},t,g),r.forEach(w=>w(t,x))}},a=()=>t,d={setState:n,getState:a,getInitialState:()=>f,subscribe:m=>(r.add(m),()=>r.delete(m)),destroy:()=>{(PLe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},f=t=e(n,a,d);return d},MLe=e=>e?Nz(e):Nz,{useDebugValue:RLe}=En,{useSyncExternalStoreWithSelector:DLe}=Wde,ILe=e=>e;function BG(e,t=ILe,r){const n=DLe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return RLe(n),n}const Sz=(e,t)=>{const r=MLe(e),n=(a,i=t)=>BG(r,a,i);return Object.assign(n,r),n},LLe=(e,t)=>e?Sz(e,t):Sz;function Yt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}const R0=y.createContext(null),$Le=R0.Provider,qG=ci.error001();function mt(e,t){const r=y.useContext(R0);if(r===null)throw new Error(qG);return BG(r,e,t)}function Zt(){const e=y.useContext(R0);if(e===null)throw new Error(qG);return y.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const _z={display:"none"},zLe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},VG="react-flow__node-desc",KG="react-flow__edge-desc",ULe="react-flow__aria-live",FLe=e=>e.ariaLiveMessage,BLe=e=>e.ariaLabelConfig;function qLe({rfId:e}){const t=mt(FLe);return s.jsx("div",{id:`${ULe}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:zLe,children:t})}function VLe({rfId:e,disableKeyboardA11y:t}){const r=mt(BLe);return s.jsxs(s.Fragment,{children:[s.jsx("div",{id:`${VG}-${e}`,style:_z,children:t?r["node.a11yDescription.default"]:r["node.a11yDescription.keyboardDisabled"]}),s.jsx("div",{id:`${KG}-${e}`,style:_z,children:r["edge.a11yDescription.default"]}),!t&&s.jsx(qLe,{rfId:e})]})}const D0=y.forwardRef(({position:e="top-left",children:t,className:r,style:n,...a},i)=>{const o=`${e}`.split("-");return s.jsx("div",{className:Or(["react-flow__panel",r,...o]),style:n,ref:i,...a,children:t})});D0.displayName="Panel";function KLe({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:s.jsx(D0,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:s.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const HLe=e=>{const t=[],r=[];for(const[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(const[,n]of e.edgeLookup)n.selected&&r.push(n);return{selectedNodes:t,selectedEdges:r}},Jx=e=>e.id;function GLe(e,t){return Yt(e.selectedNodes.map(Jx),t.selectedNodes.map(Jx))&&Yt(e.selectedEdges.map(Jx),t.selectedEdges.map(Jx))}function WLe({onSelectionChange:e}){const t=Zt(),{selectedNodes:r,selectedEdges:n}=mt(HLe,GLe);return y.useEffect(()=>{const a={nodes:r,edges:n};e?.(a),t.getState().onSelectionChangeHandlers.forEach(i=>i(a))},[r,n,e]),null}const QLe=e=>!!e.onSelectionChangeHandlers;function YLe({onSelectionChange:e}){const t=mt(QLe);return e||t?s.jsx(WLe,{onSelectionChange:e}):null}const HG=[0,0],XLe={x:0,y:0,zoom:1},ZLe=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],Cz=[...ZLe,"rfId"],JLe=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),kz={translateExtent:Qh,nodeOrigin:HG,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function e$e(e){const{setNodes:t,setEdges:r,setMinZoom:n,setMaxZoom:a,setTranslateExtent:i,setNodeExtent:o,reset:c,setDefaultNodesAndEdges:d}=mt(JLe,Yt),f=Zt();y.useEffect(()=>(d(e.defaultNodes,e.defaultEdges),()=>{m.current=kz,c()}),[]);const m=y.useRef(kz);return y.useEffect(()=>{for(const h of Cz){const g=e[h],x=m.current[h];g!==x&&(typeof e[h]>"u"||(h==="nodes"?t(g):h==="edges"?r(g):h==="minZoom"?n(g):h==="maxZoom"?a(g):h==="translateExtent"?i(g):h==="nodeExtent"?o(g):h==="ariaLabelConfig"?f.setState({ariaLabelConfig:qIe(g)}):h==="fitView"?f.setState({fitViewQueued:g}):h==="fitViewOptions"?f.setState({fitViewOptions:g}):f.setState({[h]:g})))}m.current=e},Cz.map(h=>e[h])),null}function Ez(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function t$e(e){const[t,r]=y.useState(e==="system"?null:e);return y.useEffect(()=>{if(e!=="system"){r(e);return}const n=Ez(),a=()=>r(n?.matches?"dark":"light");return a(),n?.addEventListener("change",a),()=>{n?.removeEventListener("change",a)}},[e]),t!==null?t:Ez()?.matches?"dark":"light"}const Az=typeof document<"u"?document:null;function Jh(e=null,t={target:Az,actInsideInputWithModifier:!0}){const[r,n]=y.useState(!1),a=y.useRef(!1),i=y.useRef(new Set([])),[o,c]=y.useMemo(()=>{if(e!==null){const f=(Array.isArray(e)?e:[e]).filter(h=>typeof h=="string").map(h=>h.replace("+",`
`).replace(`

`,`
+`).split(`
`)),m=f.reduce((h,g)=>h.concat(...g),[]);return[f,m]}return[[],[]]},[e]);return y.useEffect(()=>{const d=t?.target??Az,f=t?.actInsideInputWithModifier??!0;if(e!==null){const m=x=>{if(a.current=x.ctrlKey||x.metaKey||x.shiftKey||x.altKey,(!a.current||a.current&&!f)&&_G(x))return!1;const b=Oz(x.code,c);if(i.current.add(x[b]),Tz(o,i.current,!1)){const j=x.composedPath?.()?.[0]||x.target,N=j?.nodeName==="BUTTON"||j?.nodeName==="A";t.preventDefault!==!1&&(a.current||!N)&&x.preventDefault(),n(!0)}},h=x=>{const w=Oz(x.code,c);Tz(o,i.current,!0)?(n(!1),i.current.clear()):i.current.delete(x[w]),x.key==="Meta"&&i.current.clear(),a.current=!1},g=()=>{i.current.clear(),n(!1)};return d?.addEventListener("keydown",m),d?.addEventListener("keyup",h),window.addEventListener("blur",g),window.addEventListener("contextmenu",g),()=>{d?.removeEventListener("keydown",m),d?.removeEventListener("keyup",h),window.removeEventListener("blur",g),window.removeEventListener("contextmenu",g)}}},[e,n]),r}function Tz(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(a=>t.has(a)))}function Oz(e,t){return t.includes(e)?"code":"key"}const r$e=()=>{const e=Zt();return y.useMemo(()=>({zoomIn:t=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,r)=>{const{panZoom:n}=e.getState();return n?n.scaleTo(t,{duration:r?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,r)=>{const{transform:[n,a,i],panZoom:o}=e.getState();return o?(await o.setViewport({x:t.x??n,y:t.y??a,zoom:t.zoom??i},r),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,r,n]=e.getState().transform;return{x:t,y:r,zoom:n}},setCenter:async(t,r,n)=>e.getState().setCenter(t,r,n),fitBounds:async(t,r)=>{const{width:n,height:a,minZoom:i,maxZoom:o,panZoom:c}=e.getState(),d=$A(t,n,a,i,o,r?.padding??.1);return c?(await c.setViewport(d,{duration:r?.duration,ease:r?.ease,interpolate:r?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,r={})=>{const{transform:n,snapGrid:a,snapToGrid:i,domNode:o}=e.getState();if(!o)return t;const{x:c,y:d}=o.getBoundingClientRect(),f={x:t.x-c,y:t.y-d},m=r.snapGrid??a,h=r.snapToGrid??i;return $p(f,n,h,m)},flowToScreenPosition:t=>{const{transform:r,domNode:n}=e.getState();if(!n)return t;const{x:a,y:i}=n.getBoundingClientRect(),o=Zv(t,r);return{x:o.x+a,y:o.y+i}}}),[])};function GG(e,t){const r=[],n=new Map,a=[];for(const i of e)if(i.type==="add"){a.push(i);continue}else if(i.type==="remove"||i.type==="replace")n.set(i.id,[i]);else{const o=n.get(i.id);o?o.push(i):n.set(i.id,[i])}for(const i of t){const o=n.get(i.id);if(!o){r.push(i);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){r.push({...o[0].item});continue}const c={...i};for(const d of o)n$e(d,c);r.push(c)}return a.length&&a.forEach(i=>{i.index!==void 0?r.splice(i.index,0,{...i.item}):r.push({...i.item})}),r}function n$e(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function WG(e,t){return GG(e,t)}function QG(e,t){return GG(e,t)}function pc(e,t){return{id:e,type:"select",selected:t}}function kd(e,t=new Set,r=!1){const n=[];for(const[a,i]of e){const o=t.has(a);!(i.selected===void 0&&!o)&&i.selected!==o&&(r&&(i.selected=o),n.push(pc(i.id,o)))}return n}function Pz({items:e=[],lookup:t}){const r=[],n=new Map(e.map(a=>[a.id,a]));for(const[a,i]of e.entries()){const o=t.get(i.id),c=o?.internals?.userNode??o;c!==void 0&&c!==i&&r.push({id:i.id,item:i,type:"replace"}),c===void 0&&r.push({item:i,type:"add",index:a})}for(const[a]of t)n.get(a)===void 0&&r.push({id:a,type:"remove"});return r}function Mz(e){return{id:e.id,type:"remove"}}const Rz=e=>MIe(e),s$e=e=>xG(e);function YG(e){return y.forwardRef(e)}const a$e=typeof window<"u"?y.useLayoutEffect:y.useEffect;function Dz(e){const[t,r]=y.useState(BigInt(0)),[n]=y.useState(()=>i$e(()=>r(a=>a+BigInt(1))));return a$e(()=>{const a=n.get();a.length&&(e(a),n.reset())},[t]),n}function i$e(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:r=>{t.push(r),e()}}}const XG=y.createContext(null);function o$e({children:e}){const t=Zt(),r=y.useCallback(c=>{const{nodes:d=[],setNodes:f,hasDefaultNodes:m,onNodesChange:h,nodeLookup:g,fitViewQueued:x,onNodesChangeMiddlewareMap:w}=t.getState();let b=d;for(const N of c)b=typeof N=="function"?N(b):N;let j=Pz({items:b,lookup:g});for(const N of w.values())j=N(j);m&&f(b),j.length>0?h?.(j):x&&window.requestAnimationFrame(()=>{const{fitViewQueued:N,nodes:_,setNodes:S}=t.getState();N&&S(_)})},[]),n=Dz(r),a=y.useCallback(c=>{const{edges:d=[],setEdges:f,hasDefaultEdges:m,onEdgesChange:h,edgeLookup:g}=t.getState();let x=d;for(const w of c)x=typeof w=="function"?w(x):w;m?f(x):h&&h(Pz({items:x,lookup:g}))},[]),i=Dz(a),o=y.useMemo(()=>({nodeQueue:n,edgeQueue:i}),[]);return s.jsx(XG.Provider,{value:o,children:e})}function l$e(){const e=y.useContext(XG);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const c$e=e=>!!e.panZoom;function KA(){const e=r$e(),t=Zt(),r=l$e(),n=mt(c$e),a=y.useMemo(()=>{const i=h=>t.getState().nodeLookup.get(h),o=h=>{r.nodeQueue.push(h)},c=h=>{r.edgeQueue.push(h)},d=h=>{const{nodeLookup:g,nodeOrigin:x}=t.getState(),w=Rz(h)?h:g.get(h.id),b=w.parentId?NG(w.position,w.measured,w.parentId,g,x):w.position,j={...w,position:b,width:w.measured?.width??w.width,height:w.measured?.height??w.height};return Xd(j)},f=(h,g,x={replace:!1})=>{o(w=>w.map(b=>{if(b.id===h){const j=typeof g=="function"?g(b):g;return x.replace&&Rz(j)?j:{...b,...j}}return b}))},m=(h,g,x={replace:!1})=>{c(w=>w.map(b=>{if(b.id===h){const j=typeof g=="function"?g(b):g;return x.replace&&s$e(j)?j:{...b,...j}}return b}))};return{getNodes:()=>t.getState().nodes.map(h=>({...h})),getNode:h=>i(h)?.internals.userNode,getInternalNode:i,getEdges:()=>{const{edges:h=[]}=t.getState();return h.map(g=>({...g}))},getEdge:h=>t.getState().edgeLookup.get(h),setNodes:o,setEdges:c,addNodes:h=>{const g=Array.isArray(h)?h:[h];r.nodeQueue.push(x=>[...x,...g])},addEdges:h=>{const g=Array.isArray(h)?h:[h];r.edgeQueue.push(x=>[...x,...g])},toObject:()=>{const{nodes:h=[],edges:g=[],transform:x}=t.getState(),[w,b,j]=x;return{nodes:h.map(N=>({...N})),edges:g.map(N=>({...N})),viewport:{x:w,y:b,zoom:j}}},deleteElements:async({nodes:h=[],edges:g=[]})=>{const{nodes:x,edges:w,onNodesDelete:b,onEdgesDelete:j,triggerNodeChanges:N,triggerEdgeChanges:_,onDelete:S,onBeforeDelete:k}=t.getState(),{nodes:A,edges:T}=await $Ie({nodesToRemove:h,edgesToRemove:g,nodes:x,edges:w,onBeforeDelete:k}),O=T.length>0,P=A.length>0;if(O){const R=T.map(Mz);j?.(T),_(R)}if(P){const R=A.map(Mz);b?.(A),N(R)}return(P||O)&&S?.({nodes:A,edges:T}),{deletedNodes:A,deletedEdges:T}},getIntersectingNodes:(h,g=!0,x)=>{const w=uz(h),b=w?h:d(h),j=x!==void 0;return b?(x||t.getState().nodes).filter(N=>{const _=t.getState().nodeLookup.get(N.id);if(_&&!w&&(N.id===h.id||!_.internals.positionAbsolute))return!1;const S=Xd(j?N:_),k=Xh(S,b);return g&&k>0||k>=S.width*S.height||k>=b.width*b.height}):[]},isNodeIntersecting:(h,g,x=!0)=>{const b=uz(h)?h:d(h);if(!b)return!1;const j=Xh(b,g);return x&&j>0||j>=g.width*g.height||j>=b.width*b.height},updateNode:f,updateNodeData:(h,g,x={replace:!1})=>{f(h,w=>{const b=typeof g=="function"?g(w):g;return x.replace?{...w,data:b}:{...w,data:{...w.data,...b}}},x)},updateEdge:m,updateEdgeData:(h,g,x={replace:!1})=>{m(h,w=>{const b=typeof g=="function"?g(w):g;return x.replace?{...w,data:b}:{...w,data:{...w.data,...b}}},x)},getNodesBounds:h=>{const{nodeLookup:g,nodeOrigin:x}=t.getState();return RIe(h,{nodeLookup:g,nodeOrigin:x})},getHandleConnections:({type:h,id:g,nodeId:x})=>Array.from(t.getState().connectionLookup.get(`${x}-${h}${g?`-${g}`:""}`)?.values()??[]),getNodeConnections:({type:h,handleId:g,nodeId:x})=>Array.from(t.getState().connectionLookup.get(`${x}${h?g?`-${h}-${g}`:`-${h}`:""}`)?.values()??[]),fitView:async h=>{const g=t.getState().fitViewResolver??BIe();return t.setState({fitViewQueued:!0,fitViewOptions:h,fitViewResolver:g}),r.nodeQueue.push(x=>[...x]),g.promise}}},[]);return y.useMemo(()=>({...a,...e,viewportInitialized:n}),[n])}const Iz=e=>e.selected,u$e=typeof window<"u"?window:void 0;function d$e({deleteKeyCode:e,multiSelectionKeyCode:t}){const r=Zt(),{deleteElements:n}=KA(),a=Jh(e,{actInsideInputWithModifier:!1}),i=Jh(t,{target:u$e});y.useEffect(()=>{if(a){const{edges:o,nodes:c}=r.getState();n({nodes:c.filter(Iz),edges:o.filter(Iz)}),r.setState({nodesSelectionActive:!1})}},[a]),y.useEffect(()=>{r.setState({multiSelectionActive:i})},[i])}function f$e(e){const t=Zt();y.useEffect(()=>{const r=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;const n=zA(e.current);(n.height===0||n.width===0)&&t.getState().onError?.("004",ci.error004()),t.setState({width:n.width||500,height:n.height||500})};if(e.current){r(),window.addEventListener("resize",r);const n=new ResizeObserver(()=>r());return n.observe(e.current),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}}},[])}const I0={position:"absolute",width:"100%",height:"100%",top:0,left:0},m$e=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function h$e({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:r=!0,panOnScroll:n=!1,panOnScrollSpeed:a=.5,panOnScrollMode:i=Pc.Free,zoomOnDoubleClick:o=!0,panOnDrag:c=!0,defaultViewport:d,translateExtent:f,minZoom:m,maxZoom:h,zoomActivationKeyCode:g,preventScrolling:x=!0,children:w,noWheelClassName:b,noPanClassName:j,onViewportChange:N,isControlledViewport:_,paneClickDistance:S,selectionOnDrag:k}){const A=Zt(),T=y.useRef(null),{userSelectionActive:O,lib:P,connectionInProgress:R}=mt(m$e,Yt),M=Jh(g),D=y.useRef();f$e(T);const z=y.useCallback(Y=>{N?.({x:Y[0],y:Y[1],zoom:Y[2]}),_||A.setState({transform:Y})},[N,_]);return y.useEffect(()=>{if(T.current){D.current=_Le({domNode:T.current,minZoom:m,maxZoom:h,translateExtent:f,viewport:d,onDraggingChange:U=>A.setState({paneDragging:U}),onPanZoomStart:(U,L)=>{const{onViewportChangeStart:F,onMoveStart:q}=A.getState();q?.(U,L),F?.(L)},onPanZoom:(U,L)=>{const{onViewportChange:F,onMove:q}=A.getState();q?.(U,L),F?.(L)},onPanZoomEnd:(U,L)=>{const{onViewportChangeEnd:F,onMoveEnd:q}=A.getState();q?.(U,L),F?.(L)}});const{x:Y,y:I,zoom:K}=D.current.getViewport();return A.setState({panZoom:D.current,transform:[Y,I,K],domNode:T.current.closest(".react-flow")}),()=>{D.current?.destroy()}}},[]),y.useEffect(()=>{D.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:r,panOnScroll:n,panOnScrollSpeed:a,panOnScrollMode:i,zoomOnDoubleClick:o,panOnDrag:c,zoomActivationKeyPressed:M,preventScrolling:x,noPanClassName:j,userSelectionActive:O,noWheelClassName:b,lib:P,onTransformChange:z,connectionInProgress:R,selectionOnDrag:k,paneClickDistance:S})},[e,t,r,n,a,i,o,c,M,x,j,O,b,P,z,R,k,S]),s.jsx("div",{className:"react-flow__renderer",ref:T,style:I0,children:w})}const p$e=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function g$e(){const{userSelectionActive:e,userSelectionRect:t}=mt(p$e,Yt);return e&&t?s.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const IS=(e,t)=>r=>{r.target===t.current&&e?.(r)},x$e=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function y$e({isSelecting:e,selectionKeyPressed:t,selectionMode:r=Yh.Full,panOnDrag:n,paneClickDistance:a,selectionOnDrag:i,onSelectionStart:o,onSelectionEnd:c,onPaneClick:d,onPaneContextMenu:f,onPaneScroll:m,onPaneMouseEnter:h,onPaneMouseMove:g,onPaneMouseLeave:x,children:w}){const b=Zt(),{userSelectionActive:j,elementsSelectable:N,dragging:_,connectionInProgress:S}=mt(x$e,Yt),k=N&&(e||j),A=y.useRef(null),T=y.useRef(),O=y.useRef(new Set),P=y.useRef(new Set),R=y.useRef(!1),M=F=>{if(R.current||S){R.current=!1;return}d?.(F),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},D=F=>{if(Array.isArray(n)&&n?.includes(2)){F.preventDefault();return}f?.(F)},z=m?F=>m(F):void 0,Y=F=>{R.current&&(F.stopPropagation(),R.current=!1)},I=F=>{const{domNode:q}=b.getState();if(T.current=q?.getBoundingClientRect(),!T.current)return;const Z=F.target===A.current;if(!Z&&!!F.target.closest(".nokey")||!e||!(i&&Z||t)||F.button!==0||!F.isPrimary)return;F.target?.setPointerCapture?.(F.pointerId),R.current=!1;const{x:ee,y:ae}=ga(F.nativeEvent,T.current);b.setState({userSelectionRect:{width:0,height:0,startX:ee,startY:ae,x:ee,y:ae}}),Z||(F.stopPropagation(),F.preventDefault())},K=F=>{const{userSelectionRect:q,transform:Z,nodeLookup:B,edgeLookup:V,connectionLookup:ee,triggerNodeChanges:ae,triggerEdgeChanges:J,defaultEdgeOptions:se,resetSelectedElements:ne}=b.getState();if(!T.current||!q)return;const{x:oe,y:Q}=ga(F.nativeEvent,T.current),{startX:pe,startY:he}=q;if(!R.current){const Be=t?0:a;if(Math.hypot(oe-pe,Q-he)<=Be)return;ne(),o?.(F)}R.current=!0;const te={startX:pe,startY:he,x:oe<pe?oe:pe,y:Q<he?Q:he,width:Math.abs(oe-pe),height:Math.abs(Q-he)},we=O.current,ke=P.current;O.current=new Set(LA(B,te,Z,r===Yh.Partial,!0).map(Be=>Be.id)),P.current=new Set;const Ve=se?.selectable??!0;for(const Be of O.current){const rt=ee.get(Be);if(rt)for(const{edgeId:Pr}of rt.values()){const hr=V.get(Pr);hr&&(hr.selectable??Ve)&&P.current.add(Pr)}}if(!dz(we,O.current)){const Be=kd(B,O.current,!0);ae(Be)}if(!dz(ke,P.current)){const Be=kd(V,P.current);J(Be)}b.setState({userSelectionRect:te,userSelectionActive:!0,nodesSelectionActive:!1})},U=F=>{F.button===0&&(F.target?.releasePointerCapture?.(F.pointerId),!j&&F.target===A.current&&b.getState().userSelectionRect&&M?.(F),b.setState({userSelectionActive:!1,userSelectionRect:null}),R.current&&(c?.(F),b.setState({nodesSelectionActive:O.current.size>0})))},L=n===!0||Array.isArray(n)&&n.includes(0);return s.jsxs("div",{className:Or(["react-flow__pane",{draggable:L,dragging:_,selection:e}]),onClick:k?void 0:IS(M,A),onContextMenu:IS(D,A),onWheel:IS(z,A),onPointerEnter:k?void 0:h,onPointerMove:k?K:g,onPointerUp:k?U:void 0,onPointerDownCapture:k?I:void 0,onClickCapture:k?Y:void 0,onPointerLeave:x,ref:A,style:I0,children:[w,s.jsx(g$e,{})]})}function iC({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:i,multiSelectionActive:o,nodeLookup:c,onError:d}=t.getState(),f=c.get(e);if(!f){d?.("012",ci.error012(e));return}t.setState({nodesSelectionActive:!1}),f.selected?(r||f.selected&&o)&&(i({nodes:[f],edges:[]}),requestAnimationFrame(()=>n?.current?.blur())):a([e])}function ZG({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:i,nodeClickDistance:o}){const c=Zt(),[d,f]=y.useState(!1),m=y.useRef();return y.useEffect(()=>{m.current=dLe({getStoreItems:()=>c.getState(),onNodeMouseDown:h=>{iC({id:h,store:c,nodeRef:e})},onDragStart:()=>{f(!0)},onDragStop:()=>{f(!1)}})},[]),y.useEffect(()=>{if(t)m.current?.destroy();else if(e.current)return m.current?.update({noDragClassName:r,handleSelector:n,domNode:e.current,isSelectable:i,nodeId:a,nodeClickDistance:o}),()=>{m.current?.destroy()}},[r,n,t,i,e,a]),d}const v$e=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function JG(){const e=Zt();return y.useCallback(r=>{const{nodeExtent:n,snapToGrid:a,snapGrid:i,nodesDraggable:o,onError:c,updateNodePositions:d,nodeLookup:f,nodeOrigin:m}=e.getState(),h=new Map,g=v$e(o),x=a?i[0]:5,w=a?i[1]:5,b=r.direction.x*x*r.factor,j=r.direction.y*w*r.factor;for(const[,N]of f){if(!g(N))continue;let _={x:N.internals.positionAbsolute.x+b,y:N.internals.positionAbsolute.y+j};a&&(_=Lp(_,i));const{position:S,positionAbsolute:k}=yG({nodeId:N.id,nextPosition:_,nodeLookup:f,nodeExtent:n,nodeOrigin:m,onError:c});N.position=S,N.internals.positionAbsolute=k,h.set(N.id,N)}d(h)},[])}const HA=y.createContext(null),b$e=HA.Provider;HA.Consumer;const eW=()=>y.useContext(HA),w$e=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),j$e=(e,t,r)=>n=>{const{connectionClickStartHandle:a,connectionMode:i,connection:o}=n,{fromHandle:c,toHandle:d,isValid:f}=o,m=d?.nodeId===e&&d?.id===t&&d?.type===r;return{connectingFrom:c?.nodeId===e&&c?.id===t&&c?.type===r,connectingTo:m,clickConnecting:a?.nodeId===e&&a?.id===t&&a?.type===r,isPossibleEndHandle:i===Qd.Strict?c?.type!==r:e!==c?.nodeId||t!==c?.id,connectionInProcess:!!c,clickConnectionInProcess:!!a,valid:m&&f}};function N$e({type:e="source",position:t=Ke.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:i=!0,id:o,onConnect:c,children:d,className:f,onMouseDown:m,onTouchStart:h,...g},x){const w=o||null,b=e==="target",j=Zt(),N=eW(),{connectOnClick:_,noPanClassName:S,rfId:k}=mt(w$e,Yt),{connectingFrom:A,connectingTo:T,clickConnecting:O,isPossibleEndHandle:P,connectionInProcess:R,clickConnectionInProcess:M,valid:D}=mt(j$e(N,w,e),Yt);N||j.getState().onError?.("010",ci.error010());const z=K=>{const{defaultEdgeOptions:U,onConnect:L,hasDefaultEdges:F}=j.getState(),q={...U,...K};if(F){const{edges:Z,setEdges:B}=j.getState();B(QIe(q,Z))}L?.(q),c?.(q)},Y=K=>{if(!N)return;const U=CG(K.nativeEvent);if(a&&(U&&K.button===0||!U)){const L=j.getState();aC.onPointerDown(K.nativeEvent,{handleDomNode:K.currentTarget,autoPanOnConnect:L.autoPanOnConnect,connectionMode:L.connectionMode,connectionRadius:L.connectionRadius,domNode:L.domNode,nodeLookup:L.nodeLookup,lib:L.lib,isTarget:b,handleId:w,nodeId:N,flowId:L.rfId,panBy:L.panBy,cancelConnection:L.cancelConnection,onConnectStart:L.onConnectStart,onConnectEnd:L.onConnectEnd,updateConnection:L.updateConnection,onConnect:z,isValidConnection:r||L.isValidConnection,getTransform:()=>j.getState().transform,getFromHandle:()=>j.getState().connection.fromHandle,autoPanSpeed:L.autoPanSpeed,dragThreshold:L.connectionDragThreshold})}U?m?.(K):h?.(K)},I=K=>{const{onClickConnectStart:U,onClickConnectEnd:L,connectionClickStartHandle:F,connectionMode:q,isValidConnection:Z,lib:B,rfId:V,nodeLookup:ee,connection:ae}=j.getState();if(!N||!F&&!a)return;if(!F){U?.(K.nativeEvent,{nodeId:N,handleId:w,handleType:e}),j.setState({connectionClickStartHandle:{nodeId:N,type:e,id:w}});return}const J=SG(K.target),se=r||Z,{connection:ne,isValid:oe}=aC.isValid(K.nativeEvent,{handle:{nodeId:N,id:w,type:e},connectionMode:q,fromNodeId:F.nodeId,fromHandleId:F.id||null,fromType:F.type,isValidConnection:se,flowId:V,doc:J,lib:B,nodeLookup:ee});oe&&ne&&z(ne);const Q=structuredClone(ae);delete Q.inProgress,Q.toPosition=Q.toHandle?Q.toHandle.position:null,L?.(K,Q),j.setState({connectionClickStartHandle:null})};return s.jsx("div",{"data-handleid":w,"data-nodeid":N,"data-handlepos":t,"data-id":`${k}-${N}-${w}-${e}`,className:Or(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",S,f,{source:!b,target:b,connectable:n,connectablestart:a,connectableend:i,clickconnecting:O,connectingfrom:A,connectingto:T,valid:D,connectionindicator:n&&(!R||P)&&(R||M?i:a)}]),onMouseDown:Y,onTouchStart:Y,onClick:_?I:void 0,ref:x,...g,children:d})}const Jv=y.memo(YG(N$e));function S$e({data:e,isConnectable:t,sourcePosition:r=Ke.Bottom}){return s.jsxs(s.Fragment,{children:[e?.label,s.jsx(Jv,{type:"source",position:r,isConnectable:t})]})}function _$e({data:e,isConnectable:t,targetPosition:r=Ke.Top,sourcePosition:n=Ke.Bottom}){return s.jsxs(s.Fragment,{children:[s.jsx(Jv,{type:"target",position:r,isConnectable:t}),e?.label,s.jsx(Jv,{type:"source",position:n,isConnectable:t})]})}function C$e(){return null}function k$e({data:e,isConnectable:t,targetPosition:r=Ke.Top}){return s.jsxs(s.Fragment,{children:[s.jsx(Jv,{type:"target",position:r,isConnectable:t}),e?.label]})}const eb={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Lz={input:S$e,default:_$e,output:k$e,group:C$e};function E$e(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const A$e=e=>{const{width:t,height:r,x:n,y:a}=Ip(e.nodeLookup,{filter:i=>!!i.selected});return{width:pa(t)?t:null,height:pa(r)?r:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${n}px,${a}px)`}};function T$e({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=Zt(),{width:a,height:i,transformString:o,userSelectionActive:c}=mt(A$e,Yt),d=JG(),f=y.useRef(null);if(y.useEffect(()=>{r||f.current?.focus({preventScroll:!0})},[r]),ZG({nodeRef:f}),c||!a||!i)return null;const m=e?g=>{const x=n.getState().nodes.filter(w=>w.selected);e(g,x)}:void 0,h=g=>{Object.prototype.hasOwnProperty.call(eb,g.key)&&(g.preventDefault(),d({direction:eb[g.key],factor:g.shiftKey?4:1}))};return s.jsx("div",{className:Or(["react-flow__nodesselection","react-flow__container",t]),style:{transform:o},children:s.jsx("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:r?void 0:-1,onKeyDown:r?void 0:h,style:{width:a,height:i}})})}const $z=typeof window<"u"?window:void 0,O$e=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function tW({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:i,onPaneScroll:o,paneClickDistance:c,deleteKeyCode:d,selectionKeyCode:f,selectionOnDrag:m,selectionMode:h,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:w,panActivationKeyCode:b,zoomActivationKeyCode:j,elementsSelectable:N,zoomOnScroll:_,zoomOnPinch:S,panOnScroll:k,panOnScrollSpeed:A,panOnScrollMode:T,zoomOnDoubleClick:O,panOnDrag:P,defaultViewport:R,translateExtent:M,minZoom:D,maxZoom:z,preventScrolling:Y,onSelectionContextMenu:I,noWheelClassName:K,noPanClassName:U,disableKeyboardA11y:L,onViewportChange:F,isControlledViewport:q}){const{nodesSelectionActive:Z,userSelectionActive:B}=mt(O$e,Yt),V=Jh(f,{target:$z}),ee=Jh(b,{target:$z}),ae=ee||P,J=ee||k,se=m&&ae!==!0,ne=V||B||se;return d$e({deleteKeyCode:d,multiSelectionKeyCode:w}),s.jsx(h$e,{onPaneContextMenu:i,elementsSelectable:N,zoomOnScroll:_,zoomOnPinch:S,panOnScroll:J,panOnScrollSpeed:A,panOnScrollMode:T,zoomOnDoubleClick:O,panOnDrag:!V&&ae,defaultViewport:R,translateExtent:M,minZoom:D,maxZoom:z,zoomActivationKeyCode:j,preventScrolling:Y,noWheelClassName:K,noPanClassName:U,onViewportChange:F,isControlledViewport:q,paneClickDistance:c,selectionOnDrag:se,children:s.jsxs(y$e,{onSelectionStart:g,onSelectionEnd:x,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:i,onPaneScroll:o,panOnDrag:ae,isSelecting:!!ne,selectionMode:h,selectionKeyPressed:V,paneClickDistance:c,selectionOnDrag:se,children:[e,Z&&s.jsx(T$e,{onSelectionContextMenu:I,noPanClassName:U,disableKeyboardA11y:L})]})})}tW.displayName="FlowRenderer";const P$e=y.memo(tW),M$e=e=>t=>e?LA(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(r=>r.id):Array.from(t.nodeLookup.keys());function R$e(e){return mt(y.useCallback(M$e(e),[e]),Yt)}const D$e=e=>e.updateNodeInternals;function I$e(){const e=mt(D$e),[t]=y.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(r=>{const n=new Map;r.forEach(a=>{const i=a.target.getAttribute("data-id");n.set(i,{id:i,nodeElement:a.target,force:!0})}),e(n)}));return y.useEffect(()=>()=>{t?.disconnect()},[t]),t}function L$e({node:e,nodeType:t,hasDimensions:r,resizeObserver:n}){const a=Zt(),i=y.useRef(null),o=y.useRef(null),c=y.useRef(e.sourcePosition),d=y.useRef(e.targetPosition),f=y.useRef(t),m=r&&!!e.internals.handleBounds;return y.useEffect(()=>{i.current&&!e.hidden&&(!m||o.current!==i.current)&&(o.current&&n?.unobserve(o.current),n?.observe(i.current),o.current=i.current)},[m,e.hidden]),y.useEffect(()=>()=>{o.current&&(n?.unobserve(o.current),o.current=null)},[]),y.useEffect(()=>{if(i.current){const h=f.current!==t,g=c.current!==e.sourcePosition,x=d.current!==e.targetPosition;(h||g||x)&&(f.current=t,c.current=e.sourcePosition,d.current=e.targetPosition,a.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:i.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),i}function $$e({id:e,onClick:t,onMouseEnter:r,onMouseMove:n,onMouseLeave:a,onContextMenu:i,onDoubleClick:o,nodesDraggable:c,elementsSelectable:d,nodesConnectable:f,nodesFocusable:m,resizeObserver:h,noDragClassName:g,noPanClassName:x,disableKeyboardA11y:w,rfId:b,nodeTypes:j,nodeClickDistance:N,onError:_}){const{node:S,internals:k,isParent:A}=mt(oe=>{const Q=oe.nodeLookup.get(e),pe=oe.parentLookup.has(e);return{node:Q,internals:Q.internals,isParent:pe}},Yt);let T=S.type||"default",O=j?.[T]||Lz[T];O===void 0&&(_?.("003",ci.error003(T)),T="default",O=j?.default||Lz.default);const P=!!(S.draggable||c&&typeof S.draggable>"u"),R=!!(S.selectable||d&&typeof S.selectable>"u"),M=!!(S.connectable||f&&typeof S.connectable>"u"),D=!!(S.focusable||m&&typeof S.focusable>"u"),z=Zt(),Y=jG(S),I=L$e({node:S,nodeType:T,hasDimensions:Y,resizeObserver:h}),K=ZG({nodeRef:I,disabled:S.hidden||!P,noDragClassName:g,handleSelector:S.dragHandle,nodeId:e,isSelectable:R,nodeClickDistance:N}),U=JG();if(S.hidden)return null;const L=jo(S),F=E$e(S),q=R||P||t||r||n||a,Z=r?oe=>r(oe,{...k.userNode}):void 0,B=n?oe=>n(oe,{...k.userNode}):void 0,V=a?oe=>a(oe,{...k.userNode}):void 0,ee=i?oe=>i(oe,{...k.userNode}):void 0,ae=o?oe=>o(oe,{...k.userNode}):void 0,J=oe=>{const{selectNodesOnDrag:Q,nodeDragThreshold:pe}=z.getState();R&&(!Q||!P||pe>0)&&iC({id:e,store:z,nodeRef:I}),t&&t(oe,{...k.userNode})},se=oe=>{if(!(_G(oe.nativeEvent)||w)){if(mG.includes(oe.key)&&R){const Q=oe.key==="Escape";iC({id:e,store:z,unselect:Q,nodeRef:I})}else if(P&&S.selected&&Object.prototype.hasOwnProperty.call(eb,oe.key)){oe.preventDefault();const{ariaLabelConfig:Q}=z.getState();z.setState({ariaLiveMessage:Q["node.a11yDescription.ariaLiveMessage"]({direction:oe.key.replace("Arrow","").toLowerCase(),x:~~k.positionAbsolute.x,y:~~k.positionAbsolute.y})}),U({direction:eb[oe.key],factor:oe.shiftKey?4:1})}}},ne=()=>{if(w||!I.current?.matches(":focus-visible"))return;const{transform:oe,width:Q,height:pe,autoPanOnNodeFocus:he,setCenter:te}=z.getState();if(!he)return;LA(new Map([[e,S]]),{x:0,y:0,width:Q,height:pe},oe,!0).length>0||te(S.position.x+L.width/2,S.position.y+L.height/2,{zoom:oe[2]})};return s.jsx("div",{className:Or(["react-flow__node",`react-flow__node-${T}`,{[x]:P},S.className,{selected:S.selected,selectable:R,parent:A,draggable:P,dragging:K}]),ref:I,style:{zIndex:k.z,transform:`translate(${k.positionAbsolute.x}px,${k.positionAbsolute.y}px)`,pointerEvents:q?"all":"none",visibility:Y?"visible":"hidden",...S.style,...F},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:Z,onMouseMove:B,onMouseLeave:V,onContextMenu:ee,onClick:J,onDoubleClick:ae,onKeyDown:D?se:void 0,tabIndex:D?0:void 0,onFocus:D?ne:void 0,role:S.ariaRole??(D?"group":void 0),"aria-roledescription":"node","aria-describedby":w?void 0:`${VG}-${b}`,"aria-label":S.ariaLabel,...S.domAttributes,children:s.jsx(b$e,{value:e,children:s.jsx(O,{id:e,data:S.data,type:T,positionAbsoluteX:k.positionAbsolute.x,positionAbsoluteY:k.positionAbsolute.y,selected:S.selected??!1,selectable:R,draggable:P,deletable:S.deletable??!0,isConnectable:M,sourcePosition:S.sourcePosition,targetPosition:S.targetPosition,dragging:K,dragHandle:S.dragHandle,zIndex:k.z,parentId:S.parentId,...L})})})}var z$e=y.memo($$e);const U$e=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function rW(e){const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,onError:i}=mt(U$e,Yt),o=R$e(e.onlyRenderVisibleElements),c=I$e();return s.jsx("div",{className:"react-flow__nodes",style:I0,children:o.map(d=>s.jsx(z$e,{id:d,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:c,nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,nodeClickDistance:e.nodeClickDistance,onError:i},d))})}rW.displayName="NodeRenderer";const F$e=y.memo(rW);function B$e(e){return mt(y.useCallback(r=>{if(!e)return r.edges.map(a=>a.id);const n=[];if(r.width&&r.height)for(const a of r.edges){const i=r.nodeLookup.get(a.source),o=r.nodeLookup.get(a.target);i&&o&&HIe({sourceNode:i,targetNode:o,width:r.width,height:r.height,transform:r.transform})&&n.push(a.id)}return n},[e]),Yt)}const q$e=({color:e="none",strokeWidth:t=1})=>{const r={strokeWidth:t,...e&&{stroke:e}};return s.jsx("polyline",{className:"arrow",style:r,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},V$e=({color:e="none",strokeWidth:t=1})=>{const r={strokeWidth:t,...e&&{stroke:e,fill:e}};return s.jsx("polyline",{className:"arrowclosed",style:r,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},zz={[Yv.Arrow]:q$e,[Yv.ArrowClosed]:V$e};function K$e(e){const t=Zt();return y.useMemo(()=>Object.prototype.hasOwnProperty.call(zz,e)?zz[e]:(t.getState().onError?.("009",ci.error009(e)),null),[e])}const H$e=({id:e,type:t,color:r,width:n=12.5,height:a=12.5,markerUnits:i="strokeWidth",strokeWidth:o,orient:c="auto-start-reverse"})=>{const d=K$e(t);return d?s.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:c,refX:"0",refY:"0",children:s.jsx(d,{color:r,strokeWidth:o})}):null},nW=({defaultColor:e,rfId:t})=>{const r=mt(i=>i.edges),n=mt(i=>i.defaultEdgeOptions),a=y.useMemo(()=>eLe(r,{id:t,defaultColor:e,defaultMarkerStart:n?.markerStart,defaultMarkerEnd:n?.markerEnd}),[r,n,t,e]);return a.length?s.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:s.jsx("defs",{children:a.map(i=>s.jsx(H$e,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})}):null};nW.displayName="MarkerDefinitions";var G$e=y.memo(nW);function sW({x:e,y:t,label:r,labelStyle:n,labelShowBg:a=!0,labelBgStyle:i,labelBgPadding:o=[2,4],labelBgBorderRadius:c=2,children:d,className:f,...m}){const[h,g]=y.useState({x:1,y:0,width:0,height:0}),x=Or(["react-flow__edge-textwrapper",f]),w=y.useRef(null);return y.useEffect(()=>{if(w.current){const b=w.current.getBBox();g({x:b.x,y:b.y,width:b.width,height:b.height})}},[r]),r?s.jsxs("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:x,visibility:h.width?"visible":"hidden",...m,children:[a&&s.jsx("rect",{width:h.width+2*o[0],x:-o[0],y:-o[1],height:h.height+2*o[1],className:"react-flow__edge-textbg",style:i,rx:c,ry:c}),s.jsx("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:w,style:n,children:r}),d]}):null}sW.displayName="EdgeText";const W$e=y.memo(sW);function L0({path:e,labelX:t,labelY:r,label:n,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:d,interactionWidth:f=20,...m}){return s.jsxs(s.Fragment,{children:[s.jsx("path",{...m,d:e,fill:"none",className:Or(["react-flow__edge-path",m.className])}),f?s.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}):null,n&&pa(t)&&pa(r)?s.jsx(W$e,{x:t,y:r,label:n,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:d}):null]})}function Uz({pos:e,x1:t,y1:r,x2:n,y2:a}){return e===Ke.Left||e===Ke.Right?[.5*(t+n),r]:[t,.5*(r+a)]}function aW({sourceX:e,sourceY:t,sourcePosition:r=Ke.Bottom,targetX:n,targetY:a,targetPosition:i=Ke.Top}){const[o,c]=Uz({pos:r,x1:e,y1:t,x2:n,y2:a}),[d,f]=Uz({pos:i,x1:n,y1:a,x2:e,y2:t}),[m,h,g,x]=kG({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:o,sourceControlY:c,targetControlX:d,targetControlY:f});return[`M${e},${t} C${o},${c} ${d},${f} ${n},${a}`,m,h,g,x]}function iW(e){return y.memo(({id:t,sourceX:r,sourceY:n,targetX:a,targetY:i,sourcePosition:o,targetPosition:c,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:x,style:w,markerEnd:b,markerStart:j,interactionWidth:N})=>{const[_,S,k]=aW({sourceX:r,sourceY:n,sourcePosition:o,targetX:a,targetY:i,targetPosition:c}),A=e.isInternal?void 0:t;return s.jsx(L0,{id:A,path:_,labelX:S,labelY:k,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:x,style:w,markerEnd:b,markerStart:j,interactionWidth:N})})}const Q$e=iW({isInternal:!1}),oW=iW({isInternal:!0});Q$e.displayName="SimpleBezierEdge";oW.displayName="SimpleBezierEdgeInternal";function lW(e){return y.memo(({id:t,sourceX:r,sourceY:n,targetX:a,targetY:i,label:o,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:h,style:g,sourcePosition:x=Ke.Bottom,targetPosition:w=Ke.Top,markerEnd:b,markerStart:j,pathOptions:N,interactionWidth:_})=>{const[S,k,A]=rC({sourceX:r,sourceY:n,sourcePosition:x,targetX:a,targetY:i,targetPosition:w,borderRadius:N?.borderRadius,offset:N?.offset,stepPosition:N?.stepPosition}),T=e.isInternal?void 0:t;return s.jsx(L0,{id:T,path:S,labelX:k,labelY:A,label:o,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:h,style:g,markerEnd:b,markerStart:j,interactionWidth:_})})}const cW=lW({isInternal:!1}),uW=lW({isInternal:!0});cW.displayName="SmoothStepEdge";uW.displayName="SmoothStepEdgeInternal";function dW(e){return y.memo(({id:t,...r})=>{const n=e.isInternal?void 0:t;return s.jsx(cW,{...r,id:n,pathOptions:y.useMemo(()=>({borderRadius:0,offset:r.pathOptions?.offset}),[r.pathOptions?.offset])})})}const Y$e=dW({isInternal:!1}),fW=dW({isInternal:!0});Y$e.displayName="StepEdge";fW.displayName="StepEdgeInternal";function mW(e){return y.memo(({id:t,sourceX:r,sourceY:n,targetX:a,targetY:i,label:o,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:h,style:g,markerEnd:x,markerStart:w,interactionWidth:b})=>{const[j,N,_]=TG({sourceX:r,sourceY:n,targetX:a,targetY:i}),S=e.isInternal?void 0:t;return s.jsx(L0,{id:S,path:j,labelX:N,labelY:_,label:o,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:h,style:g,markerEnd:x,markerStart:w,interactionWidth:b})})}const X$e=mW({isInternal:!1}),hW=mW({isInternal:!0});X$e.displayName="StraightEdge";hW.displayName="StraightEdgeInternal";function pW(e){return y.memo(({id:t,sourceX:r,sourceY:n,targetX:a,targetY:i,sourcePosition:o=Ke.Bottom,targetPosition:c=Ke.Top,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:x,style:w,markerEnd:b,markerStart:j,pathOptions:N,interactionWidth:_})=>{const[S,k,A]=EG({sourceX:r,sourceY:n,sourcePosition:o,targetX:a,targetY:i,targetPosition:c,curvature:N?.curvature}),T=e.isInternal?void 0:t;return s.jsx(L0,{id:T,path:S,labelX:k,labelY:A,label:d,labelStyle:f,labelShowBg:m,labelBgStyle:h,labelBgPadding:g,labelBgBorderRadius:x,style:w,markerEnd:b,markerStart:j,interactionWidth:_})})}const Z$e=pW({isInternal:!1}),gW=pW({isInternal:!0});Z$e.displayName="BezierEdge";gW.displayName="BezierEdgeInternal";const Fz={default:gW,straight:hW,step:fW,smoothstep:uW,simplebezier:oW},Bz={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},J$e=(e,t,r)=>r===Ke.Left?e-t:r===Ke.Right?e+t:e,eze=(e,t,r)=>r===Ke.Top?e-t:r===Ke.Bottom?e+t:e,qz="react-flow__edgeupdater";function Vz({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:i,onMouseOut:o,type:c}){return s.jsx("circle",{onMouseDown:a,onMouseEnter:i,onMouseOut:o,className:Or([qz,`${qz}-${c}`]),cx:J$e(t,n,e),cy:eze(r,n,e),r:n,stroke:"transparent",fill:"transparent"})}function tze({isReconnectable:e,reconnectRadius:t,edge:r,sourceX:n,sourceY:a,targetX:i,targetY:o,sourcePosition:c,targetPosition:d,onReconnect:f,onReconnectStart:m,onReconnectEnd:h,setReconnecting:g,setUpdateHover:x}){const w=Zt(),b=(k,A)=>{if(k.button!==0)return;const{autoPanOnConnect:T,domNode:O,isValidConnection:P,connectionMode:R,connectionRadius:M,lib:D,onConnectStart:z,onConnectEnd:Y,cancelConnection:I,nodeLookup:K,rfId:U,panBy:L,updateConnection:F}=w.getState(),q=A.type==="target",Z=(ee,ae)=>{g(!1),h?.(ee,r,A.type,ae)},B=ee=>f?.(r,ee),V=(ee,ae)=>{g(!0),m?.(k,r,A.type),z?.(ee,ae)};aC.onPointerDown(k.nativeEvent,{autoPanOnConnect:T,connectionMode:R,connectionRadius:M,domNode:O,handleId:A.id,nodeId:A.nodeId,nodeLookup:K,isTarget:q,edgeUpdaterType:A.type,lib:D,flowId:U,cancelConnection:I,panBy:L,isValidConnection:P,onConnect:B,onConnectStart:V,onConnectEnd:Y,onReconnectEnd:Z,updateConnection:F,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,dragThreshold:w.getState().connectionDragThreshold,handleDomNode:k.currentTarget})},j=k=>b(k,{nodeId:r.target,id:r.targetHandle??null,type:"target"}),N=k=>b(k,{nodeId:r.source,id:r.sourceHandle??null,type:"source"}),_=()=>x(!0),S=()=>x(!1);return s.jsxs(s.Fragment,{children:[(e===!0||e==="source")&&s.jsx(Vz,{position:c,centerX:n,centerY:a,radius:t,onMouseDown:j,onMouseEnter:_,onMouseOut:S,type:"source"}),(e===!0||e==="target")&&s.jsx(Vz,{position:d,centerX:i,centerY:o,radius:t,onMouseDown:N,onMouseEnter:_,onMouseOut:S,type:"target"})]})}function rze({id:e,edgesFocusable:t,edgesReconnectable:r,elementsSelectable:n,onClick:a,onDoubleClick:i,onContextMenu:o,onMouseEnter:c,onMouseMove:d,onMouseLeave:f,reconnectRadius:m,onReconnect:h,onReconnectStart:g,onReconnectEnd:x,rfId:w,edgeTypes:b,noPanClassName:j,onError:N,disableKeyboardA11y:_}){let S=mt(te=>te.edgeLookup.get(e));const k=mt(te=>te.defaultEdgeOptions);S=k?{...k,...S}:S;let A=S.type||"default",T=b?.[A]||Fz[A];T===void 0&&(N?.("011",ci.error011(A)),A="default",T=b?.default||Fz.default);const O=!!(S.focusable||t&&typeof S.focusable>"u"),P=typeof h<"u"&&(S.reconnectable||r&&typeof S.reconnectable>"u"),R=!!(S.selectable||n&&typeof S.selectable>"u"),M=y.useRef(null),[D,z]=y.useState(!1),[Y,I]=y.useState(!1),K=Zt(),{zIndex:U,sourceX:L,sourceY:F,targetX:q,targetY:Z,sourcePosition:B,targetPosition:V}=mt(y.useCallback(te=>{const we=te.nodeLookup.get(S.source),ke=te.nodeLookup.get(S.target);if(!we||!ke)return{zIndex:S.zIndex,...Bz};const Ve=JIe({id:e,sourceNode:we,targetNode:ke,sourceHandle:S.sourceHandle||null,targetHandle:S.targetHandle||null,connectionMode:te.connectionMode,onError:N});return{zIndex:KIe({selected:S.selected,zIndex:S.zIndex,sourceNode:we,targetNode:ke,elevateOnSelect:te.elevateEdgesOnSelect,zIndexMode:te.zIndexMode}),...Ve||Bz}},[S.source,S.target,S.sourceHandle,S.targetHandle,S.selected,S.zIndex]),Yt),ee=y.useMemo(()=>S.markerStart?`url('#${nC(S.markerStart,w)}')`:void 0,[S.markerStart,w]),ae=y.useMemo(()=>S.markerEnd?`url('#${nC(S.markerEnd,w)}')`:void 0,[S.markerEnd,w]);if(S.hidden||L===null||F===null||q===null||Z===null)return null;const J=te=>{const{addSelectedEdges:we,unselectNodesAndEdges:ke,multiSelectionActive:Ve}=K.getState();R&&(K.setState({nodesSelectionActive:!1}),S.selected&&Ve?(ke({nodes:[],edges:[S]}),M.current?.blur()):we([e])),a&&a(te,S)},se=i?te=>{i(te,{...S})}:void 0,ne=o?te=>{o(te,{...S})}:void 0,oe=c?te=>{c(te,{...S})}:void 0,Q=d?te=>{d(te,{...S})}:void 0,pe=f?te=>{f(te,{...S})}:void 0,he=te=>{if(!_&&mG.includes(te.key)&&R){const{unselectNodesAndEdges:we,addSelectedEdges:ke}=K.getState();te.key==="Escape"?(M.current?.blur(),we({edges:[S]})):ke([e])}};return s.jsx("svg",{style:{zIndex:U},children:s.jsxs("g",{className:Or(["react-flow__edge",`react-flow__edge-${A}`,S.className,j,{selected:S.selected,animated:S.animated,inactive:!R&&!a,updating:D,selectable:R}]),onClick:J,onDoubleClick:se,onContextMenu:ne,onMouseEnter:oe,onMouseMove:Q,onMouseLeave:pe,onKeyDown:O?he:void 0,tabIndex:O?0:void 0,role:S.ariaRole??(O?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":S.ariaLabel===null?void 0:S.ariaLabel||`Edge from ${S.source} to ${S.target}`,"aria-describedby":O?`${KG}-${w}`:void 0,ref:M,...S.domAttributes,children:[!Y&&s.jsx(T,{id:e,source:S.source,target:S.target,type:S.type,selected:S.selected,animated:S.animated,selectable:R,deletable:S.deletable??!0,label:S.label,labelStyle:S.labelStyle,labelShowBg:S.labelShowBg,labelBgStyle:S.labelBgStyle,labelBgPadding:S.labelBgPadding,labelBgBorderRadius:S.labelBgBorderRadius,sourceX:L,sourceY:F,targetX:q,targetY:Z,sourcePosition:B,targetPosition:V,data:S.data,style:S.style,sourceHandleId:S.sourceHandle,targetHandleId:S.targetHandle,markerStart:ee,markerEnd:ae,pathOptions:"pathOptions"in S?S.pathOptions:void 0,interactionWidth:S.interactionWidth}),P&&s.jsx(tze,{edge:S,isReconnectable:P,reconnectRadius:m,onReconnect:h,onReconnectStart:g,onReconnectEnd:x,sourceX:L,sourceY:F,targetX:q,targetY:Z,sourcePosition:B,targetPosition:V,setUpdateHover:z,setReconnecting:I})]})})}var nze=y.memo(rze);const sze=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function xW({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:r,edgeTypes:n,noPanClassName:a,onReconnect:i,onEdgeContextMenu:o,onEdgeMouseEnter:c,onEdgeMouseMove:d,onEdgeMouseLeave:f,onEdgeClick:m,reconnectRadius:h,onEdgeDoubleClick:g,onReconnectStart:x,onReconnectEnd:w,disableKeyboardA11y:b}){const{edgesFocusable:j,edgesReconnectable:N,elementsSelectable:_,onError:S}=mt(sze,Yt),k=B$e(t);return s.jsxs("div",{className:"react-flow__edges",children:[s.jsx(G$e,{defaultColor:e,rfId:r}),k.map(A=>s.jsx(nze,{id:A,edgesFocusable:j,edgesReconnectable:N,elementsSelectable:_,noPanClassName:a,onReconnect:i,onContextMenu:o,onMouseEnter:c,onMouseMove:d,onMouseLeave:f,onClick:m,reconnectRadius:h,onDoubleClick:g,onReconnectStart:x,onReconnectEnd:w,rfId:r,onError:S,edgeTypes:n,disableKeyboardA11y:b},A))]})}xW.displayName="EdgeRenderer";const aze=y.memo(xW),ize=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function oze({children:e}){const t=mt(ize);return s.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function lze(e){const t=KA(),r=y.useRef(!1);y.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const cze=e=>e.panZoom?.syncViewport;function uze(e){const t=mt(cze),r=Zt();return y.useEffect(()=>{e&&(t?.(e),r.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function dze(e){return e.connection.inProgress?{...e.connection,to:$p(e.connection.to,e.transform)}:{...e.connection}}function fze(e){return dze}function mze(e){const t=fze();return mt(t,Yt)}const hze=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function pze({containerStyle:e,style:t,type:r,component:n}){const{nodesConnectable:a,width:i,height:o,isValid:c,inProgress:d}=mt(hze,Yt);return!(i&&a&&d)?null:s.jsx("svg",{style:e,width:i,height:o,className:"react-flow__connectionline react-flow__container",children:s.jsx("g",{className:Or(["react-flow__connection",gG(c)]),children:s.jsx(yW,{style:t,type:r,CustomComponent:n,isValid:c})})})}const yW=({style:e,type:t=ul.Bezier,CustomComponent:r,isValid:n})=>{const{inProgress:a,from:i,fromNode:o,fromHandle:c,fromPosition:d,to:f,toNode:m,toHandle:h,toPosition:g,pointer:x}=mze();if(!a)return;if(r)return s.jsx(r,{connectionLineType:t,connectionLineStyle:e,fromNode:o,fromHandle:c,fromX:i.x,fromY:i.y,toX:f.x,toY:f.y,fromPosition:d,toPosition:g,connectionStatus:gG(n),toNode:m,toHandle:h,pointer:x});let w="";const b={sourceX:i.x,sourceY:i.y,sourcePosition:d,targetX:f.x,targetY:f.y,targetPosition:g};switch(t){case ul.Bezier:[w]=EG(b);break;case ul.SimpleBezier:[w]=aW(b);break;case ul.Step:[w]=rC({...b,borderRadius:0});break;case ul.SmoothStep:[w]=rC(b);break;default:[w]=TG(b)}return s.jsx("path",{d:w,fill:"none",className:"react-flow__connection-path",style:e})};yW.displayName="ConnectionLine";const gze={};function Kz(e=gze){y.useRef(e),Zt(),y.useEffect(()=>{},[e])}function xze(){Zt(),y.useRef(!1),y.useEffect(()=>{},[])}function vW({nodeTypes:e,edgeTypes:t,onInit:r,onNodeClick:n,onEdgeClick:a,onNodeDoubleClick:i,onEdgeDoubleClick:o,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:m,onSelectionContextMenu:h,onSelectionStart:g,onSelectionEnd:x,connectionLineType:w,connectionLineStyle:b,connectionLineComponent:j,connectionLineContainerStyle:N,selectionKeyCode:_,selectionOnDrag:S,selectionMode:k,multiSelectionKeyCode:A,panActivationKeyCode:T,zoomActivationKeyCode:O,deleteKeyCode:P,onlyRenderVisibleElements:R,elementsSelectable:M,defaultViewport:D,translateExtent:z,minZoom:Y,maxZoom:I,preventScrolling:K,defaultMarkerColor:U,zoomOnScroll:L,zoomOnPinch:F,panOnScroll:q,panOnScrollSpeed:Z,panOnScrollMode:B,zoomOnDoubleClick:V,panOnDrag:ee,onPaneClick:ae,onPaneMouseEnter:J,onPaneMouseMove:se,onPaneMouseLeave:ne,onPaneScroll:oe,onPaneContextMenu:Q,paneClickDistance:pe,nodeClickDistance:he,onEdgeContextMenu:te,onEdgeMouseEnter:we,onEdgeMouseMove:ke,onEdgeMouseLeave:Ve,reconnectRadius:Be,onReconnect:rt,onReconnectStart:Pr,onReconnectEnd:hr,noDragClassName:pn,noWheelClassName:Dn,noPanClassName:Ns,disableKeyboardA11y:Ss,nodeExtent:nr,rfId:_s,viewport:ge,onViewportChange:Fe}){return Kz(e),Kz(t),xze(),lze(r),uze(ge),s.jsx(P$e,{onPaneClick:ae,onPaneMouseEnter:J,onPaneMouseMove:se,onPaneMouseLeave:ne,onPaneContextMenu:Q,onPaneScroll:oe,paneClickDistance:pe,deleteKeyCode:P,selectionKeyCode:_,selectionOnDrag:S,selectionMode:k,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:A,panActivationKeyCode:T,zoomActivationKeyCode:O,elementsSelectable:M,zoomOnScroll:L,zoomOnPinch:F,zoomOnDoubleClick:V,panOnScroll:q,panOnScrollSpeed:Z,panOnScrollMode:B,panOnDrag:ee,defaultViewport:D,translateExtent:z,minZoom:Y,maxZoom:I,onSelectionContextMenu:h,preventScrolling:K,noDragClassName:pn,noWheelClassName:Dn,noPanClassName:Ns,disableKeyboardA11y:Ss,onViewportChange:Fe,isControlledViewport:!!ge,children:s.jsxs(oze,{children:[s.jsx(aze,{edgeTypes:t,onEdgeClick:a,onEdgeDoubleClick:o,onReconnect:rt,onReconnectStart:Pr,onReconnectEnd:hr,onlyRenderVisibleElements:R,onEdgeContextMenu:te,onEdgeMouseEnter:we,onEdgeMouseMove:ke,onEdgeMouseLeave:Ve,reconnectRadius:Be,defaultMarkerColor:U,noPanClassName:Ns,disableKeyboardA11y:Ss,rfId:_s}),s.jsx(pze,{style:b,type:w,component:j,containerStyle:N}),s.jsx("div",{className:"react-flow__edgelabel-renderer"}),s.jsx(F$e,{nodeTypes:e,onNodeClick:n,onNodeDoubleClick:i,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:m,nodeClickDistance:he,onlyRenderVisibleElements:R,noPanClassName:Ns,noDragClassName:pn,disableKeyboardA11y:Ss,nodeExtent:nr,rfId:_s}),s.jsx("div",{className:"react-flow__viewport-portal"})]})})}vW.displayName="GraphView";const yze=y.memo(vW),Hz=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,width:a,height:i,fitView:o,fitViewOptions:c,minZoom:d=.5,maxZoom:f=2,nodeOrigin:m,nodeExtent:h,zIndexMode:g="basic"}={})=>{const x=new Map,w=new Map,b=new Map,j=new Map,N=n??t??[],_=r??e??[],S=m??[0,0],k=h??Qh;MG(b,j,N);const A=sC(_,x,w,{nodeOrigin:S,nodeExtent:k,zIndexMode:g});let T=[0,0,1];if(o&&a&&i){const O=Ip(x,{filter:D=>!!((D.width||D.initialWidth)&&(D.height||D.initialHeight))}),{x:P,y:R,zoom:M}=$A(O,a,i,d,f,c?.padding??.1);T=[P,R,M]}return{rfId:"1",width:a??0,height:i??0,transform:T,nodes:_,nodesInitialized:A,nodeLookup:x,parentLookup:w,edges:N,edgeLookup:j,connectionLookup:b,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:r!==void 0,hasDefaultEdges:n!==void 0,panZoom:null,minZoom:d,maxZoom:f,translateExtent:Qh,nodeExtent:k,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Qd.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:S,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:o??!1,fitViewOptions:c,fitViewResolver:null,connection:{...pG},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:zIe,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:hG,zIndexMode:g,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},vze=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,width:a,height:i,fitView:o,fitViewOptions:c,minZoom:d,maxZoom:f,nodeOrigin:m,nodeExtent:h,zIndexMode:g})=>LLe((x,w)=>{async function b(){const{nodeLookup:j,panZoom:N,fitViewOptions:_,fitViewResolver:S,width:k,height:A,minZoom:T,maxZoom:O}=w();N&&(await LIe({nodes:j,width:k,height:A,panZoom:N,minZoom:T,maxZoom:O},_),S?.resolve(!0),x({fitViewResolver:null}))}return{...Hz({nodes:e,edges:t,width:a,height:i,fitView:o,fitViewOptions:c,minZoom:d,maxZoom:f,nodeOrigin:m,nodeExtent:h,defaultNodes:r,defaultEdges:n,zIndexMode:g}),setNodes:j=>{const{nodeLookup:N,parentLookup:_,nodeOrigin:S,elevateNodesOnSelect:k,fitViewQueued:A,zIndexMode:T}=w(),O=sC(j,N,_,{nodeOrigin:S,nodeExtent:h,elevateNodesOnSelect:k,checkEquality:!0,zIndexMode:T});A&&O?(b(),x({nodes:j,nodesInitialized:O,fitViewQueued:!1,fitViewOptions:void 0})):x({nodes:j,nodesInitialized:O})},setEdges:j=>{const{connectionLookup:N,edgeLookup:_}=w();MG(N,_,j),x({edges:j})},setDefaultNodesAndEdges:(j,N)=>{if(j){const{setNodes:_}=w();_(j),x({hasDefaultNodes:!0})}if(N){const{setEdges:_}=w();_(N),x({hasDefaultEdges:!0})}},updateNodeInternals:j=>{const{triggerNodeChanges:N,nodeLookup:_,parentLookup:S,domNode:k,nodeOrigin:A,nodeExtent:T,debug:O,fitViewQueued:P,zIndexMode:R}=w(),{changes:M,updatedInternals:D}=oLe(j,_,S,k,A,T,R);D&&(nLe(_,S,{nodeOrigin:A,nodeExtent:T,zIndexMode:R}),P?(b(),x({fitViewQueued:!1,fitViewOptions:void 0})):x({}),M?.length>0&&(O&&console.log("React Flow: trigger node changes",M),N?.(M)))},updateNodePositions:(j,N=!1)=>{const _=[];let S=[];const{nodeLookup:k,triggerNodeChanges:A,connection:T,updateConnection:O,onNodesChangeMiddlewareMap:P}=w();for(const[R,M]of j){const D=k.get(R),z=!!(D?.expandParent&&D?.parentId&&M?.position),Y={id:R,type:"position",position:z?{x:Math.max(0,M.position.x),y:Math.max(0,M.position.y)}:M.position,dragging:N};if(D&&T.inProgress&&T.fromNode.id===D.id){const I=Yc(D,T.fromHandle,Ke.Left,!0);O({...T,from:I})}z&&D.parentId&&_.push({id:R,parentId:D.parentId,rect:{...M.internals.positionAbsolute,width:M.measured.width??0,height:M.measured.height??0}}),S.push(Y)}if(_.length>0){const{parentLookup:R,nodeOrigin:M}=w(),D=VA(_,k,R,M);S.push(...D)}for(const R of P.values())S=R(S);A(S)},triggerNodeChanges:j=>{const{onNodesChange:N,setNodes:_,nodes:S,hasDefaultNodes:k,debug:A}=w();if(j?.length){if(k){const T=WG(j,S);_(T)}A&&console.log("React Flow: trigger node changes",j),N?.(j)}},triggerEdgeChanges:j=>{const{onEdgesChange:N,setEdges:_,edges:S,hasDefaultEdges:k,debug:A}=w();if(j?.length){if(k){const T=QG(j,S);_(T)}A&&console.log("React Flow: trigger edge changes",j),N?.(j)}},addSelectedNodes:j=>{const{multiSelectionActive:N,edgeLookup:_,nodeLookup:S,triggerNodeChanges:k,triggerEdgeChanges:A}=w();if(N){const T=j.map(O=>pc(O,!0));k(T);return}k(kd(S,new Set([...j]),!0)),A(kd(_))},addSelectedEdges:j=>{const{multiSelectionActive:N,edgeLookup:_,nodeLookup:S,triggerNodeChanges:k,triggerEdgeChanges:A}=w();if(N){const T=j.map(O=>pc(O,!0));A(T);return}A(kd(_,new Set([...j]))),k(kd(S,new Set,!0))},unselectNodesAndEdges:({nodes:j,edges:N}={})=>{const{edges:_,nodes:S,nodeLookup:k,triggerNodeChanges:A,triggerEdgeChanges:T}=w(),O=j||S,P=N||_,R=O.map(D=>{const z=k.get(D.id);return z&&(z.selected=!1),pc(D.id,!1)}),M=P.map(D=>pc(D.id,!1));A(R),T(M)},setMinZoom:j=>{const{panZoom:N,maxZoom:_}=w();N?.setScaleExtent([j,_]),x({minZoom:j})},setMaxZoom:j=>{const{panZoom:N,minZoom:_}=w();N?.setScaleExtent([_,j]),x({maxZoom:j})},setTranslateExtent:j=>{w().panZoom?.setTranslateExtent(j),x({translateExtent:j})},resetSelectedElements:()=>{const{edges:j,nodes:N,triggerNodeChanges:_,triggerEdgeChanges:S,elementsSelectable:k}=w();if(!k)return;const A=N.reduce((O,P)=>P.selected?[...O,pc(P.id,!1)]:O,[]),T=j.reduce((O,P)=>P.selected?[...O,pc(P.id,!1)]:O,[]);_(A),S(T)},setNodeExtent:j=>{const{nodes:N,nodeLookup:_,parentLookup:S,nodeOrigin:k,elevateNodesOnSelect:A,nodeExtent:T,zIndexMode:O}=w();j[0][0]===T[0][0]&&j[0][1]===T[0][1]&&j[1][0]===T[1][0]&&j[1][1]===T[1][1]||(sC(N,_,S,{nodeOrigin:k,nodeExtent:j,elevateNodesOnSelect:A,checkEquality:!1,zIndexMode:O}),x({nodeExtent:j}))},panBy:j=>{const{transform:N,width:_,height:S,panZoom:k,translateExtent:A}=w();return lLe({delta:j,panZoom:k,transform:N,translateExtent:A,width:_,height:S})},setCenter:async(j,N,_)=>{const{width:S,height:k,maxZoom:A,panZoom:T}=w();if(!T)return Promise.resolve(!1);const O=typeof _?.zoom<"u"?_.zoom:A;return await T.setViewport({x:S/2-j*O,y:k/2-N*O,zoom:O},{duration:_?.duration,ease:_?.ease,interpolate:_?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{x({connection:{...pG}})},updateConnection:j=>{x({connection:j})},reset:()=>x({...Hz()})}},Object.is);function bze({initialNodes:e,initialEdges:t,defaultNodes:r,defaultEdges:n,initialWidth:a,initialHeight:i,initialMinZoom:o,initialMaxZoom:c,initialFitViewOptions:d,fitView:f,nodeOrigin:m,nodeExtent:h,zIndexMode:g,children:x}){const[w]=y.useState(()=>vze({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,width:a,height:i,fitView:f,minZoom:o,maxZoom:c,fitViewOptions:d,nodeOrigin:m,nodeExtent:h,zIndexMode:g}));return s.jsx($Le,{value:w,children:s.jsx(o$e,{children:x})})}function wze({children:e,nodes:t,edges:r,defaultNodes:n,defaultEdges:a,width:i,height:o,fitView:c,fitViewOptions:d,minZoom:f,maxZoom:m,nodeOrigin:h,nodeExtent:g,zIndexMode:x}){return y.useContext(R0)?s.jsx(s.Fragment,{children:e}):s.jsx(bze,{initialNodes:t,initialEdges:r,defaultNodes:n,defaultEdges:a,initialWidth:i,initialHeight:o,fitView:c,initialFitViewOptions:d,initialMinZoom:f,initialMaxZoom:m,nodeOrigin:h,nodeExtent:g,zIndexMode:x,children:e})}const jze={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Nze({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:i,edgeTypes:o,onNodeClick:c,onEdgeClick:d,onInit:f,onMove:m,onMoveStart:h,onMoveEnd:g,onConnect:x,onConnectStart:w,onConnectEnd:b,onClickConnectStart:j,onClickConnectEnd:N,onNodeMouseEnter:_,onNodeMouseMove:S,onNodeMouseLeave:k,onNodeContextMenu:A,onNodeDoubleClick:T,onNodeDragStart:O,onNodeDrag:P,onNodeDragStop:R,onNodesDelete:M,onEdgesDelete:D,onDelete:z,onSelectionChange:Y,onSelectionDragStart:I,onSelectionDrag:K,onSelectionDragStop:U,onSelectionContextMenu:L,onSelectionStart:F,onSelectionEnd:q,onBeforeDelete:Z,connectionMode:B,connectionLineType:V=ul.Bezier,connectionLineStyle:ee,connectionLineComponent:ae,connectionLineContainerStyle:J,deleteKeyCode:se="Backspace",selectionKeyCode:ne="Shift",selectionOnDrag:oe=!1,selectionMode:Q=Yh.Full,panActivationKeyCode:pe="Space",multiSelectionKeyCode:he=Zh()?"Meta":"Control",zoomActivationKeyCode:te=Zh()?"Meta":"Control",snapToGrid:we,snapGrid:ke,onlyRenderVisibleElements:Ve=!1,selectNodesOnDrag:Be,nodesDraggable:rt,autoPanOnNodeFocus:Pr,nodesConnectable:hr,nodesFocusable:pn,nodeOrigin:Dn=HG,edgesFocusable:Ns,edgesReconnectable:Ss,elementsSelectable:nr=!0,defaultViewport:_s=XLe,minZoom:ge=.5,maxZoom:Fe=2,translateExtent:nt=Qh,preventScrolling:it=!0,nodeExtent:_n,defaultMarkerColor:Ra="#b1b1b7",zoomOnScroll:_e=!0,zoomOnPinch:pt=!0,panOnScroll:Je=!1,panOnScrollSpeed:wr=.5,panOnScrollMode:sr=Pc.Free,zoomOnDoubleClick:So=!0,panOnDrag:_o=!0,onPaneClick:G0,onPaneMouseEnter:lu,onPaneMouseMove:cu,onPaneMouseLeave:uu,onPaneScroll:hi,onPaneContextMenu:du,paneClickDistance:Il=1,nodeClickDistance:W0=0,children:Up,onReconnect:Of,onReconnectStart:Ll,onReconnectEnd:Q0,onEdgeContextMenu:Fp,onEdgeDoubleClick:Bp,onEdgeMouseEnter:qp,onEdgeMouseMove:Pf,onEdgeMouseLeave:Mf,reconnectRadius:Vp=10,onNodesChange:Kp,onEdgesChange:Da,noDragClassName:Mr="nodrag",noWheelClassName:gn="nowheel",noPanClassName:pi="nopan",fitView:fu,fitViewOptions:Hp,connectOnClick:Y0,attributionPosition:Gp,proOptions:$l,defaultEdgeOptions:Rf,elevateNodesOnSelect:Co=!0,elevateEdgesOnSelect:ko=!1,disableKeyboardA11y:Eo=!1,autoPanOnConnect:Ao,autoPanOnNodeDrag:jr,autoPanSpeed:Wp,connectionRadius:Qp,isValidConnection:gi,onError:To,style:X0,id:Df,nodeDragThreshold:Yp,connectionDragThreshold:Z0,viewport:mu,onViewportChange:hu,width:Js,height:In,colorMode:Xp="light",debug:J0,onScroll:pu,ariaLabelConfig:Zp,zIndexMode:zl="basic",...ew},Ln){const Ul=Df||"1",Jp=t$e(Xp),If=y.useCallback(xi=>{xi.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),pu?.(xi)},[pu]);return s.jsx("div",{"data-testid":"rf__wrapper",...ew,onScroll:If,style:{...X0,...jze},ref:Ln,className:Or(["react-flow",a,Jp]),id:Df,role:"application",children:s.jsxs(wze,{nodes:e,edges:t,width:Js,height:In,fitView:fu,fitViewOptions:Hp,minZoom:ge,maxZoom:Fe,nodeOrigin:Dn,nodeExtent:_n,zIndexMode:zl,children:[s.jsx(yze,{onInit:f,onNodeClick:c,onEdgeClick:d,onNodeMouseEnter:_,onNodeMouseMove:S,onNodeMouseLeave:k,onNodeContextMenu:A,onNodeDoubleClick:T,nodeTypes:i,edgeTypes:o,connectionLineType:V,connectionLineStyle:ee,connectionLineComponent:ae,connectionLineContainerStyle:J,selectionKeyCode:ne,selectionOnDrag:oe,selectionMode:Q,deleteKeyCode:se,multiSelectionKeyCode:he,panActivationKeyCode:pe,zoomActivationKeyCode:te,onlyRenderVisibleElements:Ve,defaultViewport:_s,translateExtent:nt,minZoom:ge,maxZoom:Fe,preventScrolling:it,zoomOnScroll:_e,zoomOnPinch:pt,zoomOnDoubleClick:So,panOnScroll:Je,panOnScrollSpeed:wr,panOnScrollMode:sr,panOnDrag:_o,onPaneClick:G0,onPaneMouseEnter:lu,onPaneMouseMove:cu,onPaneMouseLeave:uu,onPaneScroll:hi,onPaneContextMenu:du,paneClickDistance:Il,nodeClickDistance:W0,onSelectionContextMenu:L,onSelectionStart:F,onSelectionEnd:q,onReconnect:Of,onReconnectStart:Ll,onReconnectEnd:Q0,onEdgeContextMenu:Fp,onEdgeDoubleClick:Bp,onEdgeMouseEnter:qp,onEdgeMouseMove:Pf,onEdgeMouseLeave:Mf,reconnectRadius:Vp,defaultMarkerColor:Ra,noDragClassName:Mr,noWheelClassName:gn,noPanClassName:pi,rfId:Ul,disableKeyboardA11y:Eo,nodeExtent:_n,viewport:mu,onViewportChange:hu}),s.jsx(e$e,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:x,onConnectStart:w,onConnectEnd:b,onClickConnectStart:j,onClickConnectEnd:N,nodesDraggable:rt,autoPanOnNodeFocus:Pr,nodesConnectable:hr,nodesFocusable:pn,edgesFocusable:Ns,edgesReconnectable:Ss,elementsSelectable:nr,elevateNodesOnSelect:Co,elevateEdgesOnSelect:ko,minZoom:ge,maxZoom:Fe,nodeExtent:_n,onNodesChange:Kp,onEdgesChange:Da,snapToGrid:we,snapGrid:ke,connectionMode:B,translateExtent:nt,connectOnClick:Y0,defaultEdgeOptions:Rf,fitView:fu,fitViewOptions:Hp,onNodesDelete:M,onEdgesDelete:D,onDelete:z,onNodeDragStart:O,onNodeDrag:P,onNodeDragStop:R,onSelectionDrag:K,onSelectionDragStart:I,onSelectionDragStop:U,onMove:m,onMoveStart:h,onMoveEnd:g,noPanClassName:pi,nodeOrigin:Dn,rfId:Ul,autoPanOnConnect:Ao,autoPanOnNodeDrag:jr,autoPanSpeed:Wp,onError:To,connectionRadius:Qp,isValidConnection:gi,selectNodesOnDrag:Be,nodeDragThreshold:Yp,connectionDragThreshold:Z0,onBeforeDelete:Z,debug:J0,ariaLabelConfig:Zp,zIndexMode:zl}),s.jsx(YLe,{onSelectionChange:Y}),Up,s.jsx(KLe,{proOptions:$l,position:Gp}),s.jsx(VLe,{rfId:Ul,disableKeyboardA11y:Eo})]})})}var Sze=YG(Nze);function _ze(e){const[t,r]=y.useState(e),n=y.useCallback(a=>r(i=>WG(a,i)),[]);return[t,r,n]}function Cze(e){const[t,r]=y.useState(e),n=y.useCallback(a=>r(i=>QG(a,i)),[]);return[t,r,n]}function kze({dimensions:e,lineWidth:t,variant:r,className:n}){return s.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Or(["react-flow__background-pattern",r,n])})}function Eze({radius:e,className:t}){return s.jsx("circle",{cx:e,cy:e,r:e,className:Or(["react-flow__background-pattern","dots",t])})}var xl;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(xl||(xl={}));const Aze={[xl.Dots]:1,[xl.Lines]:1,[xl.Cross]:6},Tze=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function bW({id:e,variant:t=xl.Dots,gap:r=20,size:n,lineWidth:a=1,offset:i=0,color:o,bgColor:c,style:d,className:f,patternClassName:m}){const h=y.useRef(null),{transform:g,patternId:x}=mt(Tze,Yt),w=n||Aze[t],b=t===xl.Dots,j=t===xl.Cross,N=Array.isArray(r)?r:[r,r],_=[N[0]*g[2]||1,N[1]*g[2]||1],S=w*g[2],k=Array.isArray(i)?i:[i,i],A=j?[S,S]:_,T=[k[0]*g[2]||1+A[0]/2,k[1]*g[2]||1+A[1]/2],O=`${x}${e||""}`;return s.jsxs("svg",{className:Or(["react-flow__background",f]),style:{...d,...I0,"--xy-background-color-props":c,"--xy-background-pattern-color-props":o},ref:h,"data-testid":"rf__background",children:[s.jsx("pattern",{id:O,x:g[0]%_[0],y:g[1]%_[1],width:_[0],height:_[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${T[0]},-${T[1]})`,children:b?s.jsx(Eze,{radius:S/2,className:m}):s.jsx(kze,{dimensions:A,lineWidth:a,variant:t,className:m})}),s.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${O})`})]})}bW.displayName="Background";const Oze=y.memo(bW);function Pze(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:s.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Mze(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:s.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Rze(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:s.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Dze(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:s.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Ize(){return s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:s.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function ey({children:e,className:t,...r}){return s.jsx("button",{type:"button",className:Or(["react-flow__controls-button",t]),...r,children:e})}const Lze=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function wW({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:i,onZoomOut:o,onFitView:c,onInteractiveChange:d,className:f,children:m,position:h="bottom-left",orientation:g="vertical","aria-label":x}){const w=Zt(),{isInteractive:b,minZoomReached:j,maxZoomReached:N,ariaLabelConfig:_}=mt(Lze,Yt),{zoomIn:S,zoomOut:k,fitView:A}=KA(),T=()=>{S(),i?.()},O=()=>{k(),o?.()},P=()=>{A(a),c?.()},R=()=>{w.setState({nodesDraggable:!b,nodesConnectable:!b,elementsSelectable:!b}),d?.(!b)},M=g==="horizontal"?"horizontal":"vertical";return s.jsxs(D0,{className:Or(["react-flow__controls",M,f]),position:h,style:e,"data-testid":"rf__controls","aria-label":x??_["controls.ariaLabel"],children:[t&&s.jsxs(s.Fragment,{children:[s.jsx(ey,{onClick:T,className:"react-flow__controls-zoomin",title:_["controls.zoomIn.ariaLabel"],"aria-label":_["controls.zoomIn.ariaLabel"],disabled:N,children:s.jsx(Pze,{})}),s.jsx(ey,{onClick:O,className:"react-flow__controls-zoomout",title:_["controls.zoomOut.ariaLabel"],"aria-label":_["controls.zoomOut.ariaLabel"],disabled:j,children:s.jsx(Mze,{})})]}),r&&s.jsx(ey,{className:"react-flow__controls-fitview",onClick:P,title:_["controls.fitView.ariaLabel"],"aria-label":_["controls.fitView.ariaLabel"],children:s.jsx(Rze,{})}),n&&s.jsx(ey,{className:"react-flow__controls-interactive",onClick:R,title:_["controls.interactive.ariaLabel"],"aria-label":_["controls.interactive.ariaLabel"],children:b?s.jsx(Ize,{}):s.jsx(Dze,{})}),m]})}wW.displayName="Controls";const $ze=y.memo(wW);function zze({id:e,x:t,y:r,width:n,height:a,style:i,color:o,strokeColor:c,strokeWidth:d,className:f,borderRadius:m,shapeRendering:h,selected:g,onClick:x}){const{background:w,backgroundColor:b}=i||{},j=o||w||b;return s.jsx("rect",{className:Or(["react-flow__minimap-node",{selected:g},f]),x:t,y:r,rx:m,ry:m,width:n,height:a,style:{fill:j,stroke:c,strokeWidth:d},shapeRendering:h,onClick:x?N=>x(N,e):void 0})}const Uze=y.memo(zze),Fze=e=>e.nodes.map(t=>t.id),LS=e=>e instanceof Function?e:()=>e;function Bze({nodeStrokeColor:e,nodeColor:t,nodeClassName:r="",nodeBorderRadius:n=5,nodeStrokeWidth:a,nodeComponent:i=Uze,onClick:o}){const c=mt(Fze,Yt),d=LS(t),f=LS(e),m=LS(r),h=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return s.jsx(s.Fragment,{children:c.map(g=>s.jsx(Vze,{id:g,nodeColorFunc:d,nodeStrokeColorFunc:f,nodeClassNameFunc:m,nodeBorderRadius:n,nodeStrokeWidth:a,NodeComponent:i,onClick:o,shapeRendering:h},g))})}function qze({id:e,nodeColorFunc:t,nodeStrokeColorFunc:r,nodeClassNameFunc:n,nodeBorderRadius:a,nodeStrokeWidth:i,shapeRendering:o,NodeComponent:c,onClick:d}){const{node:f,x:m,y:h,width:g,height:x}=mt(w=>{const{internals:b}=w.nodeLookup.get(e),j=b.userNode,{x:N,y:_}=b.positionAbsolute,{width:S,height:k}=jo(j);return{node:j,x:N,y:_,width:S,height:k}},Yt);return!f||f.hidden||!jG(f)?null:s.jsx(c,{x:m,y:h,width:g,height:x,style:f.style,selected:!!f.selected,className:n(f),color:t(f),borderRadius:a,strokeColor:r(f),strokeWidth:i,shapeRendering:o,onClick:d,id:f.id})}const Vze=y.memo(qze);var Kze=y.memo(Bze);const Hze=200,Gze=150,Wze=e=>!e.hidden,Qze=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?wG(Ip(e.nodeLookup,{filter:Wze}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},Yze="react-flow__minimap-desc";function jW({style:e,className:t,nodeStrokeColor:r,nodeColor:n,nodeClassName:a="",nodeBorderRadius:i=5,nodeStrokeWidth:o,nodeComponent:c,bgColor:d,maskColor:f,maskStrokeColor:m,maskStrokeWidth:h,position:g="bottom-right",onClick:x,onNodeClick:w,pannable:b=!1,zoomable:j=!1,ariaLabel:N,inversePan:_,zoomStep:S=1,offsetScale:k=5}){const A=Zt(),T=y.useRef(null),{boundingRect:O,viewBB:P,rfId:R,panZoom:M,translateExtent:D,flowWidth:z,flowHeight:Y,ariaLabelConfig:I}=mt(Qze,Yt),K=e?.width??Hze,U=e?.height??Gze,L=O.width/K,F=O.height/U,q=Math.max(L,F),Z=q*K,B=q*U,V=k*q,ee=O.x-(Z-O.width)/2-V,ae=O.y-(B-O.height)/2-V,J=Z+V*2,se=B+V*2,ne=`${Yze}-${R}`,oe=y.useRef(0),Q=y.useRef();oe.current=q,y.useEffect(()=>{if(T.current&&M)return Q.current=xLe({domNode:T.current,panZoom:M,getTransform:()=>A.getState().transform,getViewScale:()=>oe.current}),()=>{Q.current?.destroy()}},[M]),y.useEffect(()=>{Q.current?.update({translateExtent:D,width:z,height:Y,inversePan:_,pannable:b,zoomStep:S,zoomable:j})},[b,j,_,S,D,z,Y]);const pe=x?we=>{const[ke,Ve]=Q.current?.pointer(we)||[0,0];x(we,{x:ke,y:Ve})}:void 0,he=w?y.useCallback((we,ke)=>{const Ve=A.getState().nodeLookup.get(ke).internals.userNode;w(we,Ve)},[]):void 0,te=N??I["minimap.ariaLabel"];return s.jsx(D0,{position:g,style:{...e,"--xy-minimap-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-color-props":typeof m=="string"?m:void 0,"--xy-minimap-mask-stroke-width-props":typeof h=="number"?h*q:void 0,"--xy-minimap-node-background-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="number"?o:void 0},className:Or(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:s.jsxs("svg",{width:K,height:U,viewBox:`${ee} ${ae} ${J} ${se}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ne,ref:T,onClick:pe,children:[te&&s.jsx("title",{id:ne,children:te}),s.jsx(Kze,{onClick:he,nodeColor:n,nodeStrokeColor:r,nodeBorderRadius:i,nodeClassName:a,nodeStrokeWidth:o,nodeComponent:c}),s.jsx("path",{className:"react-flow__minimap-mask",d:`M${ee-V},${ae-V}h${J+V*2}v${se+V*2}h${-J-V*2}z
        M${P.x},${P.y}h${P.width}v${P.height}h${-P.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}jW.displayName="MiniMap";const Xze=y.memo(jW),Zze=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,Jze={[Jd.Line]:"right",[Jd.Handle]:"bottom-right"};function e6e({nodeId:e,position:t,variant:r=Jd.Handle,className:n,style:a=void 0,children:i,color:o,minWidth:c=10,minHeight:d=10,maxWidth:f=Number.MAX_VALUE,maxHeight:m=Number.MAX_VALUE,keepAspectRatio:h=!1,resizeDirection:g,autoScale:x=!0,shouldResize:w,onResizeStart:b,onResize:j,onResizeEnd:N}){const _=eW(),S=typeof e=="string"?e:_,k=Zt(),A=y.useRef(null),T=r===Jd.Handle,O=mt(y.useCallback(Zze(T&&x),[T,x]),Yt),P=y.useRef(null),R=t??Jze[r];y.useEffect(()=>{if(!(!A.current||!S))return P.current||(P.current=OLe({domNode:A.current,nodeId:S,getStoreItems:()=>{const{nodeLookup:D,transform:z,snapGrid:Y,snapToGrid:I,nodeOrigin:K,domNode:U}=k.getState();return{nodeLookup:D,transform:z,snapGrid:Y,snapToGrid:I,nodeOrigin:K,paneDomNode:U}},onChange:(D,z)=>{const{triggerNodeChanges:Y,nodeLookup:I,parentLookup:K,nodeOrigin:U}=k.getState(),L=[],F={x:D.x,y:D.y},q=I.get(S);if(q&&q.expandParent&&q.parentId){const Z=q.origin??U,B=D.width??q.measured.width??0,V=D.height??q.measured.height??0,ee={id:q.id,parentId:q.parentId,rect:{width:B,height:V,...NG({x:D.x??q.position.x,y:D.y??q.position.y},{width:B,height:V},q.parentId,I,Z)}},ae=VA([ee],I,K,U);L.push(...ae),F.x=D.x?Math.max(Z[0]*B,D.x):void 0,F.y=D.y?Math.max(Z[1]*V,D.y):void 0}if(F.x!==void 0&&F.y!==void 0){const Z={id:S,type:"position",position:{...F}};L.push(Z)}if(D.width!==void 0&&D.height!==void 0){const B={id:S,type:"dimensions",resizing:!0,setAttributes:g?g==="horizontal"?"width":"height":!0,dimensions:{width:D.width,height:D.height}};L.push(B)}for(const Z of z){const B={...Z,type:"position"};L.push(B)}Y(L)},onEnd:({width:D,height:z})=>{const Y={id:S,type:"dimensions",resizing:!1,dimensions:{width:D,height:z}};k.getState().triggerNodeChanges([Y])}})),P.current.update({controlPosition:R,boundaries:{minWidth:c,minHeight:d,maxWidth:f,maxHeight:m},keepAspectRatio:h,resizeDirection:g,onResizeStart:b,onResize:j,onResizeEnd:N,shouldResize:w}),()=>{P.current?.destroy()}},[R,c,d,f,m,h,b,j,N,w]);const M=R.split("-");return s.jsx("div",{className:Or(["react-flow__resize-control","nodrag",...M,r,n]),ref:A,style:{...a,scale:O,...o&&{[T?"backgroundColor":"borderColor"]:o}},children:i})}y.memo(e6e);const t6e={toggles:{Project:!0,Person:!0,Team:!0,Sprint:!0,Risk:!0,Document:!0,Action:!0,Fact:!0,Decision:!0,Question:!0,Email:!1,Contact:!1},searchQuery:"",minTier:2,showSemantic:!1,layout:"concentric"},NW=y.createContext(void 0);function r6e({children:e}){const[t,r]=y.useState(t6e),[n,a]=y.useState(null),[i,o]=y.useState(null),c=d=>{r(f=>({...f,toggles:{...f.toggles,[d]:!f.toggles[d]}}))};return s.jsx(NW.Provider,{value:{filters:t,setFilters:r,selectedNodeId:n,setSelectedNodeId:a,hoveredNodeId:i,setHoveredNodeId:o,toggleType:c},children:e})}function SW(){const e=y.useContext(NW);if(e===void 0)throw new Error("useGraphState must be used within a GraphProvider");return e}const _W=y.createContext(void 0),n6e=({children:e})=>{const t=Ee(),[r,n]=y.useState([]),[a,i]=y.useState(()=>localStorage.getItem("godmode_current_project")||localStorage.getItem("godmode-project-id")||"default"),[o,c]=y.useState(!0),d=g=>{d2(g==="default"?null:g);try{localStorage.setItem("godmode_current_project",g),localStorage.setItem("godmode-project-id",g)}catch{}},f=async()=>{try{c(!0);const g=await X.get("/api/projects");let x=[];if(g&&g.projects?x=g.projects:console.warn("No projects found or API error"),n(x),a!=="default"){if(!x.find(b=>b.id===a)&&x.length>0){const b=x.find(j=>j.isDefault)||x[0];i(b.id),d(b.id)}}else if(x.length>0){const w=x.find(b=>b.isDefault)||x[0];i(w.id),d(w.id)}}catch(g){console.error("Failed to fetch projects:",g)}finally{c(!1)}};y.useEffect(()=>{f()},[]),y.useEffect(()=>{d(a)},[a]);const m=g=>{const x=a;i(g),d(g),g!==x&&(t.removeQueries({predicate:w=>w.queryKey[0]!=="projects"}),G.success("Project switched"))},h=r.find(g=>g.id===a)||null;return s.jsx(_W.Provider,{value:{projects:r,currentProject:h,currentProjectId:a,isLoading:o,setCurrentProject:m,refreshProjects:f},children:e})},zp=()=>{const e=y.useContext(_W);if(e===void 0)throw new Error("useProject must be used within a ProjectProvider");return e},ch={getSyncStatus:async e=>{const t=await X.get("/api/graphrag/sync-status",{params:{project_id:e}});return t.status||t},triggerSync:async e=>X.post("/api/graphrag/sync",{project_id:e}),triggerResync:async e=>X.post("/api/graphrag/resync",{project_id:e}),getNodes:async(e,t)=>{let r=Vn.from("graph_nodes").select("*").eq("project_id",e);t&&t.length>0&&(r=r.in("label",t));const{data:n,error:a}=await r;if(a)throw a;return(n||[]).map(i=>({id:i.id,label:i.label,data:{...i.properties,label:i.properties.name||i.properties.title||i.label,type:i.label,project_id:i.project_id},position:{x:0,y:0}}))},getEdges:async e=>{const{data:t,error:r}=await Vn.from("graph_relationships").select("*").eq("project_id",e);if(r)throw r;return(t||[]).map(n=>({id:n.id,source:n.from_id,target:n.to_id,label:n.type,data:n.properties}))},getSemanticNeighbors:async(e,t,r=.78,n=10)=>{const{data:a,error:i}=await Vn.rpc("find_semantic_neighbors",{p_entity_id:e,p_project_id:t,p_threshold:r,p_limit:n});if(i)throw i;return a||[]}};function s6e(e){const{currentProjectId:t}=zp();return Ce({queryKey:["graph","nodes",t,e],queryFn:async()=>t?await ch.getNodes(t,e):[],enabled:!!t,staleTime:300*1e3,placeholderData:mJ})}function a6e(){const{currentProjectId:e}=zp();return Ce({queryKey:["graph","edges",e],queryFn:async()=>e?await ch.getEdges(e):[],enabled:!!e,staleTime:300*1e3})}const i6e={Project:0,Person:1,Team:1,Sprint:1,Document:1,Email:1,CalendarEvent:1,Contact:1,Risk:2,Action:2,Fact:2,Decision:2,Question:2,UserStory:2},Gz={Project:{w:280,h:120},Document:{w:220,h:90},Person:{w:200,h:80},Contact:{w:200,h:85},Team:{w:220,h:85},Sprint:{w:200,h:65},Email:{w:220,h:80},CalendarEvent:{w:210,h:80},Fact:{w:200,h:80},Decision:{w:200,h:80},Risk:{w:210,h:95},Action:{w:220,h:90},Question:{w:200,h:75},UserStory:{w:210,h:80},default:{w:200,h:80}},Wz={BELONGS_TO_PROJECT:{stroke:"#cbd5e1",width:1,opacity:0,dash:"5 5"},EXTRACTED_FROM:{stroke:"#f59e0b",width:2,opacity:.8},IMPLEMENTS:{stroke:"#3b82f6",width:2,opacity:.9},DEPENDS_ON:{stroke:"#3b82f6",width:2,opacity:.9},ASSIGNED_TO:{stroke:"#10b981",width:1.5,opacity:.7},OWNED_BY:{stroke:"#10b981",width:1.5,opacity:.7},AUTHORED_BY:{stroke:"#10b981",width:1.5,opacity:.7},MEMBER_OF_TEAM:{stroke:"#a855f7",width:1.5,opacity:.7},WORKS_WITH:{stroke:"#4ade80",width:1,opacity:.4},SIMILAR_TO:{stroke:"#facc15",width:1,opacity:.5,dash:"4 4"},MENTIONS:{stroke:"#f59e0b",width:1.5,opacity:.8},INVOLVES:{stroke:"#06b6d4",width:1.5,opacity:.8},LINKED_TO:{stroke:"#a855f7",width:1.5,opacity:.7},DERIVED_FROM:{stroke:"#94a3b8",width:1.5,opacity:.7},default:{stroke:"#64748b",width:1,opacity:.5}},o6e=new Set(["WORKS_WITH","BELONGS_TO_PROJECT"]);function l6e(e,t){const r=new Map,n=new Set,a=new Map,i=m=>m?.trim().toLowerCase()||"";e.forEach(m=>{if(m.label==="Contact"){const h=m.id;m.data.linked_person_id&&(n.add(m.data.linked_person_id),r.set(m.data.linked_person_id,h)),m.data.name&&a.set(i(m.data.name),h),m.data.label&&a.set(i(m.data.label),h),Array.isArray(m.data.aliases)&&m.data.aliases.forEach(g=>{g&&a.set(i(g),h)})}});const o=[],c=new Set;e.forEach(m=>{if(m.label==="Person"){let w=!1,b="";if(n.has(m.id))w=!0,b=r.get(m.data.linked_person_id||m.id);else{const j=i(m.data.label||m.data.name);a.has(j)&&(w=!0,b=a.get(j),r.set(m.id,b))}if(w){c.add(m.id);return}}const h=m.label||"default",g=i6e[h]??2,x=Gz[h]??Gz.default;o.push({...m,width:x.w,height:x.h,data:{...m.data,tier:g,label:m.data.label||m.label,_display:{width:x.w,height:x.h,colorToken:c6e(h)}}})});const d=[],f={};return t.forEach(m=>{if(o6e.has(m.label||""))return;let h=m.source,g=m.target;if(r.has(h)&&(h=r.get(h)),r.has(g)&&(g=r.get(g)),h===g)return;const x=Wz[m.label||""]||Wz.default,w={...m,id:m.id||`${h}-${g}-${m.label}`,source:h,target:g,type:"default",style:{stroke:x.stroke,strokeWidth:x.width,opacity:x.opacity,strokeDasharray:x.dash},animated:m.label==="SIMILAR_TO"||m.label==="DEPENDS_ON"||m.label==="INVOLVES",data:{...m.data,originalLabel:m.label},label:void 0};if(m.label==="WORKS_WITH"){const b=[h,g].sort().join("__");f[b]||(f[b]=[]),f[b].push(w)}else d.push(w)}),Object.entries(f).forEach(([m,h])=>{if(h.length>0){const g={...h[0]};if(h.length>1){g.label=`${h.length}`;const x=g.style?.strokeWidth||1,w=Math.min(h.length*.2,3);g.style={...g.style,strokeWidth:x+w,opacity:.6}}d.push(g)}}),{nodes:o,edges:d}}function c6e(e){switch(e){case"Project":return"blue";case"Person":return"green";case"Contact":return"teal";case"Team":return"purple";case"Sprint":return"indigo";case"Document":return"amber";case"Risk":return"red";case"Action":return"emerald";case"Fact":return"sky";case"Decision":return"orange";case"Question":return"violet";case"UserStory":return"pink";case"Email":return"slate";case"CalendarEvent":return"cyan";default:return"slate"}}function u6e(){const{filters:e}=SW(),t=y.useMemo(()=>Object.entries(e.toggles).filter(([m,h])=>h).map(([m])=>m),[e.toggles]),{data:r,isLoading:n,error:a}=s6e(t),{data:i,isLoading:o,error:c}=a6e(),{nodes:d,edges:f}=y.useMemo(()=>{if(!r||!i)return{nodes:[],edges:[]};const{nodes:m,edges:h}=l6e(r,i),g=m.map((N,_)=>N.data.tier===0?_:-1).filter(N=>N!==-1);let x=m;if(g.length>1){const N=new Set(g.slice(1));x=m.filter((_,S)=>!N.has(S))}const w=x.filter(N=>{if(e.toggles[N.label]===!1||(N.data.tier??2)>e.minTier)return!1;if(e.searchQuery){const _=e.searchQuery.toLowerCase(),S=N.data.label?.toLowerCase()||"",k=N.label.toLowerCase();if(!S.includes(_)&&!k.includes(_))return!1}return!0}),b=new Set(w.map(N=>N.id)),j=h.filter(N=>!(!b.has(N.source)||!b.has(N.target)||!e.showSemantic&&N.label==="SIMILAR_TO"));return{nodes:w,edges:j}},[r,i,e]);return{nodes:d,edges:f,isLoading:n||o,error:a||c}}function d6e(e,t,r={center:{x:0,y:0},tier1Radius:300,tier2Radius:600}){return{nodes:y.useMemo(()=>{if(!e||e.length===0)return[];const a=e.filter(g=>(g.data.tier??2)===0),i=e.filter(g=>(g.data.tier??2)===1),o=e.filter(g=>(g.data.tier??2)===2),c=Math.max(i.length*100,1e3),d=Math.max(r.tier1Radius,c/(2*Math.PI)),f=Math.max(o.length*50,2e3),m=Math.max(r.tier2Radius,d+250,f/(2*Math.PI)),h=a[0];if(h&&(h.position={...r.center}),i.length>0){const g=2*Math.PI/i.length;i.forEach((x,w)=>{const b=w*g;x.position={x:r.center.x+d*Math.cos(b),y:r.center.y+d*Math.sin(b)}})}if(o.length>0){const g=2*Math.PI/o.length;o.forEach((x,w)=>{const b=w*g;x.position={x:r.center.x+m*Math.cos(b),y:r.center.y+m*Math.sin(b)}})}return[...a,...i,...o]},[e,r.center.x,r.center.y,r.tier1Radius,r.tier2Radius]),edges:t}}function f6e(){const{currentProjectId:e}=zp(),t=Ee(),r=Ce({queryKey:["graph","sync","status",e],queryFn:async()=>{if(!e)return null;const i=await ch.getSyncStatus(e);return{...i,is_connected:!!i?.last_synced_at,node_count:i?.node_count||0,edge_count:i?.edge_count||0,pending_count:i?.pending_count||0}},enabled:!!e,refetchInterval:i=>i?.sync_status==="syncing"?2e3:3e4}),n=je({mutationFn:async()=>{if(!e)throw new Error("No project selected");return await ch.triggerSync(e)},onSuccess:()=>{t.invalidateQueries({queryKey:["graph","sync","status"]}),t.invalidateQueries({queryKey:["graph","nodes"]}),t.invalidateQueries({queryKey:["graph","edges"]}),G.success("Graph sync started")},onError:i=>{G.error(`Sync failed: ${i.message}`)}}),a=je({mutationFn:async()=>{if(!e)throw new Error("No project selected");return await ch.triggerResync(e)},onSuccess:()=>{t.invalidateQueries({queryKey:["graph","sync","status"]}),t.invalidateQueries({queryKey:["graph","nodes"]}),t.invalidateQueries({queryKey:["graph","edges"]}),G.success("Full graph resync started")},onError:i=>{G.error(`Resync failed: ${i.message}`)}});return{status:r.data,isLoadingStatus:r.isLoading,isSyncing:r.data?.sync_status==="syncing"||n.isPending||a.isPending,sync:n.mutate,resync:a.mutate,error:r.error||n.error||a.error}}const qm={Project:"#6366f1",Person:"#ec4899",Team:"#8b5cf6",Document:"#06b6d4",Fact:"#f59e0b",Decision:"#a855f7",Risk:"#ef4444",Action:"#22c55e",Question:"#3b82f6",Email:"#f97316",Contact:"#ec4899",Sprint:"#14b8a6"};function m6e(){const{filters:e,setFilters:t,toggleType:r,selectedNodeId:n,setSelectedNodeId:a}=SW(),{nodes:i,edges:o,isLoading:c,error:d}=u6e(),{nodes:f,edges:m}=d6e(i,o),{sync:h,isSyncing:g,status:x}=f6e(),[w,b]=y.useState(!1),j=y.useMemo(()=>f.map(M=>({id:M.id,position:M.position||{x:0,y:0},data:{label:M.data?.label||M.id,type:M.label||M.data?.type||"unknown",tier:M.data?.tier??2},type:"default",style:{background:qm[M.label||""]||"#64748b",color:"#fff",border:n===M.id?"3px solid #fff":"1px solid rgba(255,255,255,0.2)",borderRadius:M.data?.tier===0?"50%":"12px",padding:M.data?.tier===0?"16px":"8px 12px",fontSize:M.data?.tier===0?"14px":M.data?.tier===1?"12px":"10px",fontWeight:M.data?.tier===0?"700":"500",width:M.data?.tier===0?"80px":"auto",height:M.data?.tier===0?"80px":"auto",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:n===M.id?"0 0 20px rgba(99,102,241,0.5)":"0 2px 8px rgba(0,0,0,0.3)"}})),[f,n]),N=y.useMemo(()=>m.map(M=>({id:M.id,source:M.source,target:M.target,label:M.label||void 0,animated:M.animated||!1,style:M.style||{stroke:"rgba(148,163,184,0.4)",strokeWidth:1},type:"default",labelStyle:{fontSize:"8px",fill:"#94a3b8"}})),[m]),[_,S,k]=_ze(j),[A,T,O]=Cze(N);y.useEffect(()=>{S(j)},[j]),y.useEffect(()=>{T(N)},[N]);const P=y.useCallback((M,D)=>{a(n===D.id?null:D.id)},[n,a]),R=i.find(M=>M.id===n);return c?s.jsx("div",{className:"flex items-center justify-center h-[calc(100vh-8rem)]",children:s.jsx(ye,{className:"h-8 w-8 animate-spin text-primary"})}):d?s.jsxs("div",{className:"p-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-foreground mb-4",children:"Knowledge Graph"}),s.jsxs("div",{className:"rounded-xl border border-destructive/30 bg-card p-8 text-center",children:[s.jsx(vr,{className:"h-8 w-8 text-destructive mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Failed to load graph. Try syncing."}),s.jsx("button",{onClick:()=>h(),className:"mt-3 px-3 py-1.5 rounded-lg bg-primary text-primary-foreground text-xs font-medium",children:"Sync Graph"})]})]}):s.jsxs("div",{className:"flex flex-col h-[calc(100vh-4rem)]",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-3 border-b border-border",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h1",{className:"text-lg font-bold text-foreground",children:"Knowledge Graph"}),s.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[i.length," nodes  ",o.length," edges"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(bs,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3 h-3 text-muted-foreground"}),s.jsx("input",{value:e.searchQuery,onChange:M=>t(D=>({...D,searchQuery:M.target.value})),placeholder:"Search nodes...",className:"pl-7 pr-3 py-1 bg-secondary border border-border rounded-lg text-[10px] text-foreground w-40 focus:outline-none focus:ring-1 focus:ring-ring"})]}),s.jsxs("button",{onClick:()=>b(!w),className:H("px-2 py-1 rounded-lg text-[10px] font-medium border flex items-center gap-1",w?"bg-primary/10 border-primary/30 text-primary":"bg-secondary border-border text-muted-foreground"),children:[s.jsx(_C,{className:"w-3 h-3"})," Filters"]}),s.jsxs("button",{onClick:()=>h(),disabled:g,className:"px-2.5 py-1 rounded-lg bg-primary text-primary-foreground text-[10px] font-medium hover:bg-primary/90 flex items-center gap-1 disabled:opacity-50",children:[g?s.jsx(ye,{className:"w-3 h-3 animate-spin"}):s.jsx(Gs,{className:"w-3 h-3"})," Sync"]})]})]}),w&&s.jsx("div",{className:"flex items-center gap-1.5 px-6 py-2 border-b border-border bg-secondary/30 flex-wrap",children:Object.entries(e.toggles).map(([M,D])=>s.jsx("button",{onClick:()=>r(M),className:H("px-2 py-0.5 rounded-md text-[10px] font-medium transition-colors border",D?"border-primary/30 text-foreground":"border-border text-muted-foreground/50 line-through"),style:{backgroundColor:D?`${qm[M]||"#64748b"}20`:void 0},children:M},M))}),s.jsxs("div",{className:"flex-1 flex",children:[s.jsx("div",{className:"flex-1 relative",children:i.length===0?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("div",{className:"text-center",children:[s.jsx(MC,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/40"}),s.jsx("p",{className:"text-muted-foreground",children:"No graph data. Process documents and sync to populate."}),s.jsx("button",{onClick:()=>h(),className:"mt-3 px-3 py-1.5 rounded-lg bg-primary text-primary-foreground text-xs font-medium",children:"Sync Graph"})]})}):s.jsxs(Sze,{nodes:_,edges:A,onNodesChange:k,onEdgesChange:O,onNodeClick:P,fitView:!0,fitViewOptions:{padding:.3},minZoom:.1,maxZoom:3,proOptions:{hideAttribution:!0},style:{background:"hsl(var(--background))"},children:[s.jsx(Oze,{color:"hsl(var(--border))",gap:24,size:1}),s.jsx($ze,{showInteractive:!1}),s.jsx(Xze,{nodeColor:M=>qm[M.data?.type]||"#64748b"})]})}),R&&s.jsxs("div",{className:"w-72 border-l border-border bg-card p-4 overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-sm font-semibold text-foreground truncate",children:R.data?.label||R.id}),s.jsx("button",{onClick:()=>a(null),className:"p-1 rounded hover:bg-secondary",children:s.jsx(mn,{className:"w-3.5 h-3.5 text-muted-foreground"})})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-[10px] font-medium text-muted-foreground uppercase tracking-wider",children:"Type"}),s.jsx("p",{className:"text-xs font-medium mt-0.5 px-2 py-0.5 rounded inline-block",style:{backgroundColor:`${qm[R.label||""]||"#64748b"}20`,color:qm[R.label||""]||"#64748b"},children:R.label||R.data?.type||"unknown"})]}),R.data?.tier!==void 0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-[10px] font-medium text-muted-foreground uppercase tracking-wider",children:"Tier"}),s.jsx("p",{className:"text-xs text-foreground mt-0.5",children:R.data.tier})]}),R.data?.metadata&&typeof R.data.metadata=="object"&&s.jsxs("div",{children:[s.jsx("span",{className:"text-[10px] font-medium text-muted-foreground uppercase tracking-wider",children:"Details"}),s.jsx("div",{className:"mt-1 space-y-1",children:Object.entries(R.data.metadata).filter(([M,D])=>D!=null&&D!=="").slice(0,8).map(([M,D])=>s.jsxs("div",{className:"flex items-start gap-2 text-[10px]",children:[s.jsxs("span",{className:"text-muted-foreground capitalize flex-shrink-0",children:[M.replace(/_/g," "),":"]}),s.jsx("span",{className:"text-foreground break-all",children:String(D)})]},M))})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-[10px] font-medium text-muted-foreground uppercase tracking-wider",children:"Connections"}),s.jsx("div",{className:"mt-1 space-y-1",children:o.filter(M=>M.source===n||M.target===n).slice(0,10).map(M=>{const D=M.source===n?M.target:M.source,z=i.find(Y=>Y.id===D);return s.jsxs("button",{onClick:()=>a(D),className:"w-full text-left flex items-center gap-2 text-[10px] px-2 py-1 rounded hover:bg-secondary transition-colors",children:[s.jsx("span",{className:"text-muted-foreground truncate",children:M.label||"related"}),s.jsx("span",{className:"text-foreground truncate",children:z?.data?.label||D})]},M.id)})})]})]})]})]}),x&&s.jsxs("div",{className:"flex items-center gap-3 px-6 py-1.5 border-t border-border text-[10px] text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("div",{className:H("w-1.5 h-1.5 rounded-full",x.health_status==="healthy"?"bg-success":x.health_status==="degraded"?"bg-warning":"bg-destructive")}),x.health_status]}),x.last_synced_at&&s.jsxs("span",{children:["Synced: ",new Date(x.last_synced_at).toLocaleString()]}),s.jsxs("span",{children:[x.node_count," nodes"]}),s.jsxs("span",{children:[x.edge_count," edges"]})]})]})}function h6e(){return s.jsx(r6e,{children:s.jsx(m6e,{})})}const Qz=[{value:"day",label:"Today"},{value:"week",label:"This Week"},{value:"month",label:"This Month"},{value:"all",label:"All Time"}];function p6e(){const[e,t]=y.useState("month"),{data:r,isLoading:n}=Poe(e),a=r?.totalCost??r?.total??0,i=r?.breakdown??r?.models??[],o=()=>{const c={period:e,totalCost:a,breakdown:i,exportedAt:new Date().toISOString()},d=new Blob([JSON.stringify(c,null,2)],{type:"application/json"}),f=URL.createObjectURL(d),m=document.createElement("a");m.href=f,m.download=`godmode-costs-${e}.json`,m.click(),URL.revokeObjectURL(f)};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold",children:"LLM Costs"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("select",{value:e,onChange:c=>t(c.target.value),className:"h-9 rounded-md border bg-transparent px-3 text-sm focus:outline-none focus:ring-2 focus:ring-[hsl(var(--ring))]",children:Qz.map(c=>s.jsx("option",{value:c.value,children:c.label},c.value))}),s.jsxs(Mt,{variant:"secondary",size:"sm",onClick:o,children:[s.jsx(Xi,{className:"h-4 w-4"}),"Export"]})]})]}),n?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-[hsl(var(--muted-foreground))]",children:"Loading costs..."})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"rounded-lg border bg-[hsl(var(--card))] p-6 mb-6",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(jC,{className:"h-8 w-8 text-green-500"}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-3xl font-bold",children:["$",Number(a).toFixed(4)]}),s.jsxs("div",{className:"text-sm text-[hsl(var(--muted-foreground))]",children:["Total Cost (",Qz.find(c=>c.value===e)?.label,")"]})]})]})}),i.length>0?s.jsxs("div",{className:"rounded-lg border bg-[hsl(var(--card))] p-4",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Cost Breakdown by Model"}),s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b text-left text-[hsl(var(--muted-foreground))]",children:[s.jsx("th",{className:"py-2 font-medium",children:"Model"}),s.jsx("th",{className:"py-2 font-medium text-right",children:"Requests"}),s.jsx("th",{className:"py-2 font-medium text-right",children:"Cost"})]})}),s.jsx("tbody",{children:i.map((c,d)=>s.jsxs("tr",{className:H("border-b last:border-0","hover:bg-[hsl(var(--accent))]"),children:[s.jsx("td",{className:"py-2",children:c.model??c.name??"Unknown"}),s.jsx("td",{className:"py-2 text-right font-mono",children:c.requests!=null?c.requests.toLocaleString():"-"}),s.jsxs("td",{className:"py-2 text-right font-mono",children:["$",Number(c.cost??0).toFixed(4)]})]},d))})]})]}):s.jsx("div",{className:"rounded-lg border bg-[hsl(var(--card))] p-8 text-center text-[hsl(var(--muted-foreground))]",children:"No cost data for this period."})]})]})}function g6e(){const{data:e,isLoading:t}=eU(),[r,n]=y.useState(""),[a,i]=y.useState(""),[o,c]=y.useState(null),d=e??[],f=y.useMemo(()=>d.filter(h=>{const g=h;return!(a&&String(g.status||"").toLowerCase()!==a||r&&!JSON.stringify(g).toLowerCase().includes(r.toLowerCase()))}),[d,r,a]),m=()=>{const h=new Blob([JSON.stringify(f,null,2)],{type:"application/json"}),g=URL.createObjectURL(h),x=document.createElement("a");x.href=g,x.download=`history-export-${new Date().toISOString().slice(0,10)}.json`,x.click(),URL.revokeObjectURL(g)};return t?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx(ye,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Processing History"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("span",{className:"text-xs text-muted-foreground self-center",children:[f.length," entries"]}),f.length>0&&s.jsxs("button",{onClick:m,className:"px-3 py-1.5 rounded-lg bg-secondary text-secondary-foreground text-xs font-medium hover:bg-muted flex items-center gap-1.5",children:[s.jsx(Xi,{className:"w-3.5 h-3.5"})," Export JSON"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("div",{className:"relative flex-1 max-w-xs",children:[s.jsx(bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-muted-foreground"}),s.jsx("input",{value:r,onChange:h=>n(h.target.value),placeholder:"Search history...",className:"w-full pl-9 pr-3 py-1.5 bg-secondary border border-border rounded-lg text-xs text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]}),s.jsxs("select",{value:a,onChange:h=>i(h.target.value),className:"bg-secondary border border-border rounded-lg px-3 py-1.5 text-xs text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:[s.jsx("option",{value:"",children:"All statuses"}),s.jsx("option",{value:"processed",children:"Processed"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"processing",children:"Processing"}),s.jsx("option",{value:"pending",children:"Pending"}),s.jsx("option",{value:"failed",children:"Failed"})]})]}),f.length===0?s.jsxs("div",{className:"rounded-xl border border-border bg-card p-8 text-center text-muted-foreground",children:[s.jsx(tr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/40"}),d.length===0?"No processing history yet.":"No matches for your filters."]}):s.jsx("div",{className:"space-y-2",children:f.map((h,g)=>{const x=h,w=String(x.status||"unknown"),b=w==="processed"||w==="completed"?"bg-success/10 text-success":w==="processing"?"bg-primary/10 text-primary":w==="pending"?"bg-warning/10 text-warning":"bg-destructive/10 text-destructive",j=String(x.timestamp||x.changed_at||x.created_at||x.processed_at||""),N=o===g;return s.jsxs("div",{className:"bg-card border border-border rounded-xl overflow-hidden",children:[s.jsxs("div",{className:"p-3.5 flex items-center gap-3 cursor-pointer hover:bg-secondary/30 transition-colors",onClick:()=>c(N?null:g),children:[s.jsx(tr,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:String(x.filename||x.description||x.operation||x.table_name||`Entry #${g+1}`)}),s.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[x.type&&s.jsx("span",{className:"text-[10px] text-muted-foreground capitalize",children:String(x.type)}),x.table_name&&s.jsx("span",{className:"text-[10px] text-muted-foreground capitalize",children:String(x.table_name)}),x.operation&&s.jsx("span",{className:"text-[10px] text-muted-foreground capitalize",children:String(x.operation)})]})]}),s.jsx("span",{className:H("text-[10px] px-2 py-0.5 rounded-full font-medium capitalize",b),children:w}),j&&s.jsx("span",{className:"text-[10px] text-muted-foreground flex-shrink-0",children:new Date(j).toLocaleString()}),s.jsx(un,{className:H("w-3.5 h-3.5 text-muted-foreground transition-transform",N&&"rotate-180")})]}),N&&s.jsx("div",{className:"px-3.5 pb-3.5 border-t border-border pt-3",children:s.jsx("pre",{className:"text-[10px] text-muted-foreground bg-secondary rounded-lg p-3 overflow-x-auto max-h-48",children:JSON.stringify(x,null,2)})})]},g)})})]})}function $0(){const e=Ee(),{data:t,isLoading:r,error:n}=Ce({queryKey:["user"],queryFn:async()=>{try{return(await X.get("/api/profile")).profile}catch(i){return console.error("Error fetching user:",i),null}},retry:1,staleTime:300*1e3}),a=je({mutationFn:async i=>(await X.put("/api/profile",i)).profile,onSuccess:i=>{e.setQueryData(["user"],i)}});return{user:t,isLoading:r,error:n,updateProfile:a,isAuthenticated:!!t}}function x6e(){try{return localStorage.getItem("godmode-theme")||"system"}catch{return"system"}}function y6e(){try{return localStorage.getItem("godmode_current_project")||"default"}catch{return"default"}}function v6e(){const[e,t]=y.useState("profile"),[r,n]=y.useState(x6e),[a,i]=y.useState(!1),{user:o,updateProfile:c}=$0(),d=B8(),f=q8(),m=$8(),h=y6e(),[g,x]=y.useState(""),[w,b]=y.useState(""),[j,N]=y.useState(""),[_,S]=y.useState("");y.useEffect(()=>{o&&(x(o.display_name||""),b(o.timezone||""))},[o]),y.useEffect(()=>{d.data&&(N(d.data.projectName||""),S(d.data.llm?.provider||""))},[d.data]),y.useEffect(()=>{const R=r==="dark"||r==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.classList.toggle("dark",R),localStorage.setItem("godmode-theme",r)},[r]);const k=()=>{c.mutate({display_name:g,timezone:w,theme:r},{onSuccess:()=>G.success("Profile updated")})},A=()=>{f.mutate({projectName:j,llm:{...d.data?.llm,provider:_}},{onSuccess:()=>G.success("Project settings saved")})},T=y.useCallback(()=>{const R=Object.keys(localStorage).filter(M=>M.startsWith("godmode-")&&M!=="godmode-theme"&&M!=="godmode-project-id");R.forEach(M=>localStorage.removeItem(M)),G.success(`Cleared ${R.length} cached items`)},[]),O=y.useCallback(()=>{m.mutate({clearArchived:!0},{onSuccess:()=>{G.success("Project data reset"),i(!1)},onSettled:()=>i(!1)})},[m]),P=[{key:"profile",label:"Profile",icon:fn},{key:"project",label:"Project",icon:$6},{key:"apikeys",label:"API Keys",icon:ph},{key:"webhooks",label:"Webhooks",icon:r8},{key:"data",label:"Data",icon:Ty}];return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx(PC,{className:"h-6 w-6 text-muted-foreground"}),s.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Settings"})]}),s.jsx("div",{className:"flex gap-1 bg-secondary rounded-xl p-1 mb-6 max-w-2xl overflow-x-auto",children:P.map(R=>{const M=R.icon;return s.jsxs("button",{onClick:()=>t(R.key),className:`flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap ${e===R.key?"bg-card text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:[s.jsx(M,{className:"w-3.5 h-3.5"})," ",R.label]},R.key)})}),e==="profile"&&s.jsxs("div",{className:"space-y-6 max-w-lg",children:[s.jsxs("div",{className:"bg-card border border-border rounded-xl p-5 space-y-4",children:[s.jsx("h3",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"User Profile"}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Email"}),s.jsx("p",{className:"text-sm text-foreground mt-1",children:o?.email||""})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Display Name"}),s.jsx("input",{value:g,onChange:R=>x(R.target.value),className:"mt-1 w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"Your name..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Timezone"}),s.jsx("input",{value:w,onChange:R=>b(R.target.value),className:"mt-1 w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"e.g. Europe/Lisbon"})]}),s.jsxs("button",{onClick:k,disabled:c.isPending,className:"px-4 py-2 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90 flex items-center gap-1.5 disabled:opacity-50",children:[c.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Us,{className:"w-3.5 h-3.5"}),"Save Profile"]})]}),s.jsxs("div",{className:"bg-card border border-border rounded-xl p-5 space-y-3",children:[s.jsx("h3",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Appearance"}),s.jsx("div",{className:"flex gap-2",children:[{value:"light",label:"Light",icon:RC},{value:"dark",label:"Dark",icon:Y6},{value:"system",label:"System",icon:AC}].map(R=>{const M=R.icon;return s.jsxs("button",{onClick:()=>n(R.value),className:H("flex items-center gap-2 px-4 py-2 rounded-lg border text-sm transition-colors",r===R.value?"bg-primary/10 border-primary/30 text-foreground font-medium":"border-border hover:bg-secondary text-muted-foreground"),children:[s.jsx(M,{className:"h-4 w-4"})," ",R.label]},R.value)})})]})]}),e==="project"&&s.jsx("div",{className:"space-y-6 max-w-lg",children:s.jsxs("div",{className:"bg-card border border-border rounded-xl p-5 space-y-4",children:[s.jsx("h3",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Project Configuration"}),d.isLoading?s.jsxs("div",{className:"flex items-center gap-2 py-4 text-muted-foreground text-sm",children:[s.jsx(ye,{className:"w-4 h-4 animate-spin"})," Loading config..."]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Project Name"}),s.jsx("input",{value:j,onChange:R=>N(R.target.value),className:"mt-1 w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"My Project"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"LLM Provider"}),s.jsxs("select",{value:_,onChange:R=>S(R.target.value),className:"mt-1 w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:[s.jsx("option",{value:"",children:"Select provider"}),s.jsx("option",{value:"openai",children:"OpenAI"}),s.jsx("option",{value:"anthropic",children:"Anthropic"}),s.jsx("option",{value:"google",children:"Google"}),s.jsx("option",{value:"ollama",children:"Ollama (local)"}),s.jsx("option",{value:"groq",children:"Groq"}),s.jsx("option",{value:"deepseek",children:"DeepSeek"})]})]}),d.data?.llm?.models&&s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Configured Models"}),s.jsx("div",{className:"mt-1 space-y-1",children:Object.entries(d.data.llm.models).map(([R,M])=>s.jsxs("div",{className:"flex items-center justify-between text-xs bg-secondary/50 rounded-lg px-3 py-1.5",children:[s.jsx("span",{className:"text-muted-foreground capitalize",children:R.replace(/_/g," ")}),s.jsx("span",{className:"text-foreground font-medium",children:M})]},R))})]}),s.jsxs("button",{onClick:A,disabled:f.isPending,className:"px-4 py-2 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90 flex items-center gap-1.5 disabled:opacity-50",children:[f.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Us,{className:"w-3.5 h-3.5"}),"Save Project Settings"]})]})]})}),e==="apikeys"&&s.jsx(b6e,{projectId:h}),e==="webhooks"&&s.jsx(w6e,{projectId:h}),e==="data"&&s.jsxs("div",{className:"space-y-6 max-w-lg",children:[s.jsxs("div",{className:"bg-card border border-border rounded-xl p-5 space-y-3",children:[s.jsx("h3",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Local Data"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Clear cached data stored in your browser. This does not affect server data."}),s.jsxs("button",{onClick:T,className:"px-4 py-2 rounded-lg bg-secondary text-secondary-foreground text-sm font-medium hover:bg-muted flex items-center gap-1.5",children:[s.jsx(Ty,{className:"w-3.5 h-3.5"})," Clear Local Cache"]})]}),s.jsxs("div",{className:"bg-card border border-destructive/30 rounded-xl p-5 space-y-3",children:[s.jsx("h3",{className:"text-xs font-medium text-destructive uppercase tracking-wider",children:"Danger Zone"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Reset all project knowledge data. This permanently deletes facts, decisions, questions, risks, and actions."}),a?s.jsxs("div",{className:"bg-destructive/5 border border-destructive/20 rounded-lg p-4 space-y-3",children:[s.jsx("p",{className:"text-sm font-medium text-destructive",children:"Are you sure? This action cannot be undone."}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 rounded-lg bg-secondary text-secondary-foreground text-sm font-medium hover:bg-muted",children:"Cancel"}),s.jsxs("button",{onClick:O,disabled:m.isPending,className:"px-4 py-2 rounded-lg bg-destructive text-destructive-foreground text-sm font-medium hover:bg-destructive/90 flex items-center gap-1.5 disabled:opacity-50",children:[m.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Et,{className:"w-3.5 h-3.5"}),"Confirm Reset"]})]})]}):s.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 rounded-lg bg-destructive text-destructive-foreground text-sm font-medium hover:bg-destructive/90 flex items-center gap-1.5",children:[s.jsx(Et,{className:"w-3.5 h-3.5"})," Reset Project Data"]})]})]})]})}function b6e({projectId:e}){const t=Moe(e),r=Roe(),n=Doe(),[a,i]=y.useState(!1),[o,c]=y.useState(""),[d,f]=y.useState("90"),[m,h]=y.useState(null),g=t.data?.keys??[],x=()=>{o.trim()&&r.mutate({projectId:e,name:o.trim(),expires_in_days:Number(d)||void 0},{onSuccess:j=>{h(j.raw_key||null),c(""),i(!1),G.success("API key created")},onError:()=>G.error("Failed to create API key")})},w=j=>{n.mutate(j,{onSuccess:()=>G.success("API key revoked"),onError:()=>G.error("Failed to revoke key")})},b=j=>{navigator.clipboard.writeText(j),G.success("Copied to clipboard")};return s.jsxs("div",{className:"space-y-4 max-w-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"API Keys"}),s.jsxs("button",{onClick:()=>i(!a),className:"px-3 py-1.5 rounded-lg bg-primary text-primary-foreground text-xs font-medium hover:bg-primary/90 flex items-center gap-1.5",children:[s.jsx(br,{className:"w-3.5 h-3.5"})," Create Key"]})]}),m&&s.jsxs("div",{className:"bg-warning/10 border border-warning/30 rounded-xl p-4 space-y-2",children:[s.jsx("p",{className:"text-xs font-medium text-warning",children:"Copy your new API key now  it won't be shown again."}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("code",{className:"flex-1 bg-secondary rounded-lg px-3 py-2 text-xs font-mono text-foreground break-all",children:m}),s.jsx("button",{onClick:()=>b(m),className:"px-3 py-2 rounded-lg bg-secondary hover:bg-muted",children:s.jsx(L6,{className:"w-3.5 h-3.5 text-muted-foreground"})})]}),s.jsx("button",{onClick:()=>h(null),className:"text-xs text-muted-foreground hover:text-foreground",children:"Dismiss"})]}),a&&s.jsxs("div",{className:"bg-card border border-border rounded-xl p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Key Name"}),s.jsx("input",{value:o,onChange:j=>c(j.target.value),className:"mt-1 w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"e.g. Production API"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Expires In (days)"}),s.jsxs("select",{value:d,onChange:j=>f(j.target.value),className:"mt-1 w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:[s.jsx("option",{value:"30",children:"30 days"}),s.jsx("option",{value:"90",children:"90 days"}),s.jsx("option",{value:"365",children:"1 year"}),s.jsx("option",{value:"",children:"Never"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>i(!1),className:"px-3 py-1.5 rounded-lg bg-secondary text-secondary-foreground text-xs hover:bg-muted",children:"Cancel"}),s.jsx("button",{onClick:x,disabled:r.isPending||!o.trim(),className:"px-3 py-1.5 rounded-lg bg-primary text-primary-foreground text-xs font-medium hover:bg-primary/90 disabled:opacity-50",children:r.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):"Create"})]})]}),t.isLoading?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(ye,{className:"w-6 h-6 animate-spin text-primary"})}):g.length===0?s.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 text-center text-muted-foreground text-sm",children:[s.jsx(ph,{className:"w-8 h-8 mx-auto mb-2 opacity-40"}),"No API keys yet. Create one to access the API programmatically."]}):s.jsx("div",{className:"space-y-2",children:g.map(j=>s.jsxs("div",{className:"bg-card border border-border rounded-xl p-4 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-foreground",children:j.name}),s.jsxs("div",{className:"flex items-center gap-3 mt-0.5",children:[j.key_prefix&&s.jsxs("span",{className:"text-[10px] font-mono text-muted-foreground",children:[j.key_prefix,"..."]}),s.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["Created ",j.created_at?new Date(j.created_at).toLocaleDateString():""]}),j.expires_at&&s.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["Expires ",new Date(j.expires_at).toLocaleDateString()]})]})]}),s.jsx("button",{onClick:()=>w(j.id),className:"p-2 text-muted-foreground hover:text-destructive transition-colors",children:s.jsx(Et,{className:"w-3.5 h-3.5"})})]},j.id))})]})}function w6e({projectId:e}){const t=Ioe(e),r=Loe(),n=$oe(),a=zoe(),[i,o]=y.useState(!1),[c,d]=y.useState(""),[f,m]=y.useState([]),h=t.data?.webhooks??[],g=["document.processed","document.created","document.deleted","entity.created","entity.updated","entity.deleted","contact.created","contact.updated","email.received","email.processed"],x=j=>{m(N=>N.includes(j)?N.filter(_=>_!==j):[...N,j])},w=()=>{!c.trim()||f.length===0||r.mutate({projectId:e,url:c.trim(),events:f},{onSuccess:()=>{G.success("Webhook created"),d(""),m([]),o(!1)},onError:()=>G.error("Failed to create webhook")})},b=j=>{a.mutate(j,{onSuccess:()=>G.success("Test webhook sent"),onError:()=>G.error("Test delivery failed")})};return s.jsxs("div",{className:"space-y-4 max-w-lg",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Webhooks"}),s.jsxs("button",{onClick:()=>o(!i),className:"px-3 py-1.5 rounded-lg bg-primary text-primary-foreground text-xs font-medium hover:bg-primary/90 flex items-center gap-1.5",children:[s.jsx(br,{className:"w-3.5 h-3.5"})," Add Webhook"]})]}),i&&s.jsxs("div",{className:"bg-card border border-border rounded-xl p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Endpoint URL"}),s.jsx("input",{value:c,onChange:j=>d(j.target.value),className:"mt-1 w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"https://your-server.com/webhook"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider mb-1.5 block",children:"Events"}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:g.map(j=>s.jsx("button",{onClick:()=>x(j),className:H("px-2 py-1 rounded-md text-[10px] font-medium transition-colors border",f.includes(j)?"bg-primary/10 border-primary/30 text-primary":"bg-secondary border-border text-muted-foreground hover:text-foreground"),children:j},j))})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>o(!1),className:"px-3 py-1.5 rounded-lg bg-secondary text-secondary-foreground text-xs hover:bg-muted",children:"Cancel"}),s.jsx("button",{onClick:w,disabled:r.isPending||!c.trim()||f.length===0,className:"px-3 py-1.5 rounded-lg bg-primary text-primary-foreground text-xs font-medium hover:bg-primary/90 disabled:opacity-50",children:r.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):"Create"})]})]}),t.isLoading?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(ye,{className:"w-6 h-6 animate-spin text-primary"})}):h.length===0?s.jsxs("div",{className:"bg-card border border-border rounded-xl p-6 text-center text-muted-foreground text-sm",children:[s.jsx(r8,{className:"w-8 h-8 mx-auto mb-2 opacity-40"}),"No webhooks configured. Add one to receive real-time event notifications."]}):s.jsx("div",{className:"space-y-2",children:h.map(j=>s.jsxs("div",{className:"bg-card border border-border rounded-xl p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-sm font-mono text-foreground truncate flex-1 mr-2",children:j.url}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>b(j.id),disabled:a.isPending,className:"px-2 py-1 rounded-md bg-secondary text-[10px] text-muted-foreground hover:text-foreground",children:"Test"}),s.jsx("button",{onClick:()=>n.mutate(j.id,{onSuccess:()=>G.success("Webhook deleted")}),className:"p-1.5 text-muted-foreground hover:text-destructive transition-colors",children:s.jsx(Et,{className:"w-3.5 h-3.5"})})]})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:j.events.map(N=>s.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-secondary text-muted-foreground",children:N},N))}),s.jsxs("p",{className:"text-[10px] text-muted-foreground mt-1.5",children:["Created ",new Date(j.created_at).toLocaleDateString()]})]},j.id))})]})}const mi=e=>({width:e,height:e,viewBox:"0 0 24 24"});function j6e({size:e=20,...t}){return s.jsx("svg",{...mi(e),fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:s.jsx("path",{d:"M22.28 9.37a5.93 5.93 0 0 0-.51-4.89A6.01 6.01 0 0 0 15.3 1.5a5.97 5.97 0 0 0-4.52 2.07A5.93 5.93 0 0 0 6.82 2.2a6.01 6.01 0 0 0-4.01 2.92 5.97 5.97 0 0 0 .74 7.01 5.93 5.93 0 0 0 .51 4.89A6.01 6.01 0 0 0 10.53 20a5.98 5.98 0 0 0 .69 2.5 6.01 6.01 0 0 0 6.47 2.98 5.97 5.97 0 0 0 4.52-2.07 5.93 5.93 0 0 0 3.96 1.37 6.01 6.01 0 0 0 4.01-2.92 5.97 5.97 0 0 0-.74-7.01",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",transform:"scale(0.75) translate(4, 4)"})})}function Yz({size:e=20,...t}){return s.jsx("svg",{...mi(e),fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:s.jsx("path",{d:"M13.83 3h-3.16L5 21h3.16l1.41-4.51h5.36L16.34 21h3.16L13.83 3Zm-3.16 10.96L12.25 8.6l1.58 5.36h-3.16Z"})})}function $S({size:e=20,...t}){return s.jsx("svg",{...mi(e),fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:s.jsx("path",{d:"M21.81 10.26H12.18v3.72h5.51a4.77 4.77 0 0 1-2.05 3.08 6.14 6.14 0 0 1-3.46.96 6.36 6.36 0 0 1-6-4.14 6.29 6.29 0 0 1 0-3.76 6.36 6.36 0 0 1 6-4.14c1.56 0 2.97.56 4.08 1.49l2.79-2.79A10.53 10.53 0 0 0 12.18 2a10.26 10.26 0 0 0-9.19 5.66 10.06 10.06 0 0 0 0 8.68A10.26 10.26 0 0 0 12.18 22c5.2 0 9.87-3.46 9.87-10.26 0-.65-.08-1.31-.24-1.48Z",fill:"currentColor"})})}function N6e({size:e=20,...t}){return s.jsxs("svg",{...mi(e),fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:[s.jsx("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),s.jsx("text",{x:"12",y:"16",textAnchor:"middle",fontSize:"10",fontWeight:"bold",fill:"currentColor",children:"G"})]})}function S6e({size:e=20,...t}){return s.jsx("svg",{...mi(e),fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 2c1.85 0 3.55.63 4.9 1.69L7.69 16.9A7.96 7.96 0 0 1 4 12c0-4.42 3.58-8 8-8zm0 16c-1.85 0-3.55-.63-4.9-1.69L16.31 7.1A7.96 7.96 0 0 1 20 12c0 4.42-3.58 8-8 8z"})})}function _6e({size:e=20,...t}){return s.jsxs("svg",{...mi(e),fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:[s.jsx("path",{d:"M12 3a7 7 0 0 0-7 7v3.5c0 1.93 1.57 3.5 3.5 3.5h1a1.5 1.5 0 0 0 0-3H8.5a.5.5 0 0 1-.5-.5V10a4 4 0 0 1 8 0v3.5a.5.5 0 0 1-.5.5H14.5a1.5 1.5 0 0 0 0 3h1c1.93 0 3.5-1.57 3.5-3.5V10a7 7 0 0 0-7-7z"}),s.jsx("circle",{cx:"9.5",cy:"10.5",r:"1"}),s.jsx("circle",{cx:"14.5",cy:"10.5",r:"1"})]})}function Xz({size:e=20,...t}){return s.jsx("svg",{...mi(e),fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:s.jsx("path",{d:"M3 3l7.07 10.61L3 21h1.59l6.19-6.47L15.61 21H21l-7.46-11.18L20.1 3h-1.59l-5.76 6.02L8.39 3H3zm2.29 1.25h2.54l10.88 15.5h-2.54L5.29 4.25z"})})}function C6e({size:e=20,...t}){return s.jsxs("svg",{...mi(e),fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:[s.jsx("rect",{x:"3",y:"8",width:"4",height:"8",rx:"1"}),s.jsx("rect",{x:"10",y:"4",width:"4",height:"16",rx:"1"}),s.jsx("rect",{x:"17",y:"8",width:"4",height:"8",rx:"1"})]})}function k6e({size:e=20,...t}){return s.jsx("svg",{...mi(e),fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t,children:s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14.5v-9l7 4.5-7 4.5z"})})}function E6e({size:e=20,...t}){return s.jsxs("svg",{...mi(e),fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",...t,children:[s.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"3"}),s.jsx("path",{d:"M9 9h6M9 12h6M9 15h4"})]})}const CW={openai:"#10a37f",anthropic:"#d97757",claude:"#d97757",google:"#4285f4",gemini:"#4285f4",google_gemini:"#4285f4",groq:"#f55036",deepseek:"#4d6bfe",ollama:"#ffffff",grok:"#1d9bf0",xai:"#1d9bf0",minimax:"#6c5ce7",kimi:"#615eff"},A6e={openai:j6e,anthropic:Yz,claude:Yz,google:$S,gemini:$S,google_gemini:$S,groq:N6e,deepseek:S6e,ollama:_6e,grok:Xz,xai:Xz,minimax:C6e,kimi:k6e};function ty({provider:e,size:t=20,className:r}){const n=(e||"").toLowerCase().replace(/[\s-]/g,"_"),a=A6e[n]||E6e,i=CW[n]||"currentColor";return s.jsx(a,{size:t,className:r,style:{color:i}})}function T6e(e){const t=(e||"").toLowerCase().replace(/[\s-]/g,"_");return CW[t]||"var(--gm-accent-primary)"}const O6e=[{key:"users",label:"Users",icon:yr},{key:"system",label:"System",icon:fh},{key:"llm-providers",label:"LLM Providers",icon:ph},{key:"model-metadata",label:"Model Metadata",icon:$6},{key:"llm-queue",label:"LLM Queue",icon:EC},{key:"graph",label:"Graph",icon:yl},{key:"ontology",label:"Ontology",icon:kC},{key:"prompts",label:"Prompts",icon:e8},{key:"processing",label:"Processing",icon:PC},{key:"team-analysis",label:"Team Analysis",icon:yr},{key:"google-drive",label:"Google Drive",icon:U6},{key:"billing",label:"Billing",icon:Lee},{key:"audit-log",label:"Audit Log",icon:Wt}],Ae="rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-[var(--shadow-sm)] transition-all duration-200",ht="bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-placeholder)] focus:outline-none focus:border-[var(--gm-border-focus)] focus:shadow-[var(--shadow-focus)] transition-all duration-150",Dt="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] hover:bg-[var(--gm-interactive-primary-hover)] shadow-sm transition-all duration-150 disabled:opacity-50",wt="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] hover:bg-[var(--gm-interactive-secondary-hover)] border border-[var(--gm-border-primary)] transition-all duration-150",Zz="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--color-danger-500)] text-white hover:bg-[var(--color-danger-600)] shadow-sm transition-all duration-150 disabled:opacity-50",De="text-[10px] font-bold text-[var(--gm-accent-primary)] uppercase tracking-[0.1em]",tt="text-[10px] font-bold text-[var(--gm-text-tertiary)] uppercase tracking-wider";function ws(){return s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsx(ye,{className:"h-6 w-6 animate-spin text-[var(--gm-accent-primary)]"})})}function GA({msg:e}){return s.jsxs("div",{className:H(Ae,"p-10 text-center flex flex-col items-center gap-3"),children:[s.jsx(vr,{className:"w-5 h-5 text-[var(--color-warning-500)]"}),s.jsx("span",{className:"text-sm text-[var(--gm-text-secondary)]",children:e})]})}function Ya({msg:e}){return s.jsx("div",{className:H(Ae,"p-10 text-center text-[var(--gm-text-tertiary)] text-sm"),children:e})}function js({title:e,subtitle:t}){return s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-lg font-bold text-[var(--gm-text-primary)]",children:e}),t&&s.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)] mt-0.5",children:t})]})}function xr({label:e,value:t,color:r}){return s.jsxs("div",{className:H(Ae,"p-4 text-center"),children:[s.jsx("div",{className:"text-2xl font-bold tabular-nums",style:r?{color:r}:void 0,children:t}),s.jsx("div",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider mt-1",children:e})]})}function tb({checked:e,onChange:t,disabled:r}){return s.jsx("button",{onClick:()=>!r&&t(!e),disabled:r,className:"relative inline-flex h-5 w-9 shrink-0 cursor-pointer rounded-full border border-[var(--gm-border-primary)] transition-colors duration-200 disabled:opacity-50",style:{backgroundColor:e?"var(--color-brand-500)":"var(--gm-bg-tertiary)"},children:s.jsx("span",{className:H("pointer-events-none inline-block h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200",e?"translate-x-4":"translate-x-0")})})}const $e=e=>e??{};function P6e(){const{data:e}=tU(),t=e,r=[];return t&&(typeof t.disk=="number"&&t.disk>75&&r.push({msg:`Disk usage at ${t.disk.toFixed(1)}%  consider cleanup of old embeddings`,severity:"warning"}),typeof t.cpu=="number"&&t.cpu>90&&r.push({msg:`CPU usage critical at ${t.cpu.toFixed(1)}%`,severity:"danger"}),typeof t.ram=="number"&&t.ram>85&&r.push({msg:`RAM usage high at ${t.ram.toFixed(1)}%`,severity:"warning"}),typeof t.latency=="number"&&t.latency>200&&r.push({msg:`High latency: ${t.latency.toFixed(0)}ms`,severity:"warning"})),r.length===0?null:s.jsx("div",{className:"space-y-1.5 mb-4",children:r.map((n,a)=>s.jsxs("div",{className:H("flex items-center gap-2 px-4 py-2 rounded-lg text-xs font-medium",n.severity==="danger"?"bg-red-500/10 text-red-400":n.severity==="warning"?"bg-amber-500/10 text-amber-400":"bg-blue-500/10 text-blue-400"),children:[s.jsx(vr,{className:"w-3.5 h-3.5 shrink-0"}),s.jsx("span",{className:"flex-1",children:n.msg})]},a))})}function M6e(){const{data:e,isLoading:t,error:r}=Joe(),n=ele(),a=tle(),i=rle(),[o,c]=y.useState(!1),[d,f]=y.useState(""),[m,h]=y.useState("all"),[g,x]=y.useState({email:"",name:"",password:"",role:"user"}),[w,b]=y.useState(null),j=$e(e),N=j.users??[],_=$e(j.stats),S=y.useMemo(()=>N.filter(A=>{if(m!=="all"&&A.role!==m)return!1;if(d){const T=d.toLowerCase();if(!A.name?.toLowerCase().includes(T)&&!A.email?.toLowerCase().includes(T))return!1}return!0}),[N,m,d]),k=y.useCallback(()=>{if(!g.email){G.error("Email is required");return}n.mutate(g,{onSuccess:()=>{G.success("User created"),c(!1),x({email:"",name:"",password:"",role:"user"})},onError:A=>G.error(A.message)})},[g,n]);return t?s.jsx(ws,{}):r?s.jsx(GA,{msg:"Unable to load users."}):s.jsxs("div",{className:"space-y-5",children:[s.jsx(js,{title:"User Management"}),_.totalUsers!=null&&s.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[s.jsx(xr,{label:"Total Users",value:_.totalUsers}),s.jsx(xr,{label:"Active",value:_.activeUsers,color:"var(--color-success-500)"}),s.jsx(xr,{label:"Pending",value:_.pendingInvitations,color:"var(--color-warning-500)"})]}),s.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-[200px]",children:[s.jsx(bs,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"}),s.jsx("input",{placeholder:"Search users...",value:d,onChange:A=>f(A.target.value),className:H(ht,"flex-1")})]}),s.jsxs("select",{value:m,onChange:A=>h(A.target.value),className:H(ht,"w-32"),children:[s.jsx("option",{value:"all",children:"All Roles"}),s.jsx("option",{value:"user",children:"User"}),s.jsx("option",{value:"admin",children:"Admin"}),s.jsx("option",{value:"superadmin",children:"Superadmin"})]}),s.jsxs("button",{onClick:()=>c(!o),className:Dt,children:[s.jsx(br,{className:"w-3 h-3"})," Add User"]})]}),o&&s.jsxs("div",{className:H(Ae,"p-4 space-y-3"),children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx("input",{placeholder:"Email",value:g.email,onChange:A=>x(T=>({...T,email:A.target.value})),className:ht}),s.jsx("input",{placeholder:"Display Name",value:g.name,onChange:A=>x(T=>({...T,name:A.target.value})),className:ht}),s.jsx("input",{placeholder:"Password",type:"password",value:g.password,onChange:A=>x(T=>({...T,password:A.target.value})),className:ht}),s.jsxs("select",{value:g.role,onChange:A=>x(T=>({...T,role:A.target.value})),className:ht,children:[s.jsx("option",{value:"user",children:"User"}),s.jsx("option",{value:"admin",children:"Admin"}),s.jsx("option",{value:"superadmin",children:"Superadmin"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:k,disabled:n.isPending,className:Dt,children:[n.isPending?s.jsx(ye,{className:"w-3 h-3 animate-spin"}):s.jsx(br,{className:"w-3 h-3"})," Create"]}),s.jsx("button",{onClick:()=>c(!1),className:wt,children:"Cancel"})]})]}),s.jsxs("div",{className:H(Ae,"overflow-hidden"),children:[s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b border-[var(--gm-border-primary)]",children:["USER","EMAIL","ROLE","STATUS","LAST LOGIN","ACTIONS"].map(A=>s.jsx("th",{className:H(tt,"px-4 py-3 text-left"),children:A},A))})}),s.jsx("tbody",{children:S.map(A=>s.jsxs("tr",{className:"border-b border-[var(--gm-border-primary)] last:border-0 hover:bg-[var(--gm-surface-hover)] transition-colors",children:[s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-[var(--gm-interactive-primary)]/15 text-[var(--gm-accent-primary)] font-bold flex items-center justify-center shrink-0 text-xs",children:(A.name||A.email||"?").substring(0,2).toUpperCase()}),s.jsx("span",{className:"text-sm font-medium text-[var(--gm-text-primary)]",children:A.name||""})]})}),s.jsx("td",{className:"px-4 py-3 text-xs text-[var(--gm-text-tertiary)]",children:A.email}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("select",{value:A.role,onChange:T=>a.mutate({id:A.id,role:T.target.value},{onSuccess:()=>G.success("Role updated"),onError:O=>G.error(O.message)}),className:H("text-[10px] px-2 py-0.5 rounded-full font-medium border-0",A.role==="superadmin"?"bg-red-500/20 text-red-400":A.role==="admin"?"bg-blue-500/20 text-blue-400":"bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-primary)]"),children:[s.jsx("option",{value:"user",children:"user"}),s.jsx("option",{value:"admin",children:"admin"}),s.jsx("option",{value:"superadmin",children:"superadmin"})]})}),s.jsx("td",{className:"px-4 py-3",children:s.jsx("span",{className:H("text-[10px] px-2 py-0.5 rounded-full font-medium",A.status==="active"?"bg-green-500/15 text-green-400":A.status==="banned"?"bg-red-500/15 text-red-400":"bg-amber-500/15 text-amber-400"),children:A.status})}),s.jsx("td",{className:"px-4 py-3 text-xs text-[var(--gm-text-tertiary)] tabular-nums",children:A.lastActive?new Date(A.lastActive).toLocaleString():""}),s.jsx("td",{className:"px-4 py-3",children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>a.mutate({id:A.id,status:A.status==="banned"?"active":"banned"},{onSuccess:()=>G.success(A.status==="banned"?"User unbanned":"User banned"),onError:T=>G.error(T.message)}),className:"p-1 rounded hover:bg-[var(--gm-surface-hover)]",title:A.status==="banned"?"Unban":"Ban",children:A.status==="banned"?s.jsx(eu,{className:"w-3.5 h-3.5 text-green-400"}):s.jsx(bC,{className:"w-3.5 h-3.5 text-amber-400"})}),w===A.id?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>i.mutate(A.id,{onSuccess:()=>{G.success("User deleted"),b(null)},onError:T=>G.error(T.message)}),className:"px-2 py-0.5 rounded bg-red-500 text-white text-[10px]",children:"Confirm"}),s.jsx("button",{onClick:()=>b(null),className:"px-2 py-0.5 rounded text-[10px] text-[var(--gm-text-tertiary)]",children:"Cancel"})]}):s.jsx("button",{onClick:()=>b(A.id),className:"p-1 rounded hover:bg-[var(--gm-surface-hover)]",children:s.jsx(Et,{className:"w-3.5 h-3.5 text-red-400"})})]})})]},A.id))})]}),S.length===0&&s.jsx("div",{className:"p-8 text-center text-sm text-[var(--gm-text-tertiary)]",children:"No users found."})]}),s.jsxs("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] text-center",children:["Showing ",S.length," of ",N.length," users"]})]})}function R6e(){const{data:e,isLoading:t,error:r,refetch:n}=tU(),a=e;if(t)return s.jsx(ws,{});if(r||!a)return s.jsx(GA,{msg:"Unable to load system stats."});const i=a.server||{},o=a.memory||{},c=a.process||{},d=a.database||"unknown",f=x=>{const w=Math.floor(x/86400),b=Math.floor(x%86400/3600),j=Math.floor(x%3600/60);return[w&&`${w}d`,b&&`${b}h`,`${j}m`].filter(Boolean).join(" ")},m=x=>x>=1024?`${(x/1024).toFixed(1)} GB`:`${x} MB`,h=(x,w,b)=>x>b?"#ef4444":x>w?"#f59e0b":"#22c55e",g=[{label:"CPU",val:a.cpu,unit:"%",color:h(a.cpu,60,80)},{label:"RAM",val:a.ram,unit:"%",color:h(a.ram,60,80)},{label:"Disk",val:a.disk,unit:"%",color:h(a.disk,70,90)},{label:"Event Loop",val:a.latency,unit:"ms",color:h(a.latency,50,200)}];return s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(js,{title:"System Health",subtitle:a.timestamp?`Last updated: ${new Date(a.timestamp).toLocaleString()}`:"Real-time system monitoring"}),s.jsxs("button",{onClick:()=>n(),className:wt,children:[s.jsx(Qr,{className:"w-3 h-3"})," Refresh"]})]}),s.jsx("div",{className:"grid grid-cols-4 gap-3",children:g.map(x=>s.jsxs("div",{className:H(Ae,"p-4 text-center"),children:[s.jsx("div",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-2",children:x.label}),s.jsxs("div",{className:"relative w-16 h-16 mx-auto mb-2",children:[s.jsxs("svg",{viewBox:"0 0 36 36",className:"w-full h-full -rotate-90",children:[s.jsx("circle",{cx:"18",cy:"18",r:"15.5",fill:"none",stroke:"var(--gm-bg-tertiary)",strokeWidth:"3"}),s.jsx("circle",{cx:"18",cy:"18",r:"15.5",fill:"none",stroke:x.color,strokeWidth:"3",strokeDasharray:`${Math.min((typeof x.val=="number"?x.val:0)/(x.unit==="ms"?500:100)*97.4,97.4)} 97.4`,strokeLinecap:"round",className:"transition-all duration-700"})]}),s.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-sm font-bold text-[var(--gm-text-primary)] tabular-nums",children:typeof x.val=="number"?x.unit==="ms"?x.val:x.val.toFixed(0):x.val})]}),s.jsx("div",{className:"text-[9px] font-medium tabular-nums",style:{color:x.color},children:x.unit})]},x.label))}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:H(Ae,"p-4 space-y-2.5"),children:[s.jsx("h3",{className:De,children:"Server"}),[["Node",String(i.nodeVersion||"")],["Platform",`${i.platform||""} / ${i.arch||""}`],["Hostname",String(a.hostname||"")],["PID",String(i.pid||"")],["Uptime",typeof i.uptime=="number"?f(i.uptime):""],["CPU Cores",String(a.cpuCores||"")]].map(([x,w])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase",children:x}),s.jsx("span",{className:"text-xs text-[var(--gm-text-primary)] font-mono tabular-nums",children:w})]},x))]}),s.jsxs("div",{className:H(Ae,"p-4 space-y-2.5"),children:[s.jsx("h3",{className:De,children:"Runtime"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase",children:"Database"}),s.jsx("span",{className:H("text-[10px] px-2 py-0.5 rounded-full font-medium",d==="connected"?"bg-green-500/10 text-green-400":d==="error"?"bg-red-500/10 text-red-400":"bg-amber-500/10 text-amber-400"),children:d})]}),[["Heap Used",`${c.heapUsedMB||0} MB`],["Heap Total",`${c.heapTotalMB||0} MB`],["Heap %",`${c.heapPercent||0}%`],["RSS",`${c.rssMB||0} MB`],["System RAM",o.totalMB?`${m(o.usedMB||0)} / ${m(o.totalMB)}`:""]].map(([x,w])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase",children:x}),s.jsx("span",{className:"text-xs text-[var(--gm-text-primary)] font-mono tabular-nums",children:w})]},x)),c.heapPercent>0&&s.jsx("div",{className:"h-1.5 rounded-full bg-[var(--gm-bg-tertiary)] overflow-hidden",children:s.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${c.heapPercent}%`,backgroundColor:h(c.heapPercent,60,85)}})})]})]}),a.storageBreakdown&&a.storageBreakdown.length>0&&s.jsxs("div",{className:H(Ae,"p-5"),children:[s.jsx("h3",{className:H(De,"mb-4"),children:"Storage"}),s.jsx("div",{className:"space-y-4",children:a.storageBreakdown.map((x,w)=>{const b=Number(x.size||0),j=Number(x.free||0),N=b-j,_=b>0?Math.round(N/b*100):0;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[s.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-primary)]",children:String(x.category)}),s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] tabular-nums font-mono",children:[m(N)," / ",m(b)," (",_,"%)"]})]}),s.jsx("div",{className:"h-2.5 rounded-full bg-[var(--gm-bg-tertiary)] overflow-hidden",children:s.jsx("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${_}%`,backgroundColor:h(_,70,90)}})}),s.jsx("div",{className:"flex justify-between mt-1",children:s.jsxs("span",{className:"text-[9px] text-[var(--gm-text-tertiary)]",children:[m(j)," free"]})})]},w)})})]})]})}function D6e(){const{data:e,isLoading:t}=B8(),{data:r}=yle(),{data:n,isLoading:a}=vle(),i=ble(),o=q8(),[c,d]=y.useState({}),[f,m]=y.useState({}),[h,g]=y.useState({}),x=$e(e),w=$e(x.llm),b=$e(w.providers),j=$e(w.perTask);$e(r).providers;const _=$e(n),S=_.providers??[],k=y.useCallback(R=>S.find(M=>M.id===R||M.aliases&&M.aliases.includes(R)),[S]),A=y.useMemo(()=>{const R=new Set,M=Object.entries(b).map(([D,z])=>{const Y=k(D),I=Y?.id||D;return R.add(I),R.add(D),{id:I,name:Y?.name||z.name||D,apiKeyMasked:Y?.masked||z.apiKeyMasked||null,isConfigured:Y?.configured||!!z.isConfigured,keySource:Y?.source||null}});return S.forEach(D=>{R.has(D.id)||(R.add(D.id),M.push({id:D.id,name:D.name||(D.id||"unknown").charAt(0).toUpperCase()+(D.id||"unknown").slice(1),apiKeyMasked:D.masked,isConfigured:D.configured,keySource:D.source}))}),M},[b,S,k]),T=y.useCallback(()=>{const R=Object.entries(f).filter(([,z])=>z.trim().length>0);if(R.length===0){G.info("No changes to save");return}let M=0;const D=R.length;for(const[z,Y]of R)i.mutate({provider:z,apiKey:Y},{onSuccess:()=>{M++,M===D&&(G.success(`${D} API key${D>1?"s":""} saved to encrypted vault`),m({}))},onError:I=>G.error(`Failed to save ${z}: ${I.message}`)})},[f,i]),O=y.useCallback(()=>{if(Object.keys(h).length===0){G.info("No changes to save");return}o.mutate({llm:{perTask:h}},{onSuccess:()=>{G.success("LLM configuration saved"),g({})},onError:R=>G.error(R.message)})},[h,o]);if(t||a)return s.jsx(ws,{});const P=Object.values(f).some(R=>R.trim().length>0);return s.jsxs("div",{className:"space-y-8",children:[s.jsx(js,{title:"LLM Providers",subtitle:"System-level API keys stored encrypted in Supabase vault"}),s.jsxs("div",{className:H(Ae,"p-4 border-l-2 border-[var(--gm-accent-primary)]"),children:[s.jsx("h4",{className:"text-xs font-semibold text-[var(--gm-accent-primary)] mb-2",children:"Key Resolution & Billing"}),s.jsxs("div",{className:"text-[11px] text-[var(--gm-text-secondary)] space-y-1",children:[s.jsxs("p",{children:["The LLM service resolves API keys in this order: ",s.jsx("strong",{children:"Project key"})," (Supabase secrets, project scope) then ",s.jsx("strong",{children:"System key"})," (Supabase secrets, system scope) then ",s.jsx("strong",{children:"Config file"})," (fallback)."]}),s.jsxs("p",{children:["When a project uses its ",s.jsx("strong",{children:"own API key"})," (BYOK), billing is ",s.jsx("span",{className:"text-green-400 font-medium",children:"skipped"}),"  the project pays the provider directly."]}),s.jsxs("p",{children:["When using ",s.jsx("strong",{children:"system keys"}),", the project balance is ",s.jsx("span",{className:"text-amber-400 font-medium",children:"debited"})," with the configured markup."]})]})]}),s.jsxs("div",{className:H(Ae,"p-5 space-y-4"),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:De,children:"System LLM API Keys"}),s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:[A.filter(R=>R.isConfigured).length,"/",A.length," configured"]})]}),A.map(R=>s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-[var(--gm-accent-primary)]",children:R.name||"(unnamed)"}),R.isConfigured?s.jsxs("span",{className:"text-[10px] text-green-400 flex items-center gap-1",children:[s.jsx(Gn,{className:"w-3 h-3"})," Configured"]}):s.jsx("span",{className:"text-[10px] text-amber-400",children:"Not configured"}),R.keySource&&s.jsxs("span",{className:H("text-[10px] px-1.5 py-0.5 rounded",R.keySource==="system"?"bg-blue-500/20 text-blue-300":"bg-purple-500/20 text-purple-300"),children:[R.keySource," scope"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:c[R.id]?"text":"password",value:f[R.id]??"",onChange:M=>m(D=>({...D,[R.id]:M.target.value})),placeholder:R.apiKeyMasked||`Enter ${R.name} API key...`,className:H(ht,"flex-1 font-mono text-xs")}),s.jsx("button",{onClick:()=>d(M=>({...M,[R.id]:!M[R.id]})),className:wt,children:c[R.id]?"Hide":"Show"})]}),R.apiKeyMasked&&!f[R.id]&&s.jsxs("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] font-mono pl-1",children:["Current: ",R.apiKeyMasked]})]},R.id)),s.jsxs("button",{onClick:T,disabled:i.isPending||!P,className:Dt,children:[i.isPending?s.jsx(ye,{className:"w-3 h-3 animate-spin"}):s.jsx(Us,{className:"w-3 h-3"})," Save to Encrypted Vault"]})]}),s.jsxs("div",{className:H(Ae,"p-5 space-y-4"),children:[s.jsx("h3",{className:De,children:"Service API Keys"}),s.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:"Keys for email, notifications and other services (stored encrypted in Supabase)"}),(()=>{const R=_.services??[],M={resend:{link:"https://resend.com/api-keys"},brave:{link:"https://brave.com/search/api/"}};return R.length>0?R.map(D=>s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-[var(--gm-accent-primary)]",children:D.name||"(unnamed)"}),D.configured?s.jsxs("span",{className:"text-[10px] text-green-400 flex items-center gap-1",children:[s.jsx(Gn,{className:"w-3 h-3"})," Configured"]}):s.jsx("span",{className:"text-[10px] text-amber-400",children:"Not configured"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:c[D.id]?"text":"password",value:f[D.id]??"",onChange:z=>m(Y=>({...Y,[D.id]:z.target.value})),placeholder:D.masked||`Enter ${D.name} key...`,className:H(ht,"flex-1 font-mono text-xs")}),s.jsx("button",{onClick:()=>d(z=>({...z,[D.id]:!z[D.id]})),className:wt,children:c[D.id]?"Hide":"Show"}),s.jsxs("button",{onClick:()=>{const z=f[D.id]?.trim();if(!z){G.info("Enter a key first");return}i.mutate({provider:D.id,apiKey:z},{onSuccess:()=>{G.success(`${D.name} key saved`),m(Y=>{const I={...Y};return delete I[D.id],I})},onError:Y=>G.error(Y.message)})},disabled:i.isPending||!f[D.id]?.trim(),className:Dt,children:[s.jsx(Us,{className:"w-3 h-3"})," Save"]})]}),D.masked&&!f[D.id]&&s.jsxs("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] font-mono pl-1",children:["Current: ",D.masked]}),M[D.id]?.link&&s.jsxs("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:["Get key at ",s.jsx("a",{href:M[D.id].link,target:"_blank",rel:"noreferrer",className:"text-[var(--gm-accent-primary)] underline",children:M[D.id].link})]})]},D.id)):["resend","brave"].map(D=>s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium text-[var(--gm-accent-primary)]",children:D==="resend"?"Resend (Email)":"Brave Search"}),s.jsx("span",{className:"text-[10px] text-amber-400",children:"Not configured"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"password",value:f[D]??"",onChange:z=>m(Y=>({...Y,[D]:z.target.value})),placeholder:`Enter ${D} API key...`,className:H(ht,"flex-1 font-mono text-xs")}),s.jsxs("button",{onClick:()=>{const z=f[D]?.trim();z&&i.mutate({provider:D,apiKey:z},{onSuccess:()=>{G.success(`${D} key saved`),m(Y=>{const I={...Y};return delete I[D],I})},onError:Y=>G.error(Y.message)})},disabled:i.isPending||!f[D]?.trim(),className:Dt,children:[s.jsx(Us,{className:"w-3 h-3"})," Save"]})]})]},D))})()]}),s.jsxs("div",{className:H(Ae,"p-5 space-y-5"),children:[s.jsxs("div",{children:[s.jsx("h3",{className:De,children:"Task-Specific AI Configuration"}),s.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)] mt-1",children:"Configure which provider and model to use for each AI task. These settings apply globally to the platform."})]}),Object.entries(j).map(([R,M])=>{const D=R.replace(/_/g," ").replace(/([A-Z])/g," $1");return s.jsxs("div",{className:"space-y-2",children:[s.jsx("span",{className:"text-sm font-medium text-[var(--gm-text-primary)] capitalize",children:D}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:H(tt,"block mb-1"),children:"PROVIDER"}),s.jsxs("select",{value:h[R]?.provider??M?.provider??"",onChange:z=>g(Y=>({...Y,[R]:{provider:z.target.value,model:Y[R]?.model??M?.model??""}})),className:H(ht,"w-full text-xs"),children:[s.jsx("option",{value:"",children:"Select..."}),A.filter(z=>z.isConfigured).map(z=>s.jsx("option",{value:z.id,children:z.name},z.id))]}),s.jsxs("span",{className:"text-[10px] text-[var(--gm-accent-primary)] mt-0.5 block",children:[A.filter(z=>z.isConfigured).length," provider(s) available"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:H(tt,"block mb-1"),children:"MODEL"}),s.jsx("input",{value:h[R]?.model??M?.model??"",onChange:z=>g(Y=>({...Y,[R]:{provider:Y[R]?.provider??M?.provider??"",model:z.target.value}})),className:H(ht,"w-full text-xs"),placeholder:"e.g. gpt-4o"})]})]})]},R)}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:O,disabled:o.isPending||Object.keys(h).length===0,className:Dt,children:[o.isPending?s.jsx(ye,{className:"w-3 h-3 animate-spin"}):s.jsx(Us,{className:"w-3 h-3"})," Save LLM Configuration"]}),s.jsxs("span",{className:"text-[10px] text-amber-400 flex items-center gap-1",children:[s.jsx(vr,{className:"w-3 h-3"})," Changes apply immediately to all AI processing"]})]})]})]})}function I6e(){const{data:e,isLoading:t,refetch:r}=wle(),{data:n,refetch:a}=jle(),i=Nle(),[o,c]=y.useState("all"),[d,f]=y.useState("all"),[m,h]=y.useState("");if(t)return s.jsx(ws,{});const x=$e(e).models??[],w=$e(n).providers??[],b=$e(i.data),j=x.map(D=>({...D,_type:D.model_type||"text",_provider:D.provider||"unknown"})),N=j.reduce((D,z)=>(D[z._provider]||(D[z._provider]=[]),D[z._provider].push(z),D),{}),_=Object.keys(N).sort(),S=_.length,k=D=>{const z=Number(D);return!z||isNaN(z)?"":z>=1e6?`${(z/1e6).toFixed(1)}M`:z>=1e3?`${Math.round(z/1e3)}K`:String(z)},A=D=>{const z=Number(D);return!z||isNaN(z)?"":`$${z.toFixed(2)}`},T=j.filter(D=>{if(o!=="all"&&D._provider!==o||d!=="all"&&D._type!==d)return!1;if(m){const z=m.toLowerCase(),Y=String(D.display_name||D.model_id||"").toLowerCase(),I=String(D.model_id||"").toLowerCase();if(!Y.includes(z)&&!I.includes(z))return!1}return!0}),O=T.filter(D=>D._type==="text"),P=T.filter(D=>D._type==="embedding"),R=async()=>{try{const D=await i.mutateAsync();await r(),await a();const z=$e(D);G.success(`Models synced  ${z.totalSynced??0} updated across all providers`)}catch(D){G.error(D.message||"Sync failed")}},M=j.length>0;return s.jsxs("div",{className:"space-y-6",children:[s.jsx(js,{title:"Model Metadata",subtitle:M?`${j.length} models across ${S} provider(s)`:"No models synced yet  click Sync to populate"}),s.jsxs("div",{className:H(Ae,"p-5 space-y-4"),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:De,children:"Provider Sync"}),s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:"Fetches models from each provider API and persists to the database."})]}),s.jsxs("button",{onClick:R,disabled:i.isPending,className:Dt,children:[i.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Gs,{className:"w-3.5 h-3.5"}),i.isPending?"Syncing...":"Sync All Providers"]})]}),b.results&&s.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(b.results).map(([D,z])=>s.jsxs("span",{className:H("inline-flex items-center gap-1.5 text-[10px] px-2.5 py-1 rounded-lg font-medium border",z.status==="success"?"bg-green-500/10 border-green-500/30 text-green-400":z.status==="skipped"?"bg-amber-500/10 border-amber-500/30 text-amber-400":"bg-red-500/10 border-red-500/30 text-red-400"),children:[s.jsx(ty,{provider:D,size:12}),s.jsx("span",{className:"font-semibold",children:D}),z.status==="success"&&s.jsxs(s.Fragment,{children:["  ",z.synced," synced"]}),z.status==="skipped"&&s.jsxs(s.Fragment,{children:["  ",z.reason]}),z.status==="error"&&s.jsx(s.Fragment,{children:"  error"})]},D))}),(w.length>0||_.length>0)&&s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2",children:(w.length>0?w:_.map(D=>({provider:D}))).map((D,z)=>{const Y=D.provider||"",I=D.active_models??D.activeModels??N[Y]?.length??0,K=D.last_synced,U=o===Y;return s.jsxs("button",{onClick:()=>c(U?"all":Y),className:H("flex items-center gap-2.5 px-3 py-2.5 rounded-lg border transition-all text-left","bg-[var(--gm-bg-secondary)] border-[var(--gm-border-primary)] hover:border-[var(--gm-border-secondary)]",U&&"ring-1 ring-[var(--gm-accent-primary)]/50 border-[var(--gm-accent-primary)]/40"),children:[s.jsx(ty,{provider:Y,size:18}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"text-[11px] font-semibold text-[var(--gm-text-primary)] truncate capitalize",children:Y}),s.jsxs("div",{className:"text-[10px] tabular-nums",style:{color:T6e(Y)},children:[I," models"]}),K&&s.jsx("div",{className:"text-[8px] text-[var(--gm-text-tertiary)] truncate",children:new Date(K).toLocaleDateString()})]})]},z)})})]}),s.jsxs("div",{className:H(Ae,"p-3 flex items-center gap-3 flex-wrap"),children:[s.jsxs("select",{value:o,onChange:D=>c(D.target.value),className:H(ht,"w-auto max-w-[180px]"),children:[s.jsx("option",{value:"all",children:"All Providers"}),_.map(D=>s.jsx("option",{value:D,children:D},D))]}),s.jsxs("select",{value:d,onChange:D=>f(D.target.value),className:H(ht,"w-auto max-w-[140px]"),children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"text",children:"Text"}),s.jsx("option",{value:"embedding",children:"Embedding"})]}),s.jsx("input",{value:m,onChange:D=>h(D.target.value),placeholder:"Search models...",className:H(ht,"w-auto max-w-[220px]")}),s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] ml-auto tabular-nums",children:[T.length," of ",j.length]})]}),O.length>0&&s.jsxs("div",{className:H(Ae,"overflow-hidden"),children:[s.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b border-[var(--gm-border-primary)]",children:[s.jsx("h3",{className:De,children:"Text & Vision Models"}),s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] tabular-nums",children:[O.length," models"]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b border-[var(--gm-border-primary)]",children:["Model","Provider","Type","Context","$/1M In","$/1M Out"].map(D=>s.jsx("th",{className:H(tt,"px-4 py-2.5 text-left"),children:D},D))})}),s.jsx("tbody",{children:O.map((D,z)=>{const Y=D.display_name||"",I=D.model_id||"",K=D._provider,U=!!D.supports_vision;return s.jsxs("tr",{className:"border-b border-[var(--gm-border-primary)] last:border-0 hover:bg-[var(--gm-surface-hover)]",children:[s.jsxs("td",{className:"px-4 py-2.5",children:[Y&&s.jsx("div",{className:"text-xs font-medium text-[var(--gm-text-primary)]",children:Y}),s.jsx("div",{className:"text-[10px] font-mono text-[var(--gm-text-tertiary)]",children:I})]}),s.jsx("td",{className:"px-4 py-2.5",children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(ty,{provider:K,size:14}),s.jsx("span",{className:"text-xs text-[var(--gm-text-secondary)] capitalize",children:K})]})}),s.jsx("td",{className:"px-4 py-2.5",children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full font-medium bg-[var(--gm-bg-tertiary)] text-[var(--gm-accent-primary)]",children:"text"}),U&&s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full font-medium bg-purple-500/15 text-purple-400",children:"vision"})]})}),s.jsx("td",{className:"px-4 py-2.5 text-xs text-[var(--gm-text-primary)] tabular-nums font-semibold",children:k(D.context_tokens)}),s.jsx("td",{className:"px-4 py-2.5 text-xs text-[var(--gm-text-tertiary)] tabular-nums",children:A(D.price_input)}),s.jsx("td",{className:"px-4 py-2.5 text-xs text-[var(--gm-text-tertiary)] tabular-nums",children:A(D.price_output)})]},z)})})]})})]}),P.length>0&&s.jsxs("div",{className:H(Ae,"overflow-hidden"),children:[s.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b border-[var(--gm-border-primary)]",children:[s.jsx("h3",{className:De,children:"Embedding Models"}),s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] tabular-nums",children:[P.length," models"]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b border-[var(--gm-border-primary)]",children:["Model","Provider","Context","$/1M In"].map(D=>s.jsx("th",{className:H(tt,"px-4 py-2.5 text-left"),children:D},D))})}),s.jsx("tbody",{children:P.map((D,z)=>{const Y=D.display_name||"",I=D.model_id||"";return s.jsxs("tr",{className:"border-b border-[var(--gm-border-primary)] last:border-0 hover:bg-[var(--gm-surface-hover)]",children:[s.jsxs("td",{className:"px-4 py-2.5",children:[Y&&s.jsx("div",{className:"text-xs font-medium text-[var(--gm-text-primary)]",children:Y}),s.jsx("div",{className:"text-[10px] font-mono text-[var(--gm-text-tertiary)]",children:I})]}),s.jsx("td",{className:"px-4 py-2.5",children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(ty,{provider:D.provider||"",size:14}),s.jsx("span",{className:"text-xs text-[var(--gm-text-secondary)] capitalize",children:D.provider||""})]})}),s.jsx("td",{className:"px-4 py-2.5 text-xs text-[var(--gm-text-primary)] tabular-nums font-semibold",children:k(D.context_tokens)}),s.jsx("td",{className:"px-4 py-2.5 text-xs text-[var(--gm-text-tertiary)] tabular-nums",children:A(D.price_input)})]},z)})})]})})]}),!M&&s.jsx(Ya,{msg:"No models in database yet. Click 'Sync All Providers' to fetch from APIs."}),M&&T.length===0&&s.jsx(Ya,{msg:"No models match the current filters."})]})}function L6e(){const{data:e,isLoading:t,refetch:r}=Sle(),{data:n}=_le(),{data:a}=Cle(),{data:i}=kle(),o=Ele(),[c,d]=y.useState(null);if(t)return s.jsx(ws,{});const f=$e(e),m=$e(f.stats),h=$e(f.database),g=$e(n).items??f.pendingItems??[],x=$e(a).items??[],w=$e(i).items??$e(i).history??[],b=h.totalCostTodayUsd??m.totalCost??m.costToday,j=()=>{confirm("Clear all pending items from the queue? This cannot be undone.")&&o.mutate({action:"clear"},{onSuccess:()=>{G.success("Queue cleared"),r()},onError:N=>G.error(N.message)})};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(js,{title:"LLM Processing Queue",subtitle:"Monitor and control AI request processing  All requests are persisted in database"}),s.jsxs("div",{className:H(Ae,"p-5 space-y-3"),children:[s.jsx("h3",{className:De,children:"Queue Status"}),s.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[f.database!=null&&s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full font-semibold bg-green-500/15 text-green-400",children:"DB: Connected"}),s.jsx("span",{className:H("text-[10px] px-2 py-0.5 rounded-full font-semibold",f.isPaused?"bg-amber-500/15 text-amber-400":f.isProcessing?"bg-blue-500/15 text-blue-400":"bg-green-500/15 text-green-400"),children:f.isPaused?"PAUSED":f.isProcessing?"PROCESSING":"IDLE"}),s.jsxs("span",{className:"text-xs text-[var(--gm-accent-primary)] tabular-nums",children:["Queue: ",f.queueLength??0]}),s.jsxs("span",{className:"text-xs text-[var(--gm-text-tertiary)] tabular-nums",children:["Processing: ",f.isProcessing?1:0]}),s.jsxs("button",{onClick:()=>r(),className:wt,children:[s.jsx(Gs,{className:"w-3 h-3"})," Refresh"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>o.mutate({action:"pause"},{onSuccess:()=>{G.success("Queue paused"),r()},onError:N=>G.error(N.message)}),disabled:o.isPending,className:Zz,children:[s.jsx(Gte,{className:"w-3 h-3"})," Pause"]}),s.jsxs("button",{onClick:()=>o.mutate({action:"resume"},{onSuccess:()=>{G.success("Queue resumed"),r()},onError:N=>G.error(N.message)}),disabled:o.isPending,className:Dt,children:[s.jsx(OC,{className:"w-3 h-3"})," Resume"]}),s.jsx("button",{onClick:j,disabled:o.isPending,className:wt,children:"Clear Queue"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-7 gap-3",children:[s.jsx(xr,{label:"Pending",value:h.pendingCount??f.queueLength??g.length??0}),s.jsx(xr,{label:"Processing",value:h.processingCount??(f.isProcessing?1:0)}),s.jsx(xr,{label:"Completed",value:h.completedToday??m.successful??m.completed??0,color:"var(--color-brand-500)"}),s.jsx(xr,{label:"Failed",value:h.failedToday??m.failed??0,color:"var(--color-danger-500)"}),s.jsx(xr,{label:"Retry Pending",value:h.retryPendingCount??x.length}),s.jsx(xr,{label:"Avg Time (ms)",value:h.avgProcessingTimeMs??m.avgProcessingTime?Number(h.avgProcessingTimeMs??m.avgProcessingTime).toLocaleString():"0"}),s.jsx(xr,{label:"Cost Today",value:b!=null?`$${Number(b).toFixed(4)}`:"$0",color:"var(--color-brand-500)"})]}),f.currentRequest&&s.jsxs("div",{className:H(Ae,"p-4"),children:[s.jsx("h3",{className:H(De,"mb-2"),children:"Currently Processing"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ye,{className:"w-4 h-4 animate-spin text-blue-400 shrink-0"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"text-xs text-[var(--gm-text-primary)]",children:f.currentRequest.context||f.currentRequest.id}),s.jsxs("div",{className:"flex items-center gap-3 mt-0.5",children:[f.currentRequest.priority&&s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:["Priority: ",f.currentRequest.priority]}),f.currentRequest.startedAt&&s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:["Started: ",new Date(f.currentRequest.startedAt).toLocaleString()]})]})]})]})]}),s.jsxs("div",{className:H(Ae,"p-5"),children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:De,children:"Pending Items"}),s.jsxs("span",{className:"text-xs text-[var(--gm-accent-primary)] tabular-nums",children:[g.length," items"]})]}),g.length===0?s.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:"No items in queue"}):s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:H(tt,"text-left py-2 px-2"),children:"Context"}),s.jsx("th",{className:H(tt,"text-left py-2 px-2"),children:"Priority"}),s.jsx("th",{className:H(tt,"text-left py-2 px-2"),children:"Queued"}),s.jsx("th",{className:H(tt,"text-right py-2 px-2"),children:"Action"})]})}),s.jsx("tbody",{children:g.slice(0,20).map((N,_)=>s.jsxs("tr",{className:"hover:bg-[var(--gm-surface-hover)] transition-colors",children:[s.jsx("td",{className:"text-xs text-[var(--gm-text-primary)] py-1.5 px-2 truncate max-w-[300px]",children:N.context||N.type||N.task||N.id||"Unknown"}),s.jsx("td",{className:"py-1.5 px-2",children:s.jsx("span",{className:H("text-[10px] px-1.5 py-0.5 rounded font-medium",N.priority==="high"?"bg-amber-500/15 text-amber-400":"bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)]"),children:N.priority||"normal"})}),s.jsx("td",{className:"text-[10px] text-[var(--gm-text-tertiary)] py-1.5 px-2",children:N.queuedAt?new Date(N.queuedAt).toLocaleTimeString():""}),s.jsx("td",{className:"text-right py-1.5 px-2",children:s.jsx("button",{onClick:()=>o.mutate({action:"cancel",id:N.id},{onSuccess:()=>{G.success("Cancelled"),r()}}),className:"text-[10px] text-red-400 hover:underline",children:"Cancel"})})]},_))})]})]}),s.jsxs("div",{className:H(Ae,"p-5"),children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:De,children:"Failed Items"}),x.length>0&&s.jsxs("button",{onClick:()=>o.mutate({action:"retry-all"},{onSuccess:()=>{G.success("Retrying all"),r()}}),disabled:o.isPending,className:Zz,children:[s.jsx(Qr,{className:"w-3 h-3"})," Retry All"]})]}),x.length===0?s.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:"No failed items"}):s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:H(tt,"text-left py-2 px-2"),children:"Context"}),s.jsx("th",{className:H(tt,"text-left py-2 px-2"),children:"Provider"}),s.jsx("th",{className:H(tt,"text-left py-2 px-2"),children:"Attempts"}),s.jsx("th",{className:H(tt,"text-left py-2 px-2"),children:"Error"}),s.jsx("th",{className:H(tt,"text-right py-2 px-2"),children:"Actions"})]})}),s.jsx("tbody",{children:x.slice(0,20).map((N,_)=>s.jsxs("tr",{className:"hover:bg-[var(--gm-surface-hover)] transition-colors",children:[s.jsx("td",{className:"text-xs text-[var(--gm-text-primary)] py-1.5 px-2 truncate max-w-[200px]",children:N.context||N.type||"Unknown"}),s.jsx("td",{className:"text-[10px] text-[var(--gm-text-tertiary)] py-1.5 px-2",children:N.provider||""}),s.jsxs("td",{className:"text-[10px] text-[var(--gm-text-tertiary)] py-1.5 px-2 tabular-nums",children:[N.attempts??N.attemptCount??"?","/",N.maxAttempts??N.maxRetries??"3"]}),s.jsx("td",{className:"text-[10px] text-red-400 py-1.5 px-2 truncate max-w-[200px]",children:N.error||N.errorMessage||"Error"}),s.jsxs("td",{className:"text-right py-1.5 px-2 whitespace-nowrap",children:[s.jsx("button",{onClick:()=>o.mutate({action:"retry",id:N.id},{onSuccess:()=>{G.success("Retrying"),r()}}),className:"text-[10px] text-[var(--gm-accent-primary)] hover:underline mr-2",children:"Retry"}),s.jsx("button",{onClick:()=>o.mutate({action:"retry",id:N.id+"?reset=true"},{onSuccess:()=>{G.success("Reset & Retrying"),r()}}),className:"text-[10px] text-amber-400 hover:underline",children:"Reset & Retry"})]})]},_))})]})]}),s.jsxs("div",{className:H(Ae,"p-5"),children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:De,children:"Recent Processing History"}),s.jsxs("span",{className:"text-xs text-[var(--gm-text-tertiary)] tabular-nums",children:[w.length," items"]})]}),w.length===0?s.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:"No processing history yet"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:H(tt,"text-left py-2 px-2"),children:"Context"}),s.jsx("th",{className:H(tt,"text-left py-2 px-2"),children:"Provider / Model"}),s.jsx("th",{className:H(tt,"text-center py-2 px-2"),children:"Status"}),s.jsx("th",{className:H(tt,"text-right py-2 px-2"),children:"Tokens"}),s.jsx("th",{className:H(tt,"text-right py-2 px-2"),children:"Time (ms)"}),s.jsx("th",{className:H(tt,"text-right py-2 px-2"),children:"Completed"}),s.jsx("th",{className:H(tt,"text-center py-2 px-2")})]})}),s.jsx("tbody",{children:w.slice(0,50).map((N,_)=>{const S=N.status==="completed"||N.status==="success",k=N.inputTokens||N.tokensIn||0,A=N.outputTokens||N.tokensOut||0;return s.jsxs("tr",{className:"hover:bg-[var(--gm-surface-hover)] transition-colors cursor-pointer",onClick:()=>d(N),children:[s.jsx("td",{className:"text-xs text-[var(--gm-text-primary)] py-1.5 px-2 truncate max-w-[200px]",children:N.context||N.type||N.task||N.id||""}),s.jsxs("td",{className:"text-[10px] text-[var(--gm-text-tertiary)] py-1.5 px-2",children:[N.provider||"",N.model?` / ${N.model}`:""]}),s.jsx("td",{className:"text-center py-1.5 px-2",children:s.jsx("span",{className:H("inline-block w-2 h-2 rounded-full",S?"bg-green-400":"bg-red-400")})}),s.jsx("td",{className:"text-[10px] text-[var(--gm-text-tertiary)] py-1.5 px-2 text-right tabular-nums",children:k>0?`${k}${A}`:""}),s.jsx("td",{className:"text-[10px] text-[var(--gm-text-tertiary)] py-1.5 px-2 text-right tabular-nums",children:N.processingTime??N.durationMs??""}),s.jsx("td",{className:"text-[10px] text-[var(--gm-text-tertiary)] py-1.5 px-2 text-right",children:N.completedAt?new Date(N.completedAt).toLocaleTimeString():""}),s.jsx("td",{className:"text-center py-1.5 px-2",children:s.jsx("button",{className:"text-[10px] text-[var(--gm-accent-primary)] hover:underline",children:"View"})})]},_)})})]})})]}),c&&s.jsx($6e,{request:c,onClose:()=>d(null)})]})}function $6e({request:e,onClose:t}){const r=e.status==="completed"||e.status==="success",n=e.inputTokens||e.tokensIn||0,a=e.outputTokens||e.tokensOut||0,i=e.processingTime||e.durationMs||0,o=e.estimatedCost||e.cost||0,c=d=>{navigator.clipboard.writeText(d),G.success("Copied to clipboard")};return s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",onClick:t,children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),s.jsxs("div",{className:H(Ae,"relative w-[900px] max-w-[90vw] max-h-[85vh] flex flex-col"),onClick:d=>d.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-[var(--gm-border-primary)]",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:H("w-10 h-10 rounded-lg flex items-center justify-center",r?"bg-green-500/15":"bg-red-500/15"),children:r?s.jsx(Gn,{className:"w-5 h-5 text-green-400"}):s.jsx(vr,{className:"w-5 h-5 text-red-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold text-[var(--gm-text-primary)]",children:"LLM Request Details"}),s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] font-mono",children:e.id||""})]})]}),s.jsx("button",{onClick:t,className:"p-1.5 rounded-lg text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)]",children:s.jsx(mn,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-5 py-4 space-y-5",children:[s.jsxs("div",{className:"flex flex-wrap gap-4 text-[10px]",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-[var(--gm-text-tertiary)]",children:"Context:"})," ",s.jsx("span",{className:"text-[var(--gm-text-primary)] font-medium ml-1",children:e.context||e.type||""})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-[var(--gm-text-tertiary)]",children:"Provider:"})," ",s.jsx("span",{className:"text-[var(--gm-text-primary)] font-medium ml-1",children:e.provider||""})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-[var(--gm-text-tertiary)]",children:"Model:"})," ",s.jsx("span",{className:"text-[var(--gm-text-primary)] font-medium ml-1",children:e.model||""})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-[var(--gm-text-tertiary)]",children:"Status:"})," ",s.jsx("span",{className:H("font-semibold ml-1",r?"text-green-400":"text-red-400"),children:e.status||""})]})]}),s.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[s.jsx(xr,{label:"Input Tokens",value:n.toLocaleString()}),s.jsx(xr,{label:"Output Tokens",value:a.toLocaleString()}),s.jsx(xr,{label:"Duration (ms)",value:Number(i).toLocaleString()}),s.jsx(xr,{label:"Est. Cost",value:o?`$${Number(o).toFixed(6)}`:""})]}),s.jsxs("div",{className:H(Ae,"p-4"),children:[s.jsx("h4",{className:H(De,"mb-2"),children:"Timeline"}),s.jsxs("div",{className:"flex flex-wrap gap-6 text-[10px]",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-[var(--gm-text-tertiary)]",children:"Queued:"})," ",s.jsx("span",{className:"text-[var(--gm-text-primary)] ml-1",children:e.queuedAt?new Date(e.queuedAt).toLocaleString():""})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-[var(--gm-text-tertiary)]",children:"Started:"})," ",s.jsx("span",{className:"text-[var(--gm-text-primary)] ml-1",children:e.startedAt?new Date(e.startedAt).toLocaleString():""})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-[var(--gm-text-tertiary)]",children:"Completed:"})," ",s.jsx("span",{className:"text-[var(--gm-text-primary)] ml-1",children:e.completedAt?new Date(e.completedAt).toLocaleString():""})]})]})]}),(e.error||e.errorMessage)&&s.jsxs("div",{className:"rounded-lg border border-red-500/30 bg-red-500/5 p-4",children:[s.jsxs("h4",{className:"text-xs font-bold text-red-400 mb-1 flex items-center gap-1.5",children:[s.jsx(vr,{className:"w-3.5 h-3.5"})," Error"]}),s.jsx("p",{className:"text-[10px] text-red-300 font-mono whitespace-pre-wrap",children:e.error||e.errorMessage}),e.attempts&&s.jsxs("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-2",children:["Attempt ",e.attempts,"/",e.maxAttempts||e.maxRetries||3]})]}),(e.prompt||e.input)&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:De,children:"Prompt / Input"}),s.jsx("button",{onClick:()=>c(String(e.prompt||e.input)),className:wt,children:"Copy"})]}),s.jsx("pre",{className:"text-[10px] text-[var(--gm-text-secondary)] bg-[var(--gm-bg-tertiary)] rounded-lg p-3 max-h-[300px] overflow-auto whitespace-pre-wrap font-mono",children:String(e.prompt||e.input)})]}),(e.response||e.output||e.result)&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:De,children:"Response / Output"}),s.jsx("button",{onClick:()=>c(String(e.response||e.output||e.result)),className:wt,children:"Copy"})]}),s.jsx("pre",{className:"text-[10px] text-[var(--gm-text-secondary)] bg-[var(--gm-bg-tertiary)] rounded-lg p-3 max-h-[300px] overflow-auto whitespace-pre-wrap font-mono",children:String(e.response||e.output||e.result)})]}),s.jsxs("details",{className:"group",children:[s.jsx("summary",{className:"cursor-pointer text-[10px] text-[var(--gm-accent-primary)] hover:underline",children:"Show Raw JSON Data"}),s.jsx("pre",{className:"mt-2 text-[10px] text-[var(--gm-text-tertiary)] bg-[var(--gm-bg-tertiary)] rounded-lg p-3 max-h-[300px] overflow-auto whitespace-pre-wrap font-mono",children:JSON.stringify(e,null,2)})]})]})]})]})}function z6e(){const{data:e,isLoading:t}=Ale(),{data:r,refetch:n}=Tle(),{data:a}=Ole(),{data:i}=Ple(),{data:o}=Mle(),{data:c}=Rle();Dle();const d=Ile(),f=Lle(),m=$le(),h=zle(),g=Ule(),x=Fle(),w=Ble(),b=qle(),j=Vle(),[N,_]=y.useState("status"),[S,k]=y.useState(""),[A,T]=y.useState(null);if(t)return s.jsx(ws,{});const O=$e(e),P=$e(O.config),R=$e(r),M=$e(a),D=$e(i).graphs??[],z=$e(o),Y=$e(c).providers??[],I=R.nodeCount??R.nodes??0,K=R.edgeCount??R.relationships??0,U=!!R.connected,L=$e(M.metrics??M),F=M.recommendations??[];return s.jsxs("div",{className:"space-y-5",children:[s.jsx(js,{title:"Knowledge Graph",subtitle:`${P.provider||""}  ${U?`${I} nodes  ${K} edges`:"Not connected"}`}),s.jsx("div",{className:H(Ae,"p-1 flex gap-1"),children:["status","operations","graphs","query"].map(q=>s.jsx("button",{onClick:()=>_(q),className:H("flex-1 px-3 py-2 text-[11px] font-medium rounded-lg capitalize transition-colors",N===q?"bg-[var(--gm-accent-primary)]/15 text-[var(--gm-accent-primary)]":"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-secondary)]"),children:q==="status"?"Status & Config":q==="operations"?"Sync & Maintenance":q==="graphs"?`Graphs (${D.length})`:"Query"},q))}),N==="status"&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:H(Ae,"p-4 space-y-3"),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:De,children:"Connection"}),s.jsx("span",{className:H("text-[10px] px-2 py-0.5 rounded-full font-semibold",U?"bg-green-500/15 text-green-400":"bg-red-500/15 text-red-400"),children:U?"Connected":"Disconnected"})]}),[["Provider",P.provider],["Graph Name",P.graphName],["Enabled",P.enabled?"Yes":"No"],["Auto Connect",P.autoConnect?"Yes":"No"],["Config Source",O.source]].map(([q,Z])=>s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase",children:q}),s.jsx("span",{className:"text-xs text-[var(--gm-text-primary)] font-mono",children:String(Z??"")})]},q)),R.message&&s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:R.message}),s.jsxs("button",{onClick:()=>n(),className:H(wt,"w-full justify-center"),children:[s.jsx(Qr,{className:"w-3 h-3"})," Refresh Status"]})]}),s.jsxs("div",{className:H(Ae,"p-4 space-y-3"),children:[s.jsx("h3",{className:De,children:"Statistics"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx(xr,{label:"Nodes",value:I,color:"var(--gm-accent-primary)"}),s.jsx(xr,{label:"Edges",value:K,color:"var(--gm-accent-primary)"})]}),(()=>{const q=$e(R.stats);return Object.keys(q).length>0?s.jsx("div",{className:"space-y-1.5",children:Object.entries(q).map(([Z,B])=>s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] capitalize",children:Z}),s.jsx("span",{className:"text-xs text-[var(--gm-text-primary)] tabular-nums",children:String(B)})]},Z))}):null})()]})]}),(Object.keys(L).length>0||F.length>0)&&s.jsxs("div",{className:H(Ae,"p-5 space-y-3"),children:[s.jsx("h3",{className:De,children:"Graph Insights"}),Object.keys(L).length>0&&s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:Object.entries(L).map(([q,Z])=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase mb-1",children:q.replace(/([A-Z])/g," $1").replace(/_/g," ")}),s.jsx("div",{className:"text-sm font-bold text-[var(--gm-text-primary)] tabular-nums",children:typeof Z=="number"?Z<1?Z.toFixed(3):Z.toFixed(1):String(Z)})]},q))}),F.length>0&&s.jsxs("div",{className:"space-y-1.5 mt-2",children:[s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase",children:"Recommendations"}),F.map((q,Z)=>s.jsxs("div",{className:"flex items-start gap-2 text-[10px]",children:[s.jsx("span",{className:H("shrink-0 mt-0.5",q.priority==="high"?"text-red-400":q.priority==="medium"?"text-amber-400":"text-blue-400"),children:""}),s.jsx("span",{className:"text-[var(--gm-text-secondary)]",children:q.message||q.text||q.description})]},Z))]})]}),Object.keys(z).length>0&&z.ok!==void 0&&s.jsxs("div",{className:H(Ae,"p-4 space-y-2"),children:[s.jsx("h3",{className:De,children:"Sync Status"}),[["Status",z.status??z.syncStatus??""],["Last Sync",z.lastSyncAt?new Date(z.lastSyncAt).toLocaleString():""],["Pending",z.pending??""]].map(([q,Z])=>s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase",children:q}),s.jsx("span",{className:"text-xs text-[var(--gm-text-primary)]",children:String(Z)})]},q))]}),Y.length>0&&s.jsxs("div",{className:H(Ae,"p-4"),children:[s.jsx("h3",{className:H(De,"mb-2"),children:"Available Providers"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:Y.map((q,Z)=>s.jsx("span",{className:H("text-[10px] px-2.5 py-1 rounded-lg border font-medium",(q.id||q.name)===P.provider?"bg-[var(--gm-accent-primary)]/15 border-[var(--gm-accent-primary)]/40 text-[var(--gm-accent-primary)]":"bg-[var(--gm-bg-tertiary)] border-[var(--gm-border-primary)] text-[var(--gm-text-tertiary)]"),children:q.name||q.id||"?"},Z))})]})]}),N==="operations"&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:H(Ae,"p-5 space-y-4"),children:[s.jsx("h3",{className:De,children:"Sync"}),s.jsxs("div",{className:"flex gap-3 flex-wrap",children:[s.jsxs("button",{onClick:()=>d.mutate(void 0,{onSuccess:()=>G.success("Sync complete"),onError:q=>G.error(q.message)}),disabled:d.isPending,className:Dt,children:[d.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Gs,{className:"w-3.5 h-3.5"})," Quick Sync"]}),s.jsxs("button",{onClick:()=>f.mutate(void 0,{onSuccess:()=>G.success("Full sync complete"),onError:q=>G.error(q.message)}),disabled:f.isPending,className:Dt,children:[f.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Qr,{className:"w-3.5 h-3.5"})," Full Sync"]}),s.jsxs("button",{onClick:()=>j.mutate(void 0,{onSuccess:()=>G.success("All projects synced"),onError:q=>G.error(q.message)}),disabled:j.isPending,className:wt,children:[j.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(U6,{className:"w-3.5 h-3.5"})," Sync All Projects"]})]})]}),s.jsxs("div",{className:H(Ae,"p-5 space-y-4"),children:[s.jsx("h3",{className:De,children:"Indexes & Optimization"}),s.jsx("div",{className:"flex gap-3 flex-wrap",children:s.jsxs("button",{onClick:()=>m.mutate(void 0,{onSuccess:()=>G.success("Indexes created"),onError:q=>G.error(q.message)}),disabled:m.isPending,className:wt,children:[m.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(kC,{className:"w-3.5 h-3.5"})," Create Indexes"]})})]}),s.jsxs("div",{className:H(Ae,"p-5 space-y-4"),children:[s.jsx("h3",{className:De,children:"Cleanup"}),s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:"Remove orphaned graphs, duplicate nodes, and stale relationships"}),s.jsxs("div",{className:"flex gap-3 flex-wrap",children:[s.jsxs("button",{onClick:()=>h.mutate(void 0,{onSuccess:q=>G.success(`Cleaned ${q?.deleted??"?"} orphans`),onError:q=>G.error(q.message)}),disabled:h.isPending,className:wt,children:[h.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Et,{className:"w-3.5 h-3.5"})," Cleanup Orphan Graphs"]}),s.jsxs("button",{onClick:()=>g.mutate(void 0,{onSuccess:()=>G.success("Duplicates cleaned"),onError:q=>G.error(q.message)}),disabled:g.isPending,className:wt,children:[g.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(bC,{className:"w-3.5 h-3.5"})," Cleanup Duplicates"]}),s.jsxs("button",{onClick:()=>x.mutate(void 0,{onSuccess:()=>G.success("Sync cleanup done"),onError:q=>G.error(q.message)}),disabled:x.isPending,className:wt,children:[x.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Et,{className:"w-3.5 h-3.5"})," Sync Cleanup"]})]})]})]}),N==="graphs"&&s.jsx("div",{className:"space-y-5",children:D.length>0?s.jsxs("div",{className:H(Ae,"overflow-hidden"),children:[s.jsx("div",{className:"px-5 py-3 border-b border-[var(--gm-border-primary)]",children:s.jsx("h3",{className:De,children:"All Graphs"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b border-[var(--gm-border-primary)]",children:["Graph","Project","Nodes","Edges","Status",""].map(q=>s.jsx("th",{className:H(tt,"px-4 py-2.5 text-left"),children:q},q))})}),s.jsx("tbody",{children:D.map((q,Z)=>{const B=q.name||q.graphName||"",V=B===P.graphName;return s.jsxs("tr",{className:H("border-b border-[var(--gm-border-primary)] last:border-0 hover:bg-[var(--gm-surface-hover)]",V&&"bg-[var(--gm-accent-primary)]/5"),children:[s.jsx("td",{className:"px-4 py-2.5",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-primary)]",children:B}),V&&s.jsx("span",{className:"text-[8px] px-1.5 py-0.5 rounded-full bg-[var(--gm-accent-primary)]/15 text-[var(--gm-accent-primary)] font-bold",children:"ACTIVE"})]})}),s.jsx("td",{className:"px-4 py-2.5 text-[10px] text-[var(--gm-text-tertiary)]",children:q.projectName||q.projectId||""}),s.jsx("td",{className:"px-4 py-2.5 text-[10px] text-[var(--gm-text-primary)] tabular-nums",children:q.nodeCount??q.nodes??""}),s.jsx("td",{className:"px-4 py-2.5 text-[10px] text-[var(--gm-text-primary)] tabular-nums",children:q.edgeCount??q.edges??""}),s.jsx("td",{className:"px-4 py-2.5",children:s.jsx("span",{className:H("text-[9px] px-1.5 py-0.5 rounded-full font-medium",q.orphan?"bg-amber-500/10 text-amber-400":"bg-green-500/10 text-green-400"),children:q.orphan?"Orphan":"Active"})}),s.jsx("td",{className:"px-4 py-2.5",children:!V&&s.jsx("button",{onClick:()=>{confirm(`Delete graph "${B}"?`)&&w.mutate(B,{onSuccess:()=>G.success(`Deleted ${B}`),onError:ee=>G.error(ee.message)})},disabled:w.isPending,className:"text-[9px] text-red-400 hover:underline font-medium",children:"Delete"})})]},Z)})})]})})]}):s.jsx(Ya,{msg:"No graphs found. Connect to a graph provider first."})}),N==="query"&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:H(Ae,"p-5 space-y-3"),children:[s.jsx("h3",{className:De,children:"Cypher Query"}),s.jsx("textarea",{value:S,onChange:q=>k(q.target.value),placeholder:"MATCH (n) RETURN n LIMIT 10",rows:4,className:H(ht,"w-full font-mono text-xs resize-y")}),s.jsxs("button",{onClick:()=>b.mutate({query:S},{onSuccess:q=>{T(q),G.success("Query executed")},onError:q=>G.error(q.message)}),disabled:b.isPending||!S.trim(),className:Dt,children:[b.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(hn,{className:"w-3.5 h-3.5"})," Execute"]})]}),A&&s.jsxs("div",{className:H(Ae,"p-5 space-y-3"),children:[s.jsx("h3",{className:De,children:"Result"}),(()=>{const q=$e(A),Z=q.nodes??[],B=q.edges??q.relationships??[],V=q.rows??q.data??[];return s.jsxs("div",{className:"space-y-3",children:[Z.length>0&&s.jsxs("div",{children:[s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase",children:["Nodes (",Z.length,")"]}),s.jsx("div",{className:"mt-1 max-h-48 overflow-y-auto",children:Z.slice(0,50).map((ee,ae)=>s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 border-b border-[var(--gm-border-primary)] last:border-0 text-[10px]",children:[s.jsx("span",{className:"text-[var(--gm-accent-primary)] font-medium",children:ee.label||ee.labels?.[0]||ee.type||"?"}),s.jsx("span",{className:"text-[var(--gm-text-primary)] truncate flex-1",children:ee.name||ee.title||ee.id||JSON.stringify(ee.properties||ee).substring(0,80)})]},ae))})]}),B.length>0&&s.jsxs("div",{children:[s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase",children:["Relationships (",B.length,")"]}),s.jsx("div",{className:"mt-1 max-h-48 overflow-y-auto",children:B.slice(0,50).map((ee,ae)=>s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 border-b border-[var(--gm-border-primary)] last:border-0 text-[10px]",children:[s.jsx("span",{className:"text-[var(--gm-text-primary)]",children:ee.source||ee.from||"?"}),s.jsxs("span",{className:"text-[var(--gm-accent-primary)] font-medium",children:[" ",ee.type||ee.label||"?"," "]}),s.jsx("span",{className:"text-[var(--gm-text-primary)]",children:ee.target||ee.to||"?"})]},ae))})]}),V.length>0&&Z.length===0&&B.length===0&&s.jsx("pre",{className:"text-[10px] text-[var(--gm-text-secondary)] font-mono bg-[var(--gm-bg-tertiary)] p-3 rounded-lg overflow-auto max-h-64",children:JSON.stringify(V,null,2)}),Z.length===0&&B.length===0&&V.length===0&&s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:"No results returned."})]})})()]})]})]})}function U6e(){const{data:e,isLoading:t}=Kle(),{data:r}=Hle(),{data:n}=Gle(),{data:a}=Wle(),{data:i}=Qle(),{data:o}=Yle(),c=Xle(),d=Zle(),f=Jle(),m=ece(),h=tce(),g=rce(),x=nce(),w=sce(),b=ace(),j=ice(),N=oce(),_=lce(),S=cce(),[k,A]=y.useState("schema"),[T,O]=y.useState(""),[P,R]=y.useState("");if(t)return s.jsx(ws,{});const M=$e(e),D=M.entityTypes??M.entities??[],z=M.relationTypes??M.relations??[],Y=$e(r),I=$e(Y.stats),K=Object.values(I).reduce((J,se)=>J+(typeof se=="number"?se:0),0),U=["#38bdf8","#34d399","#fbbf24","#818cf8","#f472b6","#94a3b8","#fb923c","#a78bfa"],L=$e(n).suggestions??[],F=$e(a),q=$e(i),Z=$e(o).changes??[],B=$e(c.data),V=$e(d.data),ee=$e(f.data),ae=L.filter(J=>J.status==="pending"||!J.status);return s.jsxs("div",{className:"space-y-5",children:[s.jsx(js,{title:"Ontology",subtitle:`${D.length} entity types  ${z.length} relation types  ${K} instances`}),s.jsx("div",{className:H(Ae,"p-1 flex gap-1"),children:["schema","analysis","maintenance"].map(J=>s.jsx("button",{onClick:()=>A(J),className:H("flex-1 px-3 py-2 text-[11px] font-medium rounded-lg capitalize transition-colors",k===J?"bg-[var(--gm-accent-primary)]/15 text-[var(--gm-accent-primary)]":"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-secondary)]"),children:J==="schema"?`Schema (${D.length+z.length})`:J==="analysis"?`Analysis (${ae.length} pending)`:"Maintenance"},J))}),k==="schema"&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:H(Ae,"overflow-hidden"),children:[s.jsxs("div",{className:"px-5 py-3 border-b border-[var(--gm-border-primary)] flex items-center justify-between",children:[s.jsx("h3",{className:De,children:"Entity Types"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{value:T,onChange:J=>O(J.target.value),placeholder:"New entity type...",className:H(ht,"w-40 py-1 text-xs")}),s.jsxs("button",{disabled:!T.trim()||_.isPending,onClick:()=>_.mutate({name:T.trim()},{onSuccess:()=>{G.success(`Entity type "${T}" added`),O("")},onError:J=>G.error(J.message)}),className:Dt,children:[_.isPending?s.jsx(ye,{className:"w-3 h-3 animate-spin"}):s.jsx(br,{className:"w-3 h-3"})," Add"]})]})]}),D.map((J,se)=>{const ne=J.name||J.label||J.type||"Unknown",oe=I[ne]??J.count??0,Q=Array.isArray(J.properties)?J.properties:[],pe=Array.isArray(J.allowedRelations)?J.allowedRelations.length:J.relationCount??0;return s.jsxs("div",{className:"px-5 py-3 border-b border-[var(--gm-border-primary)] last:border-0 hover:bg-[var(--gm-surface-hover)] transition-colors",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"w-2.5 h-2.5 rounded-full shrink-0 mr-3",style:{backgroundColor:J.color||U[se%U.length]}}),s.jsx("span",{className:"text-xs font-semibold text-[var(--gm-text-primary)] flex-1",children:ne}),s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] tabular-nums px-2 py-0.5 rounded bg-[var(--gm-bg-tertiary)] mx-1",children:[oe," instances"]}),s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] tabular-nums mx-1",children:[Q.length," props"]}),s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] tabular-nums mx-1",children:[pe," rels"]})]}),Q.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 mt-1.5 ml-[22px]",children:Q.map((he,te)=>s.jsxs("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)] border border-[var(--gm-border-primary)]",children:[he.name||he,he.type?`: ${he.type}`:""]},te))})]},se)}),D.length===0&&s.jsx(Ya,{msg:"No entity types defined."})]}),s.jsxs("div",{className:H(Ae,"overflow-hidden"),children:[s.jsxs("div",{className:"px-5 py-3 border-b border-[var(--gm-border-primary)] flex items-center justify-between",children:[s.jsx("h3",{className:De,children:"Relation Types"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{value:P,onChange:J=>R(J.target.value),placeholder:"New relation type...",className:H(ht,"w-40 py-1 text-xs")}),s.jsxs("button",{disabled:!P.trim()||S.isPending,onClick:()=>S.mutate({name:P.trim()},{onSuccess:()=>{G.success(`Relation type "${P}" added`),R("")},onError:J=>G.error(J.message)}),className:Dt,children:[S.isPending?s.jsx(ye,{className:"w-3 h-3 animate-spin"}):s.jsx(br,{className:"w-3 h-3"})," Add"]})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b border-[var(--gm-border-primary)]",children:["Relation","From","To","Instances"].map(J=>s.jsx("th",{className:H(tt,"px-4 py-2 text-left"),children:J},J))})}),s.jsx("tbody",{children:z.map((J,se)=>{const ne=J.name||J.type||"";return s.jsxs("tr",{className:"border-b border-[var(--gm-border-primary)] last:border-0 hover:bg-[var(--gm-surface-hover)]",children:[s.jsx("td",{className:"px-4 py-2 text-xs font-medium text-[var(--gm-text-primary)]",children:ne}),s.jsx("td",{className:"px-4 py-2 text-[10px] text-[var(--gm-text-tertiary)]",children:J.from||J.source||"*"}),s.jsx("td",{className:"px-4 py-2 text-[10px] text-[var(--gm-text-tertiary)]",children:J.to||J.target||"*"}),s.jsx("td",{className:"px-4 py-2 text-[10px] text-[var(--gm-text-tertiary)] tabular-nums",children:I[ne]??J.count??0})]},se)})})]})}),z.length===0&&s.jsx(Ya,{msg:"No relation types defined."})]})]}),k==="analysis"&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:H(Ae,"p-4 flex items-center gap-3 flex-wrap"),children:[s.jsxs("button",{onClick:()=>m.mutate(void 0,{onSuccess:()=>G.success("Graph analysis complete"),onError:J=>G.error(J.message)}),disabled:m.isPending,className:Dt,children:[m.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(hn,{className:"w-3.5 h-3.5"}),"Analyze Graph"]}),s.jsxs("button",{onClick:()=>h.mutate(void 0,{onSuccess:()=>G.success("Sync complete"),onError:J=>G.error(J.message)}),disabled:h.isPending,className:wt,children:[h.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Gs,{className:"w-3.5 h-3.5"}),"Force Sync"]}),s.jsxs("button",{onClick:()=>N.mutate(void 0,{onSuccess:()=>G.success("Relationship inference complete"),onError:J=>G.error(J.message)}),disabled:N.isPending,className:wt,children:[N.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(yl,{className:"w-3.5 h-3.5"}),"Infer Relationships"]}),ae.length>0&&s.jsxs("button",{onClick:()=>w.mutate({minConfidence:.8},{onSuccess:J=>G.success(`Auto-approved ${J?.approved??"?"} suggestions`),onError:J=>G.error(J.message)}),disabled:w.isPending,className:wt,children:[w.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Gn,{className:"w-3.5 h-3.5"}),"Auto-Approve (",ae.length,")"]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:H(Ae,"p-4 space-y-2"),children:[s.jsx("h3",{className:De,children:"Worker Status"}),[["Running",F.isRunning?"Yes":"No"],["Last Run",F.lastRun?new Date(F.lastRun).toLocaleString():""],["Total Runs",String(F.totalRuns??"")],["Last Result",String(F.lastResult??"")]].map(([J,se])=>s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase",children:J}),s.jsx("span",{className:"text-xs text-[var(--gm-text-primary)]",children:se})]},J)),s.jsx("div",{className:"flex gap-2 pt-1",children:["full_analysis","entity_extraction","relation_inference"].map(J=>s.jsx("button",{onClick:()=>b.mutate({type:J},{onSuccess:()=>G.success(`Worker triggered: ${J}`),onError:se=>G.error(se.message)}),disabled:b.isPending,className:"text-[9px] px-2 py-1 rounded bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-secondary)] border border-[var(--gm-border-primary)]",children:J.replace(/_/g," ")},J))})]}),s.jsxs("div",{className:H(Ae,"p-4 space-y-2"),children:[s.jsx("h3",{className:De,children:"Sync Status"}),[["Status",String(q.status??q.syncStatus??"")],["Last Sync",q.lastSyncAt?new Date(q.lastSyncAt).toLocaleString():""],["Entity Count",String(q.entityCount??"")],["Relation Count",String(q.relationCount??"")]].map(([J,se])=>s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase",children:J}),s.jsx("span",{className:"text-xs text-[var(--gm-text-primary)]",children:se})]},J))]})]}),L.length>0&&s.jsxs("div",{className:H(Ae,"overflow-hidden"),children:[s.jsx("div",{className:"px-5 py-3 border-b border-[var(--gm-border-primary)]",children:s.jsxs("h3",{className:De,children:["AI Suggestions (",ae.length," pending)"]})}),s.jsx("div",{className:"max-h-72 overflow-y-auto",children:L.slice(0,30).map((J,se)=>{const ne=J.status==="pending"||!J.status;return s.jsxs("div",{className:"flex items-center px-5 py-3 border-b border-[var(--gm-border-primary)] last:border-0 hover:bg-[var(--gm-surface-hover)]",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:H("text-[9px] px-1.5 py-0.5 rounded-full font-medium border capitalize",J.type==="entity"?"bg-blue-500/10 border-blue-500/30 text-blue-400":"bg-purple-500/10 border-purple-500/30 text-purple-400"),children:J.type||"unknown"}),s.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-primary)] truncate",children:J.name||J.label||J.suggestion||""}),s.jsx("span",{className:H("text-[9px] px-1.5 py-0.5 rounded-full capitalize",ne?"bg-amber-500/10 text-amber-400":J.status==="approved"?"bg-green-500/10 text-green-400":"bg-red-500/10 text-red-400"),children:J.status||"pending"}),J.confidence&&s.jsxs("span",{className:"text-[9px] text-[var(--gm-text-tertiary)] tabular-nums",children:[(Number(J.confidence)*100).toFixed(0),"%"]})]}),J.reason&&s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-0.5 truncate",children:J.reason})]}),ne&&s.jsxs("div",{className:"flex gap-1.5 ml-3 shrink-0",children:[s.jsx("button",{onClick:()=>g.mutate({id:J.id},{onSuccess:()=>G.success("Approved"),onError:oe=>G.error(oe.message)}),className:"text-[9px] px-2 py-1 rounded bg-green-500/10 text-green-400 hover:bg-green-500/20 border border-green-500/30",children:"Approve"}),s.jsx("button",{onClick:()=>x.mutate({id:J.id},{onSuccess:()=>G.success("Rejected"),onError:oe=>G.error(oe.message)}),className:"text-[9px] px-2 py-1 rounded bg-red-500/10 text-red-400 hover:bg-red-500/20 border border-red-500/30",children:"Reject"})]})]},se)})})]}),L.length===0&&s.jsx(Ya,{msg:"No suggestions. Run 'Analyze Graph' to generate AI suggestions."}),Z.length>0&&s.jsxs("div",{className:H(Ae,"overflow-hidden"),children:[s.jsx("div",{className:"px-5 py-3 border-b border-[var(--gm-border-primary)]",children:s.jsx("h3",{className:De,children:"Change History"})}),s.jsx("div",{className:"max-h-48 overflow-y-auto",children:Z.slice(0,20).map((J,se)=>s.jsxs("div",{className:"flex items-center px-5 py-2 border-b border-[var(--gm-border-primary)] last:border-0 text-[10px]",children:[s.jsx("span",{className:"text-[var(--gm-text-tertiary)] w-36 shrink-0 tabular-nums",children:J.timestamp?new Date(J.timestamp).toLocaleString():""}),s.jsx("span",{className:H("px-1.5 py-0.5 rounded-full mr-2 capitalize font-medium border",J.action==="add"?"bg-green-500/10 border-green-500/30 text-green-400":J.action==="remove"?"bg-red-500/10 border-red-500/30 text-red-400":"bg-blue-500/10 border-blue-500/30 text-blue-400"),children:J.action||""}),s.jsx("span",{className:"text-[var(--gm-text-primary)] flex-1 truncate",children:J.description||J.detail||`${J.type}: ${J.name}`})]},se))})]})]}),k==="maintenance"&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:H(Ae,"p-4 flex items-center gap-3 flex-wrap"),children:[s.jsxs("button",{onClick:()=>c.refetch(),disabled:c.isFetching,className:wt,children:[c.isFetching?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(cf,{className:"w-3.5 h-3.5"}),"Validate Compliance"]}),s.jsxs("button",{onClick:()=>d.refetch(),disabled:d.isFetching,className:wt,children:[d.isFetching?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(F6,{className:"w-3.5 h-3.5"}),"Diff Schema vs Graph"]}),s.jsxs("button",{onClick:()=>f.refetch(),disabled:f.isFetching,className:wt,children:[f.isFetching?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(bs,{className:"w-3.5 h-3.5"}),"Find Unused Types"]})]}),B.ok&&s.jsxs("div",{className:H(Ae,"p-5 space-y-3"),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h3",{className:De,children:"Compliance"}),s.jsxs("span",{className:H("text-xs font-bold tabular-nums",Number(B.score)>=80?"text-green-400":Number(B.score)>=50?"text-amber-400":"text-red-400"),children:[B.score,"%"]}),s.jsx("span",{className:H("text-[9px] px-2 py-0.5 rounded-full",B.valid?"bg-green-500/10 text-green-400":"bg-amber-500/10 text-amber-400"),children:B.valid?"Compliant":"Issues Found"})]}),Array.isArray(B.issues)&&B.issues.length>0&&s.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:B.issues.map((J,se)=>s.jsxs("div",{className:"flex items-start gap-2 text-[10px]",children:[s.jsx("span",{className:H("shrink-0 mt-0.5",J.type==="error"?"text-red-400":"text-amber-400"),children:J.type==="error"?"":""}),s.jsx("span",{className:"text-[var(--gm-text-secondary)]",children:J.message})]},se))})]}),V.ok&&s.jsxs("div",{className:H(Ae,"p-5 space-y-3"),children:[s.jsx("h3",{className:De,children:"Schema vs Graph Diff"}),V.diff&&(()=>{const J=V.diff;return[{key:"missingInSchema",label:"In graph but not in schema",color:"text-amber-400"},{key:"missingInGraph",label:"In schema but not in graph",color:"text-blue-400"},{key:"matching",label:"Matching",color:"text-green-400"}].map(({key:ne,label:oe,color:Q})=>{const pe=J[ne];return!Array.isArray(pe)||pe.length===0?null:s.jsxs("div",{children:[s.jsxs("span",{className:H("text-[10px] font-medium",Q),children:[oe," (",pe.length,")"]}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:pe.map((he,te)=>s.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)] border border-[var(--gm-border-primary)]",children:typeof he=="string"?he:he.name||"?"},te))})]},ne)})})()]}),ee.ok&&s.jsxs("div",{className:H(Ae,"p-5 space-y-3"),children:[s.jsx("h3",{className:De,children:"Unused Types"}),(()=>{const J=ee.entities??[],se=ee.relations??[];return J.length===0&&se.length===0?s.jsx("p",{className:"text-[10px] text-green-400",children:"All types are in use."}):s.jsxs(s.Fragment,{children:[J.length>0&&s.jsxs("div",{children:[s.jsxs("span",{className:"text-[10px] text-amber-400 font-medium",children:["Unused entity types (",J.length,")"]}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:J.map(ne=>s.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-amber-500/10 text-amber-400 border border-amber-500/30",children:ne},ne))})]}),se.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsxs("span",{className:"text-[10px] text-amber-400 font-medium",children:["Unused relation types (",se.length,")"]}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:se.map(ne=>s.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-amber-500/10 text-amber-400 border border-amber-500/30",children:ne},ne))})]}),s.jsxs("button",{onClick:()=>j.mutate({entities:J,relations:se},{onSuccess:()=>G.success("Cleanup complete"),onError:ne=>G.error(ne.message)}),disabled:j.isPending,className:Dt,children:[j.isPending?s.jsx(ye,{className:"w-3 h-3 animate-spin"}):s.jsx(Et,{className:"w-3 h-3"})," Cleanup Unused"]})]})})()]}),!B.ok&&!V.ok&&!ee.ok&&s.jsx(Ya,{msg:"Run a check above to see results."})]}),Y.message&&s.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:Y.message})]})}const kW={extraction:"bg-blue-500/15 text-blue-400 border-blue-500/30",analysis:"bg-purple-500/15 text-purple-400 border-purple-500/30",template:"bg-amber-500/15 text-amber-400 border-amber-500/30",sprint:"bg-green-500/15 text-green-400 border-green-500/30",report:"bg-rose-500/15 text-rose-400 border-rose-500/30"};function F6e(){const{data:e,isLoading:t,error:r}=Goe(),n=Woe(),a=Xoe(),[i,o]=y.useState("all"),[c,d]=y.useState(""),[f,m]=y.useState(null),[h,g]=y.useState(null),x=e?.templates??[];if(t)return s.jsx(ws,{});if(r)return s.jsx(GA,{msg:"Unable to load prompts."});const w=["all",...Array.from(new Set(x.map(_=>_.category))).sort()],b=x.filter(_=>{if(i!=="all"&&_.category!==i)return!1;if(c){const S=c.toLowerCase();return _.name.toLowerCase().includes(S)||_.id.toLowerCase().includes(S)||(_.description||"").toLowerCase().includes(S)}return!0}),j=x.reduce((_,S)=>(_[S.category]=(_[S.category]||0)+1,_),{}),N=_=>{n.mutate({key:_.id,is_active:!_.isActive},{onSuccess:()=>G.success(`${_.name} ${_.isActive?"deactivated":"activated"}`),onError:S=>G.error(S.message)})};return s.jsxs("div",{className:"space-y-5",children:[s.jsx(js,{title:"Prompt Templates",subtitle:`${x.length} templates with auto-versioning across ${Object.keys(j).length} categories`}),s.jsxs("div",{className:H(Ae,"p-3 flex items-center gap-2 flex-wrap"),children:[w.map(_=>s.jsx("button",{onClick:()=>o(_),className:H("px-3 py-1.5 text-[11px] font-medium rounded-lg border transition-all capitalize",i===_?"bg-[var(--gm-accent-primary)]/15 border-[var(--gm-accent-primary)]/40 text-[var(--gm-accent-primary)]":"bg-[var(--gm-bg-tertiary)] border-transparent text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-secondary)]"),children:_==="all"?`All (${x.length})`:`${_} (${j[_]||0})`},_)),s.jsx("div",{className:"ml-auto flex items-center gap-2",children:s.jsxs("div",{className:"relative",children:[s.jsx(bs,{className:"absolute left-2.5 top-1/2 -translate-y-1/2 w-3 h-3 text-[var(--gm-text-tertiary)]"}),s.jsx("input",{value:c,onChange:_=>d(_.target.value),placeholder:"Search prompts...",className:H(ht,"w-48 pl-7 py-1.5 text-xs")})]})})]}),s.jsx("div",{className:"space-y-3",children:b.map(_=>s.jsxs("div",{className:H(Ae,"overflow-hidden group",!_.isActive&&"opacity-60"),children:[s.jsxs("div",{className:"px-5 py-3 flex items-start gap-3",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"text-sm font-semibold text-[var(--gm-text-primary)]",children:_.name||"(unnamed)"}),s.jsx("span",{className:H("text-[9px] px-2 py-0.5 rounded-full font-medium border capitalize",kW[_.category]||"bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)] border-[var(--gm-border-primary)]"),children:_.category}),s.jsx("button",{onClick:()=>N(_),className:H("text-[9px] px-2 py-0.5 rounded-full font-medium border cursor-pointer transition-colors",_.isActive?"bg-green-500/10 border-green-500/30 text-green-400 hover:bg-green-500/20":"bg-red-500/10 border-red-500/30 text-red-400 hover:bg-red-500/20"),children:_.isActive?"Active":"Inactive"})]}),_.description&&s.jsx("p",{className:"text-[11px] text-[var(--gm-text-tertiary)] mt-1 line-clamp-1",children:_.description}),s.jsxs("div",{className:"flex items-center gap-1.5 mt-2 flex-wrap",children:[s.jsx("span",{className:"text-[9px] font-mono text-[var(--gm-text-tertiary)]",children:_.id}),s.jsx("span",{className:"text-[8px] text-[var(--gm-text-tertiary)]",children:""}),s.jsx("span",{className:"text-[9px] text-[var(--gm-text-tertiary)] tabular-nums",children:_.lastModified}),s.jsx("span",{className:"text-[8px] text-[var(--gm-text-tertiary)]",children:""}),_.variables?.slice(0,5).map(S=>s.jsx("span",{className:"text-[8px] px-1.5 py-0.5 rounded bg-[var(--gm-bg-tertiary)] text-[var(--gm-accent-primary)] font-mono border border-[var(--gm-border-primary)]",children:`{{${S}}}`},S)),(_.variables?.length||0)>5&&s.jsxs("span",{className:"text-[8px] text-[var(--gm-text-tertiary)]",children:["+",_.variables.length-5," more"]})]})]}),s.jsxs("div",{className:"flex items-center gap-1.5 shrink-0",children:[s.jsx("button",{onClick:()=>g(h===_.id?null:_.id),title:"Version History",className:"p-1.5 rounded-lg hover:bg-[var(--gm-surface-hover)] text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors",children:s.jsx(hh,{className:"w-3.5 h-3.5"})}),s.jsxs("button",{onClick:()=>m(_),className:Dt,children:[s.jsx(Qte,{className:"w-3 h-3"})," Edit"]})]})]}),s.jsx("div",{className:"px-5 pb-3",children:s.jsxs("pre",{className:"text-[10px] text-[var(--gm-text-tertiary)]/70 max-h-12 overflow-hidden whitespace-pre-wrap font-mono leading-relaxed",children:[_.prompt.substring(0,300),_.prompt.length>300?"":""]})}),h===_.id&&s.jsx(q6e,{promptKey:_.id,currentPrompt:_.prompt,onRestore:S=>a.mutate({key:_.id,version:S},{onSuccess:()=>{G.success(`Restored v${S}`),g(null)},onError:k=>G.error(k.message)})})]},_.id))}),b.length===0&&s.jsx(Ya,{msg:c?"No prompts match your search.":"No prompt templates found."}),f&&s.jsx(B6e,{prompt:f,onClose:()=>m(null),onSave:(_,S,k)=>{const A={key:f.id};_!==f.prompt&&(A.prompt=_,S&&(A.change_reason=S)),k!==void 0&&k!==f.description&&(A.description=k),n.mutate(A,{onSuccess:()=>{G.success("Prompt saved"),m(null)},onError:T=>G.error(T.message)})},isSaving:n.isPending})]})}function B6e({prompt:e,onClose:t,onSave:r,isSaving:n}){const[a,i]=y.useState(e.prompt),[o,c]=y.useState(e.description||""),[d,f]=y.useState(""),[m,h]=y.useState("edit"),g=y.useRef(null),x=["document","transcript","conversation","vision","email"].includes(e.id)?e.id:null,{data:w}=Zoe(m==="preview"&&x?x:null),b=$e(w),j=S=>{const k=g.current;if(!k)return;const A=k.selectionStart,T=k.selectionEnd,O=`{{${S}}}`,P=a.substring(0,A)+O+a.substring(T);i(P),requestAnimationFrame(()=>{k.focus(),k.setSelectionRange(A+O.length,A+O.length)})},N=a!==e.prompt||o!==(e.description||""),_=a.split(`
`).length;return s.jsx(Ws,{open:!0,onClose:t,children:s.jsxs(ui,{className:"!max-w-5xl !max-h-[95vh] !p-0 flex flex-col bg-[var(--gm-surface-primary)] border-[var(--gm-border-primary)]",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-[var(--gm-border-primary)] flex items-center justify-between shrink-0",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(e8,{className:"w-4 h-4 text-[var(--gm-accent-primary)]"}),s.jsx("h2",{className:"text-sm font-bold text-[var(--gm-text-primary)]",children:e.name||"(unnamed)"}),s.jsx("span",{className:H("text-[9px] px-2 py-0.5 rounded-full font-medium border capitalize",kW[e.category]||"bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)] border-[var(--gm-border-primary)]"),children:e.category}),s.jsx("span",{className:"text-[9px] font-mono text-[var(--gm-text-tertiary)]",children:e.id})]}),s.jsx("input",{value:o,onChange:S=>c(S.target.value),placeholder:"Add a description...",className:"mt-1.5 w-full text-[11px] text-[var(--gm-text-secondary)] bg-transparent border-0 outline-none placeholder:text-[var(--gm-text-placeholder)]"})]}),s.jsx("button",{onClick:t,className:"p-1.5 rounded-lg hover:bg-[var(--gm-surface-hover)]",children:s.jsx(mn,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"})})]}),s.jsxs("div",{className:"px-6 pt-2 flex items-center gap-1 border-b border-[var(--gm-border-primary)] shrink-0",children:[["edit","preview"].map(S=>s.jsx("button",{onClick:()=>h(S),className:H("px-3 py-2 text-[11px] font-medium capitalize border-b-2 -mb-px transition-colors",m===S?"border-[var(--gm-accent-primary)] text-[var(--gm-accent-primary)]":"border-transparent text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-secondary)]"),children:S==="edit"?"Editor":"Preview"},S)),s.jsxs("span",{className:"ml-auto text-[9px] text-[var(--gm-text-tertiary)] tabular-nums",children:[_," lines  ",a.length," chars"]})]}),s.jsx("div",{className:"flex-1 min-h-0 overflow-hidden flex",children:m==="edit"?s.jsxs("div",{className:"flex flex-1 min-h-0",children:[s.jsx("div",{className:"flex-1 overflow-auto p-4",children:s.jsx("textarea",{ref:g,value:a,onChange:S=>i(S.target.value),className:"w-full h-full min-h-[400px] bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg p-4 font-mono text-xs text-[var(--gm-text-primary)] resize-none outline-none focus:border-[var(--gm-border-focus)] focus:shadow-[var(--shadow-focus)] leading-relaxed",spellCheck:!1})}),s.jsxs("div",{className:"w-56 border-l border-[var(--gm-border-primary)] overflow-y-auto p-3 shrink-0 bg-[var(--gm-bg-secondary)]",children:[s.jsx("div",{className:H(De,"mb-2"),children:"Variables"}),s.jsx("p",{className:"text-[9px] text-[var(--gm-text-tertiary)] mb-3",children:"Click to insert at cursor position"}),s.jsx("div",{className:"space-y-1",children:e.variables.map(S=>s.jsx("button",{onClick:()=>j(S),className:"w-full text-left px-2 py-1.5 rounded-lg text-[10px] font-mono bg-[var(--gm-bg-tertiary)] text-[var(--gm-accent-primary)] hover:bg-[var(--gm-accent-primary)]/10 border border-[var(--gm-border-primary)] transition-colors truncate",children:`{{${S}}}`},S))}),e.variables.length===0&&s.jsx("p",{className:"text-[9px] text-[var(--gm-text-tertiary)] italic",children:"No variables detected"}),s.jsx("div",{className:H(De,"mt-4 mb-2"),children:"Common Variables"}),s.jsx("div",{className:"space-y-1",children:["CONTENT","FILENAME","ONTOLOGY_CONTEXT","CONTACTS_INDEX","ORG_INDEX","PROJECT_INDEX"].filter(S=>!e.variables.includes(S)).map(S=>s.jsx("button",{onClick:()=>j(S),className:"w-full text-left px-2 py-1.5 rounded-lg text-[10px] font-mono bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-accent-primary)]/10 border border-[var(--gm-border-primary)] transition-colors truncate",children:`{{${S}}}`},S))})]})]}):s.jsx("div",{className:"flex-1 overflow-auto p-6",children:x?b.prompt?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:H(De),children:["Rendered Prompt (",x,")"]}),s.jsx("pre",{className:"text-[11px] font-mono text-[var(--gm-text-secondary)] whitespace-pre-wrap leading-relaxed bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg p-4 max-h-[60vh] overflow-auto",children:typeof b.prompt=="string"?b.prompt:typeof b.prompt=="object"&&b.prompt!==null?JSON.stringify(b.prompt,null,2):String(b.prompt)}),b.ontologyContext&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:H(De,"mt-4"),children:"Ontology Context"}),s.jsx("pre",{className:"text-[10px] font-mono text-[var(--gm-text-tertiary)] whitespace-pre-wrap bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg p-3 max-h-40 overflow-auto",children:JSON.stringify(b.ontologyContext,null,2)})]})]}):s.jsx("div",{className:"text-xs text-[var(--gm-text-tertiary)] py-8 text-center",children:"Loading preview..."}):s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:H(De),children:"Current Template"}),s.jsx("pre",{className:"text-[11px] font-mono text-[var(--gm-text-secondary)] whitespace-pre-wrap leading-relaxed bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg p-4 max-h-[60vh] overflow-auto",children:a}),s.jsx("p",{className:"text-[9px] text-[var(--gm-text-tertiary)]",children:"Live preview is available for: document, transcript, conversation, vision, email prompts."})]})})}),s.jsxs("div",{className:"px-6 py-3 border-t border-[var(--gm-border-primary)] flex items-center gap-3 shrink-0 bg-[var(--gm-bg-secondary)]",children:[s.jsx("input",{value:d,onChange:S=>f(S.target.value),placeholder:"Change reason (optional)...",className:H(ht,"flex-1 py-1.5 text-xs")}),s.jsxs("button",{onClick:t,className:wt,children:[s.jsx(mn,{className:"w-3 h-3"})," Cancel"]}),s.jsxs("button",{onClick:()=>r(a,d,o),disabled:n||!N,className:Dt,children:[n?s.jsx(ye,{className:"w-3 h-3 animate-spin"}):s.jsx(Us,{className:"w-3 h-3"}),n?"Saving...":"Save Changes"]})]})]})})}function q6e({promptKey:e,currentPrompt:t,onRestore:r}){const{data:n,isLoading:a}=Qoe(e),[i,o]=y.useState(null),{data:c}=Yoe(e,i),d=$e(n),f=d.versions??[],h=$e(c).version??{};return a?s.jsxs("div",{className:"px-5 pb-3 text-xs text-[var(--gm-text-tertiary)]",children:[s.jsx(ye,{className:"w-3 h-3 animate-spin inline mr-1"}),"Loading versions..."]}):f.length===0?s.jsx("div",{className:"px-5 pb-3 text-xs text-[var(--gm-text-tertiary)] italic",children:"No previous versions."}):s.jsxs("div",{className:"border-t border-[var(--gm-border-primary)] bg-[var(--gm-bg-secondary)]",children:[s.jsxs("div",{className:"px-5 pt-3 pb-2 flex items-center justify-between",children:[s.jsx("span",{className:De,children:"Version History"}),s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] tabular-nums",children:["Current: v",d.current_version??"?","  ",f.length," previous"]})]}),s.jsx("div",{className:"px-5 pb-3 space-y-1",children:f.map(g=>{const x=g.version,w=i===x;return s.jsxs("div",{children:[s.jsxs("div",{className:H("flex items-center gap-3 text-xs py-1.5 px-2.5 rounded-lg transition-colors",w?"bg-[var(--gm-accent-primary)]/10":"hover:bg-[var(--gm-surface-hover)]"),children:[s.jsxs("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-[var(--gm-bg-tertiary)] text-[var(--gm-accent-primary)] font-mono font-bold tabular-nums",children:["v",x]}),s.jsx("span",{className:"text-[var(--gm-text-tertiary)] tabular-nums text-[10px]",children:g.created_at?new Date(g.created_at).toLocaleString():""}),g.change_reason&&s.jsx("span",{className:"text-[10px] text-[var(--gm-text-secondary)] italic truncate max-w-[200px]",children:g.change_reason}),s.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[s.jsx("button",{onClick:()=>o(w?null:x),className:"text-[10px] text-[var(--gm-accent-primary)] hover:underline font-medium",children:w?"Hide":"View"}),s.jsx("button",{onClick:()=>r(x),className:"text-[10px] text-amber-400 hover:underline font-medium",children:"Restore"})]})]}),w&&h.prompt_template&&s.jsx("div",{className:"mt-1 mb-2 mx-2",children:s.jsx("pre",{className:"text-[10px] font-mono text-[var(--gm-text-tertiary)] whitespace-pre-wrap bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg p-3 max-h-48 overflow-auto leading-relaxed",children:h.prompt_template})})]},g.id)})})]})}function V6e(){const{data:e}=Rce(),t=Tce(),r=Pce(),n=Mce(),a=Oce(),i=e??{};return s.jsxs("div",{className:H(Ae,"p-5 space-y-4"),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:De,children:"Knowledge Pipeline"}),s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:["Embeddings: ",typeof i.embeddingsCount=="number"?i.embeddingsCount:""]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsxs("button",{onClick:()=>t.mutate(void 0,{onSuccess:()=>G.success("Knowledge synthesis complete"),onError:o=>G.error(o.message)}),disabled:t.isPending,className:Dt,children:[t.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(hn,{className:"w-3.5 h-3.5"}),"Synthesize"]}),s.jsxs("button",{onClick:()=>r.mutate(void 0,{onSuccess:()=>G.success("Embeddings generated"),onError:o=>G.error(o.message)}),disabled:r.isPending,className:Dt,children:[r.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Ty,{className:"w-3.5 h-3.5"}),"Generate Embeddings"]}),s.jsxs("button",{onClick:()=>a.mutate(void 0,{onSuccess:()=>G.success("Resynthesis complete"),onError:o=>G.error(o.message)}),disabled:a.isPending,className:wt,children:[a.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Qr,{className:"w-3.5 h-3.5"}),"Resynthesis"]}),s.jsxs("button",{onClick:()=>n.mutate(void 0,{onSuccess:()=>G.success("SOT regenerated"),onError:o=>G.error(o.message)}),disabled:n.isPending,className:wt,children:[n.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Wt,{className:"w-3.5 h-3.5"}),"Regenerate SOT"]})]})]})}function K6e(){const{data:e,isLoading:t}=Voe(),r=Koe(),{data:n}=L8(),{data:a}=UC(),i=FC(),[o,c]=y.useState({}),d=y.useRef(!1),f=$e(e),m=$e(f.processing),h=n??{},g=a??[];y.useEffect(()=>{!d.current&&Object.keys(m).length>0&&(c({chunkSize:m.chunkSize??4e3,chunkOverlap:m.chunkOverlap??200,similarityThreshold:m.similarityThreshold??.9,pdfToImages:m.pdfToImages??!0,autoProcess:m.autoProcess??!0,temperature:m.temperature??.7}),d.current=!0)},[m]);const x=y.useCallback(()=>{r.mutate({key:"processing",value:o,category:"processing"},{onSuccess:()=>G.success("Processing settings saved"),onError:k=>G.error(k.message)})},[o,r]),w=()=>{i.mutate(void 0,{onSuccess:()=>G.success("Processing started"),onError:k=>G.error(k.message)})};if(t)return s.jsx(ws,{});const b=h.status==="processing"||h.status==="running",j=Number(h.progress??0),N=h.currentFile||"",_=Number(h.totalFiles??0),S=Number(h.processedFiles??0);return s.jsxs("div",{className:"space-y-5",children:[s.jsx(js,{title:"Document Processing",subtitle:"Pipeline status, controls, and configuration"}),s.jsxs("div",{className:H(Ae,"p-5 space-y-4"),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:De,children:"Pipeline Status"}),s.jsxs("button",{onClick:w,disabled:i.isPending||b,className:Dt,children:[i.isPending||b?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(hn,{className:"w-3.5 h-3.5"}),b?"Processing...":"Process All Pending"]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[s.jsxs("div",{className:H(Ae,"p-3.5"),children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx("div",{className:H("w-2 h-2 rounded-full",b?"bg-green-400 animate-pulse":h.status==="error"?"bg-red-400":"bg-[var(--gm-text-tertiary)]")}),s.jsx("span",{className:"text-[10px] font-medium text-[var(--gm-text-tertiary)] uppercase",children:"Status"})]}),s.jsx("div",{className:"text-sm font-bold text-[var(--gm-text-primary)] capitalize",children:h.status||"idle"})]}),s.jsxs("div",{className:H(Ae,"p-3.5"),children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx(z6,{className:"w-3 h-3 text-[var(--gm-text-tertiary)]"}),s.jsx("span",{className:"text-[10px] font-medium text-[var(--gm-text-tertiary)] uppercase",children:"Pending"})]}),s.jsx("div",{className:"text-sm font-bold text-[var(--gm-accent-primary)]",children:g.length})]}),s.jsxs("div",{className:H(Ae,"p-3.5"),children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx(F6,{className:"w-3 h-3 text-[var(--gm-text-tertiary)]"}),s.jsx("span",{className:"text-[10px] font-medium text-[var(--gm-text-tertiary)] uppercase",children:"Progress"})]}),s.jsx("div",{className:"text-sm font-bold text-[var(--gm-text-primary)] tabular-nums",children:_>0?`${S}/${_}`:""})]}),s.jsxs("div",{className:H(Ae,"p-3.5"),children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx(fh,{className:"w-3 h-3 text-[var(--gm-text-tertiary)]"}),s.jsx("span",{className:"text-[10px] font-medium text-[var(--gm-text-tertiary)] uppercase",children:"Completion"})]}),s.jsx("div",{className:"text-sm font-bold text-[var(--gm-text-primary)] tabular-nums",children:j>0?`${Math.round(j)}%`:""})]})]}),b&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"w-full h-2 rounded-full bg-[var(--gm-bg-tertiary)] overflow-hidden",children:s.jsx("div",{className:"h-full rounded-full bg-[var(--gm-accent-primary)] transition-all duration-500 ease-out",style:{width:`${Math.max(j,2)}%`}})}),N&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ye,{className:"w-3 h-3 animate-spin text-[var(--gm-accent-primary)]"}),s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] font-mono truncate",children:N})]})]}),h.errors&&Array.isArray(h.errors)&&h.errors.length>0&&s.jsxs("div",{className:"space-y-1",children:[s.jsx("span",{className:H(De,"text-red-400"),children:"Errors"}),h.errors.slice(0,5).map((k,A)=>s.jsx("div",{className:"text-[10px] text-red-400 bg-red-500/10 border border-red-500/20 rounded-lg px-3 py-1.5 font-mono",children:k.file||k.message||JSON.stringify(k)},A))]})]}),s.jsx(V6e,{}),g.length>0&&s.jsxs("div",{className:H(Ae,"overflow-hidden"),children:[s.jsxs("div",{className:"px-5 py-3 border-b border-[var(--gm-border-primary)] flex items-center justify-between",children:[s.jsx("h3",{className:De,children:"Pending Files"}),s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] tabular-nums",children:[g.length," files waiting"]})]}),s.jsx("div",{className:"max-h-48 overflow-y-auto",children:g.map((k,A)=>s.jsxs("div",{className:"px-5 py-2 flex items-center gap-3 border-b border-[var(--gm-border-primary)] last:border-0 hover:bg-[var(--gm-surface-hover)]",children:[s.jsx(Wt,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)] shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-xs text-[var(--gm-text-primary)] truncate",children:k.name||k.filename||k.file||""}),k.type&&s.jsx("span",{className:"text-[9px] text-[var(--gm-text-tertiary)]",children:k.type})]}),k.size&&s.jsxs("span",{className:"text-[9px] text-[var(--gm-text-tertiary)] tabular-nums shrink-0",children:[(Number(k.size)/1024).toFixed(1)," KB"]})]},A))})]}),s.jsxs("div",{className:H(Ae,"p-5 space-y-5"),children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("h3",{className:De,children:"Chunking & Extraction"})}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:H(tt,"block mb-1.5"),children:"Chunk Size (tokens)"}),s.jsx("input",{type:"number",value:o.chunkSize??"",onChange:k=>c(A=>({...A,chunkSize:Number(k.target.value)})),className:H(ht,"w-full")}),s.jsx("p",{className:"text-[9px] text-[var(--gm-text-tertiary)] mt-1",children:"Size of each text chunk for LLM processing"})]}),s.jsxs("div",{children:[s.jsx("label",{className:H(tt,"block mb-1.5"),children:"Chunk Overlap (tokens)"}),s.jsx("input",{type:"number",value:o.chunkOverlap??"",onChange:k=>c(A=>({...A,chunkOverlap:Number(k.target.value)})),className:H(ht,"w-full")}),s.jsx("p",{className:"text-[9px] text-[var(--gm-text-tertiary)] mt-1",children:"Overlap between chunks to preserve context"})]}),s.jsxs("div",{children:[s.jsx("label",{className:H(tt,"block mb-1.5"),children:"Similarity Threshold"}),s.jsx("input",{type:"number",step:"0.01",min:"0",max:"1",value:o.similarityThreshold??"",onChange:k=>c(A=>({...A,similarityThreshold:Number(k.target.value)})),className:H(ht,"w-full")}),s.jsx("p",{className:"text-[9px] text-[var(--gm-text-tertiary)] mt-1",children:"Cosine similarity for dedup (0.0  1.0)"})]})]})]}),s.jsxs("div",{className:H(Ae,"p-5 space-y-5"),children:[s.jsx("h3",{className:De,children:"LLM & Generation"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:H(tt,"block mb-1.5"),children:"Temperature"}),s.jsx("input",{type:"number",step:"0.1",min:"0",max:"2",value:o.temperature??"",onChange:k=>c(A=>({...A,temperature:Number(k.target.value)})),className:H(ht,"w-full")}),s.jsx("p",{className:"text-[9px] text-[var(--gm-text-tertiary)] mt-1",children:"LLM creativity (0 = deterministic, 1+ = creative)"})]}),s.jsx("div",{className:"flex flex-col justify-center",children:s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-[var(--gm-text-primary)] font-medium",children:"PDF to Images"}),s.jsx("p",{className:"text-[9px] text-[var(--gm-text-tertiary)]",children:"Convert PDFs to images for vision model processing"})]}),s.jsx(tb,{checked:!!o.pdfToImages,onChange:k=>c(A=>({...A,pdfToImages:k}))})]})})]})]}),s.jsxs("div",{className:H(Ae,"p-5 space-y-4"),children:[s.jsx("h3",{className:De,children:"Automation"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs text-[var(--gm-text-primary)] font-medium",children:"Auto-Process on Upload"}),s.jsx("p",{className:"text-[9px] text-[var(--gm-text-tertiary)]",children:"Automatically process documents when uploaded"})]}),s.jsx(tb,{checked:!!o.autoProcess,onChange:k=>c(A=>({...A,autoProcess:k}))})]})]}),s.jsxs("button",{onClick:x,disabled:r.isPending,className:Dt,children:[r.isPending?s.jsx(ye,{className:"w-3 h-3 animate-spin"}):s.jsx(Us,{className:"w-3 h-3"})," Save Processing Settings"]})]})}function H6e(){const{data:e,isLoading:t}=uce(),r=dce(),{data:n}=Q8(),{data:a}=Y8(),{data:i}=X8(),{data:o}=Toe(),c=Z8(),d=pb(),f=J8(),m=Ooe(),[h,g]=y.useState({}),x=y.useRef(!1),[w,b]=y.useState("overview"),j=$e(e),N=$e(j.config),_=$e(n).profiles??[],S=$e($e(a).analysis),k=$e(i).relationships??[],A=$e(o).projects??[];y.useEffect(()=>{!x.current&&Object.keys(N).length>0&&(g({...N}),x.current=!0)},[N]);const T=y.useCallback(()=>{r.mutate(h,{onSuccess:()=>G.success("Configuration saved"),onError:I=>G.error(I.message)})},[h,r]),O=()=>{c.mutate({forceReanalysis:!1},{onSuccess:()=>G.success("Team analysis completed"),onError:I=>G.error(I.message)})};if(t)return s.jsx(ws,{});const P=Number(S.cohesion_score??0),R=S.tension_level||"",M=S.alliances??[],D=S.tensions??[],z=[{key:"includePersonality",label:"Personality Analysis",desc:"Behavioral profiling and communication identity"},{key:"includeSentiment",label:"Sentiment Tracking",desc:"Emotional tone and sentiment trends"},{key:"includeCommunication",label:"Communication Patterns",desc:"Speaking style, directness, verbosity"},{key:"includeCollaboration",label:"Collaboration Metrics",desc:"Teamwork, alignment, and cooperation signals"}],Y=_.reduce((I,K)=>{const U=K.confidence_level||"low";return I[U]=(I[U]||0)+1,I},{});return s.jsxs("div",{className:"space-y-5",children:[s.jsx(js,{title:"Team Behavioral Analysis",subtitle:`${_.length} profiles  ${k.length} relationships  Cohesion ${P||""}%`}),s.jsx("div",{className:H(Ae,"p-1 flex gap-1"),children:["overview","config","projects"].map(I=>s.jsx("button",{onClick:()=>b(I),className:H("flex-1 px-3 py-2 text-[11px] font-medium rounded-lg capitalize transition-colors",w===I?"bg-[var(--gm-accent-primary)]/15 text-[var(--gm-accent-primary)]":"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-secondary)]"),children:I==="overview"?"Overview & Analysis":I==="config"?"Configuration":"Projects"},I))}),w==="overview"&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:H(Ae,"p-4 flex items-center gap-3 flex-wrap"),children:[s.jsxs("button",{onClick:O,disabled:c.isPending,className:Dt,children:[c.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(hn,{className:"w-3.5 h-3.5"}),c.isPending?"Analyzing...":"Run Team Analysis"]}),s.jsxs("button",{onClick:()=>f.mutate(void 0,{onSuccess:()=>G.success("Graph synced"),onError:I=>G.error(I.message)}),disabled:f.isPending,className:wt,children:[f.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(yl,{className:"w-3.5 h-3.5"}),"Sync to Graph"]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[s.jsx(xr,{label:"Profiles",value:_.length,color:"var(--gm-accent-primary)"}),s.jsx(xr,{label:"Relationships",value:k.length,color:"var(--gm-accent-primary)"}),s.jsx(xr,{label:"Cohesion",value:P>0?`${P}%`:"",color:P>=70?"#22c55e":P>=40?"#f59e0b":"#ef4444"}),s.jsx(xr,{label:"Alliances",value:M.length,color:"#22c55e"}),s.jsx(xr,{label:"Tensions",value:D.length,color:"#ef4444"})]}),S.analysis_data&&s.jsxs("div",{className:H(Ae,"p-5 space-y-3"),children:[s.jsx("h3",{className:De,children:"Team Dynamics"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase",children:"Tension Level"}),s.jsx("div",{className:H("text-sm font-bold capitalize",R==="high"?"text-red-400":R==="medium"?"text-amber-400":"text-green-400"),children:R})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase",children:"Team Size"}),s.jsx("div",{className:"text-sm font-bold text-[var(--gm-text-primary)]",children:S.team_size||""})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase",children:"Communication"}),s.jsx("div",{className:"text-sm font-bold text-[var(--gm-text-primary)] truncate",children:S.dominant_communication_pattern||""})]})]})]}),_.length>0&&s.jsxs("div",{className:H(Ae,"overflow-hidden"),children:[s.jsxs("div",{className:"px-5 py-3 border-b border-[var(--gm-border-primary)] flex items-center justify-between",children:[s.jsx("h3",{className:De,children:"Behavioral Profiles"}),s.jsx("div",{className:"flex gap-1.5",children:Object.entries(Y).map(([I,K])=>s.jsxs("span",{className:H("text-[9px] px-2 py-0.5 rounded-full font-medium border capitalize",I==="very_high"||I==="high"?"bg-green-500/10 border-green-500/30 text-green-400":I==="medium"?"bg-amber-500/10 border-amber-500/30 text-amber-400":"bg-[var(--gm-bg-tertiary)] border-[var(--gm-border-primary)] text-[var(--gm-text-tertiary)]"),children:[K," ",I.replace("_"," ")]},I))})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b border-[var(--gm-border-primary)]",children:["Person","Style","Motivation","Risk","Influence","Confidence","Transcripts",""].map(I=>s.jsx("th",{className:H(tt,"px-4 py-2.5 text-left"),children:I},I))})}),s.jsx("tbody",{children:_.map((I,K)=>{const U=$e(I.contact),L=U.full_name||U.name||I.contact_id||"";return s.jsxs("tr",{className:"border-b border-[var(--gm-border-primary)] last:border-0 hover:bg-[var(--gm-surface-hover)]",children:[s.jsxs("td",{className:"px-4 py-2.5",children:[s.jsx("div",{className:"text-xs font-medium text-[var(--gm-text-primary)]",children:L}),U.role&&s.jsx("div",{className:"text-[9px] text-[var(--gm-text-tertiary)]",children:U.role})]}),s.jsx("td",{className:"px-4 py-2.5 text-[10px] text-[var(--gm-text-secondary)] capitalize",children:I.communication_style||""}),s.jsx("td",{className:"px-4 py-2.5 text-[10px] text-[var(--gm-text-secondary)] capitalize",children:I.dominant_motivation||""}),s.jsx("td",{className:"px-4 py-2.5",children:s.jsx("span",{className:H("text-[9px] px-2 py-0.5 rounded-full font-medium capitalize",I.risk_tolerance==="high"?"bg-red-500/10 text-red-400":I.risk_tolerance==="medium"?"bg-amber-500/10 text-amber-400":"bg-green-500/10 text-green-400"),children:I.risk_tolerance||""})}),s.jsx("td",{className:"px-4 py-2.5",children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:"w-12 h-1.5 rounded-full bg-[var(--gm-bg-tertiary)] overflow-hidden",children:s.jsx("div",{className:"h-full rounded-full bg-[var(--gm-accent-primary)]",style:{width:`${Number(I.influence_score??0)}%`}})}),s.jsx("span",{className:"text-[10px] text-[var(--gm-text-primary)] tabular-nums font-semibold",children:I.influence_score??0})]})}),s.jsx("td",{className:"px-4 py-2.5",children:s.jsx("span",{className:H("text-[9px] px-2 py-0.5 rounded-full font-medium capitalize",I.confidence_level==="high"||I.confidence_level==="very_high"?"bg-green-500/10 text-green-400":I.confidence_level==="medium"?"bg-amber-500/10 text-amber-400":"bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)]"),children:(I.confidence_level||"").replace("_"," ")})}),s.jsx("td",{className:"px-4 py-2.5 text-[10px] text-[var(--gm-text-tertiary)] tabular-nums",children:I.transcript_count??0}),s.jsx("td",{className:"px-4 py-2.5",children:s.jsx("button",{onClick:()=>d.mutate({personId:I.contact_id||I.id,forceReanalysis:!0},{onSuccess:()=>G.success(`Re-analyzed ${L}`),onError:F=>G.error(F.message)}),disabled:d.isPending,className:"text-[9px] text-[var(--gm-accent-primary)] hover:underline font-medium",children:"Re-analyze"})})]},K)})})]})})]}),k.length>0&&s.jsxs("div",{className:H(Ae,"overflow-hidden"),children:[s.jsx("div",{className:"px-5 py-3 border-b border-[var(--gm-border-primary)]",children:s.jsx("h3",{className:De,children:"Behavioral Relationships"})}),s.jsx("div",{className:"overflow-x-auto max-h-64 overflow-y-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b border-[var(--gm-border-primary)] sticky top-0 bg-[var(--gm-surface-primary)]",children:["From","To","Type","Strength","Confidence"].map(I=>s.jsx("th",{className:H(tt,"px-4 py-2 text-left"),children:I},I))})}),s.jsx("tbody",{children:k.map((I,K)=>s.jsxs("tr",{className:"border-b border-[var(--gm-border-primary)] last:border-0 hover:bg-[var(--gm-surface-hover)]",children:[s.jsx("td",{className:"px-4 py-2 text-xs text-[var(--gm-text-primary)]",children:I.from_name||I.from_contact_id||""}),s.jsx("td",{className:"px-4 py-2 text-xs text-[var(--gm-text-primary)]",children:I.to_name||I.to_contact_id||""}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("span",{className:H("text-[9px] px-2 py-0.5 rounded-full font-medium capitalize border",I.relationship_type==="tension_with"||I.relationship_type==="competes_with"?"bg-red-500/10 border-red-500/30 text-red-400":I.relationship_type==="aligned_with"||I.relationship_type==="supports"||I.relationship_type==="mentors"?"bg-green-500/10 border-green-500/30 text-green-400":"bg-[var(--gm-bg-tertiary)] border-[var(--gm-border-primary)] text-[var(--gm-text-tertiary)]"),children:(I.relationship_type||"").replace(/_/g," ")})}),s.jsx("td",{className:"px-4 py-2",children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:"w-10 h-1.5 rounded-full bg-[var(--gm-bg-tertiary)] overflow-hidden",children:s.jsx("div",{className:"h-full rounded-full bg-[var(--gm-accent-primary)]",style:{width:`${Math.round(Number(I.strength??0)*100)}%`}})}),s.jsxs("span",{className:"text-[9px] text-[var(--gm-text-tertiary)] tabular-nums",children:[(Number(I.strength??0)*100).toFixed(0),"%"]})]})}),s.jsx("td",{className:"px-4 py-2 text-[10px] text-[var(--gm-text-tertiary)] capitalize",children:I.confidence||""})]},K))})]})})]}),_.length===0&&s.jsx(Ya,{msg:"No behavioral profiles yet. Run Team Analysis to start profiling."})]}),w==="config"&&s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:H(Ae,"p-5 space-y-5"),children:[s.jsx("h3",{className:De,children:"Analysis Parameters"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:H(tt,"block mb-1.5"),children:"Frequency"}),s.jsxs("select",{value:h.analysisFrequency||"weekly",onChange:I=>g(K=>({...K,analysisFrequency:I.target.value})),className:H(ht,"w-full"),children:[s.jsx("option",{value:"daily",children:"Daily"}),s.jsx("option",{value:"weekly",children:"Weekly"}),s.jsx("option",{value:"monthly",children:"Monthly"})]}),s.jsx("p",{className:"text-[9px] text-[var(--gm-text-tertiary)] mt-1",children:"How often to auto-run analysis"})]}),s.jsxs("div",{children:[s.jsx("label",{className:H(tt,"block mb-1.5"),children:"Min Meetings"}),s.jsx("input",{type:"number",min:"1",value:h.minMeetingsForAnalysis??3,onChange:I=>g(K=>({...K,minMeetingsForAnalysis:Number(I.target.value)})),className:H(ht,"w-full")}),s.jsx("p",{className:"text-[9px] text-[var(--gm-text-tertiary)] mt-1",children:"Minimum transcripts before profiling"})]}),s.jsxs("div",{children:[s.jsx("label",{className:H(tt,"block mb-1.5"),children:"Sentiment Threshold"}),s.jsx("input",{type:"number",step:"0.1",min:"-1",max:"0",value:h.sentimentThreshold??-.3,onChange:I=>g(K=>({...K,sentimentThreshold:Number(I.target.value)})),className:H(ht,"w-full")}),s.jsx("p",{className:"text-[9px] text-[var(--gm-text-tertiary)] mt-1",children:"Alert below this score (-1 to 0)"})]})]})]}),s.jsxs("div",{className:H(Ae,"p-5 space-y-3"),children:[s.jsx("h3",{className:De,children:"Analysis Modules"}),z.map(({key:I,label:K,desc:U})=>s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-primary)]",children:K}),s.jsx("p",{className:"text-[9px] text-[var(--gm-text-tertiary)]",children:U})]}),s.jsx(tb,{checked:h[I]!==!1,onChange:L=>g(F=>({...F,[I]:L}))})]},I))]}),s.jsxs("button",{onClick:T,disabled:r.isPending,className:Dt,children:[r.isPending?s.jsx(ye,{className:"w-3 h-3 animate-spin"}):s.jsx(Us,{className:"w-3 h-3"})," Save Configuration"]})]}),w==="projects"&&s.jsx("div",{className:"space-y-5",children:A.length>0?s.jsxs("div",{className:H(Ae,"overflow-hidden"),children:[s.jsx("div",{className:"px-5 py-3 border-b border-[var(--gm-border-primary)]",children:s.jsx("h3",{className:De,children:"All Projects  Analysis Status"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b border-[var(--gm-border-primary)]",children:["Project","Enabled","Last Analysis",""].map(I=>s.jsx("th",{className:H(tt,"px-4 py-2.5 text-left"),children:I},I))})}),s.jsx("tbody",{children:A.map((I,K)=>s.jsxs("tr",{className:"border-b border-[var(--gm-border-primary)] last:border-0 hover:bg-[var(--gm-surface-hover)]",children:[s.jsx("td",{className:"px-4 py-2.5 text-xs font-medium text-[var(--gm-text-primary)]",children:I.name||I.id||""}),s.jsx("td",{className:"px-4 py-2.5",children:s.jsx("span",{className:H("text-[9px] px-2 py-0.5 rounded-full font-medium",I.isEnabled?"bg-green-500/10 text-green-400":"bg-red-500/10 text-red-400"),children:I.isEnabled?"Enabled":"Disabled"})}),s.jsx("td",{className:"px-4 py-2.5 text-[10px] text-[var(--gm-text-tertiary)] tabular-nums",children:I.lastAnalysisAt?new Date(I.lastAnalysisAt).toLocaleString():"Never"}),s.jsx("td",{className:"px-4 py-2.5",children:s.jsxs("button",{onClick:()=>m.mutate({projectId:I.id},{onSuccess:()=>G.success(`Analysis triggered for ${I.name}`),onError:U=>G.error(U.message)}),disabled:m.isPending,className:Dt,children:[m.isPending?s.jsx(ye,{className:"w-3 h-3 animate-spin"}):s.jsx(hn,{className:"w-3 h-3"})," Analyze"]})})]},K))})]})})]}):s.jsx(Ya,{msg:"No projects found or admin endpoint not available."})})]})}function G6e(){const{data:e,isLoading:t}=fce(),r=mce(),n=hce(),a=pce(),[i,o]=y.useState(""),[c,d]=y.useState(""),[f,m]=y.useState(!1),[h,g]=y.useState(""),[x,w]=y.useState(!1),b=y.useRef(null),j=$e(e),N=!!j.enabled,_=!!j.hasSystemCredentials,S=j.rootFolderId??"",k=j.bootstrappedAt,A=j.pendingProjects??[],T=j.configuredProjects??[];y.useEffect(()=>{!t&&e&&o(S)},[t,e,S]);const O=y.useCallback(M=>{const D=M.target.files?.[0];if(!D)return;g(D.name);const z=new FileReader;z.onload=Y=>{const I=Y.target?.result;try{JSON.parse(I),d(I),w(!0),G.success("Service account JSON loaded")}catch{G.error("Invalid JSON file")}},z.readAsText(D),b.current&&(b.current.value="")},[]),P=y.useCallback(()=>{const M={enabled:N,rootFolderId:i.trim()};c&&(M.serviceAccountJson=c),r.mutate(M,{onSuccess:()=>{G.success("Configuration saved to Supabase vault"),d(""),g(""),w(!1)},onError:D=>G.error(D.message)})},[N,i,c,r]);if(t)return s.jsx(ws,{});const R=x||i!==S;return s.jsxs("div",{className:"space-y-6",children:[s.jsx(js,{title:"Google Drive Integration",subtitle:"Credentials stored encrypted in Supabase vault  never in .env"}),s.jsxs("div",{className:H(Ae,"p-5 space-y-4"),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-sm font-semibold text-[var(--gm-text-primary)] flex items-center gap-2",children:[s.jsx(lb,{className:"w-4 h-4"})," Connection Status"]}),s.jsx("span",{className:H("text-[10px] px-2 py-0.5 rounded-full font-semibold",_&&N?"bg-green-500/15 text-green-400":"bg-red-500/15 text-red-400"),children:_&&N?"Connected":_?"Disabled":"Not Configured"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"text-[var(--gm-text-tertiary)]",children:"Service Account"}),s.jsx("span",{className:H("font-medium",_?"text-green-400":"text-red-400"),children:_?"Uploaded (encrypted)":"Not uploaded"})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"text-[var(--gm-text-tertiary)]",children:"Root Folder"}),s.jsx("span",{className:H("font-mono text-[11px]",S?"text-[var(--gm-text-primary)]":"text-red-400"),children:S||"Not set"})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"text-[var(--gm-text-tertiary)]",children:"Integration"}),s.jsx("span",{className:H("font-medium",N?"text-green-400":"text-[var(--gm-text-tertiary)]"),children:N?"Enabled":"Disabled"})]}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:"text-[var(--gm-text-tertiary)]",children:"Last Bootstrap"}),s.jsx("span",{className:"text-[var(--gm-text-primary)] tabular-nums",children:k?new Date(k).toLocaleString():"Never"})]})]})]}),s.jsxs("div",{className:H(Ae,"p-5 space-y-5"),children:[s.jsx("h3",{className:H(De),children:"Configuration"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-[var(--gm-text-primary)] font-medium",children:"Enable Integration"}),s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-0.5",children:"Activate Google Drive sync for all projects"})]}),s.jsx(tb,{checked:N,onChange:M=>r.mutate({enabled:M,rootFolderId:i||S},{onSuccess:()=>G.success(M?"Integration enabled":"Integration disabled"),onError:D=>G.error(D.message)}),disabled:r.isPending})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"text-xs font-medium text-[var(--gm-text-secondary)] flex items-center gap-1.5",children:[s.jsx(cP,{className:"w-3 h-3"})," Root Folder ID"]}),s.jsx("input",{type:"text",value:i,onChange:M=>{o(M.target.value),w(!0)},placeholder:"e.g. 1ABC2DEF3GHI4JKL5MNO6PQR...",className:H(ht,"w-full font-mono text-[11px]")}),s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:"The Google Drive folder ID where all project folders will be created. Find it in the Drive folder URL after /folders/."})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsxs("label",{className:"text-xs font-medium text-[var(--gm-text-secondary)] flex items-center gap-1.5",children:[s.jsx(SC,{className:"w-3 h-3"})," Service Account JSON"]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>b.current?.click(),className:wt,children:[s.jsx(db,{className:"w-3 h-3"})," Upload JSON File"]}),s.jsx("input",{ref:b,type:"file",accept:".json,application/json",onChange:O,className:"hidden"}),h&&s.jsxs("span",{className:"text-[10px] text-green-400 flex items-center gap-1",children:[s.jsx(Gn,{className:"w-3 h-3"})," ",h]}),!h&&_&&s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:"Credentials already stored (encrypted in Supabase vault)"})]}),s.jsxs("div",{className:"relative",children:[s.jsx("textarea",{value:c,onChange:M=>{d(M.target.value),w(!0)},placeholder:"Or paste the service account JSON here...",rows:4,className:H(ht,"w-full font-mono text-[10px] leading-relaxed resize-none",!f&&c?"text-transparent":"")}),c&&s.jsx("button",{onClick:()=>m(!f),className:"absolute top-2 right-2 p-1 rounded hover:bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)]",children:f?s.jsx(NC,{className:"w-3 h-3"}):s.jsx(eu,{className:"w-3 h-3"})})]}),s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:"Download from Google Cloud Console > IAM > Service Accounts > Keys. The JSON is encrypted at rest via pgcrypto."})]})]}),s.jsxs("div",{className:"flex items-center gap-3 pt-2 border-t border-[var(--gm-border-primary)]",children:[s.jsxs("button",{onClick:P,disabled:r.isPending||!R,className:Dt,children:[r.isPending?s.jsx(ye,{className:"w-3 h-3 animate-spin"}):s.jsx(Us,{className:"w-3 h-3"}),"Save Configuration"]}),R&&s.jsxs("span",{className:"text-[10px] text-amber-400 flex items-center gap-1",children:[s.jsx(vr,{className:"w-3 h-3"})," Unsaved changes"]})]})]}),s.jsxs("div",{className:H(Ae,"p-5 space-y-4"),children:[s.jsx("h3",{className:H(De),children:"Actions"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs("button",{onClick:()=>a.mutate(void 0,{onSuccess:M=>{const D=$e(M);G.success(D.message||"Bootstrap complete")},onError:M=>G.error(M.message)}),disabled:a.isPending||!_||!N,className:Dt,children:[a.isPending?s.jsx(ye,{className:"w-3 h-3 animate-spin"}):s.jsx(cP,{className:"w-3 h-3"}),"Bootstrap All Projects"]}),s.jsxs("button",{onClick:()=>n.mutate(void 0,{onSuccess:()=>G.success("Sync started"),onError:M=>G.error(M.message)}),disabled:n.isPending||!_||!N,className:wt,children:[n.isPending?s.jsx(ye,{className:"w-3 h-3 animate-spin"}):s.jsx(Gs,{className:"w-3 h-3"}),"Sync Now"]})]}),!_&&s.jsxs("p",{className:"text-[10px] text-amber-400 flex items-center gap-1",children:[s.jsx(vr,{className:"w-3 h-3"})," Upload service account credentials to enable actions"]}),_&&!N&&s.jsxs("p",{className:"text-[10px] text-amber-400 flex items-center gap-1",children:[s.jsx(vr,{className:"w-3 h-3"})," Enable the integration to use these actions"]})]}),T.length>0&&s.jsxs("div",{className:H(Ae,"p-5"),children:[s.jsxs("h3",{className:H(De,"mb-3"),children:["Configured Projects (",T.length,")"]}),s.jsx("div",{className:"space-y-0",children:T.map((M,D)=>s.jsxs("div",{className:"flex items-center justify-between py-2 text-xs border-b border-[var(--gm-border-primary)] last:border-0",children:[s.jsx("span",{className:"text-[var(--gm-text-primary)] font-medium",children:M.name}),s.jsx("span",{className:"text-[var(--gm-text-tertiary)] font-mono text-[10px]",children:M.folderId})]},D))})]}),A.length>0&&s.jsxs("div",{className:H(Ae,"p-5"),children:[s.jsxs("h3",{className:H(De,"mb-3"),children:["Pending Projects (",A.length,")"]}),s.jsx("div",{className:"space-y-0",children:A.map((M,D)=>s.jsxs("div",{className:"flex items-center justify-between py-2 text-xs border-b border-[var(--gm-border-primary)] last:border-0",children:[s.jsx("span",{className:"text-[var(--gm-text-primary)]",children:M.name}),s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-amber-500/15 text-amber-400",children:"Pending"})]},D))})]})]})}function W6e(){const{data:e}=vce(),{data:t}=xce(),{data:r,isLoading:n,refetch:a}=gce(),i=wce(),o=yce(),c=bce(),d=jce(),[f,m]=y.useState({}),h=y.useRef(!1),g=$e(e),x=$e($e(t).config),w=$e(r).projects??[];return y.useEffect(()=>{!h.current&&Object.keys(x).length>0&&(m({...x}),h.current=!0)},[x]),n?s.jsx(ws,{}):s.jsxs("div",{className:"space-y-6",children:[s.jsx(js,{title:"Billing & Cost Control",subtitle:"Manage project balances, pricing, and cost limits"}),s.jsxs("div",{className:H(Ae,"p-5 space-y-3"),children:[s.jsx("h3",{className:De,children:"Exchange Rate (USD to EUR)"}),g.auto!=null&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Gn,{className:"w-3 h-3 text-[var(--gm-accent-primary)]"}),s.jsx("span",{className:"text-xs text-[var(--gm-accent-primary)]",children:g.auto?"Automatic rate from API":"Manual rate"})]}),s.jsxs("div",{className:"text-xs",children:[s.jsx("span",{className:"text-[var(--gm-accent-primary)]",children:"Current Rate: "}),s.jsx("span",{className:"text-lg font-bold text-[var(--gm-text-primary)] tabular-nums",children:String(g.currentRate??g.rate??"")})]}),s.jsxs("div",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:["Source: ",String(g.source??"api"),"  Updated: ",g.lastUpdated||g.updatedAt?new Date(g.lastUpdated||g.updatedAt).toLocaleString():""]}),!g.auto&&s.jsxs("div",{children:[s.jsx("label",{className:H(tt,"block mb-1"),children:"Manual Rate"}),s.jsx("input",{type:"number",step:"0.0001",min:"0",defaultValue:Number(g.manualRate??g.currentRate??.92),onBlur:b=>c.mutate({auto:!1,manualRate:Number(b.target.value)},{onSuccess:()=>G.success("Manual rate saved"),onError:j=>G.error(j.message)}),className:H(ht,"w-40")})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>i.mutate(void 0,{onSuccess:()=>G.success("Rate refreshed"),onError:b=>G.error(b.message)}),disabled:i.isPending,className:wt,children:[i.isPending?s.jsx(ye,{className:"w-3 h-3 animate-spin"}):s.jsx(Gs,{className:"w-3 h-3"})," Refresh Rate"]}),s.jsxs("button",{onClick:()=>c.mutate({auto:!(g.auto??!0)},{onSuccess:()=>G.success("Exchange rate mode updated"),onError:b=>G.error(b.message)}),disabled:c.isPending,className:wt,children:["Switch to ",g.auto?"Manual":"Automatic"]})]})]}),s.jsxs("div",{className:H(Ae,"p-5 space-y-3"),children:[s.jsx("h3",{className:De,children:"Global Pricing Configuration"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:H(tt,"block mb-1"),children:"Fixed Markup (%)"}),s.jsx("input",{type:"number",value:f.fixed_markup_percent??0,onChange:b=>m(j=>({...j,fixed_markup_percent:Number(b.target.value)})),className:H(ht,"w-full")})]}),s.jsxs("div",{children:[s.jsx("label",{className:H(tt,"block mb-1"),children:"Period Type"}),s.jsxs("select",{value:f.period_type??"monthly",onChange:b=>m(j=>({...j,period_type:b.target.value})),className:H(ht,"w-full"),children:[s.jsx("option",{value:"monthly",children:"Monthly"}),s.jsx("option",{value:"weekly",children:"Weekly"})]})]})]}),s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:"Applied when no tier matches"}),s.jsxs("button",{onClick:()=>o.mutate(f,{onSuccess:()=>G.success("Global pricing saved"),onError:b=>G.error(b.message)}),disabled:o.isPending,className:Dt,children:[o.isPending?s.jsx(ye,{className:"w-3 h-3 animate-spin"}):s.jsx(Us,{className:"w-3 h-3"})," Save Global Pricing"]})]}),s.jsxs("div",{className:H(Ae,"overflow-hidden"),children:[s.jsxs("div",{className:"px-5 py-3 border-b border-[var(--gm-border-primary)] flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-[var(--gm-text-primary)]",children:"Projects Billing"}),s.jsxs("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:[w.length," projects  ",w.filter(b=>b.blocked).length," blocked  ",w.filter(b=>b.unlimited).length," unlimited"]})]}),s.jsxs("button",{onClick:()=>a(),className:wt,children:[s.jsx(Gs,{className:"w-3 h-3"})," Refresh"]})]}),s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b border-[var(--gm-border-primary)]",children:["PROJECT","BALANCE","STATUS","KEY SOURCE","TOKENS (PERIOD)","COST (PERIOD)","ACTIONS"].map(b=>s.jsx("th",{className:H(tt,"px-4 py-2.5 text-left"),children:b},b))})}),s.jsx("tbody",{children:w.map((b,j)=>{const N=b.key_sources??{},_=!!b.uses_own_keys,S=!!b.all_own_keys,k=Object.entries(N);return s.jsxs("tr",{className:"border-b border-[var(--gm-border-primary)] last:border-0 hover:bg-[var(--gm-surface-hover)]",children:[s.jsx("td",{className:"px-4 py-2.5 text-xs font-semibold text-[var(--gm-text-primary)]",children:b.name||b.project_name||b.project_id}),s.jsx("td",{className:"px-4 py-2.5 text-xs text-[var(--gm-text-secondary)] tabular-nums",children:b.unlimited_balance?" Unlimited":`${b.balance_eur??b.balance??0} `}),s.jsx("td",{className:"px-4 py-2.5",children:s.jsx("span",{className:H("text-[10px] px-2 py-0.5 rounded-full font-semibold",b.is_blocked?"bg-red-500/15 text-red-400":b.unlimited_balance?"bg-green-500/15 text-green-400":"bg-blue-500/15 text-blue-400"),children:b.is_blocked?"BLOCKED":b.unlimited_balance?"UNLIMITED":"ACTIVE"})}),s.jsxs("td",{className:"px-4 py-2.5",children:[k.length===0?s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:"No keys"}):S?s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-purple-500/15 text-purple-400 font-semibold",title:"BYOK: billing skipped",children:"BYOK"}):_?s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-amber-500/15 text-amber-400 font-semibold",title:"Mixed: some own keys, some system keys",children:"MIXED"}):s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-blue-500/15 text-blue-400 font-semibold",title:"Using system keys: billing active",children:"SYSTEM"}),k.length>0&&s.jsx("div",{className:"mt-0.5 flex flex-wrap gap-1",children:k.map(([A,T])=>s.jsxs("span",{className:H("text-[9px] px-1 py-px rounded",T==="project"?"bg-purple-500/10 text-purple-300":"bg-blue-500/10 text-blue-300"),children:[A,":",T[0]?.toUpperCase()]},A))})]}),s.jsx("td",{className:"px-4 py-2.5 text-xs text-[var(--gm-text-tertiary)] tabular-nums",children:b.tokens_this_period!=null?`${(Number(b.tokens_this_period)/1e3).toFixed(1)}K`:""}),s.jsx("td",{className:"px-4 py-2.5 text-xs text-[var(--gm-text-tertiary)] tabular-nums",children:b.billable_cost_this_period!=null?`${Number(b.billable_cost_this_period).toFixed(2)} `:""}),s.jsx("td",{className:"px-4 py-2.5",children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>d.mutate({projectId:b.project_id||b.id,action:"block",data:{blocked:!b.is_blocked}},{onSuccess:()=>{G.success(b.is_blocked?"Unblocked":"Blocked"),a()},onError:A=>G.error(A.message)}),className:"p-1 rounded hover:bg-[var(--gm-surface-hover)]",title:b.is_blocked?"Unblock":"Block",children:s.jsx(bC,{className:"w-3.5 h-3.5 text-amber-400"})}),s.jsx("button",{onClick:()=>d.mutate({projectId:b.project_id||b.id,action:"unlimited",data:{unlimited:!b.unlimited_balance}},{onSuccess:()=>{G.success(b.unlimited_balance?"Limited":"Set unlimited"),a()},onError:A=>G.error(A.message)}),className:"p-1 rounded hover:bg-[var(--gm-surface-hover)]",title:b.unlimited_balance?"Remove unlimited":"Set unlimited",children:s.jsx("span",{className:"text-[10px]",children:b.unlimited_balance?"":"$"})})]})})]},j)})})]}),w.length===0&&s.jsx("div",{className:"p-8 text-center text-sm text-[var(--gm-text-tertiary)]",children:"No projects found."})]})]})}function Q6e(){const[e,t]=y.useState(""),[r,n]=y.useState(""),[a,i]=y.useState(1),o=50,{data:c,isLoading:d}=Nce({page:a,limit:o,search:e||void 0,filter:r||void 0}),{data:f}=Hoe(),m=$e(c),h=m.logs??[],x=$e(f).logs??[],w=y.useMemo(()=>{const N=[...h,...x];return N.sort((_,S)=>{const k=new Date(_.changed_at||_.timestamp||_.created_at||"1970-01-01").getTime()||0;return(new Date(S.changed_at||S.timestamp||S.created_at||"1970-01-01").getTime()||0)-k}),N},[h,x]),b=m.total??w.length;if(d)return s.jsx(ws,{});const j=N=>N==="critical"||N==="error"?"bg-red-500/15 text-red-400":N==="warning"?"bg-amber-500/15 text-amber-400":"bg-blue-500/15 text-blue-400";return s.jsxs("div",{className:"space-y-5",children:[s.jsx(js,{title:"Audit Log"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[s.jsx(bs,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"}),s.jsx("input",{placeholder:"Search...",value:e,onChange:N=>{t(N.target.value),i(1)},className:H(ht,"flex-1")})]}),s.jsxs("select",{value:r,onChange:N=>{n(N.target.value),i(1)},className:H(ht,"w-28"),children:[s.jsx("option",{value:"",children:"All"}),s.jsx("option",{value:"info",children:"Info"}),s.jsx("option",{value:"warning",children:"Warning"}),s.jsx("option",{value:"critical",children:"Critical"})]})]}),s.jsxs("div",{className:H(Ae,"overflow-hidden"),children:[s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsx("tr",{className:"border-b border-[var(--gm-border-primary)]",children:["TIMESTAMP","USER","ACTION","DETAILS","SEVERITY","IP"].map(N=>s.jsx("th",{className:H(tt,"px-4 py-2.5 text-left"),children:N},N))})}),s.jsx("tbody",{children:w.map((N,_)=>s.jsxs("tr",{className:"border-b border-[var(--gm-border-primary)] last:border-0 hover:bg-[var(--gm-surface-hover)]",children:[s.jsx("td",{className:"px-4 py-2.5 text-xs text-[var(--gm-text-tertiary)] tabular-nums whitespace-nowrap",children:N.changed_at||N.timestamp||N.created_at?new Date(N.changed_at||N.timestamp||N.created_at).toLocaleString():""}),s.jsx("td",{className:"px-4 py-2.5 text-xs font-medium text-[var(--gm-text-primary)]",children:N.changed_by_email||N.user||N.actor||"System"}),s.jsx("td",{className:"px-4 py-2.5 text-xs text-[var(--gm-text-secondary)]",children:N.action||N.operation||N.event_type||""}),s.jsx("td",{className:"px-4 py-2.5 text-xs text-[var(--gm-text-tertiary)] max-w-[200px] truncate",children:N.details||N.config_key||N.table_name||N.description||""}),s.jsx("td",{className:"px-4 py-2.5",children:s.jsx("span",{className:H("text-[10px] px-2 py-0.5 rounded-full font-medium",j(N.severity||N.level||"info")),children:N.severity||N.level||"info"})}),s.jsx("td",{className:"px-4 py-2.5 text-xs text-[var(--gm-text-tertiary)] font-mono",children:N.ip||N.ip_address||""})]},_))})]}),w.length===0&&s.jsx("div",{className:"p-8 text-center text-sm text-[var(--gm-text-tertiary)]",children:"No audit log entries."})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:[b," entries"]}),b>o&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>i(N=>Math.max(1,N-1)),disabled:a<=1,className:wt,children:"Previous"}),s.jsxs("span",{className:"text-xs text-[var(--gm-text-tertiary)] self-center",children:["Page ",a]}),s.jsx("button",{onClick:()=>i(N=>N+1),disabled:w.length<o,className:wt,children:"Next"})]})]})]})}function Y6e(){const[e,t]=y.useState("users");return s.jsxs("div",{className:"flex h-full",children:[s.jsxs("div",{className:"w-48 shrink-0 border-r border-[var(--gm-border-primary)] bg-[var(--gm-bg-primary)] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center gap-2 px-4 py-4 border-b border-[var(--gm-border-primary)]",children:[s.jsx(cf,{className:"w-4 h-4 text-[var(--gm-accent-primary)]",style:{filter:"drop-shadow(0 0 6px var(--gm-accent-primary))"}}),s.jsx("span",{className:"text-sm font-bold text-[var(--gm-accent-primary)]",children:"Admin"})]}),s.jsx("nav",{className:"py-2",children:O6e.map(r=>{const n=r.icon,a=e===r.key;return s.jsxs("button",{onClick:()=>t(r.key),className:H("w-full flex items-center gap-2.5 px-4 py-2 text-xs transition-colors",a?"text-[var(--gm-accent-primary)] bg-[var(--gm-surface-hover)] font-semibold":"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] hover:bg-[var(--gm-surface-hover)]"),children:[s.jsx(n,{className:"w-3.5 h-3.5 shrink-0"}),s.jsx("span",{className:"flex-1 text-left",children:r.label}),a&&s.jsx(Ui,{className:"w-3 h-3 shrink-0"})]},r.key)})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[s.jsx(P6e,{}),e==="users"&&s.jsx(M6e,{}),e==="system"&&s.jsx(R6e,{}),e==="llm-providers"&&s.jsx(D6e,{}),e==="model-metadata"&&s.jsx(I6e,{}),e==="llm-queue"&&s.jsx(L6e,{}),e==="graph"&&s.jsx(z6e,{}),e==="ontology"&&s.jsx(U6e,{}),e==="prompts"&&s.jsx(F6e,{}),e==="processing"&&s.jsx(K6e,{}),e==="team-analysis"&&s.jsx(H6e,{}),e==="google-drive"&&s.jsx(G6e,{}),e==="billing"&&s.jsx(W6e,{}),e==="audit-log"&&s.jsx(Q6e,{})]})]})}const Jz=[{id:"1",name:"Project Manager",description:"Oversees project execution and delivery",active:!0},{id:"2",name:"Tech Lead",description:"Technical leadership and architecture decisions",active:!0},{id:"3",name:"Product Owner",description:"Defines product vision and priorities",active:!0},{id:"4",name:"Designer",description:"UI/UX design and prototyping",active:!1},{id:"5",name:"QA Lead",description:"Quality assurance and testing strategy",active:!1},{id:"6",name:"DevOps",description:"Infrastructure and deployment automation",active:!1}];function X6e(e){const t=Z6e(e),r=y.forwardRef((n,a)=>{const{children:i,...o}=n,c=y.Children.toArray(i),d=c.find(e8e);if(d){const f=d.props.children,m=c.map(h=>h===d?y.Children.count(f)>1?y.Children.only(null):y.isValidElement(f)?f.props.children:null:h);return s.jsx(t,{...o,ref:a,children:y.isValidElement(f)?y.cloneElement(f,void 0,m):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}function Z6e(e){const t=y.forwardRef((r,n)=>{const{children:a,...i}=r;if(y.isValidElement(a)){const o=r8e(a),c=t8e(i,a.props);return a.type!==y.Fragment&&(c.ref=n?kf(n,o):o),y.cloneElement(a,c)}return y.Children.count(a)>1?y.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var J6e=Symbol("radix.slottable");function e8e(e){return y.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===J6e}function t8e(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...c)=>{const d=i(...c);return a(...c),d}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function r8e(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var z0="Dialog",[EW,AW]=ou(z0),[n8e,Ma]=EW(z0),TW=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,c=y.useRef(null),d=y.useRef(null),[f,m]=Kh({prop:n,defaultProp:a??!1,onChange:i,caller:z0});return s.jsx(n8e,{scope:t,triggerRef:c,contentRef:d,contentId:gl(),titleId:gl(),descriptionId:gl(),open:f,onOpenChange:m,onOpenToggle:y.useCallback(()=>m(h=>!h),[m]),modal:o,children:r})};TW.displayName=z0;var OW="DialogTrigger",PW=y.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Ma(OW,r),i=Qt(t,a.triggerRef);return s.jsx(vt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":YA(a.open),...n,ref:i,onClick:dt(e.onClick,a.onOpenToggle)})});PW.displayName=OW;var WA="DialogPortal",[s8e,MW]=EW(WA,{forceMount:void 0}),RW=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=Ma(WA,t);return s.jsx(s8e,{scope:t,forceMount:r,children:y.Children.map(n,o=>s.jsx(Op,{present:r||i.open,children:s.jsx(CA,{asChild:!0,container:a,children:o})}))})};RW.displayName=WA;var rb="DialogOverlay",DW=y.forwardRef((e,t)=>{const r=MW(rb,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Ma(rb,e.__scopeDialog);return i.modal?s.jsx(Op,{present:n||i.open,children:s.jsx(i8e,{...a,ref:t})}):null});DW.displayName=rb;var a8e=X6e("DialogOverlay.RemoveScroll"),i8e=y.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Ma(rb,r);return s.jsx(kA,{as:a8e,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(vt.div,{"data-state":YA(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Xc="DialogContent",IW=y.forwardRef((e,t)=>{const r=MW(Xc,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Ma(Xc,e.__scopeDialog);return s.jsx(Op,{present:n||i.open,children:i.modal?s.jsx(o8e,{...a,ref:t}):s.jsx(l8e,{...a,ref:t})})});IW.displayName=Xc;var o8e=y.forwardRef((e,t)=>{const r=Ma(Xc,e.__scopeDialog),n=y.useRef(null),a=Qt(t,r.contentRef,n);return y.useEffect(()=>{const i=n.current;if(i)return TH(i)},[]),s.jsx(LW,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:dt(e.onCloseAutoFocus,i=>{i.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:dt(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,c=o.button===0&&o.ctrlKey===!0;(o.button===2||c)&&i.preventDefault()}),onFocusOutside:dt(e.onFocusOutside,i=>i.preventDefault())})}),l8e=y.forwardRef((e,t)=>{const r=Ma(Xc,e.__scopeDialog),n=y.useRef(!1),a=y.useRef(!1);return s.jsx(LW,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;r.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),LW=y.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,c=Ma(Xc,r),d=y.useRef(null),f=Qt(t,d);return sH(),s.jsxs(s.Fragment,{children:[s.jsx(xA,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(gA,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":YA(c.open),...o,ref:f,onDismiss:()=>c.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(u8e,{titleId:c.titleId}),s.jsx(f8e,{contentRef:d,descriptionId:c.descriptionId})]})]})}),QA="DialogTitle",$W=y.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Ma(QA,r);return s.jsx(vt.h2,{id:a.titleId,...n,ref:t})});$W.displayName=QA;var zW="DialogDescription",UW=y.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Ma(zW,r);return s.jsx(vt.p,{id:a.descriptionId,...n,ref:t})});UW.displayName=zW;var FW="DialogClose",BW=y.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Ma(FW,r);return s.jsx(vt.button,{type:"button",...n,ref:t,onClick:dt(e.onClick,()=>a.onOpenChange(!1))})});BW.displayName=FW;function YA(e){return e?"open":"closed"}var qW="DialogTitleWarning",[c8e,VW]=JTe(qW,{contentName:Xc,titleName:QA,docsSlug:"dialog"}),u8e=({titleId:e})=>{const t=VW(qW),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return y.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},d8e="DialogDescriptionWarning",f8e=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${VW(d8e).contentName}}.`;return y.useEffect(()=>{const a=e.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},m8e=TW,h8e=PW,p8e=RW,g8e=DW,x8e=IW,y8e=$W,v8e=UW,KW=BW,b8e=Symbol("radix.slottable");function w8e(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=b8e,t}var HW="AlertDialog",[j8e]=ou(HW,[AW]),No=AW(),GW=e=>{const{__scopeAlertDialog:t,...r}=e,n=No(t);return s.jsx(m8e,{...n,...r,modal:!0})};GW.displayName=HW;var N8e="AlertDialogTrigger",S8e=y.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=No(r);return s.jsx(h8e,{...a,...n,ref:t})});S8e.displayName=N8e;var _8e="AlertDialogPortal",WW=e=>{const{__scopeAlertDialog:t,...r}=e,n=No(t);return s.jsx(p8e,{...n,...r})};WW.displayName=_8e;var C8e="AlertDialogOverlay",QW=y.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=No(r);return s.jsx(g8e,{...a,...n,ref:t})});QW.displayName=C8e;var Dd="AlertDialogContent",[k8e,E8e]=j8e(Dd),A8e=w8e("AlertDialogContent"),YW=y.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=No(r),o=y.useRef(null),c=Qt(t,o),d=y.useRef(null);return s.jsx(c8e,{contentName:Dd,titleName:XW,docsSlug:"alert-dialog",children:s.jsx(k8e,{scope:r,cancelRef:d,children:s.jsxs(x8e,{role:"alertdialog",...i,...a,ref:c,onOpenAutoFocus:dt(a.onOpenAutoFocus,f=>{f.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[s.jsx(A8e,{children:n}),s.jsx(O8e,{contentRef:o})]})})})});YW.displayName=Dd;var XW="AlertDialogTitle",ZW=y.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=No(r);return s.jsx(y8e,{...a,...n,ref:t})});ZW.displayName=XW;var JW="AlertDialogDescription",eQ=y.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=No(r);return s.jsx(v8e,{...a,...n,ref:t})});eQ.displayName=JW;var T8e="AlertDialogAction",tQ=y.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=No(r);return s.jsx(KW,{...a,...n,ref:t})});tQ.displayName=T8e;var rQ="AlertDialogCancel",nQ=y.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=E8e(rQ,r),i=No(r),o=Qt(t,a);return s.jsx(KW,{...i,...n,ref:o})});nQ.displayName=rQ;var O8e=({contentRef:e})=>{const t=`\`${Dd}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Dd}\` by passing a \`${JW}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Dd}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return y.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},P8e=GW,M8e=WW,sQ=QW,aQ=YW,iQ=tQ,oQ=nQ,lQ=ZW,cQ=eQ;const XA=P8e,R8e=M8e,uQ=y.forwardRef(({className:e,...t},r)=>s.jsx(sQ,{className:H("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));uQ.displayName=sQ.displayName;const U0=y.forwardRef(({className:e,...t},r)=>s.jsxs(R8e,{children:[s.jsx(uQ,{}),s.jsx(aQ,{ref:r,className:H("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));U0.displayName=aQ.displayName;const F0=({className:e,...t})=>s.jsx("div",{className:H("flex flex-col space-y-2 text-center sm:text-left",e),...t});F0.displayName="AlertDialogHeader";const B0=({className:e,...t})=>s.jsx("div",{className:H("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});B0.displayName="AlertDialogFooter";const q0=y.forwardRef(({className:e,...t},r)=>s.jsx(lQ,{ref:r,className:H("text-lg font-semibold",e),...t}));q0.displayName=lQ.displayName;const V0=y.forwardRef(({className:e,...t},r)=>s.jsx(cQ,{ref:r,className:H("text-sm text-muted-foreground",e),...t}));V0.displayName=cQ.displayName;const K0=y.forwardRef(({className:e,...t},r)=>s.jsx(iQ,{ref:r,className:H(y8(),e),...t}));K0.displayName=iQ.displayName;const H0=y.forwardRef(({className:e,...t},r)=>s.jsx(oQ,{ref:r,className:H(y8({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));H0.displayName=oQ.displayName;function $s(e){return typeof e=="string"&&e.length>0&&e!=="undefined"&&e!=="null"}const D8e=[{id:"general",label:"General",icon:cre},{id:"members",label:"Members",icon:yr,count:0},{id:"roles",label:"Roles",icon:eh},{id:"categories",label:"Categories",icon:Z6}],I8e=()=>{const{projects:e,refreshProjects:t}=zp(),[r,n]=y.useState(null),a=e.find(_=>_.id===r)||null,[i,o]=y.useState(!1),[c,d]=y.useState(""),[f,m]=y.useState(""),[h,g]=y.useState([]),[x,w]=y.useState(""),[b,j]=y.useState(!1);y.useEffect(()=>{(async()=>{try{const S=await X.get("/api/companies");S.companies&&(g(S.companies),S.companies.length>0&&w(S.companies[0].id))}catch(S){console.error("Failed to fetch companies:",S)}})()},[]);const N=async()=>{if(!c.trim()||!x){G.error("Please enter a project name and select a company.");return}try{j(!0),await X.post("/api/projects",{name:c,description:f,company_id:x}),m(""),o(!1),t(),G.success("Project created successfully")}catch(_){console.error("Failed to create project:",_),G.error(_ instanceof Error?_.message:"Failed to create project")}finally{j(!1)}};return r&&a?s.jsx(L8e,{project:a,onBack:()=>n(null),onUpdate:t}):(r&&!a&&n(null),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Projects"}),s.jsxs("button",{onClick:()=>o(!i),className:"px-4 py-2 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90 transition-colors flex items-center gap-1.5",children:[s.jsx(br,{className:"w-4 h-4"})," New Project"]})]}),s.jsx(ds,{children:i&&s.jsxs(Qe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-card border border-border rounded-xl p-5",children:[s.jsx("h3",{className:"text-base font-semibold text-foreground mb-3",children:"Create New Project"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{value:c,onChange:_=>d(_.target.value),placeholder:"Project name...",className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"}),s.jsx("textarea",{value:f,onChange:_=>m(_.target.value),placeholder:"Description...",rows:2,className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring resize-none"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs font-medium text-foreground",children:"Company"}),s.jsxs("select",{value:x,onChange:_=>w(_.target.value),className:"w-full bg-secondary border border-border rounded-lg px-3 py-2 text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:[s.jsx("option",{value:"",disabled:!0,children:"Select a company"}),h.map(_=>s.jsx("option",{value:_.id,children:_.name},_.id))]})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx("button",{onClick:N,disabled:b,className:"px-4 py-2 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90 transition-colors disabled:opacity-50",children:b?"Creating...":"Create"}),s.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 rounded-lg bg-secondary text-secondary-foreground text-sm hover:bg-muted transition-colors",children:"Cancel"})]})]})]})}),s.jsx("div",{className:"space-y-3",children:e.map((_,S)=>s.jsx(Qe.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:S*.06},className:"bg-card border rounded-xl p-5 transition-colors border-border hover:border-primary/20",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0 bg-secondary",children:s.jsx(Zi,{className:"w-5 h-5 text-muted-foreground"})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h3",{className:"text-base font-semibold text-foreground",children:_.name||"(unnamed project)"}),s.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:_.id})]})]}),s.jsx("div",{className:"flex items-center gap-3 flex-shrink-0",children:s.jsx("button",{onClick:()=>n(_.id),className:"text-sm text-muted-foreground hover:text-foreground transition-colors",children:"Edit"})})]})},_.id))})]}))};function L8e({project:e,onBack:t,onUpdate:r}){const[n,a]=y.useState("general"),[i,o]=y.useState([]),[c,d]=y.useState(!1),f=async()=>{try{d(!0);const h=await X.get(`/api/projects/${e.id}/members`);h.members&&o(h.members)}catch(h){console.error("Failed to fetch members:",h)}finally{d(!1)}},m=()=>{r(),n==="members"&&f()};return y.useEffect(()=>{f()},[e.id]),s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("button",{onClick:t,className:"flex items-center gap-1.5 text-sm text-muted-foreground hover:text-foreground transition-colors mb-2",children:[s.jsx(vs,{className:"w-4 h-4"})," Back to Projects"]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-xl bg-primary/10 flex items-center justify-center",children:s.jsx(Zi,{className:"w-7 h-7 text-primary"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-foreground",children:e.name||"(unnamed project)"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.description||"No description"})]})]}),s.jsx("div",{className:"flex border-b border-border",children:D8e.map(h=>s.jsxs("button",{onClick:()=>a(h.id),className:`flex items-center gap-2 px-4 py-3 text-sm font-medium transition-colors border-b-2 ${n===h.id?"text-primary border-primary":"text-muted-foreground border-transparent hover:text-foreground"}`,children:[s.jsx(h.icon,{className:"w-4 h-4"}),h.label,(h.id==="members"?i.length:h.count)!==void 0&&s.jsx("span",{className:"text-[10px] bg-muted px-1.5 py-0.5 rounded-full",children:h.id==="members"?i.length:h.count})]},h.id))}),s.jsxs("div",{children:[n==="general"&&s.jsx($8e,{project:e,onUpdate:r,onBack:t}),n==="members"&&s.jsx(z8e,{project:e,members:i,loading:c,onUpdate:f}),n==="roles"&&s.jsx(F8e,{project:e,onUpdate:m}),n==="categories"&&s.jsx(q8e,{project:e,members:i,onUpdate:r})]})]})}function $8e({project:e,onUpdate:t,onBack:r}){const[n,a]=y.useState(e.name),[i,o]=y.useState(e.description),[c,d]=y.useState(e.role||""),[f,m]=y.useState(e.rolePrompt||""),[h,g]=y.useState(e.company_id||e.company||""),[x,w]=y.useState(!1),[b,j]=y.useState(!1),[N,_]=y.useState(!1),[S,k]=y.useState([]);y.useEffect(()=>{X.get("/api/role-templates").then(O=>k(O.roles||[])).catch(()=>{})},[]);const A=async()=>{if(!n.trim()){G.error("Project name is required");return}w(!0);try{await X.put(`/api/projects/${e.id}`,{name:n,description:i,role:c,rolePrompt:f,company_id:h}),G.success("Project updated"),t()}catch(O){G.error(O.message||"Failed to update project")}finally{w(!1)}},T=async()=>{j(!0);try{await X.delete(`/api/projects/${e.id}`),G.success("Project deleted"),t(),r()}catch(O){G.error(O.message||"Failed to delete project")}finally{j(!1),_(!1)}};return s.jsxs(Qe.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[s.jsxs("div",{className:"bg-card border border-border rounded-xl p-5 space-y-5",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-medium text-foreground mb-1 flex items-center gap-1.5",children:[s.jsx(Zi,{className:"w-3.5 h-3.5 text-muted-foreground"})," Project Name *"]}),s.jsx(Ks,{value:n,onChange:O=>a(O.target.value),className:"bg-background border-border text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-foreground mb-1 flex items-center gap-1.5",children:" Description"}),s.jsx("textarea",{value:i,onChange:O=>o(O.target.value),placeholder:"Brief description of the project",rows:4,className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring resize-y"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-medium text-foreground mb-1 flex items-center gap-1.5",children:[s.jsx(fn,{className:"w-3.5 h-3.5 text-muted-foreground"})," Your Role"]}),s.jsxs(Wi,{value:c,onValueChange:d,children:[s.jsx(ti,{className:"bg-background border-border text-sm",children:s.jsx(Qi,{placeholder:"Select role..."})}),s.jsx(ri,{children:S.filter(O=>O.name||O.display_name).map(O=>s.jsx(bn,{value:O.display_name||O.name,children:O.display_name||O.name},O.id||O.name))})]}),s.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"Your role in this project (used for AI context)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-foreground mb-1 flex items-center gap-1.5",children:" Role Prompt"}),s.jsx(Ks,{value:f,onChange:O=>m(O.target.value),className:"bg-background border-border text-sm"}),s.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"Brief description of your responsibilities"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-medium text-foreground mb-1 flex items-center gap-1.5",children:[s.jsx(Zi,{className:"w-3.5 h-3.5 text-muted-foreground"})," Company"]}),s.jsx(Ks,{value:h,onChange:O=>g(O.target.value),placeholder:"Company this project belongs to...",className:"w-full h-9 bg-background border border-border rounded-lg px-3 text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-ring"})]}),s.jsx("div",{className:"flex justify-end pt-2",children:s.jsxs("button",{onClick:A,disabled:x,className:"flex items-center gap-2 px-5 py-2.5 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90 transition-colors disabled:opacity-50",children:[x?s.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):s.jsx(Jc,{className:"w-4 h-4"}),x?"Saving...":"Save Changes"]})})]}),s.jsxs("div",{className:"border border-destructive/30 bg-destructive/5 rounded-xl p-5",children:[s.jsxs("h3",{className:"text-sm font-semibold text-destructive mb-1 flex items-center gap-2",children:[s.jsx(vr,{className:"w-4 h-4"})," Danger Zone"]}),s.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Deleting a project will permanently remove all associated data including questions, decisions, risks, and contacts."}),N?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:T,disabled:b,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-destructive text-destructive-foreground text-sm font-medium hover:bg-destructive/90 transition-colors disabled:opacity-50",children:[b?s.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):s.jsx(Et,{className:"w-4 h-4"}),b?"Deleting...":"Confirm Delete"]}),s.jsx("button",{onClick:()=>_(!1),className:"px-4 py-2 rounded-lg border border-border text-sm text-muted-foreground hover:bg-secondary transition-colors",children:"Cancel"})]}):s.jsxs("button",{onClick:()=>_(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg border border-destructive/30 text-destructive text-sm font-medium hover:bg-destructive/10 transition-colors",children:[s.jsx(Et,{className:"w-4 h-4"})," Delete Project"]})]})]})}function z8e({project:e,members:t,loading:r,onUpdate:n}){const[a,i]=y.useState(!1),[o,c]=y.useState(null),[d,f]=y.useState(null),[m,h]=y.useState("list"),[g,x]=y.useState([]),[w,b]=y.useState(!1);y.useEffect(()=>{j()},[e.id]);const j=async()=>{try{b(!0);const M=await X.get(`/api/projects/${e.id}/categories`);x(M)}catch(M){console.error("Failed to fetch categories:",M)}finally{b(!1)}},N=async()=>{if(d)try{c(d.user_id),await X.delete(`/api/projects/${e.id}/members/${d.user_id}`),n()}catch(M){console.error("Failed to remove member:",M),G.error("Failed to remove member")}finally{c(null),f(null)}},_=async(M,D)=>{try{await X.put(`/api/projects/${e.id}/members/${M}`,{user_role:D}),n()}catch(z){console.error("Failed to update member role:",z)}},S=M=>t.filter(D=>{const z=D.user_role||D.role;return e.settings?.roles?.find(K=>K.name===z)?.category===M.id}),k=(M,D)=>{M.dataTransfer.setData("text/plain",D),M.dataTransfer.effectAllowed="move"},A=M=>{M.preventDefault(),M.dataTransfer.dropEffect="move"},T=async(M,D)=>{M.preventDefault();const z=M.dataTransfer.getData("text/plain");if(!z)return;const Y=t.find(U=>U.user_id===z);if(!Y)return;let I="";if(D){const U=e.settings?.roles?.filter(L=>L.category===D)||[];U.length>0?I=U[0].name:I=(U.find(F=>F.name==="Member")||U[0])?.name||"Member"}else I="";const K=Y.user_role||Y.role;I!==K&&await _(z,I)},O=()=>t.filter(M=>{const D=M.user_role||M.role,z=e.settings?.roles?.find(I=>I.name===D),Y=!z||!z.category||!g.find(I=>I.id===z.category);return Y&&M.display_name==="RPAD"&&console.log("Unassigned Debug (RPAD):",{memberRole:D,roleFound:!!z,roleCategory:z?.category,catExists:!!g.find(I=>I.id===z?.category)}),Y}),P=async(M,D)=>{try{const z={...e.settings,category_leads:{...e.settings?.category_leads,[M]:D}};await X.put(`/api/projects/${e.id}`,{settings:z}),n()}catch(z){console.error("Failed to set lead:",z),G.error("Failed to set team lead")}},R=t.map(M=>M.linked_contact?.id).filter(M=>!!M);return s.jsxs(Qe.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[s.jsxs("div",{className:"bg-card border border-border rounded-xl p-5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[s.jsx(yr,{className:"w-4 h-4"})," TEAM MEMBERS (",t.length,")"]}),s.jsxs("div",{className:"flex bg-secondary rounded-lg p-0.5",children:[s.jsx("button",{onClick:()=>h("list"),className:`px-3 py-1.5 rounded-md text-xs font-medium transition-colors ${m==="list"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"List"}),s.jsx("button",{onClick:()=>h("teams"),className:`px-3 py-1.5 rounded-md text-xs font-medium transition-colors ${m==="teams"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"Teams"})]})]}),s.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90 transition-colors flex items-center gap-1.5",children:[s.jsx(yr,{className:"w-4 h-4"})," Invite"]})]}),r||w?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):t.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-3",children:s.jsx(yr,{className:"w-8 h-8 text-muted-foreground"})}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"No team members yet"}),s.jsx("button",{onClick:()=>i(!0),className:"px-4 py-2 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90 transition-colors",children:"Invite Member"})]}):m==="list"?s.jsx("div",{className:"grid gap-3",children:t.map(M=>s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border bg-secondary/20 hover:bg-secondary/40 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[$s(M.avatar_url)||$s(M.linked_contact?.avatar_url)?s.jsx("img",{src:$s(M.avatar_url)?M.avatar_url:M.linked_contact?.avatar_url,alt:M.display_name||M.linked_contact?.name||"Member",className:"w-10 h-10 rounded-full object-cover bg-secondary"}):s.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold",children:(M.display_name?.[0]||M.username?.[0]||M.linked_contact?.name?.[0]||"?").toUpperCase()}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-foreground",children:M.display_name||M.linked_contact?.name||M.username||"Unknown User"}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx("span",{children:M.user_role||M.role}),M.linked_contact?.organization&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:""}),s.jsx("span",{children:M.linked_contact.organization})]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-xs text-right text-muted-foreground",children:s.jsxs("p",{children:["Joined ",M.joined_at?new Date(M.joined_at).toLocaleDateString():""]})}),s.jsx("button",{onClick:()=>f(M),disabled:o===M.user_id,className:"p-2 text-muted-foreground hover:text-destructive transition-colors disabled:opacity-50",children:o===M.user_id?s.jsx("div",{className:"w-4 h-4 border-2 border-destructive border-t-transparent rounded-full animate-spin"}):s.jsx(Et,{className:"w-4 h-4"})})]})]},M.user_id))}):s.jsxs("div",{className:"space-y-4",children:[g.map(M=>{const D=S(M),z=e.settings?.category_leads?.[M.id],Y=t.find(I=>I.user_id===z);return s.jsxs(Qe.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},className:"bg-card border border-border rounded-xl p-5",onDragOver:A,onDrop:I=>T(I,M.id),children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2 rounded-lg bg-${M.color||"blue"}-500/10 text-${M.color||"blue"}-500`,children:s.jsx(yr,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-base font-semibold text-foreground flex items-center gap-2",children:[M.display_name,s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-secondary text-muted-foreground",children:D.length})]}),Y&&s.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(eh,{className:"w-3 h-3 text-amber-500"}),"Lead: ",s.jsx("span",{className:"font-medium text-foreground",children:Y.display_name})]})]})]})}),s.jsxs("div",{className:"space-y-2",children:[D.map(I=>{const K=z===I.user_id;return s.jsxs("div",{className:`flex items-center gap-4 p-3 rounded-xl border transition-all cursor-grab active:cursor-grabbing group relative ${K?"bg-amber-500/5 border-amber-500/20":"bg-background border-border hover:border-primary/30"}`,draggable:!0,onDragStart:U=>k(U,I.user_id),children:[s.jsxs("div",{className:"relative",children:[$s(I.avatar_url)||$s(I.linked_contact?.avatar_url)?s.jsx("img",{src:$s(I.avatar_url)?I.avatar_url:I.linked_contact?.avatar_url,alt:I.display_name,className:"w-10 h-10 rounded-full object-cover border border-border"}):s.jsx("div",{className:"w-10 h-10 rounded-full bg-secondary flex items-center justify-center text-sm font-bold text-muted-foreground border border-border",children:(I.display_name?.[0]||"?").toUpperCase()}),K&&s.jsx("div",{className:"absolute -bottom-1 -right-1 bg-amber-500 text-white rounded-full p-0.5 border-2 border-background",children:s.jsx(eh,{className:"w-3 h-3"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h4",{className:"text-sm font-medium text-foreground truncate",children:I.display_name}),I.linked_contact?.organization&&s.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-secondary text-muted-foreground truncate max-w-[100px]",children:I.linked_contact.organization})]}),s.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:s.jsxs(Wi,{value:I.user_role||I.role||"",onValueChange:U=>_(I.user_id,U==="no-role"?"":U),children:[s.jsx(ti,{className:"h-5 text-[11px] bg-transparent border-none p-0 text-muted-foreground focus:ring-0 shadow-none w-auto gap-1 hover:text-foreground",children:s.jsx(Qi,{placeholder:"No Role"})}),s.jsxs(ri,{children:[s.jsx(bn,{value:"no-role",children:"No Role"}),g.map(U=>{const L=e.settings?.roles?.filter(F=>F.category===U.id)||[];return L.length===0?null:s.jsxs(q$,{children:[s.jsx(G_,{className:"text-[10px] font-bold text-muted-foreground px-2 py-1.5",children:U.display_name}),L.map(F=>s.jsx(bn,{value:F.name,className:"text-[10px]",children:F.name},F.id))]},U.id)})]})]})})]}),s.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:U=>{U.preventDefault(),U.stopPropagation(),P(M.id,I.user_id)},className:`p-2 rounded-lg transition-colors ${K?"text-amber-500 bg-amber-500/10 hover:bg-amber-500/20":"text-muted-foreground hover:text-amber-500 hover:bg-amber-500/10"}`,title:K?"Current Team Lead":"Make Team Lead",children:s.jsx(eh,{className:"w-4 h-4"})}),s.jsx("div",{className:"w-px h-4 bg-border mx-1"}),s.jsx("div",{className:"p-2 text-muted-foreground cursor-grab active:cursor-grabbing",children:s.jsx(uP,{className:"w-4 h-4"})})]})]},I.user_id)}),D.length===0&&s.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center border border-dashed border-border/50 rounded-xl bg-secondary/5",children:[s.jsx(yr,{className:"w-8 h-8 text-muted-foreground/30 mb-2"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Drag members here to assign them to ",M.display_name]})]})]})]},M.id)}),O().length>0&&s.jsxs(Qe.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},className:"bg-card border border-border border-dashed rounded-xl p-5",onDragOver:A,onDrop:M=>T(M,null),children:[s.jsxs("h3",{className:"text-sm font-semibold text-foreground mb-3 flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500 animate-pulse"}),"Unassigned Members",s.jsx("span",{className:"text-[10px] bg-secondary text-muted-foreground px-2 py-0.5 rounded-full",children:O().length})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:O().map(M=>s.jsxs("div",{className:"flex items-center gap-3 bg-secondary/10 border border-border/50 hover:border-amber-500/50 rounded-xl p-3 cursor-grab active:cursor-grabbing group relative transition-colors",draggable:!0,onDragStart:D=>k(D,M.user_id),children:[s.jsxs("div",{className:"relative",children:[$s(M.avatar_url)||$s(M.linked_contact?.avatar_url)?s.jsx("img",{src:$s(M.avatar_url)?M.avatar_url:M.linked_contact?.avatar_url,alt:M.display_name,className:"w-10 h-10 rounded-full object-cover border border-border"}):s.jsx("div",{className:"w-10 h-10 rounded-full bg-secondary flex items-center justify-center text-sm font-bold text-muted-foreground border border-border",children:(M.display_name?.[0]||"?").toUpperCase()}),s.jsx("div",{className:"absolute -top-1 -right-1 bg-amber-500 text-white rounded-full p-0.5 w-4 h-4 flex items-center justify-center text-[10px]",children:"!"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("h4",{className:"text-sm font-medium text-foreground truncate",children:M.display_name})}),s.jsx("div",{className:"flex items-center gap-2 mt-1",children:s.jsxs(Wi,{value:M.user_role||M.role||"",onValueChange:D=>_(M.user_id,D),children:[s.jsx(ti,{className:"h-6 text-[11px] bg-background border-border w-full",children:s.jsx(Qi,{placeholder:"Select Role..."})}),s.jsxs(ri,{children:[s.jsx(bn,{value:"no-role",children:"No Role"}),g.map(D=>{const z=e.settings?.roles?.filter(Y=>Y.category===D.id)||[];return z.length===0?null:s.jsxs(q$,{children:[s.jsx(G_,{className:"text-[10px] font-bold text-muted-foreground px-2 py-1.5",children:D.display_name}),z.map(Y=>s.jsx(bn,{value:Y.name,className:"text-[10px]",children:Y.name},Y.id))]},D.id)})]})]})})]}),s.jsx("div",{className:"text-muted-foreground opacity-50 group-hover:opacity-100",children:s.jsx(uP,{className:"w-4 h-4"})})]},M.user_id))})]})]})]}),s.jsx(U8e,{open:a,onClose:()=>i(!1),projectId:e.id,onMemberAdded:n,existingContactIds:R}),s.jsx(XA,{open:!!d,onOpenChange:M=>!M&&f(null),children:s.jsxs(U0,{children:[s.jsxs(F0,{children:[s.jsx(q0,{children:"Remove Team Member"}),s.jsxs(V0,{children:["Are you sure you want to remove ",s.jsx("strong",{children:d?.display_name||d?.linked_contact?.name||"this member"})," from the project? This action cannot be undone."]})]}),s.jsxs(B0,{children:[s.jsx(H0,{children:"Cancel"}),s.jsx(K0,{onClick:N,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Remove Member"})]})]})})]})}function U8e({open:e,onClose:t,projectId:r,onMemberAdded:n,existingContactIds:a=[]}){const[i,o]=y.useState("contacts"),[c,d]=y.useState(""),[f,m]=y.useState(""),[h,g]=y.useState(null),[x,w]=y.useState([]),[b,j]=y.useState(!1),[N,_]=y.useState(!1),[S,k]=y.useState(!1);y.useEffect(()=>{e&&i==="contacts"&&A()},[e,i]);const A=async()=>{try{j(!0);const P=await X.get("/api/contacts");if(P.contacts){const R=P.contacts.filter(M=>!a.includes(M.id));w(R)}}catch(P){console.error("Failed to fetch contacts:",P)}finally{j(!1)}},T=async()=>{if(!c.trim()){G.error("Please enter an email address");return}k(!0);try{await X.post(`/api/projects/${r}/members/invite`,{email:c.trim(),message:f.trim()||void 0}),G.success("Invitation sent"),d(""),m(""),n(),t()}catch(P){G.error(P.message||"Failed to send invitation")}finally{k(!1)}},O=async()=>{if(h)try{_(!0),await X.post(`/api/projects/${r}/members/add-contact`,{contact_id:h}),n(),t()}catch(P){console.error("Failed to add contact:",P),G.error("Failed to add contact to team")}finally{_(!1)}};return s.jsx(Ws,{open:e,onOpenChange:t,children:s.jsxs(ui,{className:"sm:max-w-[500px] bg-card border-border",children:[s.jsx(Nh,{children:s.jsx(Na,{className:"text-foreground",children:"Invite Team Member"})}),s.jsxs("div",{className:"flex border-b border-border mb-4",children:[s.jsx("button",{onClick:()=>o("email"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${i==="email"?"text-primary border-primary":"text-muted-foreground border-transparent"}`,children:"New Email"}),s.jsx("button",{onClick:()=>o("contacts"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${i==="contacts"?"text-primary border-primary":"text-muted-foreground border-transparent"}`,children:"Existing Contacts"})]}),i==="email"?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-foreground mb-1 block",children:"Email Address *"}),s.jsx(Ks,{value:c,onChange:P=>d(P.target.value),placeholder:"colleague@example.com",className:"bg-background border-border text-sm"}),s.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"They will receive an email invitation to join this project"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-foreground mb-1 block",children:"Access Level"}),s.jsx("p",{className:"text-sm text-foreground",children:"Member - Can view and edit data"}),s.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"You can assign a project role after they join."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-foreground mb-1 block",children:"Personal Message (optional)"}),s.jsx("textarea",{value:f,onChange:P=>m(P.target.value),placeholder:"Add a personal note to the invitation...",rows:3,className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring resize-none"})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg border border-border text-sm text-muted-foreground hover:bg-secondary transition-colors",children:"Cancel"}),s.jsx("button",{onClick:T,disabled:S||!c.trim(),className:"px-4 py-2 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90 transition-colors disabled:opacity-50",children:S?"Sending...":"Send Invitation"})]})]}):s.jsxs("div",{className:"space-y-3",children:[b?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):x.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No contacts found."}):s.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto scrollbar-thin pr-1",children:x.map(P=>s.jsxs("div",{onClick:()=>g(P.id),className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer border transition-all ${h===P.id?"bg-primary/10 border-primary shadow-sm":"bg-card hover:bg-secondary/50 border-border hover:border-border/80"}`,children:[s.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center transition-colors ${h===P.id?"border-primary bg-primary":"border-muted-foreground"}`,children:h===P.id&&s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary-foreground"})}),$s(P.avatarUrl)||$s(P.avatar)?s.jsx("img",{src:$s(P.avatarUrl)?P.avatarUrl:P.avatar,alt:P.name,className:"w-10 h-10 rounded-full object-cover bg-secondary"}):s.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-sm",children:(P.name||"?").substring(0,2).toUpperCase()}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:`text-sm font-medium ${h===P.id?"text-primary":"text-foreground"}`,children:P.name||"(unnamed)"}),s.jsxs("div",{className:"flex flex-col gap-0.5",children:[P.organization&&s.jsx("p",{className:"text-[10px] text-muted-foreground font-medium",children:P.organization}),s.jsx("p",{className:"text-[10px] text-muted-foreground truncate",children:P.email||"No email"})]})]}),P.role&&s.jsx("div",{className:"text-[10px] px-2 py-0.5 rounded-full bg-secondary text-secondary-foreground",children:P.role})]},P.id))}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-foreground mb-1 block",children:"Access Level"}),s.jsx("p",{className:"text-sm text-foreground",children:"Member - Can view and edit data"})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs("button",{onClick:O,disabled:!h||N,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[N?s.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):s.jsx(yr,{className:"w-4 h-4"}),"Add to Team"]})}),s.jsx("div",{className:"text-[10px] text-muted-foreground space-y-0.5",children:s.jsxs("p",{children:[s.jsx("span",{className:"font-medium text-primary",children:"Add to Team:"})," Adds contact as team member directly."]})})]})]})})}function F8e({project:e,onUpdate:t}){const[r,n]=y.useState(!1),[a,i]=y.useState(null),[o,c]=y.useState([]);y.useEffect(()=>{d()},[e.id]);const d=async()=>{try{const x=await X.get(`/api/projects/${e.id}/categories`);c(x)}catch(x){console.error("Failed to fetch categories:",x)}},f=e.settings?.roles||[];[...Jz].map(x=>(f.find(w=>w.name===x.name),x));const h=[...f];Jz.forEach(x=>{h.find(w=>w.name===x.name)||h.push({...x,active:!1,id:`template-${x.id}`})});const g=async x=>{try{if(i(x.id),x.id.toString().startsWith("template-")){const w={name:x.name,description:x.description,active:!0};await X.post(`/api/projects/${e.id}/roles`,w)}else await X.put(`/api/projects/${e.id}/roles/${x.id}`,{active:!x.active});t()}catch(w){console.error("Error toggling role:",w),G.error("Failed to update role")}finally{i(null)}};return s.jsxs(Qe.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[s.jsxs("div",{className:"bg-card border border-border rounded-xl p-5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[s.jsx(eh,{className:"w-4 h-4"})," PROJECT ROLES"]}),s.jsxs("button",{onClick:()=>n(!0),className:"px-4 py-2 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90 transition-colors flex items-center gap-1.5",children:[s.jsx(br,{className:"w-4 h-4"})," Add Role"]})]}),s.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Define roles and responsibilities for this project."}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:h.map(x=>s.jsxs("div",{className:`p-4 rounded-xl border transition-colors ${x.active===!0?"border-primary/30 bg-primary/5":"border-border"}`,children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center flex-shrink-0 ${x.active===!0?"bg-primary/10":"bg-secondary"}`,children:s.jsx(fn,{className:`w-4 h-4 ${x.active===!0?"text-primary":"text-muted-foreground"}`})}),s.jsx("h4",{className:"text-sm font-semibold text-foreground",children:x.name||"(unnamed role)"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:x.description||""}),s.jsxs("div",{className:"mt-3 pt-3 border-t border-border flex items-center justify-between",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:x.active===!0,onChange:()=>g(x),disabled:!!a,className:"accent-primary w-4 h-4"}),s.jsx("span",{className:"text-xs text-foreground",children:a===x.id?"Updating...":x.active===!0?"Active":"Inactive"})]}),x.active&&s.jsxs("select",{className:"max-w-[120px] text-[10px] bg-secondary/50 border-none rounded px-2 py-1 text-foreground focus:ring-0",value:x.category||"",onChange:async w=>{const b=w.target.value;try{x.id.toString().startsWith("template-")||(await X.put(`/api/projects/${e.id}/roles/${x.id}`,{category:b}),t())}catch(j){console.error("Failed to update role category",j)}},children:[s.jsx("option",{value:"",children:"No Category"}),o.map(w=>s.jsx("option",{value:w.id,children:w.display_name},w.id))]})]})]},x.id))})]}),s.jsx(B8e,{open:r,onClose:()=>n(!1),projectId:e.id,onRoleAdded:t})]})}function B8e({open:e,onClose:t,projectId:r,onRoleAdded:n}){const[a,i]=y.useState(""),[o,c]=y.useState(""),[d,f]=y.useState([]),[m,h]=y.useState(!1),[g,x]=y.useState(""),[w,b]=y.useState(""),[j,N]=y.useState(!1);y.useEffect(()=>{e&&_()},[e]);const _=async()=>{try{h(!0);const k=await X.get(`/api/projects/${r}/categories`);f(k),k.length>0&&!o&&c(k[0].id)}catch(k){console.error("Failed to fetch categories:",k)}finally{h(!1)}},S=async()=>{if(a.trim())try{N(!0),await X.post(`/api/projects/${r}/roles`,{name:a,category:o,description:g,role_context:w,active:!0}),n(),t(),i(""),x(""),b(""),d.length>0&&c(d[0].id)}catch(k){console.error("Error creating role:",k),G.error("Failed to create role")}finally{N(!1)}};return s.jsx(Ws,{open:e,onOpenChange:t,children:s.jsxs(ui,{className:"sm:max-w-[450px] bg-card border-border",children:[s.jsx(Nh,{children:s.jsx(Na,{className:"text-foreground",children:"Add New Role"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-foreground mb-1 block",children:"Role Name *"}),s.jsx(Ks,{value:a,onChange:k=>i(k.target.value),placeholder:"e.g., Senior Developer, Tech Lead",className:"bg-background border-border text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-foreground mb-1 block",children:"Category"}),s.jsx("select",{value:o,onChange:k=>c(k.target.value),disabled:m,className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-ring",children:m?s.jsx("option",{children:"Loading categories..."}):d.map(k=>s.jsx("option",{value:k.id,children:k.display_name},k.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-foreground mb-1 block",children:"Description"}),s.jsx(Ks,{value:g,onChange:k=>x(k.target.value),placeholder:"Brief description of this role",className:"bg-background border-border text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-foreground mb-1 block",children:"Role Context (for AI)"}),s.jsx("textarea",{value:w,onChange:k=>b(k.target.value),placeholder:"Describe this role's responsibilities, priorities, and how the AI should adapt responses...",rows:4,className:"w-full bg-background border border-border rounded-lg px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring resize-y"})]}),s.jsxs("button",{onClick:()=>G.info("AI enhancement will use the project context to suggest role descriptions"),className:"flex items-center gap-2 text-sm text-accent font-medium hover:text-accent/80 transition-colors",children:[s.jsx(qt,{className:"w-4 h-4"})," Enhance with AI"]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg border border-border text-sm text-muted-foreground hover:bg-secondary transition-colors",children:"Cancel"}),s.jsx("button",{onClick:S,disabled:j||!a.trim(),className:"px-4 py-2 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90 transition-colors disabled:opacity-50",children:j?"Creating...":"Create Role"})]})]})})}function q8e({project:e,members:t,onUpdate:r}){const[n,a]=y.useState([]),[i,o]=y.useState(!1),[c,d]=y.useState(!1),[f,m]=y.useState(null),[h,g]=y.useState(null),x=async()=>{try{o(!0);const N=await X.get(`/api/projects/${e.id}/categories`);a(N)}catch(N){console.error("Failed to fetch categories:",N)}finally{o(!1)}};y.useEffect(()=>{x()},[e.id]);const w=N=>{g(N)},b=async()=>{if(h)try{await X.delete(`/api/projects/${e.id}/categories/${h.id}`),x()}catch(N){console.error("Failed to delete category:",N),G.error("Failed to delete category")}finally{g(null)}},j=async(N,_)=>{try{const S=e.settings?.category_leads||{},k={...e.settings,category_leads:{...S,[N]:_}};await X.put(`/api/projects/${e.id}`,{settings:k}),r()}catch(S){console.error("Failed to set lead:",S),G.error("Failed to set team lead")}};return s.jsxs(Qe.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[s.jsxs("div",{className:"bg-card border border-border rounded-xl p-5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[s.jsx(Z6,{className:"w-4 h-4"})," PROJECT CATEGORIES"]}),s.jsxs("button",{onClick:()=>{m(null),d(!0)},className:"px-4 py-2 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90 transition-colors flex items-center gap-1.5",children:[s.jsx(br,{className:"w-4 h-4"})," Add Category"]})]}),i?s.jsx("div",{className:"flex justify-center py-8",children:s.jsx("div",{className:"w-6 h-6 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):n.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"No categories found."}):s.jsx("div",{className:"grid gap-3",children:n.map(N=>s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-border bg-secondary/20 hover:bg-secondary/40 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold bg-${N.color||"blue"}-500/10 text-${N.color||"blue"}-500`,children:(N.display_name||"??").substring(0,2).toUpperCase()}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-foreground",children:N.display_name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:N.description||"No description"})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Team Lead"}),s.jsxs(Wi,{value:e.settings?.category_leads?.[N.id]||"",onValueChange:_=>j(N.id,_),children:[s.jsx(ti,{className:"h-6 text-[10px] bg-background border-border w-[140px]",children:s.jsx(Qi,{placeholder:"No Lead"})}),s.jsxs(ri,{children:[s.jsx(bn,{value:"no-lead",children:"No Lead Assigned"}),t.map(_=>s.jsx(bn,{value:_.user_id,className:"text-[10px]",children:_.display_name},_.user_id))]})]})]}),s.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full ${N.project_id?"bg-primary/10 text-primary":"bg-secondary text-secondary-foreground"}`,children:N.project_id?"Project":"Global"}),N.project_id&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:()=>{m(N),d(!0)},className:"p-1.5 text-muted-foreground hover:text-foreground transition-colors",children:s.jsx(_l,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>w(N),className:"p-1.5 text-muted-foreground hover:text-destructive transition-colors",children:s.jsx(Et,{className:"w-3.5 h-3.5"})})]})]})]},N.id))})]}),s.jsx(V8e,{open:c,onClose:()=>d(!1),projectId:e.id,onSuccess:x,initialData:f}),s.jsx(XA,{open:!!h,onOpenChange:N=>!N&&g(null),children:s.jsxs(U0,{children:[s.jsxs(F0,{children:[s.jsx(q0,{children:"Delete Category"}),s.jsxs(V0,{children:["Are you sure you want to delete the category ",s.jsx("strong",{children:h?.display_name}),"? This action cannot be undone."]})]}),s.jsxs(B0,{children:[s.jsx(H0,{children:"Cancel"}),s.jsx(K0,{onClick:b,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})}function V8e({open:e,onClose:t,projectId:r,onSuccess:n,initialData:a}){const[i,o]=y.useState(""),[c,d]=y.useState(""),[f,m]=y.useState(""),[h,g]=y.useState(!1);y.useEffect(()=>{e&&(a?(o(a.name),d(a.display_name),m(a.description||"")):(o(""),d(""),m("")))},[e,a]);const x=async()=>{if(!(!i.trim()||!c.trim()))try{g(!0);const w={name:i.toLowerCase().replace(/\s+/g,"_"),display_name:c,description:f,color:"blue"};a?await X.put(`/api/projects/${r}/categories/${a.id}`,w):await X.post(`/api/projects/${r}/categories`,w),n(),t()}catch(w){console.error("Failed to save category:",w),G.error("Failed to save category")}finally{g(!1)}};return s.jsx(Ws,{open:e,onOpenChange:t,children:s.jsxs(ui,{className:"sm:max-w-[450px] bg-card border-border",children:[s.jsx(Nh,{children:s.jsx(Na,{className:"text-foreground",children:a?"Edit Category":"Add New Category"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-foreground mb-1 block",children:"Display Name *"}),s.jsx(Ks,{value:c,onChange:w=>{d(w.target.value),!a&&(!i||i===c.toLowerCase().replace(/\s+/g,"_").slice(0,-1))&&o(w.target.value.toLowerCase().replace(/\s+/g,"_"))},placeholder:"e.g. Frontend Team",className:"bg-background border-border text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-foreground mb-1 block",children:"Internal Name (Slug) *"}),s.jsx(Ks,{value:i,onChange:w=>o(w.target.value),placeholder:"e.g. frontend_team",className:"bg-background border-border text-sm font-mono"}),s.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"Unique identifier used in system."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-foreground mb-1 block",children:"Description"}),s.jsx(Ks,{value:f,onChange:w=>m(w.target.value),placeholder:"Description...",className:"bg-background border-border text-sm"})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 rounded-lg border border-border text-sm text-muted-foreground hover:bg-secondary transition-colors",children:"Cancel"}),s.jsx("button",{onClick:x,disabled:h,className:"px-4 py-2 rounded-lg bg-primary text-primary-foreground text-sm font-medium hover:bg-primary/90 transition-colors disabled:opacity-50",children:h?"Saving...":a?"Update":"Create"})]})]})]})})}const fs="rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-[var(--shadow-sm)] transition-all duration-200",fr="w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-placeholder)] focus:outline-none focus:border-[var(--gm-border-focus)] focus:shadow-[var(--shadow-focus)] transition-all duration-150",ba="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] hover:bg-[var(--gm-interactive-primary-hover)] shadow-sm transition-all duration-150 disabled:opacity-50",Xa="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] hover:bg-[var(--gm-interactive-secondary-hover)] border border-[var(--gm-border-primary)] transition-all duration-150",K8e="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--color-danger-500)] text-white hover:bg-[var(--color-danger-600)] shadow-sm transition-all duration-150 disabled:opacity-50",wa="text-[10px] font-bold text-[var(--gm-accent-primary)] uppercase tracking-[0.1em]",Ur="text-[10px] font-bold text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-1 flex items-center gap-1.5",H8e=[{id:"general",label:"General",icon:fn},{id:"security",label:"Security",icon:Tte},{id:"sessions",label:"Sessions",icon:AC},{id:"settings",label:"User Settings",icon:qt},{id:"companies",label:"Companies",icon:of},{id:"integrations",label:"Integrations",icon:lb}];function Dl({title:e,subtitle:t}){return s.jsxs("div",{className:"mb-6",children:[s.jsx("h2",{className:"text-lg font-bold text-[var(--gm-text-primary)]",children:e}),t&&s.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)] mt-0.5",children:t})]})}const G8e=()=>{const{user:e,isLoading:t}=$0(),[r,n]=y.useState("general");if(t)return s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsx(ye,{className:"h-6 w-6 animate-spin text-[var(--gm-accent-primary)]"})});const a=(e?.display_name||e?.email||"??").substring(0,2).toUpperCase();return s.jsxs("div",{className:"flex h-full",children:[s.jsxs("div",{className:"w-48 shrink-0 border-r border-[var(--gm-border-primary)] bg-[var(--gm-bg-primary)] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center gap-2.5 px-4 py-4 border-b border-[var(--gm-border-primary)]",children:[e?.avatar_url&&e.avatar_url!=="undefined"&&e.avatar_url!=="null"?s.jsx("img",{src:e.avatar_url,alt:"",className:"w-7 h-7 rounded-full object-cover"}):s.jsx("div",{className:"w-7 h-7 rounded-full bg-[var(--gm-interactive-primary)]/10 flex items-center justify-center",children:s.jsx("span",{className:"text-[10px] font-bold text-[var(--gm-accent-primary)]",children:a})}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("span",{className:"text-sm font-bold text-[var(--gm-accent-primary)]",children:"Profile"}),s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] truncate",children:e?.email})]})]}),s.jsx("nav",{className:"py-2",children:H8e.map(i=>{const o=i.icon,c=r===i.id;return s.jsxs("button",{onClick:()=>n(i.id),className:H("w-full flex items-center gap-2.5 px-4 py-2 text-xs transition-colors",c?"text-[var(--gm-accent-primary)] bg-[var(--gm-surface-hover)] font-semibold":"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] hover:bg-[var(--gm-surface-hover)]"),children:[s.jsx(o,{className:"w-3.5 h-3.5 shrink-0"}),s.jsx("span",{className:"flex-1 text-left",children:i.label}),c&&s.jsx(Ui,{className:"w-3 h-3 shrink-0"})]},i.id)})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[r==="general"&&s.jsx(W8e,{}),r==="security"&&s.jsx(Q8e,{}),r==="sessions"&&s.jsx(Y8e,{}),r==="settings"&&s.jsx(eUe,{}),r==="companies"&&s.jsx(tUe,{}),r==="integrations"&&s.jsx(Z8e,{})]})]})};function W8e(){const{user:e,updateProfile:t}=$0(),[r,n]=y.useState(""),[a,i]=y.useState(""),[o,c]=y.useState(""),[d,f]=y.useState(""),[m,h]=y.useState("Europe/Lisbon"),[g,x]=y.useState("en"),[w,b]=y.useState(!1);y.useEffect(()=>{e&&(n(e.username||""),i(e.display_name||""),f(e.avatar_url||""),h(e.timezone||"Europe/Lisbon"))},[e]);const j=async()=>{b(!0);try{await t.mutateAsync({username:r,display_name:a,avatar_url:d||void 0,timezone:m}),G.success("Profile updated")}catch(N){G.error(N.message||"Failed to update profile")}finally{b(!1)}};return s.jsxs("div",{className:"space-y-5",children:[s.jsx(Dl,{title:"General",subtitle:"Manage your account information and preferences"}),s.jsxs("div",{className:H(fs,"p-5 space-y-5"),children:[s.jsx("h3",{className:wa,children:"Account Information"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:Ur,children:[s.jsx(Wn,{className:"w-3 h-3"})," Email"]}),s.jsx("input",{value:e?.email||"",readOnly:!0,className:H(fr,"opacity-60 cursor-not-allowed")}),s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:"Email cannot be changed"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:Ur,children:[s.jsx(iee,{className:"w-3 h-3"})," Username"]}),s.jsx("input",{value:r,onChange:N=>n(N.target.value),className:fr})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:Ur,children:[s.jsx(Ore,{className:"w-3 h-3"})," Display Name"]}),s.jsx("input",{value:a,onChange:N=>i(N.target.value),className:fr})]}),s.jsxs("div",{children:[s.jsxs("label",{className:Ur,children:[s.jsx(ub,{className:"w-3 h-3"})," Bio"]}),s.jsx("textarea",{value:o,onChange:N=>c(N.target.value),placeholder:"Tell us a bit about yourself",rows:3,className:H(fr,"resize-y")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:Ur,children:[s.jsx(CC,{className:"w-3 h-3"})," Avatar URL"]}),s.jsx("input",{value:d,onChange:N=>f(N.target.value),className:H(fr,"font-mono text-xs")}),s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:"Enter an image URL. Leave empty for auto-generated avatar."})]})]}),s.jsxs("div",{className:H(fs,"p-5 space-y-4"),children:[s.jsx("h3",{className:wa,children:"Preferences"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:Ur,children:[s.jsx(lf,{className:"w-3 h-3"})," Timezone"]}),s.jsxs("select",{value:m,onChange:N=>h(N.target.value),className:fr,children:[s.jsx("option",{value:"Europe/Lisbon",children:"Lisbon, Portugal (+00:00)"}),s.jsx("option",{value:"Europe/London",children:"London, UK (+00:00)"}),s.jsx("option",{value:"Europe/Paris",children:"Paris, France (+01:00)"}),s.jsx("option",{value:"Europe/Berlin",children:"Berlin, Germany (+01:00)"}),s.jsx("option",{value:"America/New_York",children:"New York, USA (-05:00)"}),s.jsx("option",{value:"America/Los_Angeles",children:"Los Angeles, USA (-08:00)"}),s.jsx("option",{value:"Asia/Tokyo",children:"Tokyo, Japan (+09:00)"}),s.jsx("option",{value:"Australia/Sydney",children:"Sydney, Australia (+11:00)"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:Ur,children:[s.jsx(V6,{className:"w-3 h-3"})," Language"]}),s.jsxs("select",{value:g,onChange:N=>x(N.target.value),className:fr,children:[s.jsx("option",{value:"en",children:"English"}),s.jsx("option",{value:"pt",children:"Portugus"}),s.jsx("option",{value:"es",children:"Espaol"}),s.jsx("option",{value:"fr",children:"Franais"}),s.jsx("option",{value:"de",children:"Deutsch"})]})]})]}),s.jsx("div",{className:"flex justify-end pt-2",children:s.jsxs("button",{onClick:j,disabled:w,className:ba,children:[w?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Jc,{className:"w-3.5 h-3.5"}),w?"Saving...":"Save Changes"]})})]})]})}function Q8e(){const{resetPassword:e}=ip(),[t,r]=y.useState(""),[n,a]=y.useState(""),[i,o]=y.useState(""),[c,d]=y.useState(!1),f=async()=>{if(!n||!i){G.error("Please fill in all password fields");return}if(n!==i){G.error("New passwords do not match");return}if(n.length<6){G.error("Password must be at least 6 characters");return}d(!0);try{await e(n),G.success("Password updated successfully"),r(""),a(""),o("")}catch(h){G.error(h.message||"Failed to update password")}finally{d(!1)}},m=()=>{G.error("Account deletion requires contacting an administrator")};return s.jsxs("div",{className:"space-y-5",children:[s.jsx(Dl,{title:"Security",subtitle:"Manage your password and account security"}),s.jsxs("div",{className:H(fs,"p-5 space-y-4"),children:[s.jsx("h3",{className:wa,children:"Change Password"}),s.jsxs("div",{children:[s.jsxs("label",{className:Ur,children:[s.jsx(ph,{className:"w-3 h-3"})," Current Password"]}),s.jsx("input",{type:"password",value:t,onChange:h=>r(h.target.value),className:fr})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:Ur,children:"New Password"}),s.jsx("input",{type:"password",value:n,onChange:h=>a(h.target.value),className:fr})]}),s.jsxs("div",{children:[s.jsx("label",{className:Ur,children:"Confirm Password"}),s.jsx("input",{type:"password",value:i,onChange:h=>o(h.target.value),className:fr})]})]}),s.jsx("p",{className:"text-[10px] text-[var(--gm-accent-primary)]",children:"Minimum 6 characters"}),s.jsx("div",{className:"flex justify-end pt-2",children:s.jsxs("button",{onClick:f,disabled:c,className:ba,children:[c?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(ph,{className:"w-3.5 h-3.5"}),c?"Updating...":"Update Password"]})})]}),s.jsxs("div",{className:"rounded-xl border border-[var(--color-danger-500)]/30 bg-[var(--color-danger-500)]/5 p-5",children:[s.jsxs("h3",{className:"text-xs font-bold text-[var(--color-danger-500)] mb-1 flex items-center gap-2",children:[s.jsx(vr,{className:"w-3.5 h-3.5"})," Danger Zone"]}),s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mb-3",children:"Permanently delete your account and all associated data. This action cannot be undone."}),s.jsxs("button",{onClick:m,className:K8e,children:[s.jsx(Et,{className:"w-3.5 h-3.5"})," Delete Account"]})]})]})}function Y8e(){const{logout:e}=ip(),t=[{id:"1",userAgent:navigator.userAgent,ip:"::1",lastActive:"Just now",current:!0}],r=async()=>{try{await e(),G.success("All other sessions signed out")}catch{G.error("Failed to sign out other sessions")}};return s.jsxs("div",{className:"space-y-5",children:[s.jsx(Dl,{title:"Sessions",subtitle:"Active login sessions for your account"}),s.jsxs("div",{className:H(fs,"p-5 space-y-4"),children:[s.jsx("h3",{className:wa,children:"Active Sessions"}),s.jsx("div",{className:"space-y-3",children:t.map(n=>s.jsxs("div",{className:H("flex items-center gap-4 p-4 rounded-lg border",n.current?"border-[var(--gm-accent-primary)]/30 bg-[var(--gm-accent-primary)]/5":"border-[var(--gm-border-primary)]"),children:[s.jsx(AC,{className:"w-7 h-7 text-[var(--gm-text-tertiary)] flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs text-[var(--gm-text-primary)] break-all",children:n.userAgent}),s.jsxs("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:[n.ip,"  Last active: ",n.lastActive]})]}),n.current&&s.jsx("span",{className:"text-[10px] font-bold text-[var(--gm-accent-primary)] bg-[var(--gm-accent-primary)]/10 px-2 py-0.5 rounded-full flex-shrink-0",children:"Current"})]},n.id))}),s.jsx("div",{className:"flex justify-end pt-2",children:s.jsxs("button",{onClick:r,className:Xa,children:[s.jsx(G6,{className:"w-3.5 h-3.5"})," Sign out all other sessions"]})})]})]})}function X8e({meeting:e}){const{data:t,isLoading:r}=Ece(e.meeting_id),[n,a]=y.useState("outline"),i=[{id:"transcript",label:"Transcript",icon:Wt,available:!0},{id:"outline",label:"Outline",icon:ub,available:e.detailed_summary.length>0},{id:"keypoints",label:"Key Points",icon:np,available:e.key_points.length>0},{id:"actions",label:"Actions",icon:H6,available:e.action_items.length>0},{id:"audio",label:"Audio",icon:B6,available:!0}];return s.jsxs("div",{className:"border-t border-[var(--gm-border-primary)]/50 mx-4 mb-2",children:[s.jsx("div",{className:"flex gap-0.5 pt-2 pb-1 overflow-x-auto",children:i.map(({id:o,label:c,icon:d,available:f})=>s.jsxs("button",{onClick:()=>a(o),className:H("flex items-center gap-1 px-2.5 py-1.5 rounded-md text-[10px] font-medium whitespace-nowrap transition-colors",n===o?"bg-[var(--gm-accent-primary)]/10 text-[var(--gm-accent-primary)]":f?"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] hover:bg-[var(--gm-surface-hover)]":"text-[var(--gm-text-tertiary)]/40 cursor-default"),children:[s.jsx(d,{className:"w-3 h-3"}),c,o==="actions"&&e.action_items.length>0&&s.jsxs("span",{className:"ml-0.5 text-[9px] opacity-60",children:["(",e.action_items.length,")"]}),o==="keypoints"&&e.key_points.length>0&&s.jsxs("span",{className:"ml-0.5 text-[9px] opacity-60",children:["(",e.key_points.length,")"]}),o==="outline"&&e.detailed_summary.length>0&&s.jsxs("span",{className:"ml-0.5 text-[9px] opacity-60",children:["(",e.detailed_summary.length,")"]})]},o))}),s.jsxs("div",{className:"pb-3 pt-1",children:[n==="transcript"&&s.jsx("div",{children:r?s.jsxs("div",{className:"flex items-center gap-2 py-4 justify-center",children:[s.jsx(ye,{className:"w-4 h-4 animate-spin text-[var(--gm-text-tertiary)]"}),s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:"Fetching transcript..."})]}):t?.transcript?s.jsx("pre",{className:"text-[10px] text-[var(--gm-text-secondary)] whitespace-pre-wrap max-h-[200px] overflow-y-auto bg-[var(--gm-bg-tertiary)] rounded-md p-3 font-mono leading-relaxed",children:t.transcript}):s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] italic py-2",children:t?.error||"No transcript content available."})}),n==="outline"&&s.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:e.detailed_summary.length>0?e.detailed_summary.map((o,c)=>s.jsxs("div",{className:"text-[10px]",children:[s.jsx("span",{className:"font-medium text-[var(--gm-text-primary)]",children:o.title}),s.jsx("p",{className:"text-[var(--gm-text-tertiary)] mt-0.5",children:o.description})]},c)):s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] italic",children:"No outline available."})}),n==="keypoints"&&s.jsx("ul",{className:"space-y-1.5 max-h-[200px] overflow-y-auto",children:e.key_points.length>0?e.key_points.map((o,c)=>s.jsxs("li",{className:"text-[10px] text-[var(--gm-text-tertiary)] flex gap-1.5",children:[s.jsx("span",{className:"text-[var(--gm-accent-primary)] mt-0.5 flex-shrink-0",children:""}),s.jsx("span",{children:o.replace(/\{\{.*?\}\}/g,"").trim()})]},c)):s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] italic",children:"No key points available."})}),n==="actions"&&s.jsx("ul",{className:"space-y-1.5 max-h-[200px] overflow-y-auto",children:e.action_items.length>0?e.action_items.map((o,c)=>s.jsxs("li",{className:"text-[10px] flex items-start gap-1.5",children:[s.jsx("span",{className:H("mt-0.5 flex-shrink-0",o.completed?"text-emerald-500":"text-[var(--gm-text-tertiary)]"),children:o.completed?"":""}),s.jsx("span",{className:"text-[var(--gm-text-primary)] flex-1",children:o.title}),o.assignee&&s.jsx("span",{className:"text-[9px] px-1.5 py-0 rounded border border-[var(--gm-border-primary)] text-[var(--gm-text-tertiary)] flex-shrink-0",children:o.assignee})]},c)):s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] italic",children:"No action items available."})}),n==="audio"&&s.jsx("div",{children:r?s.jsxs("div",{className:"flex items-center gap-2 py-4 justify-center",children:[s.jsx(ye,{className:"w-4 h-4 animate-spin text-[var(--gm-text-tertiary)]"}),s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:"Checking for audio..."})]}):t?.audioUrl?s.jsxs("div",{className:"space-y-2",children:[s.jsx("audio",{controls:!0,className:"w-full h-8",preload:"none",children:s.jsx("source",{src:t.audioUrl,type:"audio/mpeg"})}),s.jsxs("a",{href:t.audioUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-[10px] text-[var(--gm-accent-primary)] hover:underline",children:[s.jsx(mh,{className:"w-3 h-3"})," Open audio file"]})]}):s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] italic py-2",children:"No audio recording available for this meeting."})})]})]})}function Z8e(){const e=sf(),[t,r]=eJ(),{data:n=[]}=I8(),[a,i]=y.useState(!1),[o,c]=y.useState(new Set),[d,f]=y.useState(null),[m,h]=y.useState(""),[g,x]=y.useState({transcript:!0,keyPoints:!0,actionItems:!0,outline:!0,audio:!0}),[w,b]=y.useState(()=>{const L=new Date;return L.setDate(L.getDate()-30),L.toISOString().split("T")[0]}),[j,N]=y.useState(()=>new Date().toISOString().split("T")[0]),{data:_,isLoading:S}=Sce(),k=_ce(),A=Cce(),T=Ace(),{data:O,isLoading:P}=kce({limit:50,after:w||void 0,before:j||void 0,enabled:a&&!!_?.connected});y.useEffect(()=>{const L=t.get("krisp_connected"),F=t.get("krisp_error");L==="true"?(G.success("Krisp connected successfully!"),r({},{replace:!0})):F&&(G.error(`Krisp connection failed: ${decodeURIComponent(F)}`),r({},{replace:!0}))},[t,r]);const R=async()=>{try{const L=await k.mutateAsync();L.url&&(window.location.href=L.url)}catch{G.error("Failed to start Krisp authorization")}},M=async()=>{if(confirm("Disconnect Krisp? You can reconnect anytime."))try{await A.mutateAsync(),i(!1),G.success("Krisp disconnected")}catch{G.error("Failed to disconnect")}},D=L=>{c(F=>{const q=new Set(F);return q.has(L)?q.delete(L):q.add(L),q})},z=L=>{x(F=>({...F,[L]:!F[L]}))},Y=async()=>{if(o.size===0)return G.error("Select at least one meeting");if(!m)return G.error("Select a target project");if(!g.transcript&&!g.keyPoints&&!g.actionItems&&!g.outline)return G.error("Select at least one content type to import");const L=n.find(F=>F.id===m);try{const F=await T.mutateAsync({meetingIds:Array.from(o),projectId:m,importOptions:g});F.succeeded>0&&(G.success(`Imported ${F.succeeded} meeting(s) to ${L?.name||"project"}`),c(new Set)),F.failed>0&&G.error(`${F.failed} meeting(s) failed to import`)}catch{G.error("Import failed")}},I=_?.connected===!0,K=O?.meetings||[],U=[{key:"transcript",icon:Wt,label:"Transcript"},{key:"keyPoints",icon:np,label:"Key Points"},{key:"actionItems",icon:H6,label:"Action Items"},{key:"outline",icon:ub,label:"Outline"},{key:"audio",icon:B6,label:"Audio"}];return s.jsxs("div",{className:"space-y-5",children:[s.jsx(Dl,{title:"Integrations",subtitle:"Connect external services to your account"}),s.jsxs("div",{className:H(fs,"p-5"),children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:H(wa,"flex items-center gap-2"),children:[s.jsx(gh,{className:"w-3.5 h-3.5"})," Krisp AI Meeting Assistant"]}),s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:"Connect your Krisp account via OAuth to import transcripts and recordings."})]}),S?s.jsx(ye,{className:"w-4 h-4 animate-spin text-[var(--gm-text-tertiary)]"}):I?s.jsxs("span",{className:"inline-flex items-center gap-1 text-[10px] font-bold text-emerald-500 bg-emerald-500/10 border border-emerald-500/30 px-2 py-0.5 rounded-full",children:[s.jsx(sy,{className:"w-3 h-3"})," Connected"]}):s.jsxs("span",{className:"inline-flex items-center gap-1 text-[10px] font-bold text-[var(--gm-text-tertiary)] border border-[var(--gm-border-primary)] px-2 py-0.5 rounded-full",children:[s.jsx(lP,{className:"w-3 h-3"})," Not connected"]})]}),I?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2 mb-4",children:[s.jsxs("button",{onClick:()=>i(!a),className:H(ba,"flex-1 justify-center py-2"),children:[s.jsx(Xi,{className:"w-3.5 h-3.5"}),a?"Hide Meetings":"Browse & Import Meetings"]}),s.jsxs("button",{onClick:M,disabled:A.isPending,className:H(Xa,"hover:text-[var(--color-danger-500)] hover:border-[var(--color-danger-500)]/30"),children:[A.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(lP,{className:"w-3.5 h-3.5"}),"Disconnect"]})]}),a&&s.jsxs("div",{className:"border border-[var(--gm-border-primary)] rounded-lg overflow-hidden",children:[s.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-[var(--gm-bg-tertiary)] border-b border-[var(--gm-border-primary)]",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-[10px] text-[var(--gm-text-tertiary)] whitespace-nowrap uppercase tracking-wider font-bold",children:"From"}),s.jsx("input",{type:"date",value:w,onChange:L=>b(L.target.value),className:"px-2 py-1 text-xs rounded-md border border-[var(--gm-border-primary)] bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-primary)]"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-[10px] text-[var(--gm-text-tertiary)] whitespace-nowrap uppercase tracking-wider font-bold",children:"To"}),s.jsx("input",{type:"date",value:j,onChange:L=>N(L.target.value),className:"px-2 py-1 text-xs rounded-md border border-[var(--gm-border-primary)] bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-primary)]"})]}),s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] ml-auto",children:[K.length," meeting(s)"]})]}),o.size>0&&s.jsxs("div",{className:"px-4 py-3 bg-[var(--gm-accent-primary)]/5 border-b border-[var(--gm-border-primary)] space-y-2.5",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-xs text-[var(--gm-text-primary)] font-medium whitespace-nowrap",children:[o.size," selected "]}),s.jsxs("select",{value:m,onChange:L=>h(L.target.value),className:H(fr,"flex-1"),children:[s.jsx("option",{value:"",children:"Select target project..."}),n.map(L=>s.jsx("option",{value:L.id,children:L.name},L.id))]}),s.jsxs("button",{onClick:Y,disabled:T.isPending||!m,className:ba,children:[T.isPending?s.jsx(ye,{className:"w-3 h-3 animate-spin"}):s.jsx(Xi,{className:"w-3 h-3"}),"Import"]})]}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[s.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] mr-1",children:"Include:"}),U.map(({key:L,icon:F,label:q})=>s.jsxs("button",{onClick:()=>z(L),className:H("flex items-center gap-1 px-2 py-1 rounded-md text-[10px] font-medium border transition-colors",g[L]?"bg-[var(--gm-accent-primary)]/10 border-[var(--gm-accent-primary)]/30 text-[var(--gm-accent-primary)]":"bg-[var(--gm-bg-tertiary)] border-[var(--gm-border-primary)] text-[var(--gm-text-tertiary)]"),children:[s.jsx(F,{className:"w-3 h-3"}),q]},L))]})]}),P?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx(ye,{className:"w-5 h-5 animate-spin text-[var(--gm-text-tertiary)]"}),s.jsx("span",{className:"ml-2 text-xs text-[var(--gm-text-tertiary)]",children:"Loading meetings from Krisp..."})]}):K.length===0?s.jsx("div",{className:"text-center py-8 text-[var(--gm-text-tertiary)] text-xs",children:"No meetings found for the selected date range."}):s.jsx("div",{className:"max-h-[500px] overflow-y-auto divide-y divide-[var(--gm-border-primary)]",children:K.map(L=>{const F=o.has(L.meeting_id),q=d===L.meeting_id,Z=m?L.importedTo.some(B=>B.projectId===m):!1;return s.jsxs("div",{className:H(F&&"bg-[var(--gm-accent-primary)]/5",Z&&"opacity-60"),children:[s.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[s.jsx("input",{type:"checkbox",checked:F,onChange:()=>D(L.meeting_id),disabled:Z,className:"rounded border-[var(--gm-border-primary)] flex-shrink-0"}),s.jsxs("button",{onClick:()=>f(q?null:L.meeting_id),className:"flex-1 min-w-0 text-left",children:[s.jsx("p",{className:"text-xs font-medium text-[var(--gm-text-primary)] truncate",children:L.name}),s.jsxs("div",{className:"flex items-center gap-3 mt-0.5",children:[s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] flex items-center gap-1",children:[s.jsx(ja,{className:"w-3 h-3"}),L.date?new Date(L.date).toLocaleDateString():""]}),L.speakers.length>0&&s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] flex items-center gap-1",children:[s.jsx(fn,{className:"w-3 h-3"}),L.speakers.slice(0,3).join(", "),L.speakers.length>3&&` +${L.speakers.length-3}`]}),L.detailed_summary.length>0&&s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:[L.detailed_summary.length," topics"]}),L.key_points.length>0&&s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:[L.key_points.length," key pts"]}),L.action_items.length>0&&s.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:[L.action_items.length," actions"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[Z&&s.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] font-bold text-emerald-500 border border-emerald-500/30 px-1.5 py-0 rounded",children:[s.jsx(Jc,{className:"w-3 h-3"})," Imported"]}),L.importedTo.length>0&&!Z&&s.jsxs("span",{className:"text-[10px] border border-[var(--gm-border-primary)] px-1.5 py-0 rounded text-[var(--gm-text-tertiary)]",children:["In ",L.importedTo.map(B=>B.projectName).join(", ")]}),s.jsx("button",{onClick:()=>f(q?null:L.meeting_id),className:"p-1 text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors",children:q?s.jsx(Sl,{className:"w-4 h-4"}):s.jsx(un,{className:"w-4 h-4"})})]})]}),q&&s.jsx(X8e,{meeting:L})]},L.meeting_id)})})]}),s.jsx("div",{className:"flex justify-end mt-3",children:s.jsxs("button",{onClick:()=>e("/files"),className:"flex items-center gap-2 text-[10px] text-[var(--gm-text-tertiary)] hover:text-[var(--gm-accent-primary)] transition-colors",children:["View imported transcripts ",s.jsx(mh,{className:"w-3 h-3"})]})})]}):s.jsxs("button",{onClick:R,disabled:k.isPending,className:H(ba,"w-full justify-center py-2.5"),children:[k.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(mh,{className:"w-3.5 h-3.5"}),"Connect Krisp Account"]})]})]})}function J8e({checked:e,onChange:t,disabled:r}){return s.jsx("button",{onClick:()=>!r&&t(!e),disabled:r,className:"relative inline-flex h-5 w-9 shrink-0 cursor-pointer rounded-full border border-[var(--gm-border-primary)] transition-colors duration-200 disabled:opacity-50",style:{backgroundColor:e?"var(--color-brand-500)":"var(--gm-bg-tertiary)"},children:s.jsx("span",{className:H("pointer-events-none inline-block h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200",e?"translate-x-4":"translate-x-0")})})}function eUe(){const{user:e,updateProfile:t}=$0(),{currentProject:r,currentProjectId:n}=zp(),[a,i]=y.useState(()=>localStorage.getItem("godmode-theme")||"dark"),[o,c]=y.useState(()=>localStorage.getItem("godmode-language")||"en"),[d,f]=y.useState([]),[m,h]=y.useState([]),[g,x]=y.useState(""),[w,b]=y.useState(""),[j,N]=y.useState(!0),[_,S]=y.useState(!0),[k,A]=y.useState(!1),[T,O]=y.useState(!1);y.useEffect(()=>{e?.timezone&&b(e.timezone),r?.role&&x(r.role),X.get("/api/role-templates").then(M=>{M.roles&&f(M.roles)}).catch(()=>{}),X.get("/api/timezones").then(M=>{M.timezones&&h(M.timezones)}).catch(()=>{});try{const M=JSON.parse(localStorage.getItem("godmode-privacy")||"{}");M.analytics!==void 0&&N(M.analytics),M.errorReporting!==void 0&&S(M.errorReporting),M.aiData!==void 0&&A(M.aiData)}catch{}},[e,r,n]);const P=async()=>{O(!0);try{localStorage.setItem("godmode-theme",a),localStorage.setItem("godmode-language",o),localStorage.setItem("godmode-privacy",JSON.stringify({analytics:j,errorReporting:_,aiData:k})),a==="dark"?document.documentElement.classList.add("dark"):a==="light"&&document.documentElement.classList.remove("dark"),w!==e?.timezone&&await t.mutateAsync({timezone:w}),n&&g!==r?.role&&await X.put(`/api/projects/${n}/members/${e?.id}`,{role:g}),G.success("Settings saved")}catch(M){G.error(M.message||"Failed to save settings")}finally{O(!1)}},R=[{label:"Analytics",desc:"Help improve GodMode with anonymous usage data",value:j,set:N},{label:"Error Reporting",desc:"Automatically report errors to help fix bugs",value:_,set:S},{label:"AI Data Improvement",desc:"Allow anonymized data to improve AI responses",value:k,set:A}];return s.jsxs("div",{className:"space-y-5",children:[s.jsx(Dl,{title:"User Settings",subtitle:"Appearance, role, and privacy preferences"}),s.jsxs("div",{className:H(fs,"p-5 space-y-4"),children:[s.jsx("h3",{className:wa,children:"Appearance"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:Ur,children:[s.jsx(qt,{className:"w-3 h-3"})," Theme"]}),s.jsxs("select",{value:a,onChange:M=>i(M.target.value),className:fr,children:[s.jsx("option",{value:"light",children:"Light"}),s.jsx("option",{value:"dark",children:"Dark"}),s.jsx("option",{value:"system",children:"System"})]}),s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:"Choose your preferred color scheme"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:Ur,children:[s.jsx(V6,{className:"w-3 h-3"})," Language"]}),s.jsxs("select",{value:o,onChange:M=>c(M.target.value),className:fr,children:[s.jsx("option",{value:"en",children:"English"}),s.jsx("option",{value:"pt",children:"Portugus"}),s.jsx("option",{value:"es",children:"Espaol"}),s.jsx("option",{value:"fr",children:"Franais"}),s.jsx("option",{value:"de",children:"Deutsch"})]}),s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:"Interface language preference"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-[var(--gm-accent-primary)]/20 bg-[var(--gm-accent-primary)]/5",children:[s.jsx(pte,{className:"w-4 h-4 text-[var(--gm-accent-primary)] flex-shrink-0"}),s.jsxs("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:["For ",s.jsx("span",{className:"text-[var(--gm-accent-primary)] font-medium",children:"LLM configuration"})," and ",s.jsx("span",{className:"text-[var(--gm-accent-primary)] font-medium",children:"Graph"})," settings, use the ",s.jsx("span",{className:"text-[var(--gm-accent-primary)] font-medium",children:"Admin"})," section."]})]})]}),s.jsxs("div",{className:H(fs,"p-5 space-y-4"),children:[s.jsx("h3",{className:wa,children:"Role & Context"}),s.jsxs("div",{className:"p-3 rounded-lg bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)]",children:[s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider font-bold mb-1",children:"Active Project"}),s.jsx("p",{className:"text-xs font-medium text-[var(--gm-text-primary)]",children:r?.name||"No Active Project"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:Ur,children:[s.jsx(of,{className:"w-3 h-3"})," Project Role"]}),s.jsxs("select",{value:g,onChange:M=>x(M.target.value),disabled:!n||n==="default",className:fr,children:[s.jsx("option",{value:"",children:"Select a role..."}),d.filter(M=>M.name||M.display_name).map(M=>s.jsx("option",{value:M.display_name||M.name,children:M.display_name||M.name},M.id||M.name))]}),s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:"Your role in the current project"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:Ur,children:[s.jsx(tr,{className:"w-3 h-3"})," Timezone"]}),s.jsxs("select",{value:w,onChange:M=>b(M.target.value),className:fr,children:[s.jsx("option",{value:"",children:"Select timezone..."}),m.map(M=>s.jsxs("option",{value:M.code,children:[M.name," (",M.utc_offset,")"]},M.code))]}),s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:"Used for scheduling and notifications"})]})]})]}),s.jsxs("div",{className:H(fs,"p-5"),children:[s.jsx("h3",{className:H(wa,"mb-4"),children:"Data & Privacy"}),s.jsx("div",{className:"space-y-1",children:R.map(M=>s.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-[var(--gm-border-primary)] last:border-0",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-[var(--gm-text-primary)]",children:M.label}),s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:M.desc})]}),s.jsx(J8e,{checked:M.value,onChange:M.set})]},M.label))})]}),s.jsx("div",{className:H(fs,"p-4 flex justify-end"),children:s.jsxs("button",{onClick:P,disabled:T,className:ba,children:[T?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Jc,{className:"w-3.5 h-3.5"}),T?"Saving...":"Save Settings"]})})]})}const e6=["Ficha de Identidade","Viso Geral e Posicionamento","Produtos e Servios","Pblico-Alvo e Clientes","Equipa e Liderana","Presena Digital e Marketing","Anlise Competitiva","Indicadores de Crescimento","Anlise SWOT","Concluses e Insights"];function tUe(){const[e,t]=y.useState("list"),[r,n]=y.useState(null),[a,i]=y.useState([]),[o,c]=y.useState(!0),d=async()=>{try{c(!0);const h=await X.get("/api/companies");i(h.companies||[])}catch{G.error("Failed to load companies")}finally{c(!1)}};y.useEffect(()=>{d()},[]);const f=(h,g)=>{n(h),t(g)},m=()=>{t("list"),n(null),d()};return s.jsxs("div",{children:[e==="list"&&s.jsx(rUe,{companies:a,loading:o,onView:h=>f(h,"view"),onEdit:h=>f(h,"edit"),onTemplates:h=>f(h,"templates"),onRefresh:d}),e==="view"&&r&&s.jsx(nUe,{company:r,onBack:m,onEdit:()=>t("edit")}),e==="edit"&&r&&s.jsx(sUe,{company:r,onBack:m,onTemplates:()=>t("templates")}),e==="templates"&&r&&s.jsx(aUe,{company:r,onBack:()=>t("edit")})]})}function rUe({companies:e,loading:t,onView:r,onEdit:n,onTemplates:a,onRefresh:i}){const[o,c]=y.useState(!1),[d,f]=y.useState(""),[m,h]=y.useState(null),g=async()=>{if(!d.trim()){G.error("Company name is required");return}c(!0);try{await X.post("/api/companies",{name:d.trim()}),G.success("Company created"),f(""),i()}catch(b){G.error(b.message||"Failed to create company")}finally{c(!1)}},x=async b=>{G.info(`Analyzing ${b.name}...`);try{await X.post(`/api/companies/${b.id}/analyze`,{}),G.success(`${b.name} analysis started`),i()}catch(j){G.error(j.message||"Analysis failed")}},w=async()=>{if(m)try{await X.delete(`/api/companies/${m.id}`),G.success("Company deleted"),i()}catch(b){G.error(b.message||"Failed to delete")}finally{h(null)}};return s.jsxs("div",{className:"space-y-5",children:[s.jsx(XA,{open:!!m,onOpenChange:b=>{b||h(null)},children:s.jsxs(U0,{children:[s.jsxs(F0,{children:[s.jsxs(q0,{children:["Delete ",m?.name||"this item","?"]}),s.jsx(V0,{children:"This action cannot be undone. The company and all its data will be permanently removed."})]}),s.jsxs(B0,{children:[s.jsx(H0,{children:"Cancel"}),s.jsx(K0,{onClick:w,className:"bg-[var(--color-danger-500)] text-white hover:bg-[var(--color-danger-600)]",children:"Delete"})]})]})}),s.jsx(Dl,{title:"Companies",subtitle:"Manage company profiles and assets"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{value:d,onChange:b=>f(b.target.value),placeholder:"New company name...",className:H(fr,"max-w-xs"),onKeyDown:b=>{b.key==="Enter"&&g()}}),s.jsxs("button",{onClick:g,disabled:o,className:ba,children:[o?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(br,{className:"w-3.5 h-3.5"})," New company"]})]}),t?s.jsx("div",{className:"flex justify-center py-12",children:s.jsx(ye,{className:"w-6 h-6 animate-spin text-[var(--gm-accent-primary)]"})}):e.length===0?s.jsx("div",{className:H(fs,"p-10 text-center text-[var(--gm-text-tertiary)] text-sm"),children:"No companies yet. Create one above."}):s.jsx("div",{className:"space-y-2",children:e.map(b=>s.jsx("div",{className:H(fs,"p-4 hover:border-[var(--gm-accent-primary)]/30"),children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-[var(--gm-bg-tertiary)] flex items-center justify-center flex-shrink-0",children:s.jsx("span",{className:"text-[10px] font-bold text-[var(--gm-text-primary)]",children:(b.name||"???").substring(0,3).toUpperCase()})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"text-xs font-semibold text-[var(--gm-text-primary)]",children:b.name}),(b.colors||[]).length>0&&s.jsx("div",{className:"flex gap-0.5",children:(b.colors||[]).map((j,N)=>s.jsx("div",{className:"w-2.5 h-2.5 rounded-sm",style:{backgroundColor:j}},N))}),s.jsx("span",{className:H("text-[10px] px-2 py-0.5 rounded-full font-medium",b.status==="analyzed"?"bg-emerald-500/10 text-emerald-500":"bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)]"),children:b.status==="analyzed"?"Analyzed":"Not analyzed"})]}),b.website&&s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:b.website})]}),s.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap",children:[s.jsxs("button",{onClick:()=>r(b),className:H(Xa,"border-0 px-2"),children:[s.jsx(eu,{className:"w-3 h-3"})," View"]}),s.jsxs("button",{onClick:()=>n(b),className:H(Xa,"border-0 px-2"),children:[s.jsx(_l,{className:"w-3 h-3"})," Edit"]}),s.jsxs("button",{onClick:()=>a(b),className:H(Xa,"border-0 px-2"),children:[s.jsx(Wt,{className:"w-3 h-3"})," Templates"]}),s.jsxs("button",{onClick:()=>x(b),className:H(Xa,"border-0 px-2"),children:[s.jsx(hn,{className:"w-3 h-3"})," ",b.status==="analyzed"?"Re-analyze":"Analyze"]}),s.jsx("button",{onClick:()=>h(b),className:"p-1.5 rounded-lg text-[var(--gm-text-tertiary)] hover:bg-[var(--color-danger-500)]/10 hover:text-[var(--color-danger-500)] transition-colors",children:s.jsx(Et,{className:"w-3.5 h-3.5"})})]})]})},b.id))})]})}function nUe({company:e,onBack:t,onEdit:r}){const[n,a]=y.useState(e6[0]),[i,o]=y.useState(!1),c=async()=>{o(!0);try{await X.post(`/api/companies/${e.id}/analyze`,{}),G.success("Analysis started")}catch(d){G.error(d.message||"Analysis failed")}finally{o(!1)}};return s.jsxs("div",{className:"space-y-5",children:[s.jsxs("button",{onClick:t,className:"flex items-center gap-1.5 text-[10px] text-[var(--gm-text-tertiary)] hover:text-[var(--gm-accent-primary)] transition-colors",children:[s.jsx(vs,{className:"w-3.5 h-3.5"})," Back to Companies"]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-[var(--gm-bg-tertiary)] flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-bold text-[var(--gm-text-primary)]",children:(e.name||"???").substring(0,3).toUpperCase()})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-lg font-bold text-[var(--gm-text-primary)]",children:e.name}),s.jsxs("div",{className:"flex items-center gap-3 mt-0.5",children:[e.website&&s.jsxs("a",{href:e.website,target:"_blank",rel:"noreferrer",className:"text-[10px] text-[var(--gm-accent-primary)] flex items-center gap-1 hover:underline",children:[s.jsx(lf,{className:"w-3 h-3"})," ",e.website]}),e.linkedin&&s.jsxs("a",{href:e.linkedin,target:"_blank",rel:"noreferrer",className:"text-[10px] text-[var(--gm-accent-primary)] flex items-center gap-1 hover:underline",children:[s.jsx(mh,{className:"w-3 h-3"})," LinkedIn"]})]})]}),s.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[s.jsxs("button",{onClick:c,disabled:i,className:ba,children:[i?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Gs,{className:"w-3.5 h-3.5"})," Re-analyze"]}),s.jsxs("button",{onClick:r,className:Xa,children:[s.jsx(_l,{className:"w-3.5 h-3.5"})," Edit"]})]})]}),s.jsxs("div",{className:"flex gap-5",children:[s.jsxs("div",{className:"w-52 flex-shrink-0 space-y-0.5",children:[s.jsx("p",{className:H(wa,"mb-2 px-1"),children:"Report Sections"}),e6.map(d=>s.jsxs("button",{onClick:()=>a(d),className:H("w-full text-left px-3 py-2 rounded-lg text-[10px] transition-colors flex items-center justify-between",n===d?"text-[var(--gm-accent-primary)] bg-[var(--gm-surface-hover)] font-semibold":"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] hover:bg-[var(--gm-surface-hover)]"),children:[s.jsx("span",{className:"truncate",children:d}),n===d&&s.jsx(Ui,{className:"w-3 h-3 flex-shrink-0"})]},d))]}),s.jsxs("div",{className:H(fs,"flex-1 p-5"),children:[s.jsx("h3",{className:"text-sm font-bold text-[var(--gm-text-primary)] mb-3",children:n}),s.jsx("div",{className:"text-xs text-[var(--gm-text-secondary)] whitespace-pre-line leading-relaxed",children:e.report?.[n]||`Content for "${n}"  run analysis to populate.`})]})]})]})}function sUe({company:e,onBack:t,onTemplates:r}){const[n,a]=y.useState(e.name),[i,o]=y.useState(e.description||""),[c,d]=y.useState(e.logo_url||""),[f,m]=y.useState(e.website||""),[h,g]=y.useState(e.linkedin||""),[x,w]=y.useState(!1),b=async()=>{if(!n.trim()){G.error("Name is required");return}w(!0);try{await X.put(`/api/companies/${e.id}`,{name:n,description:i,logo_url:c,website:f,linkedin:h}),G.success("Company updated"),t()}catch(j){G.error(j.message||"Failed to save")}finally{w(!1)}};return s.jsxs("div",{className:"space-y-5",children:[s.jsxs("button",{onClick:t,className:"flex items-center gap-1.5 text-[10px] text-[var(--gm-text-tertiary)] hover:text-[var(--gm-accent-primary)] transition-colors",children:[s.jsx(vs,{className:"w-3.5 h-3.5"})," Back to Companies"]}),s.jsx(Dl,{title:`Edit ${e.name}`}),s.jsxs("div",{className:H(fs,"p-5"),children:[s.jsxs("div",{className:"max-w-lg space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:Ur,children:"Name *"}),s.jsx("input",{value:n,onChange:j=>a(j.target.value),className:fr})]}),s.jsxs("div",{children:[s.jsxs("label",{className:Ur,children:[s.jsx(ub,{className:"w-3 h-3"})," Description"]}),s.jsx("textarea",{value:i,onChange:j=>o(j.target.value),rows:3,className:H(fr,"resize-y")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:Ur,children:[s.jsx(CC,{className:"w-3 h-3"})," Logo URL"]}),s.jsx("input",{value:c,onChange:j=>d(j.target.value),placeholder:"https://...",className:H(fr,"font-mono text-xs")})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:Ur,children:[s.jsx(lf,{className:"w-3 h-3"})," Website"]}),s.jsx("input",{value:f,onChange:j=>m(j.target.value),className:fr})]}),s.jsxs("div",{children:[s.jsxs("label",{className:Ur,children:[s.jsx(mh,{className:"w-3 h-3"})," LinkedIn"]}),s.jsx("input",{value:h,onChange:j=>g(j.target.value),className:fr})]})]}),s.jsxs("div",{className:"border-t border-[var(--gm-border-primary)] pt-4 flex justify-center gap-2",children:[s.jsxs("button",{onClick:b,disabled:x,className:ba,children:[x?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Jc,{className:"w-3.5 h-3.5"}),x?"Saving...":"Save"]}),s.jsx("button",{onClick:t,className:Xa,children:"Cancel"})]})]}),s.jsxs("div",{className:"mt-6 pt-5 border-t border-[var(--gm-border-primary)]",children:[s.jsx("h3",{className:H(wa,"mb-3"),children:"Documents"}),s.jsxs("button",{onClick:r,className:Xa,children:[s.jsx(Wt,{className:"w-3.5 h-3.5"})," Templates (A4 / PPT)"]})]})]})]})}function aUe({company:e,onBack:t}){const[r,n]=y.useState("a4"),[a,i]=y.useState("code"),[o,c]=y.useState(""),[d,f]=y.useState(!1),[m,h]=y.useState(!1),[g,x]=y.useState(!1),w=async()=>{f(!0);try{const N=await X.get(`/api/companies/${e.id}/templates/${r}`);c(N.template?.content||`<!-- No ${r} template yet -->`),G.success("Template loaded")}catch{c(`<!-- No ${r} template found -->`)}finally{f(!1)}},b=async()=>{h(!0);try{const N=await X.post(`/api/companies/${e.id}/templates/generate`,{type:r});c(N.template?.content||o),G.success("Template generated")}catch(N){G.error(N.message||"Generation failed")}finally{h(!1)}},j=async()=>{x(!0);try{await X.put(`/api/companies/${e.id}/templates/${r}`,{content:o}),G.success("Template saved")}catch(N){G.error(N.message||"Failed to save")}finally{x(!1)}};return y.useEffect(()=>{w()},[r]),s.jsxs("div",{className:"space-y-5",children:[s.jsxs("button",{onClick:t,className:"flex items-center gap-1.5 text-[10px] text-[var(--gm-text-tertiary)] hover:text-[var(--gm-accent-primary)] transition-colors",children:[s.jsx(vs,{className:"w-3.5 h-3.5"})," Back to Edit"]}),s.jsx(Dl,{title:`${e.name}  Templates`,subtitle:"Manage document templates for this company"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex gap-1",children:["a4","ppt"].map(N=>s.jsx("button",{onClick:()=>n(N),className:H("px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",r===N?"bg-[var(--gm-accent-primary)]/10 text-[var(--gm-accent-primary)]":"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)]"),children:N==="a4"?"A4 document":"Presentation"},N))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:w,disabled:d,className:Xa,children:d?"Loading...":"Load current"}),s.jsxs("button",{onClick:b,disabled:m,className:ba,children:[m?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(hn,{className:"w-3.5 h-3.5"}),m?"Generating...":"Generate with AI"]}),s.jsxs("button",{onClick:j,disabled:g,className:ba,children:[g?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Jc,{className:"w-3.5 h-3.5"}),g?"Saving...":"Save template"]})]})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"flex border-b border-[var(--gm-border-primary)] mb-2",children:["code","theme"].map(N=>s.jsxs("button",{onClick:()=>i(N),className:H("flex items-center gap-1.5 px-3 py-2 text-xs border-b-2 transition-colors",a===N?"text-[var(--gm-accent-primary)] border-[var(--gm-accent-primary)]":"text-[var(--gm-text-tertiary)] border-transparent"),children:[N==="code"?s.jsx(Mee,{className:"w-3 h-3"}):s.jsx(Kte,{className:"w-3 h-3"}),N==="code"?"Code":"Theme"]},N))}),s.jsx("textarea",{value:o,onChange:N=>c(N.target.value),className:H(fr,"h-[500px] font-mono text-[10px] resize-none")})]}),s.jsxs("div",{className:"w-[300px] flex-shrink-0",children:[s.jsx("p",{className:H(wa,"mb-2"),children:"Preview"}),s.jsxs("div",{className:"bg-white border border-[var(--gm-border-primary)] rounded-lg overflow-hidden h-[500px]",children:[s.jsx("div",{className:"h-1.5 bg-[var(--color-danger-500)]"}),s.jsxs("div",{className:"p-5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-5",children:[s.jsx("div",{className:"w-8 h-8 bg-[var(--gm-bg-tertiary)] rounded flex items-center justify-center",children:s.jsx("span",{className:"text-[8px] font-bold text-[var(--gm-text-tertiary)]",children:(e.name||"???").substring(0,3)})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] font-bold text-[var(--gm-text-primary)]",children:e.name}),s.jsxs("p",{className:"text-[8px] text-[var(--gm-text-tertiary)]",children:[r==="a4"?"Document":"Presentation"," Template"]})]})]}),s.jsxs("div",{className:"text-[9px] text-[var(--gm-text-tertiary)] whitespace-pre-wrap font-mono max-h-[400px] overflow-auto",children:[o.substring(0,500),o.length>500&&"..."]})]})]})]})]})]})}const kc="rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-[var(--shadow-sm)]",nb="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-accent-primary)] text-white hover:opacity-90 transition-opacity disabled:opacity-50",zS="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] hover:bg-[var(--gm-interactive-secondary-hover)] border border-[var(--gm-border-primary)] disabled:opacity-50",Vm="bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]",Jm="text-[10px] font-bold text-[var(--gm-accent-primary)] uppercase tracking-[0.1em]";function t6(e){return e&&typeof e=="object"?e:{}}function iUe({onCreated:e}){const t=qce(),[r,n]=y.useState({name:"",start_date:"",end_date:"",context:"",goals:""}),a=i=>{if(i.preventDefault(),!r.name||!r.start_date||!r.end_date){G.error("Name, start date, and end date are required");return}t.mutate({name:r.name,start_date:r.start_date,end_date:r.end_date,context:r.context||void 0,goals:r.goals?r.goals.split(`
`).filter(o=>o.trim()):void 0},{onSuccess:()=>{G.success("Sprint created"),n({name:"",start_date:"",end_date:"",context:"",goals:""}),e()},onError:o=>G.error(o.message)})};return s.jsxs("form",{onSubmit:a,className:H(kc,"p-5 space-y-4"),children:[s.jsx("h3",{className:Jm,children:"New Sprint"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-medium text-[var(--gm-text-tertiary)] mb-1",children:"Name *"}),s.jsx("input",{value:r.name,onChange:i=>n(o=>({...o,name:i.target.value})),className:H(Vm,"w-full"),placeholder:"Sprint 1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-medium text-[var(--gm-text-tertiary)] mb-1",children:"Start Date *"}),s.jsx("input",{type:"date",value:r.start_date,onChange:i=>n(o=>({...o,start_date:i.target.value})),className:H(Vm,"w-full")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-medium text-[var(--gm-text-tertiary)] mb-1",children:"End Date *"}),s.jsx("input",{type:"date",value:r.end_date,onChange:i=>n(o=>({...o,end_date:i.target.value})),className:H(Vm,"w-full")})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-medium text-[var(--gm-text-tertiary)] mb-1",children:"Context (optional)"}),s.jsx("input",{value:r.context,onChange:i=>n(o=>({...o,context:i.target.value})),className:H(Vm,"w-full"),placeholder:"Focus areas, constraints..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-medium text-[var(--gm-text-tertiary)] mb-1",children:"Goals (one per line, optional)"}),s.jsx("textarea",{value:r.goals,onChange:i=>n(o=>({...o,goals:i.target.value})),rows:3,className:H(Vm,"w-full resize-none"),placeholder:"Complete feature X\\nFix bug Y\\nDeploy to production"})]}),s.jsx("div",{className:"flex justify-end",children:s.jsxs("button",{type:"submit",disabled:t.isPending,className:nb,children:[t.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(br,{className:"w-3.5 h-3.5"}),"Create Sprint"]})})]})}function oUe({sprintId:e,onBack:t}){const{data:r,isLoading:n}=Vce(e),{data:a}=Gce(e),i=Kce(),o=Hce(),c=Wce(),d=Qce(),f=Yce(),[m,h]=y.useState([]),[g,x]=y.useState(""),w=t6(r?.sprint??r),j=t6(a).tasks??[],N=()=>{i.mutate(e,{onSuccess:O=>{const P=O?.tasks??[];h(P),G.success(`Generated ${P.length} tasks`)},onError:O=>G.error(O.message)})},_=()=>{if(m.length===0){G.error("Generate tasks first");return}o.mutate({sprintId:e,tasks:m},{onSuccess:()=>{G.success("Tasks applied to sprint"),h([])},onError:O=>G.error(O.message)})},S=()=>{c.mutate(e,{onSuccess:O=>{const P=O?.analysis??"";x(P),G.success("Analysis complete")},onError:O=>G.error(O.message)})},k=()=>{d.mutate({sprintId:e},{onSuccess:O=>{const P=O?.html??"";if(P){const R=new Blob([P],{type:"text/html"}),M=URL.createObjectURL(R),D=document.createElement("a");D.href=M,D.download=`sprint-${e}-report.html`,D.click(),URL.revokeObjectURL(M),G.success("Document downloaded")}},onError:O=>G.error(O.message)})},A=()=>{f.mutate(e,{onSuccess:O=>{const P=O?.html??"";if(P){const R=new Blob([P],{type:"text/html"}),M=URL.createObjectURL(R),D=document.createElement("a");D.href=M,D.download=`sprint-${e}-presentation.html`,D.click(),URL.revokeObjectURL(M),G.success("Presentation downloaded")}},onError:O=>G.error(O.message)})};if(n)return s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx(ye,{className:"w-6 h-6 animate-spin text-[var(--gm-accent-primary)]"})});const T=O=>O==="active"?"bg-green-500/10 text-green-400 border-green-500/30":O==="completed"?"bg-blue-500/10 text-blue-400 border-blue-500/30":"bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)] border-[var(--gm-border-primary)]";return s.jsxs("div",{className:"space-y-5",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:t,className:"w-8 h-8 rounded-lg bg-[var(--gm-interactive-secondary)] flex items-center justify-center hover:bg-[var(--gm-surface-hover)]",children:s.jsx(vs,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-lg font-bold text-[var(--gm-text-primary)]",children:w.name||"Sprint"}),s.jsxs("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:[w.start_date?new Date(w.start_date).toLocaleDateString():"?","  ",w.end_date?new Date(w.end_date).toLocaleDateString():"?"]})]}),s.jsx("span",{className:H("text-[10px] font-medium px-2.5 py-1 rounded-full border capitalize",T(w.status||"planned")),children:w.status||"planned"})]}),Array.isArray(w.goals)&&w.goals.length>0&&s.jsxs("div",{className:H(kc,"p-4"),children:[s.jsx("h3",{className:Jm,children:"Goals"}),s.jsx("ul",{className:"mt-2 space-y-1.5",children:w.goals.map((O,P)=>s.jsxs("li",{className:"flex items-start gap-2 text-sm text-[var(--gm-text-secondary)]",children:[s.jsx(Ld,{className:"w-3.5 h-3.5 text-[var(--gm-accent-primary)] mt-0.5 shrink-0"}),O]},P))})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs("button",{onClick:N,disabled:i.isPending,className:nb,children:[i.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(hn,{className:"w-3.5 h-3.5"}),"Generate Tasks (AI)"]}),m.length>0&&s.jsxs("button",{onClick:_,disabled:o.isPending,className:nb,children:[o.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Gn,{className:"w-3.5 h-3.5"}),"Apply ",m.length," Tasks"]}),s.jsxs("button",{onClick:S,disabled:c.isPending,className:zS,children:[c.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(hn,{className:"w-3.5 h-3.5"}),"AI Analysis"]}),s.jsxs("button",{onClick:k,disabled:d.isPending,className:zS,children:[d.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Wt,{className:"w-3.5 h-3.5"}),"Export Document"]}),s.jsxs("button",{onClick:A,disabled:f.isPending,className:zS,children:[f.isPending?s.jsx(ye,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(tre,{className:"w-3.5 h-3.5"}),"Export Presentation"]})]}),m.length>0&&s.jsxs("div",{className:H(kc,"p-4"),children:[s.jsx("h3",{className:Jm,children:"Generated Tasks (Preview)"}),s.jsx("div",{className:"mt-2 space-y-2",children:m.map((O,P)=>s.jsxs("div",{className:"flex items-start gap-2 p-2 rounded-lg bg-[var(--gm-bg-tertiary)]",children:[s.jsx(YS,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)] mt-0.5 shrink-0"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-primary)]",children:O.title||O.task||O.name||""}),O.description&&s.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-0.5",children:O.description})]}),O.priority&&s.jsx("span",{className:"text-[9px] font-medium px-2 py-0.5 rounded-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] text-[var(--gm-text-tertiary)] capitalize shrink-0",children:O.priority})]},P))})]}),g&&s.jsxs("div",{className:H(kc,"p-4"),children:[s.jsx("h3",{className:Jm,children:"AI Analysis"}),s.jsx("div",{className:"mt-2 prose prose-sm dark:prose-invert max-w-none text-[var(--gm-text-secondary)] whitespace-pre-wrap text-xs",children:g})]}),j.length>0&&s.jsxs("div",{className:H(kc,"p-4"),children:[s.jsxs("h3",{className:Jm,children:["Sprint Tasks (",j.length,")"]}),s.jsx("div",{className:"mt-2 space-y-1.5",children:j.map((O,P)=>{const R=O.status||"pending",M=R==="completed"||R==="done";return s.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-[var(--gm-surface-hover)]",children:[M?s.jsx(Gn,{className:"w-3.5 h-3.5 text-green-400 shrink-0"}):s.jsx(YS,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)] shrink-0"}),s.jsx("span",{className:H("text-xs flex-1",M?"line-through text-[var(--gm-text-tertiary)]":"text-[var(--gm-text-primary)]"),children:O.title||O.task||O.name||""}),s.jsx("span",{className:"text-[9px] text-[var(--gm-text-tertiary)] capitalize",children:R})]},P)})})]})]})}function lUe(){const{data:e,isLoading:t}=sU(),[r,n]=y.useState(null),[a,i]=y.useState(!1),o=e?.sprints??(Array.isArray(e)?e:[]);if(r)return s.jsx("div",{className:"p-6",children:s.jsx(oUe,{sprintId:r,onBack:()=>n(null)})});const c=d=>d==="active"?s.jsx(tr,{className:"w-3.5 h-3.5 text-green-400"}):d==="completed"?s.jsx(Gn,{className:"w-3.5 h-3.5 text-blue-400"}):s.jsx(YS,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]"});return s.jsxs("div",{className:"p-6 space-y-5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold text-[var(--gm-text-primary)]",children:"Sprints"}),s.jsxs("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:[o.length," sprints"]})]}),s.jsxs("button",{onClick:()=>i(!a),className:nb,children:[s.jsx(br,{className:"w-3.5 h-3.5"})," New Sprint"]})]}),s.jsx(ds,{children:a&&s.jsx(Qe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:s.jsx(iUe,{onCreated:()=>i(!1)})})}),t?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx(ye,{className:"w-6 h-6 animate-spin text-[var(--gm-accent-primary)]"})}):o.length===0?s.jsxs("div",{className:H(kc,"p-12 text-center"),children:[s.jsx(ja,{className:"w-10 h-10 mx-auto text-[var(--gm-text-tertiary)] mb-3"}),s.jsx("p",{className:"text-sm text-[var(--gm-text-tertiary)]",children:"No sprints yet. Create your first sprint to get started."})]}):s.jsx("div",{className:"space-y-3",children:o.map(d=>{const f=d.status||"planned";return s.jsxs(Qe.div,{layout:!0,className:H(kc,"p-4 hover:border-[var(--gm-accent-primary)]/30 transition-colors cursor-pointer"),onClick:()=>n(String(d.id)),children:[s.jsxs("div",{className:"flex items-center gap-3",children:[c(f),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-sm font-semibold text-[var(--gm-text-primary)]",children:d.name||"Unnamed Sprint"}),s.jsxs("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:[d.start_date?new Date(d.start_date).toLocaleDateString():"?","  ",d.end_date?new Date(d.end_date).toLocaleDateString():"?",d.context&&s.jsxs("span",{className:"ml-2",children:[" ",d.context.substring(0,60),d.context.length>60?"...":""]})]})]}),s.jsx("span",{className:H("text-[10px] font-medium px-2.5 py-1 rounded-full border capitalize",f==="active"?"bg-green-500/10 text-green-400 border-green-500/30":f==="completed"?"bg-blue-500/10 text-blue-400 border-blue-500/30":"bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)] border-[var(--gm-border-primary)]"),children:f}),s.jsx(Ui,{className:"w-4 h-4 text-[var(--gm-text-tertiary)]"})]}),Array.isArray(d.goals)&&d.goals.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-2 ml-7",children:[d.goals.slice(0,3).map((m,h)=>s.jsx("span",{className:"text-[9px] px-2 py-0.5 rounded-full bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)]",children:m},h)),d.goals.length>3&&s.jsxs("span",{className:"text-[9px] text-[var(--gm-text-tertiary)]",children:["+",d.goals.length-3," more"]})]})]},String(d.id))})})]})}function cUe(){const{isAuthenticated:e,isLoading:t,login:r,register:n,forgotPassword:a}=ip(),[i,o]=y.useState("login"),[c,d]=y.useState(""),[f,m]=y.useState(""),[h,g]=y.useState(""),[x,w]=y.useState(!1),[b,j]=y.useState(!1);if(t)return s.jsx("div",{className:"flex items-center justify-center h-screen bg-background",children:s.jsx(ye,{className:"h-8 w-8 animate-spin text-primary"})});if(e)return s.jsx(ky,{to:"/dashboard",replace:!0});const N=async _=>{_.preventDefault(),j(!0);try{if(i==="login")await r(c,f),G.success("Welcome back!");else if(i==="register"){if(f!==h){G.error("Passwords do not match"),j(!1);return}if(f.length<6){G.error("Password must be at least 6 characters"),j(!1);return}await n(c,f),G.success("Registration successful! Please check your email to confirm."),o("login")}else i==="forgot"&&(await a(c),G.success("If an account exists, a password reset email has been sent."),o("login"))}catch(S){G.error(S.message||"Authentication failed")}finally{j(!1)}};return s.jsxs("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:[s.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[s.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-primary/5 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-primary/5 rounded-full blur-3xl"})]}),s.jsxs("div",{className:"relative w-full max-w-md",children:[s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-8",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-primary to-primary/70 flex items-center justify-center shadow-lg shadow-primary/30",children:s.jsx(hn,{className:"w-5 h-5 text-primary-foreground"})}),s.jsx("span",{className:"text-2xl font-bold text-foreground tracking-tight",children:"GodMode"})]}),s.jsxs("div",{className:"bg-card rounded-2xl border border-border p-8 shadow-xl",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("h1",{className:"text-xl font-bold text-foreground",children:i==="login"?"Welcome back":i==="register"?"Create account":"Reset password"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:i==="login"?"Sign in to your account":i==="register"?"Get started with GodMode":"Enter your email to receive a reset link"})]}),i!=="forgot"&&s.jsx("div",{className:"flex mb-6 bg-secondary rounded-lg p-1",children:["login","register"].map(_=>s.jsx("button",{type:"button",onClick:()=>o(_),className:`flex-1 py-2 text-sm font-medium rounded-md transition-all ${i===_?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:_==="login"?"Sign In":"Sign Up"},_))}),s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-muted-foreground uppercase tracking-wider mb-1.5",children:"Email"}),s.jsx("input",{type:"email",value:c,onChange:_=>d(_.target.value),placeholder:"you@example.com",required:!0,autoComplete:"email",className:"w-full px-3 py-2.5 bg-secondary border border-border rounded-lg text-sm text-foreground placeholder:text-muted-foreground/50 focus:outline-none focus:ring-2 focus:ring-ring"})]}),i!=="forgot"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-muted-foreground uppercase tracking-wider mb-1.5",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:x?"text":"password",value:f,onChange:_=>m(_.target.value),placeholder:i==="register"?"Min 6 characters":"Your password",required:!0,autoComplete:i==="login"?"current-password":"new-password",className:"w-full px-3 py-2.5 pr-10 bg-secondary border border-border rounded-lg text-sm text-foreground placeholder:text-muted-foreground/50 focus:outline-none focus:ring-2 focus:ring-ring"}),s.jsx("button",{type:"button",onClick:()=>w(!x),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",children:x?s.jsx(NC,{className:"w-4 h-4"}):s.jsx(eu,{className:"w-4 h-4"})})]})]}),i==="register"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-muted-foreground uppercase tracking-wider mb-1.5",children:"Confirm Password"}),s.jsx("input",{type:"password",value:h,onChange:_=>g(_.target.value),placeholder:"Repeat your password",required:!0,autoComplete:"new-password",className:"w-full px-3 py-2.5 bg-secondary border border-border rounded-lg text-sm text-foreground placeholder:text-muted-foreground/50 focus:outline-none focus:ring-2 focus:ring-ring"})]}),s.jsxs("button",{type:"submit",disabled:b,className:"w-full py-2.5 bg-primary text-primary-foreground rounded-lg text-sm font-medium hover:bg-primary/90 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[b&&s.jsx(ye,{className:"w-4 h-4 animate-spin"}),b?i==="login"?"Signing in...":i==="register"?"Creating account...":"Sending...":i==="login"?"Sign In":i==="register"?"Create Account":"Send Reset Link"]})]}),s.jsxs("div",{className:"mt-4 text-center",children:[i==="login"&&s.jsx("button",{type:"button",onClick:()=>o("forgot"),className:"text-xs text-primary hover:text-primary/80 transition-colors",children:"Forgot password?"}),i==="forgot"&&s.jsxs("button",{type:"button",onClick:()=>o("login"),className:"text-xs text-primary hover:text-primary/80 transition-colors inline-flex items-center gap-1",children:[s.jsx(vs,{className:"w-3 h-3"})," Back to sign in"]})]})]}),s.jsx("p",{className:"text-center text-xs text-muted-foreground mt-6",children:"By continuing, you agree to our Terms of Service and Privacy Policy."})]})]})}const uUe=new OJ({defaultOptions:{queries:{staleTime:3e4,retry:1,refetchOnWindowFocus:!1}}});function dUe(){const{isAuthenticated:e,isLoading:t}=ip();return t?s.jsx("div",{className:"flex items-center justify-center h-screen bg-background",children:s.jsx(ye,{className:"h-8 w-8 animate-spin text-primary"})}):e?s.jsx(g6,{}):s.jsx(ky,{to:"/login",replace:!0})}function fUe(){return s.jsx(PJ,{client:uUe,children:s.jsx(lie,{children:s.jsx(n6e,{children:s.jsx(YZ,{basename:"/",children:s.jsxs(_Z,{children:[s.jsx(Jt,{path:"/login",element:s.jsx(cUe,{})}),s.jsx(Jt,{element:s.jsx(dUe,{}),children:s.jsxs(Jt,{element:s.jsx(tue,{}),children:[s.jsx(Jt,{index:!0,element:s.jsx(ky,{to:"/dashboard",replace:!0})}),s.jsx(Jt,{path:"/dashboard",element:s.jsx(lCe,{})}),s.jsx(Jt,{path:"/chat",element:s.jsx(pCe,{})}),s.jsx(Jt,{path:"/sot",element:s.jsx(LTe,{})}),s.jsx(Jt,{path:"/timeline",element:s.jsx($Te,{})}),s.jsx(Jt,{path:"/contacts",element:s.jsx(YMe,{})}),s.jsx(Jt,{path:"/team-analysis",element:s.jsx(lRe,{})}),s.jsx(Jt,{path:"/files",element:s.jsx(_Re,{})}),s.jsx(Jt,{path:"/emails",element:s.jsx(CRe,{})}),s.jsx(Jt,{path:"/conversations",element:s.jsx(kRe,{})}),s.jsx(Jt,{path:"/graph",element:s.jsx(h6e,{})}),s.jsx(Jt,{path:"/costs",element:s.jsx(p6e,{})}),s.jsx(Jt,{path:"/history",element:s.jsx(g6e,{})}),s.jsx(Jt,{path:"/settings",element:s.jsx(v6e,{})}),s.jsx(Jt,{path:"/projects",element:s.jsx(I8e,{})}),s.jsx(Jt,{path:"/profile",element:s.jsx(G8e,{})}),s.jsx(Jt,{path:"/sprints",element:s.jsx(lUe,{})}),s.jsx(Jt,{path:"/admin",element:s.jsx(Y6e,{})}),s.jsx(Jt,{path:"*",element:s.jsx(ky,{to:"/dashboard",replace:!0})})]})})]})})})})})}const dQ=document.getElementById("root");if(!dQ)throw new Error("Root element not found");CX.createRoot(dQ).render(s.jsx(y.StrictMode,{children:s.jsx(fUe,{})}));
//# sourceMappingURL=main-CGCbGEtK.js.map
