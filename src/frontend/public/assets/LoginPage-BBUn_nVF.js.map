{"version":3,"file":"LoginPage-BBUn_nVF.js","sources":["../../src/pages/LoginPage.tsx"],"sourcesContent":["/**\r\n * Purpose:\r\n *   Standalone authentication page supporting login, registration, and password\r\n *   reset flows. Redirects to /dashboard if the user is already authenticated.\r\n *\r\n * Responsibilities:\r\n *   - Render a centered auth card with login/register tab switcher and forgot-password mode\r\n *   - Validate inputs (password match, min length) before submitting\r\n *   - Delegate auth operations to the AuthContext (login, register, forgotPassword)\r\n *   - Show loading spinner while auth state is being determined\r\n *   - Redirect authenticated users away from this page via <Navigate>\r\n *\r\n * Key dependencies:\r\n *   - useAuth (AuthContext): isAuthenticated, login, register, forgotPassword\r\n *   - react-router-dom Navigate: declarative redirect for authenticated users\r\n *\r\n * Side effects:\r\n *   - Network: authentication calls via AuthContext\r\n *   - Navigation: redirects to /dashboard on successful login or if already authenticated\r\n *\r\n * Notes:\r\n *   - This is the route-based login page; LandingPage.tsx also contains an embedded\r\n *     auth form for unauthenticated users arriving at the root route.\r\n *   - Password minimum length is 6 characters, enforced client-side.\r\n */\r\nimport { useState } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { Zap, Loader2, ArrowLeft, Eye, EyeOff } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\ntype AuthMode = 'login' | 'register' | 'forgot';\r\n\r\nconst CARD = 'rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-[var(--shadow-sm)] transition-all duration-200';\r\nconst INPUT = 'w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-placeholder)] focus:outline-none focus:border-[var(--gm-border-focus)] focus:shadow-[var(--shadow-focus)] transition-all duration-150';\r\nconst BTN_PRIMARY = 'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] hover:bg-[var(--gm-interactive-primary-hover)] shadow-sm transition-all duration-150 disabled:opacity-50';\r\n\r\nexport default function LoginPage() {\r\n  const { isAuthenticated, isLoading, login, register, forgotPassword } = useAuth();\r\n  const [mode, setMode] = useState<AuthMode>('login');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-screen bg-[var(--gm-bg-primary)]\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-[var(--gm-accent-primary)]\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isAuthenticated) {\r\n    return <Navigate to=\"/dashboard\" replace />;\r\n  }\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setSubmitting(true);\r\n    try {\r\n      if (mode === 'login') {\r\n        await login(email, password);\r\n        toast.success('Welcome back!');\r\n      } else if (mode === 'register') {\r\n        if (password !== confirmPassword) {\r\n          toast.error('Passwords do not match');\r\n          setSubmitting(false);\r\n          return;\r\n        }\r\n        if (password.length < 6) {\r\n          toast.error('Password must be at least 6 characters');\r\n          setSubmitting(false);\r\n          return;\r\n        }\r\n        await register(email, password);\r\n        toast.success('Registration successful! Please check your email to confirm.');\r\n        setMode('login');\r\n      } else if (mode === 'forgot') {\r\n        await forgotPassword(email);\r\n        toast.success('If an account exists, a password reset email has been sent.');\r\n        setMode('login');\r\n      }\r\n    } catch (err: any) {\r\n      toast.error(err.message || 'Authentication failed');\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[var(--gm-bg-primary)] flex items-center justify-center px-4\">\r\n      {/* Background decoration */}\r\n      <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\r\n        <div className=\"absolute -top-40 -right-40 w-80 h-80 bg-[var(--gm-interactive-primary)]/5 rounded-full blur-3xl\" />\r\n        <div className=\"absolute -bottom-40 -left-40 w-80 h-80 bg-[var(--gm-interactive-primary)]/5 rounded-full blur-3xl\" />\r\n      </div>\r\n\r\n      <div className=\"relative w-full max-w-md\">\r\n        {/* Logo */}\r\n        <div className=\"flex items-center justify-center gap-2 mb-8\">\r\n          <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-[var(--gm-interactive-primary)] to-[var(--gm-interactive-primary)]/70 flex items-center justify-center shadow-lg shadow-[var(--gm-interactive-primary)]/30\">\r\n            <Zap className=\"w-5 h-5 text-[var(--gm-text-on-brand)]\" />\r\n          </div>\r\n          <span className=\"text-2xl font-bold text-[var(--gm-text-primary)] tracking-tight\">GodMode</span>\r\n        </div>\r\n\r\n        {/* Card */}\r\n        <div className=\"bg-[var(--gm-surface-primary)] rounded-2xl border border-[var(--gm-border-primary)] p-8 shadow-xl\">\r\n          <div className=\"text-center mb-6\">\r\n            <h1 className=\"text-xl font-bold text-[var(--gm-text-primary)]\">\r\n              {mode === 'login' ? 'Welcome back' : mode === 'register' ? 'Create account' : 'Reset password'}\r\n            </h1>\r\n            <p className=\"text-sm text-[var(--gm-text-tertiary)] mt-1\">\r\n              {mode === 'login' ? 'Sign in to your account' : mode === 'register' ? 'Get started with GodMode' : 'Enter your email to receive a reset link'}\r\n            </p>\r\n          </div>\r\n\r\n          {/* Mode switcher for login/register */}\r\n          {mode !== 'forgot' && (\r\n            <div className=\"flex mb-6 bg-[var(--gm-bg-tertiary)] rounded-lg p-1\">\r\n              {(['login', 'register'] as const).map(tab => (\r\n                <button\r\n                  key={tab}\r\n                  type=\"button\"\r\n                  onClick={() => setMode(tab)}\r\n                  className={`flex-1 py-2 text-sm font-medium rounded-md transition-all ${\r\n                    mode === tab\r\n                      ? 'bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] shadow-sm'\r\n                      : 'text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)]'\r\n                  }`}\r\n                >\r\n                  {tab === 'login' ? 'Sign In' : 'Sign Up'}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n            <div>\r\n              <label className=\"block text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-1.5\">\r\n                Email\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                value={email}\r\n                onChange={e => setEmail(e.target.value)}\r\n                placeholder=\"you@example.com\"\r\n                required\r\n                autoComplete=\"email\"\r\n                className=\"w-full px-3 py-2.5 bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-placeholder)] focus:outline-none focus:border-[var(--gm-border-focus)] focus:shadow-[var(--shadow-focus)]\"\r\n              />\r\n            </div>\r\n\r\n            {mode !== 'forgot' && (\r\n              <div>\r\n                <label className=\"block text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-1.5\">\r\n                  Password\r\n                </label>\r\n                <div className=\"relative\">\r\n                  <input\r\n                    type={showPassword ? 'text' : 'password'}\r\n                    value={password}\r\n                    onChange={e => setPassword(e.target.value)}\r\n                    placeholder={mode === 'register' ? 'Min 6 characters' : 'Your password'}\r\n                    required\r\n                    autoComplete={mode === 'login' ? 'current-password' : 'new-password'}\r\n                    className=\"w-full px-3 py-2.5 pr-10 bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-placeholder)] focus:outline-none focus:border-[var(--gm-border-focus)] focus:shadow-[var(--shadow-focus)]\"\r\n                  />\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowPassword(!showPassword)}\r\n                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)]\"\r\n                  >\r\n                    {showPassword ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {mode === 'register' && (\r\n              <div>\r\n                <label className=\"block text-xs font-medium text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-1.5\">\r\n                  Confirm Password\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  value={confirmPassword}\r\n                  onChange={e => setConfirmPassword(e.target.value)}\r\n                  placeholder=\"Repeat your password\"\r\n                  required\r\n                  autoComplete=\"new-password\"\r\n                  className=\"w-full px-3 py-2.5 bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-placeholder)] focus:outline-none focus:border-[var(--gm-border-focus)] focus:shadow-[var(--shadow-focus)]\"\r\n                />\r\n              </div>\r\n            )}\r\n\r\n            <button\r\n              type=\"submit\"\r\n              disabled={submitting}\r\n              className=\"w-full py-2.5 bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] rounded-lg text-sm font-medium hover:bg-[var(--gm-interactive-primary-hover)] transition-colors disabled:opacity-50 flex items-center justify-center gap-2\"\r\n            >\r\n              {submitting && <Loader2 className=\"w-4 h-4 animate-spin\" />}\r\n              {submitting\r\n                ? (mode === 'login' ? 'Signing in...' : mode === 'register' ? 'Creating account...' : 'Sending...')\r\n                : (mode === 'login' ? 'Sign In' : mode === 'register' ? 'Create Account' : 'Send Reset Link')\r\n              }\r\n            </button>\r\n          </form>\r\n\r\n          {/* Links */}\r\n          <div className=\"mt-4 text-center\">\r\n            {mode === 'login' && (\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setMode('forgot')}\r\n                className=\"text-xs text-[var(--gm-accent-primary)] hover:text-[var(--gm-accent-primary)]/80 transition-colors\"\r\n              >\r\n                Forgot password?\r\n              </button>\r\n            )}\r\n            {mode === 'forgot' && (\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setMode('login')}\r\n                className=\"text-xs text-[var(--gm-accent-primary)] hover:text-[var(--gm-accent-primary)]/80 transition-colors inline-flex items-center gap-1\"\r\n              >\r\n                <ArrowLeft className=\"w-3 h-3\" /> Back to sign in\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <p className=\"text-center text-xs text-[var(--gm-text-tertiary)] mt-6\">\r\n          By continuing, you agree to our Terms of Service and Privacy Policy.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["LoginPage","isAuthenticated","isLoading","login","register","forgotPassword","useAuth","mode","setMode","useState","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","showPassword","setShowPassword","submitting","setSubmitting","jsx","Loader2","Navigate","handleSubmit","e","toast","err","jsxs","Zap","tab","EyeOff","Eye","ArrowLeft"],"mappings":"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"}