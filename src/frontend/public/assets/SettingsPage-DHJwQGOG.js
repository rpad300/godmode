import{c as G,r as o,j as e,cK as ae,af as U,ae as te,a as x,d7 as re,N as b,S as ne,d8 as ie,ab as le,E as q,d9 as Y,da as V,db as ce,dc as oe,dd as de,de as me,df as xe,O as g,ad as W,dg as he,dh as ue,di as pe,dj as ge,Z as je,dk as ve,dl as ye,dm as be,dn as fe,dp as Ne,J as ke,b3 as we,dq as Se,dr as Ce,ds as Pe,T as Ee,dt as Ae}from"./main-fI1tvvj5.js";import{C as Z}from"./cpu-7Vu7FY3P.js";import{K as H}from"./key-Ct4KUgKI.js";import{D as J}from"./database-DuLEfmYc.js";import{G as Me}from"./globe-wrEFY_Ku.js";import{S as K}from"./save-Dku4kEyp.js";import{M as Le,L as Te}from"./monitor-BDKpbneq.js";import{C as Oe}from"./chart-column-CKQUCa41.js";import{E as De}from"./eye-CkHWNw62.js";import{P as Ie}from"./plus-B5uVkXEF.js";import{C as z}from"./circle-check-big-00qMcaeM.js";import{T as Q}from"./test-tube-94vwolZK.js";const Ke=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Re=G("bot",Ke);const _e=[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]],X=G("webhook",_e),N="rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-[var(--shadow-sm)] transition-all duration-200",w="w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-placeholder)] focus:outline-none focus:border-[var(--gm-border-focus)] focus:shadow-[var(--shadow-focus)] transition-all duration-150",O="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] hover:bg-[var(--gm-interactive-primary-hover)] shadow-sm transition-all duration-150 disabled:opacity-50",A="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] hover:bg-[var(--gm-interactive-secondary-hover)] border border-[var(--gm-border-primary)] transition-all duration-150",F="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--color-danger-500)] text-white hover:bg-[var(--color-danger-600)] shadow-sm transition-all duration-150 disabled:opacity-50",P="text-[10px] font-bold text-[var(--gm-accent-primary)] uppercase tracking-[0.1em]",E="text-[10px] font-bold text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-1 flex items-center gap-1.5";function R({title:s,subtitle:r}){return e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-[var(--gm-text-primary)]",children:s}),r&&e.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)] mt-0.5",children:r})]})}const We=[{id:"profile",label:"Profile",icon:U},{id:"project",label:"Project",icon:Z},{id:"apikeys",label:"API Keys",icon:H},{id:"webhooks",label:"Webhooks",icon:X},{id:"data",label:"Data",icon:J}];function $e(){try{return localStorage.getItem("godmode-theme")||"system"}catch{return"system"}}function B(){try{return localStorage.getItem("godmode_current_project")||"default"}catch{return"default"}}function os(){const[s,r]=o.useState("profile");return e.jsxs("div",{className:"flex h-full",children:[e.jsxs("div",{className:"w-48 shrink-0 border-r border-[var(--gm-border-primary)] bg-[var(--gm-bg-primary)] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center gap-2.5 px-4 py-4 border-b border-[var(--gm-border-primary)]",children:[e.jsx("div",{className:"w-7 h-7 rounded-full bg-[var(--gm-interactive-primary)]/10 flex items-center justify-center",children:e.jsx(ae,{className:"w-3.5 h-3.5 text-[var(--gm-accent-primary)]"})}),e.jsx("span",{className:"text-sm font-bold text-[var(--gm-accent-primary)]",children:"Settings"})]}),e.jsx("nav",{className:"py-2",children:We.map(a=>{const d=a.icon,h=s===a.id;return e.jsxs("button",{onClick:()=>r(a.id),className:x("w-full flex items-center gap-2.5 px-4 py-2 text-xs transition-colors",h?"text-[var(--gm-accent-primary)] bg-[var(--gm-surface-hover)] font-semibold":"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] hover:bg-[var(--gm-surface-hover)]"),children:[e.jsx(d,{className:"w-3.5 h-3.5 shrink-0"}),e.jsx("span",{className:"flex-1 text-left",children:a.label}),h&&e.jsx(te,{className:"w-3 h-3 shrink-0"})]},a.id)})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[s==="profile"&&e.jsx(ze,{}),s==="project"&&e.jsx(Fe,{}),s==="apikeys"&&e.jsx(Ve,{projectId:B()}),s==="webhooks"&&e.jsx(Ze,{projectId:B()}),s==="data"&&e.jsx(He,{})]})]})}function ze(){const{user:s,updateProfile:r}=re(),[a,d]=o.useState($e),[h,u]=o.useState(""),[m,j]=o.useState(""),[n,i]=o.useState("en"),[v,f]=o.useState(!0),[y,S]=o.useState(!0),[l,p]=o.useState(!1);o.useEffect(()=>{s&&(u(s.display_name||""),j(s.timezone||""),i(s.language||"en"))},[s]),o.useEffect(()=>{try{const c=localStorage.getItem("godmode-privacy");if(c){const L=JSON.parse(c);f(L.analytics!==!1),S(L.errorReporting!==!1),p(L.aiDataImprovement===!0)}}catch{}},[]),o.useEffect(()=>{const c=a==="dark"||a==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.classList.toggle("dark",c),localStorage.setItem("godmode-theme",a)},[a]);const k=()=>{r.mutate({display_name:h,timezone:m,theme:a,language:n},{onSuccess:()=>g.success("Profile updated")})},M=()=>{localStorage.setItem("godmode-privacy",JSON.stringify({analytics:v,errorReporting:y,aiDataImprovement:l})),g.success("Privacy preferences saved")};return e.jsxs("div",{className:"space-y-5",children:[e.jsx(R,{title:"Profile",subtitle:"Manage your account info, appearance, and privacy"}),e.jsxs("div",{className:x(N,"p-5 space-y-5"),children:[e.jsx("h3",{className:P,children:"User Profile"}),e.jsxs("div",{children:[e.jsxs("label",{className:E,children:[e.jsx(U,{className:"w-3 h-3"})," Email"]}),e.jsx("input",{value:s?.email||"",readOnly:!0,className:x(w,"opacity-60 cursor-not-allowed")})]}),e.jsxs("div",{children:[e.jsx("label",{className:E,children:"Display Name"}),e.jsx("input",{value:h,onChange:c=>u(c.target.value),placeholder:"Your name...",className:w})]}),e.jsxs("div",{children:[e.jsxs("label",{className:E,children:[e.jsx(Me,{className:"w-3 h-3"})," Timezone"]}),e.jsx("input",{value:m,onChange:c=>j(c.target.value),placeholder:"e.g. Europe/Lisbon",className:w})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{onClick:k,disabled:r.isPending,className:O,children:[r.isPending?e.jsx(b,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(K,{className:"w-3.5 h-3.5"}),"Save Profile"]})})]}),e.jsxs("div",{className:x(N,"p-5 space-y-4"),children:[e.jsx("h3",{className:P,children:"Appearance"}),e.jsx("div",{className:"flex gap-2",children:[{value:"light",label:"Light",icon:ne},{value:"dark",label:"Dark",icon:ie},{value:"system",label:"System",icon:Le}].map(c=>{const L=c.icon;return e.jsxs("button",{onClick:()=>d(c.value),className:x("flex items-center gap-2 px-4 py-2 rounded-lg border text-xs transition-all duration-150",a===c.value?"bg-[var(--gm-interactive-primary)]/10 border-[var(--gm-accent-primary)]/30 text-[var(--gm-text-primary)] font-medium":"border-[var(--gm-border-primary)] hover:bg-[var(--gm-surface-hover)] text-[var(--gm-text-tertiary)]"),children:[e.jsx(L,{className:"h-3.5 w-3.5"})," ",c.label]},c.value)})})]}),e.jsxs("div",{className:x(N,"p-5 space-y-4"),children:[e.jsxs("h3",{className:P,children:[e.jsx(Te,{className:"w-3 h-3 inline mr-1"})," Language"]}),e.jsx("div",{className:"flex gap-2",children:[{value:"en",label:"English"},{value:"pt",label:"Português"},{value:"es",label:"Español"}].map(c=>e.jsx("button",{onClick:()=>i(c.value),className:x("px-4 py-2 rounded-lg border text-xs transition-all duration-150",n===c.value?"bg-[var(--gm-interactive-primary)]/10 border-[var(--gm-accent-primary)]/30 text-[var(--gm-text-primary)] font-medium":"border-[var(--gm-border-primary)] hover:bg-[var(--gm-surface-hover)] text-[var(--gm-text-tertiary)]"),children:c.label},c.value))})]}),e.jsxs("div",{className:x(N,"p-5 space-y-4"),children:[e.jsxs("h3",{className:P,children:[e.jsx(le,{className:"w-3 h-3 inline mr-1"})," Data & Privacy"]}),[{key:"analytics",label:"Analytics",desc:"Help us improve by sharing anonymized usage data",icon:Oe,state:v,setter:f},{key:"errorReporting",label:"Error Reporting",desc:"Automatically report crashes and errors",icon:De,state:y,setter:S},{key:"aiData",label:"AI Data Improvement",desc:"Allow anonymized data to improve AI model quality",icon:Re,state:l,setter:p}].map(c=>e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(c.icon,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-[var(--gm-text-primary)]",children:c.label}),e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:c.desc})]})]}),e.jsx("button",{onClick:()=>c.setter(!c.state),className:x("relative w-9 h-5 rounded-full transition-colors",c.state?"bg-[var(--gm-interactive-primary)]":"bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)]"),role:"switch","aria-checked":c.state,children:e.jsx("span",{className:x("absolute top-0.5 w-4 h-4 rounded-full bg-white shadow transition-transform",c.state?"translate-x-[18px]":"translate-x-0.5")})})]},c.key)),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{onClick:M,className:A,children:[e.jsx(K,{className:"w-3.5 h-3.5"})," Save Privacy"]})})]})]})}function Fe(){const{currentProject:s}=q(),r=Y(),a=V(),[d,h]=o.useState("");o.useEffect(()=>{s?.name?h(s.name):r.data?.projectName&&h(r.data.projectName)},[s,r.data]);const u=()=>{a.mutate({projectName:d},{onSuccess:()=>g.success("Project settings saved")})};return e.jsxs("div",{className:"space-y-5",children:[e.jsx(R,{title:"Project",subtitle:"Project name, API keys, AI configuration, and diagnostics"}),e.jsxs("div",{className:x(N,"p-5 space-y-5"),children:[e.jsx("h3",{className:P,children:"Project Configuration"}),r.isLoading?e.jsxs("div",{className:"flex items-center gap-2 py-4 text-[var(--gm-text-tertiary)] text-sm",children:[e.jsx(b,{className:"w-4 h-4 animate-spin"})," Loading config..."]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:E,children:"Project Name"}),e.jsx("input",{value:d,onChange:m=>h(m.target.value),className:w,placeholder:"My Project"})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{onClick:u,disabled:a.isPending,className:O,children:[a.isPending?e.jsx(b,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(K,{className:"w-3.5 h-3.5"}),"Save Project"]})})]})]}),e.jsx(qe,{}),e.jsx(Ye,{})]})}function Be({task:s,taskLabel:r,currentProvider:a,currentModel:d,providerList:h,onProviderChange:u,onModelChange:m}){const{data:j,isLoading:n,isError:i}=Ae(a||null),[v,f]=o.useState(!1),y=o.useMemo(()=>{if(!j)return[];const l=j,p=l.textModels??[],k=l.visionModels??[],M=l.embeddingModels??[];return s==="vision"?k:s==="embeddings"?M:p},[j,s]),S=y.length>0;return e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm font-medium text-[var(--gm-text-primary)] capitalize",children:r}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:E,children:"PROVIDER"}),e.jsxs("select",{value:a,onChange:l=>{u(l.target.value),f(!1)},className:x(w,"w-full text-xs"),children:[e.jsx("option",{value:"",children:"Select..."}),h.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]}),e.jsxs("span",{className:"text-[10px] text-[var(--gm-accent-primary)] mt-0.5 block",children:[h.length," provider(s) with project keys"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:E,children:"MODEL"}),n&&a?e.jsxs("div",{className:x(w,"w-full text-xs flex items-center gap-2"),children:[e.jsx(b,{className:"w-3 h-3 animate-spin text-blue-400"}),e.jsx("span",{className:"text-[var(--gm-text-tertiary)]",children:"Loading models..."})]}):S&&!v?e.jsxs(e.Fragment,{children:[e.jsxs("select",{value:d,onChange:l=>m(l.target.value),className:x(w,"w-full text-xs"),children:[e.jsx("option",{value:"",children:"Select model..."}),y.map(l=>e.jsxs("option",{value:l.id,children:[l.name||l.id,l.contextTokens?` (${Math.round(Number(l.contextTokens)/1e3)}K ctx)`:""]},l.id))]}),e.jsx("button",{onClick:()=>f(!0),className:"text-[10px] text-blue-400 hover:text-blue-300 mt-0.5 block",children:"or type manually"})]}):e.jsxs(e.Fragment,{children:[e.jsx("input",{value:d,onChange:l=>m(l.target.value),className:x(w,"w-full text-xs"),placeholder:a?"e.g. gpt-4o":"Select a provider first"}),S&&v&&e.jsx("button",{onClick:()=>f(!1),className:"text-[10px] text-blue-400 hover:text-blue-300 mt-0.5 block",children:"back to dropdown"}),i&&a&&e.jsx("span",{className:"text-[10px] text-amber-400 mt-0.5 block",children:"Could not load models — type manually"})]})]})]})]})}function Ge({projectId:s}){const{data:r,isLoading:a,isError:d}=Se(s),h=Ce(),u=Pe(),m=V(),j=Y(),[n,i]=o.useState({}),[v,f]=o.useState({}),[y,S]=o.useState({}),l=Array.isArray(r?.providers)?r.providers:[],k=j.data?.llm?.perTask??{text:{},vision:{},embeddings:{}},M=o.useMemo(()=>l.filter(t=>t.hasProjectKey).map(t=>({id:t.id,name:t.name})),[l]),c=o.useCallback(()=>{const t=Object.entries(v).filter(([,D])=>D.trim().length>0);if(t.length===0){g.info("No changes to save");return}let C=0;const T=t.length;for(const[D,$]of t)h.mutate({projectId:s,provider:D,apiKey:$},{onSuccess:()=>{C++,C===T&&(g.success(`${T} API key${T>1?"s":""} saved to encrypted vault`),f({}))},onError:I=>g.error(`Failed to save ${D}: ${I.message}`)})},[v,h,s]),L=o.useCallback(t=>{u.mutate({projectId:s,provider:t},{onSuccess:()=>g.success(`${t} project key removed — will use system key`),onError:()=>g.error("Failed to remove key")})},[u,s]),ee=o.useCallback(()=>{if(Object.keys(y).length===0){g.info("No changes to save");return}m.mutate({llm:{perTask:y}},{onSuccess:()=>{g.success("Project AI configuration saved"),S({})},onError:t=>g.error(t.message)})},[y,m]),se=Object.values(v).some(t=>t.trim().length>0);return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:x(N,"p-4 border-l-2 border-[var(--gm-accent-primary)]"),children:[e.jsx("h4",{className:"text-xs font-semibold text-[var(--gm-accent-primary)] mb-2",children:"Project BYOK (Bring Your Own Key)"}),e.jsxs("div",{className:"text-[11px] text-[var(--gm-text-secondary)] space-y-1",children:[e.jsxs("p",{children:["Set your own API keys per provider for this project. ",e.jsx("strong",{children:"Project keys"})," take priority over system keys — billing goes directly to your provider account."]}),e.jsxs("p",{children:["When no project key is set, the ",e.jsx("span",{className:"text-blue-400 font-medium",children:"system key"})," is used and your project balance is debited."]})]})]}),e.jsxs("div",{className:x(N,"p-5 space-y-4"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:P,children:[e.jsx(H,{className:"w-3 h-3 inline mr-1"})," Project LLM API Keys"]}),!a&&e.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:[l.filter(t=>t.hasProjectKey).length,"/",l.length," with project keys"]})]}),a?e.jsxs("div",{className:"flex items-center gap-2 py-4 text-[var(--gm-text-tertiary)] text-sm",children:[e.jsx(b,{className:"w-4 h-4 animate-spin"})," Loading providers..."]}):d?e.jsx("p",{className:"text-xs text-red-400",children:"Failed to load provider status."}):e.jsxs(e.Fragment,{children:[l.map(t=>e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-[var(--gm-accent-primary)]",children:t.name}),t.hasProjectKey?e.jsxs("span",{className:"text-[10px] text-green-400 flex items-center gap-1",children:[e.jsx(z,{className:"w-3 h-3"})," Project Key"]}):t.hasSystemKey?e.jsxs("span",{className:"text-[10px] text-blue-400 flex items-center gap-1",children:[e.jsx(z,{className:"w-3 h-3"})," System Key"]}):e.jsx("span",{className:"text-[10px] text-amber-400",children:"Not configured"}),t.hasProjectKey&&e.jsxs("button",{onClick:()=>L(t.id),disabled:u.isPending,className:"text-[10px] text-red-400 hover:text-red-300 ml-1",title:"Remove project key",children:[e.jsx(W,{className:"w-3 h-3 inline"})," Remove"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:n[t.id]?"text":"password",value:v[t.id]??"",onChange:C=>f(T=>({...T,[t.id]:C.target.value})),placeholder:t.masked||`Enter ${t.name} API key...`,className:x(w,"flex-1 font-mono text-xs")}),e.jsx("button",{onClick:()=>i(C=>({...C,[t.id]:!C[t.id]})),className:A,children:n[t.id]?"Hide":"Show"})]}),t.masked&&t.hasProjectKey&&!v[t.id]&&e.jsxs("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] font-mono pl-1",children:["Current: ",t.masked]})]},t.id)),e.jsxs("button",{onClick:c,disabled:h.isPending||!se,className:O,children:[h.isPending?e.jsx(b,{className:"w-3 h-3 animate-spin"}):e.jsx(K,{className:"w-3 h-3"})," Save to Encrypted Vault"]})]})]}),M.length>0&&e.jsxs("div",{className:x(N,"p-5 space-y-5"),children:[e.jsxs("div",{children:[e.jsx("h3",{className:P,children:"Task-Specific AI Configuration"}),e.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)] mt-1",children:"Override which provider and model to use for each AI task in this project. Only providers with project keys are available."})]}),Object.entries(k).map(([t,C])=>{const T=t.replace(/_/g," ").replace(/([A-Z])/g," $1"),D=y[t]?.provider??C?.provider??"",$=y[t]?.model??C?.model??"";return e.jsx(Be,{task:t,taskLabel:T,currentProvider:D,currentModel:$,providerList:M,onProviderChange:I=>S(_=>({..._,[t]:{provider:I,model:""}})),onModelChange:I=>S(_=>({..._,[t]:{provider:_[t]?.provider??C?.provider??"",model:I}}))},t)}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:ee,disabled:m.isPending||Object.keys(y).length===0,className:O,children:[m.isPending?e.jsx(b,{className:"w-3 h-3 animate-spin"}):e.jsx(K,{className:"w-3 h-3"})," Save AI Configuration"]}),e.jsxs("span",{className:"text-[10px] text-amber-400 flex items-center gap-1",children:[e.jsx(Ee,{className:"w-3 h-3"})," Overrides system config for this project"]})]})]})]})}function Ue(s){if(s==null)return"—";if(typeof s=="boolean")return s?"Yes":"No";if(typeof s=="string")return s||"—";if(typeof s=="number")return String(s);if(Array.isArray(s))return s.length>0?s.join(", "):"—";if(typeof s=="object"){const r=Object.entries(s);return r.length===0?"—":r.map(([a,d])=>`${a}: ${typeof d=="object"?JSON.stringify(d):String(d??"—")}`).join(" · ")}return String(s)}function qe(){const s=ue(),r=pe(),a=ge(),[d,h]=o.useState(""),u=s.data||{},m=r.data||{},j={ollama:"Ollama",openai:"OpenAI",google:"Google Gemini",gemini:"Google Gemini",grok:"Grok / xAI",xai:"Grok / xAI",deepseek:"DeepSeek",anthropic:"Claude / Anthropic",claude:"Claude",kimi:"Kimi",minimax:"MiniMax"};return e.jsxs("div",{className:x(N,"p-5 space-y-4"),children:[e.jsxs("h3",{className:P,children:[e.jsx(je,{className:"w-3 h-3 inline mr-1"})," LLM Diagnostics"]}),e.jsxs("div",{children:[e.jsx("label",{className:E,children:"Provider Capabilities"}),s.isLoading?e.jsx(b,{className:"w-4 h-4 animate-spin text-[var(--gm-accent-primary)]"}):Object.keys(u).length>0?e.jsx("div",{className:"space-y-2",children:Object.entries(u).filter(([,n])=>n!=null&&typeof n=="object"&&!Array.isArray(n)).map(([n,i])=>{const v=i;return e.jsxs("div",{className:"bg-[var(--gm-bg-tertiary)] rounded-lg px-3 py-2",children:[e.jsx("div",{className:"text-xs font-medium text-[var(--gm-text-primary)] mb-1",children:j[n]||n}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(v).map(([f,y])=>e.jsxs("span",{className:x("text-[10px] px-2 py-0.5 rounded-full",y?"bg-green-500/10 text-green-400":"bg-white/5 text-[var(--gm-text-tertiary)]"),children:[y?e.jsx(z,{className:"w-2.5 h-2.5 inline mr-0.5"}):null,f.replace(/_/g," ")]},f))})]},n)})}):e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:"No capabilities data"})]}),e.jsxs("div",{children:[e.jsx("label",{className:E,children:"Routing Status"}),r.isLoading?e.jsx(b,{className:"w-4 h-4 animate-spin text-[var(--gm-accent-primary)]"}):Object.keys(m).length>0?e.jsx("div",{className:"space-y-1",children:Object.entries(m).filter(([,n])=>n!=null).slice(0,10).map(([n,i])=>e.jsxs("div",{className:"flex items-center justify-between text-xs bg-[var(--gm-bg-tertiary)] rounded-lg px-3 py-1.5",children:[e.jsx("span",{className:"text-[var(--gm-text-tertiary)] capitalize",children:n.replace(/([A-Z])/g," $1").replace(/_/g," ")}),e.jsx("span",{className:"text-[var(--gm-text-primary)] font-medium text-right max-w-[60%] truncate",children:Ue(i)})]},n))}):e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:"No routing data"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:d,onChange:n=>h(n.target.value),className:x(w,"w-auto"),children:[e.jsx("option",{value:"",children:"Select provider to test"}),Object.entries(j).filter(([n])=>!["gemini","xai","claude"].includes(n)).map(([n,i])=>e.jsx("option",{value:n,children:i},n))]}),e.jsxs("button",{onClick:()=>a.mutate(d,{onSuccess:()=>g.success(`${d} connection OK`),onError:()=>g.error(`${d} test failed`)}),disabled:a.isPending||!d,className:A,children:[a.isPending?e.jsx(b,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(Q,{className:"w-3.5 h-3.5"})," Test Provider"]})]})]})}function Ye(){const s=ve(),r=ye(),a=be(),d=fe(),h=Ne(),[u,m]=o.useState(""),j=r.data?.models||[],n=a.data?.models||[];return e.jsxs("div",{className:x(N,"p-5 space-y-4"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:P,children:[e.jsx(Z,{className:"w-3 h-3 inline mr-1"})," Ollama Local Models"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>s.refetch(),disabled:s.isFetching,className:A,children:[s.isFetching?e.jsx(b,{className:"w-3 h-3 animate-spin"}):e.jsx(Q,{className:"w-3 h-3"})," Test"]}),e.jsxs("button",{onClick:()=>r.refetch(),disabled:r.isFetching,className:A,children:[r.isFetching?e.jsx(b,{className:"w-3 h-3 animate-spin"}):e.jsx(ke,{className:"w-3 h-3"})," Refresh"]})]})]}),j.length>0?e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:E,children:["Installed (",j.length,")"]}),j.map((i,v)=>e.jsxs("div",{className:"flex items-center justify-between bg-[var(--gm-bg-tertiary)] rounded-lg px-3 py-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-primary)]",children:String(i.name||i.model||"")}),i.size&&e.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] ml-2",children:String(i.size)})]}),e.jsx("button",{onClick:()=>h.mutate({model:String(i.name||i.model)},{onSuccess:()=>g.success("Model unloaded")}),disabled:h.isPending,className:"px-2 py-1 rounded text-[10px] text-[var(--gm-text-tertiary)] hover:bg-[var(--color-danger-500)]/10 hover:text-[var(--color-danger-500)] transition-colors",children:"Unload"})]},v))]}):e.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:"No models loaded. Click Refresh to check or pull a model below."}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{value:u,onChange:i=>m(i.target.value),placeholder:"Model name (e.g. llama3.2)",className:w}),e.jsxs("button",{onClick:()=>d.mutate({model:u},{onSuccess:()=>{g.success(`Pulling ${u}...`),m("")}}),disabled:d.isPending||!u.trim(),className:O,children:[d.isPending?e.jsx(b,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(we,{className:"w-3.5 h-3.5"})," Pull"]})]}),e.jsx("button",{onClick:()=>a.refetch(),className:"text-xs text-[var(--gm-accent-primary)] underline",children:"Load recommended models"}),n.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5",children:n.map((i,v)=>e.jsx("button",{onClick:()=>m(String(i.name||i.model||"")),className:"text-[10px] px-2 py-0.5 rounded-full bg-[var(--gm-interactive-primary)]/10 text-[var(--gm-accent-primary)] font-medium hover:bg-[var(--gm-interactive-primary)]/20 transition-colors",children:String(i.name||i.model||"")},v))})]})}function Ve({projectId:s}){const{currentProject:r}=q(),a=r?.id||s;return e.jsxs("div",{className:"space-y-5",children:[e.jsx(R,{title:"API Keys",subtitle:"Manage LLM provider API keys and AI configuration for this project"}),e.jsx(Ge,{projectId:a})]})}function Ze({projectId:s}){const r=ce(s),a=oe(),d=de(),h=me(),[u,m]=o.useState(!1),[j,n]=o.useState(""),[i,v]=o.useState([]),f=r.data?.webhooks??[],y=["document.processed","document.created","document.deleted","entity.created","entity.updated","entity.deleted","contact.created","contact.updated","email.received","email.processed"],S=p=>{v(k=>k.includes(p)?k.filter(M=>M!==p):[...k,p])},l=()=>{!j.trim()||i.length===0||a.mutate({projectId:s,url:j.trim(),events:i},{onSuccess:()=>{g.success("Webhook created"),n(""),v([]),m(!1)},onError:()=>g.error("Failed to create webhook")})};return e.jsxs("div",{className:"space-y-5",children:[e.jsx(R,{title:"Webhooks",subtitle:"Configure endpoints to receive real-time event notifications"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:P,children:"Endpoints"}),e.jsxs("button",{onClick:()=>m(!u),className:O,children:[e.jsx(Ie,{className:"w-3.5 h-3.5"})," Add Webhook"]})]}),u&&e.jsxs("div",{className:x(N,"p-4 space-y-3"),children:[e.jsxs("div",{children:[e.jsx("label",{className:E,children:"Endpoint URL"}),e.jsx("input",{value:j,onChange:p=>n(p.target.value),className:w,placeholder:"https://your-server.com/webhook"})]}),e.jsxs("div",{children:[e.jsx("label",{className:E,children:"Events"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:y.map(p=>e.jsx("button",{onClick:()=>S(p),className:x("px-2 py-1 rounded-md text-[10px] font-medium transition-colors border",i.includes(p)?"bg-[var(--gm-interactive-primary)]/10 border-[var(--gm-accent-primary)]/30 text-[var(--gm-accent-primary)]":"bg-[var(--gm-bg-tertiary)] border-[var(--gm-border-primary)] text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)]"),children:p},p))})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>m(!1),className:A,children:"Cancel"}),e.jsxs("button",{onClick:l,disabled:a.isPending||!j.trim()||i.length===0,className:O,children:[a.isPending?e.jsx(b,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(xe,{className:"w-3.5 h-3.5"})," Create"]})]})]}),r.isLoading?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(b,{className:"w-5 h-5 animate-spin text-[var(--gm-accent-primary)]"})}):f.length===0?e.jsxs("div",{className:x(N,"p-6 text-center"),children:[e.jsx(X,{className:"w-8 h-8 mx-auto mb-2 opacity-40 text-[var(--gm-text-tertiary)]"}),e.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:"No webhooks configured. Add one to receive real-time event notifications."})]}):e.jsx("div",{className:"space-y-2",children:f.map(p=>e.jsxs("div",{className:x(N,"p-4"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm font-mono text-[var(--gm-text-primary)] truncate flex-1 mr-2",children:p.url}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>h.mutate(p.id,{onSuccess:()=>g.success("Test sent"),onError:()=>g.error("Test failed")}),disabled:h.isPending,className:A,children:"Test"}),e.jsx("button",{onClick:()=>d.mutate(p.id,{onSuccess:()=>g.success("Webhook deleted")}),className:"p-1.5 text-[var(--gm-text-tertiary)] hover:text-[var(--color-danger-500)] transition-colors",children:e.jsx(W,{className:"w-3.5 h-3.5"})})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:p.events.map(k=>e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)]",children:k},k))}),e.jsxs("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1.5",children:["Created ",new Date(p.created_at).toLocaleDateString()]})]},p.id))})]})}function He(){const s=he(),[r,a]=o.useState(!1),d=o.useCallback(()=>{const u=Object.keys(localStorage).filter(m=>m.startsWith("godmode-")&&m!=="godmode-theme"&&m!=="godmode-project-id");u.forEach(m=>localStorage.removeItem(m)),g.success(`Cleared ${u.length} cached items`)},[]),h=o.useCallback(()=>{s.mutate({clearArchived:!0},{onSuccess:()=>{g.success("Project data reset"),a(!1)},onSettled:()=>a(!1)})},[s]);return e.jsxs("div",{className:"space-y-5",children:[e.jsx(R,{title:"Data",subtitle:"Manage local cache and project data"}),e.jsxs("div",{className:x(N,"p-5 space-y-3"),children:[e.jsx("h3",{className:P,children:"Local Data"}),e.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:"Clear cached data stored in your browser. This does not affect server data."}),e.jsxs("button",{onClick:d,className:A,children:[e.jsx(J,{className:"w-3.5 h-3.5"})," Clear Local Cache"]})]}),e.jsxs("div",{className:x(N,"p-5 space-y-3 border-[var(--color-danger-500)]/30"),children:[e.jsx("h3",{className:"text-[10px] font-bold text-[var(--color-danger-500)] uppercase tracking-[0.1em]",children:"Danger Zone"}),e.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:"Reset all project knowledge data. This permanently deletes facts, decisions, questions, risks, and actions."}),r?e.jsxs("div",{className:"bg-[var(--color-danger-500)]/5 border border-[var(--color-danger-500)]/20 rounded-lg p-4 space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-[var(--color-danger-500)]",children:"Are you sure? This action cannot be undone."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>a(!1),className:A,children:"Cancel"}),e.jsxs("button",{onClick:h,disabled:s.isPending,className:F,children:[s.isPending?e.jsx(b,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(W,{className:"w-3.5 h-3.5"}),"Confirm Reset"]})]})]}):e.jsxs("button",{onClick:()=>a(!0),className:F,children:[e.jsx(W,{className:"w-3.5 h-3.5"})," Reset Project Data"]})]})]})}export{os as default};
//# sourceMappingURL=SettingsPage-DHJwQGOG.js.map
