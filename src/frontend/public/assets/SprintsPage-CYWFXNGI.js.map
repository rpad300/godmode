{"version":3,"file":"SprintsPage-CYWFXNGI.js","sources":["../../../../node_modules/lucide-react/dist/esm/icons/presentation.js","../../../../node_modules/lucide-react/dist/esm/icons/square-chart-gantt.js","../../src/components/sprints/BreakdownChart.tsx","../../src/components/sprints/BurndownChart.tsx","../../src/components/sprints/VelocityChart.tsx","../../src/components/sprints/HealthScoreWidget.tsx","../../src/components/sprints/KanbanBoard.tsx","../../src/components/sprints/GanttChart.tsx","../../src/components/sprints/RetrospectivePanel.tsx","../../src/components/sprints/StandupPanel.tsx","../../src/components/sprints/CapacityPanel.tsx","../../src/components/sprints/EstimatePointsButton.tsx","../../src/components/sprints/SprintReportModal.tsx","../../src/pages/SprintsPage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M2 3h20\", key: \"91anmk\" }],\n  [\"path\", { d: \"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3\", key: \"2k9sn8\" }],\n  [\"path\", { d: \"m7 21 5-5 5 5\", key: \"bip4we\" }]\n];\nconst Presentation = createLucideIcon(\"presentation\", __iconNode);\n\nexport { __iconNode, Presentation as default };\n//# sourceMappingURL=presentation.js.map\n","/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }],\n  [\"path\", { d: \"M9 8h7\", key: \"kbo1nt\" }],\n  [\"path\", { d: \"M8 12h6\", key: \"ikassy\" }],\n  [\"path\", { d: \"M11 16h5\", key: \"oq65wt\" }]\n];\nconst SquareChartGantt = createLucideIcon(\"square-chart-gantt\", __iconNode);\n\nexport { __iconNode, SquareChartGantt as default };\n//# sourceMappingURL=square-chart-gantt.js.map\n","import { useMemo } from 'react';\r\n\r\ninterface BarItem {\r\n  label: string;\r\n  value: number;\r\n  color: string;\r\n}\r\n\r\ninterface BreakdownChartProps {\r\n  title: string;\r\n  data: Record<string, number>;\r\n  colorMap?: Record<string, string>;\r\n}\r\n\r\nconst STATUS_COLORS: Record<string, string> = {\r\n  pending: '#64748b',\r\n  in_progress: '#3b82f6',\r\n  completed: '#22c55e',\r\n  overdue: '#ef4444',\r\n  cancelled: '#6b7280',\r\n  planning: '#3b82f6',\r\n  active: '#22c55e',\r\n  done: '#22c55e',\r\n};\r\n\r\nconst ASSIGNEE_PALETTE = [\r\n  '#3b82f6', '#8b5cf6', '#ec4899', '#f59e0b', '#10b981',\r\n  '#06b6d4', '#f43f5e', '#84cc16', '#6366f1', '#14b8a6',\r\n];\r\n\r\nexport default function BreakdownChart({ title, data, colorMap }: BreakdownChartProps) {\r\n  const bars = useMemo<BarItem[]>(() => {\r\n    const entries = Object.entries(data).filter(([, v]) => v > 0);\r\n    if (entries.length === 0) return [];\r\n    return entries.map(([label, value], i) => ({\r\n      label,\r\n      value,\r\n      color: colorMap?.[label] || STATUS_COLORS[label] || ASSIGNEE_PALETTE[i % ASSIGNEE_PALETTE.length],\r\n    }));\r\n  }, [data, colorMap]);\r\n\r\n  const maxVal = useMemo(() => Math.max(...bars.map(b => b.value), 1), [bars]);\r\n  const total = useMemo(() => bars.reduce((s, b) => s + b.value, 0), [bars]);\r\n\r\n  if (bars.length === 0) {\r\n    return (\r\n      <div className=\"text-xs text-[var(--gm-text-tertiary)] text-center py-4\">No data</div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-3\">\r\n        <span className=\"text-[10px] font-bold text-[var(--gm-accent-primary)] uppercase tracking-[0.1em]\">{title}</span>\r\n        <span className=\"text-[10px] text-[var(--gm-text-tertiary)]\">{total} total</span>\r\n      </div>\r\n      <div className=\"space-y-2\">\r\n        {bars.map(bar => {\r\n          const pct = Math.round((bar.value / maxVal) * 100);\r\n          const sharePct = Math.round((bar.value / total) * 100);\r\n          return (\r\n            <div key={bar.label} className=\"group\">\r\n              <div className=\"flex items-center justify-between mb-0.5\">\r\n                <span className=\"text-xs text-[var(--gm-text-secondary)] capitalize truncate max-w-[60%]\">\r\n                  {bar.label.replace(/_/g, ' ')}\r\n                </span>\r\n                <span className=\"text-[10px] text-[var(--gm-text-tertiary)] tabular-nums\">\r\n                  {bar.value} ({sharePct}%)\r\n                </span>\r\n              </div>\r\n              <div className=\"h-2 rounded-full bg-white/5 overflow-hidden\">\r\n                <div\r\n                  className=\"h-full rounded-full transition-all duration-500 ease-out\"\r\n                  style={{ width: `${pct}%`, backgroundColor: bar.color }}\r\n                />\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useMemo } from 'react';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface DailyPoint {\r\n  date: string;\r\n  remaining_tasks: number;\r\n  remaining_points: number;\r\n  completed_tasks: number;\r\n  completed_points: number;\r\n}\r\n\r\ninterface BurndownChartProps {\r\n  dailyProgress: DailyPoint[];\r\n  totalTasks: number;\r\n  totalPoints: number;\r\n  usePoints?: boolean;\r\n}\r\n\r\nexport default function BurndownChart({ dailyProgress, totalTasks, totalPoints, usePoints = false }: BurndownChartProps) {\r\n  const total = usePoints ? totalPoints : totalTasks;\r\n  const data = useMemo(() => {\r\n    if (!dailyProgress?.length) return [];\r\n    return dailyProgress.map((d, i) => ({\r\n      ...d,\r\n      remaining: usePoints ? d.remaining_points : d.remaining_tasks,\r\n      idealRemaining: total - (total / (dailyProgress.length - 1)) * i,\r\n    }));\r\n  }, [dailyProgress, total, usePoints]);\r\n\r\n  if (data.length < 2) {\r\n    return <div className=\"text-xs text-[var(--gm-text-tertiary)] text-center py-4\">Not enough data for burndown</div>;\r\n  }\r\n\r\n  const maxVal = Math.max(total, ...data.map(d => d.remaining));\r\n  const chartH = 160;\r\n  const chartW = 100;\r\n\r\n  const toX = (i: number) => (i / (data.length - 1)) * chartW;\r\n  const toY = (v: number) => chartH - (v / (maxVal || 1)) * chartH;\r\n\r\n  const actualPath = data.map((d, i) => `${i === 0 ? 'M' : 'L'}${toX(i).toFixed(1)},${toY(d.remaining).toFixed(1)}`).join(' ');\r\n  const idealPath = data.map((d, i) => `${i === 0 ? 'M' : 'L'}${toX(i).toFixed(1)},${toY(d.idealRemaining).toFixed(1)}`).join(' ');\r\n  const areaPath = actualPath + ` L${chartW},${chartH} L0,${chartH} Z`;\r\n\r\n  const todayIdx = (() => {\r\n    const today = new Date().toISOString().slice(0, 10);\r\n    const idx = data.findIndex(d => d.date >= today);\r\n    return idx >= 0 ? idx : data.length - 1;\r\n  })();\r\n\r\n  const labels = useMemo(() => {\r\n    if (data.length <= 7) return data.map(d => d.date.slice(5));\r\n    const step = Math.ceil(data.length / 6);\r\n    return data.map((d, i) => i % step === 0 || i === data.length - 1 ? d.date.slice(5) : '');\r\n  }, [data]);\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-2\">\r\n        <span className=\"text-[10px] font-bold text-blue-400 uppercase tracking-[0.1em]\">\r\n          Burndown ({usePoints ? 'Points' : 'Tasks'})\r\n        </span>\r\n        <span className=\"text-[10px] text-[var(--gm-text-tertiary)]\">\r\n          {data[todayIdx]?.remaining ?? 0} remaining of {total}\r\n        </span>\r\n      </div>\r\n      <div className=\"relative\" style={{ paddingBottom: '45%' }}>\r\n        <svg viewBox={`-4 -4 ${chartW + 8} ${chartH + 24}`} className=\"absolute inset-0 w-full h-full\" preserveAspectRatio=\"none\">\r\n          {[0, 0.25, 0.5, 0.75, 1].map(f => (\r\n            <line key={f} x1=\"0\" y1={toY(maxVal * f)} x2={chartW} y2={toY(maxVal * f)}\r\n              stroke=\"rgba(255,255,255,0.05)\" strokeWidth=\"0.3\" />\r\n          ))}\r\n          <path d={areaPath} fill=\"rgba(59,130,246,0.08)\" />\r\n          <path d={idealPath} fill=\"none\" stroke=\"rgba(255,255,255,0.15)\" strokeWidth=\"0.5\" strokeDasharray=\"2,2\" />\r\n          <path d={actualPath} fill=\"none\" stroke=\"#3b82f6\" strokeWidth=\"1\" strokeLinejoin=\"round\" />\r\n          {todayIdx < data.length && (\r\n            <line x1={toX(todayIdx)} y1=\"0\" x2={toX(todayIdx)} y2={chartH}\r\n              stroke=\"rgba(250,204,21,0.3)\" strokeWidth=\"0.5\" strokeDasharray=\"1.5,1.5\" />\r\n          )}\r\n          <circle cx={toX(todayIdx)} cy={toY(data[todayIdx]?.remaining ?? 0)} r=\"2\" fill=\"#3b82f6\" />\r\n          {labels.map((label, i) => label ? (\r\n            <text key={i} x={toX(i)} y={chartH + 10} textAnchor=\"middle\"\r\n              className=\"fill-[var(--gm-text-tertiary)]\" fontSize=\"3.5\">{label}</text>\r\n          ) : null)}\r\n        </svg>\r\n      </div>\r\n      <div className=\"flex items-center gap-4 mt-1 justify-center\">\r\n        <span className=\"flex items-center gap-1 text-[9px] text-[var(--gm-text-tertiary)]\">\r\n          <span className=\"w-3 h-0.5 bg-blue-500 rounded\" /> Actual\r\n        </span>\r\n        <span className=\"flex items-center gap-1 text-[9px] text-[var(--gm-text-tertiary)]\">\r\n          <span className=\"w-3 h-0.5 bg-white/15 rounded border-dashed\" /> Ideal\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useMemo } from 'react';\r\n\r\ninterface VelocityEntry {\r\n  sprint_name: string;\r\n  completed_points: number;\r\n  completed_tasks: number;\r\n  total_points: number;\r\n  total_tasks: number;\r\n}\r\n\r\ninterface VelocityChartProps {\r\n  history: VelocityEntry[];\r\n}\r\n\r\nexport default function VelocityChart({ history }: VelocityChartProps) {\r\n  const data = useMemo(() => {\r\n    if (!history?.length) return [];\r\n    return history.slice(-8);\r\n  }, [history]);\r\n\r\n  const avgVelocity = useMemo(() => {\r\n    if (!data.length) return 0;\r\n    return Math.round(data.reduce((s, d) => s + d.completed_points, 0) / data.length);\r\n  }, [data]);\r\n\r\n  const maxVal = useMemo(() => Math.max(...data.map(d => Math.max(d.total_points, d.completed_points)), 1), [data]);\r\n\r\n  if (data.length === 0) {\r\n    return <div className=\"text-xs text-[var(--gm-text-tertiary)] text-center py-4\">No velocity data yet</div>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-3\">\r\n        <span className=\"text-[10px] font-bold text-blue-400 uppercase tracking-[0.1em]\">Velocity</span>\r\n        <span className=\"text-[10px] text-[var(--gm-text-tertiary)]\">Avg: {avgVelocity} pts/sprint</span>\r\n      </div>\r\n      <div className=\"flex items-end gap-1.5\" style={{ height: 100 }}>\r\n        {data.map((d, i) => {\r\n          const totalH = (d.total_points / maxVal) * 100;\r\n          const doneH = (d.completed_points / maxVal) * 100;\r\n          return (\r\n            <div key={i} className=\"flex-1 flex flex-col items-center gap-0.5 group relative\">\r\n              <div className=\"w-full flex flex-col items-center justify-end\" style={{ height: 80 }}>\r\n                <div className=\"w-full rounded-t relative overflow-hidden\" style={{ height: `${totalH}%`, minHeight: 2 }}>\r\n                  <div className=\"absolute inset-0 bg-white/5 rounded-t\" />\r\n                  <div className=\"absolute bottom-0 left-0 right-0 bg-blue-500/80 rounded-t transition-all\" style={{ height: `${d.total_points > 0 ? (d.completed_points / d.total_points) * 100 : 0}%` }} />\r\n                </div>\r\n              </div>\r\n              <span className=\"text-[8px] text-[var(--gm-text-tertiary)] truncate max-w-full text-center leading-tight\"\r\n                title={d.sprint_name}>\r\n                {d.sprint_name.length > 8 ? d.sprint_name.slice(0, 7) + '…' : d.sprint_name}\r\n              </span>\r\n              <div className=\"absolute -top-6 left-1/2 -translate-x-1/2 bg-[var(--gm-bg-elevated)] border border-[var(--gm-border-primary)] rounded px-1.5 py-0.5 text-[8px] text-[var(--gm-text-primary)] whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10\">\r\n                {d.completed_points}/{d.total_points} pts\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      {avgVelocity > 0 && (\r\n        <div className=\"mt-2 h-px w-full relative\">\r\n          <div className=\"absolute inset-x-0 border-t border-dashed border-yellow-500/30\" />\r\n          <span className=\"absolute right-0 -top-2 text-[8px] text-yellow-400/60\">avg</span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { cn } from '@/lib/utils';\r\nimport { AlertTriangle, CheckCircle, AlertCircle, XCircle, Activity } from 'lucide-react';\r\nimport type { SprintHealthScore } from '@/types/godmode';\r\n\r\ninterface HealthScoreWidgetProps {\r\n  health: SprintHealthScore | null | undefined;\r\n  isLoading?: boolean;\r\n  compact?: boolean;\r\n}\r\n\r\nconst riskConfig = {\r\n  low: { color: 'text-green-400', bg: 'bg-green-500/10', border: 'border-green-500/30', icon: CheckCircle, label: 'Healthy' },\r\n  medium: { color: 'text-yellow-400', bg: 'bg-yellow-500/10', border: 'border-yellow-500/30', icon: AlertTriangle, label: 'At Risk' },\r\n  high: { color: 'text-orange-400', bg: 'bg-orange-500/10', border: 'border-orange-500/30', icon: AlertCircle, label: 'High Risk' },\r\n  critical: { color: 'text-red-400', bg: 'bg-red-500/10', border: 'border-red-500/30', icon: XCircle, label: 'Critical' },\r\n};\r\n\r\nconst factorLabels: Record<string, string> = {\r\n  completion_rate: 'Completion',\r\n  time_progress: 'Time Elapsed',\r\n  velocity_trend: 'Velocity',\r\n  overdue_ratio: 'On-time',\r\n  distribution_balance: 'Balance',\r\n};\r\n\r\nfunction ScoreRing({ score, size = 64, strokeWidth = 5, color }: { score: number; size?: number; strokeWidth?: number; color: string }) {\r\n  const radius = (size - strokeWidth) / 2;\r\n  const circumference = 2 * Math.PI * radius;\r\n  const offset = circumference - (score / 100) * circumference;\r\n  return (\r\n    <svg width={size} height={size} className=\"transform -rotate-90\">\r\n      <circle cx={size / 2} cy={size / 2} r={radius} fill=\"none\" stroke=\"rgba(255,255,255,0.05)\" strokeWidth={strokeWidth} />\r\n      <circle cx={size / 2} cy={size / 2} r={radius} fill=\"none\" stroke={color} strokeWidth={strokeWidth}\r\n        strokeDasharray={circumference} strokeDashoffset={offset} strokeLinecap=\"round\"\r\n        className=\"transition-all duration-700 ease-out\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default function HealthScoreWidget({ health, isLoading, compact }: HealthScoreWidgetProps) {\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-4\">\r\n        <Activity className=\"w-5 h-5 text-[var(--gm-text-tertiary)] animate-pulse\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!health) return null;\r\n\r\n  const cfg = riskConfig[health.risk_level] || riskConfig.medium;\r\n  const RiskIcon = cfg.icon;\r\n  const scoreColor = health.score >= 75 ? '#22c55e' : health.score >= 50 ? '#eab308' : health.score >= 25 ? '#f97316' : '#ef4444';\r\n\r\n  if (compact) {\r\n    return (\r\n      <div className={cn('flex items-center gap-2 px-2.5 py-1.5 rounded-lg border', cfg.bg, cfg.border)}>\r\n        <div className=\"relative w-8 h-8\">\r\n          <ScoreRing score={health.score} size={32} strokeWidth={3} color={scoreColor} />\r\n          <span className=\"absolute inset-0 flex items-center justify-center text-[9px] font-bold\" style={{ color: scoreColor }}>\r\n            {health.score}\r\n          </span>\r\n        </div>\r\n        <div>\r\n          <span className={cn('text-[10px] font-medium', cfg.color)}>{cfg.label}</span>\r\n          {health.alerts.length > 0 && (\r\n            <p className=\"text-[9px] text-[var(--gm-text-tertiary)] truncate max-w-[140px]\">{health.alerts[0]}</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <span className=\"text-[10px] font-bold text-blue-400 uppercase tracking-[0.1em]\">Sprint Health</span>\r\n        <div className={cn('flex items-center gap-1 text-[10px] font-medium px-2 py-0.5 rounded-full border', cfg.bg, cfg.color, cfg.border)}>\r\n          <RiskIcon className=\"w-3 h-3\" /> {cfg.label}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex items-center gap-4\">\r\n        <div className=\"relative w-16 h-16 shrink-0\">\r\n          <ScoreRing score={health.score} size={64} strokeWidth={5} color={scoreColor} />\r\n          <span className=\"absolute inset-0 flex items-center justify-center text-lg font-bold\" style={{ color: scoreColor }}>\r\n            {health.score}\r\n          </span>\r\n        </div>\r\n        <div className=\"flex-1 space-y-1.5\">\r\n          {Object.entries(health.factors).map(([key, val]) => {\r\n            const isInverse = key === 'overdue_ratio';\r\n            const displayVal = isInverse ? 100 - val : val;\r\n            const barColor = displayVal >= 70 ? '#22c55e' : displayVal >= 40 ? '#eab308' : '#ef4444';\r\n            return (\r\n              <div key={key}>\r\n                <div className=\"flex justify-between text-[9px] mb-0.5\">\r\n                  <span className=\"text-[var(--gm-text-tertiary)]\">{factorLabels[key] || key}</span>\r\n                  <span className=\"text-[var(--gm-text-secondary)] tabular-nums\">{displayVal}%</span>\r\n                </div>\r\n                <div className=\"h-1 rounded-full bg-white/5 overflow-hidden\">\r\n                  <div className=\"h-full rounded-full transition-all duration-500\" style={{ width: `${displayVal}%`, backgroundColor: barColor }} />\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n\r\n      {health.alerts.length > 0 && (\r\n        <div className=\"space-y-1\">\r\n          {health.alerts.map((alert, i) => (\r\n            <div key={i} className=\"flex items-start gap-1.5 text-[10px] text-orange-400\">\r\n              <AlertTriangle className=\"w-3 h-3 shrink-0 mt-0.5\" />\r\n              <span>{alert}</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useCallback } from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { GripVertical } from 'lucide-react';\r\nimport type { Action } from '@/types/godmode';\r\nimport OwnerBadge from '../sot/OwnerBadge';\r\n\r\ninterface KanbanBoardProps {\r\n  actions: Action[];\r\n  onStatusChange: (actionId: string, newStatus: Action['status']) => void;\r\n}\r\n\r\nconst COLUMNS: { id: Action['status']; label: string; color: string; dotColor: string }[] = [\r\n  { id: 'pending', label: 'To Do', color: 'border-slate-500/30', dotColor: 'bg-slate-400' },\r\n  { id: 'in_progress', label: 'In Progress', color: 'border-blue-500/30', dotColor: 'bg-blue-400' },\r\n  { id: 'overdue', label: 'Overdue', color: 'border-red-500/30', dotColor: 'bg-red-400' },\r\n  { id: 'completed', label: 'Done', color: 'border-green-500/30', dotColor: 'bg-green-400' },\r\n];\r\n\r\nexport default function KanbanBoard({ actions, onStatusChange }: KanbanBoardProps) {\r\n  const [dragId, setDragId] = useState<string | null>(null);\r\n  const [dragOverCol, setDragOverCol] = useState<string | null>(null);\r\n\r\n  const handleDragStart = useCallback((e: React.DragEvent, actionId: string) => {\r\n    setDragId(actionId);\r\n    e.dataTransfer.effectAllowed = 'move';\r\n    e.dataTransfer.setData('text/plain', actionId);\r\n    (e.currentTarget as HTMLElement).style.opacity = '0.4';\r\n  }, []);\r\n\r\n  const handleDragEnd = useCallback((e: React.DragEvent) => {\r\n    (e.currentTarget as HTMLElement).style.opacity = '1';\r\n    setDragId(null);\r\n    setDragOverCol(null);\r\n  }, []);\r\n\r\n  const handleDragOver = useCallback((e: React.DragEvent, colId: string) => {\r\n    e.preventDefault();\r\n    e.dataTransfer.dropEffect = 'move';\r\n    setDragOverCol(colId);\r\n  }, []);\r\n\r\n  const handleDragLeave = useCallback(() => {\r\n    setDragOverCol(null);\r\n  }, []);\r\n\r\n  const handleDrop = useCallback((e: React.DragEvent, colId: string) => {\r\n    e.preventDefault();\r\n    const actionId = e.dataTransfer.getData('text/plain');\r\n    if (actionId) {\r\n      const action = actions.find(a => a.id === actionId);\r\n      if (action && action.status !== colId) {\r\n        onStatusChange(actionId, colId as Action['status']);\r\n      }\r\n    }\r\n    setDragId(null);\r\n    setDragOverCol(null);\r\n  }, [actions, onStatusChange]);\r\n\r\n  const priorityDot = (p: string) =>\r\n    p === 'high' ? 'bg-red-400' : p === 'medium' ? 'bg-yellow-400' : 'bg-slate-400';\r\n\r\n  return (\r\n    <div>\r\n      <span className=\"text-[10px] font-bold text-blue-400 uppercase tracking-[0.1em] block mb-3\">Kanban Board</span>\r\n      <div className=\"grid grid-cols-4 gap-3\">\r\n        {COLUMNS.map(col => {\r\n          const colActions = actions.filter(a => a.status === col.id);\r\n          const isOver = dragOverCol === col.id;\r\n          return (\r\n            <div\r\n              key={col.id}\r\n              onDragOver={e => handleDragOver(e, col.id)}\r\n              onDragLeave={handleDragLeave}\r\n              onDrop={e => handleDrop(e, col.id)}\r\n              className={cn(\r\n                'rounded-xl border bg-white/[0.02] min-h-[200px] transition-colors',\r\n                col.color,\r\n                isOver && 'border-blue-500/50 bg-blue-500/5'\r\n              )}\r\n            >\r\n              <div className=\"px-3 py-2 border-b border-[var(--gm-border-primary)] flex items-center gap-2\">\r\n                <span className={cn('w-2 h-2 rounded-full', col.dotColor)} />\r\n                <span className=\"text-xs font-medium text-[var(--gm-text-primary)]\">{col.label}</span>\r\n                <span className=\"text-[10px] text-[var(--gm-text-tertiary)] ml-auto\">{colActions.length}</span>\r\n              </div>\r\n              <div className=\"p-2 space-y-1.5\">\r\n                {colActions.map(action => (\r\n                  <div\r\n                    key={action.id}\r\n                    draggable\r\n                    onDragStart={e => handleDragStart(e, action.id)}\r\n                    onDragEnd={handleDragEnd}\r\n                    className={cn(\r\n                      'bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-lg p-2.5 cursor-grab active:cursor-grabbing hover:border-blue-500/30 transition-colors group',\r\n                      dragId === action.id && 'opacity-40'\r\n                    )}\r\n                  >\r\n                    <div className=\"flex items-start gap-1.5\">\r\n                      <GripVertical className=\"w-3 h-3 text-[var(--gm-text-tertiary)] opacity-0 group-hover:opacity-100 transition-opacity shrink-0 mt-0.5\" />\r\n                      <div className=\"min-w-0 flex-1\">\r\n                        <p className=\"text-[11px] font-medium text-[var(--gm-text-primary)] line-clamp-2 leading-tight\">\r\n                          {action.task || action.title || '(untitled)'}\r\n                        </p>\r\n                        <div className=\"flex items-center gap-1.5 mt-1.5\">\r\n                          {action.priority && (\r\n                            <span className={cn('w-1.5 h-1.5 rounded-full shrink-0', priorityDot(action.priority))} title={action.priority} />\r\n                          )}\r\n                          {action.task_points != null && (\r\n                            <span className=\"text-[8px] px-1 py-0.5 rounded bg-blue-500/10 text-blue-400 tabular-nums\">{action.task_points}</span>\r\n                          )}\r\n                          {action.owner && <OwnerBadge name={action.owner} size=\"sm\" />}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n                {colActions.length === 0 && (\r\n                  <p className=\"text-[10px] text-[var(--gm-text-tertiary)] text-center py-6\">\r\n                    {isOver ? 'Drop here' : 'No tasks'}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useMemo } from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport type { Action } from '@/types/godmode';\r\n\r\ninterface GanttChartProps {\r\n  actions: Action[];\r\n  sprintStart: string;\r\n  sprintEnd: string;\r\n}\r\n\r\nconst statusColor = (s: string) =>\r\n  s === 'completed' ? '#22c55e' :\r\n  s === 'in_progress' ? '#3b82f6' :\r\n  s === 'overdue' ? '#ef4444' : '#64748b';\r\n\r\nexport default function GanttChart({ actions, sprintStart, sprintEnd }: GanttChartProps) {\r\n  const data = useMemo(() => {\r\n    const start = new Date(sprintStart).getTime();\r\n    const end = new Date(sprintEnd).getTime();\r\n    const range = Math.max(1, end - start);\r\n\r\n    return actions.slice(0, 20).map(a => {\r\n      const taskStart = a.created_at ? new Date(a.created_at).getTime() : start;\r\n      const taskEnd = a.deadline ? new Date(a.deadline).getTime() : end;\r\n      const left = Math.max(0, Math.min(100, ((taskStart - start) / range) * 100));\r\n      const width = Math.max(2, Math.min(100 - left, ((taskEnd - taskStart) / range) * 100));\r\n      const hasDeps = (a.depends_on?.length ?? 0) > 0;\r\n      return { action: a, left, width, hasDeps };\r\n    });\r\n  }, [actions, sprintStart, sprintEnd]);\r\n\r\n  const today = useMemo(() => {\r\n    const start = new Date(sprintStart).getTime();\r\n    const end = new Date(sprintEnd).getTime();\r\n    const now = Date.now();\r\n    return Math.max(0, Math.min(100, ((now - start) / (end - start)) * 100));\r\n  }, [sprintStart, sprintEnd]);\r\n\r\n  const dateLabels = useMemo(() => {\r\n    const start = new Date(sprintStart);\r\n    const end = new Date(sprintEnd);\r\n    const range = (end.getTime() - start.getTime()) / 86400000;\r\n    const step = Math.max(1, Math.ceil(range / 6));\r\n    const labels: { label: string; pct: number }[] = [];\r\n    for (let i = 0; i <= range; i += step) {\r\n      const d = new Date(start.getTime() + i * 86400000);\r\n      labels.push({ label: `${d.getMonth() + 1}/${d.getDate()}`, pct: (i / range) * 100 });\r\n    }\r\n    return labels;\r\n  }, [sprintStart, sprintEnd]);\r\n\r\n  if (data.length === 0) {\r\n    return <div className=\"text-xs text-[var(--gm-text-tertiary)] text-center py-4\">No tasks to display</div>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <span className=\"text-[10px] font-bold text-blue-400 uppercase tracking-[0.1em] block mb-3\">Timeline</span>\r\n\r\n      {/* Date axis */}\r\n      <div className=\"relative h-5 mb-1\">\r\n        {dateLabels.map((d, i) => (\r\n          <span key={i} className=\"absolute text-[8px] text-[var(--gm-text-tertiary)] -translate-x-1/2\" style={{ left: `${d.pct}%` }}>\r\n            {d.label}\r\n          </span>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Chart */}\r\n      <div className=\"relative\">\r\n        {/* Today marker */}\r\n        <div className=\"absolute top-0 bottom-0 w-px bg-yellow-500/30 z-10\" style={{ left: `${today}%` }} />\r\n\r\n        {/* Rows */}\r\n        <div className=\"space-y-1\">\r\n          {data.map(({ action, left, width, hasDeps }) => (\r\n            <div key={action.id} className=\"flex items-center gap-2 group h-7\">\r\n              <div className=\"w-24 shrink-0 truncate text-[10px] text-[var(--gm-text-secondary)] pr-1\" title={action.task || action.title}>\r\n                {(action.task || action.title || '').slice(0, 18)}{(action.task || '').length > 18 ? '…' : ''}\r\n              </div>\r\n              <div className=\"flex-1 relative h-full\">\r\n                <div className=\"absolute inset-0 bg-white/[0.02] rounded\" />\r\n                <div\r\n                  className={cn(\r\n                    'absolute h-4 top-1.5 rounded-sm transition-all cursor-default',\r\n                    hasDeps && 'ring-1 ring-purple-500/40'\r\n                  )}\r\n                  style={{\r\n                    left: `${left}%`,\r\n                    width: `${width}%`,\r\n                    backgroundColor: statusColor(action.status),\r\n                    opacity: action.status === 'completed' ? 0.6 : 0.8,\r\n                  }}\r\n                  title={`${action.task || action.title} (${action.status})${action.owner ? ` — ${action.owner}` : ''}`}\r\n                />\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Legend */}\r\n      <div className=\"flex items-center gap-3 mt-2 justify-center\">\r\n        {[\r\n          { label: 'Pending', color: '#64748b' },\r\n          { label: 'In Progress', color: '#3b82f6' },\r\n          { label: 'Completed', color: '#22c55e' },\r\n          { label: 'Overdue', color: '#ef4444' },\r\n        ].map(l => (\r\n          <span key={l.label} className=\"flex items-center gap-1 text-[8px] text-[var(--gm-text-tertiary)]\">\r\n            <span className=\"w-2 h-2 rounded-sm\" style={{ backgroundColor: l.color }} /> {l.label}\r\n          </span>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { Plus, X, Loader2, Sparkles, ThumbsUp, ThumbsDown, ListChecks } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { useSprintRetrospective } from '../../hooks/useGodMode';\r\n\r\nconst CARD = 'rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)]';\r\nconst INPUT = 'bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-1.5 text-xs text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-tertiary)] focus:outline-none focus:ring-2 focus:ring-blue-500/40 w-full';\r\n\r\ninterface RetrospectivePanelProps {\r\n  sprintId: string;\r\n}\r\n\r\nfunction EditableList({ items, onAdd, onRemove, placeholder, color }: {\r\n  items: string[];\r\n  onAdd: (item: string) => void;\r\n  onRemove: (idx: number) => void;\r\n  placeholder: string;\r\n  color: string;\r\n}) {\r\n  const [input, setInput] = useState('');\r\n  const handleAdd = () => {\r\n    if (!input.trim()) return;\r\n    onAdd(input.trim());\r\n    setInput('');\r\n  };\r\n  return (\r\n    <div className=\"space-y-1.5\">\r\n      {items.map((item, i) => (\r\n        <div key={i} className=\"flex items-start gap-2 group\">\r\n          <span className={cn('w-1.5 h-1.5 rounded-full mt-1.5 shrink-0', color)} />\r\n          <span className=\"text-xs text-[var(--gm-text-secondary)] flex-1\">{item}</span>\r\n          <button onClick={() => onRemove(i)} className=\"text-[var(--gm-text-tertiary)] hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity\">\r\n            <X className=\"w-3 h-3\" />\r\n          </button>\r\n        </div>\r\n      ))}\r\n      <div className=\"flex gap-1.5\">\r\n        <input value={input} onChange={e => setInput(e.target.value)} onKeyDown={e => e.key === 'Enter' && handleAdd()}\r\n          className={INPUT} placeholder={placeholder} />\r\n        <button onClick={handleAdd} className=\"shrink-0 w-7 h-7 rounded-lg bg-white/5 hover:bg-white/10 flex items-center justify-center\">\r\n          <Plus className=\"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]\" />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function RetrospectivePanel({ sprintId }: RetrospectivePanelProps) {\r\n  const retroMut = useSprintRetrospective();\r\n  const [wentWell, setWentWell] = useState<string[]>([]);\r\n  const [wentWrong, setWentWrong] = useState<string[]>([]);\r\n  const [actionItems, setActionItems] = useState<string[]>([]);\r\n  const [aiSuggestions, setAiSuggestions] = useState('');\r\n\r\n  const handleGenerate = () => {\r\n    retroMut.mutate({ sprintId, went_well: wentWell, went_wrong: wentWrong, action_items: actionItems }, {\r\n      onSuccess: (d: any) => {\r\n        setAiSuggestions(d?.ai_suggestions || '');\r\n        toast.success('Retrospective generated');\r\n      },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <span className=\"text-[10px] font-bold text-blue-400 uppercase tracking-[0.1em]\">Sprint Retrospective</span>\r\n        <button onClick={handleGenerate} disabled={retroMut.isPending}\r\n          className=\"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-purple-500/10 text-purple-400 hover:bg-purple-500/20 disabled:opacity-50\">\r\n          {retroMut.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Sparkles className=\"w-3.5 h-3.5\" />}\r\n          AI Insights\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\r\n        <div className={cn(CARD, 'p-3')}>\r\n          <div className=\"flex items-center gap-1.5 mb-2\">\r\n            <ThumbsUp className=\"w-3.5 h-3.5 text-green-400\" />\r\n            <span className=\"text-xs font-medium text-green-400\">What Went Well</span>\r\n          </div>\r\n          <EditableList\r\n            items={wentWell}\r\n            onAdd={item => setWentWell(prev => [...prev, item])}\r\n            onRemove={idx => setWentWell(prev => prev.filter((_, i) => i !== idx))}\r\n            placeholder=\"Add positive...\"\r\n            color=\"bg-green-400\"\r\n          />\r\n        </div>\r\n\r\n        <div className={cn(CARD, 'p-3')}>\r\n          <div className=\"flex items-center gap-1.5 mb-2\">\r\n            <ThumbsDown className=\"w-3.5 h-3.5 text-red-400\" />\r\n            <span className=\"text-xs font-medium text-red-400\">What Needs Improvement</span>\r\n          </div>\r\n          <EditableList\r\n            items={wentWrong}\r\n            onAdd={item => setWentWrong(prev => [...prev, item])}\r\n            onRemove={idx => setWentWrong(prev => prev.filter((_, i) => i !== idx))}\r\n            placeholder=\"Add improvement...\"\r\n            color=\"bg-red-400\"\r\n          />\r\n        </div>\r\n\r\n        <div className={cn(CARD, 'p-3')}>\r\n          <div className=\"flex items-center gap-1.5 mb-2\">\r\n            <ListChecks className=\"w-3.5 h-3.5 text-blue-400\" />\r\n            <span className=\"text-xs font-medium text-blue-400\">Action Items</span>\r\n          </div>\r\n          <EditableList\r\n            items={actionItems}\r\n            onAdd={item => setActionItems(prev => [...prev, item])}\r\n            onRemove={idx => setActionItems(prev => prev.filter((_, i) => i !== idx))}\r\n            placeholder=\"Add action item...\"\r\n            color=\"bg-blue-400\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {aiSuggestions && (\r\n        <div className={cn(CARD, 'p-4')}>\r\n          <span className=\"text-[10px] font-bold text-purple-400 uppercase tracking-[0.1em]\">AI Insights</span>\r\n          <div className=\"mt-2 text-xs text-[var(--gm-text-secondary)] whitespace-pre-wrap leading-relaxed\">{aiSuggestions}</div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { Loader2, Sparkles, User, CheckCircle, ArrowRight, AlertTriangle } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { useSprintStandup } from '../../hooks/useGodMode';\r\nimport type { SprintStandup, StandupEntry } from '@/types/godmode';\r\n\r\nconst CARD = 'rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)]';\r\n\r\ninterface StandupPanelProps {\r\n  sprintId: string;\r\n}\r\n\r\nexport default function StandupPanel({ sprintId }: StandupPanelProps) {\r\n  const standupMut = useSprintStandup();\r\n  const [standup, setStandup] = useState<SprintStandup | null>(null);\r\n\r\n  const handleGenerate = () => {\r\n    standupMut.mutate(sprintId, {\r\n      onSuccess: (d: any) => {\r\n        setStandup(d as SprintStandup);\r\n        toast.success('Standup generated');\r\n      },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <span className=\"text-[10px] font-bold text-blue-400 uppercase tracking-[0.1em]\">Daily Standup</span>\r\n        <button onClick={handleGenerate} disabled={standupMut.isPending}\r\n          className=\"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-purple-500/10 text-purple-400 hover:bg-purple-500/20 disabled:opacity-50\">\r\n          {standupMut.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Sparkles className=\"w-3.5 h-3.5\" />}\r\n          Generate Standup\r\n        </button>\r\n      </div>\r\n\r\n      {standup && (\r\n        <>\r\n          <p className=\"text-[10px] text-[var(--gm-text-tertiary)]\">{standup.date}</p>\r\n\r\n          {standup.ai_summary && (\r\n            <div className={cn(CARD, 'p-3')}>\r\n              <span className=\"text-[10px] font-bold text-purple-400 uppercase tracking-[0.1em]\">AI Summary</span>\r\n              <p className=\"mt-1 text-xs text-[var(--gm-text-secondary)] whitespace-pre-wrap\">{standup.ai_summary}</p>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"space-y-2\">\r\n            {(standup.entries || []).map((entry, i) => (\r\n              <div key={i} className={cn(CARD, 'p-3')}>\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <User className=\"w-3.5 h-3.5 text-blue-400\" />\r\n                  <span className=\"text-xs font-medium text-[var(--gm-text-primary)]\">{entry.person}</span>\r\n                </div>\r\n                <div className=\"space-y-1.5 pl-5\">\r\n                  {entry.done.length > 0 && (\r\n                    <div>\r\n                      <span className=\"text-[9px] text-green-400 uppercase tracking-wider font-medium\">Done</span>\r\n                      {entry.done.map((d, j) => (\r\n                        <div key={j} className=\"flex items-start gap-1.5 mt-0.5\">\r\n                          <CheckCircle className=\"w-3 h-3 text-green-400 shrink-0 mt-0.5\" />\r\n                          <span className=\"text-[11px] text-[var(--gm-text-secondary)]\">{d}</span>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                  {entry.doing.length > 0 && (\r\n                    <div>\r\n                      <span className=\"text-[9px] text-blue-400 uppercase tracking-wider font-medium\">Doing</span>\r\n                      {entry.doing.map((d, j) => (\r\n                        <div key={j} className=\"flex items-start gap-1.5 mt-0.5\">\r\n                          <ArrowRight className=\"w-3 h-3 text-blue-400 shrink-0 mt-0.5\" />\r\n                          <span className=\"text-[11px] text-[var(--gm-text-secondary)]\">{d}</span>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                  {entry.blockers.length > 0 && (\r\n                    <div>\r\n                      <span className=\"text-[9px] text-red-400 uppercase tracking-wider font-medium\">Blockers</span>\r\n                      {entry.blockers.map((d, j) => (\r\n                        <div key={j} className=\"flex items-start gap-1.5 mt-0.5\">\r\n                          <AlertTriangle className=\"w-3 h-3 text-red-400 shrink-0 mt-0.5\" />\r\n                          <span className=\"text-[11px] text-[var(--gm-text-secondary)]\">{d}</span>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                  {entry.done.length === 0 && entry.doing.length === 0 && entry.blockers.length === 0 && (\r\n                    <span className=\"text-[10px] text-[var(--gm-text-tertiary)]\">No updates</span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {!standup && !standupMut.isPending && (\r\n        <p className=\"text-xs text-[var(--gm-text-tertiary)] text-center py-4\">Click \"Generate Standup\" to get today's team summary</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useMemo } from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { Loader2, Sparkles, Plus, X, Users } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { useSprintCapacity } from '../../hooks/useGodMode';\r\nimport type { SprintCapacity, Action } from '@/types/godmode';\r\n\r\nconst CARD = 'rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)]';\r\nconst INPUT = 'bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-2.5 py-1.5 text-xs text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-blue-500/40';\r\n\r\ninterface CapacityPanelProps {\r\n  sprintId: string;\r\n  actions: Action[];\r\n}\r\n\r\nexport default function CapacityPanel({ sprintId, actions }: CapacityPanelProps) {\r\n  const capacityMut = useSprintCapacity();\r\n  const [capacities, setCapacities] = useState<Record<string, number>>({});\r\n  const [result, setResult] = useState<{ capacity: SprintCapacity[]; ai_recommendation: string | null } | null>(null);\r\n  const [newPerson, setNewPerson] = useState('');\r\n  const [newPoints, setNewPoints] = useState('');\r\n\r\n  const owners = useMemo(() => {\r\n    const set = new Set<string>();\r\n    actions.forEach(a => { if (a.owner?.trim()) set.add(a.owner.trim()); });\r\n    Object.keys(capacities).forEach(k => set.add(k));\r\n    return Array.from(set).sort();\r\n  }, [actions, capacities]);\r\n\r\n  const addPerson = () => {\r\n    if (!newPerson.trim() || !newPoints) return;\r\n    setCapacities(prev => ({ ...prev, [newPerson.trim()]: Number(newPoints) || 0 }));\r\n    setNewPerson('');\r\n    setNewPoints('');\r\n  };\r\n\r\n  const handleAnalyze = () => {\r\n    if (Object.keys(capacities).length === 0) {\r\n      toast.error('Set capacity for at least one person');\r\n      return;\r\n    }\r\n    capacityMut.mutate({ sprintId, capacities }, {\r\n      onSuccess: (d: any) => {\r\n        setResult(d);\r\n        toast.success('Capacity analysis complete');\r\n      },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <span className=\"text-[10px] font-bold text-blue-400 uppercase tracking-[0.1em]\">Capacity Planning</span>\r\n        <button onClick={handleAnalyze} disabled={capacityMut.isPending}\r\n          className=\"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-purple-500/10 text-purple-400 hover:bg-purple-500/20 disabled:opacity-50\">\r\n          {capacityMut.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Sparkles className=\"w-3.5 h-3.5\" />}\r\n          Analyze Capacity\r\n        </button>\r\n      </div>\r\n\r\n      {/* Set capacities */}\r\n      <div className={cn(CARD, 'p-3 space-y-2')}>\r\n        <span className=\"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider\">Team Capacity (points per sprint)</span>\r\n        {owners.map(person => (\r\n          <div key={person} className=\"flex items-center gap-2\">\r\n            <Users className=\"w-3 h-3 text-[var(--gm-text-tertiary)]\" />\r\n            <span className=\"text-xs text-[var(--gm-text-primary)] flex-1 truncate\">{person}</span>\r\n            <input\r\n              type=\"number\" min=\"0\"\r\n              value={capacities[person] ?? ''}\r\n              onChange={e => setCapacities(prev => ({ ...prev, [person]: Number(e.target.value) || 0 }))}\r\n              placeholder=\"pts\"\r\n              className={cn(INPUT, 'w-16 text-center')}\r\n            />\r\n            {capacities[person] !== undefined && (\r\n              <button onClick={() => setCapacities(prev => { const n = { ...prev }; delete n[person]; return n; })}\r\n                className=\"text-[var(--gm-text-tertiary)] hover:text-red-400\">\r\n                <X className=\"w-3 h-3\" />\r\n              </button>\r\n            )}\r\n          </div>\r\n        ))}\r\n        <div className=\"flex items-center gap-2 pt-1\">\r\n          <input value={newPerson} onChange={e => setNewPerson(e.target.value)} placeholder=\"Name\" className={cn(INPUT, 'flex-1')} />\r\n          <input type=\"number\" min=\"0\" value={newPoints} onChange={e => setNewPoints(e.target.value)} placeholder=\"pts\"\r\n            className={cn(INPUT, 'w-16 text-center')} onKeyDown={e => e.key === 'Enter' && addPerson()} />\r\n          <button onClick={addPerson} className=\"w-7 h-7 rounded-lg bg-white/5 hover:bg-white/10 flex items-center justify-center\">\r\n            <Plus className=\"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Results */}\r\n      {result && (\r\n        <>\r\n          <div className=\"space-y-2\">\r\n            {result.capacity.map(c => {\r\n              const pct = c.utilization;\r\n              const barColor = c.over_allocated ? '#ef4444' : pct > 80 ? '#f59e0b' : '#22c55e';\r\n              const barWidth = Math.min(100, pct);\r\n              return (\r\n                <div key={c.person} className={cn(CARD, 'p-3')}>\r\n                  <div className=\"flex items-center justify-between mb-1\">\r\n                    <span className=\"text-xs font-medium text-[var(--gm-text-primary)]\">{c.person}</span>\r\n                    <span className=\"text-[10px] tabular-nums\" style={{ color: barColor }}>\r\n                      {c.assigned_points}/{c.available_points} pts ({pct}%)\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"h-2 rounded-full bg-white/5 overflow-hidden\">\r\n                    <div className=\"h-full rounded-full transition-all\" style={{ width: `${barWidth}%`, backgroundColor: barColor }} />\r\n                  </div>\r\n                  {c.over_allocated && (\r\n                    <p className=\"text-[9px] text-red-400 mt-1\">Over-allocated by {c.assigned_points - c.available_points} points</p>\r\n                  )}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          {result.ai_recommendation && (\r\n            <div className={cn(CARD, 'p-4')}>\r\n              <span className=\"text-[10px] font-bold text-purple-400 uppercase tracking-[0.1em]\">AI Recommendation</span>\r\n              <div className=\"mt-2 text-xs text-[var(--gm-text-secondary)] whitespace-pre-wrap leading-relaxed\">{result.ai_recommendation}</div>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { Loader2, Sparkles } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { useSprintEstimatePoints } from '../../hooks/useGodMode';\r\n\r\ninterface EstimatePointsButtonProps {\r\n  sprintId: string;\r\n  taskDescription: string;\r\n  onEstimate?: (points: number) => void;\r\n  className?: string;\r\n}\r\n\r\nexport default function EstimatePointsButton({ sprintId, taskDescription, onEstimate, className }: EstimatePointsButtonProps) {\r\n  const estimateMut = useSprintEstimatePoints();\r\n  const [result, setResult] = useState<{ points: number; confidence: string; reasoning: string } | null>(null);\r\n\r\n  const handleEstimate = () => {\r\n    if (!taskDescription.trim()) { toast.error('Task description needed'); return; }\r\n    estimateMut.mutate({ sprintId, task: taskDescription }, {\r\n      onSuccess: (d: any) => {\r\n        setResult(d);\r\n        onEstimate?.(d.points);\r\n        toast.success(`Estimated: ${d.points} points (${d.confidence} confidence)`);\r\n      },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const confColor = result?.confidence === 'high' ? 'text-green-400' : result?.confidence === 'medium' ? 'text-yellow-400' : 'text-orange-400';\r\n\r\n  return (\r\n    <div className={cn('inline-flex items-center gap-2', className)}>\r\n      <button onClick={handleEstimate} disabled={estimateMut.isPending}\r\n        className=\"inline-flex items-center gap-1 px-2 py-1 text-[10px] font-medium rounded-md bg-purple-500/10 text-purple-400 hover:bg-purple-500/20 disabled:opacity-50 transition-colors\"\r\n        title=\"AI estimate story points\">\r\n        {estimateMut.isPending ? <Loader2 className=\"w-3 h-3 animate-spin\" /> : <Sparkles className=\"w-3 h-3\" />}\r\n        Estimate\r\n      </button>\r\n      {result && (\r\n        <div className=\"flex items-center gap-1.5\">\r\n          <span className=\"text-xs font-bold text-blue-400 tabular-nums\">{result.points} pts</span>\r\n          <span className={cn('text-[9px]', confColor)}>({result.confidence})</span>\r\n          {result.reasoning && (\r\n            <span className=\"text-[9px] text-[var(--gm-text-tertiary)] max-w-[200px] truncate\" title={result.reasoning}>\r\n              {result.reasoning}\r\n            </span>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from 'react';\r\nimport { X, Loader2, FileText, Presentation, Zap, Building2, CheckCircle, Circle, Download } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { toast } from 'sonner';\r\nimport { cn } from '@/lib/utils';\r\nimport type { Sprint, SprintReport, Action } from '@/types/godmode';\r\nimport {\r\n  useSprintReport,\r\n  useSprintReportAnalyze,\r\n  useSprintBusinessReport,\r\n  useSprintReportDocument,\r\n  useSprintReportPresentation,\r\n} from '../../hooks/useGodMode';\r\nimport BreakdownChart from './BreakdownChart';\r\n\r\ninterface SprintReportModalProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  sprint: Sprint;\r\n}\r\n\r\nconst CARD = 'rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)]';\r\nconst BTN = 'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg disabled:opacity-50 transition-colors';\r\n\r\nconst STYLE_OPTIONS = [\r\n  { key: 'sprint_report_style_corporate_classic', label: 'Corporate Classic' },\r\n  { key: 'sprint_report_style_modern_minimal', label: 'Modern Minimal' },\r\n  { key: 'sprint_report_style_startup_tech', label: 'Startup Tech' },\r\n  { key: 'sprint_report_style_consultancy', label: 'Consultancy' },\r\n];\r\n\r\nfunction downloadHtml(html: string, filename: string) {\r\n  const blob = new Blob([html], { type: 'text/html' });\r\n  const url = URL.createObjectURL(blob);\r\n  const a = document.createElement('a');\r\n  a.href = url;\r\n  a.download = filename;\r\n  a.click();\r\n  URL.revokeObjectURL(url);\r\n}\r\n\r\nexport default function SprintReportModal({ open, onClose, sprint }: SprintReportModalProps) {\r\n  const { data: reportData, isLoading: reportLoading } = useSprintReport(open ? sprint.id : null);\r\n  const analyzeMut = useSprintReportAnalyze();\r\n  const businessMut = useSprintBusinessReport();\r\n  const docMut = useSprintReportDocument();\r\n  const presMut = useSprintReportPresentation();\r\n\r\n  const [analysisText, setAnalysisText] = useState('');\r\n  const [businessText, setBusinessText] = useState('');\r\n  const [includeAnalysis, setIncludeAnalysis] = useState(true);\r\n  const [includeBusiness, setIncludeBusiness] = useState(true);\r\n  const [selectedStyle, setSelectedStyle] = useState(STYLE_OPTIONS[0].key);\r\n\r\n  const report = reportData as SprintReport | undefined;\r\n  const actions = (report?.actions ?? []) as Action[];\r\n  const breakdown = report?.breakdown ?? { by_status: {}, by_assignee: {} };\r\n  const totalTasks = report?.total_tasks ?? actions.length;\r\n  const completedTasks = report?.completed_tasks ?? actions.filter(a => a.status === 'completed').length;\r\n  const totalPoints = report?.total_task_points ?? 0;\r\n  const completedPoints = report?.completed_task_points ?? 0;\r\n  const completionPct = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;\r\n\r\n  const handleAnalyze = () => {\r\n    analyzeMut.mutate(sprint.id, {\r\n      onSuccess: (d: any) => {\r\n        setAnalysisText(d?.ai_analysis || d?.analysis || '');\r\n        toast.success('Analysis complete');\r\n      },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const handleBusiness = () => {\r\n    businessMut.mutate(sprint.id, {\r\n      onSuccess: (d: any) => {\r\n        setBusinessText(d?.business_report || d?.summary || '');\r\n        toast.success('Business report ready');\r\n      },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const handleExportDoc = () => {\r\n    docMut.mutate({ sprintId: sprint.id, style: selectedStyle, include_analysis: includeAnalysis, include_business: includeBusiness }, {\r\n      onSuccess: (d: any) => {\r\n        if (d?.html) {\r\n          downloadHtml(d.html, `sprint-${sprint.name || sprint.id}-report.html`);\r\n          toast.success('Document downloaded');\r\n        }\r\n      },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const handleExportPres = () => {\r\n    presMut.mutate({ sprintId: sprint.id, include_analysis: includeAnalysis, include_business: includeBusiness }, {\r\n      onSuccess: (d: any) => {\r\n        if (d?.html) {\r\n          downloadHtml(d.html, `sprint-${sprint.name || sprint.id}-presentation.html`);\r\n          toast.success('Presentation downloaded');\r\n        }\r\n      },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {open && (\r\n        <>\r\n          <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm z-50\" onClick={onClose} />\r\n          <motion.div\r\n            initial={{ opacity: 0, scale: 0.95 }}\r\n            animate={{ opacity: 1, scale: 1 }}\r\n            exit={{ opacity: 0, scale: 0.95 }}\r\n            className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\r\n          >\r\n            <div\r\n              className=\"bg-[var(--gm-bg-elevated)] border border-[var(--gm-border-primary)] rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col\"\r\n              style={{ backgroundColor: 'var(--gm-bg-elevated)', color: 'var(--gm-text-primary)' }}\r\n              onClick={e => e.stopPropagation()}\r\n            >\r\n              {/* Header */}\r\n              <div className=\"flex items-center justify-between p-5 border-b border-[var(--gm-border-primary)] shrink-0\"\r\n                style={{ background: 'linear-gradient(to right, rgba(37,99,235,0.18), rgba(37,99,235,0.05))' }}>\r\n                <div>\r\n                  <h2 className=\"text-lg font-semibold text-white\">Sprint Report</h2>\r\n                  <p className=\"text-xs text-slate-400\">{sprint.name}</p>\r\n                </div>\r\n                <button onClick={onClose} className=\"w-8 h-8 rounded-lg hover:bg-white/10 flex items-center justify-center\">\r\n                  <X className=\"w-4 h-4 text-slate-400\" />\r\n                </button>\r\n              </div>\r\n\r\n              {/* Content */}\r\n              <div className=\"flex-1 overflow-y-auto p-5 space-y-5\">\r\n                {reportLoading ? (\r\n                  <div className=\"flex items-center justify-center h-32\">\r\n                    <Loader2 className=\"w-6 h-6 animate-spin text-blue-400\" />\r\n                  </div>\r\n                ) : (\r\n                  <>\r\n                    {/* Stats Cards */}\r\n                    <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n                      {[\r\n                        { label: 'Total Tasks', value: totalTasks, sub: '' },\r\n                        { label: 'Completed', value: completedTasks, sub: `${completionPct}%` },\r\n                        { label: 'Total Points', value: totalPoints, sub: '' },\r\n                        { label: 'Done Points', value: completedPoints, sub: totalPoints > 0 ? `${Math.round((completedPoints / totalPoints) * 100)}%` : '' },\r\n                      ].map(s => (\r\n                        <div key={s.label} className={cn(CARD, 'p-3 text-center')}>\r\n                          <p className=\"text-2xl font-bold text-[var(--gm-text-primary)]\">{s.value}</p>\r\n                          <p className=\"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider\">{s.label}</p>\r\n                          {s.sub && <p className=\"text-xs text-blue-400 mt-0.5\">{s.sub}</p>}\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n\r\n                    {/* Breakdown Charts */}\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                      <div className={cn(CARD, 'p-4')}>\r\n                        <BreakdownChart title=\"By Status\" data={breakdown.by_status} />\r\n                      </div>\r\n                      <div className={cn(CARD, 'p-4')}>\r\n                        <BreakdownChart title=\"By Assignee\" data={breakdown.by_assignee} />\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Task List */}\r\n                    {actions.length > 0 && (\r\n                      <div className={cn(CARD, 'p-4')}>\r\n                        <span className=\"text-[10px] font-bold text-[var(--gm-accent-primary)] uppercase tracking-[0.1em]\">\r\n                          Tasks ({actions.length})\r\n                        </span>\r\n                        <div className=\"mt-2 space-y-1 max-h-48 overflow-y-auto\">\r\n                          {actions.map(a => {\r\n                            const done = a.status === 'completed';\r\n                            return (\r\n                              <div key={a.id} className=\"flex items-center gap-2 py-1 px-2 rounded hover:bg-white/5\">\r\n                                {done\r\n                                  ? <CheckCircle className=\"w-3.5 h-3.5 text-green-400 shrink-0\" />\r\n                                  : <Circle className=\"w-3.5 h-3.5 text-slate-500 shrink-0\" />}\r\n                                <span className={cn('text-xs flex-1 truncate', done ? 'line-through text-slate-500' : 'text-[var(--gm-text-primary)]')}>\r\n                                  {a.task || a.title || '(untitled)'}\r\n                                </span>\r\n                                {a.owner && <span className=\"text-[10px] text-[var(--gm-text-tertiary)] truncate max-w-[100px]\">{a.owner}</span>}\r\n                                <span className=\"text-[9px] text-[var(--gm-text-tertiary)] capitalize shrink-0\">{a.status}</span>\r\n                              </div>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* AI Actions */}\r\n                    <div className=\"flex flex-wrap gap-2\">\r\n                      <button onClick={handleAnalyze} disabled={analyzeMut.isPending} className={cn(BTN, 'bg-purple-500/10 text-purple-400 hover:bg-purple-500/20')}>\r\n                        {analyzeMut.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Zap className=\"w-3.5 h-3.5\" />}\r\n                        AI Analysis\r\n                      </button>\r\n                      <button onClick={handleBusiness} disabled={businessMut.isPending} className={cn(BTN, 'bg-emerald-500/10 text-emerald-400 hover:bg-emerald-500/20')}>\r\n                        {businessMut.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Building2 className=\"w-3.5 h-3.5\" />}\r\n                        Business Report\r\n                      </button>\r\n                    </div>\r\n\r\n                    {/* AI Analysis Result */}\r\n                    {analysisText && (\r\n                      <div className={cn(CARD, 'p-4')}>\r\n                        <span className=\"text-[10px] font-bold text-purple-400 uppercase tracking-[0.1em]\">AI Analysis</span>\r\n                        <div className=\"mt-2 text-xs text-[var(--gm-text-secondary)] whitespace-pre-wrap leading-relaxed\">\r\n                          {analysisText}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Business Report Result */}\r\n                    {businessText && (\r\n                      <div className={cn(CARD, 'p-4')}>\r\n                        <span className=\"text-[10px] font-bold text-emerald-400 uppercase tracking-[0.1em]\">Business Report</span>\r\n                        <div className=\"mt-2 text-xs text-[var(--gm-text-secondary)] whitespace-pre-wrap leading-relaxed\">\r\n                          {businessText}\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Export Section */}\r\n                    <div className={cn(CARD, 'p-4 space-y-3')}>\r\n                      <span className=\"text-[10px] font-bold text-[var(--gm-accent-primary)] uppercase tracking-[0.1em]\">Export</span>\r\n\r\n                      <div className=\"flex flex-wrap gap-3\">\r\n                        <label className=\"flex items-center gap-2 text-xs text-[var(--gm-text-secondary)] cursor-pointer\">\r\n                          <input type=\"checkbox\" checked={includeAnalysis} onChange={e => setIncludeAnalysis(e.target.checked)} className=\"rounded border-[var(--gm-border-primary)]\" />\r\n                          Include AI Analysis\r\n                        </label>\r\n                        <label className=\"flex items-center gap-2 text-xs text-[var(--gm-text-secondary)] cursor-pointer\">\r\n                          <input type=\"checkbox\" checked={includeBusiness} onChange={e => setIncludeBusiness(e.target.checked)} className=\"rounded border-[var(--gm-border-primary)]\" />\r\n                          Include Business Report\r\n                        </label>\r\n                      </div>\r\n\r\n                      <div>\r\n                        <label className=\"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider block mb-1\">Document Style</label>\r\n                        <div className=\"flex flex-wrap gap-1.5\">\r\n                          {STYLE_OPTIONS.map(opt => (\r\n                            <button\r\n                              key={opt.key}\r\n                              onClick={() => setSelectedStyle(opt.key)}\r\n                              className={cn(\r\n                                'px-2.5 py-1 rounded-md text-[10px] font-medium border transition-colors',\r\n                                selectedStyle === opt.key\r\n                                  ? 'bg-blue-600/20 text-blue-400 border-blue-500/30'\r\n                                  : 'bg-white/5 text-[var(--gm-text-tertiary)] border-[var(--gm-border-primary)] hover:text-[var(--gm-text-primary)]'\r\n                              )}\r\n                            >\r\n                              {opt.label}\r\n                            </button>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"flex gap-2 pt-1\">\r\n                        <button onClick={handleExportDoc} disabled={docMut.isPending} className={cn(BTN, 'bg-blue-600 text-white hover:bg-blue-700')}>\r\n                          {docMut.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <FileText className=\"w-3.5 h-3.5\" />}\r\n                          Download A4 Document\r\n                        </button>\r\n                        <button onClick={handleExportPres} disabled={presMut.isPending} className={cn(BTN, 'bg-orange-500/10 text-orange-400 hover:bg-orange-500/20')}>\r\n                          {presMut.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Presentation className=\"w-3.5 h-3.5\" />}\r\n                          Download Presentation\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        </>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n}\r\n","import { useState, useMemo, useCallback } from 'react';\r\nimport { useQueryClient } from '@tanstack/react-query';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n  Plus, Loader2, Calendar, Zap, FileBarChart, ChevronRight,\r\n  ArrowLeft, CheckCircle, Circle, Clock, Target, Trash2,\r\n  Edit3, Play, Square, Sparkles, AlertTriangle, X,\r\n  Copy, LayoutGrid, GanttChartSquare, Activity, Users, MessageSquare, BarChart3,\r\n  PlusCircle, Unlink,\r\n} from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { cn } from '../lib/utils';\r\nimport { ErrorState } from '../components/shared/ErrorState';\r\nimport OwnerBadge from '../components/sot/OwnerBadge';\r\nimport BreakdownChart from '../components/sprints/BreakdownChart';\r\nimport BurndownChart from '../components/sprints/BurndownChart';\r\nimport VelocityChart from '../components/sprints/VelocityChart';\r\nimport HealthScoreWidget from '../components/sprints/HealthScoreWidget';\r\nimport KanbanBoard from '../components/sprints/KanbanBoard';\r\nimport GanttChart from '../components/sprints/GanttChart';\r\nimport RetrospectivePanel from '../components/sprints/RetrospectivePanel';\r\nimport StandupPanel from '../components/sprints/StandupPanel';\r\nimport CapacityPanel from '../components/sprints/CapacityPanel';\r\nimport EstimatePointsButton from '../components/sprints/EstimatePointsButton';\r\nimport SprintReportModal from '../components/sprints/SprintReportModal';\r\nimport type { Sprint, Action, ProposedTask, SprintReport, SprintGenerateResult } from '../types/godmode';\r\nimport {\r\n  useSprints,\r\n  useCreateSprint,\r\n  useUpdateSprint,\r\n  useDeleteSprint,\r\n  useSprintStatusTransition,\r\n  useSprint,\r\n  useSprintGenerateTasks,\r\n  useSprintApplyTasks,\r\n  useSprintReport,\r\n  useSprintReportAnalyze,\r\n  useSprintBusinessReport,\r\n  useSprintVelocity,\r\n  useSprintHealth,\r\n  useSprintClone,\r\n  useUpdateAction,\r\n  useCreateAction,\r\n} from '../hooks/useGodMode';\r\n\r\nconst CARD = 'rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-[var(--shadow-sm)]';\r\nconst BTN_PRIMARY = 'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-blue-600 text-white hover:bg-blue-700 transition-colors disabled:opacity-50';\r\nconst BTN_SECONDARY = 'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-white/5 text-[var(--gm-text-primary)] hover:bg-white/10 border border-[var(--gm-border-primary)] transition-colors disabled:opacity-50';\r\nconst BTN_DANGER = 'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-red-500/10 text-red-400 hover:bg-red-500/20 transition-colors disabled:opacity-50';\r\nconst INPUT = 'bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-tertiary)] focus:outline-none focus:ring-2 focus:ring-blue-500/40';\r\nconst SECTION_TITLE = 'text-[10px] font-bold text-blue-400 uppercase tracking-[0.1em]';\r\n\r\nconst statusConfig: Record<string, { color: string; bg: string; border: string; icon: typeof Circle }> = {\r\n  planning: { color: 'text-slate-400', bg: 'bg-slate-500/10', border: 'border-slate-500/30', icon: Circle },\r\n  active: { color: 'text-green-400', bg: 'bg-green-500/10', border: 'border-green-500/30', icon: Clock },\r\n  completed: { color: 'text-blue-400', bg: 'bg-blue-500/10', border: 'border-blue-500/30', icon: CheckCircle },\r\n};\r\n\r\nconst taskStatusDot = (s: string) =>\r\n  s === 'completed' ? 'bg-green-400' :\r\n  s === 'in_progress' ? 'bg-blue-400' :\r\n  s === 'overdue' ? 'bg-red-400' : 'bg-slate-500';\r\n\r\nfunction normalizeSprint(raw: any): Sprint {\r\n  return {\r\n    id: raw.id,\r\n    name: raw.name || '',\r\n    start_date: raw.start_date || raw.startDate || '',\r\n    end_date: raw.end_date || raw.endDate || '',\r\n    context: raw.context || '',\r\n    goals: raw.goals || [],\r\n    status: raw.status || 'planning',\r\n    analysis_start_date: raw.analysis_start_date || '',\r\n    analysis_end_date: raw.analysis_end_date || '',\r\n    project_id: raw.project_id || '',\r\n    created_at: raw.created_at || '',\r\n    updated_at: raw.updated_at || '',\r\n  };\r\n}\r\n\r\nfunction CreateSprintForm({ onCreated }: { onCreated: () => void }) {\r\n  const createSprint = useCreateSprint();\r\n  const [form, setForm] = useState({ name: '', start_date: '', end_date: '', context: '', goals: '', analysis_start_date: '', analysis_end_date: '' });\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!form.name || !form.start_date || !form.end_date) {\r\n      toast.error('Name, start date and end date are required');\r\n      return;\r\n    }\r\n    createSprint.mutate({\r\n      name: form.name,\r\n      start_date: form.start_date,\r\n      end_date: form.end_date,\r\n      context: form.context || undefined,\r\n      goals: form.goals ? form.goals.split('\\n').filter(g => g.trim()) : undefined,\r\n      analysis_start_date: form.analysis_start_date || undefined,\r\n      analysis_end_date: form.analysis_end_date || undefined,\r\n    }, {\r\n      onSuccess: () => {\r\n        toast.success('Sprint created');\r\n        setForm({ name: '', start_date: '', end_date: '', context: '', goals: '', analysis_start_date: '', analysis_end_date: '' });\r\n        onCreated();\r\n      },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className={cn(CARD, 'p-5 space-y-4')}>\r\n      <h3 className={SECTION_TITLE}>New Sprint</h3>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n        <div>\r\n          <label className=\"block text-[10px] font-medium text-[var(--gm-text-tertiary)] mb-1 uppercase tracking-wider\">Name *</label>\r\n          <input value={form.name} onChange={e => setForm(f => ({ ...f, name: e.target.value }))} className={cn(INPUT, 'w-full')} placeholder=\"Sprint 1\" required />\r\n        </div>\r\n        <div>\r\n          <label className=\"block text-[10px] font-medium text-[var(--gm-text-tertiary)] mb-1 uppercase tracking-wider\">Start Date *</label>\r\n          <input type=\"date\" value={form.start_date} onChange={e => setForm(f => ({ ...f, start_date: e.target.value }))} className={cn(INPUT, 'w-full')} required />\r\n        </div>\r\n        <div>\r\n          <label className=\"block text-[10px] font-medium text-[var(--gm-text-tertiary)] mb-1 uppercase tracking-wider\">End Date *</label>\r\n          <input type=\"date\" value={form.end_date} onChange={e => setForm(f => ({ ...f, end_date: e.target.value }))} className={cn(INPUT, 'w-full')} required />\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-[10px] font-medium text-[var(--gm-text-tertiary)] mb-1 uppercase tracking-wider\">Context</label>\r\n        <input value={form.context} onChange={e => setForm(f => ({ ...f, context: e.target.value }))} className={cn(INPUT, 'w-full')} placeholder=\"Focus areas, constraints...\" />\r\n      </div>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        <div>\r\n          <label className=\"block text-[10px] font-medium text-[var(--gm-text-tertiary)] mb-1 uppercase tracking-wider\">Goals (one per line)</label>\r\n          <textarea value={form.goals} onChange={e => setForm(f => ({ ...f, goals: e.target.value }))} rows={3} className={cn(INPUT, 'w-full resize-none')} placeholder=\"Complete feature X&#10;Fix bug Y\" />\r\n        </div>\r\n        <div className=\"space-y-3\">\r\n          <div>\r\n            <label className=\"block text-[10px] font-medium text-[var(--gm-text-tertiary)] mb-1 uppercase tracking-wider\">Analysis Start Date</label>\r\n            <input type=\"date\" value={form.analysis_start_date} onChange={e => setForm(f => ({ ...f, analysis_start_date: e.target.value }))} className={cn(INPUT, 'w-full')} />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-[10px] font-medium text-[var(--gm-text-tertiary)] mb-1 uppercase tracking-wider\">Analysis End Date</label>\r\n            <input type=\"date\" value={form.analysis_end_date} onChange={e => setForm(f => ({ ...f, analysis_end_date: e.target.value }))} className={cn(INPUT, 'w-full')} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"flex justify-end\">\r\n        <button type=\"submit\" disabled={createSprint.isPending} className={BTN_PRIMARY}>\r\n          {createSprint.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Plus className=\"w-3.5 h-3.5\" />}\r\n          Create Sprint\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n\r\ntype DetailTab = 'overview' | 'kanban' | 'timeline' | 'burndown' | 'standup' | 'retro' | 'capacity';\r\n\r\nconst DETAIL_TABS: { id: DetailTab; label: string; icon: typeof Circle }[] = [\r\n  { id: 'overview', label: 'Overview', icon: BarChart3 },\r\n  { id: 'kanban', label: 'Kanban', icon: LayoutGrid },\r\n  { id: 'timeline', label: 'Timeline', icon: GanttChartSquare },\r\n  { id: 'burndown', label: 'Burndown', icon: Activity },\r\n  { id: 'standup', label: 'Standup', icon: MessageSquare },\r\n  { id: 'capacity', label: 'Capacity', icon: Users },\r\n  { id: 'retro', label: 'Retro', icon: Target },\r\n];\r\n\r\nfunction SprintDetail({ sprintId, onBack }: { sprintId: string; onBack: () => void }) {\r\n  const queryClient = useQueryClient();\r\n  const { data: sprintRaw, isLoading } = useSprint(sprintId);\r\n  const { data: reportRaw, isLoading: reportLoading, error: reportError } = useSprintReport(sprintId);\r\n  const { data: velocityRaw, error: velocityError } = useSprintVelocity(sprintId);\r\n  const { data: healthRaw, isLoading: healthLoading, error: healthError } = useSprintHealth(sprintId);\r\n  const generateTasks = useSprintGenerateTasks();\r\n  const applyTasks = useSprintApplyTasks();\r\n  const analyzeMut = useSprintReportAnalyze();\r\n  const businessMut = useSprintBusinessReport();\r\n  const updateSprint = useUpdateSprint();\r\n  const deleteSprint = useDeleteSprint();\r\n  const transitionStatus = useSprintStatusTransition();\r\n  const cloneSprint = useSprintClone();\r\n  const updateAction = useUpdateAction();\r\n  const createAction = useCreateAction();\r\n\r\n  const [activeTab, setActiveTab] = useState<DetailTab>('overview');\r\n  const [showAddTask, setShowAddTask] = useState(false);\r\n  const [newTask, setNewTask] = useState({ task: '', owner: '', priority: 'medium' });\r\n  const [generatedResult, setGeneratedResult] = useState<SprintGenerateResult | null>(null);\r\n  const [selectedNewTasks, setSelectedNewTasks] = useState<Set<number>>(new Set());\r\n  const [selectedExisting, setSelectedExisting] = useState<Set<string>>(new Set());\r\n  const [analysisText, setAnalysisText] = useState('');\r\n  const [businessText, setBusinessText] = useState('');\r\n  const [editing, setEditing] = useState(false);\r\n  const [editForm, setEditForm] = useState({ name: '', context: '', goals: '', start_date: '', end_date: '', analysis_start_date: '', analysis_end_date: '' });\r\n  const [reportModalOpen, setReportModalOpen] = useState(false);\r\n  const [confirmDelete, setConfirmDelete] = useState(false);\r\n\r\n  const sprint = useMemo<Sprint>(() => {\r\n    const d = (sprintRaw as any)?.sprint ?? sprintRaw;\r\n    return d ? normalizeSprint(d) : { id: sprintId, name: '', start_date: '', end_date: '', status: 'planning' as const };\r\n  }, [sprintRaw, sprintId]);\r\n\r\n  const report = reportRaw as SprintReport | undefined;\r\n  const actions = (report?.actions ?? []) as Action[];\r\n  const breakdown = report?.breakdown ?? { by_status: {}, by_assignee: {} };\r\n  const totalTasks = report?.total_tasks ?? actions.length;\r\n  const completedTasks = report?.completed_tasks ?? actions.filter(a => a.status === 'completed').length;\r\n\r\n  const groupedActions = useMemo(() => {\r\n    const groups: Record<string, Action[]> = {};\r\n    actions.forEach(a => {\r\n      const s = a.status || 'pending';\r\n      if (!groups[s]) groups[s] = [];\r\n      groups[s].push(a);\r\n    });\r\n    return groups;\r\n  }, [actions]);\r\n\r\n  const startEdit = useCallback(() => {\r\n    setEditForm({\r\n      name: sprint.name,\r\n      context: sprint.context || '',\r\n      goals: (sprint.goals || []).join('\\n'),\r\n      start_date: sprint.start_date?.slice(0, 10) || '',\r\n      end_date: sprint.end_date?.slice(0, 10) || '',\r\n      analysis_start_date: sprint.analysis_start_date?.slice(0, 10) || '',\r\n      analysis_end_date: sprint.analysis_end_date?.slice(0, 10) || '',\r\n    });\r\n    setEditing(true);\r\n  }, [sprint]);\r\n\r\n  const saveEdit = () => {\r\n    updateSprint.mutate({\r\n      id: sprint.id,\r\n      name: editForm.name,\r\n      context: editForm.context || undefined,\r\n      goals: editForm.goals ? editForm.goals.split('\\n').filter(g => g.trim()) : [],\r\n      start_date: editForm.start_date || undefined,\r\n      end_date: editForm.end_date || undefined,\r\n      analysis_start_date: editForm.analysis_start_date || undefined,\r\n      analysis_end_date: editForm.analysis_end_date || undefined,\r\n    } as any, {\r\n      onSuccess: () => { toast.success('Sprint updated'); setEditing(false); },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    deleteSprint.mutate(sprint.id, {\r\n      onSuccess: () => { toast.success('Sprint deleted'); onBack(); },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const handleTransition = (status: 'planning' | 'active' | 'completed') => {\r\n    transitionStatus.mutate({ sprintId: sprint.id, status }, {\r\n      onSuccess: () => toast.success(`Sprint marked as ${status}`),\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const handleGenerate = () => {\r\n    generateTasks.mutate(sprintId, {\r\n      onSuccess: (d: any) => {\r\n        const result: SprintGenerateResult = {\r\n          proposed_new_tasks: d?.proposed_new_tasks ?? [],\r\n          existing_action_ids: d?.existing_action_ids ?? [],\r\n          existing_details: d?.existing_details ?? [],\r\n        };\r\n        setGeneratedResult(result);\r\n        const allNew = new Set<number>();\r\n        result.proposed_new_tasks.forEach((_, i) => allNew.add(i));\r\n        setSelectedNewTasks(allNew);\r\n        const allExisting = new Set<string>(result.existing_action_ids);\r\n        setSelectedExisting(allExisting);\r\n        toast.success(`Generated ${result.proposed_new_tasks.length} new tasks, found ${result.existing_action_ids.length} existing`);\r\n      },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const handleApply = () => {\r\n    if (!generatedResult) return;\r\n    const newTasks = generatedResult.proposed_new_tasks.filter((_, i) => selectedNewTasks.has(i));\r\n    const existingIds = generatedResult.existing_action_ids.filter(id => selectedExisting.has(id));\r\n    applyTasks.mutate({ sprintId, new_tasks: newTasks, existing_action_ids: existingIds }, {\r\n      onSuccess: (d: any) => {\r\n        toast.success(`Created ${d?.created ?? 0} tasks, linked ${d?.linked ?? 0} existing`);\r\n        setGeneratedResult(null);\r\n      },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const handleAnalyze = () => {\r\n    analyzeMut.mutate(sprintId, {\r\n      onSuccess: (d: any) => { setAnalysisText(d?.ai_analysis || d?.analysis || ''); toast.success('Analysis complete'); },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const handleBusiness = () => {\r\n    businessMut.mutate(sprintId, {\r\n      onSuccess: (d: any) => { setBusinessText(d?.business_report || d?.summary || ''); toast.success('Business report ready'); },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const handleClone = () => {\r\n    cloneSprint.mutate({ sprintId: sprint.id }, {\r\n      onSuccess: (d: any) => {\r\n        toast.success(`Sprint cloned: ${d?.sprint?.name || 'Copy'}${d?.tasks_cloned ? ` with ${d.tasks_cloned} tasks` : ''}`);\r\n      },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const handleKanbanStatusChange = useCallback((actionId: string, newStatus: Action['status']) => {\r\n    updateAction.mutate({ id: actionId, status: newStatus }, {\r\n      onSuccess: () => {\r\n        queryClient.invalidateQueries({ queryKey: ['sprint', sprintId] });\r\n        queryClient.invalidateQueries({ queryKey: ['sprintReport', sprintId] });\r\n        toast.success('Task status updated');\r\n      },\r\n      onError: () => toast.error('Failed to update status'),\r\n    });\r\n  }, [updateAction, queryClient, sprintId]);\r\n\r\n  const handleAddTask = () => {\r\n    if (!newTask.task.trim()) return;\r\n    createAction.mutate({\r\n      task: newTask.task.trim(),\r\n      owner: newTask.owner.trim() || undefined,\r\n      priority: newTask.priority,\r\n      status: 'pending',\r\n      sprint_id: sprintId,\r\n    } as any, {\r\n      onSuccess: () => {\r\n        queryClient.invalidateQueries({ queryKey: ['sprint', sprintId] });\r\n        queryClient.invalidateQueries({ queryKey: ['sprintReport', sprintId] });\r\n        toast.success('Task added to sprint');\r\n        setNewTask({ task: '', owner: '', priority: 'medium' });\r\n        setShowAddTask(false);\r\n      },\r\n      onError: () => toast.error('Failed to add task'),\r\n    });\r\n  };\r\n\r\n  const handleRemoveFromSprint = useCallback((actionId: string) => {\r\n    updateAction.mutate({ id: actionId, sprint_id: null } as any, {\r\n      onSuccess: () => {\r\n        queryClient.invalidateQueries({ queryKey: ['sprint', sprintId] });\r\n        queryClient.invalidateQueries({ queryKey: ['sprintReport', sprintId] });\r\n        toast.success('Task removed from sprint');\r\n      },\r\n      onError: () => toast.error('Failed to remove task'),\r\n    });\r\n  }, [updateAction, queryClient, sprintId]);\r\n\r\n  const velocity = velocityRaw as any;\r\n  const health = healthRaw as any;\r\n\r\n  if (isLoading) {\r\n    return <div className=\"flex items-center justify-center h-32\"><Loader2 className=\"w-6 h-6 animate-spin text-blue-400\" /></div>;\r\n  }\r\n\r\n  const cfg = statusConfig[sprint.status] || statusConfig.planning;\r\n  const StatusIcon = cfg.icon;\r\n\r\n  return (\r\n    <div className=\"space-y-5\">\r\n      {/* Header */}\r\n      <div className=\"flex items-start gap-3\">\r\n        <button onClick={onBack} className=\"mt-1 w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center hover:bg-white/10 shrink-0\">\r\n          <ArrowLeft className=\"w-4 h-4 text-slate-400\" />\r\n        </button>\r\n        <div className=\"flex-1 min-w-0\">\r\n          {editing ? (\r\n            <div className=\"space-y-2\">\r\n              <input value={editForm.name} onChange={e => setEditForm(f => ({ ...f, name: e.target.value }))} className={cn(INPUT, 'w-full text-lg font-bold')} />\r\n              <input value={editForm.context} onChange={e => setEditForm(f => ({ ...f, context: e.target.value }))} className={cn(INPUT, 'w-full')} placeholder=\"Context...\" />\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                <label className=\"space-y-0.5\">\r\n                  <span className=\"text-[9px] text-[var(--gm-text-tertiary)] uppercase\">Start Date</span>\r\n                  <input type=\"date\" value={editForm.start_date} onChange={e => setEditForm(f => ({ ...f, start_date: e.target.value }))} className={cn(INPUT, 'w-full')} />\r\n                </label>\r\n                <label className=\"space-y-0.5\">\r\n                  <span className=\"text-[9px] text-[var(--gm-text-tertiary)] uppercase\">End Date</span>\r\n                  <input type=\"date\" value={editForm.end_date} onChange={e => setEditForm(f => ({ ...f, end_date: e.target.value }))} className={cn(INPUT, 'w-full')} />\r\n                </label>\r\n                <label className=\"space-y-0.5\">\r\n                  <span className=\"text-[9px] text-[var(--gm-text-tertiary)] uppercase\">Analysis Start</span>\r\n                  <input type=\"date\" value={editForm.analysis_start_date} onChange={e => setEditForm(f => ({ ...f, analysis_start_date: e.target.value }))} className={cn(INPUT, 'w-full')} />\r\n                </label>\r\n                <label className=\"space-y-0.5\">\r\n                  <span className=\"text-[9px] text-[var(--gm-text-tertiary)] uppercase\">Analysis End</span>\r\n                  <input type=\"date\" value={editForm.analysis_end_date} onChange={e => setEditForm(f => ({ ...f, analysis_end_date: e.target.value }))} className={cn(INPUT, 'w-full')} />\r\n                </label>\r\n              </div>\r\n              <textarea value={editForm.goals} onChange={e => setEditForm(f => ({ ...f, goals: e.target.value }))} className={cn(INPUT, 'w-full resize-none')} rows={2} placeholder=\"Goals (one per line)\" />\r\n              <div className=\"flex gap-2\">\r\n                <button onClick={saveEdit} disabled={updateSprint.isPending} className={BTN_PRIMARY}>\r\n                  {updateSprint.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <CheckCircle className=\"w-3.5 h-3.5\" />} Save\r\n                </button>\r\n                <button onClick={() => setEditing(false)} className={BTN_SECONDARY}><X className=\"w-3.5 h-3.5\" /> Cancel</button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <h2 className=\"text-lg font-bold text-[var(--gm-text-primary)] truncate\">{sprint.name || 'Sprint'}</h2>\r\n              <div className=\"flex items-center gap-2 mt-0.5 flex-wrap\">\r\n                <span className=\"text-xs text-[var(--gm-text-tertiary)]\">\r\n                  {sprint.start_date ? new Date(sprint.start_date).toLocaleDateString() : '?'} — {sprint.end_date ? new Date(sprint.end_date).toLocaleDateString() : '?'}\r\n                </span>\r\n                {sprint.context && <span className=\"text-xs text-[var(--gm-text-tertiary)]\">· {sprint.context}</span>}\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n        {!editing && (\r\n          <div className=\"flex items-center gap-2 shrink-0\">\r\n            <span className={cn('text-[10px] font-medium px-2.5 py-1 rounded-full border capitalize', cfg.bg, cfg.color, cfg.border)}>\r\n              <StatusIcon className=\"w-3 h-3 inline mr-1\" />{sprint.status}\r\n            </span>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Goals */}\r\n      {!editing && sprint.goals && sprint.goals.length > 0 && (\r\n        <div className={cn(CARD, 'p-4')}>\r\n          <h3 className={SECTION_TITLE}>Goals</h3>\r\n          <ul className=\"mt-2 space-y-1.5\">\r\n            {sprint.goals.map((g, i) => (\r\n              <li key={i} className=\"flex items-start gap-2 text-sm text-[var(--gm-text-secondary)]\">\r\n                <Target className=\"w-3.5 h-3.5 text-blue-400 mt-0.5 shrink-0\" />\r\n                {g}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n\r\n      {/* Action Buttons */}\r\n      {!editing && (\r\n        <div className=\"flex flex-wrap gap-2\">\r\n          <button onClick={startEdit} className={BTN_SECONDARY}><Edit3 className=\"w-3.5 h-3.5\" /> Edit</button>\r\n\r\n          {sprint.status === 'planning' && (\r\n            <button onClick={() => handleTransition('active')} disabled={transitionStatus.isPending} className={cn(BTN_SECONDARY, 'text-green-400 border-green-500/30')}>\r\n              {transitionStatus.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Play className=\"w-3.5 h-3.5\" />} Start Sprint\r\n            </button>\r\n          )}\r\n          {sprint.status === 'active' && (\r\n            <button onClick={() => handleTransition('completed')} disabled={transitionStatus.isPending} className={cn(BTN_SECONDARY, 'text-blue-400 border-blue-500/30')}>\r\n              {transitionStatus.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Square className=\"w-3.5 h-3.5\" />} Complete Sprint\r\n            </button>\r\n          )}\r\n          {sprint.status === 'completed' && (\r\n            <button onClick={() => handleTransition('planning')} disabled={transitionStatus.isPending} className={BTN_SECONDARY}>\r\n              {transitionStatus.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Circle className=\"w-3.5 h-3.5\" />} Reopen\r\n            </button>\r\n          )}\r\n\r\n          <div className=\"w-px h-6 bg-[var(--gm-border-primary)] self-center\" />\r\n\r\n          <button onClick={handleGenerate} disabled={generateTasks.isPending} className={BTN_PRIMARY}>\r\n            {generateTasks.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Zap className=\"w-3.5 h-3.5\" />} Generate Tasks (AI)\r\n          </button>\r\n          <button onClick={handleAnalyze} disabled={analyzeMut.isPending} className={cn(BTN_SECONDARY, 'text-purple-400 border-purple-500/30')}>\r\n            {analyzeMut.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Sparkles className=\"w-3.5 h-3.5\" />} AI Analysis\r\n          </button>\r\n          <button onClick={handleBusiness} disabled={businessMut.isPending} className={cn(BTN_SECONDARY, 'text-emerald-400 border-emerald-500/30')}>\r\n            {businessMut.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Sparkles className=\"w-3.5 h-3.5\" />} Business Report\r\n          </button>\r\n          <button onClick={() => setReportModalOpen(true)} className={BTN_SECONDARY}>\r\n            <FileBarChart className=\"w-3.5 h-3.5\" /> Full Report & Export\r\n          </button>\r\n          <button onClick={handleClone} disabled={cloneSprint.isPending} className={BTN_SECONDARY}>\r\n            {cloneSprint.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Copy className=\"w-3.5 h-3.5\" />} Clone\r\n          </button>\r\n\r\n          <div className=\"flex-1\" />\r\n\r\n          {confirmDelete ? (\r\n            <div className=\"flex gap-1\">\r\n              <button onClick={handleDelete} disabled={deleteSprint.isPending} className={BTN_DANGER}>\r\n                {deleteSprint.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Trash2 className=\"w-3.5 h-3.5\" />} Confirm Delete\r\n              </button>\r\n              <button onClick={() => setConfirmDelete(false)} className={BTN_SECONDARY}><X className=\"w-3.5 h-3.5\" /></button>\r\n            </div>\r\n          ) : (\r\n            <button onClick={() => setConfirmDelete(true)} className={BTN_DANGER}><Trash2 className=\"w-3.5 h-3.5\" /> Delete</button>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Generated Tasks Preview */}\r\n      {generatedResult && (\r\n        <div className={cn(CARD, 'p-4 space-y-3')}>\r\n          <div className=\"flex items-center justify-between\">\r\n            <h3 className={SECTION_TITLE}>AI Generated Tasks</h3>\r\n            <div className=\"flex gap-2\">\r\n              <button onClick={handleApply} disabled={applyTasks.isPending || (selectedNewTasks.size === 0 && selectedExisting.size === 0)} className={BTN_PRIMARY}>\r\n                {applyTasks.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <CheckCircle className=\"w-3.5 h-3.5\" />}\r\n                Apply Selected ({selectedNewTasks.size + selectedExisting.size})\r\n              </button>\r\n              <button onClick={() => setGeneratedResult(null)} className={BTN_SECONDARY}><X className=\"w-3.5 h-3.5\" /> Dismiss</button>\r\n            </div>\r\n          </div>\r\n\r\n          {generatedResult.proposed_new_tasks.length > 0 && (\r\n            <div>\r\n              <p className=\"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-1.5\">New Tasks ({generatedResult.proposed_new_tasks.length})</p>\r\n              <div className=\"space-y-1.5\">\r\n                {generatedResult.proposed_new_tasks.map((t, i) => (\r\n                  <label key={i} className=\"flex items-start gap-2 p-2 rounded-lg bg-white/5 hover:bg-white/10 cursor-pointer\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedNewTasks.has(i)}\r\n                      onChange={e => {\r\n                        setSelectedNewTasks(prev => {\r\n                          const next = new Set(prev);\r\n                          e.target.checked ? next.add(i) : next.delete(i);\r\n                          return next;\r\n                        });\r\n                      }}\r\n                      className=\"mt-0.5 rounded border-[var(--gm-border-primary)]\"\r\n                    />\r\n                    <div className=\"min-w-0 flex-1\">\r\n                      <p className=\"text-xs font-medium text-[var(--gm-text-primary)]\">{t.task}</p>\r\n                      {t.description && <p className=\"text-[10px] text-[var(--gm-text-tertiary)] mt-0.5 line-clamp-2\">{t.description}</p>}\r\n                    </div>\r\n                    {t.size_estimate && <span className=\"text-[9px] px-2 py-0.5 rounded-full bg-blue-500/10 text-blue-400 shrink-0\">{t.size_estimate}</span>}\r\n                    {t.priority && <span className={cn('text-[9px] px-2 py-0.5 rounded-full shrink-0',\r\n                      t.priority === 'high' || t.priority === 'urgent' ? 'bg-red-500/10 text-red-400' :\r\n                      t.priority === 'medium' ? 'bg-yellow-500/10 text-yellow-400' : 'bg-white/5 text-slate-400'\r\n                    )}>{t.priority}</span>}\r\n                  </label>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {generatedResult.existing_details && generatedResult.existing_details.length > 0 && (\r\n            <div>\r\n              <p className=\"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-1.5\">Existing Actions to Link ({generatedResult.existing_details.length})</p>\r\n              <div className=\"space-y-1.5\">\r\n                {generatedResult.existing_details.map(a => (\r\n                  <label key={a.id} className=\"flex items-center gap-2 p-2 rounded-lg bg-white/5 hover:bg-white/10 cursor-pointer\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedExisting.has(a.id)}\r\n                      onChange={e => {\r\n                        setSelectedExisting(prev => {\r\n                          const next = new Set(prev);\r\n                          e.target.checked ? next.add(a.id) : next.delete(a.id);\r\n                          return next;\r\n                        });\r\n                      }}\r\n                      className=\"rounded border-[var(--gm-border-primary)]\"\r\n                    />\r\n                    <span className=\"text-xs text-[var(--gm-text-primary)] flex-1 truncate\">{a.task}</span>\r\n                    <span className=\"text-[9px] text-[var(--gm-text-tertiary)] capitalize\">{a.status}</span>\r\n                  </label>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* AI Analysis */}\r\n      {analysisText && (\r\n        <div className={cn(CARD, 'p-4')}>\r\n          <h3 className=\"text-[10px] font-bold text-purple-400 uppercase tracking-[0.1em]\">AI Analysis</h3>\r\n          <div className=\"mt-2 text-xs text-[var(--gm-text-secondary)] whitespace-pre-wrap leading-relaxed\">{analysisText}</div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Business Report */}\r\n      {businessText && (\r\n        <div className={cn(CARD, 'p-4')}>\r\n          <h3 className=\"text-[10px] font-bold text-emerald-400 uppercase tracking-[0.1em]\">Business Report</h3>\r\n          <div className=\"mt-2 text-xs text-[var(--gm-text-secondary)] whitespace-pre-wrap leading-relaxed\">{businessText}</div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Health Score (compact) */}\r\n      <div className=\"flex items-center gap-3 flex-wrap\">\r\n        <HealthScoreWidget health={health} isLoading={healthLoading} compact />\r\n        {velocity?.daily_progress && (\r\n          <span className=\"text-[10px] text-[var(--gm-text-tertiary)]\">\r\n            {velocity.completed_tasks}/{velocity.total_tasks} tasks · {velocity.completed_points}/{velocity.total_points} pts\r\n          </span>\r\n        )}\r\n      </div>\r\n\r\n      {/* Tab Navigation */}\r\n      <div className=\"flex gap-1 bg-white/[0.02] rounded-xl p-1 border border-[var(--gm-border-primary)] overflow-x-auto\">\r\n        {DETAIL_TABS.map(tab => {\r\n          const TabIcon = tab.icon;\r\n          return (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => setActiveTab(tab.id)}\r\n              className={cn(\r\n                'flex items-center gap-1.5 px-3 py-2 rounded-lg text-xs font-medium transition-colors whitespace-nowrap',\r\n                activeTab === tab.id\r\n                  ? 'bg-blue-600/15 text-blue-400'\r\n                  : 'text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] hover:bg-white/5'\r\n              )}\r\n            >\r\n              <TabIcon className=\"w-3.5 h-3.5\" />\r\n              {tab.label}\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Tab Content */}\r\n      <AnimatePresence mode=\"wait\">\r\n        <motion.div key={activeTab} initial={{ opacity: 0, y: 4 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0 }} transition={{ duration: 0.15 }}>\r\n\r\n          {activeTab === 'overview' && (\r\n            <div className=\"space-y-5\">\r\n              {reportLoading && (\r\n                <div className=\"flex items-center justify-center py-6 gap-2\">\r\n                  <Loader2 className=\"w-4 h-4 animate-spin text-blue-400\" />\r\n                  <span className=\"text-xs text-[var(--gm-text-tertiary)]\">Loading report data...</span>\r\n                </div>\r\n              )}\r\n              {(reportError || velocityError || healthError) && (\r\n                <div className=\"flex items-center gap-2 p-3 rounded-lg bg-red-500/10 border border-red-500/20\">\r\n                  <AlertTriangle className=\"w-4 h-4 text-red-400 shrink-0\" />\r\n                  <span className=\"text-xs text-red-400\">Some report data failed to load. Partial data may be shown.</span>\r\n                </div>\r\n              )}\r\n              {/* Stats Cards */}\r\n              {totalTasks > 0 && (\r\n                <>\r\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n                    {[\r\n                      { label: 'Total Tasks', value: totalTasks },\r\n                      { label: 'Completed', value: completedTasks, sub: totalTasks > 0 ? `${Math.round((completedTasks / totalTasks) * 100)}%` : '' },\r\n                      { label: 'Total Points', value: report?.total_task_points ?? 0 },\r\n                      { label: 'Done Points', value: report?.completed_task_points ?? 0 },\r\n                    ].map(s => (\r\n                      <div key={s.label} className={cn(CARD, 'p-3 text-center')}>\r\n                        <p className=\"text-2xl font-bold text-[var(--gm-text-primary)]\">{s.value}</p>\r\n                        <p className=\"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider\">{s.label}</p>\r\n                        {s.sub && <p className=\"text-xs text-blue-400 mt-0.5\">{s.sub}</p>}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div className={cn(CARD, 'p-4')}><BreakdownChart title=\"By Status\" data={breakdown.by_status} /></div>\r\n                    <div className={cn(CARD, 'p-4')}><BreakdownChart title=\"By Assignee\" data={breakdown.by_assignee} /></div>\r\n                  </div>\r\n                </>\r\n              )}\r\n\r\n              {/* Health Score (full) */}\r\n              <div className={cn(CARD, 'p-4')}>\r\n                <HealthScoreWidget health={health} isLoading={healthLoading} />\r\n              </div>\r\n\r\n              {/* Add Task */}\r\n              <div className={cn(CARD, 'p-4')}>\r\n                <div className=\"flex items-center justify-between\">\r\n                  <h3 className={SECTION_TITLE}>Sprint Tasks ({actions.length})</h3>\r\n                  <button onClick={() => setShowAddTask(!showAddTask)} className={BTN_SECONDARY}>\r\n                    <Plus className=\"w-3 h-3\" /> Add Task\r\n                  </button>\r\n                </div>\r\n                <AnimatePresence>\r\n                  {showAddTask && (\r\n                    <motion.div initial={{ opacity: 0, height: 0 }} animate={{ opacity: 1, height: 'auto' }} exit={{ opacity: 0, height: 0 }} className=\"overflow-hidden\">\r\n                      <div className=\"mt-3 space-y-2 p-3 rounded-lg bg-white/[0.02] border border-[var(--gm-border-primary)]\">\r\n                        <input\r\n                          value={newTask.task}\r\n                          onChange={e => setNewTask(f => ({ ...f, task: e.target.value }))}\r\n                          className={cn(INPUT, 'w-full')}\r\n                          placeholder=\"Task description...\"\r\n                          onKeyDown={e => e.key === 'Enter' && handleAddTask()}\r\n                        />\r\n                        <div className=\"flex gap-2\">\r\n                          <input\r\n                            value={newTask.owner}\r\n                            onChange={e => setNewTask(f => ({ ...f, owner: e.target.value }))}\r\n                            className={cn(INPUT, 'flex-1')}\r\n                            placeholder=\"Owner (optional)\"\r\n                          />\r\n                          <select\r\n                            value={newTask.priority}\r\n                            onChange={e => setNewTask(f => ({ ...f, priority: e.target.value }))}\r\n                            className={cn(INPUT, 'w-28')}\r\n                          >\r\n                            <option value=\"low\">Low</option>\r\n                            <option value=\"medium\">Medium</option>\r\n                            <option value=\"high\">High</option>\r\n                          </select>\r\n                          <button onClick={handleAddTask} disabled={!newTask.task.trim() || createAction.isPending} className={BTN_PRIMARY}>\r\n                            {createAction.isPending ? <Loader2 className=\"w-3 h-3 animate-spin\" /> : 'Add'}\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </motion.div>\r\n                  )}\r\n                </AnimatePresence>\r\n              </div>\r\n\r\n              {/* Sprint Tasks grouped by status */}\r\n              {actions.length > 0 && (\r\n                <div className={cn(CARD, 'p-4')}>\r\n                  <div className=\"mt-3 space-y-4\">\r\n                    {['in_progress', 'pending', 'overdue', 'completed'].map(status => {\r\n                      const group = groupedActions[status];\r\n                      if (!group || group.length === 0) return null;\r\n                      return (\r\n                        <div key={status}>\r\n                          <p className=\"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-1.5 flex items-center gap-1.5\">\r\n                            <span className={cn('w-2 h-2 rounded-full', taskStatusDot(status))} />\r\n                            {status.replace('_', ' ')} ({group.length})\r\n                          </p>\r\n                          <div className=\"space-y-1\">\r\n                            {group.map(a => (\r\n                              <div key={a.id} className=\"group flex items-center gap-2 py-1.5 px-2 rounded-lg hover:bg-white/5\">\r\n                                <span className={cn('w-1.5 h-1.5 rounded-full shrink-0', taskStatusDot(a.status))} />\r\n                                <span className={cn('text-xs flex-1 truncate', a.status === 'completed' ? 'line-through text-slate-500' : 'text-[var(--gm-text-primary)]')}>\r\n                                  {a.task || a.title || '(untitled)'}\r\n                                </span>\r\n                                {a.owner && <OwnerBadge name={a.owner} size=\"sm\" />}\r\n                                {a.task_points != null && <span className=\"text-[9px] px-1.5 py-0.5 rounded bg-blue-500/10 text-blue-400 tabular-nums\">{a.task_points}pt</span>}\r\n                                <EstimatePointsButton sprintId={sprintId} taskDescription={a.task || a.title || ''} />\r\n                                <button\r\n                                  onClick={e => { e.stopPropagation(); handleRemoveFromSprint(a.id); }}\r\n                                  className=\"opacity-0 group-hover:opacity-100 p-0.5 rounded hover:bg-red-500/20 text-red-400 transition-all\"\r\n                                  title=\"Remove from sprint\"\r\n                                >\r\n                                  <X className=\"w-3 h-3\" />\r\n                                </button>\r\n                              </div>\r\n                            ))}\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {activeTab === 'kanban' && (\r\n            <div className={cn(CARD, 'p-4')}>\r\n              <KanbanBoard actions={actions} onStatusChange={handleKanbanStatusChange} />\r\n            </div>\r\n          )}\r\n\r\n          {activeTab === 'timeline' && (\r\n            <div className={cn(CARD, 'p-4')}>\r\n              <GanttChart actions={actions} sprintStart={sprint.start_date} sprintEnd={sprint.end_date} />\r\n            </div>\r\n          )}\r\n\r\n          {activeTab === 'burndown' && (\r\n            <div className=\"space-y-4\">\r\n              {velocity?.daily_progress ? (\r\n                <div className={cn(CARD, 'p-4')}>\r\n                  <BurndownChart dailyProgress={velocity.daily_progress} totalTasks={velocity.total_tasks} totalPoints={velocity.total_points} />\r\n                </div>\r\n              ) : (\r\n                <div className={cn(CARD, 'p-8 text-center')}>\r\n                  <Activity className=\"w-8 h-8 mx-auto text-[var(--gm-text-tertiary)] mb-2\" />\r\n                  <p className=\"text-xs text-[var(--gm-text-tertiary)]\">Burndown data will appear as tasks are completed</p>\r\n                </div>\r\n              )}\r\n              {velocity?.daily_progress && (\r\n                <div className={cn(CARD, 'p-4')}>\r\n                  <BurndownChart dailyProgress={velocity.daily_progress} totalTasks={velocity.total_tasks} totalPoints={velocity.total_points} usePoints />\r\n                </div>\r\n              )}\r\n              {velocity?.velocity_history?.length > 0 && (\r\n                <div className={cn(CARD, 'p-4')}>\r\n                  <VelocityChart history={velocity.velocity_history} />\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {activeTab === 'standup' && (\r\n            <StandupPanel sprintId={sprintId} />\r\n          )}\r\n\r\n          {activeTab === 'capacity' && (\r\n            <CapacityPanel sprintId={sprintId} actions={actions} />\r\n          )}\r\n\r\n          {activeTab === 'retro' && (\r\n            <RetrospectivePanel sprintId={sprintId} />\r\n          )}\r\n\r\n        </motion.div>\r\n      </AnimatePresence>\r\n\r\n      {/* Report Modal */}\r\n      <SprintReportModal open={reportModalOpen} onClose={() => setReportModalOpen(false)} sprint={sprint} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function SprintsPage() {\r\n  const sprintsQuery = useSprints();\r\n  const { data: sprintsRaw, isLoading } = sprintsQuery;\r\n  const [selectedSprint, setSelectedSprint] = useState<string | null>(null);\r\n  const [showCreate, setShowCreate] = useState(false);\r\n\r\n  const sprints = useMemo<Sprint[]>(() => {\r\n    const arr = (sprintsRaw as any)?.sprints ?? (Array.isArray(sprintsRaw) ? sprintsRaw : []);\r\n    return arr.map((s: any) => normalizeSprint(s));\r\n  }, [sprintsRaw]);\r\n\r\n  const activeSprints = sprints.filter(s => s.status === 'active');\r\n  const planningSprints = sprints.filter(s => s.status === 'planning');\r\n  const completedSprints = sprints.filter(s => s.status === 'completed');\r\n\r\n  if (selectedSprint) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <SprintDetail sprintId={selectedSprint} onBack={() => setSelectedSprint(null)} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const renderSprintCard = (s: Sprint) => {\r\n    const cfg = statusConfig[s.status] || statusConfig.planning;\r\n    const StatusIcon = cfg.icon;\r\n    return (\r\n      <motion.div\r\n        key={s.id}\r\n        layout\r\n        className={cn(CARD, 'p-4 hover:border-blue-500/30 transition-colors cursor-pointer')}\r\n        onClick={() => setSelectedSprint(s.id)}\r\n      >\r\n        <div className=\"flex items-center gap-3\">\r\n          <StatusIcon className={cn('w-4 h-4 shrink-0', cfg.color)} />\r\n          <div className=\"flex-1 min-w-0\">\r\n            <h3 className=\"text-sm font-semibold text-[var(--gm-text-primary)] truncate\">{s.name || 'Unnamed Sprint'}</h3>\r\n            <p className=\"text-[10px] text-[var(--gm-text-tertiary)]\">\r\n              {s.start_date ? new Date(s.start_date).toLocaleDateString() : '?'} — {s.end_date ? new Date(s.end_date).toLocaleDateString() : '?'}\r\n              {s.context && <span className=\"ml-2\">· {s.context.substring(0, 50)}{s.context.length > 50 ? '...' : ''}</span>}\r\n            </p>\r\n          </div>\r\n          <span className={cn('text-[10px] font-medium px-2.5 py-1 rounded-full border capitalize', cfg.bg, cfg.color, cfg.border)}>\r\n            {s.status}\r\n          </span>\r\n          <ChevronRight className=\"w-4 h-4 text-[var(--gm-text-tertiary)]\" />\r\n        </div>\r\n        {s.goals && s.goals.length > 0 && (\r\n          <div className=\"flex flex-wrap gap-1.5 mt-2 ml-7\">\r\n            {s.goals.slice(0, 3).map((g, i) => (\r\n              <span key={i} className=\"text-[9px] px-2 py-0.5 rounded-full bg-white/5 text-[var(--gm-text-tertiary)]\">{g}</span>\r\n            ))}\r\n            {s.goals.length > 3 && <span className=\"text-[9px] text-[var(--gm-text-tertiary)]\">+{s.goals.length - 3} more</span>}\r\n          </div>\r\n        )}\r\n      </motion.div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-5\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-xl font-bold text-[var(--gm-text-primary)]\">Sprints</h1>\r\n          <p className=\"text-xs text-[var(--gm-text-tertiary)]\">\r\n            {sprints.length} sprint{sprints.length !== 1 ? 's' : ''}\r\n            {activeSprints.length > 0 && <span className=\"text-green-400 ml-2\">· {activeSprints.length} active</span>}\r\n          </p>\r\n        </div>\r\n        <button onClick={() => setShowCreate(!showCreate)} className={BTN_PRIMARY}>\r\n          <Plus className=\"w-3.5 h-3.5\" /> New Sprint\r\n        </button>\r\n      </div>\r\n\r\n      <AnimatePresence>\r\n        {showCreate && (\r\n          <motion.div initial={{ opacity: 0, height: 0 }} animate={{ opacity: 1, height: 'auto' }} exit={{ opacity: 0, height: 0 }} className=\"overflow-hidden\">\r\n            <CreateSprintForm onCreated={() => setShowCreate(false)} />\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {sprintsQuery.error ? (\r\n        <ErrorState message=\"Failed to load sprints.\" onRetry={() => sprintsQuery.refetch()} />\r\n      ) : isLoading ? (\r\n        <div className=\"flex items-center justify-center h-32\"><Loader2 className=\"w-6 h-6 animate-spin text-blue-400\" /></div>\r\n      ) : sprints.length === 0 ? (\r\n        <div className={cn(CARD, 'p-12 text-center')}>\r\n          <Calendar className=\"w-10 h-10 mx-auto text-[var(--gm-text-tertiary)] mb-3\" />\r\n          <p className=\"text-sm text-[var(--gm-text-tertiary)]\">No sprints yet. Create your first sprint to get started.</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-6\">\r\n          {activeSprints.length > 0 && (\r\n            <div>\r\n              <h2 className=\"text-xs font-bold text-green-400 uppercase tracking-wider mb-2 flex items-center gap-1.5\">\r\n                <Clock className=\"w-3.5 h-3.5\" /> Active ({activeSprints.length})\r\n              </h2>\r\n              <div className=\"space-y-3\">{activeSprints.map(renderSprintCard)}</div>\r\n            </div>\r\n          )}\r\n          {planningSprints.length > 0 && (\r\n            <div>\r\n              <h2 className=\"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2 flex items-center gap-1.5\">\r\n                <Circle className=\"w-3.5 h-3.5\" /> Planning ({planningSprints.length})\r\n              </h2>\r\n              <div className=\"space-y-3\">{planningSprints.map(renderSprintCard)}</div>\r\n            </div>\r\n          )}\r\n          {completedSprints.length > 0 && (\r\n            <div>\r\n              <h2 className=\"text-xs font-bold text-blue-400 uppercase tracking-wider mb-2 flex items-center gap-1.5\">\r\n                <CheckCircle className=\"w-3.5 h-3.5\" /> Completed ({completedSprints.length})\r\n              </h2>\r\n              <div className=\"space-y-3\">{completedSprints.map(renderSprintCard)}</div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["__iconNode","Presentation","createLucideIcon","SquareChartGantt","STATUS_COLORS","ASSIGNEE_PALETTE","BreakdownChart","title","data","colorMap","bars","useMemo","entries","v","label","value","i","maxVal","b","total","s","jsx","jsxs","bar","pct","sharePct","BurndownChart","dailyProgress","totalTasks","totalPoints","usePoints","d","chartH","chartW","toX","toY","actualPath","idealPath","areaPath","todayIdx","today","idx","labels","step","f","VelocityChart","history","avgVelocity","totalH","riskConfig","CheckCircle","AlertTriangle","AlertCircle","XCircle","factorLabels","ScoreRing","score","size","strokeWidth","color","radius","circumference","offset","HealthScoreWidget","health","isLoading","compact","Activity","cfg","RiskIcon","scoreColor","cn","key","val","displayVal","barColor","alert","COLUMNS","KanbanBoard","actions","onStatusChange","dragId","setDragId","useState","dragOverCol","setDragOverCol","handleDragStart","useCallback","e","actionId","handleDragEnd","handleDragOver","colId","handleDragLeave","handleDrop","action","a","priorityDot","p","col","colActions","isOver","GripVertical","OwnerBadge","statusColor","GanttChart","sprintStart","sprintEnd","start","end","range","taskStart","taskEnd","left","width","hasDeps","now","dateLabels","l","CARD","INPUT","EditableList","items","onAdd","onRemove","placeholder","input","setInput","handleAdd","item","X","Plus","RetrospectivePanel","sprintId","retroMut","useSprintRetrospective","wentWell","setWentWell","wentWrong","setWentWrong","actionItems","setActionItems","aiSuggestions","setAiSuggestions","handleGenerate","toast","Loader2","Sparkles","ThumbsUp","prev","_","ThumbsDown","ListChecks","StandupPanel","standupMut","useSprintStandup","standup","setStandup","Fragment","entry","User","j","ArrowRight","CapacityPanel","capacityMut","useSprintCapacity","capacities","setCapacities","result","setResult","newPerson","setNewPerson","newPoints","setNewPoints","owners","set","k","addPerson","handleAnalyze","person","Users","n","c","barWidth","EstimatePointsButton","taskDescription","onEstimate","className","estimateMut","useSprintEstimatePoints","handleEstimate","confColor","BTN","STYLE_OPTIONS","downloadHtml","html","filename","blob","url","SprintReportModal","open","onClose","sprint","reportData","reportLoading","useSprintReport","analyzeMut","useSprintReportAnalyze","businessMut","useSprintBusinessReport","docMut","useSprintReportDocument","presMut","useSprintReportPresentation","analysisText","setAnalysisText","businessText","setBusinessText","includeAnalysis","setIncludeAnalysis","includeBusiness","setIncludeBusiness","selectedStyle","setSelectedStyle","report","breakdown","completedTasks","completedPoints","completionPct","handleBusiness","handleExportDoc","handleExportPres","AnimatePresence","motion","done","Circle","Zap","Building2","opt","FileText","BTN_PRIMARY","BTN_SECONDARY","BTN_DANGER","SECTION_TITLE","statusConfig","Clock","taskStatusDot","normalizeSprint","raw","CreateSprintForm","onCreated","createSprint","useCreateSprint","form","setForm","handleSubmit","g","DETAIL_TABS","BarChart3","LayoutGrid","GanttChartSquare","MessageSquare","Target","SprintDetail","onBack","queryClient","useQueryClient","sprintRaw","useSprint","reportRaw","reportError","velocityRaw","velocityError","useSprintVelocity","healthRaw","healthLoading","healthError","useSprintHealth","generateTasks","useSprintGenerateTasks","applyTasks","useSprintApplyTasks","updateSprint","useUpdateSprint","deleteSprint","useDeleteSprint","transitionStatus","useSprintStatusTransition","cloneSprint","useSprintClone","updateAction","useUpdateAction","createAction","useCreateAction","activeTab","setActiveTab","showAddTask","setShowAddTask","newTask","setNewTask","generatedResult","setGeneratedResult","selectedNewTasks","setSelectedNewTasks","selectedExisting","setSelectedExisting","editing","setEditing","editForm","setEditForm","reportModalOpen","setReportModalOpen","confirmDelete","setConfirmDelete","groupedActions","groups","startEdit","saveEdit","handleDelete","handleTransition","status","allNew","allExisting","handleApply","newTasks","existingIds","id","handleClone","handleKanbanStatusChange","newStatus","handleAddTask","handleRemoveFromSprint","velocity","StatusIcon","ArrowLeft","Edit3","Play","Square","FileBarChart","Copy","Trash2","next","tab","TabIcon","group","SprintsPage","sprintsQuery","useSprints","sprintsRaw","selectedSprint","setSelectedSprint","showCreate","setShowCreate","sprints","activeSprints","planningSprints","completedSprints","renderSprintCard","ChevronRight","ErrorState","Calendar"],"mappings":"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","x_google_ignoreList":[0,1]}