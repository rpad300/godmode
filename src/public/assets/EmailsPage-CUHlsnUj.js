import{r as i,j as e}from"./vendor-react-CZ-WyKWZ.js";import{bQ as Le,bR as Be,bS as Te,bT as ke,bU as $e,bV as Ce,bW as Ue,bX as Ge,bY as Oe,w as de,c as h,C as ie,L as J,T as qe,x as he,r as We,ad as be,g as He,a8 as ye,bZ as Qe,b_ as Ve,l as Je,bo as Ke,bp as Xe,bq as Ye,X as Ze,G as et,H as tt,aV as rt,b$ as st,c0 as at,M as me,a9 as nt,P as it}from"./main-B3DZn5B_.js";import{E as lt}from"./PageSkeleton-q10Tfh5l.js";import{t as c}from"./vendor-ui-BS9QKitv.js";import{R as ot,C as ct}from"./CommentsPanel-CZdKIoGH.js";import{B as xe}from"./brain-BD_Z4K1O.js";import{C as fe}from"./cpu-DUHk4ipN.js";import{C as dt,P as te}from"./paperclip-LWsHHImL.js";import{A as mt}from"./arrow-left-BUrpeDp8.js";import{c as pe}from"./vendor-markdown-Cu8AM8lU.js";import{A as Ee}from"./arrow-up-right-Bo3g-__Q.js";import{S as le}from"./star-YHn3OJCl.js";import{E as xt}from"./eye-off-Co-RWywx.js";import{E as ge}from"./eye-RsgK9PvA.js";import{A as gt}from"./archive-BKtIUce6.js";import{S as re}from"./sparkles-D3iJUPqd.js";import{C as ve}from"./circle-check-big-Do7NRW-9.js";import{L as je}from"./lightbulb-0ivikuj5.js";import{L as pt}from"./link-2-CvGSt01y.js";import{S as ut}from"./send-CaMoZtNQ.js";import{E as ht}from"./ErrorState-to3SSPKs.js";import"./vendor-query-DSf7I7Ei.js";import"./vendor-supabase-Bpw_79gH.js";import"./vendor-router-D_XeKoA_.js";import"./skeleton-CD8xV6MY.js";import"./pen-UIQK8jUR.js";import"./circle-6fOsuLxM.js";const bt=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],_e=pe("arrow-down-left",bt);const yt=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],De=pe("arrow-left-right",yt);const ft=[["path",{d:"m15 17 5-5-5-5",key:"nf172w"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]],vt=pe("forward",ft),jt="rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-[var(--shadow-sm)] transition-all duration-200",Nt="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--color-danger-500)] text-white hover:bg-[var(--color-danger-600)] shadow-sm transition-all duration-150 disabled:opacity-50",ne="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] hover:bg-[var(--gm-interactive-secondary-hover)] border border-[var(--gm-border-primary)] transition-all duration-150",wt={inbound:_e,outbound:Ee,internal:De},Ne={positive:{color:"bg-green-500/20 text-green-400",emoji:"ðŸ˜Š"},neutral:{color:"bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)]",emoji:"ðŸ˜"},negative:{color:"bg-red-500/20 text-red-400",emoji:"ðŸ˜Ÿ"},urgent:{color:"bg-red-500/20 text-red-400",emoji:"ðŸ”¥"}};function St({email:s,onBack:m,onReply:p,onForward:n}){const[o,f]=i.useState("content"),[b,E]=i.useState(null),[x,j]=i.useState(!1),[N,F]=i.useState(!1),z=Le(),G=Be(),w=Te(),_=ke(),S=$e(),K=Ce(),R=Ue(),O=Ge(),r=s.thread_id?String(s.thread_id):null,d=Oe(x?r:null),g=d.data?.emails;i.useEffect(()=>{f("content"),E(null),j(!1),F(!1)},[s.id]);const M=String(s.subject||"No subject"),P=String(s.from||s.from_name||s.sender||"â€”"),D=String(s.from_email||""),k=String(s.to||""),L=String(s.cc||""),q=s.date?new Date(String(s.date)).toLocaleString():"",W=String(s.body||s.body_text||""),v=!!s.is_read,B=!!s.is_starred,Y=String(s.direction||""),X=String(s.sentiment||""),Z=String(s.detected_intent||s.ai_category||""),I=String(s.ai_summary||""),se=!!s.requires_response,C=s.extracted_entities||{},H=C.facts||[],Q=C.decisions||[],T=C.risks||[],V=C.action_items||[],$=C.questions||[],a=C.people||[],y=C.technologies||[],A=C.relationships||[],u=C.key_topics||[],ee=s.attachments||[],Ae=H.length>0||Q.length>0||T.length>0||V.length>0||$.length>0,Re=y.length>0||A.length>0||u.length>0,Ie=a.length>0,ae=wt[Y]||null,ue=Ne[X]||Ne.neutral,Fe=()=>{z.mutate(String(s.id),{onSuccess:()=>{c.success("Email deleted"),m()}})},ze=()=>{E(null),w.mutate(String(s.id),{onSuccess:t=>{E(t.response||t.draft||"No response generated."),c.success("AI response generated")},onError:()=>c.error("Failed to generate response")})},Me=[{key:"content",label:"Content",icon:de},{key:"analysis",label:"Analysis",icon:xe,count:H.length+V.length+Q.length+T.length+$.length,hidden:!Ae},{key:"entities",label:"Entities",icon:fe,count:y.length+A.length+u.length,hidden:!Re},{key:"contacts",label:"Contacts",icon:dt,count:a.length,hidden:!Ie}];return e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("button",{onClick:m,className:"flex items-center gap-1.5 text-xs text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors mb-2",children:[e.jsx(mt,{className:"w-3.5 h-3.5"})," Back to Emails"]}),e.jsxs("div",{className:jt,children:[e.jsx("div",{className:"p-5 rounded-t-xl",style:{background:"linear-gradient(to right, rgba(37,99,235,0.15), rgba(37,99,235,0.04))"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center shrink-0",style:{backgroundColor:"rgba(37,99,235,0.15)"},children:ae?e.jsx(ae,{className:"w-6 h-6 text-blue-400"}):e.jsx(de,{className:"w-6 h-6 text-blue-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-lg font-semibold text-[var(--gm-text-primary)] leading-tight",children:M}),e.jsxs("div",{className:"mt-1.5 space-y-0.5 text-xs text-[var(--gm-text-tertiary)]",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-[var(--gm-text-tertiary)] w-8",children:"From"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-[var(--gm-text-primary)]",children:P}),D&&` <${D}>`]})]}),k&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-[var(--gm-text-tertiary)] w-8",children:"To"}),e.jsx("span",{children:k})]}),L&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-[var(--gm-text-tertiary)] w-8",children:"CC"}),e.jsx("span",{children:L})]}),q&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-[var(--gm-text-tertiary)] w-8",children:"Date"}),e.jsx("span",{children:q})]})]}),e.jsxs("div",{className:"flex gap-1.5 mt-2 flex-wrap",children:[Z&&e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-blue-500/20 text-blue-400 font-medium capitalize",children:Z.replace(/_/g," ")}),X&&e.jsxs("span",{className:h("text-[10px] px-2 py-0.5 rounded-full font-medium capitalize",ue.color),children:[ue.emoji," ",X]}),se&&e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-yellow-500/20 text-yellow-400 font-medium flex items-center gap-1",children:[e.jsx(ie,{className:"w-3 h-3"})," Needs Response"]}),Y&&ae&&e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full text-[var(--gm-text-tertiary)] capitalize flex items-center gap-1 bg-[var(--gm-bg-tertiary)]",children:[e.jsx(ae,{className:"w-3 h-3"})," ",Y]}),ee.length>0&&e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full text-[var(--gm-text-tertiary)] flex items-center gap-1 bg-[var(--gm-bg-tertiary)]",children:[e.jsx(te,{className:"w-3 h-3"})," ",ee.length]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsx("button",{onClick:()=>_.mutate({id:String(s.id),starred:!B}),className:"p-2 rounded-lg hover:bg-[var(--gm-surface-hover)] transition-colors",title:B?"Unstar":"Star",children:e.jsx(le,{className:h("w-4 h-4",B?"fill-yellow-400 text-yellow-400":"text-[var(--gm-text-tertiary)] hover:text-yellow-400")})}),e.jsx("button",{onClick:()=>K.mutate({id:String(s.id),read:!v}),className:"p-2 rounded-lg text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)] transition-colors",title:v?"Mark unread":"Mark read",children:v?e.jsx(xt,{className:"w-4 h-4"}):e.jsx(ge,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S.mutate(String(s.id),{onSuccess:()=>{c.success("Archived"),m()}}),className:"p-2 rounded-lg text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)] transition-colors",title:"Archive",children:e.jsx(gt,{className:"w-4 h-4"})})]})]})}),e.jsx("div",{className:"flex gap-1 px-5 border-b border-[var(--gm-border-primary)]",children:Me.filter(t=>!t.hidden).map(t=>{const l=t.icon;return e.jsxs("button",{onClick:()=>f(t.key),className:h("flex items-center gap-1.5 px-4 py-2.5 text-xs font-medium border-b-2 transition-colors",o===t.key?"border-[var(--gm-accent-primary)] text-[var(--gm-accent-primary)]":"border-transparent text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)]"),children:[e.jsx(l,{className:"w-3.5 h-3.5"})," ",t.label,t.count!==void 0&&t.count>0&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)]",children:t.count})]},t.key)})}),e.jsxs("div",{className:"p-5 space-y-4",children:[o==="content"&&e.jsxs(e.Fragment,{children:[I&&e.jsxs("div",{className:"bg-blue-600/5 border-l-[3px] border-[var(--gm-accent-primary)] rounded-r-lg p-4",children:[e.jsxs("div",{className:"text-[10px] uppercase tracking-wider text-[var(--gm-accent-primary)] font-semibold mb-1.5 flex items-center gap-1.5",children:[e.jsx(re,{className:"w-3.5 h-3.5"})," AI Summary"]}),e.jsx("p",{className:"text-sm text-[var(--gm-text-primary)] leading-relaxed",children:I})]}),e.jsx("div",{className:"bg-[var(--gm-bg-tertiary)] rounded-xl p-5",children:e.jsx("pre",{className:"text-sm text-[var(--gm-text-primary)] whitespace-pre-wrap font-sans leading-relaxed",children:W})}),ee.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xs font-semibold text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-2 flex items-center gap-1.5",children:[e.jsx(te,{className:"w-3.5 h-3.5"})," Attachments (",ee.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ee.map((t,l)=>e.jsxs("div",{className:"flex items-center gap-2 bg-[var(--gm-bg-tertiary)] rounded-lg px-3 py-2 border border-[var(--gm-border-primary)]",children:[e.jsx(te,{className:"w-4 h-4 text-[var(--gm-accent-primary)]"}),e.jsx("span",{className:"text-xs text-[var(--gm-text-primary)]",children:String(t.filename||t.name||`Attachment ${l+1}`)}),t.size&&e.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:kt(Number(t.size))})]},l))})]}),r&&e.jsxs("div",{className:"border-t border-[var(--gm-border-primary)] pt-4",children:[e.jsx("button",{onClick:()=>j(!x),className:"text-xs text-[var(--gm-accent-primary)] hover:underline font-medium",children:x?"Hide thread":"Show thread"}),x&&d.isLoading&&e.jsx(J,{className:"w-4 h-4 animate-spin text-[var(--gm-accent-primary)] mt-2"}),x&&g&&g.length>0&&e.jsx("div",{className:"space-y-2 mt-3 ml-4 border-l-2 border-blue-600/20 pl-4",children:g.filter(t=>String(t.id)!==String(s.id)).map((t,l)=>e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-primary)]",children:String(t.from||t.from_name||t.sender||"â€”")}),t.date&&e.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:new Date(String(t.date)).toLocaleString()})]}),e.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)] line-clamp-3",children:String(t.body||t.body_text||t.ai_summary||"")})]},l))})]}),e.jsxs("div",{className:"border-t border-[var(--gm-border-primary)] pt-4 flex flex-wrap gap-2",children:[p&&e.jsxs("button",{onClick:()=>p(s),className:"px-3 py-1.5 rounded-lg bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] text-xs font-medium hover:bg-[var(--gm-interactive-primary-hover)] flex items-center gap-1.5 transition-colors",children:[e.jsx(ot,{className:"w-3.5 h-3.5"})," Reply"]}),n&&e.jsxs("button",{onClick:()=>n(s),className:ne,children:[e.jsx(vt,{className:"w-3.5 h-3.5"})," Forward"]}),se&&e.jsxs("button",{onClick:()=>G.mutate(String(s.id),{onSuccess:()=>c.success("Marked as responded")}),disabled:G.isPending,className:"px-3 py-1.5 rounded-lg bg-green-500/10 text-green-500 text-xs font-medium hover:bg-green-500/20 flex items-center gap-1.5",children:[e.jsx(ve,{className:"w-3.5 h-3.5"})," Mark Responded"]}),e.jsxs("button",{onClick:ze,disabled:w.isPending,className:"px-3 py-1.5 rounded-lg bg-blue-600/10 text-[var(--gm-accent-primary)] text-xs font-medium hover:bg-blue-600/20 flex items-center gap-1.5 transition-colors",children:[w.isPending?e.jsx(J,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(re,{className:"w-3.5 h-3.5"})," Generate AI Response"]}),e.jsxs("button",{onClick:()=>R.mutate(String(s.id),{onSuccess:t=>c.success(`Categorized: ${t?.category??"done"}`)}),disabled:R.isPending,className:ne,children:[R.isPending?e.jsx(J,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(xe,{className:"w-3.5 h-3.5"})," AI Categorize"]}),e.jsxs("button",{onClick:()=>O.mutate(String(s.id),{onSuccess:()=>c.success("Summary generated")}),disabled:O.isPending,className:ne,children:[O.isPending?e.jsx(J,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(xe,{className:"w-3.5 h-3.5"})," AI Summarize"]})]}),b&&e.jsxs("div",{className:"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-2",children:"Draft Response"}),e.jsx("pre",{className:"text-sm text-[var(--gm-text-primary)] whitespace-pre-wrap font-sans leading-relaxed",children:b})]})]}),o==="analysis"&&e.jsxs("div",{className:"space-y-5",children:[H.length>0&&e.jsx(U,{title:"Facts",icon:je,color:"text-[var(--gm-accent-primary)]",count:H.length,children:H.map((t,l)=>e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-[var(--gm-text-primary)]",children:String(t.content)}),e.jsxs("div",{className:"flex gap-2 mt-1.5",children:[t.category&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)] capitalize",children:String(t.category)}),t.confidence&&e.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] capitalize",children:[String(t.confidence)," confidence"]})]})]},l))}),V.length>0&&e.jsx(U,{title:"Action Items",icon:ve,color:"text-green-500",count:V.length,children:V.map((t,l)=>e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-lg p-3",children:[e.jsxs("p",{className:"text-xs text-[var(--gm-text-primary)] flex items-start gap-1.5",children:[e.jsx("span",{className:"text-green-500 mt-0.5",children:"â˜"})," ",String(t.task)]}),e.jsxs("div",{className:"flex gap-2 mt-1.5 flex-wrap",children:[t.owner&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)]",children:["Owner: ",String(t.owner)]}),t.deadline&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)]",children:["Due: ",String(t.deadline)]}),t.priority&&e.jsx("span",{className:h("text-[10px] px-1.5 py-0.5 rounded capitalize",t.priority==="critical"||t.priority==="high"?"bg-red-500/10 text-red-500":t.priority==="medium"?"bg-yellow-500/10 text-yellow-500":"bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)]"),children:String(t.priority)})]})]},l))}),Q.length>0&&e.jsx(U,{title:"Decisions",icon:je,color:"text-[var(--gm-accent-primary)]",count:Q.length,children:Q.map((t,l)=>e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-[var(--gm-text-primary)]",children:String(t.content)}),e.jsxs("div",{className:"flex gap-2 mt-1.5",children:[t.owner&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)]",children:["By: ",String(t.owner)]}),t.status&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-blue-600/10 text-[var(--gm-accent-primary)] capitalize",children:String(t.status)})]})]},l))}),T.length>0&&e.jsx(U,{title:"Risks",icon:qe,color:"text-red-500",count:T.length,children:T.map((t,l)=>e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-[var(--gm-text-primary)]",children:String(t.content)}),e.jsxs("div",{className:"flex gap-2 mt-1.5",children:[t.impact&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-red-500/10 text-red-500",children:["Impact: ",String(t.impact)]}),t.likelihood&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-yellow-500/10 text-yellow-500",children:["Likelihood: ",String(t.likelihood)]})]}),t.mitigation&&e.jsxs("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1.5 italic",children:["Mitigation: ",String(t.mitigation)]})]},l))}),$.length>0&&e.jsx(U,{title:"Questions",icon:he,color:"text-yellow-500",count:$.length,children:$.map((t,l)=>e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-lg p-3",children:[e.jsxs("p",{className:"text-xs text-[var(--gm-text-primary)] flex items-start gap-1.5",children:[e.jsx(he,{className:"w-3.5 h-3.5 text-yellow-500 shrink-0 mt-0.5"})," ",String(t.content)]}),t.assignee&&e.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] ml-5",children:["Assigned to: ",String(t.assignee)]})]},l))})]}),o==="entities"&&e.jsxs("div",{className:"space-y-5",children:[y.length>0&&e.jsx(U,{title:"Technologies",icon:fe,color:"text-[var(--gm-accent-primary)]",count:y.length,children:e.jsx("div",{className:"flex flex-wrap gap-2",children:y.map((t,l)=>e.jsxs("span",{className:"text-xs px-3 py-1.5 rounded-lg bg-blue-600/10 text-[var(--gm-accent-primary)] font-medium",children:[String(t.name),t.category&&e.jsxs("span",{className:"text-[10px] text-blue-500 ml-1.5 capitalize",children:["(",String(t.category),")"]})]},l))})}),u.length>0&&e.jsx(U,{title:"Key Topics",icon:de,color:"text-[var(--gm-text-primary)]",count:u.length,children:e.jsx("div",{className:"flex flex-wrap gap-2",children:u.map((t,l)=>e.jsx("span",{className:"text-xs px-3 py-1.5 rounded-lg bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-primary)] border border-[var(--gm-border-primary)]",children:t},l))})}),A.length>0&&e.jsx(U,{title:"Relationships",icon:pt,color:"text-[var(--gm-accent-primary)]",count:A.length,children:A.map((t,l)=>e.jsxs("div",{className:"flex items-center gap-2 bg-[var(--gm-surface-hover)] rounded-lg p-3",children:[e.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-primary)]",children:String(t.from)}),e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-blue-600/10 text-[var(--gm-accent-primary)]",children:String(t.type||"").replace(/_/g," ")}),e.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-primary)]",children:String(t.to)})]},l))})]}),o==="contacts"&&e.jsx("div",{className:"space-y-3",children:a.map((t,l)=>{const oe=String(t.name||"Unknown"),ce=We(t);return e.jsxs("div",{className:"flex items-center gap-3 bg-[var(--gm-surface-hover)] rounded-xl p-4",children:[e.jsxs("div",{className:"w-10 h-10 rounded-full bg-blue-600/20 flex items-center justify-center text-sm font-bold text-[var(--gm-accent-primary)] shrink-0 overflow-hidden",children:[be(ce)?e.jsx("img",{src:ce,alt:oe,className:"w-full h-full object-cover",onError:Pe=>{Pe.target.style.display="none"}}):null,e.jsx("span",{className:be(ce)?"hidden":"",children:He(oe)})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-[var(--gm-text-primary)]",children:oe}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-0.5",children:[t.role&&e.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:String(t.role)}),t.organization&&e.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:["at ",String(t.organization)]})]}),t.email&&e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-0.5",children:String(t.email)}),t.phone&&e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:String(t.phone)})]})]},l)})}),s?.id&&e.jsx("div",{className:"mt-4",children:e.jsx(ct,{targetType:"email",targetId:s.id})})]}),e.jsx("div",{className:"px-5 py-4 border-t border-[var(--gm-border-primary)]",children:e.jsxs("div",{className:"p-4 rounded-lg border border-red-500/20 bg-red-500/5",children:[e.jsx("p",{className:"text-xs font-semibold text-red-500 mb-1",children:"Danger Zone"}),e.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)] mb-3",children:"Deleting this email will permanently remove all associated data."}),N?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:Nt,disabled:z.isPending,onClick:Fe,children:[z.isPending?e.jsx(J,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(ye,{className:"w-3.5 h-3.5"})," Confirm Delete"]}),e.jsx("button",{className:ne,onClick:()=>F(!1),children:"Cancel"})]}):e.jsxs("button",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-red-500/10 text-red-500 border border-red-500/30 hover:bg-red-500/20 transition-colors",onClick:()=>F(!0),children:[e.jsx(ye,{className:"w-3.5 h-3.5"})," Delete Email"]})]})})]})]})}function U({title:s,icon:m,color:p,count:n,children:o}){return e.jsxs("div",{children:[e.jsxs("h3",{className:h("text-xs font-semibold uppercase tracking-wider mb-3 flex items-center gap-2",p),children:[e.jsx(m,{className:"w-4 h-4"})," ",s,e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)] ml-auto",children:n})]}),e.jsx("div",{className:"space-y-2",children:o})]})}function kt(s){if(s===0)return"0 B";const m=1024,p=["B","KB","MB"],n=Math.floor(Math.log(s)/Math.log(m));return parseFloat((s/Math.pow(m,n)).toFixed(1))+" "+p[n]}function we({open:s,onClose:m,mode:p="compose",replyTo:n}){const o=p==="reply"&&!!n,f=p==="forward"&&!!n,[b,E]=i.useState("compose"),[x,j]=i.useState(o?String(n?.from_email||n?.from||""):""),[N,F]=i.useState(""),[z,G]=i.useState(o?`Re: ${String(n?.subject||"")}`:f?`Fwd: ${String(n?.subject||"")}`:""),[w,_]=i.useState(f?`

---------- Forwarded message ----------
From: ${String(n?.from||n?.from_name||"")}
Date: ${n?.date?new Date(String(n.date)).toLocaleString():""}
Subject: ${String(n?.subject||"")}

${String(n?.body||n?.body_text||"")}`:o?`

> On ${n?.date?new Date(String(n.date)).toLocaleString():""}, ${String(n?.from||n?.from_name||"")} wrote:
> ${String(n?.body||n?.body_text||"").split(`
`).join(`
> `)}`:""),[S,K]=i.useState(""),[R,O]=i.useState(!1),[r,d]=i.useState(!1),[g,M]=i.useState(""),P=i.useRef(null),D=i.useRef(null),[k,L]=i.useState(""),[q,W]=i.useState(!1),[v,B]=i.useState(""),Y=Qe(),X=Ve(),Z=Je(),I=()=>{j(""),F(""),G(""),_(""),K(""),M(""),D.current=null,L(""),B(""),m()},se=async()=>{if(b==="compose"){if(!x.trim()||!w.trim()){c.error("To and Body are required");return}const a=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,A=x.split(",").map(u=>u.trim()).filter(Boolean).filter(u=>!a.test(u));if(A.length>0){c.error(`Invalid email address: ${A[0]}`);return}d(!0);try{await Y.mutateAsync({to:x.split(",").map(u=>u.trim()).filter(Boolean),cc:N?N.split(",").map(u=>u.trim()).filter(Boolean):void 0,subject:z,body:w,replyToId:o?String(n?.id||""):void 0}),c.success(o?"Reply sent":f?"Email forwarded":"Email sent"),I()}catch{c.error("Failed to send email")}finally{d(!1)}}else if(b==="paste"){if(S.trim().length<10){c.error("Please paste email content (min 10 chars)");return}d(!0);try{await X.mutateAsync({emailText:S,...v?{sprintId:v}:{}}),c.success("Email imported and analyzed"),I()}catch{c.error("Failed to import email")}finally{d(!1)}}else if(b==="upload"){const a=D.current;if(!a){c.error("Please select a file");return}d(!0);try{const y=await Ct(a),A=a.name.toLowerCase().endsWith(".msg"),u=v?{sprintId:v}:{};await X.mutateAsync(A?{msgBase64:y,filename:a.name,...u}:{emlBase64:y,filename:a.name,...u}),c.success("Email file imported and analyzed"),I()}catch{c.error("Failed to import email file")}finally{d(!1)}}},C=i.useCallback(()=>{k&&(_(k),L(""))},[k]),H=async()=>{if(n?.id){W(!0);try{const a=await rt.post(`/api/emails/${n.id}/response`,{});a.ok||a.draft?(L(a.draft||a.response||""),c.success("AI draft generated")):c.error("Failed to generate draft")}catch{c.error("Failed to generate draft")}finally{W(!1)}}},Q=i.useCallback(a=>{a.preventDefault();const y=a.dataTransfer.files[0];y&&(y.name.endsWith(".eml")||y.name.endsWith(".msg"))&&(D.current=y,M(y.name))},[]),T=o?"Reply":f?"Forward":"Compose Email",V=b==="compose"?o?"Send Reply":f?"Forward":"Send":"Import & Analyze",$=o||f?[{key:"compose",label:"Compose"}]:[{key:"compose",label:"Compose"},{key:"paste",label:"Paste Text"},{key:"upload",label:"Upload .eml/.msg"}];return e.jsx(Ke,{open:s,onOpenChange:a=>!a&&I(),children:e.jsxs(Xe,{className:"max-w-2xl p-0 overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsx(Ye,{className:"sr-only",children:T}),e.jsx("div",{className:"px-5 py-4 shrink-0",style:{background:"linear-gradient(to right, rgba(37,99,235,0.25), rgba(37,99,235,0.08))"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-base font-semibold text-white",children:T}),e.jsx("button",{onClick:I,className:"w-8 h-8 rounded-lg flex items-center justify-center text-slate-400 hover:bg-white/10 transition-colors",children:e.jsx(Ze,{className:"w-4 h-4"})})]})}),$.length>1&&e.jsx("div",{className:"flex px-5 border-b border-[var(--gm-border-primary)] shrink-0",style:{borderColor:"var(--gm-border-primary)"},children:$.map(a=>e.jsx("button",{onClick:()=>E(a.key),className:h("px-4 py-2.5 text-xs font-medium border-b-2 transition-colors",b===a.key?"border-blue-500 text-blue-400":"border-transparent text-slate-400 hover:text-slate-200"),children:a.label},a.key))}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-4 bg-[var(--gm-surface-primary)]",style:{backgroundColor:"var(--gm-surface-primary)"},children:[b==="compose"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-semibold text-gm-text-tertiary uppercase tracking-wider",children:"To *"}),e.jsx("input",{value:x,onChange:a=>j(a.target.value),placeholder:"recipient@example.com (comma-separated)",className:"mt-1 w-full bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-2 text-sm text-gm-text-primary placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-gm-border-focus"})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{onClick:()=>O(!R),className:"text-[10px] text-gm-interactive-primary hover:underline flex items-center gap-1",children:[R?e.jsx(et,{className:"w-3 h-3"}):e.jsx(tt,{className:"w-3 h-3"})," CC"]})}),R&&e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-semibold text-gm-text-tertiary uppercase tracking-wider",children:"CC"}),e.jsx("input",{value:N,onChange:a=>F(a.target.value),placeholder:"cc@example.com",className:"mt-1 w-full bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-2 text-sm text-gm-text-primary placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-gm-border-focus"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-semibold text-gm-text-tertiary uppercase tracking-wider",children:"Subject"}),e.jsx("input",{value:z,onChange:a=>G(a.target.value),placeholder:"Email subject",className:"mt-1 w-full bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-2 text-sm text-gm-text-primary placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-gm-border-focus"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"text-[10px] font-semibold text-gm-text-tertiary uppercase tracking-wider",children:"Body *"}),o&&n?.id&&e.jsxs("button",{onClick:H,disabled:q,className:"text-[10px] text-gm-interactive-primary hover:underline flex items-center gap-1 disabled:opacity-50",children:[q?e.jsx(J,{className:"w-3 h-3 animate-spin"}):e.jsx(re,{className:"w-3 h-3"})," Generate AI Draft"]})]}),e.jsx("textarea",{value:w,onChange:a=>_(a.target.value),placeholder:"Write your message...",rows:10,className:"w-full bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-2 text-sm text-gm-text-primary placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-gm-border-focus resize-y leading-relaxed"})]}),k&&e.jsxs("div",{className:"bg-blue-600/5 border border-blue-600/20 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-[10px] uppercase tracking-wider text-gm-interactive-primary font-semibold flex items-center gap-1",children:[e.jsx(re,{className:"w-3 h-3"})," AI Draft"]}),e.jsx("button",{onClick:C,className:"text-[10px] px-2 py-0.5 rounded bg-gm-interactive-primary text-gm-text-on-brand hover:bg-gm-interactive-primary-hover",children:"Use this draft"})]}),e.jsx("pre",{className:"text-xs text-gm-text-primary whitespace-pre-wrap font-sans",children:k})]})]})}),b==="paste"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gm-text-primary mb-2 block",children:"Paste email content:"}),e.jsx("textarea",{value:S,onChange:a=>K(a.target.value),placeholder:`Paste the full email content here...

Include headers if available:
From: sender@example.com
To: recipient@example.com
Subject: Meeting notes
Date: Jan 31, 2026

Email body text...`,rows:12,className:"w-full bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-4 py-3 text-sm text-gm-text-primary placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-gm-border-focus resize-y font-mono leading-relaxed"}),e.jsx("p",{className:"text-[10px] text-gm-text-tertiary mt-1.5",children:"Include headers (From, To, Subject, Date) for better parsing. AI will analyze and extract entities."})]}),b==="upload"&&e.jsxs("div",{children:[e.jsxs("div",{className:"border-2 border-dashed border-gm-border-primary rounded-xl p-12 text-center hover:border-blue-600/30 transition-colors cursor-pointer bg-[var(--gm-surface-hover)]",onClick:()=>P.current?.click(),onDragOver:a=>a.preventDefault(),onDrop:Q,children:[e.jsx(te,{className:"w-12 h-12 mx-auto mb-3 text-gray-600"}),e.jsx("p",{className:"text-sm font-medium text-gm-interactive-primary",children:"Drop email file here"}),e.jsx("p",{className:"text-xs text-gm-text-tertiary mt-1",children:"or click to browse Â· .eml, .msg"}),e.jsx("input",{ref:P,type:"file",className:"hidden",accept:".eml,.msg",onChange:a=>{a.target.files?.[0]&&(D.current=a.target.files[0],M(a.target.files[0].name))}})]}),g&&e.jsxs("div",{className:"flex items-center gap-3 mt-4 p-3 bg-gm-surface-secondary rounded-lg border border-gm-border-primary",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-600/10 flex items-center justify-center",children:e.jsx(te,{className:"w-5 h-5 text-gm-interactive-primary"})}),e.jsx("span",{className:"text-sm font-medium text-gm-text-primary flex-1 truncate",children:g}),e.jsx("button",{onClick:()=>{D.current=null,M("")},className:"text-gm-text-tertiary hover:text-gm-status-danger text-lg",children:"Ã—"})]}),e.jsx("p",{className:"text-[10px] text-gm-text-tertiary mt-3",children:"Email will be parsed, analyzed with AI, and entities extracted automatically."})]}),b!=="compose"&&(Z.data||[]).length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gm-text-primary mb-1.5 block",children:"Associate with Sprint"}),e.jsxs("select",{value:v,onChange:a=>B(a.target.value),className:"w-full bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-2 text-sm text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus",children:[e.jsx("option",{value:"",children:"No sprint"}),(Z.data||[]).map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 px-5 py-3 border-t border-[var(--gm-border-primary)] shrink-0",style:{borderColor:"var(--gm-border-primary)",backgroundColor:"var(--gm-surface-secondary)"},children:[e.jsx("button",{onClick:I,className:"px-4 py-2 rounded-lg text-slate-300 text-sm font-medium hover:bg-white/10 border border-white/20 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:se,disabled:r,className:"px-4 py-2 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-sm font-medium hover:bg-gm-interactive-primary-hover disabled:opacity-50 flex items-center gap-1.5 transition-colors",children:[r?e.jsx(J,{className:"w-4 h-4 animate-spin"}):e.jsx(ut,{className:"w-4 h-4"}),V]})]})]})})}async function Ct(s){return new Promise((m,p)=>{const n=new FileReader;n.onload=()=>m(n.result.split(",")[1]),n.onerror=p,n.readAsDataURL(s)})}const Se={positive:"bg-gm-status-success-bg text-gm-status-success",neutral:"bg-gm-surface-secondary text-gm-text-tertiary",negative:"bg-gm-status-danger-bg text-gm-status-danger",urgent:"bg-gm-status-danger-bg text-gm-status-danger"},Et={inbound:_e,outbound:Ee,internal:De};function tr(){const[s,m]=i.useState(""),[p,n]=i.useState(""),[o,f]=i.useState(""),[b,E]=i.useState(null),[x,j]=i.useState({open:!1,mode:"compose",replyTo:null}),N=st({requires_response:s==="needs_response"?!0:void 0}),F=at(),z=ke(),G=Ce(),w=i.useMemo(()=>{const r=N.data??[];return Array.isArray(r)?r:r.emails??[]},[N.data]),_=i.useMemo(()=>w.filter(r=>!(o&&!JSON.stringify(r).toLowerCase().includes(o.toLowerCase())||p&&String(r.direction||"")!==p||s==="starred"&&!r.is_starred||s==="unread"&&r.is_read)),[w,o,p,s]),S=F.data;if(b)return e.jsxs(e.Fragment,{children:[e.jsx(St,{email:b,onBack:()=>E(null),onReply:r=>{E(null),j({open:!0,mode:"reply",replyTo:r})},onForward:r=>{E(null),j({open:!0,mode:"forward",replyTo:r})}}),e.jsx(we,{open:x.open,onClose:()=>j({open:!1,mode:"compose",replyTo:null}),mode:x.mode,replyTo:x.replyTo})]});const K=(r,d,g)=>{r.stopPropagation(),z.mutate({id:d,starred:!g})},R=r=>{E(r),r.is_read||G.mutate({id:String(r.id),read:!0})},O=[{label:"Total",value:S?.total??0,color:"text-gm-text-primary",icon:me},{label:"Unread",value:S?.unread??0,color:"text-gm-interactive-primary",icon:ge},{label:"Starred",value:S?.starred??0,color:"text-yellow-500",icon:le},{label:"Needs Response",value:S?.needing_response??0,color:"text-gm-status-warning",icon:ie}];return e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gm-text-primary",children:"Emails"}),e.jsxs("p",{className:"text-xs text-gm-text-tertiary mt-0.5",children:[_.length," email",_.length!==1?"s":""]})]}),e.jsxs("button",{onClick:()=>j({open:!0,mode:"compose",replyTo:null}),className:"px-4 py-2 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-sm font-medium hover:bg-gm-interactive-primary-hover flex items-center gap-2 transition-colors",children:[e.jsx(nt,{className:"w-4 h-4"})," Add Email"]})]}),S&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:O.map(r=>{const d=r.icon;return e.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl px-4 py-3 flex items-center gap-3 hover:border-blue-600/20 transition-colors cursor-pointer",role:"button",tabIndex:0,onClick:()=>{r.label==="Unread"?m(s==="unread"?"":"unread"):r.label==="Starred"?m(s==="starred"?"":"starred"):r.label==="Needs Response"?m(s==="needs_response"?"":"needs_response"):m("")},children:[e.jsx("div",{className:h("w-9 h-9 rounded-lg flex items-center justify-center",r.label==="Total"?"bg-gm-surface-secondary":r.label==="Unread"?"bg-blue-600/10":(r.label==="Starred","bg-yellow-500/10")),children:e.jsx(d,{className:h("w-4.5 h-4.5",r.color)})}),e.jsxs("div",{children:[e.jsx("span",{className:h("text-xl font-bold",r.color),children:String(r.value)}),e.jsx("p",{className:"text-[10px] text-gm-text-tertiary uppercase tracking-wider",children:r.label})]})]},r.label)})}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(it,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gm-text-tertiary"}),e.jsx("input",{value:o,onChange:r=>f(r.target.value),placeholder:"Search emails...","aria-label":"Search emails",className:"w-full pl-9 pr-3 py-2 bg-gm-surface-secondary border border-gm-border-primary rounded-lg text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus"})]}),[{key:"needs_response",label:"Needs Response",icon:ie,activeColor:"bg-gm-status-warning-bg border-yellow-500/30 text-gm-status-warning"},{key:"starred",label:"Starred",icon:le,activeColor:"bg-yellow-500/10 border-yellow-500/30 text-yellow-500"},{key:"unread",label:"Unread",icon:ge,activeColor:"bg-blue-600/10 border-blue-600/30 text-gm-interactive-primary"}].map(r=>{const d=r.icon,g=s===r.key;return e.jsxs("button",{onClick:()=>m(g?"":r.key),"aria-pressed":g,className:h("px-2.5 py-2 rounded-lg text-xs font-medium transition-colors border flex items-center gap-1.5",g?r.activeColor:"bg-gm-surface-secondary border-gm-border-primary text-gm-text-tertiary hover:text-gm-text-primary"),children:[e.jsx(d,{className:"w-3.5 h-3.5"})," ",r.label]},r.key)}),e.jsxs("select",{value:p,onChange:r=>n(r.target.value),"aria-label":"Filter by direction",className:"bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-2 text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus",children:[e.jsx("option",{value:"",children:"All directions"}),e.jsx("option",{value:"inbound",children:"Inbound"}),e.jsx("option",{value:"outbound",children:"Outbound"}),e.jsx("option",{value:"internal",children:"Internal"})]})]}),N.error?e.jsx(ht,{message:"Failed to load emails.",onRetry:()=>N.refetch()}):N.isLoading?e.jsx(lt,{}):_.length===0?e.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-8 text-center text-gm-text-tertiary",children:[e.jsx(me,{className:"h-12 w-12 mx-auto mb-4 text-gray-500"}),w.length===0?"No emails imported yet. Click 'Add Email' to get started.":"No emails match your filters."]}):e.jsx("div",{className:"space-y-1.5",children:_.map(r=>{const d=!!r.is_starred,g=!!r.is_read,M=!!r.response_drafted||!!r.draft_response,P=!!r.response_sent,D=!!r.ai_summary,k=Et[String(r.direction||"")]||null,L=String(r.subject||"No subject"),q=String(r.from||r.from_name||r.sender||""),W=r.date?new Date(String(r.date)).toLocaleDateString():"",v=String(r.ai_summary||r.body_text||r.body||"").substring(0,120);return e.jsx("div",{className:h("bg-gm-surface-primary border border-gm-border-primary rounded-xl p-3.5 hover:border-blue-600/30 transition-all cursor-pointer group",!g&&"border-l-[3px] border-l-gm-interactive-primary"),onClick:()=>R(r),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:B=>K(B,String(r.id),d),className:"flex-shrink-0",children:e.jsx(le,{className:h("w-4 h-4 transition-colors",d?"fill-yellow-400 text-yellow-400":"text-gray-600 hover:text-yellow-400")})}),k?e.jsx(k,{className:h("w-5 h-5 flex-shrink-0",g?"text-gm-text-tertiary":"text-gm-interactive-primary")}):e.jsx(me,{className:h("w-5 h-5 flex-shrink-0",g?"text-gm-text-tertiary":"text-gm-interactive-primary")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("p",{className:h("text-sm truncate transition-colors group-hover:text-gm-interactive-primary",g?"text-gm-text-primary":"text-gm-text-primary font-semibold"),children:L})}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx("span",{className:"text-[10px] text-gm-text-tertiary truncate max-w-[200px]",children:q}),W&&e.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:W})]}),v&&e.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5 truncate",children:v})]}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0 flex-wrap justify-end",children:[r.requires_response&&!P&&e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-warning-bg text-gm-status-warning font-medium flex items-center gap-1",children:[e.jsx(ie,{className:"w-3 h-3"})," Needs Response"]}),P&&e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-success-bg text-gm-status-success font-medium",children:"Responded"}),M&&!P&&e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-blue-600/10 text-gm-interactive-primary font-medium",children:"Draft"}),r.sentiment&&e.jsx("span",{className:h("text-[10px] px-2 py-0.5 rounded-full font-medium capitalize",Se[String(r.sentiment)]||Se.neutral),children:String(r.sentiment)}),r.ai_category&&e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-blue-600/10 text-gm-interactive-primary font-medium capitalize",children:String(r.ai_category)}),D&&e.jsx(re,{className:"w-3.5 h-3.5 text-blue-500"})]})]})},String(r.id))})}),e.jsx(we,{open:x.open,onClose:()=>j({open:!1,mode:"compose",replyTo:null}),mode:x.mode,replyTo:x.replyTo})]})}export{tr as default};
//# sourceMappingURL=EmailsPage-CUHlsnUj.js.map
