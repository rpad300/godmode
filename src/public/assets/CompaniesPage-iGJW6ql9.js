import{c as Fe,i as Nt,e as ct,fK as at,r as j,fL as kt,j as e,fM as Ct,fN as St,fO as He,aq as _e,a as C,N as le,K as qe,Z as dt,ak as At,fP as Ge,J as ut,am as _t,fQ as Et,al as mt,O as S,b8 as rt,T as Ft,b6 as De}from"./main-BKbBKYvC.js";import{I as ue}from"./input-DsK7IqD2.js";import{A as Pt}from"./AvatarUpload-DVZbQ3jc.js";import{E as Tt}from"./ErrorState-BgEaU0QT.js";import{A as Rt,a as Ot,b as $t,c as Dt,d as Lt,e as It,f as zt,g as Mt}from"./alert-dialog-BuwvV1Iy.js";import{P as Ut}from"./plus-BG5YpVIb.js";import{E as Kt}from"./eye-DDSd_vfm.js";import{P as Bt}from"./pen-BADy_74g.js";import{A as Ye}from"./arrow-left-ZBUT7vL6.js";import{G as gt}from"./globe-2bdQFbui.js";import{E as pt}from"./external-link-DJUZ9Zlf.js";import{S as Ke}from"./sparkles-BJxATUBg.js";import{U as Ht}from"./upload-BtADKM1s.js";import{S as qt}from"./save-CuHcaXm4.js";import{T as Gt}from"./ProfilePage-AdV8lZ0-.js";import{P as Yt}from"./printer-Y5eU2yM0.js";import"./link-2-CWyrMbe7.js";import"./index-CKDzCnkP.js";import"./monitor-YqaueyEx.js";import"./key-Cfbr9NfN.js";import"./circle-x-DCC498lp.js";import"./lightbulb-CVgMn_Uk.js";import"./list-checks-CRGlPMsc.js";const Wt=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],Vt=Fe("code-xml",Wt);const Zt=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Qt=Fe("maximize-2",Zt);const Xt=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],Jt=Fe("minimize-2",Xt);const ea=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Ae=Fe("palette",ea);const ta=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],aa=Fe("rotate-ccw",ta);var Y={},st;function ra(){if(st)return Y;st=1;var u=Y&&Y.__assign||function(){return u=Object.assign||function(s){for(var t,c=1,h=arguments.length;c<h;c++){t=arguments[c];for(var g in t)Object.prototype.hasOwnProperty.call(t,g)&&(s[g]=t[g])}return s},u.apply(this,arguments)},w=Y&&Y.__createBinding||(Object.create?(function(s,t,c,h){h===void 0&&(h=c);var g=Object.getOwnPropertyDescriptor(t,c);(!g||("get"in g?!t.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return t[c]}}),Object.defineProperty(s,h,g)}):(function(s,t,c,h){h===void 0&&(h=c),s[h]=t[c]})),n=Y&&Y.__setModuleDefault||(Object.create?(function(s,t){Object.defineProperty(s,"default",{enumerable:!0,value:t})}):function(s,t){s.default=t}),f=Y&&Y.__importStar||function(s){if(s&&s.__esModule)return s;var t={};if(s!=null)for(var c in s)c!=="default"&&Object.prototype.hasOwnProperty.call(s,c)&&w(t,s,c);return n(t,s),t},m=Y&&Y.__rest||function(s,t){var c={};for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&t.indexOf(h)<0&&(c[h]=s[h]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,h=Object.getOwnPropertySymbols(s);g<h.length;g++)t.indexOf(h[g])<0&&Object.prototype.propertyIsEnumerable.call(s,h[g])&&(c[h[g]]=s[h[g]]);return c};Object.defineProperty(Y,"__esModule",{value:!0});var v=f(Nt()),P=89,l=90,y=77,T=57,z=219,F=222,R=192,W=100,M=3e3,p=typeof window<"u"&&"navigator"in window&&/Win/i.test(navigator.platform),b=typeof window<"u"&&"navigator"in window&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),A="npm__react-simple-code-editor__textarea",a=`
/**
 * Reset the text fill color so that placeholder is visible
 */
.`.concat(A,`:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .`).concat(A,` {
    color: transparent !important;
  }

  .`).concat(A,`::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
`),r=v.forwardRef(function(t,c){var h=t.autoFocus,g=t.disabled,_=t.form,x=t.highlight,I=t.ignoreTabKey,V=I===void 0?!1:I,ae=t.insertSpaces,J=ae===void 0?!0:ae,be=t.maxLength,me=t.minLength,$=t.name,B=t.onBlur,ee=t.onClick,oe=t.onFocus,U=t.onKeyDown,we=t.onKeyUp,H=t.onValueChange,q=t.padding,D=q===void 0?0:q,re=t.placeholder,ge=t.preClassName,fe=t.readOnly,se=t.required,o=t.style,K=t.tabSize,ce=K===void 0?2:K,Pe=t.textareaClassName,Te=t.textareaId,We=t.value,ht=m(t,["autoFocus","disabled","form","highlight","ignoreTabKey","insertSpaces","maxLength","minLength","name","onBlur","onClick","onFocus","onKeyDown","onKeyUp","onValueChange","padding","placeholder","preClassName","readOnly","required","style","tabSize","textareaClassName","textareaId","value"]),O=v.useRef({stack:[],offset:-1}),Re=v.useRef(null),Ve=v.useState(!0),xt=Ve[0],ft=Ve[1],Ze={paddingTop:typeof D=="object"?D.top:D,paddingRight:typeof D=="object"?D.right:D,paddingBottom:typeof D=="object"?D.bottom:D,paddingLeft:typeof D=="object"?D.left:D},Le=x(We),pe=function(d,E){return d.substring(0,E).split(`
`)},Oe=v.useCallback(function(d,E){var N,k,L;E===void 0&&(E=!1);var G=O.current,ne=G.stack,je=G.offset;if(ne.length&&je>-1){O.current.stack=ne.slice(0,je+1);var Ne=O.current.stack.length;if(Ne>W){var ye=Ne-W;O.current.stack=ne.slice(ye,Ne),O.current.offset=Math.max(O.current.offset-ye,0)}}var te=Date.now();if(E){var de=O.current.stack[O.current.offset];if(de&&te-de.timestamp<M){var ke=/[^a-z0-9]([a-z0-9]+)$/i,Z=(N=pe(de.value,de.selectionStart).pop())===null||N===void 0?void 0:N.match(ke),Ce=(k=pe(d.value,d.selectionStart).pop())===null||k===void 0?void 0:k.match(ke);if(Z?.[1]&&(!((L=Ce?.[1])===null||L===void 0)&&L.startsWith(Z[1]))){O.current.stack[O.current.offset]=u(u({},d),{timestamp:te});return}}}O.current.stack.push(u(u({},d),{timestamp:te})),O.current.offset++},[]),Qe=v.useCallback(function(){var d=Re.current;if(d){var E=d.value,N=d.selectionStart,k=d.selectionEnd;Oe({value:E,selectionStart:N,selectionEnd:k})}},[Oe]),Ie=function(d){var E=Re.current;E&&(E.value=d.value,E.selectionStart=d.selectionStart,E.selectionEnd=d.selectionEnd,H?.(d.value))},ve=function(d){var E=Re.current,N=O.current.stack[O.current.offset];N&&E&&(O.current.stack[O.current.offset]=u(u({},N),{selectionStart:E.selectionStart,selectionEnd:E.selectionEnd})),Oe(d),Ie(d)},vt=function(){var d=O.current,E=d.stack,N=d.offset,k=E[N-1];k&&(Ie(k),O.current.offset=Math.max(N-1,0))},yt=function(){var d=O.current,E=d.stack,N=d.offset,k=E[N+1];k&&(Ie(k),O.current.offset=Math.min(N+1,E.length-1))},bt=function(d){if(!(U&&(U(d),d.defaultPrevented))){d.key==="Escape"&&d.currentTarget.blur();var E=d.currentTarget,N=E.value,k=E.selectionStart,L=E.selectionEnd,G=(J?" ":"	").repeat(ce);if(d.key==="Tab"&&!V&&xt)if(d.preventDefault(),d.shiftKey){var ne=pe(N,k),je=ne.length-1,Ne=pe(N,L).length-1,ye=N.split(`
`).map(function(Se,Je){return Je>=je&&Je<=Ne&&Se.startsWith(G)?Se.substring(G.length):Se}).join(`
`);if(N!==ye){var te=ne[je];ve({value:ye,selectionStart:te?.startsWith(G)?k-G.length:k,selectionEnd:L-(N.length-ye.length)})}}else if(k!==L){var ne=pe(N,k),de=ne.length-1,ke=pe(N,L).length-1,te=ne[de];ve({value:N.split(`
`).map(function(et,tt){return tt>=de&&tt<=ke?G+et:et}).join(`
`),selectionStart:te&&/\S/.test(te)?k+G.length:k,selectionEnd:L+G.length*(ke-de+1)})}else{var Z=k+G.length;ve({value:N.substring(0,k)+G+N.substring(L),selectionStart:Z,selectionEnd:Z})}else if(d.key==="Backspace"){var Ce=k!==L,jt=N.substring(0,k);if(jt.endsWith(G)&&!Ce){d.preventDefault();var Z=k-G.length;ve({value:N.substring(0,k-G.length)+N.substring(L),selectionStart:Z,selectionEnd:Z})}}else if(d.key==="Enter"){if(k===L){var ze=pe(N,k).pop(),$e=ze?.match(/^\s+/);if($e?.[0]){d.preventDefault();var Xe=`
`+$e[0],Z=k+Xe.length;ve({value:N.substring(0,k)+Xe+N.substring(L),selectionStart:Z,selectionEnd:Z})}}}else if(d.keyCode===T||d.keyCode===z||d.keyCode===F||d.keyCode===R){var ie=void 0;d.keyCode===T&&d.shiftKey?ie=["(",")"]:d.keyCode===z?d.shiftKey?ie=["{","}"]:ie=["[","]"]:d.keyCode===F?d.shiftKey?ie=['"','"']:ie=["'","'"]:d.keyCode===R&&!d.shiftKey&&(ie=["`","`"]),k!==L&&ie&&(d.preventDefault(),ve({value:N.substring(0,k)+ie[0]+N.substring(k,L)+ie[1]+N.substring(L),selectionStart:k,selectionEnd:L+2}))}else(b?d.metaKey&&d.keyCode===l:d.ctrlKey&&d.keyCode===l)&&!d.shiftKey&&!d.altKey?(d.preventDefault(),vt()):(b?d.metaKey&&d.keyCode===l&&d.shiftKey:p?d.ctrlKey&&d.keyCode===P:d.ctrlKey&&d.keyCode===l&&d.shiftKey)&&!d.altKey?(d.preventDefault(),yt()):d.keyCode===y&&d.ctrlKey&&(!b||d.shiftKey)&&(d.preventDefault(),ft(function(Se){return!Se}))}},wt=function(d){var E=d.currentTarget,N=E.value,k=E.selectionStart,L=E.selectionEnd;Oe({value:N,selectionStart:k,selectionEnd:L},!0),H(N)};return v.useEffect(function(){Qe()},[Qe]),v.useImperativeHandle(c,function(){return{get session(){return{history:O.current}},set session(d){O.current=d.history}}},[]),v.createElement("div",u({},ht,{style:u(u({},i.container),o)}),v.createElement("pre",u({className:ge,"aria-hidden":"true",style:u(u(u({},i.editor),i.highlight),Ze)},typeof Le=="string"?{dangerouslySetInnerHTML:{__html:Le+"<br />"}}:{children:Le})),v.createElement("textarea",{ref:function(d){return Re.current=d},style:u(u(u({},i.editor),i.textarea),Ze),className:A+(Pe?" ".concat(Pe):""),id:Te,value:We,onChange:wt,onKeyDown:bt,onClick:ee,onKeyUp:we,onFocus:oe,onBlur:B,disabled:g,form:_,maxLength:be,minLength:me,name:$,placeholder:re,readOnly:fe,required:se,autoFocus:h,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),v.createElement("style",{dangerouslySetInnerHTML:{__html:a}}))}),i={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}};return Y.default=r,Y}var sa=ra();const na=ct(sa);var Me={exports:{}},nt;function ia(){return nt||(nt=1,(function(u){var w=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};var n=(function(f){var m=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,v=0,P={},l={manual:f.Prism&&f.Prism.manual,disableWorkerMessageHandler:f.Prism&&f.Prism.disableWorkerMessageHandler,util:{encode:function a(r){return r instanceof y?new y(r.type,a(r.content),r.alias):Array.isArray(r)?r.map(a):r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(a){return Object.prototype.toString.call(a).slice(8,-1)},objId:function(a){return a.__id||Object.defineProperty(a,"__id",{value:++v}),a.__id},clone:function a(r,i){i=i||{};var s,t;switch(l.util.type(r)){case"Object":if(t=l.util.objId(r),i[t])return i[t];s={},i[t]=s;for(var c in r)r.hasOwnProperty(c)&&(s[c]=a(r[c],i));return s;case"Array":return t=l.util.objId(r),i[t]?i[t]:(s=[],i[t]=s,r.forEach(function(h,g){s[g]=a(h,i)}),s);default:return r}},getLanguage:function(a){for(;a;){var r=m.exec(a.className);if(r)return r[1].toLowerCase();a=a.parentElement}return"none"},setLanguage:function(a,r){a.className=a.className.replace(RegExp(m,"gi"),""),a.classList.add("language-"+r)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(s){var a=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(s.stack)||[])[1];if(a){var r=document.getElementsByTagName("script");for(var i in r)if(r[i].src==a)return r[i]}return null}},isActive:function(a,r,i){for(var s="no-"+r;a;){var t=a.classList;if(t.contains(r))return!0;if(t.contains(s))return!1;a=a.parentElement}return!!i}},languages:{plain:P,plaintext:P,text:P,txt:P,extend:function(a,r){var i=l.util.clone(l.languages[a]);for(var s in r)i[s]=r[s];return i},insertBefore:function(a,r,i,s){s=s||l.languages;var t=s[a],c={};for(var h in t)if(t.hasOwnProperty(h)){if(h==r)for(var g in i)i.hasOwnProperty(g)&&(c[g]=i[g]);i.hasOwnProperty(h)||(c[h]=t[h])}var _=s[a];return s[a]=c,l.languages.DFS(l.languages,function(x,I){I===_&&x!=a&&(this[x]=c)}),c},DFS:function a(r,i,s,t){t=t||{};var c=l.util.objId;for(var h in r)if(r.hasOwnProperty(h)){i.call(r,h,r[h],s||h);var g=r[h],_=l.util.type(g);_==="Object"&&!t[c(g)]?(t[c(g)]=!0,a(g,i,null,t)):_==="Array"&&!t[c(g)]&&(t[c(g)]=!0,a(g,i,h,t))}}},plugins:{},highlightAll:function(a,r){l.highlightAllUnder(document,a,r)},highlightAllUnder:function(a,r,i){var s={callback:i,container:a,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",s),s.elements=Array.prototype.slice.apply(s.container.querySelectorAll(s.selector)),l.hooks.run("before-all-elements-highlight",s);for(var t=0,c;c=s.elements[t++];)l.highlightElement(c,r===!0,s.callback)},highlightElement:function(a,r,i){var s=l.util.getLanguage(a),t=l.languages[s];l.util.setLanguage(a,s);var c=a.parentElement;c&&c.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(c,s);var h=a.textContent,g={element:a,language:s,grammar:t,code:h};function _(I){g.highlightedCode=I,l.hooks.run("before-insert",g),g.element.innerHTML=g.highlightedCode,l.hooks.run("after-highlight",g),l.hooks.run("complete",g),i&&i.call(g.element)}if(l.hooks.run("before-sanity-check",g),c=g.element.parentElement,c&&c.nodeName.toLowerCase()==="pre"&&!c.hasAttribute("tabindex")&&c.setAttribute("tabindex","0"),!g.code){l.hooks.run("complete",g),i&&i.call(g.element);return}if(l.hooks.run("before-highlight",g),!g.grammar){_(l.util.encode(g.code));return}if(r&&f.Worker){var x=new Worker(l.filename);x.onmessage=function(I){_(I.data)},x.postMessage(JSON.stringify({language:g.language,code:g.code,immediateClose:!0}))}else _(l.highlight(g.code,g.grammar,g.language))},highlight:function(a,r,i){var s={code:a,grammar:r,language:i};if(l.hooks.run("before-tokenize",s),!s.grammar)throw new Error('The language "'+s.language+'" has no grammar.');return s.tokens=l.tokenize(s.code,s.grammar),l.hooks.run("after-tokenize",s),y.stringify(l.util.encode(s.tokens),s.language)},tokenize:function(a,r){var i=r.rest;if(i){for(var s in i)r[s]=i[s];delete r.rest}var t=new F;return R(t,t.head,a),z(a,t,r,t.head,0),M(t)},hooks:{all:{},add:function(a,r){var i=l.hooks.all;i[a]=i[a]||[],i[a].push(r)},run:function(a,r){var i=l.hooks.all[a];if(!(!i||!i.length))for(var s=0,t;t=i[s++];)t(r)}},Token:y};f.Prism=l;function y(a,r,i,s){this.type=a,this.content=r,this.alias=i,this.length=(s||"").length|0}y.stringify=function a(r,i){if(typeof r=="string")return r;if(Array.isArray(r)){var s="";return r.forEach(function(_){s+=a(_,i)}),s}var t={type:r.type,content:a(r.content,i),tag:"span",classes:["token",r.type],attributes:{},language:i},c=r.alias;c&&(Array.isArray(c)?Array.prototype.push.apply(t.classes,c):t.classes.push(c)),l.hooks.run("wrap",t);var h="";for(var g in t.attributes)h+=" "+g+'="'+(t.attributes[g]||"").replace(/"/g,"&quot;")+'"';return"<"+t.tag+' class="'+t.classes.join(" ")+'"'+h+">"+t.content+"</"+t.tag+">"};function T(a,r,i,s){a.lastIndex=r;var t=a.exec(i);if(t&&s&&t[1]){var c=t[1].length;t.index+=c,t[0]=t[0].slice(c)}return t}function z(a,r,i,s,t,c){for(var h in i)if(!(!i.hasOwnProperty(h)||!i[h])){var g=i[h];g=Array.isArray(g)?g:[g];for(var _=0;_<g.length;++_){if(c&&c.cause==h+","+_)return;var x=g[_],I=x.inside,V=!!x.lookbehind,ae=!!x.greedy,J=x.alias;if(ae&&!x.pattern.global){var be=x.pattern.toString().match(/[imsuy]*$/)[0];x.pattern=RegExp(x.pattern.source,be+"g")}for(var me=x.pattern||x,$=s.next,B=t;$!==r.tail&&!(c&&B>=c.reach);B+=$.value.length,$=$.next){var ee=$.value;if(r.length>a.length)return;if(!(ee instanceof y)){var oe=1,U;if(ae){if(U=T(me,B,a,V),!U||U.index>=a.length)break;var D=U.index,we=U.index+U[0].length,H=B;for(H+=$.value.length;D>=H;)$=$.next,H+=$.value.length;if(H-=$.value.length,B=H,$.value instanceof y)continue;for(var q=$;q!==r.tail&&(H<we||typeof q.value=="string");q=q.next)oe++,H+=q.value.length;oe--,ee=a.slice(B,H),U.index-=B}else if(U=T(me,0,ee,V),!U)continue;var D=U.index,re=U[0],ge=ee.slice(0,D),fe=ee.slice(D+re.length),se=B+ee.length;c&&se>c.reach&&(c.reach=se);var o=$.prev;ge&&(o=R(r,o,ge),B+=ge.length),W(r,o,oe);var K=new y(h,I?l.tokenize(re,I):re,J,re);if($=R(r,o,K),fe&&R(r,$,fe),oe>1){var ce={cause:h+","+_,reach:se};z(a,r,i,$.prev,B,ce),c&&ce.reach>c.reach&&(c.reach=ce.reach)}}}}}}function F(){var a={value:null,prev:null,next:null},r={value:null,prev:a,next:null};a.next=r,this.head=a,this.tail=r,this.length=0}function R(a,r,i){var s=r.next,t={value:i,prev:r,next:s};return r.next=t,s.prev=t,a.length++,t}function W(a,r,i){for(var s=r.next,t=0;t<i&&s!==a.tail;t++)s=s.next;r.next=s,s.prev=r,a.length-=t}function M(a){for(var r=[],i=a.head.next;i!==a.tail;)r.push(i.value),i=i.next;return r}if(!f.document)return f.addEventListener&&(l.disableWorkerMessageHandler||f.addEventListener("message",function(a){var r=JSON.parse(a.data),i=r.language,s=r.code,t=r.immediateClose;f.postMessage(l.highlight(s,l.languages[i],i)),t&&f.close()},!1)),l;var p=l.util.currentScript();p&&(l.filename=p.src,p.hasAttribute("data-manual")&&(l.manual=!0));function b(){l.manual||l.highlightAll()}if(!l.manual){var A=document.readyState;A==="loading"||A==="interactive"&&p&&p.defer?document.addEventListener("DOMContentLoaded",b):window.requestAnimationFrame?window.requestAnimationFrame(b):window.setTimeout(b,16)}return l})(w);u.exports&&(u.exports=n),typeof at<"u"&&(at.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(f){f.type==="entity"&&(f.attributes.title=f.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(m,v){var P={};P["language-"+v]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[v]},P.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:P}};l["language-"+v]={pattern:/[\s\S]+/,inside:n.languages[v]};var y={};y[m]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return m}),"i"),lookbehind:!0,greedy:!0,inside:l},n.languages.insertBefore("markup","cdata",y)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(f,m){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+f+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[m,"language-"+m],inside:n.languages[m]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,(function(f){var m=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;f.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+m.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+m.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+m.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+m.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:m,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},f.languages.css.atrule.inside.rest=f.languages.css;var v=f.languages.markup;v&&(v.tag.addInlined("style","css"),v.tag.addAttribute("style","css"))})(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,(function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var f="Loading…",m=function(p,b){return"✖ Error "+p+" while fetching file: "+b},v="✖ Error: File does not exist or is empty",P={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",y="loading",T="loaded",z="failed",F="pre[data-src]:not(["+l+'="'+T+'"]):not(['+l+'="'+y+'"])';function R(p,b,A){var a=new XMLHttpRequest;a.open("GET",p,!0),a.onreadystatechange=function(){a.readyState==4&&(a.status<400&&a.responseText?b(a.responseText):a.status>=400?A(m(a.status,a.statusText)):A(v))},a.send(null)}function W(p){var b=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(p||"");if(b){var A=Number(b[1]),a=b[2],r=b[3];return a?r?[A,Number(r)]:[A,void 0]:[A,A]}}n.hooks.add("before-highlightall",function(p){p.selector+=", "+F}),n.hooks.add("before-sanity-check",function(p){var b=p.element;if(b.matches(F)){p.code="",b.setAttribute(l,y);var A=b.appendChild(document.createElement("CODE"));A.textContent=f;var a=b.getAttribute("data-src"),r=p.language;if(r==="none"){var i=(/\.(\w+)$/.exec(a)||[,"none"])[1];r=P[i]||i}n.util.setLanguage(A,r),n.util.setLanguage(b,r);var s=n.plugins.autoloader;s&&s.loadLanguages(r),R(a,function(t){b.setAttribute(l,T);var c=W(b.getAttribute("data-range"));if(c){var h=t.split(/\r\n?|\n/g),g=c[0],_=c[1]==null?h.length:c[1];g<0&&(g+=h.length),g=Math.max(0,Math.min(g-1,h.length)),_<0&&(_+=h.length),_=Math.max(0,Math.min(_,h.length)),t=h.slice(g,_).join(`
`),b.hasAttribute("data-start")||b.setAttribute("data-start",String(g+1))}A.textContent=t,n.highlightElement(A)},function(t){b.setAttribute(l,z),A.textContent=t})}}),n.plugins.fileHighlight={highlight:function(b){for(var A=(b||document).querySelectorAll(F),a=0,r;r=A[a++];)n.highlightElement(r)}};var M=!1;n.fileHighlight=function(){M||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),M=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}})()})(Me)),Me.exports}var la=ia();const it=ct(la);Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(u){u.type==="entity"&&(u.attributes.title=u.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(w,n){var f={};f["language-"+n]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[n]},f.cdata=/^<!\[CDATA\[|\]\]>$/i;var m={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:f}};m["language-"+n]={pattern:/[\s\S]+/,inside:Prism.languages[n]};var v={};v[w]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return w}),"i"),lookbehind:!0,greedy:!0,inside:m},Prism.languages.insertBefore("markup","cdata",v)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(u,w){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+u+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[w,"language-"+w],inside:Prism.languages[w]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;const Ee="rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-[var(--shadow-sm)] transition-all duration-200",X="w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-placeholder)] focus:outline-none focus:border-[var(--gm-border-focus)] focus:shadow-[var(--shadow-focus)] transition-all duration-150",he="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] hover:bg-[var(--gm-interactive-primary-hover)] shadow-sm transition-all duration-150 disabled:opacity-50",xe="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] hover:bg-[var(--gm-interactive-secondary-hover)] border border-[var(--gm-border-primary)] transition-all duration-150",oa="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--color-danger-500)] text-white hover:bg-[var(--color-danger-600)] shadow-sm transition-all duration-150 disabled:opacity-50",Be="text-[10px] font-bold text-[var(--gm-accent-primary)] uppercase tracking-[0.1em]",Q="text-[10px] font-bold text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-1 flex items-center gap-1.5",Ue=[{display:"Ficha de Identidade",key:"ficha_identidade"},{display:"Visão Geral e Posicionamento",key:"visao_geral"},{display:"Produtos e Serviços",key:"produtos_servicos"},{display:"Público-Alvo e Clientes",key:"publico_alvo"},{display:"Equipa e Liderança",key:"equipa_lideranca"},{display:"Presença Digital e Marketing",key:"presenca_digital"},{display:"Análise Competitiva",key:"analise_competitiva"},{display:"Indicadores de Crescimento",key:"indicadores_crescimento"},{display:"Análise SWOT",key:"swot"},{display:"Conclusões e Insights",key:"conclusoes"}],ca=["{{COMPANY_NAME}}","{{LOGO_URL}}","{{COMPANY_LOGO_URL}}","{{PRIMARY_COLOR}}","{{SECONDARY_COLOR}}","{{REPORT_DATA}}"],da=["{{REPORT_DATA}}"],ua=[{value:"corporate",label:"Corporate Classic",desc:"Formal, structured, traditional"},{value:"minimal",label:"Modern Minimal",desc:"Clean, spacious, focus on content"},{value:"tech",label:"Startup Tech",desc:"Bold, modern, geometric"},{value:"consultancy",label:"Consultancy Premium",desc:"Executive, refined, data-friendly"}],ma=[{value:"'Segoe UI', Roboto, Helvetica, Arial, sans-serif",label:"System Default"},{value:"'Georgia', 'Times New Roman', serif",label:"Georgia (Serif)"},{value:"'Inter', 'Helvetica Neue', sans-serif",label:"Inter"},{value:"'Roboto', 'Arial', sans-serif",label:"Roboto"},{value:"'Playfair Display', serif",label:"Playfair Display"},{value:"'Source Sans Pro', sans-serif",label:"Source Sans Pro"},{value:"'Fira Code', monospace",label:"Fira Code (Mono)"}];function ga(u){return da.filter(w=>!u.includes(w))}function pa(u){return ca.filter(w=>u.includes(w))}function lt(u,w){const n=w.brand_assets||{};return u.replace(/\{\{COMPANY_NAME\}\}/g,w.name||"Company Name").replace(/\{\{COMPANY_LOGO_URL\}\}/g,w.logo_url||"").replace(/\{\{LOGO_URL\}\}/g,w.logo_url||"").replace(/\{\{PRIMARY_COLOR\}\}/g,n.primary_color||"#1a1a2e").replace(/\{\{SECONDARY_COLOR\}\}/g,n.secondary_color||"#16213e").replace(/\{\{REPORT_DATA\}\}/g,"<h2>Sample Section Title</h2><p>This is sample report content to demonstrate how your template will look when populated with real data. The actual report will contain analysis, metrics, and insights.</p><h2>Another Section</h2><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>")}function ha(u){const w=new Blob([u],{type:"text/html"}),n=URL.createObjectURL(w),f=window.open(n,"_blank");f&&f.addEventListener("load",()=>{setTimeout(()=>f.print(),600)})}function ot(u,w){const n=new Blob([u],{type:"text/html"}),f=URL.createObjectURL(n),m=document.createElement("a");m.href=f,m.download=w,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(f)}const Ba=()=>{const[u,w]=j.useState("list"),[n,f]=j.useState(null),m=kt(),v=(l,y)=>{f(l),w(y)},P=()=>{w("list"),f(null)};return e.jsxs("div",{className:"space-y-4",children:[u==="list"&&(m.isError?e.jsx(Tt,{message:"Failed to load companies",onRetry:()=>m.refetch()}):e.jsx(xa,{companies:m.data?.companies||[],loading:m.isLoading,onView:l=>v(l,"view"),onEdit:l=>v(l,"edit"),onTemplates:l=>v(l,"templates")})),u==="view"&&n&&e.jsx(fa,{company:n,onBack:P,onEdit:()=>w("edit")}),u==="edit"&&n&&e.jsx(va,{company:n,onBack:P,onTemplates:()=>w("templates"),onUpdated:l=>f(l)}),u==="templates"&&n&&e.jsx(ya,{company:n,onBack:()=>w("edit")})]})};function xa({companies:u,loading:w,onView:n,onEdit:f,onTemplates:m}){const[v,P]=j.useState(""),[l,y]=j.useState(null),T=Ct(),z=St(),F=He(),R=async()=>{if(!v.trim()){S.error("Company name is required");return}try{await T.mutateAsync({name:v.trim()}),S.success("Company created"),P("")}catch(p){S.error(p.message||"Failed to create company")}},W=async p=>{S.info(`Analyzing ${p.name}...`);try{await F.mutateAsync(p.id),S.success(`${p.name} analysis complete`)}catch(b){S.error(b.message||"Analysis failed")}},M=async()=>{if(l)try{await z.mutateAsync(l.id),S.success("Company deleted")}catch(p){S.error(p.message||"Failed to delete")}finally{y(null)}};return e.jsxs(_e.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(Rt,{open:!!l,onOpenChange:p=>{p||y(null)},children:e.jsxs(Ot,{children:[e.jsxs($t,{children:[e.jsxs(Dt,{children:["Delete ",l?.name||"this item","?"]}),e.jsx(Lt,{children:"This action cannot be undone. The company and all its data will be permanently removed."})]}),e.jsxs(It,{children:[e.jsx(zt,{children:"Cancel"}),e.jsx(Mt,{onClick:M,className:oa,children:"Delete"})]})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-[var(--gm-text-primary)]",children:"Companies"}),e.jsx("p",{className:"text-sm text-[var(--gm-text-tertiary)]",children:"Manage company profiles and assets"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ue,{value:v,onChange:p=>P(p.target.value),placeholder:"New company name...",className:C(X,"max-w-xs"),onKeyDown:p=>{p.key==="Enter"&&R()}}),e.jsxs("button",{onClick:R,disabled:T.isPending,className:C(he,"px-4 py-2 text-sm"),children:[T.isPending?e.jsx(le,{className:"w-4 h-4 animate-spin"}):e.jsx(Ut,{className:"w-4 h-4"})," New company"]})]}),w?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(le,{className:"w-6 h-6 animate-spin text-[var(--gm-accent-primary)]"})}):u.length===0?e.jsx("div",{className:"text-center py-12 text-[var(--gm-text-tertiary)] text-sm",children:"No companies yet. Create one above."}):e.jsx("div",{className:"space-y-3",children:u.map((p,b)=>e.jsx(_e.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:b*.05},className:C(Ee,"p-4 hover:border-[var(--gm-accent-primary)]/20"),children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-[var(--gm-bg-tertiary)] flex items-center justify-center flex-shrink-0 overflow-hidden",children:p.logo_url?e.jsx("img",{src:p.logo_url,alt:p.name,className:"w-full h-full object-contain"}):e.jsx("span",{className:"text-sm font-bold text-[var(--gm-text-primary)]",children:(p.name||"???").substring(0,3).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-[var(--gm-text-primary)]",children:p.name}),(p.colors||[]).length>0&&e.jsx("div",{className:"flex gap-0.5",children:(p.colors||[]).map((A,a)=>e.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:A}},a))}),e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium ${p.status==="analyzed"?"bg-[var(--gm-accent-primary)]/10 text-[var(--gm-accent-primary)]":"bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)]"}`,children:p.status==="analyzed"?"Analyzed":"Not analyzed"})]}),(p.website||p.website_url)&&e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:p.website||p.website_url})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap",children:[e.jsxs("button",{onClick:()=>n(p),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)] transition-colors",children:[e.jsx(Kt,{className:"w-3.5 h-3.5"})," View"]}),e.jsxs("button",{onClick:()=>f(p),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)] transition-colors",children:[e.jsx(Bt,{className:"w-3.5 h-3.5"})," Edit"]}),e.jsxs("button",{onClick:()=>m(p),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)] transition-colors",children:[e.jsx(qe,{className:"w-3.5 h-3.5"})," Templates"]}),e.jsxs("button",{onClick:()=>W(p),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)] transition-colors",children:[e.jsx(dt,{className:"w-3.5 h-3.5"})," ",p.status==="analyzed"?"Re-analyze":"Analyze"]}),e.jsx("button",{onClick:()=>y(p),className:"p-1.5 rounded-lg text-[var(--gm-text-tertiary)] hover:bg-[var(--color-danger-500)]/10 hover:text-[var(--color-danger-500)] transition-colors",children:e.jsx(At,{className:"w-3.5 h-3.5"})})]})]})},p.id))})]})}function fa({company:u,onBack:w,onEdit:n}){const f=Ge(u.id),m=f.data?.company||u,[v,P]=j.useState(Ue[0].key),l=He(),y=m.brand_assets?.analysis_report||{},T=async()=>{try{await l.mutateAsync(u.id),S.success("Analysis complete"),f.refetch()}catch(F){S.error(F.message||"Analysis failed")}},z=Ue.find(F=>F.key===v);return e.jsxs(_e.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsxs("button",{onClick:w,className:"flex items-center gap-1.5 text-sm text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors",children:[e.jsx(Ye,{className:"w-4 h-4"})," Back to Companies"]}),e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-[var(--gm-bg-tertiary)] flex items-center justify-center overflow-hidden",children:m.logo_url?e.jsx("img",{src:m.logo_url,alt:m.name,className:"w-full h-full object-contain"}):e.jsx("span",{className:"text-lg font-bold text-[var(--gm-text-primary)]",children:(m.name||"???").substring(0,3).toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-2xl font-bold text-[var(--gm-text-primary)]",children:m.name}),m.brand_assets?.primary_color&&e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm border border-[var(--gm-border-primary)]",style:{backgroundColor:m.brand_assets.primary_color}}),m.brand_assets?.secondary_color&&e.jsx("div",{className:"w-4 h-4 rounded-sm border border-[var(--gm-border-primary)]",style:{backgroundColor:m.brand_assets.secondary_color}})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[(m.website||m.website_url)&&e.jsxs("a",{href:m.website||m.website_url,target:"_blank",rel:"noreferrer",className:"text-xs text-[var(--gm-accent-primary)] flex items-center gap-1 hover:underline",children:[e.jsx(gt,{className:"w-3 h-3"})," ",m.website||m.website_url]}),(m.linkedin||m.linkedin_url)&&e.jsxs("a",{href:m.linkedin||m.linkedin_url,target:"_blank",rel:"noreferrer",className:"text-xs text-[var(--gm-accent-primary)] flex items-center gap-1 hover:underline",children:[e.jsx(pt,{className:"w-3 h-3"})," LinkedIn"]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsxs("button",{onClick:T,disabled:l.isPending,className:C(he,"px-4 py-2 text-sm"),children:[l.isPending?e.jsx(le,{className:"w-4 h-4 animate-spin"}):e.jsx(ut,{className:"w-4 h-4"})," Re-analyze"]}),e.jsx("button",{onClick:n,className:"text-sm text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors",children:"Edit"})]})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"w-56 flex-shrink-0",children:[e.jsx("h4",{className:"text-xs font-semibold text-[var(--gm-text-primary)] mb-2",children:"Report Sections"}),e.jsx("div",{className:"space-y-0.5",children:Ue.map(F=>e.jsxs("button",{onClick:()=>P(F.key),className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors flex items-center justify-between ${v===F.key?"bg-[var(--gm-interactive-primary)]/10 text-[var(--gm-accent-primary)] font-medium":"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] hover:bg-[var(--gm-surface-hover)]"}`,children:[F.display,v===F.key&&e.jsx(_t,{className:"w-3.5 h-3.5"})]},F.key))})]}),e.jsxs("div",{className:C(Ee,"flex-1 p-6"),children:[e.jsx("h3",{className:"text-lg font-bold text-[var(--gm-text-primary)] mb-4",children:z?.display}),e.jsx("div",{className:"text-sm text-[var(--gm-text-tertiary)] whitespace-pre-line leading-relaxed",children:y[v]||`Content for "${z?.display}" — run analysis to populate.`})]})]})]})}function va({company:u,onBack:w,onTemplates:n,onUpdated:f}){const m=Ge(u.id),v=m.data?.company||u,[P,l]=j.useState(u.name),[y,T]=j.useState(u.description||""),[z,F]=j.useState(u.logo_url||""),[R,W]=j.useState(u.website||u.website_url||""),[M,p]=j.useState(u.linkedin||u.linkedin_url||""),[b,A]=j.useState(v.brand_assets?.primary_color||""),[a,r]=j.useState(v.brand_assets?.secondary_color||""),[i,s]=j.useState(v.brand_assets?.ai_context||""),t=Et(),c=He();j.useEffect(()=>{if(m.data?.company){const x=m.data.company;A(x.brand_assets?.primary_color||""),r(x.brand_assets?.secondary_color||""),s(x.brand_assets?.ai_context||""),x.logo_url&&F(x.logo_url)}},[m.data]);const h=async()=>{if(!P.trim()){S.error("Name is required");return}const x=/^https?:\/\//;if(R.trim()&&!x.test(R.trim())){S.error("Website must start with http:// or https://");return}if(M.trim()&&!x.test(M.trim())){S.error("LinkedIn URL must start with http:// or https://");return}try{const I={...v.brand_assets||{},primary_color:b||void 0,secondary_color:a||void 0,ai_context:i||void 0},V=await t.mutateAsync({id:u.id,name:P,description:y,logo_url:z,website_url:R,linkedin_url:M,brand_assets:I});S.success("Company updated"),f&&V?.company&&f(V.company),w()}catch(I){S.error(I.message||"Failed to save")}},g=async()=>{S.info(`Analyzing ${u.name}...`);try{await c.mutateAsync(u.id),S.success("Analysis complete"),m.refetch()}catch(x){S.error(x.message||"Analysis failed")}},_=v.brand_assets?.analyzed_at;return e.jsxs(_e.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsxs("button",{onClick:w,className:"flex items-center gap-1.5 text-sm text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors",children:[e.jsx(Ye,{className:"w-4 h-4"})," Back to Companies"]}),e.jsxs("div",{className:C(Ee,"p-5"),children:[e.jsxs("h2",{className:"text-lg font-bold text-[var(--gm-text-primary)] mb-5",children:["Edit ",u.name]}),e.jsxs("div",{className:"flex gap-8",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("label",{className:C(Q,"mb-3"),children:"Company Logo"}),e.jsx(Pt,{currentUrl:z||void 0,name:u.name,uploadEndpoint:`/api/companies/${u.id}/logo`,deleteEndpoint:`/api/companies/${u.id}/logo`,onUploaded:x=>{F(x)},onRemoved:()=>{F("")},onUrlChange:x=>{F(x)},size:"xl",showUrlInput:!0})]}),e.jsxs("div",{className:"flex-1 max-w-lg space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:Q,children:"Name *"}),e.jsx(ue,{value:P,onChange:x=>l(x.target.value),className:X})]}),e.jsxs("div",{children:[e.jsx("label",{className:Q,children:"Description"}),e.jsx("textarea",{value:y,onChange:x=>T(x.target.value),rows:3,className:C(X,"resize-y")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:Q,children:[e.jsx(gt,{className:"w-3 h-3"})," Website"]}),e.jsx(ue,{value:R,onChange:x=>W(x.target.value),placeholder:"https://...",className:X})]}),e.jsxs("div",{children:[e.jsxs("label",{className:Q,children:[e.jsx(pt,{className:"w-3 h-3"})," LinkedIn"]}),e.jsx(ue,{value:M,onChange:x=>p(x.target.value),placeholder:"https://linkedin.com/company/...",className:X})]})]})]})]}),e.jsxs("div",{className:"mt-8 pt-5 border-t border-[var(--gm-border-primary)]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:C(Be,"text-sm"),children:"Brand & AI Analysis"}),e.jsxs("div",{className:"flex items-center gap-3",children:[_&&e.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:["Last analyzed: ",new Date(_).toLocaleDateString()]}),e.jsxs("button",{onClick:g,disabled:c.isPending,className:C(xe,"text-xs"),children:[c.isPending?e.jsx(le,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(dt,{className:"w-3.5 h-3.5"}),_?"Re-analyze":"Analyze with AI"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-lg",children:[e.jsxs("div",{children:[e.jsxs("label",{className:Q,children:[e.jsx(Ae,{className:"w-3 h-3"})," Primary Color"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:b||"#1a1a2e",onChange:x=>A(x.target.value),className:"w-8 h-8 rounded border border-[var(--gm-border-primary)] cursor-pointer bg-transparent"}),e.jsx(ue,{value:b,onChange:x=>A(x.target.value),placeholder:"#1a1a2e",className:C(X,"font-mono text-xs flex-1")})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:Q,children:[e.jsx(Ae,{className:"w-3 h-3"})," Secondary Color"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:a||"#16213e",onChange:x=>r(x.target.value),className:"w-8 h-8 rounded border border-[var(--gm-border-primary)] cursor-pointer bg-transparent"}),e.jsx(ue,{value:a,onChange:x=>r(x.target.value),placeholder:"#16213e",className:C(X,"font-mono text-xs flex-1")})]})]})]}),e.jsxs("div",{className:"mt-4 max-w-lg",children:[e.jsxs("label",{className:Q,children:[e.jsx(Ke,{className:"w-3 h-3"})," AI Brand Context"]}),e.jsx("textarea",{value:i,onChange:x=>s(x.target.value),rows:2,placeholder:"AI-generated brand summary (auto-filled on analysis)",className:C(X,"resize-y text-xs")})]}),(b||a)&&e.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[e.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:"Brand preview:"}),e.jsxs("div",{className:"flex gap-1.5 items-center",children:[b&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-6 h-6 rounded-md shadow-sm border border-[var(--gm-border-primary)]",style:{backgroundColor:b}}),e.jsx("span",{className:"text-[10px] font-mono text-[var(--gm-text-tertiary)]",children:b})]}),a&&e.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-md shadow-sm border border-[var(--gm-border-primary)]",style:{backgroundColor:a}}),e.jsx("span",{className:"text-[10px] font-mono text-[var(--gm-text-tertiary)]",children:a})]})]})]})]}),e.jsxs("div",{className:"mt-6 border-t border-[var(--gm-border-primary)] pt-4 flex justify-center gap-2",children:[e.jsxs("button",{onClick:h,disabled:t.isPending,className:C(he,"px-5 py-2.5 text-sm"),children:[t.isPending?e.jsx(le,{className:"w-4 h-4 animate-spin"}):e.jsx(mt,{className:"w-4 h-4"}),t.isPending?"Saving...":"Save"]}),e.jsx("button",{onClick:w,className:C(xe,"px-5 py-2.5 text-sm"),children:"Cancel"})]}),e.jsxs("div",{className:"mt-8 pt-5 border-t border-[var(--gm-border-primary)]",children:[e.jsx("h3",{className:C(Be,"text-sm mb-3"),children:"Documents"}),e.jsxs("button",{onClick:n,className:C(xe,"px-4 py-2 text-sm"),children:[e.jsx(qe,{className:"w-4 h-4"})," Templates (A4 / PPT)"]})]})]})]})}function ya({company:u,onBack:w}){const n=Ge(u.id),f=n.data?.company||u,[m,v]=j.useState("a4"),[P,l]=j.useState("code"),[y,T]=j.useState(""),[z,F]=j.useState(!1),[R,W]=j.useState(!1),[M,p]=j.useState(!1),[b,A]=j.useState(!1),[a,r]=j.useState("corporate"),[i,s]=j.useState(!1),[t,c]=j.useState(!1),h=j.useRef(null),g=j.useRef(null),_=j.useRef(null),[x,I]=j.useState(f.brand_assets?.primary_color||"#1a1a2e"),[V,ae]=j.useState(f.brand_assets?.secondary_color||"#16213e"),[J,be]=j.useState("'Segoe UI', Roboto, Helvetica, Arial, sans-serif");j.useEffect(()=>{if(n.data?.company?.brand_assets){const o=n.data.company.brand_assets;o.primary_color&&I(o.primary_color),o.secondary_color&&ae(o.secondary_color)}},[n.data]);const me=async()=>{F(!0);try{const o=await De.get(`/api/companies/${u.id}/templates/${m}`);T(o.html||`<!-- No ${m} template yet -->`),S.success("Template loaded")}catch{T(`<!-- No ${m} template found -->`)}finally{F(!1)}},$=async()=>{W(!0),s(!1);try{const o=await De.post(`/api/companies/${u.id}/templates/generate`,{type:m,style:a});T(o.html||y),S.success("Template generated")}catch(o){S.error(o.message||"Generation failed")}finally{W(!1)}},B=async()=>{p(!0);try{await De.put(`/api/companies/${u.id}/templates/${m}`,{html:y}),S.success("Template saved")}catch(o){S.error(o.message||"Failed to save")}finally{p(!1)}},ee=async()=>{A(!0);try{const o=await De.post(`/api/companies/${u.id}/templates/${m}/reset`);T(o.html||""),S.success("Template reset to default")}catch(o){S.error(o.message||"Failed to reset")}finally{A(!1)}},oe=()=>{if(!y){S.error("No template to export");return}const o=lt(y,f);ot(o,`${u.name}-${m}-template.html`),S.success("Template exported")},U=()=>{if(!y){S.error("No template to export");return}ot(y,`${u.name}-${m}-template-raw.html`),S.success("Raw template exported")},we=o=>{const K=o.target.files?.[0];if(!K)return;if(!K.name.endsWith(".html")&&!K.name.endsWith(".htm")){S.error("Please select an HTML file");return}const ce=new FileReader;ce.onload=Pe=>{const Te=Pe.target?.result;Te&&(T(Te),S.success("Template imported from file"))},ce.readAsText(K),o.target.value=""},H=()=>{if(!q){S.error("No template to preview");return}ha(q)};j.useEffect(()=>{me()},[m]),j.useEffect(()=>{const o=K=>{(K.ctrlKey||K.metaKey)&&K.key==="s"&&(K.preventDefault(),M||B())};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[y,M]),j.useEffect(()=>{if(!t)return;const o=K=>{K.key==="Escape"&&c(!1)};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[t]);const q=j.useMemo(()=>!y||y.startsWith("<!--")?"":lt(y,f),[y,f]),D=j.useMemo(()=>ga(y),[y]),re=j.useMemo(()=>pa(y),[y]),ge=j.useCallback(()=>{let o=y;o=o.replace(/(--primary:\s*)([^;]+)(;)/g,`$1${x}$3`),o=o.replace(/(--secondary:\s*)([^;]+)(;)/g,`$1${V}$3`),o=o.replace(/(font-family:\s*)([^;]+)(;)/g,`$1${J}$3`),T(o),S.success("Theme applied to code")},[y,x,V,J]),fe=j.useCallback(o=>it.highlight(o,it.languages.markup,"markup"),[]),se=t?"calc(100vh - 120px)":"500px";return e.jsxs(_e.div,{initial:{opacity:0},animate:{opacity:1},className:C("space-y-4",t&&"fixed inset-0 z-50 bg-[var(--gm-bg-primary)] p-6 overflow-auto"),children:[e.jsx("input",{ref:g,type:"file",accept:".html,.htm",onChange:we,className:"hidden"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:w,className:"flex items-center gap-1.5 text-sm text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors",children:[e.jsx(Ye,{className:"w-4 h-4"})," Back to Edit"]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-[var(--gm-text-primary)]",children:[u.name," – Templates"]}),e.jsx("p",{className:"text-sm text-[var(--gm-text-tertiary)]",children:"Manage document templates for this company"})]})]}),e.jsxs("button",{onClick:()=>c(!t),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)] transition-colors",children:[t?e.jsx(Jt,{className:"w-4 h-4"}):e.jsx(Qt,{className:"w-4 h-4"}),t?"Exit fullscreen":"Fullscreen"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex gap-1",children:["a4","ppt"].map(o=>e.jsx("button",{onClick:()=>v(o),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${m===o?"bg-[var(--gm-interactive-primary)]/10 text-[var(--gm-accent-primary)]":"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)]"}`,children:o==="a4"?"A4 document":"Presentation"},o))}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("button",{onClick:me,disabled:z,className:C(xe,"px-3 py-1.5 text-xs disabled:opacity-50"),children:[z?e.jsx(le,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(aa,{className:"w-3.5 h-3.5"}),"Reload"]}),e.jsxs("button",{onClick:ee,disabled:b,className:C(xe,"px-3 py-1.5 text-xs disabled:opacity-50"),children:[b?e.jsx(le,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(ut,{className:"w-3.5 h-3.5"}),"Reset default"]}),e.jsxs("button",{onClick:()=>g.current?.click(),className:C(xe,"px-3 py-1.5 text-xs"),children:[e.jsx(Ht,{className:"w-3.5 h-3.5"})," Import"]}),e.jsxs("button",{onClick:U,className:C(xe,"px-3 py-1.5 text-xs"),children:[e.jsx(rt,{className:"w-3.5 h-3.5"})," Export"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>s(!i),disabled:R,className:C(he,"px-3 py-1.5 text-xs"),children:[R?e.jsx(le,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(Ke,{className:"w-3.5 h-3.5"}),R?"Generating...":"Generate AI"]}),i&&!R&&e.jsxs("div",{className:C(Ee,"absolute right-0 top-full mt-1 z-50 p-3 w-72 shadow-lg"),children:[e.jsx("p",{className:"text-xs font-semibold text-[var(--gm-text-primary)] mb-2",children:"Choose a style"}),e.jsx("div",{className:"space-y-1.5",children:ua.map(o=>e.jsxs("button",{onClick:()=>r(o.value),className:C("w-full text-left px-3 py-2 rounded-lg text-sm transition-colors",a===o.value?"bg-[var(--gm-interactive-primary)]/10 text-[var(--gm-accent-primary)]":"text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)]"),children:[e.jsx("span",{className:"font-medium",children:o.label}),e.jsx("span",{className:"block text-[10px] opacity-70",children:o.desc})]},o.value))}),e.jsxs("button",{onClick:$,className:C(he,"w-full mt-3 py-2 text-sm justify-center"),children:[e.jsx(Ke,{className:"w-4 h-4"})," Generate"]})]})]}),e.jsxs("button",{onClick:B,disabled:M,className:C(he,"px-3 py-1.5 text-xs"),children:[M?e.jsx(le,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(qt,{className:"w-3.5 h-3.5"}),"Save"]})]})]}),D.length>0&&y.length>20&&e.jsxs("div",{className:"flex items-start gap-2 px-4 py-3 rounded-lg bg-[var(--color-warning-500)]/10 border border-[var(--color-warning-500)]/20",children:[e.jsx(Ft,{className:"w-4 h-4 text-[var(--color-warning-500)] flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-xs text-[var(--gm-text-secondary)]",children:[e.jsx("span",{className:"font-medium",children:"Missing required placeholders: "}),D.map(o=>e.jsx("code",{className:"mx-1 px-1.5 py-0.5 rounded bg-[var(--gm-bg-tertiary)] text-[10px] font-mono",children:o},o))]})]}),re.length>0&&e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[var(--gm-text-tertiary)]",children:[e.jsx("span",{children:"Placeholders:"}),re.map(o=>e.jsx("code",{className:"px-1.5 py-0.5 rounded bg-[var(--gm-accent-primary)]/10 text-[var(--gm-accent-primary)] font-mono",children:o},o)),e.jsx("span",{className:"ml-auto text-[var(--gm-text-tertiary)]",children:"Ctrl+S to save"})]}),e.jsxs("div",{className:"flex gap-4",onClick:()=>i&&s(!1),children:[e.jsxs("div",{className:"flex-1 min-w-0",ref:_,children:[e.jsx("div",{className:"flex border-b border-[var(--gm-border-primary)] mb-2",children:["code","theme"].map(o=>e.jsxs("button",{onClick:()=>l(o),className:`flex items-center gap-1.5 px-3 py-2 text-sm border-b-2 transition-colors ${P===o?"text-[var(--gm-accent-primary)] border-[var(--gm-accent-primary)]":"text-[var(--gm-text-tertiary)] border-transparent"}`,children:[o==="code"?e.jsx(Vt,{className:"w-3.5 h-3.5"}):e.jsx(Ae,{className:"w-3.5 h-3.5"}),o==="code"?"Code":"Theme"]},o))}),P==="code"?e.jsx("div",{className:"border border-[var(--gm-border-primary)] rounded-lg overflow-hidden bg-white",children:e.jsx("div",{className:"overflow-auto",style:{height:se},children:e.jsx(na,{value:y,onValueChange:T,highlight:fe,padding:16,style:{fontFamily:"'Fira Code', 'Consolas', monospace",fontSize:12,lineHeight:"1.5",minHeight:se},textareaClassName:"focus:outline-none"})})}):e.jsxs("div",{className:C(Ee,"p-5 space-y-5"),style:{minHeight:se},children:[e.jsx("h4",{className:"text-sm font-semibold text-[var(--gm-text-primary)]",children:"Visual Theme Editor"}),e.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:"Adjust colors and fonts, then apply to update the template code."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:Q,children:[e.jsx(Ae,{className:"w-3 h-3"})," Primary Color"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:x,onChange:o=>I(o.target.value),className:"w-10 h-10 rounded-lg border border-[var(--gm-border-primary)] cursor-pointer bg-transparent p-0.5"}),e.jsx(ue,{value:x,onChange:o=>I(o.target.value),className:C(X,"font-mono text-xs")})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:Q,children:[e.jsx(Ae,{className:"w-3 h-3"})," Secondary Color"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:V,onChange:o=>ae(o.target.value),className:"w-10 h-10 rounded-lg border border-[var(--gm-border-primary)] cursor-pointer bg-transparent p-0.5"}),e.jsx(ue,{value:V,onChange:o=>ae(o.target.value),className:C(X,"font-mono text-xs")})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:Q,children:[e.jsx(Gt,{className:"w-3 h-3"})," Font Family"]}),e.jsx("select",{value:J,onChange:o=>be(o.target.value),className:C(X,"cursor-pointer"),children:ma.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:C(Q,"mb-2"),children:"Preview"}),e.jsxs("div",{className:"flex gap-2 items-stretch h-16 rounded-lg overflow-hidden border border-[var(--gm-border-primary)]",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center text-white text-xs font-semibold",style:{backgroundColor:x,fontFamily:J},children:"Primary"}),e.jsx("div",{className:"flex-1 flex items-center justify-center text-white text-xs font-semibold",style:{backgroundColor:V,fontFamily:J},children:"Secondary"}),e.jsx("div",{className:"flex-1 flex items-center justify-center text-sm bg-white border-l border-[var(--gm-border-primary)]",style:{fontFamily:J,color:x},children:"Body Text"})]})]}),e.jsxs("button",{onClick:ge,className:C(he,"px-5 py-2.5 text-sm"),children:[e.jsx(mt,{className:"w-4 h-4"})," Apply theme to template code"]})]})]}),e.jsxs("div",{className:C("flex-shrink-0",t?"w-[45%]":"w-[360px]"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:Be,children:"Live Preview"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("button",{onClick:H,disabled:!q,className:"flex items-center gap-1 px-2 py-1 rounded text-[10px] font-medium text-[var(--gm-text-tertiary)] hover:text-[var(--gm-accent-primary)] hover:bg-[var(--gm-surface-hover)] transition-colors disabled:opacity-30",children:[e.jsx(Yt,{className:"w-3 h-3"})," Print / PDF"]}),e.jsxs("button",{onClick:oe,disabled:!q,className:"flex items-center gap-1 px-2 py-1 rounded text-[10px] font-medium text-[var(--gm-text-tertiary)] hover:text-[var(--gm-accent-primary)] hover:bg-[var(--gm-surface-hover)] transition-colors disabled:opacity-30",children:[e.jsx(rt,{className:"w-3 h-3"})," Download"]})]})]}),e.jsx("div",{className:"border border-[var(--gm-border-primary)] rounded-lg overflow-hidden bg-white",style:{height:t?"calc(100vh - 200px)":"520px"},children:q?e.jsx("iframe",{ref:h,srcDoc:q,title:"Template Preview",className:"w-full h-full border-0",sandbox:"allow-same-origin",style:{transform:m==="a4"?"scale(0.35)":"scale(0.3)",transformOrigin:"top left",width:m==="a4"?"210mm":"297mm",height:m==="a4"?"297mm":"210mm"}}):e.jsx("div",{className:"h-full flex items-center justify-center text-sm text-[var(--gm-text-tertiary)]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(qe,{className:"w-8 h-8 mx-auto mb-2 opacity-30"}),e.jsx("p",{children:"No template to preview"}),e.jsx("p",{className:"text-[10px] mt-1",children:"Load or generate a template"})]})})}),e.jsx("div",{className:"mt-2 text-[10px] text-[var(--gm-text-tertiary)] text-center",children:m==="a4"?"210mm x 297mm (A4 Portrait)":"297mm x 210mm (A4 Landscape)"})]})]})]})}export{Ba as default};
//# sourceMappingURL=CompaniesPage-iGJW6ql9.js.map
