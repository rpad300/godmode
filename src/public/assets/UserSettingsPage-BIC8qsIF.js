import{c as J,r as n,bk as _,bm as W,j as e,bg as z,bh as X,fl as K,fm as Q,bi as V,a as d,ai as L,aq as R,eS as Z,al as I,cB as ee,cx as te,a2 as ae,C as se,O as j,b6 as P}from"./main-BKbBKYvC.js";import{S as B}from"./sparkles-BJxATUBg.js";const re=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],D=J("user-cog",re);var C="Switch",[ne]=V(C),[ie,ce]=ne(C),M=n.forwardRef((t,o)=>{const{__scopeSwitch:a,name:c,checked:m,defaultChecked:u,required:x,disabled:l,value:h="on",onCheckedChange:g,form:i,...r}=t,[v,f]=n.useState(null),b=_(o,k=>f(k)),s=n.useRef(!1),S=v?i||!!v.closest("form"):!0,[p,Y]=W({prop:m,defaultProp:u??!1,onChange:g,caller:C});return e.jsxs(ie,{scope:a,checked:p,disabled:l,children:[e.jsx(z.button,{type:"button",role:"switch","aria-checked":p,"aria-required":x,"data-state":O(p),"data-disabled":l?"":void 0,disabled:l,value:h,...r,ref:b,onClick:X(t.onClick,k=>{Y($=>!$),S&&(s.current=k.isPropagationStopped(),s.current||k.stopPropagation())})}),S&&e.jsx(F,{control:v,bubbles:!s.current,name:c,value:h,checked:p,required:x,disabled:l,form:i,style:{transform:"translateX(-100%)"}})]})});M.displayName=C;var U="SwitchThumb",q=n.forwardRef((t,o)=>{const{__scopeSwitch:a,...c}=t,m=ce(U,a);return e.jsx(z.span,{"data-state":O(m.checked),"data-disabled":m.disabled?"":void 0,...c,ref:o})});q.displayName=U;var oe="SwitchBubbleInput",F=n.forwardRef(({__scopeSwitch:t,control:o,checked:a,bubbles:c=!0,...m},u)=>{const x=n.useRef(null),l=_(x,u),h=K(a),g=Q(o);return n.useEffect(()=>{const i=x.current;if(!i)return;const r=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(r,"checked").set;if(h!==a&&f){const b=new Event("click",{bubbles:c});f.call(i,a),i.dispatchEvent(b)}},[h,a,c]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...m,tabIndex:-1,ref:l,style:{...m.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});F.displayName=oe;function O(t){return t?"checked":"unchecked"}var H=M,le=q;const G=n.forwardRef(({className:t,...o},a)=>e.jsx(H,{className:d("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",t),...o,ref:a,children:e.jsx(le,{className:d("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));G.displayName=H.displayName;const y="rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-[var(--shadow-sm)] transition-all duration-200",w="w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-placeholder)] focus:outline-none focus:border-[var(--gm-border-focus)] focus:shadow-[var(--shadow-focus)] transition-all duration-150",E="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] hover:bg-[var(--gm-interactive-primary-hover)] shadow-sm transition-all duration-150 disabled:opacity-50",A="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] hover:bg-[var(--gm-interactive-secondary-hover)] border border-[var(--gm-border-primary)] transition-all duration-150",T="text-[10px] font-bold text-[var(--gm-accent-primary)] uppercase tracking-[0.1em]",N="text-[10px] font-bold text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-1 flex items-center gap-1.5",de=[{id:"general",label:"General",icon:B},{id:"profile",label:"Profile & Role",icon:D},{id:"privacy",label:"Data & Privacy",icon:L}],ge=()=>{const[t,o]=n.useState("general");return e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-[var(--gm-text-primary)]",children:"Settings"}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-48 flex-shrink-0 space-y-0.5 hidden md:block",children:de.map(a=>e.jsxs("button",{onClick:()=>o(a.id),className:d("w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors",t===a.id?"bg-[var(--gm-interactive-primary)]/10 text-[var(--gm-accent-primary)] font-medium":"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] hover:bg-[var(--gm-surface-hover)]"),children:[e.jsx(a.icon,{className:"w-4 h-4"})," ",a.label]},a.id))}),e.jsxs("div",{className:"flex-1",children:[t==="general"&&e.jsx(me,{}),t==="profile"&&e.jsx(pe,{}),t==="privacy"&&e.jsx(ue,{})]})]})]})};function me(){const[t,o]=n.useState(()=>localStorage.getItem("godmode-theme")||"dark"),[a,c]=n.useState(()=>localStorage.getItem("godmode-language")||"en"),[m,u]=n.useState(!1),x=i=>{o(i),u(!0)},l=i=>{c(i),u(!0)},h=()=>{localStorage.setItem("godmode-theme",t),localStorage.setItem("godmode-language",a),t==="dark"?document.documentElement.classList.add("dark"):t==="light"&&document.documentElement.classList.remove("dark"),j.success("Settings saved"),u(!1)},g=()=>{o(localStorage.getItem("godmode-theme")||"dark"),c(localStorage.getItem("godmode-language")||"en"),u(!1)};return e.jsxs(R.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsxs("div",{className:d(y,"p-5 space-y-5"),children:[e.jsxs("h3",{className:d(T,"flex items-center gap-2"),children:[e.jsx(B,{className:"w-4 h-4"})," Appearance"]}),e.jsxs("div",{children:[e.jsx("label",{className:N,children:"Theme"}),e.jsxs("select",{value:t,onChange:i=>x(i.target.value),className:d(w,"h-9"),children:[e.jsx("option",{value:"light",children:"Light"}),e.jsx("option",{value:"dark",children:"Dark"}),e.jsx("option",{value:"system",children:"System"})]}),e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:"Choose your preferred color scheme"})]}),e.jsxs("div",{children:[e.jsx("label",{className:N,children:"Language"}),e.jsxs("select",{value:a,onChange:i=>l(i.target.value),className:d(w,"h-9"),children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"pt",children:"Português"}),e.jsx("option",{value:"es",children:"Español"}),e.jsx("option",{value:"fr",children:"Français"}),e.jsx("option",{value:"de",children:"Deutsch"})]}),e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:"Interface language preference"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-[var(--gm-accent-primary)]/30 bg-[var(--gm-interactive-primary)]/10",children:[e.jsx(Z,{className:"w-4 h-4 text-[var(--gm-accent-primary)] flex-shrink-0"}),e.jsxs("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:["For ",e.jsx("span",{className:"text-[var(--gm-accent-primary)] font-medium",children:"LLM configuration"}),", ",e.jsx("span",{className:"text-[var(--gm-accent-primary)] font-medium",children:"Graph"}),", and other platform settings, use the ",e.jsx("span",{className:"text-[var(--gm-accent-primary)] font-medium",children:"Admin"})," section in the sidebar menu."]})]})]}),e.jsxs("div",{className:d(y,"p-4 flex justify-end gap-2"),children:[e.jsx("button",{onClick:g,className:A,children:"Cancel"}),e.jsxs("button",{onClick:h,disabled:!m,className:E,children:[e.jsx(I,{className:"w-4 h-4"})," Save Settings"]})]})]})}function pe(){const{user:t,updateProfile:o}=ee(),{currentProject:a,currentProjectId:c}=te(),[m,u]=n.useState([]),[x,l]=n.useState([]),[h,g]=n.useState(""),[i,r]=n.useState(""),[v,f]=n.useState(!1);n.useEffect(()=>{t?.timezone&&r(t.timezone),a?.user_role&&g(a.user_role);const s=async()=>{try{const p=await P.get("/api/role-templates");p.roles&&u(p.roles)}catch(p){console.error("Failed to fetch roles",p)}},S=async()=>{try{const p=await P.get("/api/timezones");p.timezones&&l(p.timezones)}catch(p){console.error("Failed to fetch timezones",p)}};s(),S()},[t,a,c]);const b=async()=>{f(!0);try{i!==t?.timezone&&await o.mutateAsync({timezone:i}),c&&h!==(a?.user_role||"")?(await P.put(`/api/projects/${c}/members/${t?.id}`,{user_role:h}),j.success("Role updated for this project")):i!==t?.timezone&&j.success("Profile updated")}catch(s){j.error(s.message||"Failed to save settings")}finally{f(!1)}};return e.jsxs(R.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsxs("div",{className:d(y,"p-5 space-y-5"),children:[e.jsxs("h3",{className:d(T,"flex items-center gap-2"),children:[e.jsx(D,{className:"w-4 h-4"})," Role & Context"]}),e.jsxs("div",{className:"p-3 rounded-lg bg-[var(--gm-bg-tertiary)]/50 border border-[var(--gm-border-primary)]",children:[e.jsx("p",{className:N,children:"Active Project"}),e.jsx("p",{className:"text-sm font-medium text-[var(--gm-text-primary)]",children:a?.name||"No Active Project"})]}),e.jsxs("div",{children:[e.jsx("label",{className:N,children:"Project Role"}),e.jsxs("div",{className:"relative",children:[e.jsx(ae,{className:"absolute left-3 top-2.5 w-4 h-4 text-[var(--gm-text-tertiary)]"}),e.jsxs("select",{value:h,onChange:s=>g(s.target.value),disabled:!c||c==="default",className:d(w,"h-9 pl-9 disabled:opacity-50"),children:[e.jsx("option",{value:"",children:"Select a role..."}),m.filter(s=>s.name||s.display_name).map(s=>e.jsx("option",{value:s.display_name||s.name,children:s.display_name||s.name},s.id||s.name))]})]}),e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:"Your role in the current project (defines permissions)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:N,children:"Timezone"}),e.jsxs("div",{className:"relative",children:[e.jsx(se,{className:"absolute left-3 top-2.5 w-4 h-4 text-[var(--gm-text-tertiary)]"}),e.jsxs("select",{value:i,onChange:s=>r(s.target.value),className:d(w,"h-9 pl-9"),children:[e.jsx("option",{value:"",children:"Select timezone..."}),x.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:"Used for scheduling and notifications"})]})]}),e.jsxs("div",{className:d(y,"p-4 flex justify-end gap-2"),children:[e.jsx("button",{className:A,children:"Cancel"}),e.jsx("button",{onClick:b,disabled:v,className:E,children:v?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"w-4 h-4"})," Save Changes"]})})]})]})}function ue(){const[t,o]=n.useState(!0),[a,c]=n.useState(!0),[m,u]=n.useState(!1),[x,l]=n.useState(!1),h=[{label:"Analytics",desc:"Help improve GodMode with anonymous usage data",value:t,set:r=>{o(r),l(!0)}},{label:"Error Reporting",desc:"Automatically report errors to help fix bugs",value:a,set:r=>{c(r),l(!0)}},{label:"AI Data Improvement",desc:"Allow anonymized data to improve AI responses",value:m,set:r=>{u(r),l(!0)}}],g=()=>{localStorage.setItem("godmode-privacy",JSON.stringify({analytics:t,errorReporting:a,aiData:m})),j.success("Privacy settings saved"),l(!1)},i=()=>{try{const r=JSON.parse(localStorage.getItem("godmode-privacy")||"{}");o(r.analytics??!0),c(r.errorReporting??!0),u(r.aiData??!1)}catch{}l(!1)};return e.jsxs(R.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsxs("div",{className:d(y,"p-5"),children:[e.jsxs("h3",{className:d(T,"flex items-center gap-2 mb-4"),children:[e.jsx(L,{className:"w-4 h-4"})," Privacy Settings"]}),e.jsx("div",{className:"space-y-1",children:h.map(r=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-[var(--gm-border-primary)] last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-[var(--gm-text-primary)]",children:r.label}),e.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:r.desc})]}),e.jsx(G,{checked:r.value,onCheckedChange:r.set})]},r.label))})]}),e.jsxs("div",{className:d(y,"p-4 flex justify-end gap-2"),children:[e.jsx("button",{onClick:i,className:A,children:"Cancel"}),e.jsxs("button",{onClick:g,disabled:!x,className:E,children:[e.jsx(I,{className:"w-4 h-4"})," Save Settings"]})]})]})}export{ge as default};
//# sourceMappingURL=UserSettingsPage-BIC8qsIF.js.map
