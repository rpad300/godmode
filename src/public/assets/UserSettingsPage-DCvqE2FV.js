import{r as l,j as e}from"./vendor-react-CZ-WyKWZ.js";import{q as A,r as D,m as N,t as f}from"./vendor-ui-BS9QKitv.js";import{c as i,a6 as P,eu as F,aa as S,cg as q,cf as U,N as B,C as G,aV as b}from"./main-B3DZn5B_.js";import{S as T}from"./sparkles-D3iJUPqd.js";import{c as M}from"./vendor-markdown-Cu8AM8lU.js";import"./vendor-supabase-Bpw_79gH.js";import"./vendor-query-DSf7I7Ei.js";import"./vendor-router-D_XeKoA_.js";const O=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],z=M("user-cog",O),L=l.forwardRef(({className:a,...c},s)=>e.jsx(A,{className:i("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",a),...c,ref:s,children:e.jsx(D,{className:i("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));L.displayName=A.displayName;const u="rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-[var(--shadow-sm)] transition-all duration-200",j="w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-placeholder)] focus:outline-none focus:border-[var(--gm-border-focus)] focus:shadow-[var(--shadow-focus)] transition-all duration-150",k="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] hover:bg-[var(--gm-interactive-primary-hover)] shadow-sm transition-all duration-150 disabled:opacity-50",w="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] hover:bg-[var(--gm-interactive-secondary-hover)] border border-[var(--gm-border-primary)] transition-all duration-150",C="text-[10px] font-bold text-[var(--gm-accent-primary)] uppercase tracking-[0.1em]",y="text-[10px] font-bold text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-1 flex items-center gap-1.5",Y=[{id:"general",label:"General",icon:T},{id:"profile",label:"Profile & Role",icon:z},{id:"privacy",label:"Data & Privacy",icon:P}],te=()=>{const[a,c]=l.useState("general");return e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-[var(--gm-text-primary)]",children:"Settings"}),e.jsxs("div",{className:"flex gap-6",children:[e.jsx("div",{className:"w-48 flex-shrink-0 space-y-0.5 hidden md:block",children:Y.map(s=>e.jsxs("button",{onClick:()=>c(s.id),className:i("w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors",a===s.id?"bg-[var(--gm-interactive-primary)]/10 text-[var(--gm-accent-primary)] font-medium":"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] hover:bg-[var(--gm-surface-hover)]"),children:[e.jsx(s.icon,{className:"w-4 h-4"})," ",s.label]},s.id))}),e.jsxs("div",{className:"flex-1",children:[a==="general"&&e.jsx(H,{}),a==="profile"&&e.jsx(J,{}),a==="privacy"&&e.jsx($,{})]})]})]})};function H(){const[a,c]=l.useState(()=>localStorage.getItem("godmode-theme")||"dark"),[s,o]=l.useState(()=>localStorage.getItem("godmode-language")||"en"),[g,d]=l.useState(!1),v=n=>{c(n),d(!0)},m=n=>{o(n),d(!0)},x=()=>{localStorage.setItem("godmode-theme",a),localStorage.setItem("godmode-language",s),a==="dark"?document.documentElement.classList.add("dark"):a==="light"&&document.documentElement.classList.remove("dark"),f.success("Settings saved"),d(!1)},h=()=>{c(localStorage.getItem("godmode-theme")||"dark"),o(localStorage.getItem("godmode-language")||"en"),d(!1)};return e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsxs("div",{className:i(u,"p-5 space-y-5"),children:[e.jsxs("h3",{className:i(C,"flex items-center gap-2"),children:[e.jsx(T,{className:"w-4 h-4"})," Appearance"]}),e.jsxs("div",{children:[e.jsx("label",{className:y,children:"Theme"}),e.jsxs("select",{value:a,onChange:n=>v(n.target.value),className:i(j,"h-9"),children:[e.jsx("option",{value:"light",children:"Light"}),e.jsx("option",{value:"dark",children:"Dark"}),e.jsx("option",{value:"system",children:"System"})]}),e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:"Choose your preferred color scheme"})]}),e.jsxs("div",{children:[e.jsx("label",{className:y,children:"Language"}),e.jsxs("select",{value:s,onChange:n=>m(n.target.value),className:i(j,"h-9"),children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"pt",children:"Português"}),e.jsx("option",{value:"es",children:"Español"}),e.jsx("option",{value:"fr",children:"Français"}),e.jsx("option",{value:"de",children:"Deutsch"})]}),e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:"Interface language preference"})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-[var(--gm-accent-primary)]/30 bg-[var(--gm-interactive-primary)]/10",children:[e.jsx(F,{className:"w-4 h-4 text-[var(--gm-accent-primary)] flex-shrink-0"}),e.jsxs("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:["For ",e.jsx("span",{className:"text-[var(--gm-accent-primary)] font-medium",children:"LLM configuration"}),", ",e.jsx("span",{className:"text-[var(--gm-accent-primary)] font-medium",children:"Graph"}),", and other platform settings, use the ",e.jsx("span",{className:"text-[var(--gm-accent-primary)] font-medium",children:"Admin"})," section in the sidebar menu."]})]})]}),e.jsxs("div",{className:i(u,"p-4 flex justify-end gap-2"),children:[e.jsx("button",{onClick:h,className:w,children:"Cancel"}),e.jsxs("button",{onClick:x,disabled:!g,className:k,children:[e.jsx(S,{className:"w-4 h-4"})," Save Settings"]})]})]})}function J(){const{user:a,updateProfile:c}=q(),{currentProject:s,currentProjectId:o}=U(),[g,d]=l.useState([]),[v,m]=l.useState([]),[x,h]=l.useState(""),[n,r]=l.useState(""),[R,I]=l.useState(!1);l.useEffect(()=>{a?.timezone&&r(a.timezone),s?.user_role&&h(s.user_role);const t=async()=>{try{const p=await b.get("/api/role-templates");p.roles&&d(p.roles)}catch(p){console.error("Failed to fetch roles",p)}},_=async()=>{try{const p=await b.get("/api/timezones");p.timezones&&m(p.timezones)}catch(p){console.error("Failed to fetch timezones",p)}};t(),_()},[a,s,o]);const E=async()=>{I(!0);try{n!==a?.timezone&&await c.mutateAsync({timezone:n}),o&&x!==(s?.user_role||"")?(await b.put(`/api/projects/${o}/members/${a?.id}`,{user_role:x}),f.success("Role updated for this project")):n!==a?.timezone&&f.success("Profile updated")}catch(t){f.error(t.message||"Failed to save settings")}finally{I(!1)}};return e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsxs("div",{className:i(u,"p-5 space-y-5"),children:[e.jsxs("h3",{className:i(C,"flex items-center gap-2"),children:[e.jsx(z,{className:"w-4 h-4"})," Role & Context"]}),e.jsxs("div",{className:"p-3 rounded-lg bg-[var(--gm-bg-tertiary)]/50 border border-[var(--gm-border-primary)]",children:[e.jsx("p",{className:y,children:"Active Project"}),e.jsx("p",{className:"text-sm font-medium text-[var(--gm-text-primary)]",children:s?.name||"No Active Project"})]}),e.jsxs("div",{children:[e.jsx("label",{className:y,children:"Project Role"}),e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-3 top-2.5 w-4 h-4 text-[var(--gm-text-tertiary)]"}),e.jsxs("select",{value:x,onChange:t=>h(t.target.value),disabled:!o||o==="default",className:i(j,"h-9 pl-9 disabled:opacity-50"),children:[e.jsx("option",{value:"",children:"Select a role..."}),g.filter(t=>t.name||t.display_name).map(t=>e.jsx("option",{value:t.display_name||t.name,children:t.display_name||t.name},t.id||t.name))]})]}),e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:"Your role in the current project (defines permissions)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:y,children:"Timezone"}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-2.5 w-4 h-4 text-[var(--gm-text-tertiary)]"}),e.jsxs("select",{value:n,onChange:t=>r(t.target.value),className:i(j,"h-9 pl-9"),children:[e.jsx("option",{value:"",children:"Select timezone..."}),v.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:"Used for scheduling and notifications"})]})]}),e.jsxs("div",{className:i(u,"p-4 flex justify-end gap-2"),children:[e.jsx("button",{className:w,children:"Cancel"}),e.jsx("button",{onClick:E,disabled:R,className:k,children:R?"Saving...":e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"w-4 h-4"})," Save Changes"]})})]})]})}function $(){const[a,c]=l.useState(!0),[s,o]=l.useState(!0),[g,d]=l.useState(!1),[v,m]=l.useState(!1),x=[{label:"Analytics",desc:"Help improve GodMode with anonymous usage data",value:a,set:r=>{c(r),m(!0)}},{label:"Error Reporting",desc:"Automatically report errors to help fix bugs",value:s,set:r=>{o(r),m(!0)}},{label:"AI Data Improvement",desc:"Allow anonymized data to improve AI responses",value:g,set:r=>{d(r),m(!0)}}],h=()=>{localStorage.setItem("godmode-privacy",JSON.stringify({analytics:a,errorReporting:s,aiData:g})),f.success("Privacy settings saved"),m(!1)},n=()=>{try{const r=JSON.parse(localStorage.getItem("godmode-privacy")||"{}");c(r.analytics??!0),o(r.errorReporting??!0),d(r.aiData??!1)}catch{}m(!1)};return e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsxs("div",{className:i(u,"p-5"),children:[e.jsxs("h3",{className:i(C,"flex items-center gap-2 mb-4"),children:[e.jsx(P,{className:"w-4 h-4"})," Privacy Settings"]}),e.jsx("div",{className:"space-y-1",children:x.map(r=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-[var(--gm-border-primary)] last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-[var(--gm-text-primary)]",children:r.label}),e.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:r.desc})]}),e.jsx(L,{checked:r.value,onCheckedChange:r.set})]},r.label))})]}),e.jsxs("div",{className:i(u,"p-4 flex justify-end gap-2"),children:[e.jsx("button",{onClick:n,className:w,children:"Cancel"}),e.jsxs("button",{onClick:h,disabled:!v,className:k,children:[e.jsx(S,{className:"w-4 h-4"})," Save Settings"]})]})]})}export{te as default};
//# sourceMappingURL=UserSettingsPage-DCvqE2FV.js.map
