{"version":3,"file":"TeamAnalysisPage-D9dUJsBR.js","sources":["../../frontend/src/components/team/ProfileDetail.tsx","../../frontend/src/pages/TeamAnalysisPage.tsx"],"sourcesContent":["import { useState } from 'react';\r\nimport {\r\n  ArrowLeft, MessageSquare, Star, AlertTriangle, Shield, Zap,\r\n  Target, Eye, Loader2, RotateCw, Clock, FileText,\r\n} from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { useAnalyzeProfile, useTeamProfiles } from '../../hooks/useGodMode';\r\nimport { useQueryClient } from '@tanstack/react-query';\r\nimport { CommentsPanel } from '../shared/CommentsPanel';\r\n\r\nconst CARD = 'rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-[var(--shadow-sm)] transition-all duration-200';\r\n\r\ninterface Props {\r\n  profile: Record<string, unknown>;\r\n  onBack: () => void;\r\n}\r\n\r\nfunction AvatarWithFallback({ url, name, initials }: { url: string | null; name: string; initials: string }) {\r\n  const [failed, setFailed] = useState(false);\r\n  if (url && !failed) {\r\n    return <img src={url} alt={name} referrerPolicy=\"no-referrer\" onError={() => setFailed(true)} className=\"w-14 h-14 rounded-full object-cover border-2 border-blue-600/30\" />;\r\n  }\r\n  return (\r\n    <div className=\"w-14 h-14 rounded-full flex items-center justify-center text-lg font-bold text-white border-2 border-[var(--gm-border-primary)]\"\r\n      style={{ background: `linear-gradient(135deg, ${stringToColor(name)}, ${adjustColor(stringToColor(name), -30)})` }}>\r\n      {initials}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function ProfileDetail({ profile, onBack }: Props) {\r\n  const analyzeProfile = useAnalyzeProfile();\r\n  const queryClient = useQueryClient();\r\n\r\n  const contact = (profile.contact ?? {}) as Record<string, unknown>;\r\n  const name = String(contact.name || profile.person_name || 'Unknown');\r\n  const role = String(contact.role || contact.organization || '');\r\n  const initials = name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();\r\n  const avatarRaw = contact.avatar_url || contact.photo_url;\r\n  const avatarUrl = typeof avatarRaw === 'string' && avatarRaw.length > 0 && avatarRaw !== 'undefined' && avatarRaw !== 'null' ? avatarRaw : null;\r\n  const data = (profile.profile_data ?? {}) as Record<string, unknown>;\r\n  const confidence = String(profile.confidence_level || 'low');\r\n  const contactId = String(profile.contact_id || profile.person_id || '');\r\n  const speakingTime = Number(profile.total_speaking_time_seconds || 0);\r\n  const limitations = (profile.limitations ?? []) as string[];\r\n  const lastAnalysis = profile.last_analysis_at ? new Date(String(profile.last_analysis_at)).toLocaleString() : 'â€”';\r\n\r\n  const handleReanalyze = () => {\r\n    if (!contactId) return;\r\n    analyzeProfile.mutate({ personId: contactId, forceReanalysis: true }, {\r\n      onSuccess: () => {\r\n        toast.success(`Re-analysis started for ${name}`);\r\n        queryClient.invalidateQueries({ queryKey: ['team-profiles'] });\r\n      },\r\n      onError: () => toast.error('Failed to start re-analysis'),\r\n    });\r\n  };\r\n\r\n  const formatTime = (seconds: number) => {\r\n    if (!seconds) return 'â€”';\r\n    const m = Math.floor(seconds / 60);\r\n    const s = seconds % 60;\r\n    return m > 0 ? `${m}m ${s}s` : `${s}s`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-4\">\r\n      <button onClick={onBack} className=\"flex items-center gap-1.5 text-xs text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors mb-2\">\r\n        <ArrowLeft className=\"w-3.5 h-3.5\" /> Back to Team Analysis\r\n      </button>\r\n\r\n      <div className={CARD}>\r\n        {/* Header */}\r\n        <div className=\"p-5 rounded-t-xl\" style={{ background: 'linear-gradient(to right, rgba(37,99,235,0.15), rgba(37,99,235,0.04))' }}>\r\n          <div className=\"flex items-center gap-3\">\r\n            <AvatarWithFallback url={avatarUrl} name={name} initials={initials} />\r\n            <div className=\"flex-1 min-w-0\">\r\n              <h2 className=\"text-lg font-bold text-[var(--gm-text-primary)]\">{name}</h2>\r\n              <div className=\"flex items-center gap-2 mt-0.5 flex-wrap\">\r\n                {role && <span className=\"text-xs text-[var(--gm-text-tertiary)]\">{role}</span>}\r\n                <span className={`text-[10px] px-2 py-0.5 rounded-full font-medium capitalize ${\r\n                  confidence === 'high' || confidence === 'very_high' ? 'bg-green-500/20 text-green-400' :\r\n                  confidence === 'medium' ? 'bg-yellow-500/20 text-yellow-400' :\r\n                  'bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)]'\r\n                }`}>{confidence.replace('_', ' ')} confidence</span>\r\n              </div>\r\n            </div>\r\n            <button onClick={handleReanalyze} disabled={analyzeProfile.isPending}\r\n              className=\"px-3 py-1.5 rounded-lg bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] text-xs font-medium hover:bg-[var(--gm-interactive-primary-hover)] flex items-center gap-1.5 disabled:opacity-50 transition-colors\">\r\n              {analyzeProfile.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <RotateCw className=\"w-3.5 h-3.5\" />}\r\n              Re-analyze\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"flex gap-3 mt-4 flex-wrap\">\r\n            <MetricPill label=\"Influence\" value={String(profile.influence_score || 0)} />\r\n            <MetricPill label=\"Transcripts\" value={String(profile.transcript_count || 0)} />\r\n            <MetricPill label=\"Risk\" value={String(profile.risk_tolerance || 'â€”')} />\r\n            <MetricPill label=\"Speaking Time\" value={formatTime(speakingTime)} />\r\n            <MetricPill label=\"Last Analysis\" value={lastAnalysis} />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Profile sections */}\r\n        <div className=\"p-5 space-y-4\">\r\n          {profile.communication_style && (\r\n            <div className=\"bg-blue-600/5 border border-blue-600/10 rounded-xl p-4\">\r\n              <h4 className=\"text-[10px] text-[var(--gm-accent-primary)] font-semibold uppercase tracking-wider mb-1\">Communication Style</h4>\r\n              <p className=\"text-sm text-[var(--gm-text-primary)]\">{String(profile.communication_style)}</p>\r\n            </div>\r\n          )}\r\n\r\n          {profile.dominant_motivation && (\r\n            <div className=\"bg-green-500/5 border border-green-500/10 rounded-xl p-4\">\r\n              <h4 className=\"text-[10px] text-green-500 font-semibold uppercase tracking-wider mb-1\">Dominant Motivation</h4>\r\n              <p className=\"text-sm text-[var(--gm-text-primary)]\">{String(profile.dominant_motivation)}</p>\r\n            </div>\r\n          )}\r\n\r\n          <CommunicationSection data={data} />\r\n          <MotivationsSection data={data} />\r\n          <PressureSection data={data} />\r\n          <InfluenceTacticsSection data={data} />\r\n          <VulnerabilitiesSection data={data} />\r\n          <StrategySection data={data} />\r\n          <WarningSection data={data} />\r\n          <PowerSection data={data} />\r\n\r\n          {limitations.length > 0 && (\r\n            <div className=\"bg-[var(--gm-surface-hover)] rounded-xl p-4\">\r\n              <SectionHeader icon={FileText} title=\"Limitations\" />\r\n              <ul className=\"space-y-1\">\r\n                {limitations.map((l, i) => <li key={i} className=\"text-xs text-[var(--gm-text-tertiary)] flex items-start gap-2\"><span className=\"text-gray-500 mt-0.5\">â€¢</span> {l}</li>)}\r\n              </ul>\r\n            </div>\r\n          )}\r\n\r\n          {Object.keys(data).length === 0 && !profile.communication_style && (\r\n            <div className=\"text-center py-8 text-[var(--gm-text-tertiary)]\">\r\n              <Eye className=\"w-10 h-10 mx-auto mb-3 text-gray-500\" />\r\n              <p className=\"text-sm\">No detailed profile data available yet.</p>\r\n              <p className=\"text-xs mt-1\">Click \"Re-analyze\" to generate AI insights.</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Comments */}\r\n      {contactId && (\r\n        <div className={CARD}>\r\n          <CommentsPanel targetType=\"profile\" targetId={contactId} />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction MetricPill({ label, value }: { label: string; value: string }) {\r\n  return (\r\n    <div className=\"rounded-lg px-3 py-1.5 text-center bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)]\">\r\n      <p className=\"text-sm font-bold text-[var(--gm-text-primary)]\">{value}</p>\r\n      <p className=\"text-[9px] text-[var(--gm-text-tertiary)] uppercase tracking-wider\">{label}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction SectionHeader({ icon: Icon, title }: { icon: typeof MessageSquare; title: string }) {\r\n  return (\r\n    <h4 className=\"flex items-center gap-2 text-sm font-semibold text-[var(--gm-text-primary)] mb-3\">\r\n      <Icon className=\"w-4 h-4 text-[var(--gm-accent-primary)]\" /> {title}\r\n    </h4>\r\n  );\r\n}\r\n\r\nfunction CommunicationSection({ data }: { data: Record<string, unknown> }) {\r\n  const comm = data.communication_identity as Record<string, unknown> | undefined;\r\n  if (!comm) return null;\r\n  return (\r\n    <div className=\"bg-[var(--gm-surface-hover)] rounded-xl p-4\">\r\n      <SectionHeader icon={MessageSquare} title=\"Communication Identity\" />\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\r\n        {comm.dominant_style && <InfoBlock label=\"Style\" value={String(comm.dominant_style)} />}\r\n        {comm.intervention_rhythm && <InfoBlock label=\"Rhythm\" value={String(comm.intervention_rhythm)} />}\r\n        {comm.textual_body_language && <InfoBlock label=\"Textual Cues\" value={String(comm.textual_body_language)} />}\r\n      </div>\r\n      <EvidenceList evidence={comm.evidence as Array<Record<string, unknown>> | undefined} />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction MotivationsSection({ data }: { data: Record<string, unknown> }) {\r\n  const mot = data.motivations_and_priorities as Record<string, unknown> | undefined;\r\n  if (!mot) return null;\r\n  const values = (mot.values_most ?? []) as string[];\r\n  const avoids = (mot.avoids ?? []) as string[];\r\n  return (\r\n    <div className=\"bg-[var(--gm-surface-hover)] rounded-xl p-4\">\r\n      <SectionHeader icon={Star} title=\"Motivations & Priorities\" />\r\n      {values.length > 0 && <div className=\"mb-2\"><span className=\"text-[10px] text-[var(--gm-text-tertiary)] font-medium\">Values most:</span><div className=\"flex flex-wrap gap-1.5 mt-1\">{values.map((v, i) => <span key={i} className=\"text-[10px] px-2 py-0.5 rounded-full bg-green-500/10 text-green-500\">{v}</span>)}</div></div>}\r\n      {avoids.length > 0 && <div className=\"mb-2\"><span className=\"text-[10px] text-[var(--gm-text-tertiary)] font-medium\">Avoids:</span><div className=\"flex flex-wrap gap-1.5 mt-1\">{avoids.map((a, i) => <span key={i} className=\"text-[10px] px-2 py-0.5 rounded-full bg-red-500/10 text-red-500\">{a}</span>)}</div></div>}\r\n      {mot.based_on && <p className=\"text-[10px] text-[var(--gm-text-tertiary)] mt-1\">Based on: {String(mot.based_on)}</p>}\r\n      {mot.confidence && <p className=\"text-[10px] text-[var(--gm-text-tertiary)]\">Confidence: {String(mot.confidence)}</p>}\r\n      <EvidenceList evidence={mot.evidence as Array<Record<string, unknown>> | undefined} />\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction PressureSection({ data }: { data: Record<string, unknown> }) {\r\n  const behaviors = data.behavior_under_pressure as Array<Record<string, unknown>> | undefined;\r\n  if (!behaviors?.length) return null;\r\n  return (\r\n    <div className=\"bg-[var(--gm-surface-hover)] rounded-xl p-4\">\r\n      <SectionHeader icon={Clock} title=\"Behavior Under Pressure\" />\r\n      <div className=\"space-y-2\">{behaviors.map((b, i) => <div key={i} className=\"bg-[var(--gm-bg-tertiary)] rounded-lg p-3\"><p className=\"text-xs font-medium text-[var(--gm-text-primary)]\">{String(b.situation)}</p><p className=\"text-xs text-[var(--gm-text-tertiary)] mt-0.5\">{String(b.observed_behavior)}</p>{b.quote && <p className=\"text-xs italic text-[var(--gm-text-tertiary)] mt-1 border-l-2 border-blue-600/30 pl-2\">\"{String(b.quote)}\"</p>}{b.timestamp && <p className=\"text-[10px] text-gray-400 mt-1\">{String(b.timestamp)}</p>}</div>)}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction InfluenceTacticsSection({ data }: { data: Record<string, unknown> }) {\r\n  const tactics = data.influence_tactics as Array<Record<string, unknown>> | undefined;\r\n  if (!tactics?.length) return null;\r\n  return (\r\n    <div className=\"bg-[var(--gm-surface-hover)] rounded-xl p-4\">\r\n      <SectionHeader icon={Target} title=\"Influence Tactics\" />\r\n      <div className=\"space-y-2\">{tactics.map((t, i) => <div key={i} className=\"bg-[var(--gm-bg-tertiary)] rounded-lg p-3\"><p className=\"text-xs font-medium text-[var(--gm-text-primary)]\">{String(t.objective)}</p><p className=\"text-xs text-[var(--gm-text-tertiary)] mt-0.5\">{String(t.tactic)}</p>{t.example && <p className=\"text-xs italic text-[var(--gm-text-tertiary)] mt-1 border-l-2 border-blue-600/30 pl-2\">{String(t.example)}</p>}{t.timestamp && <p className=\"text-[10px] text-gray-400 mt-1\">{String(t.timestamp)}</p>}</div>)}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction VulnerabilitiesSection({ data }: { data: Record<string, unknown> }) {\r\n  const vuln = data.vulnerabilities as Record<string, unknown> | undefined;\r\n  if (!vuln) return null;\r\n  const triggers = (vuln.defense_triggers ?? []) as Array<Record<string, unknown>>;\r\n  const blindSpots = (vuln.blind_spots ?? []) as Array<Record<string, unknown>>;\r\n  const inconsistencies = (vuln.discourse_action_inconsistencies ?? []) as Array<Record<string, unknown>>;\r\n  const riskPatterns = (vuln.risk_patterns ?? []) as Array<Record<string, unknown>>;\r\n  if (!triggers.length && !blindSpots.length && !inconsistencies.length && !riskPatterns.length) return null;\r\n  return (\r\n    <div className=\"bg-[var(--gm-surface-hover)] rounded-xl p-4\">\r\n      <SectionHeader icon={Shield} title=\"Vulnerabilities & Friction Points\" />\r\n      {inconsistencies.length > 0 && <VulnBlock label=\"Discourse-Action Inconsistencies\" color=\"text-red-500\" items={inconsistencies} field=\"description\" evidenceField=\"evidence\" />}\r\n      {triggers.length > 0 && <VulnBlock label=\"Defense Triggers\" color=\"text-red-500\" items={triggers} field=\"trigger\" evidenceField=\"evidence\" />}\r\n      {blindSpots.length > 0 && <VulnBlock label=\"Blind Spots\" color=\"text-yellow-500\" items={blindSpots} field=\"description\" evidenceField=\"evidence\" />}\r\n      {riskPatterns.length > 0 && <VulnBlock label=\"Risk Patterns\" color=\"text-yellow-500\" items={riskPatterns} field=\"pattern\" evidenceField=\"evidence\" />}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction VulnBlock({ label, color, items, field, evidenceField }: { label: string; color: string; items: Array<Record<string, unknown>>; field: string; evidenceField: string }) {\r\n  return (\r\n    <div className=\"mb-3 last:mb-0\">\r\n      <p className={`text-[10px] font-semibold uppercase tracking-wider mb-1.5 ${color}`}>{label}</p>\r\n      <div className=\"space-y-1.5\">{items.map((item, i) => <div key={i} className=\"bg-[var(--gm-bg-tertiary)] rounded-lg p-2.5\"><p className=\"text-xs text-[var(--gm-text-primary)]\">{String(item[field] || item.text || item)}</p>{item[evidenceField] && <p className=\"text-[10px] text-[var(--gm-text-tertiary)] mt-0.5 italic\">{String(item[evidenceField])}</p>}</div>)}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction StrategySection({ data }: { data: Record<string, unknown> }) {\r\n  const strat = data.interaction_strategy as Record<string, unknown> | undefined;\r\n  if (!strat) return null;\r\n  const works = (strat.framing_that_works ?? []) as string[];\r\n  const avoid = (strat.what_to_avoid ?? []) as string[];\r\n  const cooperation = (strat.cooperation_triggers ?? []) as string[];\r\n  const format = strat.ideal_format as Record<string, unknown> | undefined;\r\n  return (\r\n    <div className=\"bg-[var(--gm-surface-hover)] rounded-xl p-4\">\r\n      <SectionHeader icon={MessageSquare} title=\"Recommended Interaction Strategy\" />\r\n      {format && <div className=\"flex flex-wrap gap-2 mb-3\">{format.channel && <span className=\"text-[10px] px-2 py-0.5 rounded-full bg-blue-600/10 text-[var(--gm-accent-primary)]\">Channel: {String(format.channel)}</span>}{format.structure && <span className=\"text-[10px] px-2 py-0.5 rounded-full bg-blue-600/10 text-[var(--gm-accent-primary)]\">Structure: {String(format.structure)}</span>}{format.timing && <span className=\"text-[10px] px-2 py-0.5 rounded-full bg-blue-600/10 text-[var(--gm-accent-primary)]\">Timing: {String(format.timing)}</span>}</div>}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\r\n        {works.length > 0 && <div className=\"bg-[var(--gm-bg-tertiary)] rounded-lg p-3\"><p className=\"text-[10px] text-green-500 font-semibold uppercase tracking-wider mb-1\">What Works</p><ul className=\"space-y-0.5\">{works.map((f, i) => <li key={i} className=\"text-xs text-[var(--gm-text-primary)]\">+ {f}</li>)}</ul></div>}\r\n        {avoid.length > 0 && <div className=\"bg-[var(--gm-bg-tertiary)] rounded-lg p-3\"><p className=\"text-[10px] text-red-500 font-semibold uppercase tracking-wider mb-1\">What to Avoid</p><ul className=\"space-y-0.5\">{avoid.map((a, i) => <li key={i} className=\"text-xs text-[var(--gm-text-primary)]\">- {a}</li>)}</ul></div>}\r\n        {cooperation.length > 0 && <div className=\"bg-[var(--gm-bg-tertiary)] rounded-lg p-3\"><p className=\"text-[10px] text-[var(--gm-accent-primary)] font-semibold uppercase tracking-wider mb-1\">Cooperation Triggers</p><ul className=\"space-y-0.5\">{cooperation.map((c, i) => <li key={i} className=\"text-xs text-[var(--gm-text-primary)]\">â†’ {c}</li>)}</ul></div>}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction WarningSection({ data }: { data: Record<string, unknown> }) {\r\n  const warnings = data.early_warning_signs as Array<Record<string, unknown>> | undefined;\r\n  if (!warnings?.length) return null;\r\n  return (\r\n    <div className=\"bg-[var(--gm-surface-hover)] rounded-xl p-4\">\r\n      <SectionHeader icon={AlertTriangle} title=\"Early Warning Signs\" />\r\n      <div className=\"space-y-2\">{warnings.map((w, i) => <div key={i} className=\"bg-yellow-500/5 border border-yellow-500/10 rounded-lg p-3\"><p className=\"text-xs font-medium text-[var(--gm-text-primary)]\">{String(w.signal)}</p><p className=\"text-xs text-[var(--gm-text-tertiary)] mt-0.5\">Indicates: {String(w.indicates)}</p>{w.comparison_evidence && <p className=\"text-[10px] text-gray-400 mt-1 italic\">Evidence: {String(w.comparison_evidence)}</p>}</div>)}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction PowerSection({ data }: { data: Record<string, unknown> }) {\r\n  const power = data.power_analysis as Array<Record<string, unknown>> | undefined;\r\n  if (!power?.length) return null;\r\n  return (\r\n    <div className=\"bg-[var(--gm-surface-hover)] rounded-xl p-4\">\r\n      <SectionHeader icon={Zap} title=\"Power & Dependency Analysis\" />\r\n      <div className=\"space-y-2\">{power.map((p, i) => <div key={i} className=\"bg-[var(--gm-bg-tertiary)] rounded-lg p-3\"><p className=\"text-xs font-medium text-[var(--gm-text-primary)]\">{String(p.factor)}</p><p className=\"text-xs text-[var(--gm-text-tertiary)] mt-0.5\">{String(p.assessment)}</p>{p.strategic_implication && <p className=\"text-xs text-[var(--gm-accent-primary)] mt-1\">â†’ {String(p.strategic_implication)}</p>}</div>)}</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction InfoBlock({ label, value }: { label: string; value: string }) {\r\n  return (\r\n    <div className=\"bg-[var(--gm-bg-tertiary)] rounded-lg p-3\">\r\n      <span className=\"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider\">{label}</span>\r\n      <p className=\"text-xs text-[var(--gm-text-primary)] mt-0.5\">{value}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction EvidenceList({ evidence }: { evidence?: Array<Record<string, unknown>> }) {\r\n  if (!evidence?.length) return null;\r\n  return (\r\n    <div className=\"mt-3 space-y-1.5\">\r\n      <p className=\"text-[10px] text-[var(--gm-text-tertiary)] font-medium uppercase tracking-wider\">Evidence</p>\r\n      {evidence.slice(0, 5).map((e, i) => (\r\n        <div key={i} className=\"text-xs bg-[var(--gm-bg-tertiary)] rounded p-2\">\r\n          {e.quote && <p className=\"italic text-[var(--gm-text-tertiary)] border-l-2 border-blue-600/30 pl-2\">\"{String(e.quote)}\"</p>}\r\n          {e.observation && <p className=\"text-[var(--gm-text-tertiary)] mt-0.5\">{String(e.observation)}</p>}\r\n          {e.timestamp && <p className=\"text-[10px] text-gray-400 mt-0.5\">{String(e.timestamp)}</p>}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function stringToColor(str: string): string {\r\n  const colors = ['#9b59b6', '#3498db', '#e74c3c', '#27ae60', '#f59e0b', '#1abc9c', '#e67e22', '#34495e'];\r\n  let hash = 0;\r\n  for (let i = 0; i < str.length; i++) hash = str.charCodeAt(i) + ((hash << 5) - hash);\r\n  return colors[Math.abs(hash) % colors.length];\r\n}\r\n\r\nexport function adjustColor(color: string, amount: number): string {\r\n  const clamp = (n: number) => Math.min(255, Math.max(0, n));\r\n  const hex = color.replace('#', '');\r\n  const r = clamp(parseInt(hex.substring(0, 2), 16) + amount);\r\n  const g = clamp(parseInt(hex.substring(2, 4), 16) + amount);\r\n  const b = clamp(parseInt(hex.substring(4, 6), 16) + amount);\r\n  return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n}\r\n","import { useState, useMemo, useCallback, useEffect, useRef } from 'react';\nimport {\n  Users, Loader2, Network, BarChart3, ArrowRight, TrendingUp,\n  RotateCw, Play, RefreshCw, Zap, Shield, AlertTriangle,\n  CheckCircle, ChevronDown, ChevronUp, Search, Calendar,\n} from 'lucide-react';\nimport { toast } from 'sonner';\nimport {\n  useTeamProfiles, useTeamDynamics, useTeamRelationships,\n  useRunTeamAnalysis, useAnalyzeProfile, useTeamGraph,\n  useSyncTeamGraph, useContacts,\n} from '../hooks/useGodMode';\nimport { Dialog, DialogContent, DialogTitle } from '../components/ui/Dialog';\nimport ProfileDetail, { stringToColor, adjustColor } from '../components/team/ProfileDetail';\nimport { ErrorState } from '../components/shared/ErrorState';\nimport { isValidAvatarUrl, getInitials } from '../lib/utils';\n\nfunction ContactAvatar({ url, name, size = 'md', className = '' }: {\n  url: string | null | undefined; name: string; size?: 'sm' | 'md' | 'lg'; className?: string;\n}) {\n  const [failed, setFailed] = useState(false);\n  const initials = getInitials(name);\n  const dims = size === 'sm' ? 'w-5 h-5' : size === 'lg' ? 'w-14 h-14' : 'w-8 h-8';\n  const textSize = size === 'sm' ? 'text-[8px]' : size === 'lg' ? 'text-lg' : 'text-[10px]';\n  const borderCls = size === 'lg' ? 'border-2 border-white/20' : '';\n\n  if (url && !failed) {\n    return (\n      <img src={url} alt={name} referrerPolicy=\"no-referrer\"\n        onError={() => setFailed(true)}\n        className={`${dims} rounded-full object-cover flex-shrink-0 ${className}`} />\n    );\n  }\n\n  return (\n    <div className={`${dims} rounded-full flex items-center justify-center ${textSize} font-bold text-white flex-shrink-0 ${borderCls} ${className}`}\n      style={{ background: `linear-gradient(135deg, ${stringToColor(name)}, ${adjustColor(stringToColor(name), -30)})` }}>\n      {initials}\n    </div>\n  );\n}\n\ntype Tab = 'profiles' | 'team' | 'relationships' | 'graph';\n\n/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   Name Resolution - Maps Person_N â†’ real names\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\ninterface PersonInfo {\n  name: string;\n  initials: string;\n  role: string;\n  avatarUrl?: string;\n}\n\nfunction buildNameResolver(profiles: Array<Record<string, unknown>>): (name: string) => PersonInfo {\n  const mapping: Record<string, PersonInfo> = {};\n\n  profiles.forEach((profile, index) => {\n    const contact = (profile.contact ?? {}) as Record<string, unknown>;\n    const realName = String(contact.name || profile.person_name || 'Unknown');\n    const avatarRaw = contact.avatar_url || contact.photo_url;\n    const info: PersonInfo = {\n      name: realName,\n      initials: getInitials(realName),\n      role: String(contact.role || contact.organization || ''),\n      avatarUrl: avatarRaw ? String(avatarRaw) : undefined,\n    };\n\n    mapping[`person_${index + 1}`] = info;\n    mapping[`person ${index + 1}`] = info;\n    mapping[realName.toLowerCase()] = info;\n    const firstName = realName.split(' ')[0];\n    if (firstName) mapping[firstName.toLowerCase()] = info;\n\n    const contactId = String(profile.contact_id || profile.person_id || '');\n    if (contactId) mapping[contactId] = info;\n  });\n\n  return (name: string) => {\n    if (!name) return { name: 'Unknown', initials: '?', role: '' };\n    const normalized = name.toLowerCase().trim();\n    return mapping[normalized] || mapping[name] || {\n      name: name.replace(/_/g, ' '),\n      initials: getInitials(name),\n      role: '',\n    };\n  };\n}\n\nfunction replacePersonNames(text: string, resolve: (n: string) => PersonInfo): string {\n  return text.replace(/Person_(\\d+)/gi, (match) => resolve(match).name);\n}\n\n/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   Person Chip - avatar + name inline element\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\nfunction PersonChip({ name, resolve }: { name: string; resolve: (n: string) => PersonInfo }) {\n  const info = resolve(name);\n  return (\n    <div className=\"inline-flex items-center gap-1.5 bg-gm-surface-primary border border-gm-border-primary rounded-full px-2.5 py-1\">\n      <ContactAvatar url={isValidAvatarUrl(info.avatarUrl) ? info.avatarUrl : null} name={info.name} size=\"sm\" />\n      <span className=\"text-[10px] font-medium text-gm-text-primary whitespace-nowrap\">{info.name}</span>\n    </div>\n  );\n}\n\n/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   Type Configs for dynamics cards\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\nconst influenceTypes: Record<string, { color: string; bg: string; icon: string }> = {\n  direct: { color: '#3b82f6', bg: '#eff6ff', icon: 'â†’' },\n  technical: { color: '#8b5cf6', bg: '#f5f3ff', icon: 'âš™' },\n  political: { color: '#f59e0b', bg: '#fffbeb', icon: 'â™Ÿ' },\n  social: { color: '#10b981', bg: '#ecfdf5', icon: 'ğŸ¤' },\n  resource: { color: '#ef4444', bg: '#fef2f2', icon: 'ğŸ“Š' },\n};\n\nconst allianceTypes: Record<string, { color: string; bg: string; icon: string }> = {\n  natural: { color: '#10b981', bg: '#ecfdf5', icon: 'ğŸŒ±' },\n  circumstantial: { color: '#6366f1', bg: '#eef2ff', icon: 'ğŸ”—' },\n  strategic: { color: '#f59e0b', bg: '#fffbeb', icon: 'â™Ÿ' },\n  historical: { color: '#8b5cf6', bg: '#f5f3ff', icon: 'ğŸ“œ' },\n};\n\nconst tensionTypes: Record<string, { color: string; bg: string; icon: string }> = {\n  technical: { color: '#8b5cf6', bg: '#f5f3ff', icon: 'âš™' },\n  resource: { color: '#f59e0b', bg: '#fffbeb', icon: 'ğŸ“Š' },\n  political: { color: '#ef4444', bg: '#fef2f2', icon: 'â™Ÿ' },\n  communication: { color: '#3b82f6', bg: '#eff6ff', icon: 'ğŸ’¬' },\n  values: { color: '#10b981', bg: '#ecfdf5', icon: 'âš–' },\n};\n\nconst powerTypes: Record<string, { color: string; bg: string; icon: string }> = {\n  technical: { color: '#8b5cf6', bg: '#f5f3ff', icon: 'âš™' },\n  formal: { color: '#3b82f6', bg: '#eff6ff', icon: 'ğŸ‘”' },\n  informal: { color: '#f59e0b', bg: '#fffbeb', icon: 'ğŸ’¬' },\n  social: { color: '#10b981', bg: '#ecfdf5', icon: 'ğŸ¤' },\n  resource: { color: '#ef4444', bg: '#fef2f2', icon: 'ğŸ“Š' },\n};\n\n/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   Main Page Component\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\nexport default function TeamAnalysisPage() {\n  const [tab, setTab] = useState<Tab>('profiles');\n  const [selectedProfile, setSelectedProfile] = useState<Record<string, unknown> | null>(null);\n  const [showAnalyzeModal, setShowAnalyzeModal] = useState(false);\n\n  const profiles = useTeamProfiles();\n  const dynamics = useTeamDynamics();\n  const relationships = useTeamRelationships();\n  const graphQuery = useTeamGraph();\n  const runTeamAnalysis = useRunTeamAnalysis();\n  const syncGraph = useSyncTeamGraph();\n\n  const profileList = useMemo(() =>\n    (profiles.data?.profiles ?? []) as Array<Record<string, unknown>>,\n    [profiles.data]\n  );\n\n  const resolveName = useMemo(() => buildNameResolver(profileList), [profileList]);\n\n  if (profiles.error) {\n    return <div className=\"p-6\"><ErrorState message=\"Failed to load team profiles.\" onRetry={() => profiles.refetch()} /></div>;\n  }\n\n  // Detail view (replaces list)\n  if (selectedProfile) {\n    return (\n      <ProfileDetail\n        profile={selectedProfile}\n        onBack={() => setSelectedProfile(null)}\n      />\n    );\n  }\n\n  const tabs: { key: Tab; label: string; icon: typeof Users }[] = [\n    { key: 'profiles', label: 'Profiles', icon: Users },\n    { key: 'team', label: 'Team Dynamics', icon: BarChart3 },\n    { key: 'relationships', label: 'Relationships', icon: ArrowRight },\n    { key: 'graph', label: 'Network Graph', icon: Network },\n  ];\n\n  const handleRunAnalysis = () => {\n    runTeamAnalysis.mutate({ forceReanalysis: true }, {\n      onSuccess: () => toast.success('Team analysis started'),\n      onError: () => toast.error('Failed to start team analysis'),\n    });\n  };\n\n  const handleSyncGraph = () => {\n    syncGraph.mutate(undefined, {\n      onSuccess: () => { toast.success('Graph synced'); graphQuery.refetch(); },\n      onError: () => toast.error('Failed to sync graph'),\n    });\n  };\n\n  return (\n    <div className=\"p-6 space-y-4\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-2xl font-bold text-gm-text-primary\">Team Analysis</h1>\n        <div className=\"flex gap-2\">\n          <button onClick={() => setShowAnalyzeModal(true)}\n            className=\"px-3 py-1.5 rounded-lg bg-gm-interactive-secondary text-gm-text-primary text-xs font-medium hover:bg-gm-interactive-secondary-hover flex items-center gap-1.5 transition-colors\">\n            <Users className=\"w-3.5 h-3.5\" /> Analyze Members\n          </button>\n          <button onClick={handleRunAnalysis} disabled={runTeamAnalysis.isPending}\n            className=\"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover flex items-center gap-1.5 disabled:opacity-50 transition-colors\">\n            {runTeamAnalysis.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Play className=\"w-3.5 h-3.5\" />}\n            Run Team Analysis\n          </button>\n          <button onClick={handleSyncGraph} disabled={syncGraph.isPending}\n            className=\"px-3 py-1.5 rounded-lg bg-gm-surface-secondary text-gm-text-primary text-xs font-medium hover:bg-gm-surface-hover flex items-center gap-1.5 disabled:opacity-50 transition-colors border border-gm-border-primary\">\n            {syncGraph.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <RefreshCw className=\"w-3.5 h-3.5\" />}\n            Sync Graph\n          </button>\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"flex gap-1 bg-gm-surface-secondary rounded-xl p-1\">\n        {tabs.map(t => {\n          const Icon = t.icon;\n          return (\n            <button key={t.key} onClick={() => setTab(t.key)}\n              className={`flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${\n                tab === t.key ? 'bg-gm-surface-primary text-gm-text-primary shadow-sm' : 'text-gm-text-tertiary hover:text-gm-text-primary'\n              }`}>\n              <Icon className=\"w-3.5 h-3.5\" /> {t.label}\n            </button>\n          );\n        })}\n      </div>\n\n      {tab === 'profiles' && (\n        <ProfilesTab profiles={profileList} isLoading={profiles.isLoading} onSelectProfile={setSelectedProfile} />\n      )}\n      {tab === 'team' && (\n        <TeamDynamicsTab data={(dynamics.data as Record<string, unknown>)?.analysis ?? dynamics.data} isLoading={dynamics.isLoading} profiles={profileList} resolveName={resolveName} />\n      )}\n      {tab === 'relationships' && (\n        <RelationshipsTab data={relationships.data} isLoading={relationships.isLoading} profiles={profileList} resolveName={resolveName} />\n      )}\n      {tab === 'graph' && (\n        <NetworkGraphTab data={graphQuery.data} isLoading={graphQuery.isLoading} profiles={profileList} resolveName={resolveName} />\n      )}\n\n      <AnalyzeContactsModal\n        open={showAnalyzeModal}\n        onClose={() => setShowAnalyzeModal(false)}\n        existingProfileIds={new Set(profileList.map(p => String(p.contact_id || p.person_id || '')))}\n      />\n    </div>\n  );\n}\n\n/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   Profiles Tab\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\nfunction ProfilesTab({ profiles, isLoading, onSelectProfile }: {\n  profiles: Array<Record<string, unknown>>;\n  isLoading: boolean;\n  onSelectProfile: (p: Record<string, unknown>) => void;\n}) {\n  const analyzeProfile = useAnalyzeProfile();\n\n  if (isLoading) return <Spinner />;\n  if (profiles.length === 0) return (\n    <EmptyState icon={Users} message=\"No team profiles available. Click 'Analyze Members' to generate AI behavioral profiles.\" />\n  );\n\n  const sorted = [...profiles].sort((a, b) => (Number(b.influence_score) || 0) - (Number(a.influence_score) || 0));\n\n  const handleReanalyze = (e: React.MouseEvent, profile: Record<string, unknown>) => {\n    e.stopPropagation();\n    const contactId = String(profile.contact_id || profile.person_id || '');\n    if (!contactId) return;\n    const contact = (profile.contact ?? {}) as Record<string, unknown>;\n    const name = String(contact.name || profile.person_name || 'Unknown');\n    analyzeProfile.mutate({ personId: contactId, forceReanalysis: true }, {\n      onSuccess: () => toast.success(`Re-analysis started for ${name}`),\n      onError: () => toast.error('Failed to start re-analysis'),\n    });\n  };\n\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n      {sorted.map((profile, i) => {\n        const contact = (profile.contact ?? {}) as Record<string, unknown>;\n        const name = String(contact.name || profile.person_name || 'Unknown');\n        const role = String(contact.role || contact.organization || '');\n        const avatarUrl = isValidAvatarUrl(contact.avatar_url) ? contact.avatar_url : isValidAvatarUrl(contact.photo_url) ? contact.photo_url : null;\n        const confidence = String(profile.confidence_level || 'low');\n        const commStyle = String(profile.communication_style || '');\n        const speakingTime = Number(profile.total_speaking_time_seconds || 0);\n        const speakingMins = speakingTime ? `${Math.floor(speakingTime / 60)}m` : '';\n\n        return (\n          <div key={i} onClick={() => onSelectProfile(profile)}\n            className=\"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4 hover:border-blue-600/30 hover:-translate-y-0.5 transition-all cursor-pointer group shadow-sm hover:shadow-md\">\n            {/* Header with avatar */}\n            <div className=\"flex items-start gap-3 mb-3\">\n              <ContactAvatar url={avatarUrl} name={name} size=\"lg\" className=\"border-2 border-gm-surface-secondary\" />\n              <div className=\"min-w-0 flex-1\">\n                <p className=\"text-sm font-semibold text-gm-text-primary truncate group-hover:text-gm-interactive-primary transition-colors\">{name}</p>\n                {role && <p className=\"text-[10px] text-gm-text-tertiary mt-0.5\">{role}</p>}\n                <div className=\"flex flex-wrap gap-1 mt-1.5\">\n                  <span className={`text-[10px] px-2 py-0.5 rounded-full font-medium capitalize ${\n                    confidence === 'high' || confidence === 'very_high' ? 'bg-gm-status-success-bg text-gm-status-success' :\n                    confidence === 'medium' ? 'bg-gm-status-warning-bg text-gm-status-warning' :\n                    'bg-gm-surface-secondary text-gm-text-tertiary'\n                  }`}>{confidence.replace('_', ' ')}</span>\n                </div>\n              </div>\n            </div>\n\n            {/* Metrics grid */}\n            <div className=\"grid grid-cols-3 gap-2 py-3 border-t border-[var(--gm-border-primary)]\">\n              <div className=\"text-center\">\n                <p className=\"text-base font-bold text-gm-text-primary\">{String(profile.influence_score || 0)}</p>\n                <p className=\"text-[9px] text-gm-text-tertiary uppercase tracking-wider\">Influence</p>\n              </div>\n              <div className=\"text-center\">\n                <p className=\"text-base font-bold text-gm-text-primary\">{String(profile.transcript_count || 0)}</p>\n                <p className=\"text-[9px] text-gm-text-tertiary uppercase tracking-wider\">Transcripts</p>\n              </div>\n              <div className=\"text-center\">\n                <p className=\"text-base font-bold text-gm-text-primary capitalize\">{String(profile.risk_tolerance || 'â€”')}</p>\n                <p className=\"text-[9px] text-gm-text-tertiary uppercase tracking-wider\">Risk</p>\n              </div>\n            </div>\n\n            {/* Communication style */}\n            {commStyle && (\n              <div className=\"mt-2 bg-gm-surface-secondary rounded-lg p-2.5\">\n                <p className=\"text-[9px] text-gm-text-tertiary uppercase tracking-wider mb-0.5\">Communication Style</p>\n                <p className=\"text-xs text-gm-text-primary line-clamp-2\">{commStyle}</p>\n              </div>\n            )}\n\n            {/* Speaking time + Re-analyze button */}\n            <div className=\"flex items-center justify-between mt-3\">\n              {speakingMins && <span className=\"text-[10px] text-gm-text-tertiary\">{speakingMins} speaking time</span>}\n              <button onClick={(e) => handleReanalyze(e, profile)}\n                disabled={analyzeProfile.isPending}\n                className=\"ml-auto px-2.5 py-1 rounded-lg bg-gm-surface-secondary text-gm-text-primary text-[10px] font-medium hover:bg-gm-surface-hover flex items-center gap-1 transition-colors border border-gm-border-primary disabled:opacity-50\">\n                <RotateCw className=\"w-3 h-3\" /> Re-analyze\n              </button>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\n/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   Team Dynamics Tab\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\nfunction TeamDynamicsTab({ data, isLoading, profiles, resolveName }: {\n  data: unknown;\n  isLoading: boolean;\n  profiles: Array<Record<string, unknown>>;\n  resolveName: (n: string) => PersonInfo;\n}) {\n  if (isLoading) return <Spinner />;\n  const d = data as Record<string, unknown> | null;\n  if (!d) return <EmptyState icon={BarChart3} message=\"No team dynamics data. Click 'Run Team Analysis' to generate insights.\" />;\n\n  const cohesion = Number(d.cohesion_score ?? 0);\n  const tensionLevel = String(d.tension_level || 'unknown');\n  const teamSize = Number(d.team_size ?? profiles.length ?? 0);\n  const analysisData = (d.analysis_data ?? {}) as Record<string, unknown>;\n  const dominantPattern = String(analysisData.dominant_communication_pattern || d.summary || '');\n  const influenceMap = (d.influence_map ?? []) as Array<Record<string, unknown>>;\n  const alliances = (d.alliances ?? []) as Array<Record<string, unknown>>;\n  const tensions = (d.tensions ?? []) as Array<Record<string, unknown>>;\n  const powerCenters = (analysisData.power_centers ?? []) as Array<Record<string, unknown>>;\n  const riskFactors = (analysisData.risk_factors ?? []) as string[];\n  const recommendations = (analysisData.recommendations ?? []) as string[];\n  const commFlow = (analysisData.communication_flow ?? {}) as Record<string, unknown>;\n  const dynamicsList = (d.dynamics ?? []) as Array<Record<string, unknown>>;\n  const analysisDate = String(analysisData.analysis_date || d.last_analysis_at || '');\n\n  const cohesionColor = cohesion >= 70 ? '#22c55e' : cohesion >= 40 ? '#f59e0b' : '#ef4444';\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Top stats */}\n      <div className=\"grid grid-cols-3 gap-3\">\n        <div className=\"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-5 flex items-center gap-4\">\n          <div className=\"relative w-16 h-16\">\n            <svg viewBox=\"0 0 36 36\" className=\"w-full h-full -rotate-90\">\n              <path d=\"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831\" fill=\"none\" stroke=\"var(--gm-border-primary)\" strokeWidth=\"3\" />\n              <path d=\"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831\" fill=\"none\" stroke={cohesionColor} strokeWidth=\"3\" strokeDasharray={`${cohesion}, 100`} strokeLinecap=\"round\" />\n            </svg>\n            <div className=\"absolute inset-0 flex flex-col items-center justify-center\">\n              <span className=\"text-lg font-bold text-gm-text-primary\">{cohesion}</span>\n            </div>\n          </div>\n          <div>\n            <p className=\"text-sm font-semibold text-gm-text-primary\">Team Cohesion</p>\n            <span className={`text-[10px] px-2 py-0.5 rounded-full font-medium capitalize ${\n              tensionLevel === 'low' ? 'bg-gm-status-success-bg text-gm-status-success' :\n              tensionLevel === 'medium' ? 'bg-gm-status-warning-bg text-gm-status-warning' :\n              'bg-gm-status-danger-bg text-gm-status-danger'\n            }`}>{tensionLevel} tension</span>\n          </div>\n        </div>\n        <div className=\"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-5 flex flex-col items-center justify-center\">\n          <p className=\"text-3xl font-bold text-gm-text-primary\">{teamSize}</p>\n          <p className=\"text-xs text-gm-text-tertiary\">Team Members</p>\n        </div>\n        <div className=\"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-5 flex items-center gap-3 justify-center\">\n          <Calendar className=\"w-5 h-5 text-gm-text-tertiary\" />\n          <div>\n            <p className=\"text-xs text-gm-text-tertiary\">Analysis Date</p>\n            <p className=\"text-sm font-semibold text-gm-text-primary\">\n              {analysisDate ? new Date(analysisDate).toLocaleDateString() : 'N/A'}\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Executive Summary with name resolution */}\n      {dominantPattern && (\n        <div className=\"bg-blue-600/5 border border-blue-600/10 rounded-xl p-4\">\n          <h3 className=\"text-xs font-semibold text-gm-interactive-primary uppercase tracking-wider mb-2\">Executive Summary</h3>\n          <p className=\"text-sm text-gm-text-primary leading-relaxed\">{replacePersonNames(dominantPattern, resolveName)}</p>\n        </div>\n      )}\n\n      {/* Influence Scoreboard */}\n      {profiles.length > 0 && <InfluenceScoreboard profiles={profiles} />}\n\n      {/* Communication Flow with person chips */}\n      {(commFlow.bottlenecks || commFlow.information_brokers || commFlow.central_nodes || commFlow.isolated_members) && (\n        <CommunicationFlowSection flow={commFlow} resolveName={resolveName} />\n      )}\n\n      {/* Dynamics cards with person chips and type configs */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n        {influenceMap.length > 0 && <InfluenceMapCard items={influenceMap} resolveName={resolveName} />}\n        {alliances.length > 0 && <AlliancesCard items={alliances} resolveName={resolveName} />}\n        {tensions.length > 0 && <TensionsCard items={tensions} resolveName={resolveName} />}\n        {powerCenters.length > 0 && <PowerCentersCard items={powerCenters} resolveName={resolveName} />}\n      </div>\n\n      {/* Dynamic scores */}\n      {dynamicsList.length > 0 && (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n          {dynamicsList.map((item, i) => (\n            <div key={i} className=\"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4\">\n              <div className=\"flex items-center gap-2 mb-2\">\n                <TrendingUp className=\"w-4 h-4 text-gm-interactive-primary\" />\n                <span className=\"text-sm font-medium text-gm-text-primary\">{String(item.aspect || item.name || `Dynamic #${i + 1}`)}</span>\n              </div>\n              <p className=\"text-xs text-gm-text-tertiary\">{replacePersonNames(String(item.description || item.summary || ''), resolveName)}</p>\n              {item.score !== undefined && (\n                <div className=\"mt-2 flex items-center gap-2\">\n                  <div className=\"flex-1 h-1.5 bg-gm-surface-secondary rounded-full\">\n                    <div className=\"h-1.5 bg-gm-interactive-primary rounded-full\" style={{ width: `${Math.min(100, Number(item.score))}%` }} />\n                  </div>\n                  <span className=\"text-[10px] font-mono text-gm-text-tertiary\">{String(item.score)}%</span>\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Risk Factors */}\n      {riskFactors.length > 0 && (\n        <div className=\"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4\">\n          <h3 className=\"text-xs font-semibold text-gm-status-danger uppercase tracking-wider mb-3 flex items-center gap-2\">\n            <AlertTriangle className=\"w-4 h-4\" /> Risk Factors\n            <span className=\"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-danger-bg text-gm-status-danger ml-auto\">{riskFactors.length} identified</span>\n          </h3>\n          <div className=\"space-y-2\">\n            {riskFactors.map((r, i) => (\n              <div key={i} className=\"flex items-start gap-2\">\n                <span className=\"text-[10px] text-gm-status-danger font-bold mt-0.5 flex-shrink-0\">{i + 1}</span>\n                <p className=\"text-xs text-gm-text-primary\">{replacePersonNames(r, resolveName)}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Recommendations */}\n      {recommendations.length > 0 && (\n        <div className=\"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4\">\n          <h3 className=\"text-xs font-semibold text-gm-status-success uppercase tracking-wider mb-3 flex items-center gap-2\">\n            <CheckCircle className=\"w-4 h-4\" /> Recommendations\n            <span className=\"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-success-bg text-gm-status-success ml-auto\">{recommendations.length} actions</span>\n          </h3>\n          <div className=\"space-y-2\">\n            {recommendations.map((r, i) => (\n              <div key={i} className=\"flex items-start gap-2\">\n                <span className=\"text-[10px] text-gm-status-success font-bold mt-0.5 flex-shrink-0\">Action {i + 1}</span>\n                <p className=\"text-xs text-gm-text-primary\">{replacePersonNames(r, resolveName)}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   Influence Scoreboard\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\nfunction InfluenceScoreboard({ profiles }: { profiles: Array<Record<string, unknown>> }) {\n  const sorted = [...profiles]\n    .filter(p => p.influence_score !== undefined)\n    .sort((a, b) => (Number(b.influence_score) || 0) - (Number(a.influence_score) || 0));\n  if (sorted.length === 0) return null;\n  const maxScore = Math.max(...sorted.map(p => Number(p.influence_score) || 0), 100);\n  const medals = ['ğŸ¥‡', 'ğŸ¥ˆ', 'ğŸ¥‰'];\n\n  return (\n    <div className=\"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4\">\n      <h3 className=\"text-xs font-semibold text-gm-text-primary uppercase tracking-wider mb-3 flex items-center gap-2\">\n        <TrendingUp className=\"w-4 h-4 text-gm-interactive-primary\" /> Influence Scoreboard\n        <span className=\"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-warning-bg text-gm-status-warning ml-auto\">{sorted.length} ranked</span>\n      </h3>\n      <div className=\"space-y-2\">\n        {sorted.map((profile, i) => {\n          const contact = (profile.contact ?? {}) as Record<string, unknown>;\n          const name = String(contact.name || profile.person_name || 'Unknown');\n          const role = String(contact.role || contact.organization || '');\n          const avatarUrl = isValidAvatarUrl(contact.avatar_url) ? contact.avatar_url : isValidAvatarUrl(contact.photo_url) ? contact.photo_url : null;\n          const score = Number(profile.influence_score) || 0;\n          const barWidth = (score / maxScore) * 100;\n          const risk = String(profile.risk_tolerance || 'medium');\n          const commStyle = String(profile.communication_style || '');\n          const styleSnippet = commStyle.split(';')[0]?.substring(0, 50) || '';\n\n          return (\n            <div key={i} className={`flex items-center gap-3 py-1.5 ${i < 3 ? 'bg-[var(--gm-surface-hover)] rounded-lg px-2' : ''}`}>\n              <span className=\"w-6 text-center text-sm\">{medals[i] || String(i + 1)}</span>\n              <ContactAvatar url={avatarUrl} name={name} size=\"md\" />\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-xs font-medium text-gm-text-primary truncate\">{name}</p>\n                {role && <p className=\"text-[10px] text-gm-text-tertiary truncate\">{role}</p>}\n                {styleSnippet && <p className=\"text-[9px] text-gray-400 truncate italic\">{styleSnippet}</p>}\n              </div>\n              <div className=\"w-32 flex items-center gap-1.5\">\n                <div className=\"flex-1 h-1.5 bg-gm-surface-secondary rounded-full\">\n                  <div className=\"h-1.5 bg-gm-interactive-primary rounded-full transition-all\" style={{ width: `${barWidth}%` }} />\n                </div>\n                <span className=\"text-[10px] font-mono text-gm-text-tertiary w-6 text-right\">{score}</span>\n              </div>\n              <span className={`text-[10px] px-1.5 py-0.5 rounded-full capitalize ${\n                risk === 'low' ? 'bg-gm-status-success-bg text-gm-status-success' :\n                risk === 'high' ? 'bg-gm-status-danger-bg text-gm-status-danger' :\n                'bg-gm-status-warning-bg text-gm-status-warning'\n              }`}>{risk}</span>\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\n/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   Communication Flow with Person Chips\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\nfunction CommunicationFlowSection({ flow, resolveName }: {\n  flow: Record<string, unknown>;\n  resolveName: (n: string) => PersonInfo;\n}) {\n  const bottlenecks = (flow.bottlenecks ?? []) as string[];\n  const brokers = (flow.information_brokers ?? []) as string[];\n  const central = (flow.central_nodes ?? []) as string[];\n  const isolated = (flow.isolated_members ?? []) as string[];\n\n  return (\n    <div className=\"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4\">\n      <h3 className=\"text-xs font-semibold text-gm-text-primary uppercase tracking-wider mb-3\">Communication Flow</h3>\n      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\n        {bottlenecks.length > 0 && (\n          <div className=\"bg-[var(--gm-surface-hover)] rounded-lg p-3\">\n            <div className=\"flex items-center gap-1.5 mb-2\">\n              <span>ğŸš§</span>\n              <span className=\"text-[10px] font-semibold uppercase tracking-wider text-gm-status-danger\">Bottlenecks</span>\n            </div>\n            <div className=\"flex flex-wrap gap-1.5\">\n              {bottlenecks.map((b, i) => <PersonChip key={i} name={b} resolve={resolveName} />)}\n            </div>\n          </div>\n        )}\n        {brokers.length > 0 && (\n          <div className=\"bg-[var(--gm-surface-hover)] rounded-lg p-3\">\n            <div className=\"flex items-center gap-1.5 mb-2\">\n              <span>ğŸ”—</span>\n              <span className=\"text-[10px] font-semibold uppercase tracking-wider text-gm-interactive-primary\">Info Brokers</span>\n            </div>\n            <div className=\"flex flex-wrap gap-1.5\">\n              {brokers.map((b, i) => <PersonChip key={i} name={b} resolve={resolveName} />)}\n            </div>\n            <p className=\"text-[9px] text-gm-text-tertiary mt-2\">Key connectors who bridge information across the team</p>\n          </div>\n        )}\n        {central.length > 0 && (\n          <div className=\"bg-[var(--gm-surface-hover)] rounded-lg p-3\">\n            <div className=\"flex items-center gap-1.5 mb-2\">\n              <span>â­</span>\n              <span className=\"text-[10px] font-semibold uppercase tracking-wider text-gm-status-success\">Central Nodes</span>\n            </div>\n            <div className=\"flex flex-wrap gap-1.5\">\n              {central.map((c, i) => <PersonChip key={i} name={c} resolve={resolveName} />)}\n            </div>\n            <p className=\"text-[9px] text-gm-text-tertiary mt-2\">Most connected team members</p>\n          </div>\n        )}\n        {isolated.length > 0 && (\n          <div className=\"bg-[var(--gm-surface-hover)] rounded-lg p-3\">\n            <div className=\"flex items-center gap-1.5 mb-2\">\n              <span>ğŸï¸</span>\n              <span className=\"text-[10px] font-semibold uppercase tracking-wider text-gm-status-warning\">Isolated</span>\n            </div>\n            <div className=\"flex flex-wrap gap-1.5\">\n              {isolated.map((m, i) => <PersonChip key={i} name={m} resolve={resolveName} />)}\n            </div>\n            <p className=\"text-[9px] text-gm-text-tertiary mt-2\">Members with fewer connections â€” may need inclusion</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   Influence Map Card - with person chips + type colors\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\nfunction InfluenceMapCard({ items, resolveName }: {\n  items: Array<Record<string, unknown>>;\n  resolveName: (n: string) => PersonInfo;\n}) {\n  const [expanded, setExpanded] = useState<Set<number>>(new Set());\n  const toggle = (i: number) => setExpanded(prev => { const n = new Set(prev); n.has(i) ? n.delete(i) : n.add(i); return n; });\n\n  return (\n    <div className=\"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4\">\n      <h3 className=\"text-xs font-semibold text-gm-text-primary uppercase tracking-wider mb-3 flex items-center gap-2\">\n        <TrendingUp className=\"w-4 h-4 text-gm-interactive-primary\" /> Influence Map\n        <span className=\"text-[10px] px-2 py-0.5 rounded-full bg-gm-surface-secondary text-gm-text-tertiary ml-auto\">{items.length} connections</span>\n      </h3>\n      <div className=\"space-y-2 max-h-72 overflow-y-auto\">\n        {items.slice(0, 10).map((inf, i) => {\n          const infType = String(inf.influence_type || 'direct').toLowerCase();\n          const config = influenceTypes[infType] || influenceTypes.direct;\n          const strengthPct = Math.round((Number(inf.strength) || 0.5) * (Number(inf.strength) <= 1 ? 100 : 1));\n          const hasEvidence = !!inf.evidence && String(inf.evidence).length > 10;\n\n          return (\n            <div key={i} className=\"bg-[var(--gm-surface-hover)] rounded-lg p-3\">\n              <div className=\"flex items-center gap-2 flex-wrap\">\n                <PersonChip name={String(inf.from_person || inf.from || '?')} resolve={resolveName} />\n                <ArrowRight className=\"w-3.5 h-3.5 text-gm-text-tertiary flex-shrink-0\" />\n                <PersonChip name={String(inf.to_person || inf.to || '?')} resolve={resolveName} />\n                <span className=\"text-[10px] px-1.5 py-0.5 rounded capitalize ml-auto\" style={{ background: config.bg, color: config.color }}>\n                  {config.icon} {infType}\n                </span>\n                <div className=\"flex items-center gap-1 w-20\">\n                  <div className=\"flex-1 h-1 rounded-full bg-gm-surface-secondary\">\n                    <div className=\"h-1 rounded-full transition-all\" style={{ width: `${strengthPct}%`, background: config.color }} />\n                  </div>\n                  <span className=\"text-[10px] font-mono text-gm-text-tertiary\">{strengthPct}%</span>\n                </div>\n                {hasEvidence && (\n                  <button onClick={() => toggle(i)} className=\"text-gm-text-tertiary hover:text-gm-text-primary\">\n                    {expanded.has(i) ? <ChevronUp className=\"w-3.5 h-3.5\" /> : <ChevronDown className=\"w-3.5 h-3.5\" />}\n                  </button>\n                )}\n              </div>\n              {expanded.has(i) && hasEvidence && (\n                <div className=\"mt-2 pt-2 border-t border-[var(--gm-border-primary)]\">\n                  <p className=\"text-[10px] text-gm-text-tertiary\"><strong>Evidence:</strong> {replacePersonNames(String(inf.evidence), resolveName)}</p>\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\n/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   Alliances Card\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\nfunction AlliancesCard({ items, resolveName }: {\n  items: Array<Record<string, unknown>>;\n  resolveName: (n: string) => PersonInfo;\n}) {\n  const [expanded, setExpanded] = useState<Set<number>>(new Set());\n  const toggle = (i: number) => setExpanded(prev => { const n = new Set(prev); n.has(i) ? n.delete(i) : n.add(i); return n; });\n\n  return (\n    <div className=\"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4\">\n      <h3 className=\"text-xs font-semibold text-gm-text-primary uppercase tracking-wider mb-3 flex items-center gap-2\">\n        <Users className=\"w-4 h-4 text-gm-interactive-primary\" /> Alliances\n        <span className=\"text-[10px] px-2 py-0.5 rounded-full bg-gm-surface-secondary text-gm-text-tertiary ml-auto\">{items.length} groups</span>\n      </h3>\n      <div className=\"space-y-2 max-h-72 overflow-y-auto\">\n        {items.slice(0, 10).map((all, i) => {\n          let members = all.members as string[] | string;\n          if (typeof members === 'string') members = members.split(/[\\s,]+/).filter(Boolean);\n          if (!Array.isArray(members)) members = [];\n          const aType = String(all.alliance_type || 'natural').toLowerCase();\n          const config = allianceTypes[aType] || allianceTypes.natural;\n          const strengthPct = Math.round((Number(all.strength) || 0.5) * (Number(all.strength) <= 1 ? 100 : 1));\n          const hasExpand = (all.evidence && String(all.evidence).length > 10) || (Array.isArray(all.shared_values) && (all.shared_values as string[]).length > 0);\n\n          return (\n            <div key={i} className=\"bg-[var(--gm-surface-hover)] rounded-lg p-3\">\n              <div className=\"flex items-center gap-2 flex-wrap\">\n                <div className=\"flex items-center gap-1.5 flex-wrap\">\n                  {(members as string[]).map((m, j) => (\n                    <span key={j} className=\"contents\">\n                      {j > 0 && <span className=\"text-[10px] text-gm-text-tertiary\">&</span>}\n                      <PersonChip name={m} resolve={resolveName} />\n                    </span>\n                  ))}\n                </div>\n                <span className=\"text-[10px] px-1.5 py-0.5 rounded capitalize ml-auto\" style={{ background: config.bg, color: config.color }}>\n                  {config.icon} {aType}\n                </span>\n                <div className=\"flex items-center gap-1 w-20\">\n                  <div className=\"flex-1 h-1 rounded-full bg-gm-surface-secondary\">\n                    <div className=\"h-1 rounded-full transition-all\" style={{ width: `${strengthPct}%`, background: config.color }} />\n                  </div>\n                  <span className=\"text-[10px] font-mono text-gm-text-tertiary\">{strengthPct}%</span>\n                </div>\n                {hasExpand && (\n                  <button onClick={() => toggle(i)} className=\"text-gm-text-tertiary hover:text-gm-text-primary\">\n                    {expanded.has(i) ? <ChevronUp className=\"w-3.5 h-3.5\" /> : <ChevronDown className=\"w-3.5 h-3.5\" />}\n                  </button>\n                )}\n              </div>\n              {expanded.has(i) && (\n                <div className=\"mt-2 pt-2 border-t border-[var(--gm-border-primary)] space-y-1\">\n                  {Array.isArray(all.shared_values) && (all.shared_values as string[]).length > 0 && (\n                    <p className=\"text-[10px] text-gm-text-tertiary\"><strong>Shared Values:</strong> {(all.shared_values as string[]).join(', ')}</p>\n                  )}\n                  {all.evidence && <p className=\"text-[10px] text-gm-text-tertiary\"><strong>Evidence:</strong> {replacePersonNames(String(all.evidence), resolveName)}</p>}\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\n/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   Tensions Card\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\nfunction TensionsCard({ items, resolveName }: {\n  items: Array<Record<string, unknown>>;\n  resolveName: (n: string) => PersonInfo;\n}) {\n  const [expanded, setExpanded] = useState<Set<number>>(new Set());\n  const toggle = (i: number) => setExpanded(prev => { const n = new Set(prev); n.has(i) ? n.delete(i) : n.add(i); return n; });\n\n  return (\n    <div className=\"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4\">\n      <h3 className=\"text-xs font-semibold text-gm-text-primary uppercase tracking-wider mb-3 flex items-center gap-2\">\n        <AlertTriangle className=\"w-4 h-4 text-gm-status-danger\" /> Tensions\n        <span className=\"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-danger-bg text-gm-status-danger ml-auto\">{items.length} identified</span>\n      </h3>\n      <div className=\"space-y-2 max-h-72 overflow-y-auto\">\n        {items.slice(0, 10).map((t, i) => {\n          let between = t.between as string[] | string;\n          if (typeof between === 'string') between = between.split(/[\\s,]+/).filter(Boolean);\n          if (!Array.isArray(between)) between = [];\n          const level = String(t.level || 'low').toLowerCase();\n          const tType = String(t.tension_type || 'communication').toLowerCase();\n          const config = tensionTypes[tType] || tensionTypes.communication;\n          const hasExpand = (t.evidence && String(t.evidence).length > 10) || (Array.isArray(t.triggers) && (t.triggers as string[]).length > 0);\n\n          return (\n            <div key={i} className=\"bg-[var(--gm-surface-hover)] rounded-lg p-3\">\n              <div className=\"flex items-center gap-2 flex-wrap\">\n                <div className=\"flex items-center gap-1.5 flex-wrap\">\n                  {(between as string[]).slice(0, 2).map((p, j) => (\n                    <span key={j} className=\"contents\">\n                      {j > 0 && <span className=\"text-[10px] text-gm-text-tertiary\">â†”</span>}\n                      <PersonChip name={p} resolve={resolveName} />\n                    </span>\n                  ))}\n                </div>\n                <span className=\"text-[10px] px-1.5 py-0.5 rounded capitalize ml-auto\" style={{ background: config.bg, color: config.color }}>\n                  {config.icon} {tType}\n                </span>\n                <span className={`text-[10px] px-1.5 py-0.5 rounded-full capitalize ${\n                  level === 'high' ? 'bg-gm-status-danger-bg text-gm-status-danger' :\n                  level === 'medium' ? 'bg-gm-status-warning-bg text-gm-status-warning' :\n                  'bg-gm-status-success-bg text-gm-status-success'\n                }`}>{level}</span>\n                {hasExpand && (\n                  <button onClick={() => toggle(i)} className=\"text-gm-text-tertiary hover:text-gm-text-primary\">\n                    {expanded.has(i) ? <ChevronUp className=\"w-3.5 h-3.5\" /> : <ChevronDown className=\"w-3.5 h-3.5\" />}\n                  </button>\n                )}\n              </div>\n              {expanded.has(i) && (\n                <div className=\"mt-2 pt-2 border-t border-[var(--gm-border-primary)] space-y-1\">\n                  {Array.isArray(t.triggers) && (t.triggers as string[]).length > 0 && (\n                    <p className=\"text-[10px] text-gm-text-tertiary\"><strong>Triggers:</strong> {(t.triggers as string[]).join(', ')}</p>\n                  )}\n                  {t.evidence && <p className=\"text-[10px] text-gm-text-tertiary\"><strong>Evidence:</strong> {replacePersonNames(String(t.evidence), resolveName)}</p>}\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\n/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   Power Centers Card\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\nfunction PowerCentersCard({ items, resolveName }: {\n  items: Array<Record<string, unknown>>;\n  resolveName: (n: string) => PersonInfo;\n}) {\n  const [expanded, setExpanded] = useState<Set<number>>(new Set());\n  const toggle = (i: number) => setExpanded(prev => { const n = new Set(prev); n.has(i) ? n.delete(i) : n.add(i); return n; });\n\n  return (\n    <div className=\"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4\">\n      <h3 className=\"text-xs font-semibold text-gm-text-primary uppercase tracking-wider mb-3 flex items-center gap-2\">\n        <Zap className=\"w-4 h-4 text-gm-interactive-primary\" /> Power Centers\n        <span className=\"text-[10px] px-2 py-0.5 rounded-full bg-gm-surface-secondary text-gm-text-tertiary ml-auto\">{items.length} key players</span>\n      </h3>\n      <div className=\"space-y-2 max-h-72 overflow-y-auto\">\n        {items.slice(0, 10).map((pc, i) => {\n          const pType = String(pc.power_type || 'informal').toLowerCase();\n          const config = powerTypes[pType] || powerTypes.informal;\n          const reachPct = Math.round(Number(pc.influence_reach ?? 50));\n          const hasDeps = Array.isArray(pc.dependencies) && (pc.dependencies as string[]).length > 0;\n\n          return (\n            <div key={i} className=\"bg-[var(--gm-surface-hover)] rounded-lg p-3\">\n              <div className=\"flex items-center gap-2 flex-wrap\">\n                <PersonChip name={String(pc.person || '?')} resolve={resolveName} />\n                <span className=\"text-[10px] px-1.5 py-0.5 rounded capitalize ml-auto\" style={{ background: config.bg, color: config.color }}>\n                  {config.icon} {pType}\n                </span>\n                <div className=\"flex items-center gap-1 w-20\">\n                  <div className=\"flex-1 h-1 rounded-full bg-gm-surface-secondary\">\n                    <div className=\"h-1 rounded-full transition-all\" style={{ width: `${reachPct}%`, background: config.color }} />\n                  </div>\n                  <span className=\"text-[10px] font-mono text-gm-text-tertiary\">{reachPct}%</span>\n                </div>\n                {hasDeps && (\n                  <button onClick={() => toggle(i)} className=\"text-gm-text-tertiary hover:text-gm-text-primary\">\n                    {expanded.has(i) ? <ChevronUp className=\"w-3.5 h-3.5\" /> : <ChevronDown className=\"w-3.5 h-3.5\" />}\n                  </button>\n                )}\n              </div>\n              {expanded.has(i) && hasDeps && (\n                <div className=\"mt-2 pt-2 border-t border-[var(--gm-border-primary)]\">\n                  <p className=\"text-[10px] text-gm-text-tertiary\"><strong>Power Sources:</strong> {(pc.dependencies as string[]).join(', ')}</p>\n                </div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n\n/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   Relationships Tab\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\nfunction RelationshipsTab({ data, isLoading, profiles, resolveName }: {\n  data: unknown;\n  isLoading: boolean;\n  profiles: Array<Record<string, unknown>>;\n  resolveName: (n: string) => PersonInfo;\n}) {\n  if (isLoading) return <Spinner />;\n  const rels = ((data as Record<string, unknown>)?.relationships ?? []) as Array<Record<string, unknown>>;\n  if (rels.length === 0) return <EmptyState icon={Network} message=\"No relationship data. Process documents to discover team relationships.\" />;\n\n  const edgeColors: Record<string, string> = {\n    influences: '#3b82f6',\n    aligned_with: '#22c55e',\n    tension_with: '#ef4444',\n    collaborates: '#8b5cf6',\n  };\n\n  const resolveRelName = (rel: Record<string, unknown>, direction: 'from' | 'to'): string => {\n    const contactObj = rel[`${direction}_contact`] as Record<string, unknown> | undefined;\n    if (contactObj && typeof contactObj === 'object' && contactObj.name) return String(contactObj.name);\n    const personObj = rel[`${direction}_person`] as Record<string, unknown> | undefined;\n    if (personObj && typeof personObj === 'object' && personObj.name) return String(personObj.name);\n    const directName = rel[direction] || rel[`${direction}_person`] || rel[`${direction}_contact`];\n    if (directName && typeof directName === 'string') return directName;\n    const contactId = rel[`${direction}_contact_id`] || rel[`${direction}_person_id`];\n    if (contactId) {\n      const profile = profiles.find(p => String(p.contact_id || p.person_id) === String(contactId));\n      if (profile) {\n        const contact = (profile.contact ?? {}) as Record<string, unknown>;\n        return String(contact.name || profile.person_name || contactId);\n      }\n    }\n    return '?';\n  };\n\n  return (\n    <div className=\"space-y-2\">\n      {rels.map((rel, i) => {\n        const relType = String(rel.type || rel.relationship_type || rel.label || 'related');\n        const edgeColor = edgeColors[relType] || '#6b7280';\n        const fromName = resolveRelName(rel, 'from');\n        const toName = resolveRelName(rel, 'to');\n        const evidence = rel.evidence as Array<Record<string, unknown>> | string | undefined;\n        const evidenceCount = Number(rel.evidence_count || (Array.isArray(evidence) ? evidence.length : 0));\n\n        return (\n          <div key={i} className=\"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"flex items-center gap-2 flex-1 min-w-0 flex-wrap\">\n                <PersonChip name={fromName} resolve={resolveName} />\n                <ArrowRight className=\"w-4 h-4 flex-shrink-0\" style={{ color: edgeColor }} />\n                <PersonChip name={toName} resolve={resolveName} />\n              </div>\n              <span className=\"text-[10px] px-2 py-0.5 rounded-full capitalize flex-shrink-0\" style={{ background: edgeColor + '15', color: edgeColor }}>\n                {relType.replace(/_/g, ' ')}\n              </span>\n              {rel.strength !== undefined && (\n                <div className=\"flex items-center gap-1.5 w-24\">\n                  <div className=\"flex-1 h-1.5 bg-gm-surface-secondary rounded-full\">\n                    <div className=\"h-1.5 rounded-full\" style={{ width: `${Math.round(Number(rel.strength) * (Number(rel.strength) <= 1 ? 100 : 1))}%`, background: edgeColor }} />\n                  </div>\n                  <span className=\"text-[10px] font-mono text-gm-text-tertiary\">{Math.round(Number(rel.strength) * (Number(rel.strength) <= 1 ? 100 : 1))}%</span>\n                </div>\n              )}\n              {rel.confidence && (\n                <span className=\"text-[10px] px-1.5 py-0.5 rounded-full bg-gm-surface-secondary text-gm-text-tertiary capitalize\">{String(rel.confidence)}</span>\n              )}\n            </div>\n            {/* Evidence and extra info */}\n            {(evidenceCount > 0 || (typeof evidence === 'string' && evidence.length > 0)) && (\n              <div className=\"mt-2 pt-2 border-t border-[var(--gm-border-primary)]\">\n                {typeof evidence === 'string' && evidence.length > 0 && (\n                  <p className=\"text-[10px] text-gm-text-tertiary\">{evidence}</p>\n                )}\n                {Array.isArray(evidence) && evidence.length > 0 && (\n                  <div className=\"space-y-1\">\n                    {evidence.slice(0, 3).map((e, j) => (\n                      <p key={j} className=\"text-[10px] text-gm-text-tertiary\">\n                        {e.quote && <span className=\"italic\">\"{String(e.quote)}\" </span>}\n                        {e.observation && <span>{String(e.observation)}</span>}\n                        {e.timestamp && <span className=\"text-gray-400 ml-1\">({String(e.timestamp)})</span>}\n                      </p>\n                    ))}\n                    {evidence.length > 3 && <p className=\"text-[9px] text-gray-500\">+{evidence.length - 3} more evidence items</p>}\n                  </div>\n                )}\n                {evidenceCount > 0 && !evidence && (\n                  <p className=\"text-[10px] text-gm-text-tertiary\">{evidenceCount} evidence items</p>\n                )}\n              </div>\n            )}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n\n/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   Network Graph Tab - Force-directed with drag, hover, HiDPI\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\nconst GRAPH_EDGE_STYLES: Record<string, { color: string; dash: boolean; label: string }> = {\n  influences: { color: '#3b82f6', dash: false, label: 'influences' },\n  aligned_with: { color: '#22c55e', dash: false, label: 'allied' },\n  tension_with: { color: '#ef4444', dash: true, label: 'tension' },\n  defers_to: { color: '#8b5cf6', dash: false, label: 'defers to' },\n  competes_with: { color: '#f59e0b', dash: true, label: 'competes' },\n  mentors: { color: '#06b6d4', dash: false, label: 'mentors' },\n  supports: { color: '#10b981', dash: false, label: 'supports' },\n};\n\nfunction canvasRoundRect(ctx: CanvasRenderingContext2D, x: number, y: number, w: number, h: number, r: number) {\n  ctx.beginPath();\n  ctx.moveTo(x + r, y);\n  ctx.lineTo(x + w - r, y);\n  ctx.quadraticCurveTo(x + w, y, x + w, y + r);\n  ctx.lineTo(x + w, y + h - r);\n  ctx.quadraticCurveTo(x + w, y + h, x + w - r, y + h);\n  ctx.lineTo(x + r, y + h);\n  ctx.quadraticCurveTo(x, y + h, x, y + h - r);\n  ctx.lineTo(x, y + r);\n  ctx.quadraticCurveTo(x, y, x + r, y);\n  ctx.closePath();\n}\n\nfunction graphNodeRadius(node: Record<string, unknown>) {\n  const props = (node.properties ?? {}) as Record<string, unknown>;\n  return 22 + (Number(props.influenceScore ?? node.influence_score ?? node.size ?? 50) / 12);\n}\n\nfunction NetworkGraphTab({ data, isLoading, profiles, resolveName }: {\n  data: unknown;\n  isLoading: boolean;\n  profiles: Array<Record<string, unknown>>;\n  resolveName: (n: string) => PersonInfo;\n}) {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [selectedNode, setSelectedNode] = useState<Record<string, unknown> | null>(null);\n  const graphData = data as { nodes?: Array<Record<string, unknown>>; edges?: Array<Record<string, unknown>> } | null;\n  const nodes = useMemo(() => graphData?.nodes ?? [], [graphData]);\n  const edges = useMemo(() => graphData?.edges ?? [], [graphData]);\n\n  const profileLookup = useMemo(() => {\n    const map: Record<string, Record<string, unknown>> = {};\n    profiles.forEach(p => {\n      const id = String(p.contact_id || p.person_id || '');\n      if (id) map[id] = p;\n    });\n    return map;\n  }, [profiles]);\n\n  const nodeConnections = useMemo(() => {\n    const map: Record<string, Array<{ type: string; target: string; targetId: string; direction: 'out' | 'in'; strength: number }>> = {};\n    edges.forEach(edge => {\n      const fromId = String(edge.from ?? edge.source);\n      const toId = String(edge.to ?? edge.target);\n      const type = String(edge.type || edge.label || edge.relationship_type || 'related');\n      const strength = Number(edge.strength ?? edge.value ?? 0.5);\n      const fromNode = nodes.find(nd => String(nd.id) === fromId);\n      const toNode = nodes.find(nd => String(nd.id) === toId);\n      if (!map[fromId]) map[fromId] = [];\n      if (!map[toId]) map[toId] = [];\n      map[fromId].push({ type, target: String(toNode?.label || toNode?.name || '?'), targetId: toId, direction: 'out', strength });\n      map[toId].push({ type, target: String(fromNode?.label || fromNode?.name || '?'), targetId: fromId, direction: 'in', strength });\n    });\n    return map;\n  }, [nodes, edges]);\n\n  const sim = useRef({\n    pos: [] as Array<{ x: number; y: number; vx: number; vy: number }>,\n    alpha: 1,\n    drag: -1,\n    dragStartX: 0,\n    dragStartY: 0,\n    hovered: -1,\n    w: 800,\n    h: 500,\n    frameId: 0,\n  });\n  const selectedIdRef = useRef<string | null>(null);\n  useEffect(() => { selectedIdRef.current = selectedNode ? String(selectedNode.id) : null; }, [selectedNode]);\n\n  useEffect(() => {\n    if (nodes.length === 0) return;\n    const canvas = canvasRef.current;\n    const container = containerRef.current;\n    if (!canvas || !container) return;\n\n    const s = sim.current;\n    s.w = container.clientWidth || 800;\n    s.h = 500;\n    const n = nodes.length;\n\n    s.pos = nodes.map((_, i) => ({\n      x: s.w / 2 + Math.cos(2 * Math.PI * i / n) * s.w * 0.2 + (Math.random() - 0.5) * 60,\n      y: s.h / 2 + Math.sin(2 * Math.PI * i / n) * s.h * 0.25 + (Math.random() - 0.5) * 60,\n      vx: 0, vy: 0,\n    }));\n    s.alpha = 1;\n\n    const nodeMap = new Map<string, number>();\n    nodes.forEach((nd, i) => nodeMap.set(String(nd.id), i));\n\n    let running = true;\n\n    function step() {\n      s.alpha *= 0.992;\n      if (s.alpha < 0.002) return;\n\n      const fx = new Float64Array(n);\n      const fy = new Float64Array(n);\n\n      const repK = 5500;\n      for (let i = 0; i < n; i++) {\n        for (let j = i + 1; j < n; j++) {\n          const dx = s.pos[j].x - s.pos[i].x;\n          const dy = s.pos[j].y - s.pos[i].y;\n          const d2 = Math.max(dx * dx + dy * dy, 100);\n          const d = Math.sqrt(d2);\n          const f = repK / d2;\n          const fxv = (dx / d) * f, fyv = (dy / d) * f;\n          fx[i] -= fxv; fy[i] -= fyv;\n          fx[j] += fxv; fy[j] += fyv;\n        }\n      }\n\n      const attK = 0.04;\n      const ideal = Math.min(200, Math.max(120, s.w / (n + 1)));\n      edges.forEach(edge => {\n        const fi = nodeMap.get(String(edge.from ?? edge.source));\n        const ti = nodeMap.get(String(edge.to ?? edge.target));\n        if (fi === undefined || ti === undefined) return;\n        const dx = s.pos[ti].x - s.pos[fi].x;\n        const dy = s.pos[ti].y - s.pos[fi].y;\n        const d = Math.max(Math.sqrt(dx * dx + dy * dy), 1);\n        const disp = d - ideal;\n        const str = Number(edge.strength ?? edge.value ?? 0.5);\n        const fv = attK * disp * (0.5 + str);\n        const fxv = (dx / d) * fv, fyv = (dy / d) * fv;\n        fx[fi] += fxv; fy[fi] += fyv;\n        fx[ti] -= fxv; fy[ti] -= fyv;\n      });\n\n      const grav = 0.012;\n      const cx = s.w / 2, cy = s.h / 2;\n      for (let i = 0; i < n; i++) {\n        fx[i] += (cx - s.pos[i].x) * grav;\n        fy[i] += (cy - s.pos[i].y) * grav;\n      }\n\n      const damp = 0.55;\n      for (let i = 0; i < n; i++) {\n        if (s.drag === i) { s.pos[i].vx = 0; s.pos[i].vy = 0; continue; }\n        s.pos[i].vx = (s.pos[i].vx + fx[i] * s.alpha) * damp;\n        s.pos[i].vy = (s.pos[i].vy + fy[i] * s.alpha) * damp;\n        s.pos[i].x += s.pos[i].vx;\n        s.pos[i].y += s.pos[i].vy;\n        const r = graphNodeRadius(nodes[i]) + 12;\n        s.pos[i].x = Math.max(r, Math.min(s.w - r, s.pos[i].x));\n        s.pos[i].y = Math.max(r, Math.min(s.h - r - 16, s.pos[i].y));\n      }\n    }\n\n    function draw() {\n      if (!canvas) return;\n      const ctx = canvas.getContext('2d');\n      if (!ctx) return;\n\n      const dpr = window.devicePixelRatio || 1;\n      const tw = Math.round(s.w * dpr), th = Math.round(s.h * dpr);\n      if (canvas.width !== tw || canvas.height !== th) {\n        canvas.width = tw;\n        canvas.height = th;\n        canvas.style.width = `${s.w}px`;\n        canvas.style.height = `${s.h}px`;\n      }\n      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\n      ctx.clearRect(0, 0, s.w, s.h);\n      if (s.pos.length === 0) return;\n\n      const selId = selectedIdRef.current;\n      const textColor = getComputedStyle(document.documentElement).getPropertyValue('--gm-text-primary').trim() || '#e2e8f0';\n      const bgColor = getComputedStyle(document.documentElement).getPropertyValue('--gm-surface-primary').trim() || '#1e293b';\n\n      edges.forEach(edge => {\n        const fi = nodeMap.get(String(edge.from ?? edge.source));\n        const ti = nodeMap.get(String(edge.to ?? edge.target));\n        if (fi === undefined || ti === undefined || !s.pos[fi] || !s.pos[ti]) return;\n\n        const eType = String(edge.type || edge.label || edge.relationship_type || '');\n        const st = GRAPH_EDGE_STYLES[eType] || { color: '#94a3b8', dash: false, label: eType.replace(/_/g, ' ') };\n        const relSel = selId && (String(edge.from ?? edge.source) === selId || String(edge.to ?? edge.target) === selId);\n        const opSuffix = selId ? (relSel ? 'dd' : '18') : '70';\n\n        const fp = s.pos[fi], tp = s.pos[ti];\n        const dx = tp.x - fp.x, dy = tp.y - fp.y;\n        const dist = Math.sqrt(dx * dx + dy * dy) || 1;\n        const fromR = graphNodeRadius(nodes[fi]);\n        const toR = graphNodeRadius(nodes[ti]);\n        const lineFromX = fp.x + (dx / dist) * fromR;\n        const lineFromY = fp.y + (dy / dist) * fromR;\n        const lineToX = tp.x - (dx / dist) * toR;\n        const lineToY = tp.y - (dy / dist) * toR;\n        const strength = Number(edge.strength ?? edge.value ?? 0.5);\n\n        ctx.save();\n        ctx.beginPath();\n        if (st.dash) ctx.setLineDash([6, 4]);\n        ctx.moveTo(lineFromX, lineFromY);\n        ctx.lineTo(lineToX, lineToY);\n        ctx.strokeStyle = st.color + opSuffix;\n        ctx.lineWidth = Math.max(1.5, strength * 4);\n        ctx.stroke();\n        if (st.dash) ctx.setLineDash([]);\n\n        if ((eType === 'influences' || eType === 'defers_to' || eType === 'mentors') && dist > fromR + toR + 20) {\n          const angle = Math.atan2(dy, dx);\n          const al = 10;\n          ctx.beginPath();\n          ctx.moveTo(lineToX, lineToY);\n          ctx.lineTo(lineToX - al * Math.cos(angle - 0.45), lineToY - al * Math.sin(angle - 0.45));\n          ctx.lineTo(lineToX - al * Math.cos(angle + 0.45), lineToY - al * Math.sin(angle + 0.45));\n          ctx.closePath();\n          ctx.fillStyle = st.color + opSuffix;\n          ctx.fill();\n        }\n\n        if (dist > 90 && (relSel || !selId)) {\n          const mx = (fp.x + tp.x) / 2, my = (fp.y + tp.y) / 2;\n          ctx.font = '9px Inter, system-ui, sans-serif';\n          ctx.textAlign = 'center';\n          ctx.textBaseline = 'middle';\n          const labelW = ctx.measureText(st.label).width + 8;\n          ctx.fillStyle = bgColor;\n          ctx.globalAlpha = 0.85;\n          canvasRoundRect(ctx, mx - labelW / 2, my - 7, labelW, 14, 3);\n          ctx.fill();\n          ctx.globalAlpha = 1;\n          ctx.fillStyle = st.color;\n          ctx.fillText(st.label, mx, my);\n        }\n        ctx.restore();\n      });\n\n      nodes.forEach((node, i) => {\n        if (!s.pos[i]) return;\n        const { x, y } = s.pos[i];\n        const r = graphNodeRadius(node);\n        const label = String(node.label || node.name || '?');\n        const color = stringToColor(label);\n        const isSel = selId === String(node.id);\n        const isHov = s.hovered === i;\n        const isConn = !!selId && !!nodeConnections[selId]?.some(c => c.targetId === String(node.id));\n        const dimmed = !!selId && !isSel && !isConn;\n\n        ctx.save();\n        if (dimmed) ctx.globalAlpha = 0.22;\n\n        if (isSel) { ctx.shadowColor = '#f59e0b'; ctx.shadowBlur = 18; }\n        else if (isHov) { ctx.shadowColor = color; ctx.shadowBlur = 14; }\n        else { ctx.shadowColor = 'rgba(0,0,0,0.15)'; ctx.shadowBlur = 6; ctx.shadowOffsetY = 2; }\n\n        const grad = ctx.createRadialGradient(x - r * 0.25, y - r * 0.25, 0, x, y, r);\n        grad.addColorStop(0, adjustColor(color, 25));\n        grad.addColorStop(1, adjustColor(color, -35));\n        ctx.beginPath();\n        ctx.arc(x, y, r, 0, Math.PI * 2);\n        ctx.fillStyle = grad;\n        ctx.fill();\n\n        ctx.shadowColor = 'transparent'; ctx.shadowBlur = 0; ctx.shadowOffsetY = 0;\n        ctx.strokeStyle = isSel ? '#f59e0b' : isHov ? '#fff' : 'rgba(255,255,255,0.45)';\n        ctx.lineWidth = isSel ? 3 : isHov ? 2.5 : 1.5;\n        ctx.stroke();\n\n        ctx.fillStyle = '#fff';\n        ctx.font = `bold ${Math.max(11, r * 0.52)}px Inter, system-ui, sans-serif`;\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'middle';\n        ctx.fillText(getInitials(label), x, y);\n\n        const ly = y + r + 14;\n        ctx.font = '600 11px Inter, system-ui, sans-serif';\n        const lw = ctx.measureText(label).width + 10;\n        ctx.fillStyle = bgColor;\n        ctx.globalAlpha = dimmed ? 0.15 : 0.75;\n        canvasRoundRect(ctx, x - lw / 2, ly - 7, lw, 14, 3);\n        ctx.fill();\n        ctx.globalAlpha = dimmed ? 0.22 : 1;\n        ctx.fillStyle = textColor;\n        ctx.fillText(label, x, ly);\n        ctx.restore();\n      });\n    }\n\n    function loop() {\n      if (!running) return;\n      step();\n      draw();\n      s.frameId = requestAnimationFrame(loop);\n    }\n    s.frameId = requestAnimationFrame(loop);\n\n    let resizeTimer: ReturnType<typeof setTimeout>;\n    const observer = new ResizeObserver(entries => {\n      clearTimeout(resizeTimer);\n      resizeTimer = setTimeout(() => {\n        for (const entry of entries) {\n          const newW = entry.contentRect.width;\n          if (newW > 0 && Math.abs(newW - s.w) > 5) {\n            const scale = newW / s.w;\n            s.w = newW;\n            s.pos.forEach(p => { p.x *= scale; });\n            s.alpha = Math.max(s.alpha, 0.3);\n          }\n        }\n      }, 100);\n    });\n    observer.observe(container);\n\n    return () => {\n      running = false;\n      cancelAnimationFrame(s.frameId);\n      observer.disconnect();\n      clearTimeout(resizeTimer);\n    };\n  }, [nodes, edges, nodeConnections]);\n\n  const findNode = useCallback((mx: number, my: number) => {\n    const s2 = sim.current;\n    for (let i = nodes.length - 1; i >= 0; i--) {\n      if (!s2.pos[i]) continue;\n      const r = graphNodeRadius(nodes[i]) + 3;\n      const dx = mx - s2.pos[i].x, dy = my - s2.pos[i].y;\n      if (dx * dx + dy * dy <= r * r) return i;\n    }\n    return -1;\n  }, [nodes]);\n\n  const handleMouseDown = useCallback((e: React.MouseEvent<HTMLCanvasElement>) => {\n    if (!canvasRef.current) return;\n    const rect = canvasRef.current.getBoundingClientRect();\n    const mx = e.clientX - rect.left, my = e.clientY - rect.top;\n    const idx = findNode(mx, my);\n    if (idx >= 0) {\n      const s2 = sim.current;\n      s2.drag = idx;\n      s2.dragStartX = mx;\n      s2.dragStartY = my;\n      s2.alpha = Math.max(s2.alpha, 0.08);\n      canvasRef.current.style.cursor = 'grabbing';\n    }\n  }, [findNode]);\n\n  const handleMouseMove = useCallback((e: React.MouseEvent<HTMLCanvasElement>) => {\n    if (!canvasRef.current) return;\n    const rect = canvasRef.current.getBoundingClientRect();\n    const mx = e.clientX - rect.left, my = e.clientY - rect.top;\n    const s2 = sim.current;\n    if (s2.drag >= 0 && s2.pos[s2.drag]) {\n      s2.pos[s2.drag].x = mx;\n      s2.pos[s2.drag].y = my;\n      return;\n    }\n    const idx = findNode(mx, my);\n    if (idx !== s2.hovered) {\n      s2.hovered = idx;\n      canvasRef.current.style.cursor = idx >= 0 ? 'grab' : 'default';\n    }\n  }, [findNode]);\n\n  const handleMouseUp = useCallback((e: React.MouseEvent<HTMLCanvasElement>) => {\n    if (!canvasRef.current) return;\n    const s2 = sim.current;\n    const wasDragging = s2.drag >= 0;\n    const dragIdx = s2.drag;\n    s2.drag = -1;\n    canvasRef.current.style.cursor = 'default';\n\n    const rect = canvasRef.current.getBoundingClientRect();\n    const mx = e.clientX - rect.left, my = e.clientY - rect.top;\n\n    if (wasDragging) {\n      const moved = Math.sqrt((mx - s2.dragStartX) ** 2 + (my - s2.dragStartY) ** 2);\n      if (moved < 6) setSelectedNode(nodes[dragIdx] || null);\n      return;\n    }\n    const idx = findNode(mx, my);\n    setSelectedNode(idx >= 0 ? nodes[idx] : null);\n  }, [findNode, nodes]);\n\n  const handleMouseLeave = useCallback(() => {\n    sim.current.drag = -1;\n    sim.current.hovered = -1;\n  }, []);\n\n  if (isLoading) return <Spinner />;\n  if (nodes.length === 0) return <EmptyState icon={Network} message=\"No network data. Analyze profiles and sync graph to build the network.\" />;\n\n  const selectedProfile = selectedNode ? profileLookup[String(selectedNode.id)] : null;\n  const selectedConns = selectedNode ? nodeConnections[String(selectedNode.id)] ?? [] : [];\n\n  return (\n    <div className=\"flex gap-3\">\n      <div className=\"flex-1 bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <h3 className=\"text-xs font-semibold text-gm-text-primary uppercase tracking-wider flex items-center gap-2\">\n            <Network className=\"w-4 h-4 text-gm-interactive-primary\" /> Team Network\n            <span className=\"text-[10px] px-2 py-0.5 rounded-full bg-gm-surface-secondary text-gm-text-tertiary\">{nodes.length} nodes, {edges.length} edges</span>\n          </h3>\n        </div>\n\n        <div className=\"flex flex-wrap gap-3 mb-3\">\n          {Object.entries(GRAPH_EDGE_STYLES)\n            .filter(([t]) => edges.some(e => String(e.type || e.label || e.relationship_type || '') === t))\n            .map(([t, st]) => (\n              <div key={t} className=\"flex items-center gap-1.5\">\n                <div className={`w-5 h-0.5 rounded ${st.dash ? 'border-t-2 border-dashed' : ''}`}\n                  style={st.dash ? { borderColor: st.color } : { background: st.color }} />\n                <span className=\"text-[10px] text-gm-text-tertiary capitalize\">{st.label}</span>\n              </div>\n            ))}\n        </div>\n\n        <div ref={containerRef} className=\"bg-[var(--gm-surface-hover)] rounded-lg overflow-hidden\">\n          <canvas ref={canvasRef} style={{ height: 500, width: '100%', display: 'block' }}\n            onMouseDown={handleMouseDown} onMouseMove={handleMouseMove}\n            onMouseUp={handleMouseUp} onMouseLeave={handleMouseLeave} />\n        </div>\n        <p className=\"text-[9px] text-gm-text-tertiary mt-1.5 text-center\">Drag nodes to rearrange Â· Click a node for details</p>\n      </div>\n\n      <div className=\"w-72 bg-gm-surface-primary border border-gm-border-primary rounded-xl p-4 flex-shrink-0\">\n        {selectedNode ? (\n          <NodeDetailPanel node={selectedNode} profile={selectedProfile} resolveName={resolveName} connections={selectedConns} />\n        ) : (\n          <div className=\"flex flex-col items-center justify-center h-full text-gm-text-tertiary\">\n            <Network className=\"w-10 h-10 mb-3 opacity-40\" />\n            <p className=\"text-xs text-center font-medium mb-1\">Select a Team Member</p>\n            <p className=\"text-[10px] text-center text-gray-500\">Click on a node to view their profile and connections.</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   Node Detail Panel (Graph side panel)\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\nfunction NodeDetailPanel({ node, profile, resolveName, connections }: {\n  node: Record<string, unknown>;\n  profile: Record<string, unknown> | undefined;\n  resolveName: (n: string) => PersonInfo;\n  connections: Array<{ type: string; target: string; targetId: string; direction: 'out' | 'in'; strength: number }>;\n}) {\n  const nodeProps = (node.properties ?? {}) as Record<string, unknown>;\n  const name = String(node.label || node.name || 'Unknown');\n  const contact = profile ? (profile.contact ?? {}) as Record<string, unknown> : {};\n  const role = String(contact.role || contact.organization || nodeProps.role || '');\n  const org = String(contact.organization || nodeProps.organization || '');\n  const influenceScore = Number(profile?.influence_score ?? nodeProps.influenceScore ?? node.influence_score ?? 0);\n  const commStyle = String(profile?.communication_style || nodeProps.communicationStyle || '');\n  const motivation = String(profile?.dominant_motivation || nodeProps.dominantMotivation || '');\n  const riskTolerance = String(profile?.risk_tolerance || nodeProps.riskTolerance || '');\n  const avatarUrl = isValidAvatarUrl(contact.avatar_url) ? String(contact.avatar_url) : isValidAvatarUrl(contact.photo_url) ? String(contact.photo_url) : null;\n\n  const edgeColors: Record<string, string> = {\n    influences: '#3b82f6', aligned_with: '#22c55e', tension_with: '#ef4444',\n    defers_to: '#8b5cf6', competes_with: '#f59e0b', mentors: '#06b6d4', supports: '#10b981',\n  };\n\n  return (\n    <div className=\"space-y-3 overflow-y-auto max-h-[500px]\">\n      <div className=\"flex items-center gap-3\">\n        <ContactAvatar url={avatarUrl} name={name} size=\"lg\" />\n        <div className=\"min-w-0\">\n          <p className=\"text-sm font-semibold text-gm-text-primary truncate\">{name}</p>\n          {role && <p className=\"text-[10px] text-gm-text-tertiary\">{role}</p>}\n          {org && org !== role && <p className=\"text-[10px] text-gm-text-tertiary\">{org}</p>}\n        </div>\n      </div>\n\n      <div>\n        <p className=\"text-[10px] text-gm-text-tertiary uppercase tracking-wider mb-1\">Influence</p>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"flex-1 h-2 bg-gm-surface-secondary rounded-full\">\n            <div className=\"h-2 bg-gm-interactive-primary rounded-full transition-all\" style={{ width: `${Math.min(100, influenceScore)}%` }} />\n          </div>\n          <span className=\"text-xs font-bold text-gm-text-primary\">{influenceScore}</span>\n        </div>\n      </div>\n\n      {riskTolerance && riskTolerance !== 'undefined' && (\n        <div className=\"flex items-center justify-between\">\n          <p className=\"text-[10px] text-gm-text-tertiary uppercase tracking-wider\">Risk Tolerance</p>\n          <span className={`text-[10px] px-1.5 py-0.5 rounded-full capitalize ${\n            riskTolerance === 'low' ? 'bg-gm-status-success-bg text-gm-status-success' :\n            riskTolerance === 'high' ? 'bg-gm-status-danger-bg text-gm-status-danger' :\n            'bg-gm-status-warning-bg text-gm-status-warning'\n          }`}>{riskTolerance}</span>\n        </div>\n      )}\n\n      {commStyle && (\n        <div>\n          <p className=\"text-[10px] text-gm-text-tertiary uppercase tracking-wider mb-0.5\">Communication</p>\n          <p className=\"text-xs text-gm-text-primary leading-relaxed\">{commStyle.substring(0, 120)}{commStyle.length > 120 ? '...' : ''}</p>\n        </div>\n      )}\n\n      {motivation && (\n        <div>\n          <p className=\"text-[10px] text-gm-text-tertiary uppercase tracking-wider mb-0.5\">Motivation</p>\n          <p className=\"text-xs text-gm-text-primary\">{motivation}</p>\n        </div>\n      )}\n\n      {connections.length > 0 && (\n        <div className=\"pt-2 border-t border-gm-border-primary\">\n          <p className=\"text-[10px] text-gm-text-tertiary uppercase tracking-wider mb-2\">\n            Connections <span className=\"text-[9px] px-1.5 py-0.5 rounded-full bg-gm-surface-secondary ml-1\">{connections.length}</span>\n          </p>\n          <div className=\"space-y-1\">\n            {connections.map((conn, j) => {\n              const color = edgeColors[conn.type] || '#6b7280';\n              return (\n                <div key={j} className=\"flex items-center gap-1.5 py-1 px-2 rounded-md bg-[var(--gm-surface-hover)]\">\n                  <span className=\"text-[10px]\" style={{ color }}>{conn.direction === 'out' ? 'â†’' : 'â†'}</span>\n                  <span className=\"text-[10px] text-gm-text-primary flex-1 truncate\">{conn.target}</span>\n                  <span className=\"text-[9px] px-1 py-0.5 rounded capitalize\" style={{ background: color + '15', color }}>\n                    {conn.type.replace(/_/g, ' ')}\n                  </span>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\n/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   Analyze Contacts Modal\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\nfunction AnalyzeContactsModal({ open, onClose, existingProfileIds }: {\n  open: boolean; onClose: () => void; existingProfileIds: Set<string>;\n}) {\n  const [search, setSearch] = useState('');\n  const [selected, setSelected] = useState<Set<string>>(new Set());\n  const contacts = useContacts();\n  const analyzeProfile = useAnalyzeProfile();\n  const [analyzing, setAnalyzing] = useState(false);\n  const [progress, setProgress] = useState({ done: 0, total: 0, current: '' });\n\n  const contactList = useMemo(() => {\n    const list = (contacts.data?.contacts ?? []) as Array<Record<string, unknown>>;\n    const sorted = [...list].sort((a, b) => {\n      const aAnalyzed = existingProfileIds.has(String(a.id));\n      const bAnalyzed = existingProfileIds.has(String(b.id));\n      if (aAnalyzed !== bAnalyzed) return aAnalyzed ? 1 : -1;\n      return String(a.name || '').localeCompare(String(b.name || ''));\n    });\n    if (!search) return sorted;\n    return sorted.filter(c => JSON.stringify(c).toLowerCase().includes(search.toLowerCase()));\n  }, [contacts.data, search, existingProfileIds]);\n\n  const toggleContact = (id: string) => setSelected(prev => {\n    const next = new Set(prev);\n    if (next.has(id)) next.delete(id); else next.add(id);\n    return next;\n  });\n\n  const selectUnanalyzed = () => {\n    const ids = contactList.filter(c => !existingProfileIds.has(String(c.id))).map(c => String(c.id));\n    setSelected(new Set(ids));\n  };\n\n  const handleAnalyze = async () => {\n    if (selected.size === 0) return;\n    setAnalyzing(true);\n    const ids = Array.from(selected);\n    setProgress({ done: 0, total: ids.length, current: '' });\n    let success = 0, errors = 0;\n\n    for (const id of ids) {\n      const contact = contactList.find(c => String(c.id) === id);\n      const name = String(contact?.name || 'Contact');\n      setProgress(p => ({ ...p, current: name }));\n      try {\n        await analyzeProfile.mutateAsync({ personId: id, forceReanalysis: true });\n        success++;\n      } catch {\n        errors++;\n      }\n      setProgress(p => ({ ...p, done: p.done + 1 }));\n    }\n\n    setAnalyzing(false);\n    if (success > 0) toast.success(`Analyzed ${success} member${success > 1 ? 's' : ''}`);\n    if (errors > 0) toast.error(`Failed for ${errors} member${errors > 1 ? 's' : ''}`);\n    setSelected(new Set());\n    onClose();\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={o => !o && !analyzing && onClose()}>\n      <DialogContent className=\"max-w-lg p-0 overflow-hidden\">\n        <DialogTitle className=\"sr-only\">Analyze Team Members</DialogTitle>\n        <div className=\"px-5 pt-5 pb-3\">\n          <h2 className=\"text-base font-bold text-gm-text-primary\">Analyze Team Members</h2>\n          <p className=\"text-xs text-gm-text-tertiary mt-1\">Select members to analyze with AI behavioral profiling.</p>\n          <p className=\"text-[10px] text-gm-text-tertiary mt-0.5\">\n            {contactList.length} contacts &middot; {existingProfileIds.size} analyzed\n          </p>\n        </div>\n\n        <div className=\"px-5 pb-3 flex gap-2\">\n          <div className=\"relative flex-1\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gm-text-tertiary\" />\n            <input value={search} onChange={e => setSearch(e.target.value)} placeholder=\"Search contacts...\"\n              className=\"w-full pl-9 pr-3 py-1.5 bg-gm-surface-secondary border border-gm-border-primary rounded-lg text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus\" />\n          </div>\n          <button onClick={selectUnanalyzed}\n            className=\"px-3 py-1.5 rounded-lg bg-gm-surface-secondary text-gm-text-primary text-xs hover:bg-gm-surface-hover transition-colors border border-gm-border-primary whitespace-nowrap\">\n            Select Unanalyzed\n          </button>\n        </div>\n\n        <div className=\"max-h-64 overflow-y-auto px-5 space-y-1\">\n          {contacts.isLoading && <Spinner />}\n          {contactList.map(contact => {\n            const id = String(contact.id);\n            const name = String(contact.name || 'Unknown');\n            const role = String(contact.role || contact.organization || '');\n            const avatarUrl = isValidAvatarUrl(contact.avatar_url) ? String(contact.avatar_url) : isValidAvatarUrl(contact.photo_url) ? String(contact.photo_url) : null;\n            const hasProfile = existingProfileIds.has(id);\n            const isSelected = selected.has(id);\n            return (\n              <label key={id} className={`flex items-center gap-3 p-2.5 rounded-lg cursor-pointer transition-colors ${isSelected ? 'bg-blue-600/5 border border-blue-600/20' : 'hover:bg-gm-surface-hover border border-transparent'}`}>\n                <input type=\"checkbox\" checked={isSelected} onChange={() => toggleContact(id)}\n                  className=\"w-3.5 h-3.5 rounded accent-gm-interactive-primary\" />\n                <ContactAvatar url={avatarUrl} name={name} size=\"md\" />\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"text-xs font-medium text-gm-text-primary truncate\">{name}</p>\n                  {role && <p className=\"text-[10px] text-gm-text-tertiary\">{role}</p>}\n                </div>\n                <span className={`text-[10px] px-2 py-0.5 rounded-full font-medium ${hasProfile ? 'bg-gm-status-success-bg text-gm-status-success' : 'bg-gm-surface-secondary text-gm-text-tertiary'}`}>\n                  {hasProfile ? 'Analyzed' : 'Not analyzed'}\n                </span>\n              </label>\n            );\n          })}\n          {!contacts.isLoading && contactList.length === 0 && (\n            <p className=\"text-xs text-gm-text-tertiary text-center py-4\">No contacts found.</p>\n          )}\n        </div>\n\n        {analyzing && (\n          <div className=\"px-5 py-3 border-t border-gm-border-primary\">\n            <div className=\"flex items-center justify-between mb-1\">\n              <span className=\"text-xs text-gm-text-primary\">{progress.current}...</span>\n              <span className=\"text-[10px] text-gm-text-tertiary\">{progress.done}/{progress.total}</span>\n            </div>\n            <div className=\"w-full bg-gm-surface-secondary rounded-full h-1.5\">\n              <div className=\"bg-gm-interactive-primary h-1.5 rounded-full transition-all\" style={{ width: `${(progress.done / progress.total) * 100}%` }} />\n            </div>\n          </div>\n        )}\n\n        <div className=\"px-5 py-3 border-t border-gm-border-primary flex items-center justify-between\">\n          <span className=\"text-xs text-gm-text-tertiary\">{selected.size} selected</span>\n          <div className=\"flex gap-2\">\n            <button onClick={onClose} disabled={analyzing}\n              className=\"px-3 py-1.5 rounded-lg bg-gm-surface-secondary text-gm-text-primary text-xs hover:bg-gm-surface-hover transition-colors\">Cancel</button>\n            <button onClick={handleAnalyze} disabled={selected.size === 0 || analyzing}\n              className=\"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover disabled:opacity-50 flex items-center gap-1.5 transition-colors\">\n              {analyzing ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Play className=\"w-3.5 h-3.5\" />}\n              {analyzing ? `Analyzing ${progress.done}/${progress.total}...` : `Analyze Selected (${selected.size})`}\n            </button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n   Shared UI Components\n   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */\nfunction Spinner() {\n  return (\n    <div className=\"flex items-center justify-center h-32\">\n      <Loader2 className=\"h-8 w-8 animate-spin text-gm-interactive-primary\" />\n    </div>\n  );\n}\n\nfunction EmptyState({ icon: Icon, message }: { icon: typeof Users; message: string }) {\n  return (\n    <div className=\"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-8 text-center text-gm-text-tertiary\">\n      <Icon className=\"h-12 w-12 mx-auto mb-4 text-gray-500\" />\n      {message}\n    </div>\n  );\n}\n"],"names":["CARD","AvatarWithFallback","url","name","initials","failed","setFailed","useState","jsx","stringToColor","adjustColor","ProfileDetail","profile","onBack","analyzeProfile","useAnalyzeProfile","queryClient","useQueryClient","contact","role","n","avatarRaw","avatarUrl","data","confidence","contactId","speakingTime","limitations","lastAnalysis","handleReanalyze","toast","formatTime","seconds","m","s","jsxs","ArrowLeft","Loader2","RotateCw","MetricPill","CommunicationSection","MotivationsSection","PressureSection","InfluenceTacticsSection","VulnerabilitiesSection","StrategySection","WarningSection","PowerSection","SectionHeader","FileText","l","i","Eye","CommentsPanel","label","value","Icon","title","comm","MessageSquare","InfoBlock","EvidenceList","mot","values","avoids","Star","v","a","behaviors","Clock","b","tactics","Target","t","vuln","triggers","blindSpots","inconsistencies","riskPatterns","Shield","VulnBlock","color","items","field","evidenceField","item","strat","works","avoid","cooperation","format","f","c","warnings","AlertTriangle","w","power","Zap","p","evidence","e","str","colors","hash","amount","clamp","hex","r","g","ContactAvatar","size","className","getInitials","dims","textSize","borderCls","buildNameResolver","profiles","mapping","index","realName","info","firstName","normalized","replacePersonNames","text","resolve","match","PersonChip","isValidAvatarUrl","influenceTypes","allianceTypes","tensionTypes","powerTypes","TeamAnalysisPage","tab","setTab","selectedProfile","setSelectedProfile","showAnalyzeModal","setShowAnalyzeModal","useTeamProfiles","dynamics","useTeamDynamics","relationships","useTeamRelationships","graphQuery","useTeamGraph","runTeamAnalysis","useRunTeamAnalysis","syncGraph","useSyncTeamGraph","profileList","useMemo","resolveName","ErrorState","tabs","Users","BarChart3","ArrowRight","Network","handleRunAnalysis","handleSyncGraph","Play","RefreshCw","ProfilesTab","TeamDynamicsTab","RelationshipsTab","NetworkGraphTab","AnalyzeContactsModal","isLoading","onSelectProfile","Spinner","EmptyState","sorted","commStyle","speakingMins","d","cohesion","tensionLevel","teamSize","analysisData","dominantPattern","influenceMap","alliances","tensions","powerCenters","riskFactors","recommendations","commFlow","dynamicsList","analysisDate","cohesionColor","Calendar","InfluenceScoreboard","CommunicationFlowSection","InfluenceMapCard","AlliancesCard","TensionsCard","PowerCentersCard","TrendingUp","CheckCircle","maxScore","medals","score","barWidth","risk","styleSnippet","flow","bottlenecks","brokers","central","isolated","expanded","setExpanded","toggle","prev","inf","infType","config","strengthPct","hasEvidence","ChevronUp","ChevronDown","all","members","aType","hasExpand","j","between","level","tType","pc","pType","reachPct","hasDeps","rels","edgeColors","resolveRelName","rel","direction","contactObj","personObj","directName","relType","edgeColor","fromName","toName","evidenceCount","GRAPH_EDGE_STYLES","canvasRoundRect","ctx","x","y","h","graphNodeRadius","node","props","canvasRef","useRef","containerRef","selectedNode","setSelectedNode","graphData","nodes","edges","profileLookup","map","id","nodeConnections","edge","fromId","toId","type","strength","fromNode","nd","toNode","sim","selectedIdRef","useEffect","canvas","container","_","nodeMap","running","step","fx","fy","repK","dx","dy","d2","fxv","fyv","attK","ideal","fi","ti","disp","fv","grav","cx","cy","damp","draw","dpr","tw","th","selId","textColor","bgColor","eType","st","relSel","opSuffix","fp","tp","dist","fromR","toR","lineFromX","lineFromY","lineToX","lineToY","angle","al","mx","my","labelW","isSel","isHov","isConn","dimmed","grad","ly","lw","loop","resizeTimer","observer","entries","entry","newW","scale","findNode","useCallback","s2","handleMouseDown","rect","idx","handleMouseMove","handleMouseUp","wasDragging","dragIdx","handleMouseLeave","selectedConns","NodeDetailPanel","connections","nodeProps","org","influenceScore","motivation","riskTolerance","conn","open","onClose","existingProfileIds","search","setSearch","selected","setSelected","contacts","useContacts","analyzing","setAnalyzing","progress","setProgress","contactList","aAnalyzed","bAnalyzed","toggleContact","next","selectUnanalyzed","ids","handleAnalyze","success","errors","Dialog","o","DialogContent","DialogTitle","Search","hasProfile","isSelected","message"],"mappings":"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"}