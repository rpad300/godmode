{"version":3,"mappings":"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","names":["MODAL_ID","state","containerRef","showKrispManager","existing","content","createElement","modal","createModal","openModal","bindTabEvents","loadTabContent","container","tabs","tab","on","tabId","t","contentEl","loadTranscripts","loadQuarantine","loadMappings","error","transcripts","krispService.getTranscripts","updateBadge","renderTranscriptItem","bindTranscriptActions","quarantine","krispService.getQuarantinedTranscripts","renderQuarantineItem","bindQuarantineActions","mappings","krispService.getMappings","m","renderMappingItem","bindMappingActions","transcript","label","color","krispService.formatStatus","duration","krispService.formatDuration","date","speakers","escapeHtml","mapping","item","id","showTranscriptDetail","btn","krispService.retryTranscript","toast","showProjectAssignmentModal","__vitePreload","krispService.skipTranscript","krispService.deleteMapping","info","count","badge","text","div","closeKrispManager","closeModal"],"ignoreList":[],"sources":["../../frontend/components/modals/KrispManager.ts"],"sourcesContent":["/**\r\n * Krisp Manager Modal\r\n * Manage Krisp transcripts, quarantine, and speaker mappings\r\n */\r\n\r\nimport { createElement, on } from '../../utils/dom';\r\nimport { createModal, openModal, closeModal } from '../Modal';\r\nimport { toast } from '../../services/toast';\r\nimport * as krispService from '../../services/krisp';\r\nimport type { KrispTranscript, KrispSpeakerMapping } from '../../services/krisp';\r\n\r\nconst MODAL_ID = 'krisp-manager-modal';\r\n\r\ntype TabId = 'transcripts' | 'quarantine' | 'mappings';\r\n\r\ninterface KrispManagerState {\r\n  activeTab: TabId;\r\n  transcripts: KrispTranscript[];\r\n  quarantine: KrispTranscript[];\r\n  mappings: KrispSpeakerMapping[];\r\n  loading: boolean;\r\n  selectedTranscript: KrispTranscript | null;\r\n}\r\n\r\nlet state: KrispManagerState = {\r\n  activeTab: 'transcripts',\r\n  transcripts: [],\r\n  quarantine: [],\r\n  mappings: [],\r\n  loading: false,\r\n  selectedTranscript: null,\r\n};\r\n\r\nlet containerRef: HTMLElement | null = null;\r\n\r\n/**\r\n * Show Krisp Manager modal\r\n */\r\nexport async function showKrispManager(): Promise<void> {\r\n  // Reset state\r\n  state = {\r\n    activeTab: 'transcripts',\r\n    transcripts: [],\r\n    quarantine: [],\r\n    mappings: [],\r\n    loading: false,\r\n    selectedTranscript: null,\r\n  };\r\n\r\n  // Remove existing modal\r\n  const existing = document.querySelector(`[data-modal-id=\"${MODAL_ID}\"]`);\r\n  if (existing) existing.remove();\r\n\r\n  const content = createElement('div', { className: 'krisp-manager' });\r\n  containerRef = content;\r\n\r\n  content.innerHTML = `\r\n    <style>\r\n      .krisp-manager {\r\n        min-height: 500px;\r\n      }\r\n      .krisp-tabs {\r\n        display: flex;\r\n        gap: 4px;\r\n        padding: 0 16px;\r\n        border-bottom: 1px solid var(--border-color, #e2e8f0);\r\n        margin-bottom: 16px;\r\n      }\r\n      .krisp-tab {\r\n        padding: 12px 20px;\r\n        background: none;\r\n        border: none;\r\n        cursor: pointer;\r\n        font-size: 14px;\r\n        font-weight: 500;\r\n        color: var(--text-secondary, #64748b);\r\n        border-bottom: 2px solid transparent;\r\n        margin-bottom: -1px;\r\n        transition: all 0.2s;\r\n      }\r\n      .krisp-tab:hover {\r\n        color: var(--text-primary, #1e293b);\r\n      }\r\n      .krisp-tab.active {\r\n        color: var(--primary, #e11d48);\r\n        border-bottom-color: var(--primary, #e11d48);\r\n      }\r\n      .krisp-tab .badge {\r\n        display: inline-flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        min-width: 20px;\r\n        height: 20px;\r\n        padding: 0 6px;\r\n        margin-left: 8px;\r\n        font-size: 11px;\r\n        font-weight: 600;\r\n        border-radius: 10px;\r\n        background: var(--bg-tertiary, #f1f5f9);\r\n        color: var(--text-secondary, #64748b);\r\n      }\r\n      .krisp-tab.active .badge {\r\n        background: var(--primary, #e11d48);\r\n        color: white;\r\n      }\r\n      .krisp-tab .badge.warning {\r\n        background: #fef3c7;\r\n        color: #92400e;\r\n      }\r\n      .krisp-content {\r\n        padding: 0 16px 16px;\r\n      }\r\n      .krisp-list {\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 8px;\r\n      }\r\n      .krisp-item {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 12px;\r\n        padding: 12px 16px;\r\n        background: var(--bg-secondary, #f8fafc);\r\n        border-radius: 8px;\r\n        cursor: pointer;\r\n        transition: background 0.2s;\r\n      }\r\n      .krisp-item:hover {\r\n        background: var(--bg-tertiary, #f1f5f9);\r\n      }\r\n      .krisp-item-icon {\r\n        width: 40px;\r\n        height: 40px;\r\n        border-radius: 8px;\r\n        background: var(--bg-tertiary, #f1f5f9);\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        flex-shrink: 0;\r\n      }\r\n      .krisp-item-icon svg {\r\n        width: 20px;\r\n        height: 20px;\r\n        color: var(--text-secondary, #64748b);\r\n      }\r\n      .krisp-item-content {\r\n        flex: 1;\r\n        min-width: 0;\r\n      }\r\n      .krisp-item-title {\r\n        font-weight: 500;\r\n        color: var(--text-primary, #1e293b);\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n      }\r\n      .krisp-item-meta {\r\n        font-size: 12px;\r\n        color: var(--text-secondary, #64748b);\r\n        display: flex;\r\n        gap: 12px;\r\n        margin-top: 2px;\r\n      }\r\n      .krisp-item-status {\r\n        padding: 2px 8px;\r\n        border-radius: 12px;\r\n        font-size: 11px;\r\n        font-weight: 500;\r\n        text-transform: uppercase;\r\n      }\r\n      .status-pending { background: #dbeafe; color: #1e40af; }\r\n      .status-quarantine { background: #fef3c7; color: #92400e; }\r\n      .status-ambiguous { background: #fed7aa; color: #9a3412; }\r\n      .status-matched { background: #cffafe; color: #0e7490; }\r\n      .status-processed { background: #dcfce7; color: #166534; }\r\n      .status-failed { background: #fecaca; color: #991b1b; }\r\n      .status-skipped { background: #e2e8f0; color: #475569; }\r\n      .krisp-item-actions {\r\n        display: flex;\r\n        gap: 8px;\r\n      }\r\n      .krisp-item-actions button {\r\n        padding: 6px 12px;\r\n        font-size: 12px;\r\n        border-radius: 6px;\r\n        border: 1px solid var(--border-color, #e2e8f0);\r\n        background: white;\r\n        cursor: pointer;\r\n        transition: all 0.2s;\r\n      }\r\n      .krisp-item-actions button:hover {\r\n        background: var(--bg-secondary, #f8fafc);\r\n      }\r\n      .krisp-item-actions button.primary {\r\n        background: var(--primary, #e11d48);\r\n        color: white;\r\n        border-color: var(--primary, #e11d48);\r\n      }\r\n      .krisp-item-actions button.primary:hover {\r\n        opacity: 0.9;\r\n      }\r\n      .krisp-empty {\r\n        text-align: center;\r\n        padding: 48px 16px;\r\n        color: var(--text-secondary, #64748b);\r\n      }\r\n      .krisp-empty svg {\r\n        width: 48px;\r\n        height: 48px;\r\n        margin-bottom: 16px;\r\n        opacity: 0.5;\r\n      }\r\n      .krisp-loading {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        padding: 48px;\r\n      }\r\n      .mapping-item {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n        padding: 12px 16px;\r\n        background: var(--bg-secondary, #f8fafc);\r\n        border-radius: 8px;\r\n      }\r\n      .mapping-info {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 12px;\r\n      }\r\n      .mapping-arrow {\r\n        color: var(--text-tertiary, #94a3b8);\r\n      }\r\n      .mapping-speaker {\r\n        font-family: monospace;\r\n        background: var(--bg-tertiary, #f1f5f9);\r\n        padding: 4px 8px;\r\n        border-radius: 4px;\r\n      }\r\n      .mapping-contact {\r\n        font-weight: 500;\r\n      }\r\n      .mapping-badge {\r\n        font-size: 11px;\r\n        padding: 2px 6px;\r\n        border-radius: 4px;\r\n        background: #dbeafe;\r\n        color: #1e40af;\r\n      }\r\n      [data-theme=\"dark\"] .krisp-item,\r\n      [data-theme=\"dark\"] .mapping-item {\r\n        background: rgba(30,41,59,0.5);\r\n      }\r\n      [data-theme=\"dark\"] .krisp-item:hover {\r\n        background: rgba(30,41,59,0.8);\r\n      }\r\n      [data-theme=\"dark\"] .krisp-item-actions button {\r\n        background: rgba(30,41,59,0.8);\r\n        border-color: rgba(255,255,255,0.1);\r\n      }\r\n    </style>\r\n    \r\n    <div class=\"krisp-tabs\">\r\n      <button class=\"krisp-tab active\" data-tab=\"transcripts\">\r\n        Transcripts\r\n        <span class=\"badge\" id=\"transcripts-count\">0</span>\r\n      </button>\r\n      <button class=\"krisp-tab\" data-tab=\"quarantine\">\r\n        Quarantine\r\n        <span class=\"badge warning\" id=\"quarantine-count\">0</span>\r\n      </button>\r\n      <button class=\"krisp-tab\" data-tab=\"mappings\">\r\n        Mappings\r\n        <span class=\"badge\" id=\"mappings-count\">0</span>\r\n      </button>\r\n    </div>\r\n    \r\n    <div class=\"krisp-content\" id=\"krisp-content\">\r\n      <div class=\"krisp-loading\">\r\n        <div class=\"loading-spinner\"></div>\r\n      </div>\r\n    </div>\r\n  `;\r\n\r\n  const modal = createModal({\r\n    id: MODAL_ID,\r\n    title: 'Krisp Transcripts',\r\n    content,\r\n    size: 'xl',\r\n  });\r\n\r\n  document.body.appendChild(modal);\r\n  openModal(MODAL_ID);\r\n\r\n  // Bind tab events\r\n  bindTabEvents(content);\r\n\r\n  // Load initial data\r\n  await loadTabContent('transcripts');\r\n}\r\n\r\n/**\r\n * Bind tab switching events\r\n */\r\nfunction bindTabEvents(container: HTMLElement): void {\r\n  const tabs = container.querySelectorAll('.krisp-tab');\r\n  tabs.forEach(tab => {\r\n    on(tab as HTMLElement, 'click', async () => {\r\n      const tabId = tab.getAttribute('data-tab') as TabId;\r\n      if (tabId === state.activeTab) return;\r\n\r\n      tabs.forEach(t => t.classList.remove('active'));\r\n      tab.classList.add('active');\r\n      state.activeTab = tabId;\r\n\r\n      await loadTabContent(tabId);\r\n    });\r\n  });\r\n}\r\n\r\n/**\r\n * Load tab content\r\n */\r\nasync function loadTabContent(tabId: TabId): Promise<void> {\r\n  if (!containerRef) return;\r\n\r\n  const contentEl = containerRef.querySelector('#krisp-content');\r\n  if (!contentEl) return;\r\n\r\n  contentEl.innerHTML = '<div class=\"krisp-loading\"><div class=\"loading-spinner\"></div></div>';\r\n  state.loading = true;\r\n\r\n  try {\r\n    switch (tabId) {\r\n      case 'transcripts':\r\n        await loadTranscripts(contentEl as HTMLElement);\r\n        break;\r\n      case 'quarantine':\r\n        await loadQuarantine(contentEl as HTMLElement);\r\n        break;\r\n      case 'mappings':\r\n        await loadMappings(contentEl as HTMLElement);\r\n        break;\r\n    }\r\n  } catch (error) {\r\n    console.error('[KrispManager] Error loading tab:', error);\r\n    contentEl.innerHTML = '<div class=\"krisp-empty\"><p>Failed to load. Please try again.</p></div>';\r\n  } finally {\r\n    state.loading = false;\r\n  }\r\n}\r\n\r\n/**\r\n * Load transcripts list\r\n */\r\nasync function loadTranscripts(container: HTMLElement): Promise<void> {\r\n  const transcripts = await krispService.getTranscripts({ limit: 50 });\r\n  state.transcripts = transcripts;\r\n\r\n  // Update badge\r\n  updateBadge('transcripts-count', transcripts.length);\r\n\r\n  if (transcripts.length === 0) {\r\n    container.innerHTML = `\r\n      <div class=\"krisp-empty\">\r\n        <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\"/>\r\n        </svg>\r\n        <p>No transcripts yet</p>\r\n        <p style=\"font-size: 12px; margin-top: 8px;\">Configure your Krisp webhook in Profile &gt; Integrations</p>\r\n      </div>\r\n    `;\r\n    return;\r\n  }\r\n\r\n  container.innerHTML = `<div class=\"krisp-list\">${transcripts.map(t => renderTranscriptItem(t)).join('')}</div>`;\r\n  bindTranscriptActions(container);\r\n}\r\n\r\n/**\r\n * Load quarantine list\r\n */\r\nasync function loadQuarantine(container: HTMLElement): Promise<void> {\r\n  const quarantine = await krispService.getQuarantinedTranscripts();\r\n  state.quarantine = quarantine;\r\n\r\n  // Update badge\r\n  updateBadge('quarantine-count', quarantine.length);\r\n\r\n  if (quarantine.length === 0) {\r\n    container.innerHTML = `\r\n      <div class=\"krisp-empty\">\r\n        <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"/>\r\n        </svg>\r\n        <p>No transcripts in quarantine</p>\r\n        <p style=\"font-size: 12px; margin-top: 8px;\">All speakers are identified correctly</p>\r\n      </div>\r\n    `;\r\n    return;\r\n  }\r\n\r\n  container.innerHTML = `<div class=\"krisp-list\">${quarantine.map(t => renderQuarantineItem(t)).join('')}</div>`;\r\n  bindQuarantineActions(container);\r\n}\r\n\r\n/**\r\n * Load mappings list\r\n */\r\nasync function loadMappings(container: HTMLElement): Promise<void> {\r\n  const mappings = await krispService.getMappings();\r\n  state.mappings = mappings;\r\n\r\n  // Update badge\r\n  updateBadge('mappings-count', mappings.length);\r\n\r\n  if (mappings.length === 0) {\r\n    container.innerHTML = `\r\n      <div class=\"krisp-empty\">\r\n        <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\"/>\r\n        </svg>\r\n        <p>No speaker mappings</p>\r\n        <p style=\"font-size: 12px; margin-top: 8px;\">Mappings are created when you manually link speakers to contacts</p>\r\n      </div>\r\n    `;\r\n    return;\r\n  }\r\n\r\n  container.innerHTML = `<div class=\"krisp-list\">${mappings.map(m => renderMappingItem(m)).join('')}</div>`;\r\n  bindMappingActions(container);\r\n}\r\n\r\n/**\r\n * Render transcript item\r\n */\r\nfunction renderTranscriptItem(transcript: KrispTranscript): string {\r\n  const { label, color } = krispService.formatStatus(transcript.status);\r\n  const duration = krispService.formatDuration(transcript.duration_minutes);\r\n  const date = transcript.meeting_date ? new Date(transcript.meeting_date).toLocaleDateString() : '-';\r\n  const speakers = transcript.speakers?.length || 0;\r\n\r\n  return `\r\n    <div class=\"krisp-item\" data-id=\"${transcript.id}\">\r\n      <div class=\"krisp-item-icon\">\r\n        <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\"/>\r\n        </svg>\r\n      </div>\r\n      <div class=\"krisp-item-content\">\r\n        <div class=\"krisp-item-title\">${escapeHtml(transcript.display_title || transcript.krisp_title || 'Untitled Meeting')}</div>\r\n        <div class=\"krisp-item-meta\">\r\n          <span>${date}</span>\r\n          <span>${duration}</span>\r\n          <span>${speakers} speakers</span>\r\n          ${transcript.projects?.name ? `<span>${escapeHtml(transcript.projects.name)}</span>` : ''}\r\n        </div>\r\n      </div>\r\n      <span class=\"krisp-item-status status-${transcript.status}\">${label}</span>\r\n    </div>\r\n  `;\r\n}\r\n\r\n/**\r\n * Render quarantine item with actions\r\n */\r\nfunction renderQuarantineItem(transcript: KrispTranscript): string {\r\n  const { label } = krispService.formatStatus(transcript.status);\r\n  const duration = krispService.formatDuration(transcript.duration_minutes);\r\n  const date = transcript.meeting_date ? new Date(transcript.meeting_date).toLocaleDateString() : '-';\r\n\r\n  return `\r\n    <div class=\"krisp-item\" data-id=\"${transcript.id}\">\r\n      <div class=\"krisp-item-icon\">\r\n        <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"/>\r\n        </svg>\r\n      </div>\r\n      <div class=\"krisp-item-content\">\r\n        <div class=\"krisp-item-title\">${escapeHtml(transcript.krisp_title || 'Untitled Meeting')}</div>\r\n        <div class=\"krisp-item-meta\">\r\n          <span>${date}</span>\r\n          <span>${duration}</span>\r\n          <span style=\"color: #f59e0b;\">${transcript.status_reason || label}</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"krisp-item-actions\">\r\n        <button class=\"retry-btn\" data-id=\"${transcript.id}\" title=\"Retry processing\">Retry</button>\r\n        <button class=\"assign-btn primary\" data-id=\"${transcript.id}\" title=\"Assign to project\">Assign</button>\r\n        <button class=\"skip-btn\" data-id=\"${transcript.id}\" title=\"Discard\">Skip</button>\r\n      </div>\r\n    </div>\r\n  `;\r\n}\r\n\r\n/**\r\n * Render mapping item\r\n */\r\nfunction renderMappingItem(mapping: KrispSpeakerMapping): string {\r\n  return `\r\n    <div class=\"mapping-item\" data-id=\"${mapping.id}\">\r\n      <div class=\"mapping-info\">\r\n        <span class=\"mapping-speaker\">${escapeHtml(mapping.speaker_name)}</span>\r\n        <span class=\"mapping-arrow\">â†’</span>\r\n        <span class=\"mapping-contact\">${escapeHtml(mapping.contacts?.name || 'Unknown')}</span>\r\n        ${mapping.is_global ? '<span class=\"mapping-badge\">Global</span>' : ''}\r\n      </div>\r\n      <button class=\"delete-mapping-btn\" data-id=\"${mapping.id}\" title=\"Remove mapping\">\r\n        <svg width=\"16\" height=\"16\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"/>\r\n        </svg>\r\n      </button>\r\n    </div>\r\n  `;\r\n}\r\n\r\n/**\r\n * Bind transcript click actions\r\n */\r\nfunction bindTranscriptActions(container: HTMLElement): void {\r\n  container.querySelectorAll('.krisp-item').forEach(item => {\r\n    on(item as HTMLElement, 'click', () => {\r\n      const id = item.getAttribute('data-id');\r\n      const transcript = state.transcripts.find(t => t.id === id);\r\n      if (transcript) {\r\n        showTranscriptDetail(transcript);\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\n/**\r\n * Bind quarantine action buttons\r\n */\r\nfunction bindQuarantineActions(container: HTMLElement): void {\r\n  // Retry buttons\r\n  container.querySelectorAll('.retry-btn').forEach(btn => {\r\n    on(btn as HTMLElement, 'click', async (e) => {\r\n      e.stopPropagation();\r\n      const id = btn.getAttribute('data-id');\r\n      if (!id) return;\r\n\r\n      btn.textContent = '...';\r\n      const success = await krispService.retryTranscript(id);\r\n      \r\n      if (success) {\r\n        toast.success('Retry queued');\r\n        await loadTabContent('quarantine');\r\n      } else {\r\n        toast.error('Retry failed');\r\n        btn.textContent = 'Retry';\r\n      }\r\n    });\r\n  });\r\n\r\n  // Assign buttons\r\n  container.querySelectorAll('.assign-btn').forEach(btn => {\r\n    on(btn as HTMLElement, 'click', async (e) => {\r\n      e.stopPropagation();\r\n      const id = btn.getAttribute('data-id');\r\n      const transcript = state.quarantine.find(t => t.id === id);\r\n      if (transcript) {\r\n        const { showProjectAssignmentModal } = await import('./ProjectAssignmentModal');\r\n        showProjectAssignmentModal({\r\n          transcript,\r\n          onAssign: async () => {\r\n            await loadTabContent('quarantine');\r\n          }\r\n        });\r\n      }\r\n    });\r\n  });\r\n\r\n  // Skip buttons\r\n  container.querySelectorAll('.skip-btn').forEach(btn => {\r\n    on(btn as HTMLElement, 'click', async (e) => {\r\n      e.stopPropagation();\r\n      const id = btn.getAttribute('data-id');\r\n      if (!id) return;\r\n\r\n      if (!confirm('Are you sure you want to skip this transcript?')) return;\r\n\r\n      const success = await krispService.skipTranscript(id, 'Manually skipped');\r\n      \r\n      if (success) {\r\n        toast.success('Transcript skipped');\r\n        await loadTabContent('quarantine');\r\n      } else {\r\n        toast.error('Failed to skip');\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\n/**\r\n * Bind mapping action buttons\r\n */\r\nfunction bindMappingActions(container: HTMLElement): void {\r\n  container.querySelectorAll('.delete-mapping-btn').forEach(btn => {\r\n    on(btn as HTMLElement, 'click', async (e) => {\r\n      e.stopPropagation();\r\n      const id = btn.getAttribute('data-id');\r\n      if (!id) return;\r\n\r\n      if (!confirm('Are you sure you want to delete this mapping?')) return;\r\n\r\n      const success = await krispService.deleteMapping(id);\r\n      \r\n      if (success) {\r\n        toast.success('Mapping deleted');\r\n        await loadTabContent('mappings');\r\n      } else {\r\n        toast.error('Failed to delete');\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\n/**\r\n * Show transcript detail (simple for now)\r\n */\r\nfunction showTranscriptDetail(transcript: KrispTranscript): void {\r\n  // For now, just show an alert with basic info\r\n  // In phase 3, this could be a full detail modal\r\n  const info = [\r\n    `Title: ${transcript.display_title || transcript.krisp_title}`,\r\n    `Status: ${transcript.status}`,\r\n    `Speakers: ${transcript.speakers?.join(', ') || 'None'}`,\r\n    `Project: ${transcript.projects?.name || 'Not assigned'}`,\r\n  ].join('\\n');\r\n\r\n  alert(info);\r\n}\r\n\r\n/**\r\n * Update badge count\r\n */\r\nfunction updateBadge(id: string, count: number): void {\r\n  if (!containerRef) return;\r\n  const badge = containerRef.querySelector(`#${id}`);\r\n  if (badge) {\r\n    badge.textContent = String(count);\r\n  }\r\n}\r\n\r\n/**\r\n * Escape HTML\r\n */\r\nfunction escapeHtml(text: string): string {\r\n  const div = document.createElement('div');\r\n  div.textContent = text;\r\n  return div.innerHTML;\r\n}\r\n\r\n/**\r\n * Close the modal\r\n */\r\nexport function closeKrispManager(): void {\r\n  closeModal(MODAL_ID);\r\n}\r\n"],"file":"KrispManager-BtgK3z2Q.js"}