import{c as _e,r as i,cj as ze,ck as je,cl as ve,cm as Ue,cn as Oe,a3 as z,j as e,br as Ne,bs as we,bt as ke,N as G,a as b,a4 as Se,U as X,C as Ce,ak as Ae,T as Pe,L as me,b as He,ao as xe,g as ge,O as g,co as Be,cp as We,K as pe,av as Ke,cq as $e,B as Ge,a5 as Qe,M as ue}from"./main-BKbBKYvC.js";import{C as Ze}from"./CommentsPanel-Dn8gVtu4.js";import{B as he}from"./brain-t58eVqGu.js";import{B as Je}from"./book-open-XfZr2P2-.js";import{C as be}from"./cpu-Cc2IQ2ui.js";import{C as Ve,P as Xe}from"./paperclip-BjQUPnzL.js";import{A as Ye}from"./arrow-left-ZBUT7vL6.js";import{S as qe}from"./save-CuHcaXm4.js";import{P as et}from"./pen-line-jZzzWq6p.js";import{C as Q}from"./circle-check-big-BfAZDzfZ.js";import{S as K}from"./sparkles-BJxATUBg.js";import{R as Te}from"./rotate-cw-DMgodGxB.js";import{L as ye}from"./lightbulb-CVgMn_Uk.js";import{L as tt}from"./link-2-CWyrMbe7.js";import{U as ie}from"./upload-BtADKM1s.js";import{E as st}from"./ErrorState-BgEaU0QT.js";import{C as rt}from"./chart-column-WCU8uNwR.js";import"./send-BFJJPLhY.js";import"./pen-BADy_74g.js";import"./circle-DnYbs28l.js";const at=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Y=_e("hash",at),re={whatsapp:"bg-green-500/10 text-green-500 border-green-500/20",slack:"bg-purple-500/10 text-purple-500 border-purple-500/20",teams:"bg-blue-500/10 text-blue-500 border-blue-500/20",discord:"bg-indigo-500/10 text-indigo-500 border-indigo-500/20",zoom:"bg-sky-500/10 text-sky-500 border-sky-500/20",telegram:"bg-cyan-500/10 text-cyan-500 border-cyan-500/20"},fe={whatsapp:"WhatsApp",slack:"Slack",teams:"Teams",discord:"Discord",zoom:"Zoom",telegram:"Telegram"};function nt({conversationId:o,open:v,onClose:c}){const[m,f]=i.useState("messages"),[Z,p]=i.useState(!1),[k,R]=i.useState(""),[S,T]=i.useState(""),E=ze(v?o:null),$=je(),L=ve(),I=Ue(),N=Oe(),a=E.data?.conversation,D=String(a?.title||a?.name||"Untitled Conversation"),U=String(a?.summary||""),u=String(a?.sourceApp||a?.source_app||""),h=String(a?.channelName||a?.channel_name||""),s=String(a?.workspaceName||a?.workspace_name||""),l=a?.participants||[],w=Number(a?.messageCount||a?.message_count||0),C=a?.messages||[],y=a?.dateRange,A=a?.importedAt?new Date(String(a.importedAt)).toLocaleString():"",O=!!(a?.is_embedded||a?.isEmbedded),F=a?.aiProcessedAt?new Date(String(a.aiProcessedAt)).toLocaleString():"",d=a?.extraction_result||a?.extractedEntities||{},M=d.facts||[],_=d.decisions||[],r=d.risks||[],x=d.actionItems||[],H=d.questions||[],J=d.entities||a?.extractedEntities||[],V=d.relationships||a?.extractedRelationships||[],q=d.participants||[],De=M.length+_.length+r.length+x.length+H.length>0,Ee=J.length+V.length>0,le=q.length>0||l.length>0,se=i.useMemo(()=>{if(!S.trim())return C;const t=S.toLowerCase();return C.filter(n=>String(n.text||n.content||n.body||"").toLowerCase().includes(t)||String(n.sender||n.author||"").toLowerCase().includes(t))},[C,S]),oe=i.useMemo(()=>{const t=["bg-blue-500/20 text-blue-500","bg-green-500/20 text-green-500","bg-purple-500/20 text-purple-500","bg-orange-500/20 text-orange-500","bg-pink-500/20 text-pink-500","bg-cyan-500/20 text-cyan-500","bg-yellow-500/20 text-yellow-500","bg-red-500/20 text-red-500"],n={};return[...new Set(C.map(j=>String(j.sender||j.author||"Unknown")))].forEach((j,B)=>{n[j]=t[B%t.length]}),n},[C]),Ie=()=>{!o||!confirm("Delete this conversation?")||$.mutate(o,{onSuccess:()=>{g.success("Conversation deleted"),c()},onError:()=>g.error("Failed to delete")})},Fe=()=>{o&&L.mutate(o,{onSuccess:()=>g.success("Re-embedding started"),onError:()=>g.error("Failed to re-embed")})},ce=()=>{!o||!k.trim()||I.mutate({id:o,data:{title:k.trim()}},{onSuccess:()=>{g.success("Title updated"),p(!1)},onError:()=>g.error("Failed to update title")})},Me=()=>{o&&N.mutate(o,{onSuccess:()=>g.success("Summary generated"),onError:()=>g.error("Failed to generate summary")})},Re=[{key:"messages",label:"Messages",icon:z,count:w},{key:"summary",label:"Summary",icon:he},{key:"knowledge",label:"Knowledge",icon:Je,count:M.length+_.length+x.length+r.length+H.length,hidden:!De},{key:"entities",label:"Entities",icon:be,count:J.length+V.length,hidden:!Ee},{key:"people",label:"People",icon:Ve,count:le?q.length||l.length:0,hidden:!le}];return e.jsx(Ne,{open:v,onOpenChange:t=>!t&&c(),children:e.jsxs(we,{className:"max-w-4xl p-0 overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsx(ke,{className:"sr-only",children:D}),E.isLoading&&e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(G,{className:"w-8 h-8 animate-spin text-blue-400"})}),!E.isLoading&&!a&&e.jsx("div",{className:"flex items-center justify-center h-48 text-slate-400 text-sm",children:"Conversation not found."}),!E.isLoading&&a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-5 shrink-0",style:{background:"linear-gradient(to right, rgba(37,99,235,0.25), rgba(37,99,235,0.08))"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("button",{onClick:c,className:"text-slate-400 hover:text-white transition-colors mt-1",children:e.jsx(Ye,{className:"w-5 h-5"})}),e.jsx("div",{className:b("w-12 h-12 rounded-xl flex items-center justify-center shrink-0 border",re[u]||"border-blue-500/30"),style:{backgroundColor:re[u]?void 0:"rgba(37,99,235,0.15)"},children:e.jsx(z,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[Z?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{value:k,onChange:t=>R(t.target.value),className:"bg-white/10 border border-white/20 rounded-lg px-2 py-1 text-sm text-white flex-1 focus:outline-none focus:ring-2 focus:ring-blue-500/50",autoFocus:!0,onKeyDown:t=>t.key==="Enter"&&ce()}),e.jsx("button",{onClick:ce,className:"text-green-400 hover:text-green-300",children:e.jsx(qe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>p(!1),className:"text-slate-400 hover:text-white",children:e.jsx(Se,{className:"w-4 h-4"})})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-lg font-semibold text-white leading-tight truncate",children:D}),e.jsx("button",{onClick:()=>{R(D),p(!0)},className:"text-slate-400 hover:text-slate-200 transition-colors",children:e.jsx(et,{className:"w-3.5 h-3.5"})})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5 flex-wrap",children:[u&&e.jsx("span",{className:b("text-[10px] px-2 py-0.5 rounded-full font-medium border",re[u]||"bg-white/10 text-slate-300 border-white/20"),children:fe[u]||u}),h&&e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full text-slate-300",style:{backgroundColor:"rgba(255,255,255,0.1)"},children:["#",h]}),s&&e.jsx("span",{className:"text-[10px] text-slate-300",children:s}),e.jsxs("span",{className:"text-[10px] text-slate-300 flex items-center gap-0.5",children:[e.jsx(X,{className:"w-3 h-3"})," ",l.length]}),e.jsxs("span",{className:"text-[10px] text-slate-300 flex items-center gap-0.5",children:[e.jsx(Y,{className:"w-3 h-3"})," ",w," msgs"]}),y?.first&&e.jsxs("span",{className:"text-[10px] text-slate-300 flex items-center gap-0.5",children:[e.jsx(Ce,{className:"w-3 h-3"})," ",String(y.first).split("T")[0]]}),O?e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-green-500/20 text-green-400 font-medium flex items-center gap-0.5",children:[e.jsx(Q,{className:"w-3 h-3"})," Embedded"]}):e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-yellow-500/20 text-yellow-400 font-medium",children:"Not embedded"}),F&&e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-blue-500/20 text-blue-400 flex items-center gap-0.5",children:[e.jsx(K,{className:"w-3 h-3"})," AI processed"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[e.jsx("button",{onClick:Fe,disabled:L.isPending,className:"p-2 rounded-lg text-slate-400 hover:bg-white/10 transition-colors",title:"Re-embed",children:L.isPending?e.jsx(G,{className:"w-4 h-4 animate-spin"}):e.jsx(Te,{className:"w-4 h-4"})}),e.jsx("button",{onClick:Ie,className:"p-2 rounded-lg text-slate-400 hover:bg-red-500/20 transition-colors",title:"Delete",children:e.jsx(Ae,{className:"w-4 h-4"})})]})]})}),e.jsx("div",{className:"flex gap-1 px-5 border-b border-[var(--gm-border-primary)] shrink-0",style:{borderColor:"var(--gm-border-primary)"},children:Re.filter(t=>!t.hidden).map(t=>{const n=t.icon;return e.jsxs("button",{onClick:()=>f(t.key),className:b("flex items-center gap-1.5 px-4 py-2.5 text-xs font-medium border-b-2 transition-colors",m===t.key?"border-blue-500 text-blue-400":"border-transparent text-slate-400 hover:text-slate-200"),children:[e.jsx(n,{className:"w-3.5 h-3.5"})," ",t.label,t.count!==void 0&&t.count>0&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded-full bg-white/10 text-slate-300",children:t.count})]},t.key)})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-4 bg-[var(--gm-surface-primary)]",style:{backgroundColor:"var(--gm-surface-primary)"},children:[m==="messages"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("input",{value:S,onChange:t=>T(t.target.value),placeholder:"Search messages...",className:"flex-1 bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-1.5 text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus"}),e.jsxs("span",{className:"text-[10px] text-gm-text-tertiary",children:[se.length,"/",C.length]})]}),se.length===0?e.jsxs("p",{className:"text-sm text-gm-text-tertiary text-center py-8",children:["No messages ",S?"matching your search":"available","."]}):e.jsx("div",{className:"space-y-2",children:se.map((t,n)=>{const P=String(t.sender||t.author||"Unknown"),j=P.charAt(0).toUpperCase(),B=String(t.text||t.content||t.body||""),de=t.timestamp?new Date(String(t.timestamp)).toLocaleString():"",Le=oe[P]||"bg-blue-600/20 text-gm-interactive-primary";return e.jsxs("div",{className:"flex gap-3 group",children:[e.jsx("div",{className:b("w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 text-[10px] font-bold",Le),children:j}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-semibold text-gm-text-primary",children:P}),de&&e.jsx("span",{className:"text-[10px] text-gray-400 opacity-0 group-hover:opacity-100 transition-opacity",children:de})]}),e.jsx("p",{className:"text-xs text-gm-text-secondary mt-0.5 whitespace-pre-wrap leading-relaxed",children:B})]})]},n)})})]}),m==="summary"&&e.jsxs("div",{className:"space-y-4",children:[U?e.jsxs("div",{className:"bg-blue-600/5 border-l-[3px] border-gm-interactive-primary rounded-r-lg p-4",children:[e.jsxs("div",{className:"text-[10px] uppercase tracking-wider text-gm-interactive-primary font-semibold mb-1.5 flex items-center gap-1.5",children:[e.jsx(K,{className:"w-3.5 h-3.5"})," AI Summary"]}),e.jsx("p",{className:"text-sm text-gm-text-primary leading-relaxed",children:U})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(he,{className:"w-10 h-10 mx-auto mb-3 text-gray-600"}),e.jsx("p",{className:"text-sm text-gm-text-tertiary mb-3",children:"No AI summary generated yet."}),e.jsxs("button",{onClick:Me,disabled:N.isPending,className:"px-4 py-2 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover flex items-center gap-1.5 mx-auto disabled:opacity-50 transition-colors",children:[N.isPending?e.jsx(G,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(K,{className:"w-3.5 h-3.5"}),"Generate Summary"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(ee,{label:"Participants",icon:X,children:e.jsx("div",{className:"flex flex-wrap gap-1.5 mt-1",children:l.map((t,n)=>e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-surface-secondary text-gm-text-primary border border-gm-border-primary",children:t},n))})}),e.jsx(ee,{label:"Statistics",icon:Y,children:e.jsxs("div",{className:"space-y-1 mt-1 text-xs text-gm-text-secondary",children:[e.jsxs("p",{children:[w," messages"]}),e.jsxs("p",{children:[l.length," participants"]}),y?.first&&e.jsxs("p",{children:["From: ",String(y.first).split("T")[0]]}),y?.last&&e.jsxs("p",{children:["To: ",String(y.last).split("T")[0]]})]})}),e.jsx(ee,{label:"Source",icon:z,children:e.jsxs("div",{className:"space-y-1 mt-1 text-xs text-gm-text-secondary",children:[u&&e.jsxs("p",{children:["Platform: ",fe[u]||u]}),h&&e.jsxs("p",{children:["Channel: #",h]}),s&&e.jsxs("p",{children:["Workspace: ",s]}),A&&e.jsxs("p",{children:["Imported: ",A]})]})}),e.jsx(ee,{label:"AI Processing",icon:K,children:e.jsxs("div",{className:"space-y-1 mt-1 text-xs text-gm-text-secondary",children:[e.jsxs("p",{children:["Status: ",F?"Processed":"Not processed"]}),F&&e.jsxs("p",{children:["At: ",F]}),e.jsxs("p",{children:["Embedded: ",O?"Yes":"No"]})]})})]})]}),m==="knowledge"&&e.jsxs("div",{className:"space-y-5",children:[M.length>0&&e.jsx(W,{title:"Facts",icon:ye,color:"text-gm-interactive-primary",count:M.length,children:M.map((t,n)=>e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gm-text-primary",children:String(t.content)}),e.jsxs("div",{className:"flex gap-2 mt-1.5",children:[t.category&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-gm-surface-secondary text-gm-text-tertiary capitalize",children:String(t.category)}),t.confidence&&e.jsxs("span",{className:"text-[10px] text-gm-text-tertiary",children:[Math.round(Number(t.confidence)*100),"% confidence"]})]})]},n))}),x.length>0&&e.jsx(W,{title:"Action Items",icon:Q,color:"text-gm-status-success",count:x.length,children:x.map((t,n)=>e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-lg p-3",children:[e.jsxs("p",{className:"text-xs text-gm-text-primary flex items-start gap-1.5",children:[e.jsx("span",{className:"text-gm-status-success mt-0.5",children:"☐"})," ",String(t.task)]}),e.jsxs("div",{className:"flex gap-2 mt-1.5 flex-wrap",children:[t.owner&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-gm-surface-secondary text-gm-text-tertiary",children:["Owner: ",String(t.owner)]}),t.deadline&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-gm-surface-secondary text-gm-text-tertiary",children:["Due: ",String(t.deadline)]}),t.status&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-blue-600/10 text-gm-interactive-primary capitalize",children:String(t.status)})]})]},n))}),_.length>0&&e.jsx(W,{title:"Decisions",icon:ye,color:"text-blue-500",count:_.length,children:_.map((t,n)=>e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gm-text-primary",children:String(t.content)}),e.jsxs("div",{className:"flex gap-2 mt-1.5",children:[t.owner&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-gm-surface-secondary text-gm-text-tertiary",children:["By: ",String(t.owner)]}),t.status&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-blue-500/10 text-blue-500 capitalize",children:String(t.status)})]})]},n))}),r.length>0&&e.jsx(W,{title:"Risks",icon:Pe,color:"text-gm-status-danger",count:r.length,children:r.map((t,n)=>e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-gm-text-primary",children:String(t.content)}),e.jsxs("div",{className:"flex gap-2 mt-1.5",children:[t.impact&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-gm-status-danger-bg text-gm-status-danger",children:["Impact: ",String(t.impact)]}),t.likelihood&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-gm-status-warning-bg text-gm-status-warning",children:["Likelihood: ",String(t.likelihood)]})]}),t.mitigation&&e.jsxs("p",{className:"text-[10px] text-gm-text-tertiary mt-1.5 italic",children:["Mitigation: ",String(t.mitigation)]})]},n))}),H.length>0&&e.jsx(W,{title:"Questions",icon:me,color:"text-gm-status-warning",count:H.length,children:H.map((t,n)=>e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-lg p-3",children:[e.jsxs("p",{className:"text-xs text-gm-text-primary flex items-start gap-1.5",children:[e.jsx(me,{className:"w-3.5 h-3.5 text-gm-status-warning shrink-0 mt-0.5"})," ",String(t.content)]}),e.jsxs("div",{className:"flex gap-2 mt-1.5",children:[t.assigned_to&&e.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-gm-surface-secondary text-gm-text-tertiary",children:["Assigned: ",String(t.assigned_to)]}),t.priority&&e.jsx("span",{className:b("text-[10px] px-1.5 py-0.5 rounded capitalize",t.priority==="high"?"bg-gm-status-danger-bg text-gm-status-danger":t.priority==="medium"?"bg-gm-status-warning-bg text-gm-status-warning":"bg-gm-surface-secondary text-gm-text-tertiary"),children:String(t.priority)}),t.status&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-gm-surface-secondary text-gm-text-tertiary capitalize",children:String(t.status)})]})]},n))})]}),m==="entities"&&e.jsxs("div",{className:"space-y-5",children:[J.length>0&&e.jsx(W,{title:"Entities",icon:be,color:"text-gm-interactive-primary",count:J.length,children:e.jsx("div",{className:"flex flex-wrap gap-2",children:J.map((t,n)=>e.jsxs("span",{className:"text-xs px-3 py-1.5 rounded-lg bg-blue-600/10 text-gm-interactive-primary font-medium border border-blue-600/20",children:[String(t.name||t.text||t.label||JSON.stringify(t)),t.type&&e.jsxs("span",{className:"text-[10px] text-blue-500 ml-1.5 capitalize",children:["(",String(t.type),")"]})]},n))})}),V.length>0&&e.jsx(W,{title:"Relationships",icon:tt,color:"text-purple-500",count:V.length,children:V.map((t,n)=>e.jsxs("div",{className:"flex items-center gap-2 bg-[var(--gm-surface-hover)] rounded-lg p-3",children:[e.jsx("span",{className:"text-xs font-medium text-gm-text-primary",children:String(t.from||t.source)}),e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded bg-purple-500/10 text-purple-500",children:String(t.type||t.label||"").replace(/_/g," ")}),e.jsx("span",{className:"text-xs font-medium text-gm-text-primary",children:String(t.to||t.target)})]},n))})]}),m==="people"&&e.jsx("div",{className:"space-y-3",children:q.length>0?q.map((t,n)=>{const P=String(t.name||"Unknown"),j=He(t);return e.jsxs("div",{className:"flex items-center gap-3 bg-[var(--gm-surface-hover)] rounded-xl p-4",children:[e.jsxs("div",{className:"w-10 h-10 rounded-full bg-blue-600/20 flex items-center justify-center text-sm font-bold text-gm-interactive-primary shrink-0 overflow-hidden",children:[xe(j)?e.jsx("img",{src:j,alt:P,className:"w-full h-full object-cover",onError:B=>{B.target.style.display="none",B.target.nextElementSibling&&B.target.nextElementSibling.classList.remove("hidden")}}):null,e.jsx("span",{className:xe(j)?"hidden":"",children:ge(P)})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gm-text-primary",children:P}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-0.5",children:[t.role&&e.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:String(t.role)}),t.organization&&e.jsxs("span",{className:"text-[10px] text-gm-text-tertiary",children:["at ",String(t.organization)]})]})]})]},n)}):l.map((t,n)=>{const P=C.filter(j=>String(j.sender||j.author)===t).length;return e.jsxs("div",{className:"flex items-center gap-3 bg-[var(--gm-surface-hover)] rounded-xl p-4",children:[e.jsx("div",{className:b("w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold shrink-0",oe[t]||"bg-blue-600/20 text-gm-interactive-primary"),children:ge(t)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gm-text-primary",children:t}),e.jsxs("p",{className:"text-[10px] text-gm-text-tertiary",children:[P," message",P!==1?"s":""]})]})]},n)})})]})]}),o&&e.jsx("div",{className:"mt-4",children:e.jsx(Ze,{targetType:"conversation",targetId:o})})]})})}function ee({label:o,icon:v,children:c}){return e.jsxs("div",{className:"bg-gm-surface-secondary rounded-xl p-4 border border-gm-border-primary",children:[e.jsxs("h4",{className:"text-[10px] uppercase tracking-wider text-gm-text-tertiary font-semibold flex items-center gap-1.5",children:[e.jsx(v,{className:"w-3.5 h-3.5"})," ",o]}),c]})}function W({title:o,icon:v,color:c,count:m,children:f}){return e.jsxs("div",{children:[e.jsxs("h3",{className:b("text-xs font-semibold uppercase tracking-wider mb-3 flex items-center gap-2",c),children:[e.jsx(v,{className:"w-4 h-4"})," ",o,e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-surface-secondary text-gm-text-tertiary ml-auto",children:m})]}),e.jsx("div",{className:"space-y-2",children:f})]})}const it=[{value:"",label:"Auto-detect"},{value:"whatsapp",label:"WhatsApp"},{value:"slack",label:"Slack"},{value:"teams",label:"Microsoft Teams"},{value:"discord",label:"Discord"},{value:"zoom",label:"Zoom Chat"},{value:"telegram",label:"Telegram"},{value:"generic",label:"Generic Chat"}];function lt({open:o,onClose:v}){const[c,m]=i.useState("input"),[f,Z]=i.useState("paste"),[p,k]=i.useState(""),[R,S]=i.useState(""),[T,E]=i.useState(""),[$,L]=i.useState(""),[I,N]=i.useState(""),[a,D]=i.useState(!1),[U,u]=i.useState(""),[h,s]=i.useState(null),l=i.useRef(null),w=Be(),C=We(),y=()=>{k(""),S(""),E(""),L(""),N(""),D(!1),u(""),s(null),m("input"),v()},A=i.useCallback(r=>{u(r.name);const x=new FileReader;x.onload=H=>{k(String(H.target?.result||""))},x.readAsText(r)},[]),O=async()=>{if(!p.trim()||p.trim().length<20){g.error("Conversation text is too short");return}try{const r=await w.mutateAsync({text:p,formatHint:R||void 0});s(r),m("preview")}catch{g.error("Failed to parse conversation")}},F=async()=>{if(p.trim()){m("importing");try{const x=await C.mutateAsync({text:p,formatHint:R||void 0,meta:{title:T||void 0,channelName:$||void 0,documentDate:I||void 0},skipAI:a});g.success(`Imported: "${x.title||"Conversation"}" (${x.stats?.messageCount??"?"} messages)`),y()}catch{g.error("Failed to import conversation"),m("preview")}}},d=h?.stats,M=h?.messagesPreview||[],_=h?.warnings||[];return e.jsx(Ne,{open:o,onOpenChange:r=>!r&&y(),children:e.jsxs(we,{className:"max-w-2xl p-0 overflow-hidden max-h-[90vh] flex flex-col",children:[e.jsx(ke,{className:"sr-only",children:"Import Conversation"}),e.jsx("div",{className:"px-5 py-4 shrink-0",style:{background:"linear-gradient(to right, rgba(37,99,235,0.25), rgba(37,99,235,0.08))"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:"rgba(37,99,235,0.15)"},children:e.jsx(ie,{className:"w-4 h-4 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold text-white",children:"Import Conversation"}),e.jsxs("p",{className:"text-[10px] text-slate-300",children:[c==="input"&&"Paste or upload a conversation transcript",c==="preview"&&"Review parsed conversation before importing",c==="importing"&&"Importing and analyzing with AI..."]})]})]}),e.jsx("button",{onClick:y,className:"w-8 h-8 rounded-lg flex items-center justify-center text-slate-400 hover:bg-white/10 transition-colors",children:e.jsx(Se,{className:"w-4 h-4"})})]})}),c==="input"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex px-5 border-b border-[var(--gm-border-primary)] shrink-0",style:{borderColor:"var(--gm-border-primary)"},children:[{key:"paste",label:"Paste Text"},{key:"upload",label:"Upload File"}].map(r=>e.jsx("button",{onClick:()=>Z(r.key),className:b("px-4 py-2.5 text-xs font-medium border-b-2 transition-colors",f===r.key?"border-blue-500 text-blue-400":"border-transparent text-slate-400 hover:text-slate-200"),children:r.label},r.key))}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-4 bg-[var(--gm-surface-primary)]",style:{backgroundColor:"var(--gm-surface-primary)"},children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-semibold text-gm-text-tertiary uppercase tracking-wider",children:"Format"}),e.jsx("select",{value:R,onChange:r=>S(r.target.value),className:"mt-1 w-full bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-2 text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus",children:it.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-semibold text-gm-text-tertiary uppercase tracking-wider",children:"Title (optional)"}),e.jsx("input",{value:T,onChange:r=>E(r.target.value),placeholder:"Auto-generated by AI",className:"mt-1 w-full bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-2 text-xs text-gm-text-primary placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-gm-border-focus"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-semibold text-gm-text-tertiary uppercase tracking-wider",children:"Channel name (optional)"}),e.jsx("input",{value:$,onChange:r=>L(r.target.value),placeholder:"e.g. #project-alpha",className:"mt-1 w-full bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-2 text-xs text-gm-text-primary placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-gm-border-focus"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-semibold text-gm-text-tertiary uppercase tracking-wider",children:"Document date (optional)"}),e.jsx("input",{type:"date",value:I,onChange:r=>N(r.target.value),className:"mt-1 w-full bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-2 text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus"})]})]}),f==="paste"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-semibold text-gm-text-tertiary uppercase tracking-wider",children:"Conversation text *"}),e.jsx("textarea",{value:p,onChange:r=>k(r.target.value),rows:12,placeholder:`Paste your exported conversation here...

Supported formats:
- WhatsApp: [31/01/2026, 10:00] John: Hello!
- Slack: john [10:00 AM] Hello!
- Discord: john — 01/31/2026 10:00 AM Hello!
- Teams: john 10:00 AM Hello!
- Generic: [10:00] john: Hello!`,className:"mt-1 w-full bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-2 text-xs text-gm-text-primary placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-gm-border-focus resize-y font-mono leading-relaxed"})]}),f==="upload"&&e.jsxs("div",{children:[e.jsxs("div",{className:"border-2 border-dashed border-gm-border-primary rounded-xl p-12 text-center hover:border-blue-600/30 transition-colors cursor-pointer bg-[var(--gm-surface-hover)]",onClick:()=>l.current?.click(),onDragOver:r=>r.preventDefault(),onDrop:r=>{r.preventDefault(),r.dataTransfer.files[0]&&A(r.dataTransfer.files[0])},children:[e.jsx(Xe,{className:"w-12 h-12 mx-auto mb-3 text-gray-600"}),e.jsx("p",{className:"text-sm font-medium text-gm-interactive-primary",children:"Drop conversation file here"}),e.jsx("p",{className:"text-xs text-gm-text-tertiary mt-1",children:"or click to browse · .txt, .chat, .log"}),e.jsx("input",{ref:l,type:"file",className:"hidden",accept:".txt,.chat,.log,.text",onChange:r=>{r.target.files?.[0]&&A(r.target.files[0])}})]}),U&&e.jsxs("div",{className:"flex items-center gap-3 mt-4 p-3 bg-gm-surface-secondary rounded-lg border border-gm-border-primary",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-600/10 flex items-center justify-center",children:e.jsx(pe,{className:"w-5 h-5 text-gm-interactive-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gm-text-primary",children:U}),e.jsxs("p",{className:"text-[10px] text-gm-text-tertiary",children:[p.length.toLocaleString()," characters loaded"]})]}),e.jsx("button",{onClick:()=>{k(""),u("")},className:"text-gm-text-tertiary hover:text-gm-status-danger text-lg",children:"×"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"skipAI",checked:a,onChange:r=>D(r.target.checked),className:"rounded border-gm-border-primary"}),e.jsx("label",{htmlFor:"skipAI",className:"text-xs text-gm-text-tertiary",children:"Skip AI processing (faster import, no entity extraction)"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 px-5 py-3 border-t border-[var(--gm-border-primary)] shrink-0",style:{borderColor:"var(--gm-border-primary)",backgroundColor:"var(--gm-surface-secondary)"},children:[e.jsx("button",{onClick:y,className:"px-4 py-2 rounded-lg text-slate-300 text-sm font-medium hover:bg-white/10 border border-white/20 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:O,disabled:w.isPending||!p.trim(),className:"px-4 py-2 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-sm font-medium hover:bg-gm-interactive-primary-hover disabled:opacity-50 flex items-center gap-1.5 transition-colors",children:[w.isPending?e.jsx(G,{className:"w-4 h-4 animate-spin"}):e.jsx(pe,{className:"w-4 h-4"}),"Preview & Parse"]})]})]}),c==="preview"&&h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-4 bg-[var(--gm-surface-primary)]",style:{backgroundColor:"var(--gm-surface-primary)"},children:[e.jsxs("div",{className:"bg-[var(--gm-status-success-bg)] border border-green-500/20 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Q,{className:"w-4 h-4 text-gm-status-success"}),e.jsx("span",{className:"text-xs font-semibold text-gm-status-success",children:"Parsed Successfully"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsx(te,{label:"Format",value:String(h.format||"auto"),icon:z}),e.jsx(te,{label:"Confidence",value:`${Math.round(Number(h.confidence||0)*100)}%`,icon:K}),e.jsx(te,{label:"Messages",value:String(d?.messageCount||0),icon:Y}),e.jsx(te,{label:"Participants",value:String(d?.participants?.length||0),icon:X})]})]}),_.length>0&&e.jsxs("div",{className:"bg-[var(--gm-status-warning-bg)] border border-yellow-500/20 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Pe,{className:"w-4 h-4 text-gm-status-warning"}),e.jsx("span",{className:"text-xs font-semibold text-gm-status-warning",children:"Warnings"})]}),e.jsx("ul",{className:"space-y-1",children:_.map((r,x)=>e.jsx("li",{className:"text-xs text-gm-status-warning",children:r},x))})]}),d?.participants&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-[10px] font-semibold text-gm-text-tertiary uppercase tracking-wider mb-2 flex items-center gap-1.5",children:[e.jsx(X,{className:"w-3.5 h-3.5"})," Participants"]}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:d.participants.map((r,x)=>e.jsx("span",{className:"text-xs px-2.5 py-1 rounded-lg bg-gm-surface-secondary text-gm-text-primary border border-gm-border-primary",children:r},x))})]}),d?.dateRange&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gm-text-tertiary",children:[e.jsx(Ke,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[String(d.dateRange?.first||"").split("T")[0]," → ",String(d.dateRange?.last||"").split("T")[0]]})]}),M.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-[10px] font-semibold text-gm-text-tertiary uppercase tracking-wider mb-2 flex items-center gap-1.5",children:[e.jsx(z,{className:"w-3.5 h-3.5"})," Message Preview (",M.length,h.hasMore?"+":"",")"]}),e.jsxs("div",{className:"bg-gm-surface-secondary rounded-xl p-3 space-y-2 max-h-64 overflow-y-auto",children:[M.map((r,x)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("span",{className:"text-[10px] font-semibold text-gm-interactive-primary min-w-[80px] truncate",children:String(r.speaker||r.sender||"Unknown")}),e.jsx("span",{className:"text-[10px] text-gm-text-secondary flex-1",children:String(r.text||r.content||"").substring(0,200)})]},x)),h.hasMore&&e.jsx("p",{className:"text-[10px] text-gm-text-tertiary text-center italic pt-1",children:"... more messages not shown in preview"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 px-5 py-3 border-t border-[var(--gm-border-primary)] shrink-0",style:{borderColor:"var(--gm-border-primary)",backgroundColor:"var(--gm-surface-secondary)"},children:[e.jsx("button",{onClick:()=>m("input"),className:"px-4 py-2 rounded-lg text-slate-300 text-sm font-medium hover:bg-white/10 border border-white/20 transition-colors",children:"Back"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:y,className:"px-4 py-2 rounded-lg text-slate-300 text-sm font-medium hover:bg-white/10 border border-white/20 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:F,className:"px-4 py-2 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-sm font-medium hover:bg-gm-interactive-primary-hover flex items-center gap-1.5 transition-colors",children:[e.jsx(ie,{className:"w-4 h-4"})," Import",!a&&" & Analyze with AI"]})]})]})]}),c==="importing"&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 gap-4 bg-[var(--gm-surface-primary)]",style:{backgroundColor:"var(--gm-surface-primary)"},children:[e.jsx(G,{className:"w-10 h-10 animate-spin text-blue-400"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium text-[var(--gm-text-primary)]",children:"Importing conversation..."}),!a&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"AI is analyzing content, extracting entities, and generating summary"})]})]})]})})}function te({label:o,value:v,icon:c}){return e.jsxs("div",{className:"text-center",children:[e.jsx(c,{className:"w-4 h-4 mx-auto mb-1 text-gm-text-tertiary"}),e.jsx("p",{className:"text-sm font-bold text-gm-text-primary capitalize",children:v}),e.jsx("p",{className:"text-[10px] text-gm-text-tertiary",children:o})]})}const ae={whatsapp:"WhatsApp",slack:"Slack",teams:"Teams",discord:"Discord",zoom:"Zoom",telegram:"Telegram"},ne={whatsapp:"bg-green-500/10 text-green-500",slack:"bg-purple-500/10 text-purple-500",teams:"bg-blue-500/10 text-blue-500",discord:"bg-indigo-500/10 text-indigo-500",zoom:"bg-sky-500/10 text-sky-500",telegram:"bg-cyan-500/10 text-cyan-500"};function Pt(){const[o,v]=i.useState(""),[c,m]=i.useState(""),[f,Z]=i.useState(""),[p,k]=i.useState(null),[R,S]=i.useState(!1),T=$e({search:o||void 0,sourceApp:c||void 0}),E=Ge(),$=je(),L=ve(),I=i.useMemo(()=>{const s=T.data?.conversations??[];return Array.isArray(s)?s:[]},[T.data]),N=i.useMemo(()=>I.filter(s=>!(f==="embedded"&&!s.is_embedded&&!s.isEmbedded||f==="not_embedded"&&(s.is_embedded||s.isEmbedded)||f==="ai_processed"&&!s.aiProcessedAt)),[I,f]),a=E.data,D=a?.bySource||{},U=(s,l)=>{s.stopPropagation(),confirm("Delete this conversation?")&&$.mutate(l,{onSuccess:()=>g.success("Conversation deleted"),onError:()=>g.error("Failed to delete")})},u=(s,l)=>{s.stopPropagation(),L.mutate(l,{onSuccess:()=>g.success("Re-embedding started"),onError:()=>g.error("Failed to re-embed")})},h=[{label:"Total",value:a?.total??I.length,color:"text-gm-text-primary",icon:z},{label:"Messages",value:a?.totalMessages??0,color:"text-gm-interactive-primary",icon:Y},{label:"Sources",value:Object.keys(D).length,color:"text-purple-500",icon:rt},{label:"Embedded",value:N.filter(s=>s.is_embedded||s.isEmbedded).length,color:"text-gm-status-success",icon:Q}];return e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gm-text-primary",children:"Conversations"}),e.jsxs("p",{className:"text-xs text-gm-text-tertiary mt-0.5",children:[N.length," conversation",N.length!==1?"s":""]})]}),e.jsxs("button",{onClick:()=>S(!0),className:"px-4 py-2 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-sm font-medium hover:bg-gm-interactive-primary-hover flex items-center gap-2 transition-colors",children:[e.jsx(ie,{className:"w-4 h-4"})," Import Conversation"]})]}),a&&e.jsx("div",{className:"grid grid-cols-4 gap-3",children:h.map(s=>{const l=s.icon;return e.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl px-4 py-3 flex items-center gap-3 hover:border-blue-600/20 transition-colors",children:[e.jsx("div",{className:b("w-9 h-9 rounded-lg flex items-center justify-center",s.label==="Total"?"bg-gm-surface-secondary":s.label==="Messages"?"bg-blue-600/10":s.label==="Sources"?"bg-purple-500/10":"bg-green-500/10"),children:e.jsx(l,{className:b("w-4.5 h-4.5",s.color)})}),e.jsxs("div",{children:[e.jsx("span",{className:b("text-xl font-bold",s.color),children:String(s.value)}),e.jsx("p",{className:"text-[10px] text-gm-text-tertiary uppercase tracking-wider",children:s.label})]})]},s.label)})}),Object.keys(D).length>0&&e.jsx("div",{className:"flex gap-2 flex-wrap",children:Object.entries(D).map(([s,l])=>e.jsxs("button",{onClick:()=>m(c===s?"":s),className:b("text-[10px] px-3 py-1.5 rounded-lg font-medium border transition-colors flex items-center gap-1.5",c===s?(ne[s]||"bg-blue-600/10 text-gm-interactive-primary")+" border-current/20":"bg-gm-surface-secondary text-gm-text-tertiary border-gm-border-primary hover:text-gm-text-primary"),children:[ae[s]||s," ",e.jsx("span",{className:"opacity-60",children:l})]},s))}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(Qe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gm-text-tertiary"}),e.jsx("input",{value:o,onChange:s=>v(s.target.value),placeholder:"Search conversations...",className:"w-full pl-9 pr-3 py-2 bg-gm-surface-secondary border border-gm-border-primary rounded-lg text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus"})]}),e.jsxs("select",{value:c,onChange:s=>m(s.target.value),className:"bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-2 text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus",children:[e.jsx("option",{value:"",children:"All sources"}),Object.entries(ae).map(([s,l])=>e.jsx("option",{value:s,children:l},s))]}),[{key:"embedded",label:"Embedded",icon:Q,activeColor:"bg-gm-status-success-bg border-green-500/30 text-gm-status-success"},{key:"not_embedded",label:"Not Embedded",icon:ue,activeColor:"bg-gm-status-warning-bg border-yellow-500/30 text-gm-status-warning"},{key:"ai_processed",label:"AI Processed",icon:K,activeColor:"bg-blue-600/10 border-blue-600/30 text-gm-interactive-primary"}].map(s=>{const l=s.icon,w=f===s.key;return e.jsxs("button",{onClick:()=>Z(w?"":s.key),className:b("px-2.5 py-2 rounded-lg text-xs font-medium transition-colors border flex items-center gap-1.5",w?s.activeColor:"bg-gm-surface-secondary border-gm-border-primary text-gm-text-tertiary hover:text-gm-text-primary"),children:[e.jsx(l,{className:"w-3.5 h-3.5"})," ",s.label]},s.key)})]}),T.error?e.jsx(st,{message:"Failed to load conversations.",onRetry:()=>T.refetch()}):T.isLoading?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(G,{className:"h-8 w-8 animate-spin text-gm-interactive-primary"})}):N.length===0?e.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-8 text-center text-gm-text-tertiary",children:[e.jsx(z,{className:"h-12 w-12 mx-auto mb-4 text-gray-500"}),I.length===0?"No conversations imported yet. Click 'Import Conversation' to get started.":"No conversations match your filters."]}):e.jsx("div",{className:"space-y-1.5",children:N.map(s=>{const l=s.participants?.length??s.participant_count??0,w=s.messageCount??s.message_count??s.messages_count??0,C=!!(s.is_embedded||s.isEmbedded),y=!!s.aiProcessedAt,A=String(s.sourceApp||s.source_app||""),O=String(s.summary||""),F=s.dateRange;return e.jsx("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-3.5 hover:border-blue-600/30 transition-all cursor-pointer group",onClick:()=>k(String(s.id)),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:b("w-10 h-10 rounded-lg flex items-center justify-center shrink-0",ne[A]||"bg-blue-600/10 text-gm-interactive-primary"),children:e.jsx(z,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gm-text-primary truncate group-hover:text-gm-interactive-primary transition-colors",children:String(s.title||s.name||"Untitled Conversation")}),e.jsxs("div",{className:"flex items-center gap-3 mt-0.5",children:[A&&e.jsx("span",{className:b("text-[10px] px-2 py-0.5 rounded-full font-medium",ne[A]||"bg-gm-surface-secondary text-gm-text-tertiary"),children:ae[A]||A}),e.jsxs("span",{className:"text-[10px] text-gm-text-tertiary flex items-center gap-0.5",children:[e.jsx(X,{className:"w-3 h-3"})," ",String(l)]}),e.jsxs("span",{className:"text-[10px] text-gm-text-tertiary flex items-center gap-0.5",children:[e.jsx(Y,{className:"w-3 h-3"})," ",String(w)," msgs"]}),F?.first&&e.jsxs("span",{className:"text-[10px] text-gm-text-tertiary flex items-center gap-0.5",children:[e.jsx(Ce,{className:"w-3 h-3"})," ",String(F.first).split("T")[0]]})]}),O&&e.jsx("p",{className:"text-[10px] text-gray-400 mt-0.5 truncate",children:O.substring(0,120)})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[C?e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-success-bg text-gm-status-success font-medium flex items-center gap-1",children:[e.jsx(Q,{className:"w-3 h-3"})," Embedded"]}):e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-warning-bg text-gm-status-warning font-medium flex items-center gap-1",children:[e.jsx(ue,{className:"w-3 h-3"})," Not embedded"]}),y&&e.jsx(K,{className:"w-3.5 h-3.5 text-blue-500"}),e.jsx("button",{onClick:d=>u(d,String(s.id)),className:"w-7 h-7 rounded-lg hover:bg-gm-surface-hover flex items-center justify-center text-gm-text-tertiary hover:text-gm-interactive-primary transition-colors opacity-0 group-hover:opacity-100",title:"Re-embed",children:e.jsx(Te,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:d=>U(d,String(s.id)),className:"w-7 h-7 rounded-lg hover:bg-gm-status-danger-bg flex items-center justify-center text-gm-text-tertiary hover:text-gm-status-danger transition-colors opacity-0 group-hover:opacity-100",title:"Delete",children:e.jsx(Ae,{className:"w-3.5 h-3.5"})})]})]})},String(s.id))})}),e.jsx(nt,{conversationId:p,open:!!p,onClose:()=>k(null)}),e.jsx(lt,{open:R,onClose:()=>S(!1)})]})}export{Pt as default};
//# sourceMappingURL=ConversationsPage-D2oQj8wl.js.map
