{"version":3,"mappings":";+LAWA,MAAMA,EAAW,sBAuBjB,IAAIC,EAA2B,CAC7B,UAAW,cACX,YAAa,GACb,WAAY,GACZ,SAAU,GACV,QAAS,GAET,YAAa,GACb,gBAAiB,IACjB,qBAAsB,IACtB,cAAe,CACb,OAAQ,GACR,MAAO,GACP,OAAQ,EAEV,CACF,EAEIC,EAAmC,KAMvC,eAAsBC,EAAiBC,EAAoB,cAA8B,CAEvFH,EAAQ,CACN,UAAWG,EACX,YAAa,GACb,WAAY,GACZ,SAAU,GACV,QAAS,GACT,mBAAoB,KACpB,YAAa,GACb,gBAAiB,IACjB,qBAAsB,IACtB,cAAe,CACb,OAAQ,GACR,MAAO,GACP,OAAQ,GACR,OAAQ,GACV,EAIF,MAAMC,EAAW,SAAS,cAAc,mBAAmBL,CAAQ,IAAI,EACnEK,KAAmB,SAEvB,MAAMC,EAAUC,EAAc,MAAO,CAAE,UAAW,gBAAiB,EACnEL,EAAeI,EAEfA,EAAQ,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA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","names":["MODAL_ID","state","containerRef","showKrispManager","initialTab","existing","content","createElement","modal","createModal","openModal","bindTabEvents","loadTabContent","container","tabs","tab","on","tabId","t","contentEl","loadTranscripts","loadQuarantine","loadMappings","loadImport","error","transcripts","krispService.getTranscripts","updateBadge","renderTranscriptItem","bindTranscriptActions","quarantine","krispService.getQuarantinedTranscripts","renderQuarantineItem","bindQuarantineActions","mappings","krispService.getMappings","m","renderMappingItem","bindMappingActions","transcript","label","color","krispService.formatStatus","duration","krispService.formatDuration","date","speakers","escapeHtml","mapping","item","id","showTranscriptDetail","btn","e","krispService.retryTranscript","toast","showProjectAssignmentModal","__vitePreload","krispService.skipTranscript","krispService.deleteMapping","info","count","badge","result","krispService.getAvailableMeetings","stats","lastSync","renderAvailableMeetingsList","bindImportFilters","meetings","renderAvailableMeetingItem","meeting","isImported","isSelected","filterBtn","afterInput","beforeInput","searchInput","bindAvailableMeetingListActions","selectAll","updateImportSelectionUI","checkbox","importBtn","selectedIds","krispService.importAvailableMeetings","selectedCount","countEl","text","div","closeKrispManager","closeModal"],"ignoreList":[],"sources":["../../frontend/components/modals/KrispManager.ts"],"sourcesContent":["/**\r\n * Krisp Manager Modal\r\n * Manage Krisp transcripts, quarantine, and speaker mappings\r\n */\r\n\r\nimport { createElement, on } from '../../utils/dom';\r\nimport { createModal, openModal, closeModal } from '../Modal';\r\nimport { toast } from '../../services/toast';\r\nimport * as krispService from '../../services/krisp';\r\nimport type { KrispTranscript, KrispSpeakerMapping, McpMeeting } from '../../services/krisp';\r\n\r\nconst MODAL_ID = 'krisp-manager-modal';\r\n\r\ntype TabId = 'transcripts' | 'quarantine' | 'mappings' | 'import';\r\n\r\ninterface KrispManagerState {\r\n  activeTab: TabId;\r\n  transcripts: KrispTranscript[];\r\n  quarantine: KrispTranscript[];\r\n  mappings: KrispSpeakerMapping[];\r\n  loading: boolean;\r\n  selectedTranscript: KrispTranscript | null;\r\n  // Import state\r\n  mcpMeetings: McpMeeting[];\r\n  importedIds: Set<string>;\r\n  selectedMeetings: Set<string>;\r\n  importFilters: {\r\n    search: string;\r\n    after: string;\r\n    before: string;\r\n    domain: string;\r\n  };\r\n}\r\n\r\nlet state: KrispManagerState = {\r\n  activeTab: 'transcripts',\r\n  transcripts: [],\r\n  quarantine: [],\r\n  mappings: [],\r\n  loading: false,\r\n  selectedTranscript: null,\r\n  mcpMeetings: [],\r\n  importedIds: new Set(),\r\n  selectedMeetings: new Set(),\r\n  importFilters: {\r\n    search: '',\r\n    after: '',\r\n    before: '',\r\n    domain: ''\r\n  }\r\n};\r\n\r\nlet containerRef: HTMLElement | null = null;\r\n\r\n/**\r\n * Show Krisp Manager modal\r\n * @param initialTab - Optional tab to open by default\r\n */\r\nexport async function showKrispManager(initialTab: TabId = 'transcripts'): Promise<void> {\r\n  // Reset state\r\n  state = {\r\n    activeTab: initialTab,\r\n    transcripts: [],\r\n    quarantine: [],\r\n    mappings: [],\r\n    loading: false,\r\n    selectedTranscript: null,\r\n    mcpMeetings: [],\r\n    importedIds: new Set(),\r\n    selectedMeetings: new Set(),\r\n    importFilters: {\r\n      search: '',\r\n      after: '',\r\n      before: '',\r\n      domain: ''\r\n    }\r\n  };\r\n\r\n  // Remove existing modal\r\n  const existing = document.querySelector(`[data-modal-id=\"${MODAL_ID}\"]`);\r\n  if (existing) existing.remove();\r\n\r\n  const content = createElement('div', { className: 'krisp-manager' });\r\n  containerRef = content;\r\n\r\n  content.innerHTML = `\r\n    <style>\r\n      .krisp-manager {\r\n        min-height: 450px;\r\n        padding-bottom: 16px;\r\n      }\r\n      .krisp-tabs {\r\n        display: flex;\r\n        gap: 4px;\r\n        padding: 0 16px;\r\n        border-bottom: 1px solid var(--border-color, #e2e8f0);\r\n        margin-bottom: 16px;\r\n      }\r\n      .krisp-tab {\r\n        padding: 12px 20px;\r\n        background: none;\r\n        border: none;\r\n        cursor: pointer;\r\n        font-size: 14px;\r\n        font-weight: 500;\r\n        color: var(--text-secondary, #64748b);\r\n        border-bottom: 2px solid transparent;\r\n        margin-bottom: -1px;\r\n        transition: all 0.2s;\r\n      }\r\n      .krisp-tab:hover {\r\n        color: var(--text-primary, #1e293b);\r\n      }\r\n      .krisp-tab.active {\r\n        color: var(--primary, #e11d48);\r\n        border-bottom-color: var(--primary, #e11d48);\r\n      }\r\n      .krisp-tab .badge {\r\n        display: inline-flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        min-width: 20px;\r\n        height: 20px;\r\n        padding: 0 6px;\r\n        margin-left: 8px;\r\n        font-size: 11px;\r\n        font-weight: 600;\r\n        border-radius: 10px;\r\n        background: var(--bg-tertiary, #f1f5f9);\r\n        color: var(--text-secondary, #64748b);\r\n      }\r\n      .krisp-tab.active .badge {\r\n        background: var(--primary, #e11d48);\r\n        color: white;\r\n      }\r\n      .krisp-tab .badge.warning {\r\n        background: #fef3c7;\r\n        color: #92400e;\r\n      }\r\n      .krisp-content {\r\n        padding: 0 16px 16px;\r\n      }\r\n      .krisp-list {\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 8px;\r\n      }\r\n      .krisp-item {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 12px;\r\n        padding: 12px 16px;\r\n        background: var(--bg-secondary, #f8fafc);\r\n        border-radius: 8px;\r\n        cursor: pointer;\r\n        transition: background 0.2s;\r\n      }\r\n      .krisp-item:hover {\r\n        background: var(--bg-tertiary, #f1f5f9);\r\n      }\r\n      .krisp-item-icon {\r\n        width: 40px;\r\n        height: 40px;\r\n        border-radius: 8px;\r\n        background: var(--bg-tertiary, #f1f5f9);\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        flex-shrink: 0;\r\n      }\r\n      .krisp-item-icon svg {\r\n        width: 20px;\r\n        height: 20px;\r\n        color: var(--text-secondary, #64748b);\r\n      }\r\n      .krisp-item-content {\r\n        flex: 1;\r\n        min-width: 0;\r\n      }\r\n      .krisp-item-title {\r\n        font-weight: 500;\r\n        color: var(--text-primary, #1e293b);\r\n        white-space: nowrap;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n      }\r\n      .krisp-item-meta {\r\n        font-size: 12px;\r\n        color: var(--text-secondary, #64748b);\r\n        display: flex;\r\n        gap: 12px;\r\n        margin-top: 2px;\r\n      }\r\n      .krisp-item-status {\r\n        padding: 2px 8px;\r\n        border-radius: 12px;\r\n        font-size: 11px;\r\n        font-weight: 500;\r\n        text-transform: uppercase;\r\n      }\r\n      .status-pending { background: #dbeafe; color: #1e40af; }\r\n      .status-quarantine { background: #fef3c7; color: #92400e; }\r\n      .status-ambiguous { background: #fed7aa; color: #9a3412; }\r\n      .status-matched { background: #cffafe; color: #0e7490; }\r\n      .status-processed { background: #dcfce7; color: #166534; }\r\n      .status-failed { background: #fecaca; color: #991b1b; }\r\n      .status-skipped { background: #e2e8f0; color: #475569; }\r\n      .krisp-item-actions {\r\n        display: flex;\r\n        gap: 8px;\r\n      }\r\n      .krisp-item-actions button {\r\n        padding: 6px 12px;\r\n        font-size: 12px;\r\n        border-radius: 6px;\r\n        border: 1px solid var(--border-color, #e2e8f0);\r\n        background: white;\r\n        cursor: pointer;\r\n        transition: all 0.2s;\r\n      }\r\n      .krisp-item-actions button:hover {\r\n        background: var(--bg-secondary, #f8fafc);\r\n      }\r\n      .krisp-item-actions button.primary {\r\n        background: var(--primary, #e11d48);\r\n        color: white;\r\n        border-color: var(--primary, #e11d48);\r\n      }\r\n      .krisp-item-actions button.primary:hover {\r\n        opacity: 0.9;\r\n      }\r\n      .krisp-empty {\r\n        text-align: center;\r\n        padding: 48px 16px;\r\n        color: var(--text-secondary, #64748b);\r\n      }\r\n      .krisp-empty svg {\r\n        width: 48px;\r\n        height: 48px;\r\n        margin-bottom: 16px;\r\n        opacity: 0.5;\r\n      }\r\n      .krisp-loading {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        padding: 48px;\r\n      }\r\n      .mapping-item {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n        padding: 12px 16px;\r\n        background: var(--bg-secondary, #f8fafc);\r\n        border-radius: 8px;\r\n      }\r\n      .mapping-info {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 12px;\r\n      }\r\n      .mapping-arrow {\r\n        color: var(--text-tertiary, #94a3b8);\r\n      }\r\n      .mapping-speaker {\r\n        font-family: monospace;\r\n        background: var(--bg-tertiary, #f1f5f9);\r\n        padding: 4px 8px;\r\n        border-radius: 4px;\r\n      }\r\n      .mapping-contact {\r\n        font-weight: 500;\r\n      }\r\n      .mapping-badge {\r\n        font-size: 11px;\r\n        padding: 2px 6px;\r\n        border-radius: 4px;\r\n        background: #dbeafe;\r\n        color: #1e40af;\r\n      }\r\n      [data-theme=\"dark\"] .krisp-item,\r\n      [data-theme=\"dark\"] .mapping-item {\r\n        background: rgba(30,41,59,0.5);\r\n      }\r\n      [data-theme=\"dark\"] .krisp-item:hover {\r\n        background: rgba(30,41,59,0.8);\r\n      }\r\n      [data-theme=\"dark\"] .krisp-item-actions button {\r\n        background: rgba(30,41,59,0.8);\r\n        border-color: rgba(255,255,255,0.1);\r\n      }\r\n      \r\n      /* Import tab styles */\r\n      .import-filters {\r\n        display: grid;\r\n        grid-template-columns: 1fr 1fr;\r\n        gap: 12px;\r\n        padding: 16px;\r\n        background: var(--bg-secondary, #f8fafc);\r\n        border-radius: 8px;\r\n        margin-bottom: 16px;\r\n      }\r\n      .import-filters .filter-row {\r\n        display: flex;\r\n        gap: 12px;\r\n        grid-column: 1 / -1;\r\n      }\r\n      .import-filters label {\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 4px;\r\n        font-size: 12px;\r\n        font-weight: 500;\r\n        color: var(--text-secondary, #64748b);\r\n      }\r\n      .import-filters input {\r\n        padding: 8px 12px;\r\n        border: 1px solid var(--border-color, #e2e8f0);\r\n        border-radius: 6px;\r\n        font-size: 14px;\r\n        background: white;\r\n      }\r\n      .import-filters .search-row {\r\n        display: flex;\r\n        gap: 12px;\r\n        align-items: flex-end;\r\n        grid-column: 1 / -1;\r\n      }\r\n      .import-filters .search-row label {\r\n        flex: 1;\r\n      }\r\n      .import-filters .search-btn {\r\n        padding: 8px 20px;\r\n        background: var(--primary, #e11d48);\r\n        color: white;\r\n        border: none;\r\n        border-radius: 6px;\r\n        font-weight: 500;\r\n        cursor: pointer;\r\n      }\r\n      .import-filters .search-btn:hover {\r\n        opacity: 0.9;\r\n      }\r\n      .import-header {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n        padding: 8px 0;\r\n        margin-bottom: 8px;\r\n      }\r\n      .import-header label {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 8px;\r\n        font-size: 14px;\r\n        cursor: pointer;\r\n      }\r\n      .import-header .count {\r\n        color: var(--text-secondary, #64748b);\r\n        font-size: 13px;\r\n      }\r\n      .import-meeting {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 12px;\r\n        padding: 12px 16px;\r\n        background: var(--bg-secondary, #f8fafc);\r\n        border-radius: 8px;\r\n        cursor: pointer;\r\n        transition: background 0.2s;\r\n      }\r\n      .import-meeting:hover {\r\n        background: var(--bg-tertiary, #f1f5f9);\r\n      }\r\n      .import-meeting.selected {\r\n        background: rgba(225, 29, 72, 0.05);\r\n        border: 1px solid rgba(225, 29, 72, 0.2);\r\n      }\r\n      .import-meeting.imported {\r\n        opacity: 0.6;\r\n      }\r\n      .import-meeting input[type=\"checkbox\"] {\r\n        width: 18px;\r\n        height: 18px;\r\n        cursor: pointer;\r\n      }\r\n      .import-meeting-content {\r\n        flex: 1;\r\n        min-width: 0;\r\n      }\r\n      .import-meeting-title {\r\n        font-weight: 500;\r\n        color: var(--text-primary, #1e293b);\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 8px;\r\n      }\r\n      .import-meeting-title .imported-badge {\r\n        font-size: 10px;\r\n        padding: 2px 6px;\r\n        border-radius: 4px;\r\n        background: #dcfce7;\r\n        color: #166534;\r\n      }\r\n      .import-meeting-meta {\r\n        font-size: 12px;\r\n        color: var(--text-secondary, #64748b);\r\n        margin-top: 2px;\r\n      }\r\n      .import-footer {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n        padding: 16px 0;\r\n        border-top: 1px solid var(--border-color, #e2e8f0);\r\n        margin-top: 16px;\r\n      }\r\n      .import-footer .selected-count {\r\n        font-size: 14px;\r\n        color: var(--text-secondary, #64748b);\r\n      }\r\n      .import-btn {\r\n        padding: 10px 24px;\r\n        background: var(--primary, #e11d48);\r\n        color: white;\r\n        border: none;\r\n        border-radius: 8px;\r\n        font-weight: 500;\r\n        cursor: pointer;\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 8px;\r\n      }\r\n      .import-btn:disabled {\r\n        opacity: 0.5;\r\n        cursor: not-allowed;\r\n      }\r\n      .import-btn:not(:disabled):hover {\r\n        opacity: 0.9;\r\n      }\r\n      .import-note {\r\n        background: #fef3c7;\r\n        border: 1px solid #fcd34d;\r\n        border-radius: 8px;\r\n        padding: 12px 16px;\r\n        margin-bottom: 16px;\r\n        font-size: 13px;\r\n        color: #92400e;\r\n        display: flex;\r\n        align-items: flex-start;\r\n        gap: 10px;\r\n      }\r\n      .import-note svg {\r\n        width: 18px;\r\n        height: 18px;\r\n        flex-shrink: 0;\r\n        margin-top: 1px;\r\n      }\r\n      [data-theme=\"dark\"] .import-filters {\r\n        background: rgba(30,41,59,0.5);\r\n      }\r\n      [data-theme=\"dark\"] .import-filters input {\r\n        background: rgba(30,41,59,0.8);\r\n        color: white;\r\n        border-color: rgba(255,255,255,0.1);\r\n      }\r\n      [data-theme=\"dark\"] .import-meeting {\r\n        background: rgba(30,41,59,0.5);\r\n      }\r\n      [data-theme=\"dark\"] .import-meeting.selected {\r\n        background: rgba(225,29,72,0.1);\r\n        border-color: rgba(225,29,72,0.3);\r\n      }\r\n      [data-theme=\"dark\"] .import-note {\r\n        background: rgba(251,191,36,0.1);\r\n        border-color: rgba(251,191,36,0.3);\r\n        color: #fcd34d;\r\n      }\r\n      .import-stats {\r\n        display: flex;\r\n        gap: 16px;\r\n        margin-bottom: 16px;\r\n        padding: 16px;\r\n        background: var(--bg-secondary, #f8fafc);\r\n        border-radius: 8px;\r\n      }\r\n      .stat-item {\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        flex: 1;\r\n      }\r\n      .stat-value {\r\n        font-size: 24px;\r\n        font-weight: 700;\r\n        color: var(--primary, #e11d48);\r\n      }\r\n      .stat-label {\r\n        font-size: 11px;\r\n        color: var(--text-secondary, #64748b);\r\n        text-transform: uppercase;\r\n        letter-spacing: 0.5px;\r\n      }\r\n      .import-meeting-summary {\r\n        font-size: 12px;\r\n        color: var(--text-secondary, #64748b);\r\n        margin-top: 4px;\r\n        line-height: 1.4;\r\n      }\r\n      [data-theme=\"dark\"] .import-stats {\r\n        background: rgba(255,255,255,0.03);\r\n      }\r\n    </style>\r\n    \r\n    <div class=\"krisp-tabs\">\r\n      <button class=\"krisp-tab ${initialTab === 'transcripts' ? 'active' : ''}\" data-tab=\"transcripts\">\r\n        Transcripts\r\n        <span class=\"badge\" id=\"transcripts-count\">0</span>\r\n      </button>\r\n      <button class=\"krisp-tab ${initialTab === 'quarantine' ? 'active' : ''}\" data-tab=\"quarantine\">\r\n        Quarantine\r\n        <span class=\"badge warning\" id=\"quarantine-count\">0</span>\r\n      </button>\r\n      <button class=\"krisp-tab ${initialTab === 'mappings' ? 'active' : ''}\" data-tab=\"mappings\">\r\n        Mappings\r\n        <span class=\"badge\" id=\"mappings-count\">0</span>\r\n      </button>\r\n      <button class=\"krisp-tab ${initialTab === 'import' ? 'active' : ''}\" data-tab=\"import\">\r\n        Import\r\n        <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" style=\"margin-left: 6px;\">\r\n          <path d=\"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3\"/>\r\n        </svg>\r\n      </button>\r\n    </div>\r\n    \r\n    <div class=\"krisp-content\" id=\"krisp-content\">\r\n      <div class=\"krisp-loading\">\r\n        <div class=\"loading-spinner\"></div>\r\n      </div>\r\n    </div>\r\n  `;\r\n\r\n  const modal = createModal({\r\n    id: MODAL_ID,\r\n    title: 'Krisp Transcripts',\r\n    content,\r\n    size: 'xl',\r\n  });\r\n\r\n  document.body.appendChild(modal);\r\n  openModal(MODAL_ID);\r\n\r\n  // Bind tab events\r\n  bindTabEvents(content);\r\n\r\n  // Load initial data\r\n  await loadTabContent('transcripts');\r\n}\r\n\r\n/**\r\n * Bind tab switching events\r\n */\r\nfunction bindTabEvents(container: HTMLElement): void {\r\n  const tabs = container.querySelectorAll('.krisp-tab');\r\n  tabs.forEach(tab => {\r\n    on(tab as HTMLElement, 'click', async () => {\r\n      const tabId = tab.getAttribute('data-tab') as TabId;\r\n      if (tabId === state.activeTab) return;\r\n\r\n      tabs.forEach(t => t.classList.remove('active'));\r\n      tab.classList.add('active');\r\n      state.activeTab = tabId;\r\n\r\n      await loadTabContent(tabId);\r\n    });\r\n  });\r\n}\r\n\r\n/**\r\n * Load tab content\r\n */\r\nasync function loadTabContent(tabId: TabId): Promise<void> {\r\n  if (!containerRef) return;\r\n\r\n  const contentEl = containerRef.querySelector('#krisp-content');\r\n  if (!contentEl) return;\r\n\r\n  contentEl.innerHTML = '<div class=\"krisp-loading\"><div class=\"loading-spinner\"></div></div>';\r\n  state.loading = true;\r\n\r\n  try {\r\n    switch (tabId) {\r\n      case 'transcripts':\r\n        await loadTranscripts(contentEl as HTMLElement);\r\n        break;\r\n      case 'quarantine':\r\n        await loadQuarantine(contentEl as HTMLElement);\r\n        break;\r\n      case 'mappings':\r\n        await loadMappings(contentEl as HTMLElement);\r\n        break;\r\n      case 'import':\r\n        await loadImport(contentEl as HTMLElement);\r\n        break;\r\n    }\r\n  } catch (error) {\r\n    console.error('[KrispManager] Error loading tab:', error);\r\n    contentEl.innerHTML = '<div class=\"krisp-empty\"><p>Failed to load. Please try again.</p></div>';\r\n  } finally {\r\n    state.loading = false;\r\n  }\r\n}\r\n\r\n/**\r\n * Load transcripts list\r\n */\r\nasync function loadTranscripts(container: HTMLElement): Promise<void> {\r\n  const transcripts = await krispService.getTranscripts({ limit: 50 });\r\n  state.transcripts = transcripts;\r\n\r\n  // Update badge\r\n  updateBadge('transcripts-count', transcripts.length);\r\n\r\n  if (transcripts.length === 0) {\r\n    container.innerHTML = `\r\n      <div class=\"krisp-empty\">\r\n        <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\"/>\r\n        </svg>\r\n        <p>No transcripts yet</p>\r\n        <p style=\"font-size: 12px; margin-top: 8px;\">Configure your Krisp webhook in Profile &gt; Integrations</p>\r\n      </div>\r\n    `;\r\n    return;\r\n  }\r\n\r\n  container.innerHTML = `<div class=\"krisp-list\">${transcripts.map(t => renderTranscriptItem(t)).join('')}</div>`;\r\n  bindTranscriptActions(container);\r\n}\r\n\r\n/**\r\n * Load quarantine list\r\n */\r\nasync function loadQuarantine(container: HTMLElement): Promise<void> {\r\n  const quarantine = await krispService.getQuarantinedTranscripts();\r\n  state.quarantine = quarantine;\r\n\r\n  // Update badge\r\n  updateBadge('quarantine-count', quarantine.length);\r\n\r\n  if (quarantine.length === 0) {\r\n    container.innerHTML = `\r\n      <div class=\"krisp-empty\">\r\n        <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"/>\r\n        </svg>\r\n        <p>No transcripts in quarantine</p>\r\n        <p style=\"font-size: 12px; margin-top: 8px;\">All speakers are identified correctly</p>\r\n      </div>\r\n    `;\r\n    return;\r\n  }\r\n\r\n  container.innerHTML = `<div class=\"krisp-list\">${quarantine.map(t => renderQuarantineItem(t)).join('')}</div>`;\r\n  bindQuarantineActions(container);\r\n}\r\n\r\n/**\r\n * Load mappings list\r\n */\r\nasync function loadMappings(container: HTMLElement): Promise<void> {\r\n  const mappings = await krispService.getMappings();\r\n  state.mappings = mappings;\r\n\r\n  // Update badge\r\n  updateBadge('mappings-count', mappings.length);\r\n\r\n  if (mappings.length === 0) {\r\n    container.innerHTML = `\r\n      <div class=\"krisp-empty\">\r\n        <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\"/>\r\n        </svg>\r\n        <p>No speaker mappings</p>\r\n        <p style=\"font-size: 12px; margin-top: 8px;\">Mappings are created when you manually link speakers to contacts</p>\r\n      </div>\r\n    `;\r\n    return;\r\n  }\r\n\r\n  container.innerHTML = `<div class=\"krisp-list\">${mappings.map(m => renderMappingItem(m)).join('')}</div>`;\r\n  bindMappingActions(container);\r\n}\r\n\r\n/**\r\n * Render transcript item\r\n */\r\nfunction renderTranscriptItem(transcript: KrispTranscript): string {\r\n  const { label, color } = krispService.formatStatus(transcript.status);\r\n  const duration = krispService.formatDuration(transcript.duration_minutes);\r\n  const date = transcript.meeting_date ? new Date(transcript.meeting_date).toLocaleDateString() : '-';\r\n  const speakers = transcript.speakers?.length || 0;\r\n\r\n  return `\r\n    <div class=\"krisp-item\" data-id=\"${transcript.id}\">\r\n      <div class=\"krisp-item-icon\">\r\n        <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\"/>\r\n        </svg>\r\n      </div>\r\n      <div class=\"krisp-item-content\">\r\n        <div class=\"krisp-item-title\">${escapeHtml(transcript.display_title || transcript.krisp_title || 'Untitled Meeting')}</div>\r\n        <div class=\"krisp-item-meta\">\r\n          <span>${date}</span>\r\n          <span>${duration}</span>\r\n          <span>${speakers} speakers</span>\r\n          ${transcript.projects?.name ? `<span>${escapeHtml(transcript.projects.name)}</span>` : ''}\r\n        </div>\r\n      </div>\r\n      <span class=\"krisp-item-status status-${transcript.status}\">${label}</span>\r\n    </div>\r\n  `;\r\n}\r\n\r\n/**\r\n * Render quarantine item with actions\r\n */\r\nfunction renderQuarantineItem(transcript: KrispTranscript): string {\r\n  const { label } = krispService.formatStatus(transcript.status);\r\n  const duration = krispService.formatDuration(transcript.duration_minutes);\r\n  const date = transcript.meeting_date ? new Date(transcript.meeting_date).toLocaleDateString() : '-';\r\n\r\n  return `\r\n    <div class=\"krisp-item\" data-id=\"${transcript.id}\">\r\n      <div class=\"krisp-item-icon\">\r\n        <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"/>\r\n        </svg>\r\n      </div>\r\n      <div class=\"krisp-item-content\">\r\n        <div class=\"krisp-item-title\">${escapeHtml(transcript.krisp_title || 'Untitled Meeting')}</div>\r\n        <div class=\"krisp-item-meta\">\r\n          <span>${date}</span>\r\n          <span>${duration}</span>\r\n          <span style=\"color: #f59e0b;\">${transcript.status_reason || label}</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"krisp-item-actions\">\r\n        <button class=\"retry-btn\" data-id=\"${transcript.id}\" title=\"Retry processing\">Retry</button>\r\n        <button class=\"assign-btn primary\" data-id=\"${transcript.id}\" title=\"Assign to project\">Assign</button>\r\n        <button class=\"skip-btn\" data-id=\"${transcript.id}\" title=\"Discard\">Skip</button>\r\n      </div>\r\n    </div>\r\n  `;\r\n}\r\n\r\n/**\r\n * Render mapping item\r\n */\r\nfunction renderMappingItem(mapping: KrispSpeakerMapping): string {\r\n  return `\r\n    <div class=\"mapping-item\" data-id=\"${mapping.id}\">\r\n      <div class=\"mapping-info\">\r\n        <span class=\"mapping-speaker\">${escapeHtml(mapping.speaker_name)}</span>\r\n        <span class=\"mapping-arrow\">â†’</span>\r\n        <span class=\"mapping-contact\">${escapeHtml(mapping.contacts?.name || 'Unknown')}</span>\r\n        ${mapping.is_global ? '<span class=\"mapping-badge\">Global</span>' : ''}\r\n      </div>\r\n      <button class=\"delete-mapping-btn\" data-id=\"${mapping.id}\" title=\"Remove mapping\">\r\n        <svg width=\"16\" height=\"16\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"/>\r\n        </svg>\r\n      </button>\r\n    </div>\r\n  `;\r\n}\r\n\r\n/**\r\n * Bind transcript click actions\r\n */\r\nfunction bindTranscriptActions(container: HTMLElement): void {\r\n  container.querySelectorAll('.krisp-item').forEach(item => {\r\n    on(item as HTMLElement, 'click', () => {\r\n      const id = item.getAttribute('data-id');\r\n      const transcript = state.transcripts.find(t => t.id === id);\r\n      if (transcript) {\r\n        showTranscriptDetail(transcript);\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\n/**\r\n * Bind quarantine action buttons\r\n */\r\nfunction bindQuarantineActions(container: HTMLElement): void {\r\n  // Retry buttons\r\n  container.querySelectorAll('.retry-btn').forEach(btn => {\r\n    on(btn as HTMLElement, 'click', async (e) => {\r\n      e.stopPropagation();\r\n      const id = btn.getAttribute('data-id');\r\n      if (!id) return;\r\n\r\n      btn.textContent = '...';\r\n      const success = await krispService.retryTranscript(id);\r\n      \r\n      if (success) {\r\n        toast.success('Retry queued');\r\n        await loadTabContent('quarantine');\r\n      } else {\r\n        toast.error('Retry failed');\r\n        btn.textContent = 'Retry';\r\n      }\r\n    });\r\n  });\r\n\r\n  // Assign buttons\r\n  container.querySelectorAll('.assign-btn').forEach(btn => {\r\n    on(btn as HTMLElement, 'click', async (e) => {\r\n      e.stopPropagation();\r\n      const id = btn.getAttribute('data-id');\r\n      const transcript = state.quarantine.find(t => t.id === id);\r\n      if (transcript) {\r\n        const { showProjectAssignmentModal } = await import('./ProjectAssignmentModal');\r\n        showProjectAssignmentModal({\r\n          transcript,\r\n          onAssign: async () => {\r\n            await loadTabContent('quarantine');\r\n          }\r\n        });\r\n      }\r\n    });\r\n  });\r\n\r\n  // Skip buttons\r\n  container.querySelectorAll('.skip-btn').forEach(btn => {\r\n    on(btn as HTMLElement, 'click', async (e) => {\r\n      e.stopPropagation();\r\n      const id = btn.getAttribute('data-id');\r\n      if (!id) return;\r\n\r\n      if (!confirm('Are you sure you want to skip this transcript?')) return;\r\n\r\n      const success = await krispService.skipTranscript(id, 'Manually skipped');\r\n      \r\n      if (success) {\r\n        toast.success('Transcript skipped');\r\n        await loadTabContent('quarantine');\r\n      } else {\r\n        toast.error('Failed to skip');\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\n/**\r\n * Bind mapping action buttons\r\n */\r\nfunction bindMappingActions(container: HTMLElement): void {\r\n  container.querySelectorAll('.delete-mapping-btn').forEach(btn => {\r\n    on(btn as HTMLElement, 'click', async (e) => {\r\n      e.stopPropagation();\r\n      const id = btn.getAttribute('data-id');\r\n      if (!id) return;\r\n\r\n      if (!confirm('Are you sure you want to delete this mapping?')) return;\r\n\r\n      const success = await krispService.deleteMapping(id);\r\n      \r\n      if (success) {\r\n        toast.success('Mapping deleted');\r\n        await loadTabContent('mappings');\r\n      } else {\r\n        toast.error('Failed to delete');\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\n/**\r\n * Show transcript detail (simple for now)\r\n */\r\nfunction showTranscriptDetail(transcript: KrispTranscript): void {\r\n  // For now, just show an alert with basic info\r\n  // In phase 3, this could be a full detail modal\r\n  const info = [\r\n    `Title: ${transcript.display_title || transcript.krisp_title}`,\r\n    `Status: ${transcript.status}`,\r\n    `Speakers: ${transcript.speakers?.join(', ') || 'None'}`,\r\n    `Project: ${transcript.projects?.name || 'Not assigned'}`,\r\n  ].join('\\n');\r\n\r\n  alert(info);\r\n}\r\n\r\n/**\r\n * Update badge count\r\n */\r\nfunction updateBadge(id: string, count: number): void {\r\n  if (!containerRef) return;\r\n  const badge = containerRef.querySelector(`#${id}`);\r\n  if (badge) {\r\n    badge.textContent = String(count);\r\n  }\r\n}\r\n\r\n// ==================== Import Tab ====================\r\n\r\n/**\r\n * Load import tab - fetches available meetings from the catalog\r\n */\r\nasync function loadImport(container: HTMLElement): Promise<void> {\r\n  // Fetch available meetings from the API\r\n  const result = await krispService.getAvailableMeetings({\r\n    limit: 100,\r\n    showImported: true,\r\n    startDate: state.importFilters.after || undefined,\r\n    endDate: state.importFilters.before || undefined,\r\n    search: state.importFilters.search || undefined\r\n  });\r\n\r\n  const stats = result?.stats || {\r\n    total_available: 0,\r\n    total_imported: 0,\r\n    total_pending: 0,\r\n    last_sync: null\r\n  };\r\n\r\n  const lastSync = stats.last_sync \r\n    ? new Date(stats.last_sync).toLocaleString()\r\n    : 'Never';\r\n\r\n  // Render the import UI\r\n  container.innerHTML = `\r\n    <div class=\"import-note\">\r\n      <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"/>\r\n      </svg>\r\n      <div>\r\n        <strong>Import from Krisp</strong><br>\r\n        Meetings synced from Krisp are shown below. To sync new meetings, ask Cursor: \r\n        <em>\"sincroniza as meetings do Krisp\"</em>\r\n      </div>\r\n    </div>\r\n    \r\n    <div class=\"import-stats\">\r\n      <div class=\"stat-item\">\r\n        <span class=\"stat-value\">${stats.total_available}</span>\r\n        <span class=\"stat-label\">Available</span>\r\n      </div>\r\n      <div class=\"stat-item\">\r\n        <span class=\"stat-value\">${stats.total_imported}</span>\r\n        <span class=\"stat-label\">Imported</span>\r\n      </div>\r\n      <div class=\"stat-item\">\r\n        <span class=\"stat-value\">${stats.total_pending}</span>\r\n        <span class=\"stat-label\">Pending</span>\r\n      </div>\r\n      <div class=\"stat-item\">\r\n        <span class=\"stat-value\" style=\"font-size: 12px;\">${lastSync}</span>\r\n        <span class=\"stat-label\">Last Sync</span>\r\n      </div>\r\n    </div>\r\n    \r\n    <div class=\"import-filters\">\r\n      <label>\r\n        From Date\r\n        <input type=\"date\" id=\"import-after\" value=\"${state.importFilters.after}\" />\r\n      </label>\r\n      <label>\r\n        To Date\r\n        <input type=\"date\" id=\"import-before\" value=\"${state.importFilters.before}\" />\r\n      </label>\r\n      <div class=\"search-row\">\r\n        <label style=\"flex: 1;\">\r\n          Search\r\n          <input type=\"text\" id=\"import-search\" placeholder=\"Search by title...\" value=\"${state.importFilters.search}\" />\r\n        </label>\r\n        <button class=\"search-btn\" id=\"import-filter-btn\">\r\n          Filter\r\n        </button>\r\n      </div>\r\n    </div>\r\n    \r\n    <div id=\"import-results\">\r\n      ${renderAvailableMeetingsList(result?.meetings || [])}\r\n    </div>\r\n  `;\r\n  \r\n  // Store meetings in state\r\n  if (result?.meetings) {\r\n    state.mcpMeetings = result.meetings.map(m => ({\r\n      meeting_id: m.krisp_meeting_id,\r\n      name: m.meeting_name,\r\n      date: m.meeting_date,\r\n      speakers: m.speakers,\r\n      attendees: m.attendees,\r\n      meeting_notes: {\r\n        key_points: m.key_points,\r\n        action_items: m.action_items\r\n      }\r\n    }));\r\n    state.importedIds = new Set(\r\n      result.meetings.filter(m => m.is_imported).map(m => m.krisp_meeting_id)\r\n    );\r\n  }\r\n  \r\n  bindImportFilters(container);\r\n}\r\n\r\n/**\r\n * Render available meetings list\r\n */\r\nfunction renderAvailableMeetingsList(meetings: krispService.AvailableMeeting[]): string {\r\n  if (meetings.length === 0) {\r\n    return `\r\n      <div class=\"krisp-empty\">\r\n        <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\"/>\r\n        </svg>\r\n        <p>No meetings synced yet</p>\r\n        <p style=\"font-size: 12px; margin-top: 8px;\">\r\n          Ask Cursor to sync: <em>\"sincroniza as meetings do Krisp de [data] a [data]\"</em>\r\n        </p>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  const notImportedCount = meetings.filter(m => !m.is_imported).length;\r\n  \r\n  return `\r\n    <div class=\"import-header\">\r\n      <label>\r\n        <input type=\"checkbox\" id=\"select-all\" />\r\n        Select All (${notImportedCount} available)\r\n      </label>\r\n      <span class=\"count\">Showing ${meetings.length} meetings</span>\r\n    </div>\r\n    \r\n    <div class=\"krisp-list\">\r\n      ${meetings.map(m => renderAvailableMeetingItem(m)).join('')}\r\n    </div>\r\n    \r\n    <div class=\"import-footer\">\r\n      <span class=\"selected-count\" id=\"selected-count\">0 selected</span>\r\n      <button class=\"import-btn\" id=\"import-selected-btn\" disabled>\r\n        <svg width=\"16\" height=\"16\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\"/>\r\n        </svg>\r\n        Import Selected\r\n      </button>\r\n    </div>\r\n  `;\r\n}\r\n\r\n/**\r\n * Render single available meeting item\r\n */\r\nfunction renderAvailableMeetingItem(meeting: krispService.AvailableMeeting): string {\r\n  const isImported = meeting.is_imported;\r\n  const isSelected = state.selectedMeetings.has(meeting.krisp_meeting_id);\r\n  const speakers = meeting.speakers?.join(', ') || meeting.attendees?.join(', ') || 'No participants';\r\n  const date = meeting.meeting_date ? new Date(meeting.meeting_date).toLocaleDateString('en-US', { \r\n    month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit'\r\n  }) : '';\r\n  \r\n  return `\r\n    <div class=\"import-meeting ${isSelected ? 'selected' : ''} ${isImported ? 'imported' : ''}\" data-id=\"${meeting.krisp_meeting_id}\">\r\n      <input type=\"checkbox\" ${isSelected ? 'checked' : ''} ${isImported ? 'disabled' : ''} />\r\n      <div class=\"import-meeting-content\">\r\n        <div class=\"import-meeting-title\">\r\n          ${escapeHtml(meeting.meeting_name || 'Untitled Meeting')}\r\n          ${isImported ? '<span class=\"imported-badge\">Imported</span>' : ''}\r\n        </div>\r\n        <div class=\"import-meeting-meta\">\r\n          ${date} Â· ${escapeHtml(speakers.substring(0, 100))}${speakers.length > 100 ? '...' : ''}\r\n        </div>\r\n        ${meeting.summary ? `<div class=\"import-meeting-summary\">${escapeHtml(meeting.summary.substring(0, 150))}${meeting.summary.length > 150 ? '...' : ''}</div>` : ''}\r\n      </div>\r\n    </div>\r\n  `;\r\n}\r\n\r\n/**\r\n * Bind import filter events\r\n */\r\nfunction bindImportFilters(container: HTMLElement): void {\r\n  const filterBtn = container.querySelector('#import-filter-btn');\r\n  \r\n  if (filterBtn) {\r\n    on(filterBtn as HTMLElement, 'click', async () => {\r\n      // Save filter values to state\r\n      const afterInput = container.querySelector('#import-after') as HTMLInputElement;\r\n      const beforeInput = container.querySelector('#import-before') as HTMLInputElement;\r\n      const searchInput = container.querySelector('#import-search') as HTMLInputElement;\r\n      \r\n      state.importFilters = {\r\n        after: afterInput?.value || '',\r\n        before: beforeInput?.value || '',\r\n        domain: '',\r\n        search: searchInput?.value || ''\r\n      };\r\n      \r\n      // Reload the import tab with new filters\r\n      await loadImport(container);\r\n    });\r\n  }\r\n  \r\n  // Enter key triggers filter\r\n  const searchInput = container.querySelector('#import-search');\r\n  if (searchInput) {\r\n    on(searchInput as HTMLElement, 'keydown', (e: KeyboardEvent) => {\r\n      if (e.key === 'Enter') {\r\n        filterBtn?.dispatchEvent(new Event('click'));\r\n      }\r\n    });\r\n  }\r\n  \r\n  // Bind meeting list actions\r\n  bindAvailableMeetingListActions(container);\r\n}\r\n\r\n/**\r\n * Bind available meeting list actions\r\n */\r\nfunction bindAvailableMeetingListActions(container: HTMLElement): void {\r\n  // Select all checkbox\r\n  const selectAll = container.querySelector('#select-all');\r\n  if (selectAll) {\r\n    on(selectAll as HTMLElement, 'change', () => {\r\n      const checked = (selectAll as HTMLInputElement).checked;\r\n      \r\n      if (checked) {\r\n        // Select all not-imported meetings\r\n        state.mcpMeetings.forEach(m => {\r\n          if (!state.importedIds.has(m.meeting_id)) {\r\n            state.selectedMeetings.add(m.meeting_id);\r\n          }\r\n        });\r\n      } else {\r\n        state.selectedMeetings.clear();\r\n      }\r\n      \r\n      updateImportSelectionUI(container);\r\n    });\r\n  }\r\n  \r\n  // Individual meeting checkboxes\r\n  container.querySelectorAll('.import-meeting').forEach(item => {\r\n    on(item as HTMLElement, 'click', (e) => {\r\n      const target = e.target as HTMLElement;\r\n      if (target.tagName === 'INPUT') return; // Let checkbox handle itself\r\n      \r\n      const id = item.getAttribute('data-id');\r\n      if (!id || state.importedIds.has(id)) return;\r\n      \r\n      // Toggle selection\r\n      if (state.selectedMeetings.has(id)) {\r\n        state.selectedMeetings.delete(id);\r\n      } else {\r\n        state.selectedMeetings.add(id);\r\n      }\r\n      \r\n      updateImportSelectionUI(container);\r\n    });\r\n    \r\n    // Also handle checkbox change directly\r\n    const checkbox = item.querySelector('input[type=\"checkbox\"]');\r\n    if (checkbox) {\r\n      on(checkbox as HTMLElement, 'change', () => {\r\n        const id = item.getAttribute('data-id');\r\n        if (!id || state.importedIds.has(id)) return;\r\n        \r\n        if ((checkbox as HTMLInputElement).checked) {\r\n          state.selectedMeetings.add(id);\r\n        } else {\r\n          state.selectedMeetings.delete(id);\r\n        }\r\n        \r\n        updateImportSelectionUI(container);\r\n      });\r\n    }\r\n  });\r\n  \r\n  // Import button\r\n  const importBtn = container.querySelector('#import-selected-btn');\r\n  if (importBtn) {\r\n    on(importBtn as HTMLElement, 'click', async () => {\r\n      if (state.selectedMeetings.size === 0) return;\r\n      \r\n      importBtn.setAttribute('disabled', 'true');\r\n      importBtn.innerHTML = '<span class=\"loading-spinner\" style=\"width: 16px; height: 16px;\"></span> Importing...';\r\n      \r\n      // Get selected meeting IDs (krisp_meeting_id)\r\n      const selectedIds = Array.from(state.selectedMeetings);\r\n      \r\n      // Import via new API\r\n      const result = await krispService.importAvailableMeetings(selectedIds);\r\n      \r\n      if (result) {\r\n        if (result.imported > 0) {\r\n          toast.success(`Imported ${result.imported} meeting${result.imported !== 1 ? 's' : ''}`);\r\n        }\r\n        if (result.errors.length > 0) {\r\n          toast.warning(`${result.errors.length} failed to import`);\r\n        }\r\n        \r\n        // Reload to show updated state\r\n        state.selectedMeetings.clear();\r\n        await loadImport(container);\r\n      } else {\r\n        toast.error('Import failed');\r\n        importBtn.removeAttribute('disabled');\r\n        importBtn.innerHTML = `Import Selected`;\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Update import selection UI\r\n */\r\nfunction updateImportSelectionUI(container: HTMLElement): void {\r\n  const selectedCount = state.selectedMeetings.size;\r\n  \r\n  // Update selected count\r\n  const countEl = container.querySelector('#selected-count');\r\n  if (countEl) {\r\n    countEl.textContent = `${selectedCount} selected`;\r\n  }\r\n  \r\n  // Update import button\r\n  const importBtn = container.querySelector('#import-selected-btn');\r\n  if (importBtn) {\r\n    if (selectedCount > 0) {\r\n      importBtn.removeAttribute('disabled');\r\n      importBtn.innerHTML = `\r\n        <svg width=\"16\" height=\"16\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\"/>\r\n        </svg>\r\n        Import ${selectedCount} Meeting${selectedCount !== 1 ? 's' : ''}\r\n      `;\r\n    } else {\r\n      importBtn.setAttribute('disabled', 'true');\r\n      importBtn.innerHTML = `\r\n        <svg width=\"16\" height=\"16\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\"/>\r\n        </svg>\r\n        Import Selected\r\n      `;\r\n    }\r\n  }\r\n  \r\n  // Update checkboxes visual state\r\n  container.querySelectorAll('.import-meeting').forEach(item => {\r\n    const id = item.getAttribute('data-id');\r\n    const checkbox = item.querySelector('input[type=\"checkbox\"]') as HTMLInputElement;\r\n    \r\n    if (id && checkbox && !state.importedIds.has(id)) {\r\n      const isSelected = state.selectedMeetings.has(id);\r\n      checkbox.checked = isSelected;\r\n      item.classList.toggle('selected', isSelected);\r\n    }\r\n  });\r\n}\r\n\r\n\r\n/**\r\n * Escape HTML\r\n */\r\nfunction escapeHtml(text: string): string {\r\n  const div = document.createElement('div');\r\n  div.textContent = text;\r\n  return div.innerHTML;\r\n}\r\n\r\n/**\r\n * Close the modal\r\n */\r\nexport function closeKrispManager(): void {\r\n  closeModal(MODAL_ID);\r\n}\r\n"],"file":"KrispManager-B_7JqOME.js"}