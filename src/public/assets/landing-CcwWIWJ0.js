import"./modulepreload-polyfill-B5Qt9EMX.js";async function h(e){const t=(e.headers.get("Content-Type")||"").toLowerCase().includes("application/json"),n=await e.text();if(t&&n)try{return{data:JSON.parse(n),isJson:!0}}catch{return{data:null,isJson:!1}}return{data:n||null,isJson:!1}}async function m(e,o){const t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(o)}),{data:n,isJson:r}=await h(t);if(!t.ok){const i=r&&n&&typeof n=="object"&&"error"in n?String(n.error):r&&n&&typeof n=="object"&&"message"in n?String(n.message):typeof n=="string"&&n.length>0?n:t.statusText||"Pedido falhou";throw new Error(i||"Pedido falhou")}if(!r||n==null)throw new Error("Resposta invÃ¡lida do servidor. Tente novamente.");return n}async function E(e){const o=await fetch(e,{method:"GET",credentials:"include"}),{data:t,isJson:n}=await h(o);if(!o.ok){const r=n&&t&&typeof t=="object"&&"error"in t?String(t.error):n&&t&&typeof t=="object"&&"message"in t?String(t.message):typeof t=="string"&&t.length>0?t:o.statusText||"Pedido falhou";throw new Error(r||"Pedido falhou")}if(!n||t==null)throw new Error("Resposta invÃ¡lida do servidor. Tente novamente.");return t}async function v(){try{return(await E("/api/auth/me")).authenticated===!0}catch{return!1}}async function b(e,o){return m("/api/auth/login",{email:e,password:o})}async function w(e,o){return m("/api/auth/register",{email:e,password:o})}async function L(e){await m("/api/auth/forgot-password",{email:e})}function c(e,o){const t=document.getElementById(e);t&&(t.textContent=o,t.classList.add("visible"))}function l(e){const o=document.getElementById(e);o&&(o.textContent="",o.classList.remove("visible"))}function f(e,o){const t=document.getElementById(e);t&&(t.textContent=o,t.classList.add("visible"))}function u(e,o){const t=e.querySelector(".btn-text"),n=e.querySelector(".btn-loading");t&&n&&(t.classList.toggle("hidden",o),n.classList.toggle("hidden",!o)),e.disabled=o}function p(e){const o=document.getElementById(e);if(o){const r=o.getBoundingClientRect().top+window.pageYOffset-64-20;window.scrollTo({top:r,behavior:"smooth"})}}function I(){const e=document.querySelectorAll(".landing-auth-tab"),o=document.getElementById("login-form"),t=document.getElementById("register-form"),n=document.getElementById("forgot-form");e.forEach(r=>{r.addEventListener("click",()=>{const i=r.getAttribute("data-tab");e.forEach(a=>a.classList.remove("active")),r.classList.add("active"),o&&o.classList.toggle("hidden",i!=="login"),t&&t.classList.toggle("hidden",i!=="register"),n&&n.classList.add("hidden"),l("login-error"),l("register-error"),l("forgot-error")})})}function B(){const e=document.getElementById("login-form");e&&e.addEventListener("submit",async o=>{o.preventDefault(),l("login-error");const t=document.getElementById("login-email"),n=document.getElementById("login-password"),r=e.querySelector('button[type="submit"]'),i=t.value.trim(),a=n.value;if(!i||!a){c("login-error","Preencha todos os campos");return}u(r,!0);try{const s=await b(i,a);s.success?window.location.href="/app":c("login-error",s.error||"Erro ao entrar. Verifique as credenciais.")}catch(s){c("login-error",s instanceof Error?s.message:"Erro ao entrar. Tente novamente.")}finally{u(r,!1)}})}function S(){const e=document.getElementById("register-form");e&&e.addEventListener("submit",async o=>{o.preventDefault(),l("register-error");const t=document.getElementById("register-email"),n=document.getElementById("register-password"),r=document.getElementById("register-confirm"),i=e.querySelector('button[type="submit"]'),a=t.value.trim(),s=n.value,g=r.value;if(!a||!s||!g){c("register-error","Preencha todos os campos");return}if(s.length<12){c("register-error","A password deve ter pelo menos 12 caracteres");return}if(s!==g){c("register-error","As passwords nÃ£o coincidem");return}u(i,!0);try{const d=await w(a,s);d.success?d.needsEmailVerification?(c("register-error",""),alert("Conta criada! Verifique o seu email para confirmar o registo."),document.querySelector('.landing-auth-tab[data-tab="login"]')?.click()):window.location.href="/app":c("register-error",d.error||"Erro ao criar conta. Tente novamente.")}catch(d){c("register-error",d instanceof Error?d.message:"Erro ao criar conta. Tente novamente.")}finally{u(i,!1)}})}function T(){const e=document.getElementById("forgot-form"),o=document.getElementById("forgot-password-link"),t=document.getElementById("back-to-login-link"),n=document.getElementById("login-form"),r=document.querySelectorAll(".landing-auth-tab");o?.addEventListener("click",()=>{n&&n.classList.add("hidden"),e&&e.classList.remove("hidden"),r.forEach(i=>i.classList.remove("active")),l("login-error")}),t?.addEventListener("click",()=>{e&&e.classList.add("hidden"),n&&n.classList.remove("hidden"),document.querySelector('.landing-auth-tab[data-tab="login"]')?.classList.add("active"),l("forgot-error")}),e?.addEventListener("submit",async i=>{i.preventDefault(),l("forgot-error");const a=document.getElementById("forgot-email"),s=e.querySelector('button[type="submit"]'),g=a.value.trim();if(!g){c("forgot-error","Introduza o seu email");return}u(s,!0);try{await L(g),f("forgot-success","Se o email existir, receberÃ¡ um link de recuperaÃ§Ã£o."),a.value=""}catch{f("forgot-success","Se o email existir, receberÃ¡ um link de recuperaÃ§Ã£o.")}finally{u(s,!1)}})}function k(){document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",n=>{n.preventDefault();const r=t.getAttribute("href")?.slice(1);r&&(p(r),document.getElementById("mobile-nav")?.classList.remove("open"))})}),document.querySelectorAll("[data-scroll-to]").forEach(t=>{t.addEventListener("click",()=>{const n=t.getAttribute("data-scroll-to");n&&(p(n),document.getElementById("mobile-nav")?.classList.remove("open"))})});const e=document.getElementById("menu-toggle"),o=document.getElementById("mobile-nav");e?.addEventListener("click",()=>{o?.classList.toggle("open")}),document.addEventListener("click",t=>{if(o?.classList.contains("open")){const n=t.target;!o.contains(n)&&!e?.contains(n)&&o.classList.remove("open")}})}function A(){document.querySelectorAll(".landing-faq-question").forEach(e=>{e.addEventListener("click",()=>{const o=e.getAttribute("aria-expanded")==="true",t=e.nextElementSibling;e.setAttribute("aria-expanded",String(!o)),t?.classList.toggle("open",!o)})})}function x(){const e=document.getElementById("landing-header");e&&window.addEventListener("scroll",()=>{const o=window.scrollY;e.classList.toggle("landing-header-scrolled",o>50)})}async function y(){if(console.log("ðŸš€ GodMode Landing initializing..."),await v()){console.log("âœ… User authenticated, redirecting to app..."),window.location.href="/app";return}I(),B(),S(),T(),k(),A(),x(),console.log("âœ… GodMode Landing ready")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",y):y();
//# sourceMappingURL=landing-CcwWIWJ0.js.map
