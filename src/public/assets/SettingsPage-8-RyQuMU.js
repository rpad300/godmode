import{c as _,r as c,j as e,cJ as B,ag as O,ae as $,a as o,d6 as J,N as v,S as Y,d7 as H,ab as Z,d8 as V,d9 as Q,da as X,db as ee,dc as ae,dd as K,ad as E,O as u,de as se,df as te,dg as re,dh as le,di as ie,dj as ne,dk as ce,dl as oe,Z as de,dm as me,dn as xe,dp as he,dq as pe,dr as ue,J as ge,b2 as ve}from"./main-DPJZnN-g.js";import{C as W}from"./cpu-BXdDwRd1.js";import{K as z}from"./key-DrUrK2UH.js";import{D as q}from"./database-WjgGBTAO.js";import{G as je}from"./globe-pZEYczaD.js";import{S as T}from"./save-BmzQhvxt.js";import{M as ye,L as be}from"./monitor-Cx1uvUXV.js";import{C as Ne}from"./chart-column-siH3WiuI.js";import{E as fe}from"./eye-Bsxv-RpG.js";import{P as U}from"./plus-D_qMNj9L.js";import{C as we}from"./copy-CMcxudtS.js";import{C as ke}from"./circle-check-big-B1jdWUHQ.js";import{T as F}from"./test-tube-3V1h975P.js";const Ce=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Se=_("bot",Ce);const Pe=[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]],G=_("webhook",Pe),g="rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-[var(--shadow-sm)] transition-all duration-200",N="w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-placeholder)] focus:outline-none focus:border-[var(--gm-border-focus)] focus:shadow-[var(--shadow-focus)] transition-all duration-150",S="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] hover:bg-[var(--gm-interactive-primary-hover)] shadow-sm transition-all duration-150 disabled:opacity-50",f="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] hover:bg-[var(--gm-interactive-secondary-hover)] border border-[var(--gm-border-primary)] transition-all duration-150",M="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--color-danger-500)] text-white hover:bg-[var(--color-danger-600)] shadow-sm transition-all duration-150 disabled:opacity-50",b="text-[10px] font-bold text-[var(--gm-accent-primary)] uppercase tracking-[0.1em]",y="text-[10px] font-bold text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-1 flex items-center gap-1.5";function A({title:a,subtitle:i}){return e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-[var(--gm-text-primary)]",children:a}),i&&e.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)] mt-0.5",children:i})]})}const De=[{id:"profile",label:"Profile",icon:O},{id:"project",label:"Project",icon:W},{id:"apikeys",label:"API Keys",icon:z},{id:"webhooks",label:"Webhooks",icon:G},{id:"data",label:"Data",icon:q}];function Le(){try{return localStorage.getItem("godmode-theme")||"system"}catch{return"system"}}function R(){try{return localStorage.getItem("godmode_current_project")||"default"}catch{return"default"}}function Ze(){const[a,i]=c.useState("profile");return e.jsxs("div",{className:"flex h-full",children:[e.jsxs("div",{className:"w-48 shrink-0 border-r border-[var(--gm-border-primary)] bg-[var(--gm-bg-primary)] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center gap-2.5 px-4 py-4 border-b border-[var(--gm-border-primary)]",children:[e.jsx("div",{className:"w-7 h-7 rounded-full bg-[var(--gm-interactive-primary)]/10 flex items-center justify-center",children:e.jsx(B,{className:"w-3.5 h-3.5 text-[var(--gm-accent-primary)]"})}),e.jsx("span",{className:"text-sm font-bold text-[var(--gm-accent-primary)]",children:"Settings"})]}),e.jsx("nav",{className:"py-2",children:De.map(t=>{const x=t.icon,h=a===t.id;return e.jsxs("button",{onClick:()=>i(t.id),className:o("w-full flex items-center gap-2.5 px-4 py-2 text-xs transition-colors",h?"text-[var(--gm-accent-primary)] bg-[var(--gm-surface-hover)] font-semibold":"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] hover:bg-[var(--gm-surface-hover)]"),children:[e.jsx(x,{className:"w-3.5 h-3.5 shrink-0"}),e.jsx("span",{className:"flex-1 text-left",children:t.label}),h&&e.jsx($,{className:"w-3 h-3 shrink-0"})]},t.id)})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[a==="profile"&&e.jsx(Ae,{}),a==="project"&&e.jsx(Ee,{}),a==="apikeys"&&e.jsx(Me,{projectId:R()}),a==="webhooks"&&e.jsx(Re,{projectId:R()}),a==="data"&&e.jsx(_e,{})]})]})}function Ae(){const{user:a,updateProfile:i}=J(),[t,x]=c.useState(Le),[h,d]=c.useState(""),[n,r]=c.useState(""),[p,m]=c.useState("en"),[j,w]=c.useState(!0),[C,P]=c.useState(!0),[D,s]=c.useState(!1);c.useEffect(()=>{a&&(d(a.display_name||""),r(a.timezone||""),m(a.language||"en"))},[a]),c.useEffect(()=>{try{const l=localStorage.getItem("godmode-privacy");if(l){const L=JSON.parse(l);w(L.analytics!==!1),P(L.errorReporting!==!1),s(L.aiDataImprovement===!0)}}catch{}},[]),c.useEffect(()=>{const l=t==="dark"||t==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.classList.toggle("dark",l),localStorage.setItem("godmode-theme",t)},[t]);const k=()=>{i.mutate({display_name:h,timezone:n,theme:t,language:p},{onSuccess:()=>u.success("Profile updated")})},I=()=>{localStorage.setItem("godmode-privacy",JSON.stringify({analytics:j,errorReporting:C,aiDataImprovement:D})),u.success("Privacy preferences saved")};return e.jsxs("div",{className:"space-y-5",children:[e.jsx(A,{title:"Profile",subtitle:"Manage your account info, appearance, and privacy"}),e.jsxs("div",{className:o(g,"p-5 space-y-5"),children:[e.jsx("h3",{className:b,children:"User Profile"}),e.jsxs("div",{children:[e.jsxs("label",{className:y,children:[e.jsx(O,{className:"w-3 h-3"})," Email"]}),e.jsx("input",{value:a?.email||"",readOnly:!0,className:o(N,"opacity-60 cursor-not-allowed")})]}),e.jsxs("div",{children:[e.jsx("label",{className:y,children:"Display Name"}),e.jsx("input",{value:h,onChange:l=>d(l.target.value),placeholder:"Your name...",className:N})]}),e.jsxs("div",{children:[e.jsxs("label",{className:y,children:[e.jsx(je,{className:"w-3 h-3"})," Timezone"]}),e.jsx("input",{value:n,onChange:l=>r(l.target.value),placeholder:"e.g. Europe/Lisbon",className:N})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{onClick:k,disabled:i.isPending,className:S,children:[i.isPending?e.jsx(v,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(T,{className:"w-3.5 h-3.5"}),"Save Profile"]})})]}),e.jsxs("div",{className:o(g,"p-5 space-y-4"),children:[e.jsx("h3",{className:b,children:"Appearance"}),e.jsx("div",{className:"flex gap-2",children:[{value:"light",label:"Light",icon:Y},{value:"dark",label:"Dark",icon:H},{value:"system",label:"System",icon:ye}].map(l=>{const L=l.icon;return e.jsxs("button",{onClick:()=>x(l.value),className:o("flex items-center gap-2 px-4 py-2 rounded-lg border text-xs transition-all duration-150",t===l.value?"bg-[var(--gm-interactive-primary)]/10 border-[var(--gm-accent-primary)]/30 text-[var(--gm-text-primary)] font-medium":"border-[var(--gm-border-primary)] hover:bg-[var(--gm-surface-hover)] text-[var(--gm-text-tertiary)]"),children:[e.jsx(L,{className:"h-3.5 w-3.5"})," ",l.label]},l.value)})})]}),e.jsxs("div",{className:o(g,"p-5 space-y-4"),children:[e.jsxs("h3",{className:b,children:[e.jsx(be,{className:"w-3 h-3 inline mr-1"})," Language"]}),e.jsx("div",{className:"flex gap-2",children:[{value:"en",label:"English"},{value:"pt",label:"Português"},{value:"es",label:"Español"}].map(l=>e.jsx("button",{onClick:()=>m(l.value),className:o("px-4 py-2 rounded-lg border text-xs transition-all duration-150",p===l.value?"bg-[var(--gm-interactive-primary)]/10 border-[var(--gm-accent-primary)]/30 text-[var(--gm-text-primary)] font-medium":"border-[var(--gm-border-primary)] hover:bg-[var(--gm-surface-hover)] text-[var(--gm-text-tertiary)]"),children:l.label},l.value))})]}),e.jsxs("div",{className:o(g,"p-5 space-y-4"),children:[e.jsxs("h3",{className:b,children:[e.jsx(Z,{className:"w-3 h-3 inline mr-1"})," Data & Privacy"]}),[{key:"analytics",label:"Analytics",desc:"Help us improve by sharing anonymized usage data",icon:Ne,state:j,setter:w},{key:"errorReporting",label:"Error Reporting",desc:"Automatically report crashes and errors",icon:fe,state:C,setter:P},{key:"aiData",label:"AI Data Improvement",desc:"Allow anonymized data to improve AI model quality",icon:Se,state:D,setter:s}].map(l=>e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l.icon,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-[var(--gm-text-primary)]",children:l.label}),e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:l.desc})]})]}),e.jsx("button",{onClick:()=>l.setter(!l.state),className:o("relative w-9 h-5 rounded-full transition-colors",l.state?"bg-[var(--gm-interactive-primary)]":"bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)]"),role:"switch","aria-checked":l.state,children:e.jsx("span",{className:o("absolute top-0.5 w-4 h-4 rounded-full bg-white shadow transition-transform",l.state?"translate-x-[18px]":"translate-x-0.5")})})]},l.key)),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{onClick:I,className:f,children:[e.jsx(T,{className:"w-3.5 h-3.5"})," Save Privacy"]})})]})]})}function Ee(){const a=V(),i=Q(),[t,x]=c.useState(""),[h,d]=c.useState("");c.useEffect(()=>{a.data&&(x(a.data.projectName||""),d(a.data.llm?.provider||""))},[a.data]);const n=()=>{i.mutate({projectName:t,llm:{...a.data?.llm,provider:h}},{onSuccess:()=>u.success("Project settings saved")})};return e.jsxs("div",{className:"space-y-5",children:[e.jsx(A,{title:"Project",subtitle:"LLM configuration, diagnostics, and local model management"}),e.jsxs("div",{className:o(g,"p-5 space-y-5"),children:[e.jsx("h3",{className:b,children:"Project Configuration"}),a.isLoading?e.jsxs("div",{className:"flex items-center gap-2 py-4 text-[var(--gm-text-tertiary)] text-sm",children:[e.jsx(v,{className:"w-4 h-4 animate-spin"})," Loading config..."]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:y,children:"Project Name"}),e.jsx("input",{value:t,onChange:r=>x(r.target.value),className:N,placeholder:"My Project"})]}),e.jsxs("div",{children:[e.jsx("label",{className:y,children:"LLM Provider"}),e.jsxs("select",{value:h,onChange:r=>d(r.target.value),className:N,children:[e.jsx("option",{value:"",children:"Select provider"}),e.jsx("option",{value:"openai",children:"OpenAI"}),e.jsx("option",{value:"anthropic",children:"Anthropic"}),e.jsx("option",{value:"google",children:"Google"}),e.jsx("option",{value:"ollama",children:"Ollama (local)"}),e.jsx("option",{value:"groq",children:"Groq"}),e.jsx("option",{value:"deepseek",children:"DeepSeek"})]})]}),a.data?.llm?.models&&e.jsxs("div",{children:[e.jsx("label",{className:y,children:"Configured Models"}),e.jsx("div",{className:"space-y-1",children:Object.entries(a.data.llm.models).map(([r,p])=>e.jsxs("div",{className:"flex items-center justify-between text-xs bg-[var(--gm-bg-tertiary)] rounded-lg px-3 py-1.5",children:[e.jsx("span",{className:"text-[var(--gm-text-tertiary)] capitalize",children:r.replace(/_/g," ")}),e.jsx("span",{className:"text-[var(--gm-text-primary)] font-medium",children:p})]},r))})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{onClick:n,disabled:i.isPending,className:S,children:[i.isPending?e.jsx(v,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(T,{className:"w-3.5 h-3.5"}),"Save Project"]})})]})]}),e.jsx(Ie,{}),e.jsx(Te,{})]})}function Ie(){const a=ne(),i=ce(),t=oe(),[x,h]=c.useState(""),d=a.data||{},n=i.data||{};return e.jsxs("div",{className:o(g,"p-5 space-y-4"),children:[e.jsxs("h3",{className:b,children:[e.jsx(de,{className:"w-3 h-3 inline mr-1"})," LLM Diagnostics"]}),e.jsxs("div",{children:[e.jsx("label",{className:y,children:"Capabilities"}),a.isLoading?e.jsx(v,{className:"w-4 h-4 animate-spin text-[var(--gm-accent-primary)]"}):Object.keys(d).length>0?e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(d).filter(([,r])=>r!=null).slice(0,12).map(([r,p])=>e.jsxs("div",{className:"flex items-center justify-between text-xs bg-[var(--gm-bg-tertiary)] rounded-lg px-3 py-1.5",children:[e.jsx("span",{className:"text-[var(--gm-text-tertiary)] capitalize",children:r.replace(/_/g," ")}),e.jsx("span",{className:"text-[var(--gm-text-primary)] font-medium",children:typeof p=="boolean"?p?e.jsx(ke,{className:"w-3 h-3 text-green-500 inline"}):"—":String(p)})]},r))}):e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:"No capabilities data"})]}),e.jsxs("div",{children:[e.jsx("label",{className:y,children:"Routing Status"}),i.isLoading?e.jsx(v,{className:"w-4 h-4 animate-spin text-[var(--gm-accent-primary)]"}):Object.keys(n).length>0?e.jsx("div",{className:"space-y-1",children:Object.entries(n).filter(([,r])=>r!=null).slice(0,8).map(([r,p])=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-[var(--gm-text-tertiary)] capitalize",children:r.replace(/_/g," ")}),e.jsx("span",{className:"text-[var(--gm-text-primary)] font-medium",children:String(p)})]},r))}):e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:"No routing data"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:x,onChange:r=>h(r.target.value),className:o(N,"w-auto"),children:[e.jsx("option",{value:"",children:"Select provider to test"}),e.jsx("option",{value:"openai",children:"OpenAI"}),e.jsx("option",{value:"anthropic",children:"Anthropic"}),e.jsx("option",{value:"google",children:"Google"}),e.jsx("option",{value:"ollama",children:"Ollama"}),e.jsx("option",{value:"groq",children:"Groq"}),e.jsx("option",{value:"deepseek",children:"DeepSeek"})]}),e.jsxs("button",{onClick:()=>t.mutate(x,{onSuccess:()=>u.success(`${x} connection OK`),onError:()=>u.error(`${x} test failed`)}),disabled:t.isPending||!x,className:f,children:[t.isPending?e.jsx(v,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(F,{className:"w-3.5 h-3.5"})," Test Provider"]})]})]})}function Te(){const a=me(),i=xe(),t=he(),x=pe(),h=ue(),[d,n]=c.useState(""),r=i.data?.models||[],p=t.data?.models||[];return e.jsxs("div",{className:o(g,"p-5 space-y-4"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:b,children:[e.jsx(W,{className:"w-3 h-3 inline mr-1"})," Ollama Local Models"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>a.refetch(),disabled:a.isFetching,className:f,children:[a.isFetching?e.jsx(v,{className:"w-3 h-3 animate-spin"}):e.jsx(F,{className:"w-3 h-3"})," Test"]}),e.jsxs("button",{onClick:()=>i.refetch(),disabled:i.isFetching,className:f,children:[i.isFetching?e.jsx(v,{className:"w-3 h-3 animate-spin"}):e.jsx(ge,{className:"w-3 h-3"})," Refresh"]})]})]}),r.length>0?e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:y,children:["Installed (",r.length,")"]}),r.map((m,j)=>e.jsxs("div",{className:"flex items-center justify-between bg-[var(--gm-bg-tertiary)] rounded-lg px-3 py-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-primary)]",children:String(m.name||m.model||"")}),m.size&&e.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] ml-2",children:String(m.size)})]}),e.jsx("button",{onClick:()=>h.mutate({model:String(m.name||m.model)},{onSuccess:()=>u.success("Model unloaded")}),disabled:h.isPending,className:"px-2 py-1 rounded text-[10px] text-[var(--gm-text-tertiary)] hover:bg-[var(--color-danger-500)]/10 hover:text-[var(--color-danger-500)] transition-colors",children:"Unload"})]},j))]}):e.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:"No models loaded. Click Refresh to check or pull a model below."}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{value:d,onChange:m=>n(m.target.value),placeholder:"Model name (e.g. llama3.2)",className:N}),e.jsxs("button",{onClick:()=>x.mutate({model:d},{onSuccess:()=>{u.success(`Pulling ${d}...`),n("")}}),disabled:x.isPending||!d.trim(),className:S,children:[x.isPending?e.jsx(v,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(ve,{className:"w-3.5 h-3.5"})," Pull"]})]}),e.jsx("button",{onClick:()=>t.refetch(),className:"text-xs text-[var(--gm-accent-primary)] underline",children:"Load recommended models"}),p.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1.5",children:p.map((m,j)=>e.jsx("button",{onClick:()=>n(String(m.name||m.model||"")),className:"text-[10px] px-2 py-0.5 rounded-full bg-[var(--gm-interactive-primary)]/10 text-[var(--gm-accent-primary)] font-medium hover:bg-[var(--gm-interactive-primary)]/20 transition-colors",children:String(m.name||m.model||"")},j))})]})}function Me({projectId:a}){const i=X(a),t=ee(),x=ae(),[h,d]=c.useState(!1),[n,r]=c.useState(""),[p,m]=c.useState("90"),[j,w]=c.useState(null),C=i.data?.keys??[],P=()=>{n.trim()&&t.mutate({projectId:a,name:n.trim(),expires_in_days:Number(p)||void 0},{onSuccess:s=>{w(s.raw_key||null),r(""),d(!1),u.success("API key created")},onError:()=>u.error("Failed to create API key")})},D=s=>{navigator.clipboard.writeText(s),u.success("Copied to clipboard")};return e.jsxs("div",{className:"space-y-5",children:[e.jsx(A,{title:"API Keys",subtitle:"Create and manage API keys for programmatic access"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:b,children:"Your Keys"}),e.jsxs("button",{onClick:()=>d(!h),className:S,children:[e.jsx(U,{className:"w-3.5 h-3.5"})," Create Key"]})]}),j&&e.jsxs("div",{className:o(g,"p-4 space-y-2 border-amber-500/30"),children:[e.jsx("p",{className:"text-xs font-medium text-amber-500",children:"Copy your new API key now — it won't be shown again."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("code",{className:"flex-1 bg-[var(--gm-bg-tertiary)] rounded-lg px-3 py-2 text-xs font-mono text-[var(--gm-text-primary)] break-all",children:j}),e.jsx("button",{onClick:()=>D(j),className:f,children:e.jsx(we,{className:"w-3.5 h-3.5"})})]}),e.jsx("button",{onClick:()=>w(null),className:"text-xs text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)]",children:"Dismiss"})]}),h&&e.jsxs("div",{className:o(g,"p-4 space-y-3"),children:[e.jsxs("div",{children:[e.jsx("label",{className:y,children:"Key Name"}),e.jsx("input",{value:n,onChange:s=>r(s.target.value),className:N,placeholder:"e.g. Production API"})]}),e.jsxs("div",{children:[e.jsx("label",{className:y,children:"Expires In"}),e.jsxs("select",{value:p,onChange:s=>m(s.target.value),className:N,children:[e.jsx("option",{value:"30",children:"30 days"}),e.jsx("option",{value:"90",children:"90 days"}),e.jsx("option",{value:"365",children:"1 year"}),e.jsx("option",{value:"",children:"Never"})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>d(!1),className:f,children:"Cancel"}),e.jsxs("button",{onClick:P,disabled:t.isPending||!n.trim(),className:S,children:[t.isPending?e.jsx(v,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(K,{className:"w-3.5 h-3.5"})," Create"]})]})]}),i.isLoading?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(v,{className:"w-5 h-5 animate-spin text-[var(--gm-accent-primary)]"})}):C.length===0?e.jsxs("div",{className:o(g,"p-6 text-center"),children:[e.jsx(z,{className:"w-8 h-8 mx-auto mb-2 opacity-40 text-[var(--gm-text-tertiary)]"}),e.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:"No API keys yet. Create one to access the API programmatically."})]}):e.jsx("div",{className:"space-y-2",children:C.map(s=>e.jsxs("div",{className:o(g,"p-4 flex items-center justify-between"),children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-[var(--gm-text-primary)]",children:s.name}),e.jsxs("div",{className:"flex items-center gap-3 mt-0.5",children:[s.key_prefix&&e.jsxs("span",{className:"text-[10px] font-mono text-[var(--gm-text-tertiary)]",children:[s.key_prefix,"..."]}),e.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:["Created ",s.created_at?new Date(s.created_at).toLocaleDateString():"—"]}),s.expires_at&&e.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:["Expires ",new Date(s.expires_at).toLocaleDateString()]})]})]}),e.jsx("button",{onClick:()=>x.mutate(s.id,{onSuccess:()=>u.success("Key revoked")}),className:"p-2 text-[var(--gm-text-tertiary)] hover:text-[var(--color-danger-500)] transition-colors",children:e.jsx(E,{className:"w-3.5 h-3.5"})})]},s.id))})]})}function Re({projectId:a}){const i=se(a),t=te(),x=re(),h=le(),[d,n]=c.useState(!1),[r,p]=c.useState(""),[m,j]=c.useState([]),w=i.data?.webhooks??[],C=["document.processed","document.created","document.deleted","entity.created","entity.updated","entity.deleted","contact.created","contact.updated","email.received","email.processed"],P=s=>{j(k=>k.includes(s)?k.filter(I=>I!==s):[...k,s])},D=()=>{!r.trim()||m.length===0||t.mutate({projectId:a,url:r.trim(),events:m},{onSuccess:()=>{u.success("Webhook created"),p(""),j([]),n(!1)},onError:()=>u.error("Failed to create webhook")})};return e.jsxs("div",{className:"space-y-5",children:[e.jsx(A,{title:"Webhooks",subtitle:"Configure endpoints to receive real-time event notifications"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:b,children:"Endpoints"}),e.jsxs("button",{onClick:()=>n(!d),className:S,children:[e.jsx(U,{className:"w-3.5 h-3.5"})," Add Webhook"]})]}),d&&e.jsxs("div",{className:o(g,"p-4 space-y-3"),children:[e.jsxs("div",{children:[e.jsx("label",{className:y,children:"Endpoint URL"}),e.jsx("input",{value:r,onChange:s=>p(s.target.value),className:N,placeholder:"https://your-server.com/webhook"})]}),e.jsxs("div",{children:[e.jsx("label",{className:y,children:"Events"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:C.map(s=>e.jsx("button",{onClick:()=>P(s),className:o("px-2 py-1 rounded-md text-[10px] font-medium transition-colors border",m.includes(s)?"bg-[var(--gm-interactive-primary)]/10 border-[var(--gm-accent-primary)]/30 text-[var(--gm-accent-primary)]":"bg-[var(--gm-bg-tertiary)] border-[var(--gm-border-primary)] text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)]"),children:s},s))})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx("button",{onClick:()=>n(!1),className:f,children:"Cancel"}),e.jsxs("button",{onClick:D,disabled:t.isPending||!r.trim()||m.length===0,className:S,children:[t.isPending?e.jsx(v,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(K,{className:"w-3.5 h-3.5"})," Create"]})]})]}),i.isLoading?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(v,{className:"w-5 h-5 animate-spin text-[var(--gm-accent-primary)]"})}):w.length===0?e.jsxs("div",{className:o(g,"p-6 text-center"),children:[e.jsx(G,{className:"w-8 h-8 mx-auto mb-2 opacity-40 text-[var(--gm-text-tertiary)]"}),e.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:"No webhooks configured. Add one to receive real-time event notifications."})]}):e.jsx("div",{className:"space-y-2",children:w.map(s=>e.jsxs("div",{className:o(g,"p-4"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm font-mono text-[var(--gm-text-primary)] truncate flex-1 mr-2",children:s.url}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>h.mutate(s.id,{onSuccess:()=>u.success("Test sent"),onError:()=>u.error("Test failed")}),disabled:h.isPending,className:f,children:"Test"}),e.jsx("button",{onClick:()=>x.mutate(s.id,{onSuccess:()=>u.success("Webhook deleted")}),className:"p-1.5 text-[var(--gm-text-tertiary)] hover:text-[var(--color-danger-500)] transition-colors",children:e.jsx(E,{className:"w-3.5 h-3.5"})})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.events.map(k=>e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)]",children:k},k))}),e.jsxs("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1.5",children:["Created ",new Date(s.created_at).toLocaleDateString()]})]},s.id))})]})}function _e(){const a=ie(),[i,t]=c.useState(!1),x=c.useCallback(()=>{const d=Object.keys(localStorage).filter(n=>n.startsWith("godmode-")&&n!=="godmode-theme"&&n!=="godmode-project-id");d.forEach(n=>localStorage.removeItem(n)),u.success(`Cleared ${d.length} cached items`)},[]),h=c.useCallback(()=>{a.mutate({clearArchived:!0},{onSuccess:()=>{u.success("Project data reset"),t(!1)},onSettled:()=>t(!1)})},[a]);return e.jsxs("div",{className:"space-y-5",children:[e.jsx(A,{title:"Data",subtitle:"Manage local cache and project data"}),e.jsxs("div",{className:o(g,"p-5 space-y-3"),children:[e.jsx("h3",{className:b,children:"Local Data"}),e.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:"Clear cached data stored in your browser. This does not affect server data."}),e.jsxs("button",{onClick:x,className:f,children:[e.jsx(q,{className:"w-3.5 h-3.5"})," Clear Local Cache"]})]}),e.jsxs("div",{className:o(g,"p-5 space-y-3 border-[var(--color-danger-500)]/30"),children:[e.jsx("h3",{className:"text-[10px] font-bold text-[var(--color-danger-500)] uppercase tracking-[0.1em]",children:"Danger Zone"}),e.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:"Reset all project knowledge data. This permanently deletes facts, decisions, questions, risks, and actions."}),i?e.jsxs("div",{className:"bg-[var(--color-danger-500)]/5 border border-[var(--color-danger-500)]/20 rounded-lg p-4 space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-[var(--color-danger-500)]",children:"Are you sure? This action cannot be undone."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>t(!1),className:f,children:"Cancel"}),e.jsxs("button",{onClick:h,disabled:a.isPending,className:M,children:[a.isPending?e.jsx(v,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(E,{className:"w-3.5 h-3.5"}),"Confirm Reset"]})]})]}):e.jsxs("button",{onClick:()=>t(!0),className:M,children:[e.jsx(E,{className:"w-3.5 h-3.5"})," Reset Project Data"]})]})]})}export{Ze as default};
//# sourceMappingURL=SettingsPage-8-RyQuMU.js.map
