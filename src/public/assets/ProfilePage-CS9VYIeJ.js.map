{"version":3,"mappings":"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","names":["__iconNode","AtSign","createLucideIcon","Headphones","Lock","TextAlignStart","Type","CARD","INPUT","BTN_PRIMARY","BTN_SECONDARY","BTN_DANGER","SECTION_TITLE","LABEL","NAV_ITEMS","User","Monitor","Sparkles","Building2","Briefcase","Link2","SectionHeader","title","subtitle","jsxs","jsx","ProfilePage","user","isLoading","useUser","searchParams","useSearchParams","tabFromUrl","activeSection","setActiveSection","useState","Loader2","initials","getInitials","isValidAvatarUrl","e","item","Icon","active","cn","ChevronRight","GeneralSection","SecuritySection","SessionsSection","UserSettingsSection","CompaniesSection","ProjectsSection","IntegrationsSection","updateProfile","uploadAvatar","deleteAvatar","username","setUsername","displayName","setDisplayName","bio","setBio","avatarUrl","setAvatarUrl","timezone","setTimezone","language","setLanguage","saving","setSaving","useEffect","handleSave","toast","err","Mail","AlignLeft","Image","AvatarUpload","file","url","Globe","Languages","Check","resetPassword","useAuth","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","updating","setUpdating","handleUpdatePassword","handleDeleteAccount","Key","AlertTriangle","Trash2","logout","sessions","handleSignOutAll","session","LogOut","MeetingPreview","m","preview","useKrispMeetingPreview","activeTab","setActiveTab","tabs","FileText","Lightbulb","ListChecks","id","label","available","s","i","kp","ai","ExternalLink","navigate","useNavigate","setSearchParams","allProjects","useProjects","showMeetings","setShowMeetings","selectedMeetings","setSelectedMeetings","expandedMeeting","setExpandedMeeting","importTargets","setImportTargets","importOpts","setImportOpts","dateAfter","setDateAfter","d","dateBefore","setDateBefore","oauthStatus","statusLoading","useKrispOAuthStatus","authorizeMut","useKrispOAuthAuthorize","disconnectMut","useKrispOAuthDisconnect","importMut","useKrispOAuthImportMeetings","sprintsData","useSprints","allSprints","meetingsData","meetingsLoading","useKrispOAuthMeetings","connected","error","handleConnect","result","handleDisconnect","toggleMeeting","prev","next","toggleOpt","key","addImportTarget","projectId","t","removeImportTarget","setTargetSprint","sprintId","handleImport","totalSucceeded","totalFailed","target","names","p","meetings","optionItems","Mic","CheckCircle2","XCircle","Fragment","Download","proj","sprints","X","isSelected","isExpanded","importedToTarget","Calendar","ChevronUp","ChevronDown","Toggle","checked","onChange","disabled","currentProject","currentProjectId","useProject","theme","setTheme","availableRoles","setAvailableRoles","availableTimezones","setAvailableTimezones","selectedRole","setSelectedRole","selectedTimezone","setSelectedTimezone","analytics","setAnalytics","errorReporting","setErrorReporting","aiData","setAiData","apiClient","res","saved","privacyToggles","Info","r","Clock","tz","CompaniesPageLazy","lazy","__vitePreload","Suspense","ProjectsPageLazy"],"ignoreList":[0,1,2,3,4],"sources":["../../../node_modules/lucide-react/dist/esm/icons/at-sign.js","../../../node_modules/lucide-react/dist/esm/icons/headphones.js","../../../node_modules/lucide-react/dist/esm/icons/lock.js","../../../node_modules/lucide-react/dist/esm/icons/text-align-start.js","../../../node_modules/lucide-react/dist/esm/icons/type.js","../../frontend/src/pages/ProfilePage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"4\", key: \"4exip2\" }],\n  [\"path\", { d: \"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8\", key: \"7n84p3\" }]\n];\nconst AtSign = createLucideIcon(\"at-sign\", __iconNode);\n\nexport { __iconNode, AtSign as default };\n//# sourceMappingURL=at-sign.js.map\n","/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3\",\n      key: \"1xhozi\"\n    }\n  ]\n];\nconst Headphones = createLucideIcon(\"headphones\", __iconNode);\n\nexport { __iconNode, Headphones as default };\n//# sourceMappingURL=headphones.js.map\n","/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"18\", height: \"11\", x: \"3\", y: \"11\", rx: \"2\", ry: \"2\", key: \"1w4ew1\" }],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 10 0v4\", key: \"fwvmzm\" }]\n];\nconst Lock = createLucideIcon(\"lock\", __iconNode);\n\nexport { __iconNode, Lock as default };\n//# sourceMappingURL=lock.js.map\n","/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M21 5H3\", key: \"1fi0y6\" }],\n  [\"path\", { d: \"M15 12H3\", key: \"6jk70r\" }],\n  [\"path\", { d: \"M17 19H3\", key: \"z6ezky\" }]\n];\nconst TextAlignStart = createLucideIcon(\"text-align-start\", __iconNode);\n\nexport { __iconNode, TextAlignStart as default };\n//# sourceMappingURL=text-align-start.js.map\n","/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 4v16\", key: \"1654pz\" }],\n  [\"path\", { d: \"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2\", key: \"e0r10z\" }],\n  [\"path\", { d: \"M9 20h6\", key: \"s66wpe\" }]\n];\nconst Type = createLucideIcon(\"type\", __iconNode);\n\nexport { __iconNode, Type as default };\n//# sourceMappingURL=type.js.map\n","/**\r\n * Purpose:\r\n *   User profile management page with four sections: General (account info, preferences),\r\n *   Security (password change, account deletion), Sessions (active login sessions),\r\n *   and Integrations (Krisp AI webhook configuration).\r\n *\r\n * Responsibilities:\r\n *   - General: edit username, display name, bio, avatar URL, timezone, language; save via API\r\n *   - Security: change password with validation, \"danger zone\" account deletion prompt\r\n *   - Sessions: display current browser session (hardcoded single session); sign-out-all action\r\n *   - Integrations: Krisp webhook URL + auth token display, copy-to-clipboard, MCP import button,\r\n *     transcript stats, credential regeneration prompt\r\n *\r\n * Key dependencies:\r\n *   - useUser: profile data and updateProfile mutation\r\n *   - useAuth (AuthContext): resetPassword, logout\r\n *   - framer-motion: section transition animations\r\n *\r\n * Side effects:\r\n *   - Network: profile updates, password reset, logout\r\n *   - Clipboard: copies webhook URL and auth token\r\n *\r\n * Notes:\r\n *   - Sessions section currently only shows the current browser session (navigator.userAgent);\r\n *     multi-session tracking is not yet implemented.\r\n *   - The auth token in IntegrationsSection is hardcoded as a placeholder.\r\n *   - Account deletion is not implemented; it shows a toast directing the user to an admin.\r\n */\r\nimport { useState, useEffect, lazy, Suspense } from 'react';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\nimport {\r\n  User, Lock, Monitor, Link2, Mail, AtSign, Type, AlignLeft, Image,\r\n  Globe, Languages, Key, AlertTriangle, Trash2, LogOut, Mic,\r\n  Check, Loader2, ChevronRight, Building2, Briefcase, Sparkles, Info,\r\n  Clock, X,\r\n  ExternalLink, CheckCircle2, XCircle, Download, Calendar,\r\n  ChevronDown, ChevronUp, FileText, ListChecks, Lightbulb, Headphones\r\n} from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { useUser } from '@/hooks/useUser';\r\nimport { useAuth } from '@/contexts/AuthContext';\r\nimport { useProject } from '@/contexts/ProjectContext';\r\nimport { cn, getInitials, isValidAvatarUrl } from '@/lib/utils';\r\nimport { apiClient } from '@/lib/api-client';\r\nimport { AvatarUpload } from '@/components/shared/AvatarUpload';\r\nimport {\r\n  useKrispOAuthStatus,\r\n  useKrispOAuthAuthorize,\r\n  useKrispOAuthDisconnect,\r\n  useKrispOAuthMeetings,\r\n  useKrispOAuthImportMeetings,\r\n  useKrispMeetingPreview,\r\n  type KrispMeeting,\r\n  type KrispImportOptions,\r\n  useProjects,\r\n  useSprints,\r\n} from '@/hooks/useGodMode';\r\n\r\n// ── Style tokens (aligned with AdminPage) ────────────────────────────────────\r\n\r\ntype ProfileSection = 'general' | 'security' | 'sessions' | 'integrations' | 'companies' | 'projects' | 'settings';\r\n\r\nconst CARD = 'rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-[var(--shadow-sm)] transition-all duration-200';\r\nconst INPUT = 'w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-placeholder)] focus:outline-none focus:border-[var(--gm-border-focus)] focus:shadow-[var(--shadow-focus)] transition-all duration-150';\r\nconst BTN_PRIMARY = 'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] hover:bg-[var(--gm-interactive-primary-hover)] shadow-sm transition-all duration-150 disabled:opacity-50';\r\nconst BTN_SECONDARY = 'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] hover:bg-[var(--gm-interactive-secondary-hover)] border border-[var(--gm-border-primary)] transition-all duration-150';\r\nconst BTN_DANGER = 'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--color-danger-500)] text-white hover:bg-[var(--color-danger-600)] shadow-sm transition-all duration-150 disabled:opacity-50';\r\nconst SECTION_TITLE = 'text-[10px] font-bold text-[var(--gm-accent-primary)] uppercase tracking-[0.1em]';\r\nconst LABEL = 'text-[10px] font-bold text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-1 flex items-center gap-1.5';\r\n\r\nconst NAV_ITEMS = [\r\n  { id: 'general' as const, label: 'General', icon: User },\r\n  { id: 'security' as const, label: 'Security', icon: Lock },\r\n  { id: 'sessions' as const, label: 'Sessions', icon: Monitor },\r\n  { id: 'settings' as const, label: 'User Settings', icon: Sparkles },\r\n  { id: 'companies' as const, label: 'Companies', icon: Building2 },\r\n  { id: 'projects' as const, label: 'Projects', icon: Briefcase },\r\n  { id: 'integrations' as const, label: 'Integrations', icon: Link2 },\r\n];\r\n\r\nfunction SectionHeader({ title, subtitle }: { title: string; subtitle?: string }) {\r\n  return (\r\n    <div className=\"mb-6\">\r\n      <h2 className=\"text-lg font-bold text-[var(--gm-text-primary)]\">{title}</h2>\r\n      {subtitle && <p className=\"text-xs text-[var(--gm-text-tertiary)] mt-0.5\">{subtitle}</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ProfilePage = () => {\r\n  const { user, isLoading } = useUser();\r\n  const [searchParams] = useSearchParams();\r\n  const tabFromUrl = searchParams.get('tab') as ProfileSection | null;\r\n  const [activeSection, setActiveSection] = useState<ProfileSection>(\r\n    tabFromUrl && ['general', 'security', 'sessions', 'integrations', 'companies', 'projects', 'settings'].includes(tabFromUrl) ? tabFromUrl : 'general'\r\n  );\r\n\r\n  if (isLoading) {\r\n    return <div className=\"flex items-center justify-center py-16\"><Loader2 className=\"h-6 w-6 animate-spin text-[var(--gm-accent-primary)]\" /></div>;\r\n  }\r\n\r\n  const initials = getInitials(user?.display_name || user?.email || '');\r\n\r\n  return (\r\n    <div className=\"flex h-full\">\r\n      {/* Side Nav */}\r\n      <div className=\"w-48 shrink-0 border-r border-[var(--gm-border-primary)] bg-[var(--gm-bg-primary)] overflow-y-auto\">\r\n        <div className=\"flex items-center gap-2.5 px-4 py-4 border-b border-[var(--gm-border-primary)]\">\r\n          {isValidAvatarUrl(user?.avatar_url) ? (\r\n            <img src={user!.avatar_url!} alt={user?.display_name || ''} className=\"w-7 h-7 rounded-full object-cover\" onError={(e) => { (e.target as HTMLImageElement).style.display = 'none'; }} />\r\n          ) : (\r\n            <div className=\"w-7 h-7 rounded-full bg-[var(--gm-interactive-primary)]/10 flex items-center justify-center\">\r\n              <span className=\"text-[10px] font-bold text-[var(--gm-accent-primary)]\">{initials}</span>\r\n            </div>\r\n          )}\r\n          <div className=\"min-w-0\">\r\n            <span className=\"text-sm font-bold text-[var(--gm-accent-primary)]\">Profile</span>\r\n            <p className=\"text-[10px] text-[var(--gm-text-tertiary)] truncate\">{user?.email}</p>\r\n          </div>\r\n        </div>\r\n        <nav className=\"py-2\">\r\n          {NAV_ITEMS.map(item => {\r\n            const Icon = item.icon;\r\n            const active = activeSection === item.id;\r\n            return (\r\n              <button key={item.id} onClick={() => setActiveSection(item.id)}\r\n                className={cn('w-full flex items-center gap-2.5 px-4 py-2 text-xs transition-colors',\r\n                  active ? 'text-[var(--gm-accent-primary)] bg-[var(--gm-surface-hover)] font-semibold' : 'text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] hover:bg-[var(--gm-surface-hover)]')}>\r\n                <Icon className=\"w-3.5 h-3.5 shrink-0\" />\r\n                <span className=\"flex-1 text-left\">{item.label}</span>\r\n                {active && <ChevronRight className=\"w-3 h-3 shrink-0\" />}\r\n              </button>\r\n            );\r\n          })}\r\n        </nav>\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div className=\"flex-1 overflow-y-auto p-6\">\r\n        {activeSection === 'general' && <GeneralSection />}\r\n        {activeSection === 'security' && <SecuritySection />}\r\n        {activeSection === 'sessions' && <SessionsSection />}\r\n        {activeSection === 'settings' && <UserSettingsSection />}\r\n        {activeSection === 'companies' && <CompaniesSection />}\r\n        {activeSection === 'projects' && <ProjectsSection />}\r\n        {activeSection === 'integrations' && <IntegrationsSection />}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ==================== GENERAL ====================\r\n\r\nfunction GeneralSection() {\r\n  const { user, updateProfile, uploadAvatar, deleteAvatar } = useUser();\r\n  const [username, setUsername] = useState('');\r\n  const [displayName, setDisplayName] = useState('');\r\n  const [bio, setBio] = useState('');\r\n  const [avatarUrl, setAvatarUrl] = useState('');\r\n  const [timezone, setTimezone] = useState('Europe/Lisbon');\r\n  const [language, setLanguage] = useState('en');\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      setUsername(user.username || '');\r\n      setDisplayName(user.display_name || '');\r\n      setAvatarUrl(user.avatar_url || '');\r\n      setTimezone(user.timezone || 'Europe/Lisbon');\r\n    }\r\n  }, [user]);\r\n\r\n  const handleSave = async () => {\r\n    if (username && !/^[a-zA-Z0-9_]{3,30}$/.test(username)) {\r\n      toast.error('Username must be 3-30 characters, alphanumeric and underscores only');\r\n      return;\r\n    }\r\n    if (displayName && displayName.trim().length < 2) {\r\n      toast.error('Display name must be at least 2 characters');\r\n      return;\r\n    }\r\n    setSaving(true);\r\n    try {\r\n      await updateProfile.mutateAsync({\r\n        username,\r\n        display_name: displayName,\r\n        avatar_url: avatarUrl || undefined,\r\n        timezone,\r\n      });\r\n      toast.success('Profile updated');\r\n    } catch (err: any) {\r\n      toast.error(err.message || 'Failed to update profile');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-5\">\r\n      <SectionHeader title=\"General\" subtitle=\"Manage your account information and preferences\" />\r\n\r\n      <div className={cn(CARD, 'p-5 space-y-5')}>\r\n        <h3 className={SECTION_TITLE}>Account Information</h3>\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className={LABEL}><Mail className=\"w-3 h-3\" /> Email</label>\r\n            <input value={user?.email || ''} readOnly className={cn(INPUT, 'opacity-60 cursor-not-allowed')} />\r\n            <p className=\"text-[10px] text-[var(--gm-text-tertiary)] mt-1\">Email cannot be changed</p>\r\n          </div>\r\n          <div>\r\n            <label className={LABEL}><AtSign className=\"w-3 h-3\" /> Username</label>\r\n            <input value={username} onChange={e => setUsername(e.target.value)} className={INPUT} />\r\n          </div>\r\n        </div>\r\n\r\n        <div>\r\n          <label className={LABEL}><Type className=\"w-3 h-3\" /> Display Name</label>\r\n          <input value={displayName} onChange={e => setDisplayName(e.target.value)} className={INPUT} />\r\n        </div>\r\n\r\n        <div>\r\n          <label className={LABEL}><AlignLeft className=\"w-3 h-3\" /> Bio</label>\r\n          <textarea value={bio} onChange={e => setBio(e.target.value)} placeholder=\"Tell us a bit about yourself\" rows={3}\r\n            className={cn(INPUT, 'resize-y')} />\r\n        </div>\r\n\r\n        <div>\r\n          <label className={LABEL}><Image className=\"w-3 h-3\" /> Avatar</label>\r\n          <div className=\"mt-2\">\r\n            <AvatarUpload\r\n              currentUrl={avatarUrl}\r\n              name={displayName || username || user?.email || ''}\r\n              onUpload={async (file) => {\r\n                const url = await uploadAvatar.mutateAsync(file);\r\n                setAvatarUrl(url);\r\n                toast.success('Avatar uploaded');\r\n                return url;\r\n              }}\r\n              onUrlChange={(url) => {\r\n                setAvatarUrl(url);\r\n                toast.info('URL set — click Save to apply');\r\n              }}\r\n              onRemove={async () => {\r\n                await deleteAvatar.mutateAsync();\r\n                setAvatarUrl('');\r\n                toast.success('Avatar removed');\r\n              }}\r\n              size=\"lg\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={cn(CARD, 'p-5 space-y-4')}>\r\n        <h3 className={SECTION_TITLE}>Preferences</h3>\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className={LABEL}><Globe className=\"w-3 h-3\" /> Timezone</label>\r\n            <select value={timezone} onChange={e => setTimezone(e.target.value)} className={INPUT}>\r\n              <option value=\"Europe/Lisbon\">Lisbon, Portugal (+00:00)</option>\r\n              <option value=\"Europe/London\">London, UK (+00:00)</option>\r\n              <option value=\"Europe/Paris\">Paris, France (+01:00)</option>\r\n              <option value=\"Europe/Berlin\">Berlin, Germany (+01:00)</option>\r\n              <option value=\"America/New_York\">New York, USA (-05:00)</option>\r\n              <option value=\"America/Los_Angeles\">Los Angeles, USA (-08:00)</option>\r\n              <option value=\"Asia/Tokyo\">Tokyo, Japan (+09:00)</option>\r\n              <option value=\"Australia/Sydney\">Sydney, Australia (+11:00)</option>\r\n            </select>\r\n          </div>\r\n          <div>\r\n            <label className={LABEL}><Languages className=\"w-3 h-3\" /> Language</label>\r\n            <select value={language} onChange={e => setLanguage(e.target.value)} className={INPUT}>\r\n              <option value=\"en\">English</option>\r\n              <option value=\"pt\">Português</option>\r\n              <option value=\"es\">Español</option>\r\n              <option value=\"fr\">Français</option>\r\n              <option value=\"de\">Deutsch</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex justify-end pt-2\">\r\n          <button onClick={handleSave} disabled={saving} className={BTN_PRIMARY}>\r\n            {saving ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Check className=\"w-3.5 h-3.5\" />}\r\n            {saving ? 'Saving...' : 'Save Changes'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// ==================== SECURITY ====================\r\n\r\nfunction SecuritySection() {\r\n  const { resetPassword } = useAuth();\r\n  const [currentPassword, setCurrentPassword] = useState('');\r\n  const [newPassword, setNewPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [updating, setUpdating] = useState(false);\r\n\r\n  const handleUpdatePassword = async () => {\r\n    if (!newPassword || !confirmPassword) {\r\n      toast.error('Please fill in all password fields');\r\n      return;\r\n    }\r\n    if (newPassword !== confirmPassword) {\r\n      toast.error('New passwords do not match');\r\n      return;\r\n    }\r\n    if (newPassword.length < 6) {\r\n      toast.error('Password must be at least 6 characters');\r\n      return;\r\n    }\r\n    setUpdating(true);\r\n    try {\r\n      await resetPassword(newPassword);\r\n      toast.success('Password updated successfully');\r\n      setCurrentPassword('');\r\n      setNewPassword('');\r\n      setConfirmPassword('');\r\n    } catch (err: any) {\r\n      toast.error(err.message || 'Failed to update password');\r\n    } finally {\r\n      setUpdating(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteAccount = () => {\r\n    toast.error('Account deletion requires contacting an administrator');\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-5\">\r\n      <SectionHeader title=\"Security\" subtitle=\"Manage your password and account security\" />\r\n\r\n      <div className={cn(CARD, 'p-5 space-y-4')}>\r\n        <h3 className={SECTION_TITLE}>Change Password</h3>\r\n        <div>\r\n          <label className={LABEL}><Key className=\"w-3 h-3\" /> Current Password</label>\r\n          <input type=\"password\" value={currentPassword} onChange={e => setCurrentPassword(e.target.value)} className={INPUT} />\r\n        </div>\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className={LABEL}>New Password</label>\r\n            <input type=\"password\" value={newPassword} onChange={e => setNewPassword(e.target.value)} className={INPUT} />\r\n          </div>\r\n          <div>\r\n            <label className={LABEL}>Confirm Password</label>\r\n            <input type=\"password\" value={confirmPassword} onChange={e => setConfirmPassword(e.target.value)} className={INPUT} />\r\n          </div>\r\n        </div>\r\n        <p className=\"text-[10px] text-[var(--gm-accent-primary)]\">Minimum 6 characters</p>\r\n        <div className=\"flex justify-end pt-2\">\r\n          <button onClick={handleUpdatePassword} disabled={updating} className={BTN_PRIMARY}>\r\n            {updating ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Key className=\"w-3.5 h-3.5\" />}\r\n            {updating ? 'Updating...' : 'Update Password'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"rounded-xl border border-[var(--color-danger-500)]/30 bg-[var(--color-danger-500)]/5 p-5\">\r\n        <h3 className=\"text-xs font-bold text-[var(--color-danger-500)] mb-1 flex items-center gap-2\">\r\n          <AlertTriangle className=\"w-3.5 h-3.5\" /> Danger Zone\r\n        </h3>\r\n        <p className=\"text-[10px] text-[var(--gm-text-tertiary)] mb-3\">Permanently delete your account and all associated data. This action cannot be undone.</p>\r\n        <button onClick={handleDeleteAccount} className={BTN_DANGER}>\r\n          <Trash2 className=\"w-3.5 h-3.5\" /> Delete Account\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// ==================== SESSIONS ====================\r\n\r\nfunction SessionsSection() {\r\n  const { logout } = useAuth();\r\n\r\n  const sessions = [\r\n    {\r\n      id: '1',\r\n      userAgent: navigator.userAgent,\r\n      ip: '::1',\r\n      lastActive: 'Just now',\r\n      current: true,\r\n    },\r\n  ];\r\n\r\n  const handleSignOutAll = async () => {\r\n    try {\r\n      await logout();\r\n      toast.success('All other sessions signed out');\r\n    } catch {\r\n      toast.error('Failed to sign out other sessions');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-5\">\r\n      <SectionHeader title=\"Sessions\" subtitle=\"Active login sessions for your account\" />\r\n\r\n      <div className={cn(CARD, 'p-5 space-y-4')}>\r\n        <h3 className={SECTION_TITLE}>Active Sessions</h3>\r\n        <div className=\"space-y-3\">\r\n          {sessions.map(session => (\r\n            <div key={session.id}\r\n              className={cn('flex items-center gap-4 p-4 rounded-lg border',\r\n                session.current\r\n                  ? 'border-[var(--gm-accent-primary)]/30 bg-[var(--gm-accent-primary)]/5'\r\n                  : 'border-[var(--gm-border-primary)]')}>\r\n              <Monitor className=\"w-7 h-7 text-[var(--gm-text-tertiary)] flex-shrink-0\" />\r\n              <div className=\"flex-1 min-w-0\">\r\n                <p className=\"text-xs text-[var(--gm-text-primary)] break-all\">{session.userAgent}</p>\r\n                <p className=\"text-[10px] text-[var(--gm-text-tertiary)] mt-1\">\r\n                  {session.ip} &bull; Last active: {session.lastActive}\r\n                </p>\r\n              </div>\r\n              {session.current && (\r\n                <span className=\"text-[10px] font-bold text-[var(--gm-accent-primary)] bg-[var(--gm-accent-primary)]/10 px-2 py-0.5 rounded-full flex-shrink-0\">Current</span>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"flex justify-end pt-2\">\r\n          <button onClick={handleSignOutAll} className={BTN_SECONDARY}>\r\n            <LogOut className=\"w-3.5 h-3.5\" /> Sign out all other sessions\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// ==================== MEETING PREVIEW (sub-component for hooks) ====================\r\n\r\nfunction MeetingPreview({ meeting: m }: { meeting: KrispMeeting }) {\r\n  const { data: preview, isLoading } = useKrispMeetingPreview(m.meeting_id);\r\n  const [activeTab, setActiveTab] = useState<'transcript' | 'outline' | 'keypoints' | 'actions' | 'audio'>('outline');\r\n\r\n  const tabs = [\r\n    { id: 'transcript' as const, label: 'Transcript', icon: FileText, available: true },\r\n    { id: 'outline' as const, label: 'Outline', icon: AlignLeft, available: m.detailed_summary.length > 0 },\r\n    { id: 'keypoints' as const, label: 'Key Points', icon: Lightbulb, available: m.key_points.length > 0 },\r\n    { id: 'actions' as const, label: 'Actions', icon: ListChecks, available: m.action_items.length > 0 },\r\n    { id: 'audio' as const, label: 'Audio', icon: Headphones, available: true },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"border-t border-[var(--gm-border-primary)]/50 mx-4 mb-2\">\r\n      <div className=\"flex gap-0.5 pt-2 pb-1 overflow-x-auto\">\r\n        {tabs.map(({ id, label, icon: Icon, available }) => (\r\n          <button key={id} onClick={() => setActiveTab(id)}\r\n            className={cn('flex items-center gap-1 px-2.5 py-1.5 rounded-md text-[10px] font-medium whitespace-nowrap transition-colors',\r\n              activeTab === id\r\n                ? 'bg-[var(--gm-accent-primary)]/10 text-[var(--gm-accent-primary)]'\r\n                : available\r\n                  ? 'text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] hover:bg-[var(--gm-surface-hover)]'\r\n                  : 'text-[var(--gm-text-tertiary)]/40 cursor-default')}>\r\n            <Icon className=\"w-3 h-3\" />\r\n            {label}\r\n            {id === 'actions' && m.action_items.length > 0 && <span className=\"ml-0.5 text-[9px] opacity-60\">({m.action_items.length})</span>}\r\n            {id === 'keypoints' && m.key_points.length > 0 && <span className=\"ml-0.5 text-[9px] opacity-60\">({m.key_points.length})</span>}\r\n            {id === 'outline' && m.detailed_summary.length > 0 && <span className=\"ml-0.5 text-[9px] opacity-60\">({m.detailed_summary.length})</span>}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"pb-3 pt-1\">\r\n        {activeTab === 'transcript' && (\r\n          <div>\r\n            {isLoading ? (\r\n              <div className=\"flex items-center gap-2 py-4 justify-center\">\r\n                <Loader2 className=\"w-4 h-4 animate-spin text-[var(--gm-text-tertiary)]\" />\r\n                <span className=\"text-[10px] text-[var(--gm-text-tertiary)]\">Fetching transcript...</span>\r\n              </div>\r\n            ) : preview?.transcript ? (\r\n              <pre className=\"text-[10px] text-[var(--gm-text-secondary)] whitespace-pre-wrap max-h-[200px] overflow-y-auto bg-[var(--gm-bg-tertiary)] rounded-md p-3 font-mono leading-relaxed\">\r\n                {preview.transcript}\r\n              </pre>\r\n            ) : (\r\n              <p className=\"text-[10px] text-[var(--gm-text-tertiary)] italic py-2\">\r\n                {preview?.error || 'No transcript content available.'}\r\n              </p>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {activeTab === 'outline' && (\r\n          <div className=\"space-y-2 max-h-[200px] overflow-y-auto\">\r\n            {m.detailed_summary.length > 0 ? m.detailed_summary.map((s, i) => (\r\n              <div key={i} className=\"text-[10px]\">\r\n                <span className=\"font-medium text-[var(--gm-text-primary)]\">{s.title}</span>\r\n                <p className=\"text-[var(--gm-text-tertiary)] mt-0.5\">{s.description}</p>\r\n              </div>\r\n            )) : (\r\n              <p className=\"text-[10px] text-[var(--gm-text-tertiary)] italic\">No outline available.</p>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {activeTab === 'keypoints' && (\r\n          <ul className=\"space-y-1.5 max-h-[200px] overflow-y-auto\">\r\n            {m.key_points.length > 0 ? m.key_points.map((kp, i) => (\r\n              <li key={i} className=\"text-[10px] text-[var(--gm-text-tertiary)] flex gap-1.5\">\r\n                <span className=\"text-[var(--gm-accent-primary)] mt-0.5 flex-shrink-0\">&bull;</span>\r\n                <span>{kp.replace(/\\{\\{.*?\\}\\}/g, '').trim()}</span>\r\n              </li>\r\n            )) : (\r\n              <p className=\"text-[10px] text-[var(--gm-text-tertiary)] italic\">No key points available.</p>\r\n            )}\r\n          </ul>\r\n        )}\r\n\r\n        {activeTab === 'actions' && (\r\n          <ul className=\"space-y-1.5 max-h-[200px] overflow-y-auto\">\r\n            {m.action_items.length > 0 ? m.action_items.map((ai, i) => (\r\n              <li key={i} className=\"text-[10px] flex items-start gap-1.5\">\r\n                <span className={cn('mt-0.5 flex-shrink-0', ai.completed ? 'text-emerald-500' : 'text-[var(--gm-text-tertiary)]')}>\r\n                  {ai.completed ? '✓' : '○'}\r\n                </span>\r\n                <span className=\"text-[var(--gm-text-primary)] flex-1\">{ai.title}</span>\r\n                {ai.assignee && (\r\n                  <span className=\"text-[9px] px-1.5 py-0 rounded border border-[var(--gm-border-primary)] text-[var(--gm-text-tertiary)] flex-shrink-0\">\r\n                    {ai.assignee}\r\n                  </span>\r\n                )}\r\n              </li>\r\n            )) : (\r\n              <p className=\"text-[10px] text-[var(--gm-text-tertiary)] italic\">No action items available.</p>\r\n            )}\r\n          </ul>\r\n        )}\r\n\r\n        {activeTab === 'audio' && (\r\n          <div>\r\n            {isLoading ? (\r\n              <div className=\"flex items-center gap-2 py-4 justify-center\">\r\n                <Loader2 className=\"w-4 h-4 animate-spin text-[var(--gm-text-tertiary)]\" />\r\n                <span className=\"text-[10px] text-[var(--gm-text-tertiary)]\">Checking for audio...</span>\r\n              </div>\r\n            ) : preview?.audioUrl ? (\r\n              <div className=\"space-y-2\">\r\n                <audio controls className=\"w-full h-8\" preload=\"none\">\r\n                  <source src={preview.audioUrl} type=\"audio/mpeg\" />\r\n                </audio>\r\n                <a href={preview.audioUrl} target=\"_blank\" rel=\"noopener noreferrer\"\r\n                  className=\"inline-flex items-center gap-1 text-[10px] text-[var(--gm-accent-primary)] hover:underline\">\r\n                  <ExternalLink className=\"w-3 h-3\" /> Open audio file\r\n                </a>\r\n              </div>\r\n            ) : (\r\n              <p className=\"text-[10px] text-[var(--gm-text-tertiary)] italic py-2\">\r\n                No audio recording available for this meeting.\r\n              </p>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// ==================== INTEGRATIONS ====================\r\n\r\nfunction IntegrationsSection() {\r\n  const navigate = useNavigate();\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  const { data: allProjects = [] } = useProjects();\r\n  const [showMeetings, setShowMeetings] = useState(false);\r\n  const [selectedMeetings, setSelectedMeetings] = useState<Set<string>>(new Set());\r\n  const [expandedMeeting, setExpandedMeeting] = useState<string | null>(null);\r\n  const [importTargets, setImportTargets] = useState<{ projectId: string; sprintId: string }[]>([]);\r\n  const [importOpts, setImportOpts] = useState<KrispImportOptions>({\r\n    transcript: true, keyPoints: true, actionItems: true, outline: true, audio: true,\r\n  });\r\n  const [dateAfter, setDateAfter] = useState(() => {\r\n    const d = new Date();\r\n    d.setDate(d.getDate() - 30);\r\n    return d.toISOString().split('T')[0];\r\n  });\r\n  const [dateBefore, setDateBefore] = useState(() => new Date().toISOString().split('T')[0]);\r\n\r\n  const { data: oauthStatus, isLoading: statusLoading } = useKrispOAuthStatus();\r\n  const authorizeMut = useKrispOAuthAuthorize();\r\n  const disconnectMut = useKrispOAuthDisconnect();\r\n  const importMut = useKrispOAuthImportMeetings();\r\n  const { data: sprintsData } = useSprints();\r\n  const allSprints: any[] = (sprintsData as any)?.sprints ?? (Array.isArray(sprintsData) ? sprintsData : []);\r\n  const { data: meetingsData, isLoading: meetingsLoading } = useKrispOAuthMeetings({\r\n    limit: 50,\r\n    after: dateAfter || undefined,\r\n    before: dateBefore || undefined,\r\n    enabled: showMeetings && !!oauthStatus?.connected,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const connected = searchParams.get('krisp_connected');\r\n    const error = searchParams.get('krisp_error');\r\n    if (connected === 'true') {\r\n      toast.success('Krisp connected successfully!');\r\n      setSearchParams({}, { replace: true });\r\n    } else if (error) {\r\n      toast.error(`Krisp connection failed: ${decodeURIComponent(error)}`);\r\n      setSearchParams({}, { replace: true });\r\n    }\r\n  }, [searchParams, setSearchParams]);\r\n\r\n  const handleConnect = async () => {\r\n    try {\r\n      const result = await authorizeMut.mutateAsync();\r\n      if (result.url) window.location.href = result.url;\r\n    } catch {\r\n      toast.error('Failed to start Krisp authorization');\r\n    }\r\n  };\r\n\r\n  const handleDisconnect = async () => {\r\n    if (!confirm('Disconnect Krisp? You can reconnect anytime.')) return;\r\n    try {\r\n      await disconnectMut.mutateAsync();\r\n      setShowMeetings(false);\r\n      toast.success('Krisp disconnected');\r\n    } catch {\r\n      toast.error('Failed to disconnect');\r\n    }\r\n  };\r\n\r\n  const toggleMeeting = (id: string) => {\r\n    setSelectedMeetings(prev => {\r\n      const next = new Set(prev);\r\n      if (next.has(id)) next.delete(id); else next.add(id);\r\n      return next;\r\n    });\r\n  };\r\n\r\n  const toggleOpt = (key: keyof KrispImportOptions) => {\r\n    setImportOpts(prev => ({ ...prev, [key]: !prev[key] }));\r\n  };\r\n\r\n  const addImportTarget = (projectId: string) => {\r\n    if (!projectId || importTargets.some(t => t.projectId === projectId)) return;\r\n    setImportTargets(prev => [...prev, { projectId, sprintId: '' }]);\r\n  };\r\n\r\n  const removeImportTarget = (projectId: string) => {\r\n    setImportTargets(prev => prev.filter(t => t.projectId !== projectId));\r\n  };\r\n\r\n  const setTargetSprint = (projectId: string, sprintId: string) => {\r\n    setImportTargets(prev => prev.map(t => t.projectId === projectId ? { ...t, sprintId } : t));\r\n  };\r\n\r\n  const handleImport = async () => {\r\n    if (selectedMeetings.size === 0) return toast.error('Select at least one meeting');\r\n    if (importTargets.length === 0) return toast.error('Add at least one target project');\r\n    if (!importOpts.transcript && !importOpts.keyPoints && !importOpts.actionItems && !importOpts.outline) {\r\n      return toast.error('Select at least one content type to import');\r\n    }\r\n    let totalSucceeded = 0;\r\n    let totalFailed = 0;\r\n    for (const target of importTargets) {\r\n      try {\r\n        const result = await importMut.mutateAsync({\r\n          meetingIds: Array.from(selectedMeetings),\r\n          projectId: target.projectId,\r\n          importOptions: { ...importOpts, sprint_id: target.sprintId || null },\r\n        });\r\n        totalSucceeded += result.succeeded;\r\n        totalFailed += result.failed;\r\n      } catch {\r\n        totalFailed += selectedMeetings.size;\r\n      }\r\n    }\r\n    if (totalSucceeded > 0) {\r\n      const names = importTargets.map(t => allProjects.find((p: any) => p.id === t.projectId)?.name).filter(Boolean).join(', ');\r\n      toast.success(`Imported ${totalSucceeded} file(s) to ${names}`);\r\n      setSelectedMeetings(new Set());\r\n      setImportTargets([]);\r\n    }\r\n    if (totalFailed > 0) toast.error(`${totalFailed} import(s) failed`);\r\n  };\r\n\r\n  const connected = oauthStatus?.connected === true;\r\n  const meetings = meetingsData?.meetings || [];\r\n\r\n  const optionItems: { key: keyof KrispImportOptions; icon: typeof FileText; label: string }[] = [\r\n    { key: 'transcript', icon: FileText, label: 'Transcript' },\r\n    { key: 'keyPoints', icon: Lightbulb, label: 'Key Points' },\r\n    { key: 'actionItems', icon: ListChecks, label: 'Action Items' },\r\n    { key: 'outline', icon: AlignLeft, label: 'Outline' },\r\n    { key: 'audio', icon: Headphones, label: 'Audio' },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-5\">\r\n      <SectionHeader title=\"Integrations\" subtitle=\"Connect external services to your account\" />\r\n\r\n      <div className={cn(CARD, 'p-5')}>\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <div>\r\n            <h3 className={cn(SECTION_TITLE, 'flex items-center gap-2')}>\r\n              <Mic className=\"w-3.5 h-3.5\" /> Krisp AI Meeting Assistant\r\n            </h3>\r\n            <p className=\"text-[10px] text-[var(--gm-text-tertiary)] mt-1\">\r\n              Connect your Krisp account via OAuth to import transcripts and recordings.\r\n            </p>\r\n          </div>\r\n          {statusLoading ? (\r\n            <Loader2 className=\"w-4 h-4 animate-spin text-[var(--gm-text-tertiary)]\" />\r\n          ) : connected ? (\r\n            <span className=\"inline-flex items-center gap-1 text-[10px] font-bold text-emerald-500 bg-emerald-500/10 border border-emerald-500/30 px-2 py-0.5 rounded-full\">\r\n              <CheckCircle2 className=\"w-3 h-3\" /> Connected\r\n            </span>\r\n          ) : (\r\n            <span className=\"inline-flex items-center gap-1 text-[10px] font-bold text-[var(--gm-text-tertiary)] border border-[var(--gm-border-primary)] px-2 py-0.5 rounded-full\">\r\n              <XCircle className=\"w-3 h-3\" /> Not connected\r\n            </span>\r\n          )}\r\n        </div>\r\n\r\n        {!connected ? (\r\n          <button onClick={handleConnect} disabled={authorizeMut.isPending}\r\n            className={cn(BTN_PRIMARY, 'w-full justify-center py-2.5')}>\r\n            {authorizeMut.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <ExternalLink className=\"w-3.5 h-3.5\" />}\r\n            Connect Krisp Account\r\n          </button>\r\n        ) : (\r\n          <>\r\n            <div className=\"flex gap-2 mb-4\">\r\n              <button onClick={() => setShowMeetings(!showMeetings)} className={cn(BTN_PRIMARY, 'flex-1 justify-center py-2')}>\r\n                <Download className=\"w-3.5 h-3.5\" />\r\n                {showMeetings ? 'Hide Meetings' : 'Browse & Import Meetings'}\r\n              </button>\r\n              <button onClick={handleDisconnect} disabled={disconnectMut.isPending}\r\n                className={cn(BTN_SECONDARY, 'hover:text-[var(--color-danger-500)] hover:border-[var(--color-danger-500)]/30')}>\r\n                {disconnectMut.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <XCircle className=\"w-3.5 h-3.5\" />}\r\n                Disconnect\r\n              </button>\r\n            </div>\r\n\r\n            {showMeetings && (\r\n              <div className=\"border border-[var(--gm-border-primary)] rounded-lg overflow-hidden\">\r\n                <div className=\"flex items-center gap-3 px-4 py-3 bg-[var(--gm-bg-tertiary)] border-b border-[var(--gm-border-primary)]\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <label className=\"text-[10px] text-[var(--gm-text-tertiary)] whitespace-nowrap uppercase tracking-wider font-bold\">From</label>\r\n                    <input type=\"date\" value={dateAfter} onChange={e => setDateAfter(e.target.value)}\r\n                      className=\"px-2 py-1 text-xs rounded-md border border-[var(--gm-border-primary)] bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-primary)]\" />\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <label className=\"text-[10px] text-[var(--gm-text-tertiary)] whitespace-nowrap uppercase tracking-wider font-bold\">To</label>\r\n                    <input type=\"date\" value={dateBefore} onChange={e => setDateBefore(e.target.value)}\r\n                      className=\"px-2 py-1 text-xs rounded-md border border-[var(--gm-border-primary)] bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-primary)]\" />\r\n                  </div>\r\n                  <span className=\"text-[10px] text-[var(--gm-text-tertiary)] ml-auto\">{meetings.length} meeting(s)</span>\r\n                </div>\r\n\r\n                {selectedMeetings.size > 0 && (\r\n                  <div className=\"px-4 py-3 bg-[var(--gm-accent-primary)]/5 border-b border-[var(--gm-border-primary)] space-y-2.5\">\r\n                    <div className=\"flex items-center gap-2 flex-wrap\">\r\n                      <span className=\"text-xs text-[var(--gm-text-primary)] font-medium whitespace-nowrap\">\r\n                        {selectedMeetings.size} selected &rarr; Import to:\r\n                      </span>\r\n                    </div>\r\n\r\n                    {importTargets.map(t => {\r\n                      const proj = allProjects.find((p: any) => p.id === t.projectId);\r\n                      const sprints = allSprints.filter((s: any) => s.project_id === t.projectId && s.status !== 'completed');\r\n                      return (\r\n                        <div key={t.projectId} className=\"flex items-center gap-2\">\r\n                          <span className=\"text-xs font-medium text-[var(--gm-text-primary)] bg-[var(--gm-bg-tertiary)] px-2 py-1 rounded-md border border-[var(--gm-border-primary)] truncate max-w-[180px]\">\r\n                            {proj?.name || t.projectId}\r\n                          </span>\r\n                          <select value={t.sprintId} onChange={e => setTargetSprint(t.projectId, e.target.value)} className={cn(INPUT, 'w-44')}>\r\n                            <option value=\"\">No sprint</option>\r\n                            {sprints.map((s: any) => (\r\n                              <option key={s.id} value={s.id}>{s.name}</option>\r\n                            ))}\r\n                          </select>\r\n                          <button onClick={() => removeImportTarget(t.projectId)}\r\n                            className=\"p-1 text-[var(--gm-text-tertiary)] hover:text-red-400 transition-colors\" title=\"Remove\">\r\n                            <X className=\"w-3.5 h-3.5\" />\r\n                          </button>\r\n                        </div>\r\n                      );\r\n                    })}\r\n\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <select value=\"\" onChange={e => { addImportTarget(e.target.value); e.target.value = ''; }}\r\n                        className={cn(INPUT, 'flex-1')}>\r\n                        <option value=\"\">+ Add project...</option>\r\n                        {allProjects.filter((p: any) => !importTargets.some(t => t.projectId === p.id)).map((p: any) => (\r\n                          <option key={p.id} value={p.id}>{p.name}</option>\r\n                        ))}\r\n                      </select>\r\n                      <button onClick={handleImport} disabled={importMut.isPending || importTargets.length === 0} className={BTN_PRIMARY}>\r\n                        {importMut.isPending ? <Loader2 className=\"w-3 h-3 animate-spin\" /> : <Download className=\"w-3 h-3\" />}\r\n                        Import{importTargets.length > 1 ? ` to ${importTargets.length} projects` : ''}\r\n                      </button>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center gap-1.5 flex-wrap\">\r\n                      <span className=\"text-[10px] text-[var(--gm-text-tertiary)] mr-1\">Include:</span>\r\n                      {optionItems.map(({ key, icon: Icon, label }) => (\r\n                        <button key={key} onClick={() => toggleOpt(key)}\r\n                          className={cn('flex items-center gap-1 px-2 py-1 rounded-md text-[10px] font-medium border transition-colors',\r\n                            importOpts[key]\r\n                              ? 'bg-[var(--gm-accent-primary)]/10 border-[var(--gm-accent-primary)]/30 text-[var(--gm-accent-primary)]'\r\n                              : 'bg-[var(--gm-bg-tertiary)] border-[var(--gm-border-primary)] text-[var(--gm-text-tertiary)]')}>\r\n                          <Icon className=\"w-3 h-3\" />\r\n                          {label}\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {meetingsLoading ? (\r\n                  <div className=\"flex items-center justify-center py-8\">\r\n                    <Loader2 className=\"w-5 h-5 animate-spin text-[var(--gm-text-tertiary)]\" />\r\n                    <span className=\"ml-2 text-xs text-[var(--gm-text-tertiary)]\">Loading meetings from Krisp...</span>\r\n                  </div>\r\n                ) : meetings.length === 0 ? (\r\n                  <div className=\"text-center py-8 text-[var(--gm-text-tertiary)] text-xs\">\r\n                    No meetings found for the selected date range.\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"max-h-[500px] overflow-y-auto divide-y divide-[var(--gm-border-primary)]\">\r\n                    {meetings.map((m: KrispMeeting) => {\r\n                      const isSelected = selectedMeetings.has(m.meeting_id);\r\n                      const isExpanded = expandedMeeting === m.meeting_id;\r\n                      const importedToTarget = importTargets.length > 0\r\n                        ? importTargets.every(t => m.importedTo.some(p => p.projectId === t.projectId))\r\n                        : false;\r\n\r\n                      return (\r\n                        <div key={m.meeting_id} className={cn(isSelected && 'bg-[var(--gm-accent-primary)]/5', importedToTarget && 'opacity-60')}>\r\n                          <div className=\"flex items-center gap-3 px-4 py-3\">\r\n                            <input type=\"checkbox\" checked={isSelected} onChange={() => toggleMeeting(m.meeting_id)}\r\n                              disabled={importedToTarget} className=\"rounded border-[var(--gm-border-primary)] flex-shrink-0\" />\r\n                            <button onClick={() => setExpandedMeeting(isExpanded ? null : m.meeting_id)} className=\"flex-1 min-w-0 text-left\">\r\n                              <p className=\"text-xs font-medium text-[var(--gm-text-primary)] truncate\">{m.name}</p>\r\n                              <div className=\"flex items-center gap-3 mt-0.5\">\r\n                                <span className=\"text-[10px] text-[var(--gm-text-tertiary)] flex items-center gap-1\">\r\n                                  <Calendar className=\"w-3 h-3\" />\r\n                                  {m.date ? new Date(m.date).toLocaleDateString() : '—'}\r\n                                </span>\r\n                                {m.speakers.length > 0 && (\r\n                                  <span className=\"text-[10px] text-[var(--gm-text-tertiary)] flex items-center gap-1\">\r\n                                    <User className=\"w-3 h-3\" />\r\n                                    {m.speakers.slice(0, 3).join(', ')}\r\n                                    {m.speakers.length > 3 && ` +${m.speakers.length - 3}`}\r\n                                  </span>\r\n                                )}\r\n                                {m.detailed_summary.length > 0 && <span className=\"text-[10px] text-[var(--gm-text-tertiary)]\">{m.detailed_summary.length} topics</span>}\r\n                                {m.key_points.length > 0 && <span className=\"text-[10px] text-[var(--gm-text-tertiary)]\">{m.key_points.length} key pts</span>}\r\n                                {m.action_items.length > 0 && <span className=\"text-[10px] text-[var(--gm-text-tertiary)]\">{m.action_items.length} actions</span>}\r\n                              </div>\r\n                            </button>\r\n                            <div className=\"flex items-center gap-2 flex-shrink-0\">\r\n                              {importedToTarget && (\r\n                                <span className=\"inline-flex items-center gap-0.5 text-[10px] font-bold text-emerald-500 border border-emerald-500/30 px-1.5 py-0 rounded\">\r\n                                  <Check className=\"w-3 h-3\" /> Imported\r\n                                </span>\r\n                              )}\r\n                              {m.importedTo.length > 0 && !importedToTarget && (\r\n                                <span className=\"text-[10px] border border-[var(--gm-border-primary)] px-1.5 py-0 rounded text-[var(--gm-text-tertiary)]\">\r\n                                  In {m.importedTo.map(p => p.sprintName ? `${p.projectName} → ${p.sprintName}` : p.projectName).join(', ')}\r\n                                </span>\r\n                              )}\r\n                              <button onClick={() => setExpandedMeeting(isExpanded ? null : m.meeting_id)}\r\n                                className=\"p-1 text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors\">\r\n                                {isExpanded ? <ChevronUp className=\"w-4 h-4\" /> : <ChevronDown className=\"w-4 h-4\" />}\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n\r\n                          {isExpanded && <MeetingPreview meeting={m} />}\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"flex justify-end mt-3\">\r\n              <button onClick={() => navigate('/files')}\r\n                className=\"flex items-center gap-2 text-[10px] text-[var(--gm-text-tertiary)] hover:text-[var(--gm-accent-primary)] transition-colors\">\r\n                View imported transcripts <ExternalLink className=\"w-3 h-3\" />\r\n              </button>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// ══════════════════════════════════════════════════════════════════════════════\r\n// USER SETTINGS SECTION\r\n// ══════════════════════════════════════════════════════════════════════════════\r\n\r\nfunction Toggle({ checked, onChange, disabled }: { checked: boolean; onChange: (v: boolean) => void; disabled?: boolean }) {\r\n  return (\r\n    <button onClick={() => !disabled && onChange(!checked)} disabled={disabled}\r\n      className=\"relative inline-flex h-5 w-9 shrink-0 cursor-pointer rounded-full border border-[var(--gm-border-primary)] transition-colors duration-200 disabled:opacity-50\"\r\n      style={{ backgroundColor: checked ? 'var(--color-brand-500)' : 'var(--gm-bg-tertiary)' }}>\r\n      <span className={cn('pointer-events-none inline-block h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200', checked ? 'translate-x-4' : 'translate-x-0')} />\r\n    </button>\r\n  );\r\n}\r\n\r\nfunction UserSettingsSection() {\r\n  const { user, updateProfile } = useUser();\r\n  const { currentProject, currentProjectId } = useProject();\r\n\r\n  const [theme, setTheme] = useState(() => localStorage.getItem('godmode-theme') || 'dark');\r\n  const [language, setLanguage] = useState(() => localStorage.getItem('godmode-language') || 'en');\r\n\r\n  const [availableRoles, setAvailableRoles] = useState<any[]>([]);\r\n  const [availableTimezones, setAvailableTimezones] = useState<Array<{ code: string; name: string; utc_offset: string; abbreviation: string }>>([]);\r\n  const [selectedRole, setSelectedRole] = useState('');\r\n  const [selectedTimezone, setSelectedTimezone] = useState('');\r\n\r\n  const [analytics, setAnalytics] = useState(true);\r\n  const [errorReporting, setErrorReporting] = useState(true);\r\n  const [aiData, setAiData] = useState(false);\r\n\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (user?.timezone) setSelectedTimezone(user.timezone);\r\n    if (currentProject?.user_role) setSelectedRole(currentProject.user_role);\r\n\r\n    apiClient.get<any>('/api/role-templates')\r\n      .then(res => { if (res.roles) setAvailableRoles(res.roles); })\r\n      .catch(() => {});\r\n    apiClient.get<any>('/api/timezones')\r\n      .then(res => { if (res.timezones) setAvailableTimezones(res.timezones); })\r\n      .catch(() => {});\r\n\r\n    try {\r\n      const saved = JSON.parse(localStorage.getItem('godmode-privacy') || '{}');\r\n      if (saved.analytics !== undefined) setAnalytics(saved.analytics);\r\n      if (saved.errorReporting !== undefined) setErrorReporting(saved.errorReporting);\r\n      if (saved.aiData !== undefined) setAiData(saved.aiData);\r\n    } catch { /* ignore */ }\r\n  }, [user, currentProject, currentProjectId]);\r\n\r\n  const handleSave = async () => {\r\n    setSaving(true);\r\n    try {\r\n      localStorage.setItem('godmode-theme', theme);\r\n      localStorage.setItem('godmode-language', language);\r\n      localStorage.setItem('godmode-privacy', JSON.stringify({ analytics, errorReporting, aiData }));\r\n      if (theme === 'dark') document.documentElement.classList.add('dark');\r\n      else if (theme === 'light') document.documentElement.classList.remove('dark');\r\n\r\n      if (selectedTimezone !== user?.timezone) {\r\n        await updateProfile.mutateAsync({ timezone: selectedTimezone });\r\n      }\r\n      if (currentProjectId && selectedRole !== (currentProject?.user_role || '')) {\r\n        await apiClient.put(`/api/projects/${currentProjectId}/members/${user?.id}`, { user_role: selectedRole });\r\n      }\r\n      toast.success('Settings saved');\r\n    } catch (e: any) {\r\n      toast.error(e.message || 'Failed to save settings');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const privacyToggles = [\r\n    { label: 'Analytics', desc: 'Help improve GodMode with anonymous usage data', value: analytics, set: setAnalytics },\r\n    { label: 'Error Reporting', desc: 'Automatically report errors to help fix bugs', value: errorReporting, set: setErrorReporting },\r\n    { label: 'AI Data Improvement', desc: 'Allow anonymized data to improve AI responses', value: aiData, set: setAiData },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-5\">\r\n      <SectionHeader title=\"User Settings\" subtitle=\"Appearance, role, and privacy preferences\" />\r\n\r\n      {/* Appearance */}\r\n      <div className={cn(CARD, 'p-5 space-y-4')}>\r\n        <h3 className={SECTION_TITLE}>Appearance</h3>\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className={LABEL}><Sparkles className=\"w-3 h-3\" /> Theme</label>\r\n            <select value={theme} onChange={e => setTheme(e.target.value)} className={INPUT}>\r\n              <option value=\"light\">Light</option>\r\n              <option value=\"dark\">Dark</option>\r\n              <option value=\"system\">System</option>\r\n            </select>\r\n            <p className=\"text-[10px] text-[var(--gm-text-tertiary)] mt-1\">Choose your preferred color scheme</p>\r\n          </div>\r\n          <div>\r\n            <label className={LABEL}><Languages className=\"w-3 h-3\" /> Language</label>\r\n            <select value={language} onChange={e => setLanguage(e.target.value)} className={INPUT}>\r\n              <option value=\"en\">English</option>\r\n              <option value=\"pt\">Português</option>\r\n              <option value=\"es\">Español</option>\r\n              <option value=\"fr\">Français</option>\r\n              <option value=\"de\">Deutsch</option>\r\n            </select>\r\n            <p className=\"text-[10px] text-[var(--gm-text-tertiary)] mt-1\">Interface language preference</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex items-center gap-3 p-3 rounded-lg border border-[var(--gm-accent-primary)]/20 bg-[var(--gm-accent-primary)]/5\">\r\n          <Info className=\"w-4 h-4 text-[var(--gm-accent-primary)] flex-shrink-0\" />\r\n          <p className=\"text-[10px] text-[var(--gm-text-tertiary)]\">\r\n            For <span className=\"text-[var(--gm-accent-primary)] font-medium\">LLM configuration</span> and <span className=\"text-[var(--gm-accent-primary)] font-medium\">Graph</span> settings, use the <span className=\"text-[var(--gm-accent-primary)] font-medium\">Admin</span> section.\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Profile & Role */}\r\n      <div className={cn(CARD, 'p-5 space-y-4')}>\r\n        <h3 className={SECTION_TITLE}>Role & Context</h3>\r\n        <div className=\"p-3 rounded-lg bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)]\">\r\n          <p className=\"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider font-bold mb-1\">Active Project</p>\r\n          <p className=\"text-xs font-medium text-[var(--gm-text-primary)]\">{currentProject?.name || 'No Active Project'}</p>\r\n        </div>\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n          <div>\r\n            <label className={LABEL}><Building2 className=\"w-3 h-3\" /> Project Role</label>\r\n            <select value={selectedRole} onChange={e => setSelectedRole(e.target.value)}\r\n              disabled={!currentProjectId || currentProjectId === 'default'} className={INPUT}>\r\n              <option value=\"\">Select a role...</option>\r\n              {availableRoles.filter((r: any) => r.name || r.display_name).map((r: any) => (\r\n                <option key={r.id || r.name} value={r.display_name || r.name}>{r.display_name || r.name}</option>\r\n              ))}\r\n            </select>\r\n            <p className=\"text-[10px] text-[var(--gm-text-tertiary)] mt-1\">Your role in the current project</p>\r\n          </div>\r\n          <div>\r\n            <label className={LABEL}><Clock className=\"w-3 h-3\" /> Timezone</label>\r\n            <select value={selectedTimezone} onChange={e => setSelectedTimezone(e.target.value)} className={INPUT}>\r\n              <option value=\"\">Select timezone...</option>\r\n              {availableTimezones.map(tz => (\r\n                <option key={tz.code} value={tz.code}>{tz.name} ({tz.utc_offset})</option>\r\n              ))}\r\n            </select>\r\n            <p className=\"text-[10px] text-[var(--gm-text-tertiary)] mt-1\">Used for scheduling and notifications</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Data & Privacy */}\r\n      <div className={cn(CARD, 'p-5')}>\r\n        <h3 className={cn(SECTION_TITLE, 'mb-4')}>Data & Privacy</h3>\r\n        <div className=\"space-y-1\">\r\n          {privacyToggles.map(t => (\r\n            <div key={t.label} className=\"flex items-center justify-between py-3 border-b border-[var(--gm-border-primary)] last:border-0\">\r\n              <div>\r\n                <p className=\"text-xs font-medium text-[var(--gm-text-primary)]\">{t.label}</p>\r\n                <p className=\"text-[10px] text-[var(--gm-text-tertiary)]\">{t.desc}</p>\r\n              </div>\r\n              <Toggle checked={t.value} onChange={t.set} />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Save */}\r\n      <div className={cn(CARD, 'p-4 flex justify-end')}>\r\n        <button onClick={handleSave} disabled={saving} className={BTN_PRIMARY}>\r\n          {saving ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Check className=\"w-3.5 h-3.5\" />}\r\n          {saving ? 'Saving...' : 'Save Settings'}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// ══════════════════════════════════════════════════════════════════════════════\r\n// COMPANIES SECTION (delegates to CompaniesPage)\r\n// ══════════════════════════════════════════════════════════════════════════════\r\n\r\nconst CompaniesPageLazy = lazy(() => import('./CompaniesPage'));\r\n\r\nfunction CompaniesSection() {\r\n  return (\r\n    <Suspense fallback={<div className=\"flex justify-center py-12\"><Loader2 className=\"w-6 h-6 animate-spin text-[var(--gm-accent-primary)]\" /></div>}>\r\n      <CompaniesPageLazy />\r\n    </Suspense>\r\n  );\r\n}\r\n\r\nconst ProjectsPageLazy = lazy(() => import('./ProjectsPage'));\r\n\r\nfunction ProjectsSection() {\r\n  return (\r\n    <Suspense fallback={<div className=\"flex justify-center py-12\"><Loader2 className=\"w-6 h-6 animate-spin text-[var(--gm-accent-primary)]\" /></div>}>\r\n      <ProjectsPageLazy />\r\n    </Suspense>\r\n  );\r\n}\r\n\r\nexport default ProfilePage;\r\n"],"file":"ProfilePage-CS9VYIeJ.js"}