const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CompaniesPage-CfaDLisl.js","assets/vendor-react-CZ-WyKWZ.js","assets/input-Dy89fHlR.js","assets/main-B3DZn5B_.js","assets/vendor-query-DSf7I7Ei.js","assets/vendor-ui-BS9QKitv.js","assets/vendor-supabase-Bpw_79gH.js","assets/vendor-router-D_XeKoA_.js","assets/vendor-markdown-Cu8AM8lU.js","assets/vendor-markdown-54DrP_uy.css","assets/main-B10qTZa8.css","assets/AvatarUpload-gChxksHY.js","assets/upload-C00nhlDV.js","assets/link-2-CvGSt01y.js","assets/ErrorState-to3SSPKs.js","assets/alert-dialog-Gr4VVHbM.js","assets/eye-RsgK9PvA.js","assets/pen-UIQK8jUR.js","assets/arrow-left-BUrpeDp8.js","assets/globe-BYeHHetr.js","assets/external-link-XVR2-B8g.js","assets/sparkles-D3iJUPqd.js","assets/minimize-2-DwBVqABo.js","assets/save-Dic_e7Eu.js","assets/printer-B8caXq_N.js","assets/monitor-CRPRfiU8.js","assets/key-DhTDYaIg.js","assets/circle-x-qKfRTqT4.js","assets/lightbulb-0ivikuj5.js","assets/list-checks-Bm0gBGfe.js","assets/ProjectsPage-DJjzMCZd.js","assets/star-YHn3OJCl.js","assets/play-BMZi0w5i.js","assets/user-plus-C5QYTMT3.js","assets/users-round--q5NsWjF.js","assets/grip-vertical-S1vCb_T3.js","assets/square-check-big-DQbkmKDU.js","assets/test-tube-C-LuB11X.js"])))=>i.map(i=>d[i]);
import{cg as Y,L as S,g as we,ad as Se,ac as ee,N as te,aZ as ke,ab as Ae,c as x,M as _e,aa as J,ev as ae,T as Ce,a8 as Pe,cM as Ie,cf as Te,aV as H,eu as Le,C as Me,bB as ze,ew as De,ex as Ee,ey as Ue,ez as Oe,l as Re,eA as Ke,aY as Be,aq as Fe,aX as q,X as $e,w as se,ai as Ge,G as He,H as Ve,eB as re,eC as Ye}from"./main-B3DZn5B_.js";import{r as n,j as e}from"./vendor-react-CZ-WyKWZ.js";import{t as d}from"./vendor-ui-BS9QKitv.js";import{I as Je,A as Xe}from"./AvatarUpload-gChxksHY.js";import{c as ne,u as Ze}from"./vendor-router-D_XeKoA_.js";import{c as K}from"./vendor-markdown-Cu8AM8lU.js";import{M as ie,L as le}from"./monitor-CRPRfiU8.js";import{S as ce}from"./sparkles-D3iJUPqd.js";import{L as qe}from"./link-2-CvGSt01y.js";import{G as Qe}from"./globe-BYeHHetr.js";import{K as Q}from"./key-DhTDYaIg.js";import{C as W}from"./circle-x-qKfRTqT4.js";import{E as V}from"./external-link-XVR2-B8g.js";import{L as oe}from"./lightbulb-0ivikuj5.js";import{L as de}from"./list-checks-Bm0gBGfe.js";const We=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]],et=K("at-sign",We);const tt=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],me=K("headphones",tt);const at=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],st=K("lock",at);const rt=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],X=K("text-align-start",rt);const nt=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],it=K("type",nt),C="rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-[var(--shadow-sm)] transition-all duration-200",f="w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-placeholder)] focus:outline-none focus:border-[var(--gm-border-focus)] focus:shadow-[var(--shadow-focus)] transition-all duration-150",R="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] hover:bg-[var(--gm-interactive-primary-hover)] shadow-sm transition-all duration-150 disabled:opacity-50",xe="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] hover:bg-[var(--gm-interactive-secondary-hover)] border border-[var(--gm-border-primary)] transition-all duration-150",lt="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--color-danger-500)] text-white hover:bg-[var(--color-danger-600)] shadow-sm transition-all duration-150 disabled:opacity-50",T="text-[10px] font-bold text-[var(--gm-accent-primary)] uppercase tracking-[0.1em]",N="text-[10px] font-bold text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-1 flex items-center gap-1.5",ct=[{id:"general",label:"General",icon:ee},{id:"security",label:"Security",icon:st},{id:"sessions",label:"Sessions",icon:ie},{id:"settings",label:"User Settings",icon:ce},{id:"companies",label:"Companies",icon:te},{id:"projects",label:"Projects",icon:ke},{id:"integrations",label:"Integrations",icon:qe}];function B({title:a,subtitle:m}){return e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-bold text-[var(--gm-text-primary)]",children:a}),m&&e.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)] mt-0.5",children:m})]})}const ot=()=>{const{user:a,isLoading:m}=Y(),[p]=ne(),i=p.get("tab"),[l,y]=n.useState(i&&["general","security","sessions","integrations","companies","projects","settings"].includes(i)?i:"general");if(m)return e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx(S,{className:"h-6 w-6 animate-spin text-[var(--gm-accent-primary)]"})});const r=we(a?.display_name||a?.email||"");return e.jsxs("div",{className:"flex h-full",children:[e.jsxs("div",{className:"w-48 shrink-0 border-r border-[var(--gm-border-primary)] bg-[var(--gm-bg-primary)] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center gap-2.5 px-4 py-4 border-b border-[var(--gm-border-primary)]",children:[Se(a?.avatar_url)?e.jsx("img",{src:a.avatar_url,alt:a?.display_name||"",className:"w-7 h-7 rounded-full object-cover",onError:o=>{o.target.style.display="none"}}):e.jsx("div",{className:"w-7 h-7 rounded-full bg-[var(--gm-interactive-primary)]/10 flex items-center justify-center",children:e.jsx("span",{className:"text-[10px] font-bold text-[var(--gm-accent-primary)]",children:r})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("span",{className:"text-sm font-bold text-[var(--gm-accent-primary)]",children:"Profile"}),e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] truncate",children:a?.email})]})]}),e.jsx("nav",{className:"py-2",children:ct.map(o=>{const k=o.icon,b=l===o.id;return e.jsxs("button",{onClick:()=>y(o.id),className:x("w-full flex items-center gap-2.5 px-4 py-2 text-xs transition-colors",b?"text-[var(--gm-accent-primary)] bg-[var(--gm-surface-hover)] font-semibold":"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] hover:bg-[var(--gm-surface-hover)]"),children:[e.jsx(k,{className:"w-3.5 h-3.5 shrink-0"}),e.jsx("span",{className:"flex-1 text-left",children:o.label}),b&&e.jsx(Ae,{className:"w-3 h-3 shrink-0"})]},o.id)})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[l==="general"&&e.jsx(dt,{}),l==="security"&&e.jsx(mt,{}),l==="sessions"&&e.jsx(xt,{}),l==="settings"&&e.jsx(ht,{}),l==="companies"&&e.jsx(jt,{}),l==="projects"&&e.jsx(ft,{}),l==="integrations"&&e.jsx(gt,{})]})]})};function dt(){const{user:a,updateProfile:m,uploadAvatar:p,deleteAvatar:i}=Y(),[l,y]=n.useState(""),[r,o]=n.useState(""),[k,b]=n.useState(""),[j,v]=n.useState(""),[w,L]=n.useState("Europe/Lisbon"),[P,E]=n.useState("en"),[A,M]=n.useState(!1);n.useEffect(()=>{a&&(y(a.username||""),o(a.display_name||""),v(a.avatar_url||""),L(a.timezone||"Europe/Lisbon"))},[a]);const z=async()=>{if(l&&!/^[a-zA-Z0-9_]{3,30}$/.test(l)){d.error("Username must be 3-30 characters, alphanumeric and underscores only");return}if(r&&r.trim().length<2){d.error("Display name must be at least 2 characters");return}M(!0);try{await m.mutateAsync({username:l,display_name:r,avatar_url:j||void 0,timezone:w}),d.success("Profile updated")}catch(h){d.error(h.message||"Failed to update profile")}finally{M(!1)}};return e.jsxs("div",{className:"space-y-5",children:[e.jsx(B,{title:"General",subtitle:"Manage your account information and preferences"}),e.jsxs("div",{className:x(C,"p-5 space-y-5"),children:[e.jsx("h3",{className:T,children:"Account Information"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:N,children:[e.jsx(_e,{className:"w-3 h-3"})," Email"]}),e.jsx("input",{value:a?.email||"",readOnly:!0,className:x(f,"opacity-60 cursor-not-allowed")}),e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:"Email cannot be changed"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:N,children:[e.jsx(et,{className:"w-3 h-3"})," Username"]}),e.jsx("input",{value:l,onChange:h=>y(h.target.value),className:f})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:N,children:[e.jsx(it,{className:"w-3 h-3"})," Display Name"]}),e.jsx("input",{value:r,onChange:h=>o(h.target.value),className:f})]}),e.jsxs("div",{children:[e.jsxs("label",{className:N,children:[e.jsx(X,{className:"w-3 h-3"})," Bio"]}),e.jsx("textarea",{value:k,onChange:h=>b(h.target.value),placeholder:"Tell us a bit about yourself",rows:3,className:x(f,"resize-y")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:N,children:[e.jsx(Je,{className:"w-3 h-3"})," Avatar"]}),e.jsx("div",{className:"mt-2",children:e.jsx(Xe,{currentUrl:j,name:r||l||a?.email||"",onUpload:async h=>{const _=await p.mutateAsync(h);return v(_),d.success("Avatar uploaded"),_},onUrlChange:h=>{v(h),d.info("URL set — click Save to apply")},onRemove:async()=>{await i.mutateAsync(),v(""),d.success("Avatar removed")},size:"lg"})})]})]}),e.jsxs("div",{className:x(C,"p-5 space-y-4"),children:[e.jsx("h3",{className:T,children:"Preferences"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:N,children:[e.jsx(Qe,{className:"w-3 h-3"})," Timezone"]}),e.jsxs("select",{value:w,onChange:h=>L(h.target.value),className:f,children:[e.jsx("option",{value:"Europe/Lisbon",children:"Lisbon, Portugal (+00:00)"}),e.jsx("option",{value:"Europe/London",children:"London, UK (+00:00)"}),e.jsx("option",{value:"Europe/Paris",children:"Paris, France (+01:00)"}),e.jsx("option",{value:"Europe/Berlin",children:"Berlin, Germany (+01:00)"}),e.jsx("option",{value:"America/New_York",children:"New York, USA (-05:00)"}),e.jsx("option",{value:"America/Los_Angeles",children:"Los Angeles, USA (-08:00)"}),e.jsx("option",{value:"Asia/Tokyo",children:"Tokyo, Japan (+09:00)"}),e.jsx("option",{value:"Australia/Sydney",children:"Sydney, Australia (+11:00)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:N,children:[e.jsx(le,{className:"w-3 h-3"})," Language"]}),e.jsxs("select",{value:P,onChange:h=>E(h.target.value),className:f,children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"pt",children:"Português"}),e.jsx("option",{value:"es",children:"Español"}),e.jsx("option",{value:"fr",children:"Français"}),e.jsx("option",{value:"de",children:"Deutsch"})]})]})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{onClick:z,disabled:A,className:R,children:[A?e.jsx(S,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(J,{className:"w-3.5 h-3.5"}),A?"Saving...":"Save Changes"]})})]})]})}function mt(){const{resetPassword:a}=ae(),[m,p]=n.useState(""),[i,l]=n.useState(""),[y,r]=n.useState(""),[o,k]=n.useState(!1),b=async()=>{if(!i||!y){d.error("Please fill in all password fields");return}if(i!==y){d.error("New passwords do not match");return}if(i.length<6){d.error("Password must be at least 6 characters");return}k(!0);try{await a(i),d.success("Password updated successfully"),p(""),l(""),r("")}catch(v){d.error(v.message||"Failed to update password")}finally{k(!1)}},j=()=>{d.error("Account deletion requires contacting an administrator")};return e.jsxs("div",{className:"space-y-5",children:[e.jsx(B,{title:"Security",subtitle:"Manage your password and account security"}),e.jsxs("div",{className:x(C,"p-5 space-y-4"),children:[e.jsx("h3",{className:T,children:"Change Password"}),e.jsxs("div",{children:[e.jsxs("label",{className:N,children:[e.jsx(Q,{className:"w-3 h-3"})," Current Password"]}),e.jsx("input",{type:"password",value:m,onChange:v=>p(v.target.value),className:f})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:N,children:"New Password"}),e.jsx("input",{type:"password",value:i,onChange:v=>l(v.target.value),className:f})]}),e.jsxs("div",{children:[e.jsx("label",{className:N,children:"Confirm Password"}),e.jsx("input",{type:"password",value:y,onChange:v=>r(v.target.value),className:f})]})]}),e.jsx("p",{className:"text-[10px] text-[var(--gm-accent-primary)]",children:"Minimum 6 characters"}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{onClick:b,disabled:o,className:R,children:[o?e.jsx(S,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(Q,{className:"w-3.5 h-3.5"}),o?"Updating...":"Update Password"]})})]}),e.jsxs("div",{className:"rounded-xl border border-[var(--color-danger-500)]/30 bg-[var(--color-danger-500)]/5 p-5",children:[e.jsxs("h3",{className:"text-xs font-bold text-[var(--color-danger-500)] mb-1 flex items-center gap-2",children:[e.jsx(Ce,{className:"w-3.5 h-3.5"})," Danger Zone"]}),e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mb-3",children:"Permanently delete your account and all associated data. This action cannot be undone."}),e.jsxs("button",{onClick:j,className:lt,children:[e.jsx(Pe,{className:"w-3.5 h-3.5"})," Delete Account"]})]})]})}function xt(){const{logout:a}=ae(),m=[{id:"1",userAgent:navigator.userAgent,ip:"::1",lastActive:"Just now",current:!0}],p=async()=>{try{await a(),d.success("All other sessions signed out")}catch{d.error("Failed to sign out other sessions")}};return e.jsxs("div",{className:"space-y-5",children:[e.jsx(B,{title:"Sessions",subtitle:"Active login sessions for your account"}),e.jsxs("div",{className:x(C,"p-5 space-y-4"),children:[e.jsx("h3",{className:T,children:"Active Sessions"}),e.jsx("div",{className:"space-y-3",children:m.map(i=>e.jsxs("div",{className:x("flex items-center gap-4 p-4 rounded-lg border",i.current?"border-[var(--gm-accent-primary)]/30 bg-[var(--gm-accent-primary)]/5":"border-[var(--gm-border-primary)]"),children:[e.jsx(ie,{className:"w-7 h-7 text-[var(--gm-text-tertiary)] flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs text-[var(--gm-text-primary)] break-all",children:i.userAgent}),e.jsxs("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:[i.ip," • Last active: ",i.lastActive]})]}),i.current&&e.jsx("span",{className:"text-[10px] font-bold text-[var(--gm-accent-primary)] bg-[var(--gm-accent-primary)]/10 px-2 py-0.5 rounded-full flex-shrink-0",children:"Current"})]},i.id))}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{onClick:p,className:xe,children:[e.jsx(Ie,{className:"w-3.5 h-3.5"})," Sign out all other sessions"]})})]})]})}function pt({meeting:a}){const{data:m,isLoading:p}=Ye(a.meeting_id),[i,l]=n.useState("outline"),y=[{id:"transcript",label:"Transcript",icon:se,available:!0},{id:"outline",label:"Outline",icon:X,available:a.detailed_summary.length>0},{id:"keypoints",label:"Key Points",icon:oe,available:a.key_points.length>0},{id:"actions",label:"Actions",icon:de,available:a.action_items.length>0},{id:"audio",label:"Audio",icon:me,available:!0}];return e.jsxs("div",{className:"border-t border-[var(--gm-border-primary)]/50 mx-4 mb-2",children:[e.jsx("div",{className:"flex gap-0.5 pt-2 pb-1 overflow-x-auto",children:y.map(({id:r,label:o,icon:k,available:b})=>e.jsxs("button",{onClick:()=>l(r),className:x("flex items-center gap-1 px-2.5 py-1.5 rounded-md text-[10px] font-medium whitespace-nowrap transition-colors",i===r?"bg-[var(--gm-accent-primary)]/10 text-[var(--gm-accent-primary)]":b?"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] hover:bg-[var(--gm-surface-hover)]":"text-[var(--gm-text-tertiary)]/40 cursor-default"),children:[e.jsx(k,{className:"w-3 h-3"}),o,r==="actions"&&a.action_items.length>0&&e.jsxs("span",{className:"ml-0.5 text-[9px] opacity-60",children:["(",a.action_items.length,")"]}),r==="keypoints"&&a.key_points.length>0&&e.jsxs("span",{className:"ml-0.5 text-[9px] opacity-60",children:["(",a.key_points.length,")"]}),r==="outline"&&a.detailed_summary.length>0&&e.jsxs("span",{className:"ml-0.5 text-[9px] opacity-60",children:["(",a.detailed_summary.length,")"]})]},r))}),e.jsxs("div",{className:"pb-3 pt-1",children:[i==="transcript"&&e.jsx("div",{children:p?e.jsxs("div",{className:"flex items-center gap-2 py-4 justify-center",children:[e.jsx(S,{className:"w-4 h-4 animate-spin text-[var(--gm-text-tertiary)]"}),e.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:"Fetching transcript..."})]}):m?.transcript?e.jsx("pre",{className:"text-[10px] text-[var(--gm-text-secondary)] whitespace-pre-wrap max-h-[200px] overflow-y-auto bg-[var(--gm-bg-tertiary)] rounded-md p-3 font-mono leading-relaxed",children:m.transcript}):e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] italic py-2",children:m?.error||"No transcript content available."})}),i==="outline"&&e.jsx("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:a.detailed_summary.length>0?a.detailed_summary.map((r,o)=>e.jsxs("div",{className:"text-[10px]",children:[e.jsx("span",{className:"font-medium text-[var(--gm-text-primary)]",children:r.title}),e.jsx("p",{className:"text-[var(--gm-text-tertiary)] mt-0.5",children:r.description})]},o)):e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] italic",children:"No outline available."})}),i==="keypoints"&&e.jsx("ul",{className:"space-y-1.5 max-h-[200px] overflow-y-auto",children:a.key_points.length>0?a.key_points.map((r,o)=>e.jsxs("li",{className:"text-[10px] text-[var(--gm-text-tertiary)] flex gap-1.5",children:[e.jsx("span",{className:"text-[var(--gm-accent-primary)] mt-0.5 flex-shrink-0",children:"•"}),e.jsx("span",{children:r.replace(/\{\{.*?\}\}/g,"").trim()})]},o)):e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] italic",children:"No key points available."})}),i==="actions"&&e.jsx("ul",{className:"space-y-1.5 max-h-[200px] overflow-y-auto",children:a.action_items.length>0?a.action_items.map((r,o)=>e.jsxs("li",{className:"text-[10px] flex items-start gap-1.5",children:[e.jsx("span",{className:x("mt-0.5 flex-shrink-0",r.completed?"text-emerald-500":"text-[var(--gm-text-tertiary)]"),children:r.completed?"✓":"○"}),e.jsx("span",{className:"text-[var(--gm-text-primary)] flex-1",children:r.title}),r.assignee&&e.jsx("span",{className:"text-[9px] px-1.5 py-0 rounded border border-[var(--gm-border-primary)] text-[var(--gm-text-tertiary)] flex-shrink-0",children:r.assignee})]},o)):e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] italic",children:"No action items available."})}),i==="audio"&&e.jsx("div",{children:p?e.jsxs("div",{className:"flex items-center gap-2 py-4 justify-center",children:[e.jsx(S,{className:"w-4 h-4 animate-spin text-[var(--gm-text-tertiary)]"}),e.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:"Checking for audio..."})]}):m?.audioUrl?e.jsxs("div",{className:"space-y-2",children:[e.jsx("audio",{controls:!0,className:"w-full h-8",preload:"none",children:e.jsx("source",{src:m.audioUrl,type:"audio/mpeg"})}),e.jsxs("a",{href:m.audioUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-[10px] text-[var(--gm-accent-primary)] hover:underline",children:[e.jsx(V,{className:"w-3 h-3"})," Open audio file"]})]}):e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] italic py-2",children:"No audio recording available for this meeting."})})]})]})}function gt(){const a=Ze(),[m,p]=ne(),{data:i=[]}=ze(),[l,y]=n.useState(!1),[r,o]=n.useState(new Set),[k,b]=n.useState(null),[j,v]=n.useState([]),[w,L]=n.useState({transcript:!0,keyPoints:!0,actionItems:!0,outline:!0,audio:!0}),[P,E]=n.useState(()=>{const t=new Date;return t.setDate(t.getDate()-30),t.toISOString().split("T")[0]}),[A,M]=n.useState(()=>new Date().toISOString().split("T")[0]),{data:z,isLoading:h}=De(),_=Ee(),U=Ue(),D=Oe(),{data:O}=Re(),F=O?.sprints??(Array.isArray(O)?O:[]),{data:$,isLoading:s}=Ke({limit:50,after:P||void 0,before:A||void 0,enabled:l&&!!z?.connected});n.useEffect(()=>{const t=m.get("krisp_connected"),c=m.get("krisp_error");t==="true"?(d.success("Krisp connected successfully!"),p({},{replace:!0})):c&&(d.error(`Krisp connection failed: ${decodeURIComponent(c)}`),p({},{replace:!0}))},[m,p]);const pe=async()=>{try{const t=await _.mutateAsync();t.url&&(window.location.href=t.url)}catch{d.error("Failed to start Krisp authorization")}},ge=async()=>{if(confirm("Disconnect Krisp? You can reconnect anytime."))try{await U.mutateAsync(),y(!1),d.success("Krisp disconnected")}catch{d.error("Failed to disconnect")}},ue=t=>{o(c=>{const u=new Set(c);return u.has(t)?u.delete(t):u.add(t),u})},he=t=>{L(c=>({...c,[t]:!c[t]}))},ve=t=>{!t||j.some(c=>c.projectId===t)||v(c=>[...c,{projectId:t,sprintId:""}])},je=t=>{v(c=>c.filter(u=>u.projectId!==t))},ye=(t,c)=>{v(u=>u.map(g=>g.projectId===t?{...g,sprintId:c}:g))},fe=async()=>{if(r.size===0)return d.error("Select at least one meeting");if(j.length===0)return d.error("Add at least one target project");if(!w.transcript&&!w.keyPoints&&!w.actionItems&&!w.outline)return d.error("Select at least one content type to import");let t=0,c=0;for(const u of j)try{const g=await D.mutateAsync({meetingIds:Array.from(r),projectId:u.projectId,importOptions:{...w,sprint_id:u.sprintId||null}});t+=g.succeeded,c+=g.failed}catch{c+=r.size}if(t>0){const u=j.map(g=>i.find(I=>I.id===g.projectId)?.name).filter(Boolean).join(", ");d.success(`Imported ${t} file(s) to ${u}`),o(new Set),v([])}c>0&&d.error(`${c} import(s) failed`)},Z=z?.connected===!0,G=$?.meetings||[],Ne=[{key:"transcript",icon:se,label:"Transcript"},{key:"keyPoints",icon:oe,label:"Key Points"},{key:"actionItems",icon:de,label:"Action Items"},{key:"outline",icon:X,label:"Outline"},{key:"audio",icon:me,label:"Audio"}];return e.jsxs("div",{className:"space-y-5",children:[e.jsx(B,{title:"Integrations",subtitle:"Connect external services to your account"}),e.jsxs("div",{className:x(C,"p-5"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:x(T,"flex items-center gap-2"),children:[e.jsx(Be,{className:"w-3.5 h-3.5"})," Krisp AI Meeting Assistant"]}),e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:"Connect your Krisp account via OAuth to import transcripts and recordings."})]}),h?e.jsx(S,{className:"w-4 h-4 animate-spin text-[var(--gm-text-tertiary)]"}):Z?e.jsxs("span",{className:"inline-flex items-center gap-1 text-[10px] font-bold text-emerald-500 bg-emerald-500/10 border border-emerald-500/30 px-2 py-0.5 rounded-full",children:[e.jsx(Fe,{className:"w-3 h-3"})," Connected"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 text-[10px] font-bold text-[var(--gm-text-tertiary)] border border-[var(--gm-border-primary)] px-2 py-0.5 rounded-full",children:[e.jsx(W,{className:"w-3 h-3"})," Not connected"]})]}),Z?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>y(!l),className:x(R,"flex-1 justify-center py-2"),children:[e.jsx(q,{className:"w-3.5 h-3.5"}),l?"Hide Meetings":"Browse & Import Meetings"]}),e.jsxs("button",{onClick:ge,disabled:U.isPending,className:x(xe,"hover:text-[var(--color-danger-500)] hover:border-[var(--color-danger-500)]/30"),children:[U.isPending?e.jsx(S,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(W,{className:"w-3.5 h-3.5"}),"Disconnect"]})]}),l&&e.jsxs("div",{className:"border border-[var(--gm-border-primary)] rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-[var(--gm-bg-tertiary)] border-b border-[var(--gm-border-primary)]",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-[10px] text-[var(--gm-text-tertiary)] whitespace-nowrap uppercase tracking-wider font-bold",children:"From"}),e.jsx("input",{type:"date",value:P,onChange:t=>E(t.target.value),className:"px-2 py-1 text-xs rounded-md border border-[var(--gm-border-primary)] bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-primary)]"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-[10px] text-[var(--gm-text-tertiary)] whitespace-nowrap uppercase tracking-wider font-bold",children:"To"}),e.jsx("input",{type:"date",value:A,onChange:t=>M(t.target.value),className:"px-2 py-1 text-xs rounded-md border border-[var(--gm-border-primary)] bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-primary)]"})]}),e.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] ml-auto",children:[G.length," meeting(s)"]})]}),r.size>0&&e.jsxs("div",{className:"px-4 py-3 bg-[var(--gm-accent-primary)]/5 border-b border-[var(--gm-border-primary)] space-y-2.5",children:[e.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:e.jsxs("span",{className:"text-xs text-[var(--gm-text-primary)] font-medium whitespace-nowrap",children:[r.size," selected → Import to:"]})}),j.map(t=>{const c=i.find(g=>g.id===t.projectId),u=F.filter(g=>g.project_id===t.projectId&&g.status!=="completed");return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium text-[var(--gm-text-primary)] bg-[var(--gm-bg-tertiary)] px-2 py-1 rounded-md border border-[var(--gm-border-primary)] truncate max-w-[180px]",children:c?.name||t.projectId}),e.jsxs("select",{value:t.sprintId,onChange:g=>ye(t.projectId,g.target.value),className:x(f,"w-44"),children:[e.jsx("option",{value:"",children:"No sprint"}),u.map(g=>e.jsx("option",{value:g.id,children:g.name},g.id))]}),e.jsx("button",{onClick:()=>je(t.projectId),className:"p-1 text-[var(--gm-text-tertiary)] hover:text-red-400 transition-colors",title:"Remove",children:e.jsx($e,{className:"w-3.5 h-3.5"})})]},t.projectId)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:"",onChange:t=>{ve(t.target.value),t.target.value=""},className:x(f,"flex-1"),children:[e.jsx("option",{value:"",children:"+ Add project..."}),i.filter(t=>!j.some(c=>c.projectId===t.id)).map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsxs("button",{onClick:fe,disabled:D.isPending||j.length===0,className:R,children:[D.isPending?e.jsx(S,{className:"w-3 h-3 animate-spin"}):e.jsx(q,{className:"w-3 h-3"}),"Import",j.length>1?` to ${j.length} projects`:""]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[e.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] mr-1",children:"Include:"}),Ne.map(({key:t,icon:c,label:u})=>e.jsxs("button",{onClick:()=>he(t),className:x("flex items-center gap-1 px-2 py-1 rounded-md text-[10px] font-medium border transition-colors",w[t]?"bg-[var(--gm-accent-primary)]/10 border-[var(--gm-accent-primary)]/30 text-[var(--gm-accent-primary)]":"bg-[var(--gm-bg-tertiary)] border-[var(--gm-border-primary)] text-[var(--gm-text-tertiary)]"),children:[e.jsx(c,{className:"w-3 h-3"}),u]},t))]})]}),s?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(S,{className:"w-5 h-5 animate-spin text-[var(--gm-text-tertiary)]"}),e.jsx("span",{className:"ml-2 text-xs text-[var(--gm-text-tertiary)]",children:"Loading meetings from Krisp..."})]}):G.length===0?e.jsx("div",{className:"text-center py-8 text-[var(--gm-text-tertiary)] text-xs",children:"No meetings found for the selected date range."}):e.jsx("div",{className:"max-h-[500px] overflow-y-auto divide-y divide-[var(--gm-border-primary)]",children:G.map(t=>{const c=r.has(t.meeting_id),u=k===t.meeting_id,g=j.length>0?j.every(I=>t.importedTo.some(be=>be.projectId===I.projectId)):!1;return e.jsxs("div",{className:x(c&&"bg-[var(--gm-accent-primary)]/5",g&&"opacity-60"),children:[e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:()=>ue(t.meeting_id),disabled:g,className:"rounded border-[var(--gm-border-primary)] flex-shrink-0"}),e.jsxs("button",{onClick:()=>b(u?null:t.meeting_id),className:"flex-1 min-w-0 text-left",children:[e.jsx("p",{className:"text-xs font-medium text-[var(--gm-text-primary)] truncate",children:t.name}),e.jsxs("div",{className:"flex items-center gap-3 mt-0.5",children:[e.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] flex items-center gap-1",children:[e.jsx(Ge,{className:"w-3 h-3"}),t.date?new Date(t.date).toLocaleDateString():"—"]}),t.speakers.length>0&&e.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] flex items-center gap-1",children:[e.jsx(ee,{className:"w-3 h-3"}),t.speakers.slice(0,3).join(", "),t.speakers.length>3&&` +${t.speakers.length-3}`]}),t.detailed_summary.length>0&&e.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:[t.detailed_summary.length," topics"]}),t.key_points.length>0&&e.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:[t.key_points.length," key pts"]}),t.action_items.length>0&&e.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:[t.action_items.length," actions"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[g&&e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[10px] font-bold text-emerald-500 border border-emerald-500/30 px-1.5 py-0 rounded",children:[e.jsx(J,{className:"w-3 h-3"})," Imported"]}),t.importedTo.length>0&&!g&&e.jsxs("span",{className:"text-[10px] border border-[var(--gm-border-primary)] px-1.5 py-0 rounded text-[var(--gm-text-tertiary)]",children:["In ",t.importedTo.map(I=>I.sprintName?`${I.projectName} → ${I.sprintName}`:I.projectName).join(", ")]}),e.jsx("button",{onClick:()=>b(u?null:t.meeting_id),className:"p-1 text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors",children:u?e.jsx(He,{className:"w-4 h-4"}):e.jsx(Ve,{className:"w-4 h-4"})})]})]}),u&&e.jsx(pt,{meeting:t})]},t.meeting_id)})})]}),e.jsx("div",{className:"flex justify-end mt-3",children:e.jsxs("button",{onClick:()=>a("/files"),className:"flex items-center gap-2 text-[10px] text-[var(--gm-text-tertiary)] hover:text-[var(--gm-accent-primary)] transition-colors",children:["View imported transcripts ",e.jsx(V,{className:"w-3 h-3"})]})})]}):e.jsxs("button",{onClick:pe,disabled:_.isPending,className:x(R,"w-full justify-center py-2.5"),children:[_.isPending?e.jsx(S,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(V,{className:"w-3.5 h-3.5"}),"Connect Krisp Account"]})]})]})}function ut({checked:a,onChange:m,disabled:p}){return e.jsx("button",{onClick:()=>!p&&m(!a),disabled:p,className:"relative inline-flex h-5 w-9 shrink-0 cursor-pointer rounded-full border border-[var(--gm-border-primary)] transition-colors duration-200 disabled:opacity-50",style:{backgroundColor:a?"var(--color-brand-500)":"var(--gm-bg-tertiary)"},children:e.jsx("span",{className:x("pointer-events-none inline-block h-4 w-4 rounded-full bg-white shadow-sm transition-transform duration-200",a?"translate-x-4":"translate-x-0")})})}function ht(){const{user:a,updateProfile:m}=Y(),{currentProject:p,currentProjectId:i}=Te(),[l,y]=n.useState(()=>localStorage.getItem("godmode-theme")||"dark"),[r,o]=n.useState(()=>localStorage.getItem("godmode-language")||"en"),[k,b]=n.useState([]),[j,v]=n.useState([]),[w,L]=n.useState(""),[P,E]=n.useState(""),[A,M]=n.useState(!0),[z,h]=n.useState(!0),[_,U]=n.useState(!1),[D,O]=n.useState(!1);n.useEffect(()=>{a?.timezone&&E(a.timezone),p?.user_role&&L(p.user_role),H.get("/api/role-templates").then(s=>{s.roles&&b(s.roles)}).catch(()=>{}),H.get("/api/timezones").then(s=>{s.timezones&&v(s.timezones)}).catch(()=>{});try{const s=JSON.parse(localStorage.getItem("godmode-privacy")||"{}");s.analytics!==void 0&&M(s.analytics),s.errorReporting!==void 0&&h(s.errorReporting),s.aiData!==void 0&&U(s.aiData)}catch{}},[a,p,i]);const F=async()=>{O(!0);try{localStorage.setItem("godmode-theme",l),localStorage.setItem("godmode-language",r),localStorage.setItem("godmode-privacy",JSON.stringify({analytics:A,errorReporting:z,aiData:_})),l==="dark"?document.documentElement.classList.add("dark"):l==="light"&&document.documentElement.classList.remove("dark"),P!==a?.timezone&&await m.mutateAsync({timezone:P}),i&&w!==(p?.user_role||"")&&await H.put(`/api/projects/${i}/members/${a?.id}`,{user_role:w}),d.success("Settings saved")}catch(s){d.error(s.message||"Failed to save settings")}finally{O(!1)}},$=[{label:"Analytics",desc:"Help improve GodMode with anonymous usage data",value:A,set:M},{label:"Error Reporting",desc:"Automatically report errors to help fix bugs",value:z,set:h},{label:"AI Data Improvement",desc:"Allow anonymized data to improve AI responses",value:_,set:U}];return e.jsxs("div",{className:"space-y-5",children:[e.jsx(B,{title:"User Settings",subtitle:"Appearance, role, and privacy preferences"}),e.jsxs("div",{className:x(C,"p-5 space-y-4"),children:[e.jsx("h3",{className:T,children:"Appearance"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:N,children:[e.jsx(ce,{className:"w-3 h-3"})," Theme"]}),e.jsxs("select",{value:l,onChange:s=>y(s.target.value),className:f,children:[e.jsx("option",{value:"light",children:"Light"}),e.jsx("option",{value:"dark",children:"Dark"}),e.jsx("option",{value:"system",children:"System"})]}),e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:"Choose your preferred color scheme"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:N,children:[e.jsx(le,{className:"w-3 h-3"})," Language"]}),e.jsxs("select",{value:r,onChange:s=>o(s.target.value),className:f,children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"pt",children:"Português"}),e.jsx("option",{value:"es",children:"Español"}),e.jsx("option",{value:"fr",children:"Français"}),e.jsx("option",{value:"de",children:"Deutsch"})]}),e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:"Interface language preference"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-[var(--gm-accent-primary)]/20 bg-[var(--gm-accent-primary)]/5",children:[e.jsx(Le,{className:"w-4 h-4 text-[var(--gm-accent-primary)] flex-shrink-0"}),e.jsxs("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:["For ",e.jsx("span",{className:"text-[var(--gm-accent-primary)] font-medium",children:"LLM configuration"})," and ",e.jsx("span",{className:"text-[var(--gm-accent-primary)] font-medium",children:"Graph"})," settings, use the ",e.jsx("span",{className:"text-[var(--gm-accent-primary)] font-medium",children:"Admin"})," section."]})]})]}),e.jsxs("div",{className:x(C,"p-5 space-y-4"),children:[e.jsx("h3",{className:T,children:"Role & Context"}),e.jsxs("div",{className:"p-3 rounded-lg bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)]",children:[e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider font-bold mb-1",children:"Active Project"}),e.jsx("p",{className:"text-xs font-medium text-[var(--gm-text-primary)]",children:p?.name||"No Active Project"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:N,children:[e.jsx(te,{className:"w-3 h-3"})," Project Role"]}),e.jsxs("select",{value:w,onChange:s=>L(s.target.value),disabled:!i||i==="default",className:f,children:[e.jsx("option",{value:"",children:"Select a role..."}),k.filter(s=>s.name||s.display_name).map(s=>e.jsx("option",{value:s.display_name||s.name,children:s.display_name||s.name},s.id||s.name))]}),e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:"Your role in the current project"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:N,children:[e.jsx(Me,{className:"w-3 h-3"})," Timezone"]}),e.jsxs("select",{value:P,onChange:s=>E(s.target.value),className:f,children:[e.jsx("option",{value:"",children:"Select timezone..."}),j.map(s=>e.jsxs("option",{value:s.code,children:[s.name," (",s.utc_offset,")"]},s.code))]}),e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] mt-1",children:"Used for scheduling and notifications"})]})]})]}),e.jsxs("div",{className:x(C,"p-5"),children:[e.jsx("h3",{className:x(T,"mb-4"),children:"Data & Privacy"}),e.jsx("div",{className:"space-y-1",children:$.map(s=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-[var(--gm-border-primary)] last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-[var(--gm-text-primary)]",children:s.label}),e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:s.desc})]}),e.jsx(ut,{checked:s.value,onChange:s.set})]},s.label))})]}),e.jsx("div",{className:x(C,"p-4 flex justify-end"),children:e.jsxs("button",{onClick:F,disabled:D,className:R,children:[D?e.jsx(S,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(J,{className:"w-3.5 h-3.5"}),D?"Saving...":"Save Settings"]})})]})}const vt=n.lazy(()=>re(()=>import("./CompaniesPage-CfaDLisl.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29])));function jt(){return e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(S,{className:"w-6 h-6 animate-spin text-[var(--gm-accent-primary)]"})}),children:e.jsx(vt,{})})}const yt=n.lazy(()=>re(()=>import("./ProjectsPage-DJjzMCZd.js"),__vite__mapDeps([30,1,5,6,3,4,7,8,9,10,2,15,12,31,32,17,18,33,34,26,35,13,36,37,21])));function ft(){return e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(S,{className:"w-6 h-6 animate-spin text-[var(--gm-accent-primary)]"})}),children:e.jsx(yt,{})})}const Et=Object.freeze(Object.defineProperty({__proto__:null,default:ot},Symbol.toStringTag,{value:"Module"}));export{Et as P,it as T};
//# sourceMappingURL=ProfilePage-CS9VYIeJ.js.map
