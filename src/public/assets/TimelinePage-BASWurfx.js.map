{"version":3,"file":"TimelinePage-BASWurfx.js","sources":["../../../node_modules/lucide-react/dist/esm/icons/arrow-up.js","../../../node_modules/lucide-react/dist/esm/icons/layout-list.js","../../../node_modules/lucide-react/dist/esm/icons/rows-3.js","../../frontend/src/pages/TimelinePage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m5 12 7-7 7 7\", key: \"hav0vg\" }],\n  [\"path\", { d: \"M12 19V5\", key: \"x0mq9r\" }]\n];\nconst ArrowUp = createLucideIcon(\"arrow-up\", __iconNode);\n\nexport { __iconNode, ArrowUp as default };\n//# sourceMappingURL=arrow-up.js.map\n","/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"7\", height: \"7\", x: \"3\", y: \"3\", rx: \"1\", key: \"1g98yp\" }],\n  [\"rect\", { width: \"7\", height: \"7\", x: \"3\", y: \"14\", rx: \"1\", key: \"1bb6yr\" }],\n  [\"path\", { d: \"M14 4h7\", key: \"3xa0d5\" }],\n  [\"path\", { d: \"M14 9h7\", key: \"1icrd9\" }],\n  [\"path\", { d: \"M14 15h7\", key: \"1mj8o2\" }],\n  [\"path\", { d: \"M14 20h7\", key: \"11slyb\" }]\n];\nconst LayoutList = createLucideIcon(\"layout-list\", __iconNode);\n\nexport { __iconNode, LayoutList as default };\n//# sourceMappingURL=layout-list.js.map\n","/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }],\n  [\"path\", { d: \"M21 9H3\", key: \"1338ky\" }],\n  [\"path\", { d: \"M21 15H3\", key: \"9uk58r\" }]\n];\nconst Rows3 = createLucideIcon(\"rows-3\", __iconNode);\n\nexport { __iconNode, Rows3 as default };\n//# sourceMappingURL=rows-3.js.map\n","import { useState, useMemo, useCallback, useEffect, useRef } from 'react';\r\nimport {\r\n  useTimeline,\r\n  type TimelineEvent,\r\n} from '../hooks/useGodMode';\r\nimport {\r\n  Calendar, Filter, Loader2, FileText, HelpCircle, ShieldAlert,\r\n  Lightbulb, CheckSquare, GitCommit, Search, Download, X,\r\n  Mail, MessageSquare, Users, Mic, Clock, ChevronDown,\r\n  ArrowUp, Zap, LayoutGrid, LayoutList, Rows3,\r\n} from 'lucide-react';\r\nimport { cn } from '../lib/utils';\r\nimport { ErrorState } from '../components/shared/ErrorState';\r\nimport { Skeleton } from '../components/ui/skeleton';\r\n\r\nconst EVENT_TYPES = [\r\n  { key: 'question', icon: HelpCircle, color: 'text-blue-500', bg: 'bg-blue-500/10', border: 'border-blue-500/30', label: 'Questions' },\r\n  { key: 'fact', icon: Lightbulb, color: 'text-amber-500', bg: 'bg-amber-500/10', border: 'border-amber-500/30', label: 'Facts' },\r\n  { key: 'decision', icon: GitCommit, color: 'text-purple-500', bg: 'bg-purple-500/10', border: 'border-purple-500/30', label: 'Decisions' },\r\n  { key: 'risk', icon: ShieldAlert, color: 'text-red-500', bg: 'bg-red-500/10', border: 'border-red-500/30', label: 'Risks' },\r\n  { key: 'action', icon: CheckSquare, color: 'text-green-500', bg: 'bg-green-500/10', border: 'border-green-500/30', label: 'Actions' },\r\n  { key: 'document', icon: FileText, color: 'text-cyan-500', bg: 'bg-cyan-500/10', border: 'border-cyan-500/30', label: 'Documents' },\r\n  { key: 'email', icon: Mail, color: 'text-orange-500', bg: 'bg-orange-500/10', border: 'border-orange-500/30', label: 'Emails' },\r\n  { key: 'conversation', icon: MessageSquare, color: 'text-teal-500', bg: 'bg-teal-500/10', border: 'border-teal-500/30', label: 'Conversations' },\r\n  { key: 'contact', icon: Users, color: 'text-pink-500', bg: 'bg-pink-500/10', border: 'border-pink-500/30', label: 'Contacts' },\r\n  { key: 'transcript', icon: Mic, color: 'text-indigo-500', bg: 'bg-indigo-500/10', border: 'border-indigo-500/30', label: 'Transcripts' },\r\n  { key: 'chat_session', icon: MessageSquare, color: 'text-violet-500', bg: 'bg-violet-500/10', border: 'border-violet-500/30', label: 'Chat' },\r\n  { key: 'deadline', icon: Clock, color: 'text-rose-500', bg: 'bg-rose-500/10', border: 'border-rose-500/30', label: 'Deadlines' },\r\n] as const;\r\n\r\nconst typeMap = Object.fromEntries(EVENT_TYPES.map(t => [t.key, t]));\r\n\r\ntype Density = 'compact' | 'comfortable' | 'spacious';\r\ntype DateRange = '7' | '14' | '30' | '90' | 'all';\r\n\r\nfunction getDateLabel(dateStr: string): string {\r\n  const d = new Date(dateStr);\r\n  const now = new Date();\r\n  const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\r\n  const target = new Date(d.getFullYear(), d.getMonth(), d.getDate());\r\n  const diff = Math.floor((today.getTime() - target.getTime()) / 86400000);\r\n  if (diff === 0) return 'Today';\r\n  if (diff === 1) return 'Yesterday';\r\n  if (diff < 7) return d.toLocaleDateString('en-US', { weekday: 'long' });\r\n  return d.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric', year: d.getFullYear() !== now.getFullYear() ? 'numeric' : undefined });\r\n}\r\n\r\nfunction relativeTime(dateStr: string): string {\r\n  const diff = Date.now() - new Date(dateStr).getTime();\r\n  const mins = Math.floor(diff / 60000);\r\n  if (mins < 1) return 'just now';\r\n  if (mins < 60) return `${mins}m ago`;\r\n  const hrs = Math.floor(mins / 60);\r\n  if (hrs < 24) return `${hrs}h ago`;\r\n  const days = Math.floor(hrs / 24);\r\n  if (days < 7) return `${days}d ago`;\r\n  return new Date(dateStr).toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\r\n}\r\n\r\nfunction initials(name?: string): string {\r\n  if (!name) return '?';\r\n  return name.split(/[\\s@]+/).filter(Boolean).slice(0, 2).map(s => s[0].toUpperCase()).join('');\r\n}\r\n\r\nfunction getStatusBadge(status?: string) {\r\n  if (!status) return null;\r\n  const s = String(status).toLowerCase();\r\n  const map: Record<string, { label: string; cls: string }> = {\r\n    pending: { label: 'Pending', cls: 'bg-yellow-500/10 text-yellow-500 border-yellow-500/20' },\r\n    in_progress: { label: 'In Progress', cls: 'bg-blue-500/10 text-blue-500 border-blue-500/20' },\r\n    active: { label: 'Active', cls: 'bg-blue-500/10 text-blue-500 border-blue-500/20' },\r\n    completed: { label: 'Completed', cls: 'bg-green-500/10 text-green-500 border-green-500/20' },\r\n    approved: { label: 'Approved', cls: 'bg-green-500/10 text-green-500 border-green-500/20' },\r\n    rejected: { label: 'Rejected', cls: 'bg-red-500/10 text-red-500 border-red-500/20' },\r\n    overdue: { label: 'Overdue', cls: 'bg-red-500/10 text-red-500 border-red-500/20' },\r\n    mitigated: { label: 'Mitigated', cls: 'bg-emerald-500/10 text-emerald-500 border-emerald-500/20' },\r\n  };\r\n  const m = map[s];\r\n  if (!m) return null;\r\n  return <span className={cn('text-[9px] font-medium px-1.5 py-0.5 rounded-full border', m.cls)}>{m.label}</span>;\r\n}\r\n\r\nfunction TimelineSkeleton() {\r\n  return (\r\n    <div className=\"p-5 space-y-5 animate-in fade-in duration-300\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <Skeleton className=\"h-6 w-32 bg-gm-surface-secondary\" />\r\n        <Skeleton className=\"h-8 w-48 rounded-lg bg-gm-surface-secondary\" />\r\n      </div>\r\n      <div className=\"flex gap-2\">\r\n        {[1, 2, 3, 4, 5, 6].map(i => <Skeleton key={i} className=\"h-7 w-20 rounded-lg bg-gm-surface-secondary\" />)}\r\n      </div>\r\n      {[1, 2, 3].map(g => (\r\n        <div key={g} className=\"space-y-3\">\r\n          <Skeleton className=\"h-4 w-40 bg-gm-surface-secondary\" />\r\n          {[1, 2, 3].map(i => (\r\n            <div key={i} className=\"flex items-start gap-3 ml-4 pl-4\">\r\n              <Skeleton className=\"h-9 w-9 rounded-lg shrink-0 bg-gm-surface-secondary\" />\r\n              <div className=\"flex-1 space-y-2\">\r\n                <Skeleton className=\"h-3 w-2/3 bg-gm-surface-secondary\" />\r\n                <Skeleton className=\"h-2.5 w-1/3 bg-gm-surface-secondary\" />\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function TimelinePage() {\r\n  const [activeTypes, setActiveTypes] = useState<Set<string>>(new Set());\r\n  const [search, setSearch] = useState('');\r\n  const [debouncedSearch, setDebouncedSearch] = useState('');\r\n  const [dateRange, setDateRange] = useState<DateRange>('30');\r\n  const [density, setDensity] = useState<Density>('comfortable');\r\n  const [showExport, setShowExport] = useState(false);\r\n  const [limit, setLimit] = useState(200);\r\n  const [selectedIdx, setSelectedIdx] = useState(-1);\r\n  const panelRef = useRef<HTMLDivElement>(null);\r\n  const searchRef = useRef<HTMLInputElement>(null);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => setDebouncedSearch(search), 200);\r\n    return () => clearTimeout(timer);\r\n  }, [search]);\r\n\r\n  const startDate = useMemo(() => {\r\n    if (dateRange === 'all') return undefined;\r\n    const d = new Date();\r\n    d.setDate(d.getDate() - Number(dateRange));\r\n    return d.toISOString().split('T')[0];\r\n  }, [dateRange]);\r\n\r\n  const typesParam = activeTypes.size > 0 ? Array.from(activeTypes).join(',') : undefined;\r\n\r\n  const { data, isLoading, isError, refetch } = useTimeline({\r\n    types: typesParam,\r\n    startDate,\r\n    limit,\r\n  });\r\n\r\n  const events = data?.events ?? [];\r\n  const totalEvents = data?.totalEvents ?? 0;\r\n\r\n  const filtered = useMemo(() => {\r\n    if (!debouncedSearch) return events;\r\n    const q = debouncedSearch.toLowerCase();\r\n    return events.filter(e => {\r\n      const text = [e.title, e.content, e.description, e.owner, e.type].filter(Boolean).join(' ').toLowerCase();\r\n      return text.includes(q);\r\n    });\r\n  }, [events, debouncedSearch]);\r\n\r\n  const typeCounts = useMemo(() => {\r\n    const counts: Record<string, number> = {};\r\n    events.forEach(e => {\r\n      const t = e.type || 'unknown';\r\n      counts[t] = (counts[t] || 0) + 1;\r\n    });\r\n    return counts;\r\n  }, [events]);\r\n\r\n  const grouped = useMemo(() => {\r\n    const groups: { dateKey: string; label: string; isToday: boolean; events: TimelineEvent[] }[] = [];\r\n    const map = new Map<string, TimelineEvent[]>();\r\n    const order: string[] = [];\r\n\r\n    filtered.forEach(e => {\r\n      const ts = e.date || '';\r\n      const dateKey = ts ? new Date(ts).toISOString().split('T')[0] : 'unknown';\r\n      if (!map.has(dateKey)) { map.set(dateKey, []); order.push(dateKey); }\r\n      map.get(dateKey)!.push(e);\r\n    });\r\n\r\n    const todayKey = new Date().toISOString().split('T')[0];\r\n    order.forEach(dateKey => {\r\n      groups.push({\r\n        dateKey,\r\n        label: dateKey === 'unknown' ? 'Unknown Date' : getDateLabel(dateKey),\r\n        isToday: dateKey === todayKey,\r\n        events: map.get(dateKey)!,\r\n      });\r\n    });\r\n    return groups;\r\n  }, [filtered]);\r\n\r\n  const flatEvents = useMemo(() => grouped.flatMap(g => g.events), [grouped]);\r\n\r\n  const toggleType = useCallback((key: string) => {\r\n    setActiveTypes(prev => {\r\n      const next = new Set(prev);\r\n      if (next.has(key)) next.delete(key); else next.add(key);\r\n      return next;\r\n    });\r\n  }, []);\r\n\r\n  const clearFilters = useCallback(() => {\r\n    setActiveTypes(new Set());\r\n    setSearch('');\r\n    setDateRange('30');\r\n  }, []);\r\n\r\n  const handleExport = useCallback((format: 'csv' | 'json') => {\r\n    setShowExport(false);\r\n    const exportData = filtered.map(e => ({\r\n      type: e.type, date: e.date, title: e.title || e.content || e.description || '',\r\n      owner: e.owner || '', status: e.status || '', operation: e.operation || '',\r\n    }));\r\n    let blob: Blob;\r\n    let filename: string;\r\n    if (format === 'json') {\r\n      blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });\r\n      filename = `timeline-${new Date().toISOString().split('T')[0]}.json`;\r\n    } else {\r\n      const headers = Object.keys(exportData[0] || {});\r\n      const rows = [headers.join(','), ...exportData.map(r => headers.map(h => `\"${String((r as Record<string, string>)[h] || '').replace(/\"/g, '\"\"')}\"`).join(','))];\r\n      blob = new Blob([rows.join('\\n')], { type: 'text/csv' });\r\n      filename = `timeline-${new Date().toISOString().split('T')[0]}.csv`;\r\n    }\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url; a.download = filename; a.click();\r\n    URL.revokeObjectURL(url);\r\n  }, [filtered]);\r\n\r\n  useEffect(() => {\r\n    const handler = (e: KeyboardEvent) => {\r\n      if (e.target instanceof HTMLInputElement || e.target instanceof HTMLTextAreaElement) {\r\n        if (e.key === 'Escape') { (e.target as HTMLElement).blur(); setSearch(''); }\r\n        return;\r\n      }\r\n      if (e.key === '/') { e.preventDefault(); searchRef.current?.focus(); }\r\n      if (e.key === 'j' || e.key === 'ArrowDown') { e.preventDefault(); setSelectedIdx(i => Math.min(i + 1, flatEvents.length - 1)); }\r\n      if (e.key === 'k' || e.key === 'ArrowUp') { e.preventDefault(); setSelectedIdx(i => Math.max(i - 1, 0)); }\r\n      if (e.key === 'Escape') { setSelectedIdx(-1); }\r\n    };\r\n    window.addEventListener('keydown', handler);\r\n    return () => window.removeEventListener('keydown', handler);\r\n  }, [flatEvents.length]);\r\n\r\n  const densityCls = density === 'compact' ? 'py-2 px-3 gap-2' : density === 'spacious' ? 'py-5 px-5 gap-4' : 'py-3.5 px-4 gap-3';\r\n  const densityIcon = density === 'compact' ? 'h-7 w-7' : density === 'spacious' ? 'h-10 w-10' : 'h-8 w-8';\r\n\r\n  if (isLoading) return <TimelineSkeleton />;\r\n  if (isError) return <div className=\"p-5\"><ErrorState message=\"Failed to load timeline data.\" onRetry={() => refetch()} /></div>;\r\n\r\n  let eventIdx = -1;\r\n\r\n  return (\r\n    <div ref={panelRef} className=\"flex flex-col h-[calc(100vh-4rem)]\" tabIndex={-1}>\r\n      {/* Header */}\r\n      <div className=\"shrink-0 border-b border-gm-border-primary bg-gm-surface-primary sticky top-0 z-20\">\r\n        <div className=\"px-5 py-3\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <h1 className=\"text-base font-bold text-gm-text-primary\">Timeline</h1>\r\n              <span className=\"text-[10px] text-gm-text-tertiary bg-gm-surface-secondary px-2 py-0.5 rounded-full\">\r\n                {filtered.length}{totalEvents > filtered.length ? ` / ${totalEvents}` : ''} events\r\n              </span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              {/* Density toggle */}\r\n              <div className=\"flex items-center border border-gm-border-primary rounded-lg overflow-hidden\">\r\n                {([['compact', LayoutList], ['comfortable', Rows3], ['spacious', LayoutGrid]] as [Density, typeof LayoutList][]).map(([d, Icon]) => (\r\n                  <button key={d} onClick={() => setDensity(d)} aria-label={`${d} density`} aria-pressed={density === d}\r\n                    className={cn('p-1.5 transition-colors', density === d ? 'bg-blue-600/10 text-gm-interactive-primary' : 'text-gm-text-tertiary hover:text-gm-text-primary')}>\r\n                    <Icon className=\"w-3.5 h-3.5\" />\r\n                  </button>\r\n                ))}\r\n              </div>\r\n              {/* Export dropdown */}\r\n              <div className=\"relative\">\r\n                <button onClick={() => setShowExport(!showExport)} aria-expanded={showExport} aria-label=\"Export timeline\"\r\n                  className=\"px-2.5 py-1.5 rounded-lg border border-gm-border-primary text-gm-text-tertiary hover:text-gm-text-primary hover:bg-gm-surface-secondary text-xs flex items-center gap-1.5 transition-colors\">\r\n                  <Download className=\"w-3.5 h-3.5\" /> Export <ChevronDown className=\"w-3 h-3\" />\r\n                </button>\r\n                {showExport && (\r\n                  <div className=\"absolute right-0 top-full mt-1 bg-gm-surface-primary border border-gm-border-primary rounded-lg shadow-lg z-30 min-w-[120px]\">\r\n                    <button onClick={() => handleExport('csv')} className=\"w-full text-left px-3 py-2 text-xs text-gm-text-primary hover:bg-gm-surface-secondary transition-colors\">Export CSV</button>\r\n                    <button onClick={() => handleExport('json')} className=\"w-full text-left px-3 py-2 text-xs text-gm-text-primary hover:bg-gm-surface-secondary transition-colors\">Export JSON</button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Search + Date range */}\r\n          <div className=\"flex items-center gap-2 mb-2 flex-wrap\">\r\n            <div className=\"relative flex-1 min-w-[200px] max-w-sm\">\r\n              <Search className=\"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gm-text-tertiary\" />\r\n              <input ref={searchRef} value={search} onChange={e => setSearch(e.target.value)}\r\n                placeholder=\"Search events... (press / to focus)\" aria-label=\"Search timeline events\"\r\n                className=\"w-full pl-8 pr-8 py-1.5 rounded-lg bg-gm-bg-tertiary border border-gm-border-primary text-xs text-gm-text-primary placeholder:text-gm-text-placeholder focus:outline-none focus:border-gm-border-focus transition-colors\" />\r\n              {search && (\r\n                <button onClick={() => setSearch('')} aria-label=\"Clear search\"\r\n                  className=\"absolute right-2 top-1/2 -translate-y-1/2 text-gm-text-tertiary hover:text-gm-text-primary\">\r\n                  <X className=\"w-3.5 h-3.5\" />\r\n                </button>\r\n              )}\r\n            </div>\r\n            <div className=\"flex items-center border border-gm-border-primary rounded-lg overflow-hidden\">\r\n              {([['7', '7d'], ['14', '14d'], ['30', '30d'], ['90', '90d'], ['all', 'All']] as [DateRange, string][]).map(([value, label]) => (\r\n                <button key={value} onClick={() => setDateRange(value)} aria-pressed={dateRange === value}\r\n                  className={cn('px-2.5 py-1.5 text-[10px] font-medium transition-colors',\r\n                    dateRange === value ? 'bg-blue-600/10 text-gm-interactive-primary' : 'text-gm-text-tertiary hover:text-gm-text-primary')}>\r\n                  {label}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Type filters */}\r\n          <div className=\"flex items-center gap-1.5 flex-wrap\" role=\"toolbar\" aria-label=\"Filter by event type\">\r\n            <Filter className=\"w-3 h-3 text-gm-text-tertiary mr-0.5\" />\r\n            {EVENT_TYPES.map(t => {\r\n              const count = typeCounts[t.key] || 0;\r\n              const active = activeTypes.has(t.key);\r\n              const Icon = t.icon;\r\n              return (\r\n                <button key={t.key} onClick={() => toggleType(t.key)} aria-pressed={active}\r\n                  className={cn('px-2 py-1 rounded-md text-[10px] font-medium transition-all border flex items-center gap-1',\r\n                    active ? `${t.bg} ${t.border} ${t.color}` : 'bg-gm-surface-secondary border-transparent text-gm-text-tertiary hover:text-gm-text-primary hover:border-gm-border-primary')}>\r\n                  <Icon className=\"w-3 h-3\" /> {t.label}\r\n                  {count > 0 && <span className=\"text-[9px] opacity-70\">{count}</span>}\r\n                </button>\r\n              );\r\n            })}\r\n            {(activeTypes.size > 0 || search || dateRange !== '30') && (\r\n              <button onClick={clearFilters} className=\"px-2 py-1 rounded-md text-[10px] font-medium text-gm-text-tertiary hover:text-gm-status-danger transition-colors flex items-center gap-1\">\r\n                <X className=\"w-3 h-3\" /> Clear\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Timeline */}\r\n      <div className=\"flex-1 overflow-y-auto\">\r\n        {filtered.length === 0 ? (\r\n          <div className=\"flex flex-col items-center justify-center h-full text-center px-5\">\r\n            <div className=\"w-20 h-20 rounded-full bg-gm-surface-secondary flex items-center justify-center mb-4\">\r\n              <Clock className=\"w-10 h-10 text-gray-600\" />\r\n            </div>\r\n            <p className=\"text-sm font-medium text-gm-text-secondary mb-1\">No events found</p>\r\n            <p className=\"text-xs text-gray-400 max-w-sm mb-4\">\r\n              {search ? `No events matching \"${search}\"` : activeTypes.size > 0 ? 'No events for the selected types' : 'No timeline events in this period'}\r\n            </p>\r\n            {(search || activeTypes.size > 0) && (\r\n              <button onClick={clearFilters}\r\n                className=\"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover transition-colors\">\r\n                Clear Filters\r\n              </button>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <div className=\"px-5 py-4\">\r\n            {grouped.map(group => {\r\n              return (\r\n                <div key={group.dateKey} className=\"mb-6\">\r\n                  {/* Date header */}\r\n                  <div className=\"sticky top-0 z-10 flex items-center gap-3 py-2 bg-gm-bg-primary backdrop-blur-sm\">\r\n                    <div className={cn('w-2.5 h-2.5 rounded-full shrink-0', group.isToday ? 'bg-gm-interactive-primary ring-2 ring-blue-600/30' : 'bg-gray-500')} />\r\n                    <span className={cn('text-[11px] font-semibold uppercase tracking-wider', group.isToday ? 'text-gm-interactive-primary' : 'text-gm-text-tertiary')}>\r\n                      {group.label}\r\n                    </span>\r\n                    <span className=\"text-[10px] text-gray-500\">{group.events.length}</span>\r\n                    <div className=\"flex-1 h-px bg-gm-border-primary\" />\r\n                    {group.isToday && (\r\n                      <span className=\"text-[9px] font-medium text-gm-interactive-primary bg-blue-600/10 px-2 py-0.5 rounded-full\">TODAY</span>\r\n                    )}\r\n                  </div>\r\n\r\n                  {/* Today marker */}\r\n                  {group.isToday && (\r\n                    <div className=\"flex items-center gap-2 ml-[5px] my-1\">\r\n                      <div className=\"w-px h-3 bg-gm-interactive-primary\" />\r\n                      <div className=\"flex-1 h-px bg-blue-600/30\" />\r\n                    </div>\r\n                  )}\r\n\r\n                  {/* Events */}\r\n                  <div className=\"ml-[5px] border-l-2 border-gm-border-primary space-y-1.5 pl-5\">\r\n                    {group.events.map((event, i) => {\r\n                      eventIdx++;\r\n                      const currentIdx = eventIdx;\r\n                      const conf = typeMap[event.type] || { icon: Calendar, color: 'text-gm-text-tertiary', bg: 'bg-gm-surface-secondary', border: 'border-gm-border-primary', label: event.type || 'Event', key: 'unknown' };\r\n                      const Icon = conf.icon;\r\n                      const owner = event.owner || (event as Record<string, unknown>).changed_by_email as string || '';\r\n                      const title = event.title || event.content || event.description || (event as Record<string, unknown>).filename as string || `${conf.label} event`;\r\n                      const ts = event.date || '';\r\n                      const isSelected = currentIdx === selectedIdx;\r\n\r\n                      return (\r\n                        <div key={`${group.dateKey}-${i}`}\r\n                          className={cn(\r\n                            'rounded-xl border bg-gm-surface-primary transition-all duration-150 flex items-start',\r\n                            densityCls,\r\n                            isSelected ? 'border-gm-interactive-primary ring-1 ring-blue-600/20 shadow-sm' : 'border-gm-border-primary hover:border-blue-600/20 hover:shadow-sm',\r\n                          )}>\r\n                          {/* Timeline dot connector */}\r\n                          <div className=\"relative -ml-[29px] mr-2 mt-1 shrink-0\">\r\n                            <div className={cn('w-2.5 h-2.5 rounded-full border-2 border-gm-surface-primary', conf.bg.replace('/10', ''))} style={{ backgroundColor: `var(--tw-${conf.color.replace('text-', '')}, currentColor)` }}>\r\n                              <div className={cn('w-full h-full rounded-full', conf.bg)} />\r\n                            </div>\r\n                          </div>\r\n\r\n                          {/* Icon */}\r\n                          <div className={cn('rounded-lg flex items-center justify-center shrink-0', conf.bg, densityIcon)}>\r\n                            <Icon className={cn('w-4 h-4', conf.color)} />\r\n                          </div>\r\n\r\n                          {/* Content */}\r\n                          <div className=\"flex-1 min-w-0\">\r\n                            <div className=\"flex items-center gap-2 flex-wrap\">\r\n                              <span className={cn('text-[10px] font-medium px-1.5 py-0.5 rounded border', conf.bg, conf.border, conf.color)}>{conf.label}</span>\r\n                              {event.operation && (\r\n                                <span className=\"text-[10px] px-1.5 py-0.5 rounded bg-gm-surface-secondary text-gm-text-tertiary capitalize\">{event.operation}</span>\r\n                              )}\r\n                              {getStatusBadge(event.status)}\r\n                            </div>\r\n                            <p className={cn('text-gm-text-primary mt-1 leading-snug', density === 'compact' ? 'text-xs' : 'text-sm')}>\r\n                              {String(title)}\r\n                            </p>\r\n                            <div className=\"flex items-center gap-3 mt-1.5\">\r\n                              {owner && (\r\n                                <div className=\"flex items-center gap-1.5\">\r\n                                  <div className=\"w-4 h-4 rounded-full bg-gm-surface-secondary flex items-center justify-center\">\r\n                                    <span className=\"text-[7px] font-bold text-gm-text-tertiary\">{initials(owner)}</span>\r\n                                  </div>\r\n                                  <span className=\"text-[10px] text-gm-text-tertiary\">{owner}</span>\r\n                                </div>\r\n                              )}\r\n                              {ts && (\r\n                                <span className=\"text-[10px] text-gray-400\" title={new Date(ts).toLocaleString()}>\r\n                                  {relativeTime(ts)}\r\n                                </span>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n\r\n            {/* Load more */}\r\n            {totalEvents > limit && (\r\n              <div className=\"flex justify-center py-4\">\r\n                <button onClick={() => setLimit(l => l + 200)}\r\n                  className=\"px-4 py-2 rounded-lg bg-gm-surface-secondary border border-gm-border-primary text-xs font-medium text-gm-text-primary hover:bg-gm-surface-hover transition-colors flex items-center gap-1.5\">\r\n                  <ArrowUp className=\"w-3.5 h-3.5 rotate-180\" /> Load more ({totalEvents - limit} remaining)\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {/* Keyboard hint */}\r\n            <div className=\"flex items-center justify-center gap-3 py-3 text-[9px] text-gray-500\">\r\n              <span><kbd className=\"px-1 py-0.5 rounded bg-gm-surface-secondary border border-gm-border-primary text-[8px]\">J</kbd>/<kbd className=\"px-1 py-0.5 rounded bg-gm-surface-secondary border border-gm-border-primary text-[8px]\">K</kbd> navigate</span>\r\n              <span><kbd className=\"px-1 py-0.5 rounded bg-gm-surface-secondary border border-gm-border-primary text-[8px]\">/</kbd> search</span>\r\n              <span><kbd className=\"px-1 py-0.5 rounded bg-gm-surface-secondary border border-gm-border-primary text-[8px]\">Esc</kbd> clear</span>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["__iconNode","ArrowUp","createLucideIcon","LayoutList","Rows3","EVENT_TYPES","HelpCircle","Lightbulb","GitCommit","ShieldAlert","CheckSquare","FileText","Mail","MessageSquare","Users","Mic","Clock","typeMap","t","getDateLabel","dateStr","d","now","today","target","diff","relativeTime","mins","hrs","days","initials","name","s","getStatusBadge","status","m","jsx","cn","TimelineSkeleton","jsxs","Skeleton","i","g","TimelinePage","activeTypes","setActiveTypes","useState","search","setSearch","debouncedSearch","setDebouncedSearch","dateRange","setDateRange","density","setDensity","showExport","setShowExport","limit","setLimit","selectedIdx","setSelectedIdx","panelRef","useRef","searchRef","useEffect","timer","startDate","useMemo","typesParam","data","isLoading","isError","refetch","useTimeline","events","totalEvents","filtered","q","e","typeCounts","counts","grouped","groups","map","order","ts","dateKey","todayKey","flatEvents","toggleType","useCallback","key","prev","next","clearFilters","handleExport","format","exportData","blob","filename","headers","rows","r","h","url","a","handler","densityCls","densityIcon","ErrorState","eventIdx","LayoutGrid","Icon","Download","ChevronDown","Search","X","value","label","Filter","count","active","group","event","currentIdx","conf","Calendar","owner","title","isSelected","l"],"mappings":"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","x_google_ignoreList":[0,1,2]}