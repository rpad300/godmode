{"version":3,"file":"SprintsPage-1kXkwG-K.js","sources":["../../../node_modules/lucide-react/dist/esm/icons/presentation.js","../../../node_modules/lucide-react/dist/esm/icons/square-chart-gantt.js","../../../node_modules/lucide-react/dist/esm/icons/unlink.js","../../frontend/src/components/sprints/styles.ts","../../frontend/src/components/sprints/BreakdownChart.tsx","../../frontend/src/components/sprints/BurndownChart.tsx","../../frontend/src/components/sprints/VelocityChart.tsx","../../frontend/src/components/sprints/HealthScoreWidget.tsx","../../frontend/src/components/sprints/KanbanBoard.tsx","../../frontend/src/components/sprints/GanttChart.tsx","../../frontend/src/components/sprints/RetrospectivePanel.tsx","../../frontend/src/components/sprints/StandupPanel.tsx","../../frontend/src/components/sprints/CapacityPanel.tsx","../../frontend/src/components/sprints/EstimatePointsButton.tsx","../../frontend/src/pages/SprintsPage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M2 3h20\", key: \"91anmk\" }],\n  [\"path\", { d: \"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3\", key: \"2k9sn8\" }],\n  [\"path\", { d: \"m7 21 5-5 5 5\", key: \"bip4we\" }]\n];\nconst Presentation = createLucideIcon(\"presentation\", __iconNode);\n\nexport { __iconNode, Presentation as default };\n//# sourceMappingURL=presentation.js.map\n","/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"18\", height: \"18\", x: \"3\", y: \"3\", rx: \"2\", key: \"afitv7\" }],\n  [\"path\", { d: \"M9 8h7\", key: \"kbo1nt\" }],\n  [\"path\", { d: \"M8 12h6\", key: \"ikassy\" }],\n  [\"path\", { d: \"M11 16h5\", key: \"oq65wt\" }]\n];\nconst SquareChartGantt = createLucideIcon(\"square-chart-gantt\", __iconNode);\n\nexport { __iconNode, SquareChartGantt as default };\n//# sourceMappingURL=square-chart-gantt.js.map\n","/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71\",\n      key: \"yqzxt4\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71\",\n      key: \"4qinb0\"\n    }\n  ],\n  [\"line\", { x1: \"8\", x2: \"8\", y1: \"2\", y2: \"5\", key: \"1041cp\" }],\n  [\"line\", { x1: \"2\", x2: \"5\", y1: \"8\", y2: \"8\", key: \"14m1p5\" }],\n  [\"line\", { x1: \"16\", x2: \"16\", y1: \"19\", y2: \"22\", key: \"rzdirn\" }],\n  [\"line\", { x1: \"19\", x2: \"22\", y1: \"16\", y2: \"16\", key: \"ox905f\" }]\n];\nconst Unlink = createLucideIcon(\"unlink\", __iconNode);\n\nexport { __iconNode, Unlink as default };\n//# sourceMappingURL=unlink.js.map\n","export const CARD =\r\n  'rounded-xl border border-[var(--border-primary)] bg-[var(--surface-primary)] shadow-[var(--shadow-sm)]';\r\n\r\nexport const CARD_FLAT =\r\n  'rounded-xl border border-[var(--border-primary)] bg-[var(--surface-primary)]';\r\n\r\nexport const BTN_PRIMARY =\r\n  'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg ' +\r\n  'bg-[var(--interactive-primary)] text-[var(--text-on-brand)] ' +\r\n  'hover:bg-[var(--interactive-primary-hover)] transition-colors disabled:opacity-50';\r\n\r\nexport const BTN_SECONDARY =\r\n  'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg ' +\r\n  'bg-[var(--interactive-secondary)] text-[var(--text-primary)] ' +\r\n  'hover:bg-[var(--interactive-secondary-hover)] border border-[var(--border-primary)] ' +\r\n  'transition-colors disabled:opacity-50';\r\n\r\nexport const BTN_DANGER =\r\n  'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg ' +\r\n  'bg-[var(--status-danger-bg)] text-[var(--status-danger)] ' +\r\n  'hover:opacity-80 transition-colors disabled:opacity-50';\r\n\r\nexport const BTN_GHOST =\r\n  'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg ' +\r\n  'text-[var(--text-secondary)] hover:bg-[var(--surface-hover)] transition-colors disabled:opacity-50';\r\n\r\nexport const INPUT =\r\n  'bg-[var(--bg-tertiary)] border border-[var(--border-primary)] rounded-lg px-3 py-2 ' +\r\n  'text-sm text-[var(--text-primary)] placeholder:text-[var(--text-placeholder)] ' +\r\n  'focus:outline-none focus:ring-2 focus:ring-[var(--border-focus)]/40';\r\n\r\nexport const SECTION_TITLE =\r\n  'text-[10px] font-bold text-[var(--accent-primary)] uppercase tracking-[0.1em]';\r\n\r\nexport const BADGE = (color: 'success' | 'warning' | 'danger' | 'info' | 'neutral') => {\r\n  const map = {\r\n    success: 'bg-[var(--status-success-bg)] text-[var(--status-success)] border-[var(--status-success)]/30',\r\n    warning: 'bg-[var(--status-warning-bg)] text-[var(--status-warning)] border-[var(--status-warning)]/30',\r\n    danger:  'bg-[var(--status-danger-bg)] text-[var(--status-danger)] border-[var(--status-danger)]/30',\r\n    info:    'bg-[var(--status-info-bg)] text-[var(--status-info)] border-[var(--status-info)]/30',\r\n    neutral: 'bg-[var(--surface-secondary)] text-[var(--text-tertiary)] border-[var(--border-primary)]',\r\n  };\r\n  return `text-[10px] font-medium px-2.5 py-1 rounded-full border capitalize ${map[color]}`;\r\n};\r\n\r\nexport const STATUS_COLORS: Record<string, string> = {\r\n  pending:     'var(--color-neutral-500, #64748b)',\r\n  in_progress: 'var(--color-brand-500, #3b82f6)',\r\n  completed:   'var(--color-success-500, #22c55e)',\r\n  overdue:     'var(--color-danger-500, #ef4444)',\r\n  cancelled:   'var(--color-neutral-500, #6b7280)',\r\n  planning:    'var(--color-brand-500, #3b82f6)',\r\n  active:      'var(--color-success-500, #22c55e)',\r\n  done:        'var(--color-success-500, #22c55e)',\r\n};\r\n\r\nexport const ASSIGNEE_PALETTE = [\r\n  '#3b82f6', '#8b5cf6', '#ec4899', '#f59e0b', '#10b981',\r\n  '#06b6d4', '#f43f5e', '#84cc16', '#6366f1', '#14b8a6',\r\n];\r\n","import { useMemo } from 'react';\r\nimport { BarChart3 } from 'lucide-react';\r\nimport { SECTION_TITLE, STATUS_COLORS, ASSIGNEE_PALETTE } from './styles';\r\n\r\ninterface BarItem {\r\n  label: string;\r\n  value: number;\r\n  color: string;\r\n}\r\n\r\ninterface BreakdownChartProps {\r\n  title: string;\r\n  data: Record<string, number>;\r\n  colorMap?: Record<string, string>;\r\n}\r\n\r\nexport default function BreakdownChart({ title, data, colorMap }: BreakdownChartProps) {\r\n  const bars = useMemo<BarItem[]>(() => {\r\n    const entries = Object.entries(data).filter(([, v]) => v > 0);\r\n    if (entries.length === 0) return [];\r\n    return entries.map(([label, value], i) => ({\r\n      label,\r\n      value,\r\n      color: colorMap?.[label] || STATUS_COLORS[label] || ASSIGNEE_PALETTE[i % ASSIGNEE_PALETTE.length],\r\n    }));\r\n  }, [data, colorMap]);\r\n\r\n  const maxVal = useMemo(() => Math.max(...bars.map(b => b.value), 1), [bars]);\r\n  const total = useMemo(() => bars.reduce((s, b) => s + b.value, 0), [bars]);\r\n\r\n  if (bars.length === 0) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-6 text-[var(--text-tertiary)]\">\r\n        <BarChart3 className=\"w-6 h-6 mb-1.5 opacity-40\" />\r\n        <p className=\"text-[10px]\">No data available</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-3\">\r\n        <span className={SECTION_TITLE}>{title}</span>\r\n        <span className=\"text-[10px] text-[var(--text-tertiary)]\">{total} total</span>\r\n      </div>\r\n      <div className=\"space-y-2\">\r\n        {bars.map(bar => {\r\n          const pct = Math.round((bar.value / maxVal) * 100);\r\n          const sharePct = Math.round((bar.value / total) * 100);\r\n          return (\r\n            <div key={bar.label} className=\"group\">\r\n              <div className=\"flex items-center justify-between mb-0.5\">\r\n                <span className=\"text-xs text-[var(--text-secondary)] capitalize truncate max-w-[60%]\">\r\n                  {bar.label.replace(/_/g, ' ')}\r\n                </span>\r\n                <span className=\"text-[10px] text-[var(--text-tertiary)] tabular-nums\">\r\n                  {bar.value} ({sharePct}%)\r\n                </span>\r\n              </div>\r\n              <div className=\"h-2 rounded-full bg-[var(--surface-hover)] overflow-hidden\">\r\n                <div\r\n                  className=\"h-full rounded-full transition-all duration-500 ease-out\"\r\n                  style={{ width: `${pct}%`, backgroundColor: bar.color }}\r\n                />\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useMemo } from 'react';\r\nimport { Activity } from 'lucide-react';\r\nimport { SECTION_TITLE } from './styles';\r\n\r\ninterface DailyPoint {\r\n  date: string;\r\n  remaining_tasks: number;\r\n  remaining_points: number;\r\n  completed_tasks: number;\r\n  completed_points: number;\r\n}\r\n\r\ninterface BurndownChartProps {\r\n  dailyProgress: DailyPoint[];\r\n  totalTasks: number;\r\n  totalPoints: number;\r\n  usePoints?: boolean;\r\n}\r\n\r\nexport default function BurndownChart({ dailyProgress, totalTasks, totalPoints, usePoints = false }: BurndownChartProps) {\r\n  const total = usePoints ? totalPoints : totalTasks;\r\n  const data = useMemo(() => {\r\n    if (!dailyProgress?.length) return [];\r\n    return dailyProgress.map((d, i) => ({\r\n      ...d,\r\n      remaining: usePoints ? d.remaining_points : d.remaining_tasks,\r\n      idealRemaining: total - (total / (dailyProgress.length - 1)) * i,\r\n    }));\r\n  }, [dailyProgress, total, usePoints]);\r\n\r\n  if (data.length < 2) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-8 text-[var(--text-tertiary)]\">\r\n        <Activity className=\"w-8 h-8 mb-2 opacity-40\" />\r\n        <p className=\"text-xs\">Burndown data will appear as tasks are completed</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const maxVal = Math.max(total, ...data.map(d => d.remaining));\r\n  const chartH = 160;\r\n  const chartW = 100;\r\n\r\n  const toX = (i: number) => (i / (data.length - 1)) * chartW;\r\n  const toY = (v: number) => chartH - (v / (maxVal || 1)) * chartH;\r\n\r\n  const actualPath = data.map((d, i) => `${i === 0 ? 'M' : 'L'}${toX(i).toFixed(1)},${toY(d.remaining).toFixed(1)}`).join(' ');\r\n  const idealPath = data.map((d, i) => `${i === 0 ? 'M' : 'L'}${toX(i).toFixed(1)},${toY(d.idealRemaining).toFixed(1)}`).join(' ');\r\n  const areaPath = actualPath + ` L${chartW},${chartH} L0,${chartH} Z`;\r\n\r\n  const todayIdx = (() => {\r\n    const today = new Date().toISOString().slice(0, 10);\r\n    const idx = data.findIndex(d => d.date >= today);\r\n    return idx >= 0 ? idx : data.length - 1;\r\n  })();\r\n\r\n  const labels = useMemo(() => {\r\n    if (data.length <= 7) return data.map(d => d.date.slice(5));\r\n    const step = Math.ceil(data.length / 6);\r\n    return data.map((d, i) => i % step === 0 || i === data.length - 1 ? d.date.slice(5) : '');\r\n  }, [data]);\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-2\">\r\n        <span className={SECTION_TITLE}>\r\n          Burndown ({usePoints ? 'Points' : 'Tasks'})\r\n        </span>\r\n        <span className=\"text-[10px] text-[var(--text-tertiary)]\">\r\n          {data[todayIdx]?.remaining ?? 0} remaining of {total}\r\n        </span>\r\n      </div>\r\n      <div className=\"relative\" style={{ paddingBottom: '45%' }}>\r\n        <svg viewBox={`-4 -4 ${chartW + 8} ${chartH + 24}`} className=\"absolute inset-0 w-full h-full\" preserveAspectRatio=\"none\">\r\n          {[0, 0.25, 0.5, 0.75, 1].map(f => (\r\n            <line key={f} x1=\"0\" y1={toY(maxVal * f)} x2={chartW} y2={toY(maxVal * f)}\r\n              stroke=\"var(--surface-hover)\" strokeWidth=\"0.3\" />\r\n          ))}\r\n          <path d={areaPath} fill=\"rgba(59,130,246,0.08)\" />\r\n          <path d={idealPath} fill=\"none\" stroke=\"var(--border-secondary)\" strokeWidth=\"0.5\" strokeDasharray=\"2,2\" />\r\n          <path d={actualPath} fill=\"none\" stroke=\"var(--color-brand-500, #3b82f6)\" strokeWidth=\"1\" strokeLinejoin=\"round\" />\r\n          {todayIdx < data.length && (\r\n            <line x1={toX(todayIdx)} y1=\"0\" x2={toX(todayIdx)} y2={chartH}\r\n              stroke=\"rgba(250,204,21,0.3)\" strokeWidth=\"0.5\" strokeDasharray=\"1.5,1.5\" />\r\n          )}\r\n          <circle cx={toX(todayIdx)} cy={toY(data[todayIdx]?.remaining ?? 0)} r=\"2\" fill=\"var(--color-brand-500, #3b82f6)\" />\r\n          {labels.map((label, i) => label ? (\r\n            <text key={i} x={toX(i)} y={chartH + 10} textAnchor=\"middle\"\r\n              className=\"fill-[var(--text-tertiary)]\" fontSize=\"3.5\">{label}</text>\r\n          ) : null)}\r\n        </svg>\r\n      </div>\r\n      <div className=\"flex items-center gap-4 mt-1 justify-center\">\r\n        <span className=\"flex items-center gap-1 text-[9px] text-[var(--text-tertiary)]\">\r\n          <span className=\"w-3 h-0.5 bg-[var(--color-brand-500)] rounded\" /> Actual\r\n        </span>\r\n        <span className=\"flex items-center gap-1 text-[9px] text-[var(--text-tertiary)]\">\r\n          <span className=\"w-3 h-0.5 bg-[var(--border-secondary)] rounded border-dashed\" /> Ideal\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useMemo } from 'react';\r\nimport { BarChart3 } from 'lucide-react';\r\nimport { SECTION_TITLE } from './styles';\r\n\r\ninterface VelocityEntry {\r\n  sprint_name: string;\r\n  completed_points: number;\r\n  completed_tasks: number;\r\n  total_points: number;\r\n  total_tasks: number;\r\n}\r\n\r\ninterface VelocityChartProps {\r\n  history: VelocityEntry[];\r\n}\r\n\r\nexport default function VelocityChart({ history }: VelocityChartProps) {\r\n  const data = useMemo(() => {\r\n    if (!history?.length) return [];\r\n    return history.slice(-8);\r\n  }, [history]);\r\n\r\n  const avgVelocity = useMemo(() => {\r\n    if (!data.length) return 0;\r\n    return Math.round(data.reduce((s, d) => s + d.completed_points, 0) / data.length);\r\n  }, [data]);\r\n\r\n  const maxVal = useMemo(() => Math.max(...data.map(d => Math.max(d.total_points, d.completed_points)), 1), [data]);\r\n\r\n  if (data.length === 0) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-8 text-[var(--text-tertiary)]\">\r\n        <BarChart3 className=\"w-8 h-8 mb-2 opacity-40\" />\r\n        <p className=\"text-xs\">Velocity data builds as you complete sprints</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex items-center justify-between mb-3\">\r\n        <span className={SECTION_TITLE}>Velocity</span>\r\n        <span className=\"text-[10px] text-[var(--text-tertiary)]\">Avg: {avgVelocity} pts/sprint</span>\r\n      </div>\r\n      <div className=\"flex items-end gap-1.5\" style={{ height: 100 }}>\r\n        {data.map((d, i) => {\r\n          const totalH = (d.total_points / maxVal) * 100;\r\n          return (\r\n            <div key={i} className=\"flex-1 flex flex-col items-center gap-0.5 group relative\">\r\n              <div className=\"w-full flex flex-col items-center justify-end\" style={{ height: 80 }}>\r\n                <div className=\"w-full rounded-t relative overflow-hidden\" style={{ height: `${totalH}%`, minHeight: 2 }}>\r\n                  <div className=\"absolute inset-0 bg-[var(--surface-hover)] rounded-t\" />\r\n                  <div className=\"absolute bottom-0 left-0 right-0 bg-[var(--color-brand-500)]/80 rounded-t transition-all\" style={{ height: `${d.total_points > 0 ? (d.completed_points / d.total_points) * 100 : 0}%` }} />\r\n                </div>\r\n              </div>\r\n              <span className=\"text-[8px] text-[var(--text-tertiary)] truncate max-w-full text-center leading-tight\"\r\n                title={d.sprint_name}>\r\n                {d.sprint_name.length > 8 ? d.sprint_name.slice(0, 7) + '\\u2026' : d.sprint_name}\r\n              </span>\r\n              <div className=\"absolute -top-6 left-1/2 -translate-x-1/2 bg-[var(--bg-elevated)] border border-[var(--border-primary)] rounded px-1.5 py-0.5 text-[8px] text-[var(--text-primary)] whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10\">\r\n                {d.completed_points}/{d.total_points} pts\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      {avgVelocity > 0 && (\r\n        <div className=\"mt-2 h-px w-full relative\">\r\n          <div className=\"absolute inset-x-0 border-t border-dashed border-[var(--status-warning)]/30\" />\r\n          <span className=\"absolute right-0 -top-2 text-[8px] text-[var(--status-warning)]/60\">avg</span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { cn } from '@/lib/utils';\r\nimport { AlertTriangle, CheckCircle, AlertCircle, XCircle, Activity } from 'lucide-react';\r\nimport type { SprintHealthScore } from '@/types/godmode';\r\nimport { SECTION_TITLE } from './styles';\r\n\r\ninterface HealthScoreWidgetProps {\r\n  health: SprintHealthScore | null | undefined;\r\n  isLoading?: boolean;\r\n  compact?: boolean;\r\n}\r\n\r\nconst riskConfig = {\r\n  low: { color: 'text-[var(--status-success)]', bg: 'bg-[var(--status-success-bg)]', border: 'border-[var(--status-success)]/30', icon: CheckCircle, label: 'Healthy' },\r\n  medium: { color: 'text-[var(--status-warning)]', bg: 'bg-[var(--status-warning-bg)]', border: 'border-[var(--status-warning)]/30', icon: AlertTriangle, label: 'At Risk' },\r\n  high: { color: 'text-orange-400', bg: 'bg-orange-500/10', border: 'border-orange-500/30', icon: AlertCircle, label: 'High Risk' },\r\n  critical: { color: 'text-[var(--status-danger)]', bg: 'bg-[var(--status-danger-bg)]', border: 'border-[var(--status-danger)]/30', icon: XCircle, label: 'Critical' },\r\n};\r\n\r\nconst factorLabels: Record<string, string> = {\r\n  completion_rate: 'Completion',\r\n  time_progress: 'Time Elapsed',\r\n  velocity_trend: 'Velocity',\r\n  overdue_ratio: 'On-time',\r\n  distribution_balance: 'Balance',\r\n  knowledge_health: 'Knowledge',\r\n};\r\n\r\nconst countFactors = new Set(['open_risks', 'high_impact_risks', 'unresolved_questions']);\r\nconst countLabels: Record<string, string> = {\r\n  open_risks: 'Open Risks',\r\n  high_impact_risks: 'High-Impact Risks',\r\n  unresolved_questions: 'Unresolved Questions',\r\n};\r\n\r\nfunction ScoreRing({ score, size = 64, strokeWidth = 5, color }: { score: number; size?: number; strokeWidth?: number; color: string }) {\r\n  const radius = (size - strokeWidth) / 2;\r\n  const circumference = 2 * Math.PI * radius;\r\n  const offset = circumference - (score / 100) * circumference;\r\n  return (\r\n    <svg width={size} height={size} className=\"transform -rotate-90\">\r\n      <circle cx={size / 2} cy={size / 2} r={radius} fill=\"none\" stroke=\"var(--surface-hover)\" strokeWidth={strokeWidth} />\r\n      <circle cx={size / 2} cy={size / 2} r={radius} fill=\"none\" stroke={color} strokeWidth={strokeWidth}\r\n        strokeDasharray={circumference} strokeDashoffset={offset} strokeLinecap=\"round\"\r\n        className=\"transition-all duration-700 ease-out\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport default function HealthScoreWidget({ health, isLoading, compact }: HealthScoreWidgetProps) {\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center py-4\">\r\n        <Activity className=\"w-5 h-5 text-[var(--text-tertiary)] animate-pulse\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!health) return null;\r\n\r\n  const cfg = riskConfig[health.risk_level] || riskConfig.medium;\r\n  const RiskIcon = cfg.icon;\r\n  const scoreColor = health.score >= 75 ? '#22c55e' : health.score >= 50 ? '#eab308' : health.score >= 25 ? '#f97316' : '#ef4444';\r\n\r\n  if (compact) {\r\n    return (\r\n      <div className={cn('flex items-center gap-2 px-2.5 py-1.5 rounded-lg border', cfg.bg, cfg.border)}>\r\n        <div className=\"relative w-8 h-8\">\r\n          <ScoreRing score={health.score} size={32} strokeWidth={3} color={scoreColor} />\r\n          <span className=\"absolute inset-0 flex items-center justify-center text-[9px] font-bold\" style={{ color: scoreColor }}>\r\n            {health.score}\r\n          </span>\r\n        </div>\r\n        <div>\r\n          <span className={cn('text-[10px] font-medium', cfg.color)}>{cfg.label}</span>\r\n          {health.alerts.length > 0 && (\r\n            <p className=\"text-[9px] text-[var(--text-tertiary)] truncate max-w-[140px]\">{health.alerts[0]}</p>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <span className={SECTION_TITLE}>Sprint Health</span>\r\n        <div className={cn('flex items-center gap-1 text-[10px] font-medium px-2 py-0.5 rounded-full border', cfg.bg, cfg.color, cfg.border)}>\r\n          <RiskIcon className=\"w-3 h-3\" /> {cfg.label}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex items-center gap-4\">\r\n        <div className=\"relative w-16 h-16 shrink-0\">\r\n          <ScoreRing score={health.score} size={64} strokeWidth={5} color={scoreColor} />\r\n          <span className=\"absolute inset-0 flex items-center justify-center text-lg font-bold\" style={{ color: scoreColor }}>\r\n            {health.score}\r\n          </span>\r\n        </div>\r\n        <div className=\"flex-1 space-y-1.5\">\r\n          {Object.entries(health.factors)\r\n            .filter(([key]) => !countFactors.has(key))\r\n            .map(([key, val]) => {\r\n              const isInverse = key === 'overdue_ratio';\r\n              const displayVal = isInverse ? 100 - (val as number) : (val as number);\r\n              const barColor = displayVal >= 70 ? '#22c55e' : displayVal >= 40 ? '#eab308' : '#ef4444';\r\n              return (\r\n                <div key={key}>\r\n                  <div className=\"flex justify-between text-[9px] mb-0.5\">\r\n                    <span className=\"text-[var(--text-tertiary)]\">{factorLabels[key] || key}</span>\r\n                    <span className=\"text-[var(--text-secondary)] tabular-nums\">{displayVal}%</span>\r\n                  </div>\r\n                  <div className=\"h-1 rounded-full bg-[var(--surface-hover)] overflow-hidden\">\r\n                    <div className=\"h-full rounded-full transition-all duration-500\" style={{ width: `${displayVal}%`, backgroundColor: barColor }} />\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n        </div>\r\n      </div>\r\n\r\n      {Object.entries(health.factors).some(([key]) => countFactors.has(key) && (health.factors as any)[key] > 0) && (\r\n        <div className=\"flex flex-wrap gap-2\">\r\n          {Object.entries(health.factors)\r\n            .filter(([key, val]) => countFactors.has(key) && (val as number) > 0)\r\n            .map(([key, val]) => {\r\n              const isHighRisk = key === 'high_impact_risks';\r\n              const color = isHighRisk ? 'text-orange-400 bg-orange-500/10 border-orange-500/20' : 'text-[var(--status-warning)] bg-[var(--status-warning-bg)] border-[var(--status-warning)]/20';\r\n              return (\r\n                <span key={key} className={cn('text-[9px] px-2 py-0.5 rounded-full border font-medium tabular-nums', color)}>\r\n                  {val as number} {countLabels[key] || key}\r\n                </span>\r\n              );\r\n            })}\r\n        </div>\r\n      )}\r\n\r\n      {health.alerts.length > 0 && (\r\n        <div className=\"space-y-1\">\r\n          {health.alerts.map((alert, i) => (\r\n            <div key={i} className=\"flex items-start gap-1.5 text-[10px] text-[var(--status-warning)]\">\r\n              <AlertTriangle className=\"w-3 h-3 shrink-0 mt-0.5\" />\r\n              <span>{alert}</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useCallback } from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { GripVertical } from 'lucide-react';\r\nimport type { Action } from '@/types/godmode';\r\nimport OwnerBadge from '../sot/OwnerBadge';\r\nimport { SECTION_TITLE } from './styles';\r\n\r\ninterface KanbanBoardProps {\r\n  actions: Action[];\r\n  onStatusChange: (actionId: string, newStatus: Action['status']) => void;\r\n}\r\n\r\nconst COLUMNS: { id: Action['status']; label: string; color: string; dotColor: string }[] = [\r\n  { id: 'pending', label: 'To Do', color: 'border-[var(--text-tertiary)]/30', dotColor: 'bg-[var(--text-tertiary)]' },\r\n  { id: 'in_progress', label: 'In Progress', color: 'border-[var(--status-info)]/30', dotColor: 'bg-[var(--status-info)]' },\r\n  { id: 'overdue', label: 'Overdue', color: 'border-[var(--status-danger)]/30', dotColor: 'bg-[var(--status-danger)]' },\r\n  { id: 'completed', label: 'Done', color: 'border-[var(--status-success)]/30', dotColor: 'bg-[var(--status-success)]' },\r\n];\r\n\r\nexport default function KanbanBoard({ actions, onStatusChange }: KanbanBoardProps) {\r\n  const [dragId, setDragId] = useState<string | null>(null);\r\n  const [dragOverCol, setDragOverCol] = useState<string | null>(null);\r\n\r\n  const handleDragStart = useCallback((e: React.DragEvent, actionId: string) => {\r\n    setDragId(actionId);\r\n    e.dataTransfer.effectAllowed = 'move';\r\n    e.dataTransfer.setData('text/plain', actionId);\r\n    (e.currentTarget as HTMLElement).style.opacity = '0.4';\r\n  }, []);\r\n\r\n  const handleDragEnd = useCallback((e: React.DragEvent) => {\r\n    (e.currentTarget as HTMLElement).style.opacity = '1';\r\n    setDragId(null);\r\n    setDragOverCol(null);\r\n  }, []);\r\n\r\n  const handleDragOver = useCallback((e: React.DragEvent, colId: string) => {\r\n    e.preventDefault();\r\n    e.dataTransfer.dropEffect = 'move';\r\n    setDragOverCol(colId);\r\n  }, []);\r\n\r\n  const handleDragLeave = useCallback(() => {\r\n    setDragOverCol(null);\r\n  }, []);\r\n\r\n  const handleDrop = useCallback((e: React.DragEvent, colId: string) => {\r\n    e.preventDefault();\r\n    const actionId = e.dataTransfer.getData('text/plain');\r\n    if (actionId) {\r\n      const action = actions.find(a => a.id === actionId);\r\n      if (action && action.status !== colId) {\r\n        onStatusChange(actionId, colId as Action['status']);\r\n      }\r\n    }\r\n    setDragId(null);\r\n    setDragOverCol(null);\r\n  }, [actions, onStatusChange]);\r\n\r\n  const priorityDot = (p: string) =>\r\n    p === 'high' ? 'bg-[var(--status-danger)]' : p === 'medium' ? 'bg-[var(--status-warning)]' : 'bg-[var(--text-tertiary)]';\r\n\r\n  return (\r\n    <div>\r\n      <span className={cn(SECTION_TITLE, 'block mb-3')}>Kanban Board</span>\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3\">\r\n        {COLUMNS.map(col => {\r\n          const colActions = actions.filter(a => a.status === col.id);\r\n          const isOver = dragOverCol === col.id;\r\n          return (\r\n            <div\r\n              key={col.id}\r\n              onDragOver={e => handleDragOver(e, col.id)}\r\n              onDragLeave={handleDragLeave}\r\n              onDrop={e => handleDrop(e, col.id)}\r\n              className={cn(\r\n                'rounded-xl border bg-[var(--surface-secondary)] min-h-[200px] transition-colors',\r\n                col.color,\r\n                isOver && 'border-[var(--accent-primary)]/50 bg-[var(--status-info-bg)]'\r\n              )}\r\n            >\r\n              <div className=\"px-3 py-2 border-b border-[var(--border-primary)] flex items-center gap-2\">\r\n                <span className={cn('w-2 h-2 rounded-full', col.dotColor)} />\r\n                <span className=\"text-xs font-medium text-[var(--text-primary)]\">{col.label}</span>\r\n                <span className=\"text-[10px] text-[var(--text-tertiary)] ml-auto\">{colActions.length}</span>\r\n              </div>\r\n              <div className=\"p-2 space-y-1.5\">\r\n                {colActions.map(action => (\r\n                  <div\r\n                    key={action.id}\r\n                    draggable\r\n                    onDragStart={e => handleDragStart(e, action.id)}\r\n                    onDragEnd={handleDragEnd}\r\n                    className={cn(\r\n                      'bg-[var(--surface-primary)] border border-[var(--border-primary)] rounded-lg p-2.5 cursor-grab active:cursor-grabbing hover:border-[var(--accent-primary)]/30 transition-colors group',\r\n                      dragId === action.id && 'opacity-40'\r\n                    )}\r\n                  >\r\n                    <div className=\"flex items-start gap-1.5\">\r\n                      <GripVertical className=\"w-3 h-3 text-[var(--text-tertiary)] opacity-0 group-hover:opacity-100 transition-opacity shrink-0 mt-0.5\" />\r\n                      <div className=\"min-w-0 flex-1\">\r\n                        <p className=\"text-[11px] font-medium text-[var(--text-primary)] line-clamp-2 leading-tight\">\r\n                          {action.task || action.title || '(untitled)'}\r\n                        </p>\r\n                        <div className=\"flex items-center gap-1.5 mt-1.5\">\r\n                          {action.priority && (\r\n                            <span className={cn('w-1.5 h-1.5 rounded-full shrink-0', priorityDot(action.priority))} title={action.priority} />\r\n                          )}\r\n                          {action.task_points != null && (\r\n                            <span className=\"text-[8px] px-1 py-0.5 rounded bg-[var(--status-info-bg)] text-[var(--accent-primary)] tabular-nums\">{action.task_points}</span>\r\n                          )}\r\n                          {action.owner && <OwnerBadge name={action.owner} size=\"sm\" />}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n                {colActions.length === 0 && (\r\n                  <p className=\"text-[10px] text-[var(--text-tertiary)] text-center py-6\">\r\n                    {isOver ? 'Drop here' : 'No tasks'}\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useMemo } from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { GanttChartSquare } from 'lucide-react';\r\nimport type { Action } from '@/types/godmode';\r\nimport { SECTION_TITLE, STATUS_COLORS } from './styles';\r\n\r\ninterface GanttChartProps {\r\n  actions: Action[];\r\n  sprintStart: string;\r\n  sprintEnd: string;\r\n}\r\n\r\nconst statusColor = (s: string) => STATUS_COLORS[s] || STATUS_COLORS.pending;\r\n\r\nexport default function GanttChart({ actions, sprintStart, sprintEnd }: GanttChartProps) {\r\n  const data = useMemo(() => {\r\n    const start = new Date(sprintStart).getTime();\r\n    const end = new Date(sprintEnd).getTime();\r\n    const range = Math.max(1, end - start);\r\n\r\n    return actions.slice(0, 20).map(a => {\r\n      const taskStart = a.created_at ? new Date(a.created_at).getTime() : start;\r\n      const taskEnd = a.deadline ? new Date(a.deadline).getTime() : end;\r\n      const left = Math.max(0, Math.min(100, ((taskStart - start) / range) * 100));\r\n      const width = Math.max(2, Math.min(100 - left, ((taskEnd - taskStart) / range) * 100));\r\n      const hasDeps = (a.depends_on?.length ?? 0) > 0;\r\n      return { action: a, left, width, hasDeps };\r\n    });\r\n  }, [actions, sprintStart, sprintEnd]);\r\n\r\n  const today = useMemo(() => {\r\n    const start = new Date(sprintStart).getTime();\r\n    const end = new Date(sprintEnd).getTime();\r\n    const now = Date.now();\r\n    return Math.max(0, Math.min(100, ((now - start) / (end - start)) * 100));\r\n  }, [sprintStart, sprintEnd]);\r\n\r\n  const dateLabels = useMemo(() => {\r\n    const start = new Date(sprintStart);\r\n    const end = new Date(sprintEnd);\r\n    const range = (end.getTime() - start.getTime()) / 86400000;\r\n    const step = Math.max(1, Math.ceil(range / 6));\r\n    const labels: { label: string; pct: number }[] = [];\r\n    for (let i = 0; i <= range; i += step) {\r\n      const d = new Date(start.getTime() + i * 86400000);\r\n      labels.push({ label: `${d.getMonth() + 1}/${d.getDate()}`, pct: (i / range) * 100 });\r\n    }\r\n    return labels;\r\n  }, [sprintStart, sprintEnd]);\r\n\r\n  if (data.length === 0) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center py-8 text-[var(--text-tertiary)]\">\r\n        <GanttChartSquare className=\"w-8 h-8 mb-2 opacity-40\" />\r\n        <p className=\"text-xs\">No tasks to display on the timeline</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <span className={cn(SECTION_TITLE, 'block mb-3')}>Timeline</span>\r\n\r\n      <div className=\"relative h-5 mb-1\">\r\n        {dateLabels.map((d, i) => (\r\n          <span key={i} className=\"absolute text-[8px] text-[var(--text-tertiary)] -translate-x-1/2\" style={{ left: `${d.pct}%` }}>\r\n            {d.label}\r\n          </span>\r\n        ))}\r\n      </div>\r\n\r\n      <div className=\"relative\">\r\n        <div className=\"absolute top-0 bottom-0 w-px bg-[var(--status-warning)]/30 z-10\" style={{ left: `${today}%` }} />\r\n\r\n        <div className=\"space-y-1\">\r\n          {data.map(({ action, left, width, hasDeps }) => (\r\n            <div key={action.id} className=\"flex items-center gap-2 group h-7\">\r\n              <div className=\"w-24 shrink-0 truncate text-[10px] text-[var(--text-secondary)] pr-1\" title={action.task || action.title}>\r\n                {(action.task || action.title || '').slice(0, 18)}{(action.task || '').length > 18 ? '\\u2026' : ''}\r\n              </div>\r\n              <div className=\"flex-1 relative h-full\">\r\n                <div className=\"absolute inset-0 bg-[var(--surface-secondary)] rounded\" />\r\n                <div\r\n                  className={cn(\r\n                    'absolute h-4 top-1.5 rounded-sm transition-all cursor-default',\r\n                    hasDeps && 'ring-1 ring-purple-500/40'\r\n                  )}\r\n                  style={{\r\n                    left: `${left}%`,\r\n                    width: `${width}%`,\r\n                    backgroundColor: statusColor(action.status),\r\n                    opacity: action.status === 'completed' ? 0.6 : 0.8,\r\n                  }}\r\n                  title={`${action.task || action.title} (${action.status})${action.owner ? ` \\u2014 ${action.owner}` : ''}`}\r\n                />\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex items-center gap-3 mt-2 justify-center\">\r\n        {[\r\n          { label: 'Pending', key: 'pending' },\r\n          { label: 'In Progress', key: 'in_progress' },\r\n          { label: 'Completed', key: 'completed' },\r\n          { label: 'Overdue', key: 'overdue' },\r\n        ].map(l => (\r\n          <span key={l.label} className=\"flex items-center gap-1 text-[8px] text-[var(--text-tertiary)]\">\r\n            <span className=\"w-2 h-2 rounded-sm\" style={{ backgroundColor: STATUS_COLORS[l.key] }} /> {l.label}\r\n          </span>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { Plus, X, Loader2, Sparkles, ThumbsUp, ThumbsDown, ListChecks } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { useSprintRetrospective } from '../../hooks/useGodMode';\r\nimport { CARD_FLAT, INPUT, SECTION_TITLE } from './styles';\r\n\r\ninterface RetrospectivePanelProps {\r\n  sprintId: string;\r\n}\r\n\r\nfunction EditableList({ items, onAdd, onRemove, placeholder, color }: {\r\n  items: string[];\r\n  onAdd: (item: string) => void;\r\n  onRemove: (idx: number) => void;\r\n  placeholder: string;\r\n  color: string;\r\n}) {\r\n  const [input, setInput] = useState('');\r\n  const handleAdd = () => {\r\n    if (!input.trim()) return;\r\n    onAdd(input.trim());\r\n    setInput('');\r\n  };\r\n  return (\r\n    <div className=\"space-y-1.5\">\r\n      {items.map((item, i) => (\r\n        <div key={i} className=\"flex items-start gap-2 group\">\r\n          <span className={cn('w-1.5 h-1.5 rounded-full mt-1.5 shrink-0', color)} />\r\n          <span className=\"text-xs text-[var(--text-secondary)] flex-1\">{item}</span>\r\n          <button onClick={() => onRemove(i)} className=\"text-[var(--text-tertiary)] hover:text-[var(--status-danger)] opacity-0 group-hover:opacity-100 transition-opacity\">\r\n            <X className=\"w-3 h-3\" />\r\n          </button>\r\n        </div>\r\n      ))}\r\n      <div className=\"flex gap-1.5\">\r\n        <input value={input} onChange={e => setInput(e.target.value)} onKeyDown={e => e.key === 'Enter' && handleAdd()}\r\n          className={cn(INPUT, 'w-full')} placeholder={placeholder} />\r\n        <button onClick={handleAdd} className=\"shrink-0 w-7 h-7 rounded-lg bg-[var(--surface-secondary)] hover:bg-[var(--surface-hover)] flex items-center justify-center\">\r\n          <Plus className=\"w-3.5 h-3.5 text-[var(--text-tertiary)]\" />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function RetrospectivePanel({ sprintId }: RetrospectivePanelProps) {\r\n  const retroMut = useSprintRetrospective();\r\n  const [wentWell, setWentWell] = useState<string[]>([]);\r\n  const [wentWrong, setWentWrong] = useState<string[]>([]);\r\n  const [actionItems, setActionItems] = useState<string[]>([]);\r\n  const [aiSuggestions, setAiSuggestions] = useState('');\r\n\r\n  const handleGenerate = () => {\r\n    retroMut.mutate({ sprintId, went_well: wentWell, went_wrong: wentWrong, action_items: actionItems }, {\r\n      onSuccess: (d: any) => {\r\n        setAiSuggestions(d?.ai_suggestions || '');\r\n        toast.success('Retrospective generated');\r\n      },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <span className={SECTION_TITLE}>Sprint Retrospective</span>\r\n        <button onClick={handleGenerate} disabled={retroMut.isPending}\r\n          className=\"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-purple-500/10 text-purple-400 hover:bg-purple-500/20 disabled:opacity-50\">\r\n          {retroMut.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Sparkles className=\"w-3.5 h-3.5\" />}\r\n          AI Insights\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\r\n        <div className={cn(CARD_FLAT, 'p-3')}>\r\n          <div className=\"flex items-center gap-1.5 mb-2\">\r\n            <ThumbsUp className=\"w-3.5 h-3.5 text-[var(--status-success)]\" />\r\n            <span className=\"text-xs font-medium text-[var(--status-success)]\">What Went Well</span>\r\n          </div>\r\n          <EditableList\r\n            items={wentWell}\r\n            onAdd={item => setWentWell(prev => [...prev, item])}\r\n            onRemove={idx => setWentWell(prev => prev.filter((_, i) => i !== idx))}\r\n            placeholder=\"Add positive...\"\r\n            color=\"bg-[var(--status-success)]\"\r\n          />\r\n        </div>\r\n\r\n        <div className={cn(CARD_FLAT, 'p-3')}>\r\n          <div className=\"flex items-center gap-1.5 mb-2\">\r\n            <ThumbsDown className=\"w-3.5 h-3.5 text-[var(--status-danger)]\" />\r\n            <span className=\"text-xs font-medium text-[var(--status-danger)]\">What Needs Improvement</span>\r\n          </div>\r\n          <EditableList\r\n            items={wentWrong}\r\n            onAdd={item => setWentWrong(prev => [...prev, item])}\r\n            onRemove={idx => setWentWrong(prev => prev.filter((_, i) => i !== idx))}\r\n            placeholder=\"Add improvement...\"\r\n            color=\"bg-[var(--status-danger)]\"\r\n          />\r\n        </div>\r\n\r\n        <div className={cn(CARD_FLAT, 'p-3')}>\r\n          <div className=\"flex items-center gap-1.5 mb-2\">\r\n            <ListChecks className=\"w-3.5 h-3.5 text-[var(--accent-primary)]\" />\r\n            <span className=\"text-xs font-medium text-[var(--accent-primary)]\">Action Items</span>\r\n          </div>\r\n          <EditableList\r\n            items={actionItems}\r\n            onAdd={item => setActionItems(prev => [...prev, item])}\r\n            onRemove={idx => setActionItems(prev => prev.filter((_, i) => i !== idx))}\r\n            placeholder=\"Add action item...\"\r\n            color=\"bg-[var(--accent-primary)]\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {aiSuggestions && (\r\n        <div className={cn(CARD_FLAT, 'p-4')}>\r\n          <span className=\"text-[10px] font-bold text-purple-400 uppercase tracking-[0.1em]\">AI Insights</span>\r\n          <div className=\"mt-2 text-xs text-[var(--text-secondary)] whitespace-pre-wrap leading-relaxed\">{aiSuggestions}</div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { Loader2, Sparkles, User, CheckCircle, ArrowRight, AlertTriangle } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { useSprintStandup } from '../../hooks/useGodMode';\r\nimport type { SprintStandup, StandupEntry } from '@/types/godmode';\r\nimport { CARD_FLAT, SECTION_TITLE } from './styles';\r\n\r\ninterface StandupPanelProps {\r\n  sprintId: string;\r\n}\r\n\r\nexport default function StandupPanel({ sprintId }: StandupPanelProps) {\r\n  const standupMut = useSprintStandup();\r\n  const [standup, setStandup] = useState<SprintStandup | null>(null);\r\n\r\n  const handleGenerate = () => {\r\n    standupMut.mutate(sprintId, {\r\n      onSuccess: (d: any) => {\r\n        setStandup(d as SprintStandup);\r\n        toast.success('Standup generated');\r\n      },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <span className={SECTION_TITLE}>Daily Standup</span>\r\n        <button onClick={handleGenerate} disabled={standupMut.isPending}\r\n          className=\"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-purple-500/10 text-purple-400 hover:bg-purple-500/20 disabled:opacity-50\">\r\n          {standupMut.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Sparkles className=\"w-3.5 h-3.5\" />}\r\n          Generate Standup\r\n        </button>\r\n      </div>\r\n\r\n      {standup && (\r\n        <>\r\n          <p className=\"text-[10px] text-[var(--text-tertiary)]\">{standup.date}</p>\r\n\r\n          {standup.ai_summary && (\r\n            <div className={cn(CARD_FLAT, 'p-3')}>\r\n              <span className=\"text-[10px] font-bold text-purple-400 uppercase tracking-[0.1em]\">AI Summary</span>\r\n              <p className=\"mt-1 text-xs text-[var(--text-secondary)] whitespace-pre-wrap\">{standup.ai_summary}</p>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"space-y-2\">\r\n            {(standup.entries || []).map((entry, i) => (\r\n              <div key={i} className={cn(CARD_FLAT, 'p-3')}>\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <User className=\"w-3.5 h-3.5 text-[var(--accent-primary)]\" />\r\n                  <span className=\"text-xs font-medium text-[var(--text-primary)]\">{entry.person}</span>\r\n                </div>\r\n                <div className=\"space-y-1.5 pl-5\">\r\n                  {entry.done.length > 0 && (\r\n                    <div>\r\n                      <span className=\"text-[9px] text-[var(--status-success)] uppercase tracking-wider font-medium\">Done</span>\r\n                      {entry.done.map((d, j) => (\r\n                        <div key={j} className=\"flex items-start gap-1.5 mt-0.5\">\r\n                          <CheckCircle className=\"w-3 h-3 text-[var(--status-success)] shrink-0 mt-0.5\" />\r\n                          <span className=\"text-[11px] text-[var(--text-secondary)]\">{d}</span>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                  {entry.doing.length > 0 && (\r\n                    <div>\r\n                      <span className=\"text-[9px] text-[var(--accent-primary)] uppercase tracking-wider font-medium\">Doing</span>\r\n                      {entry.doing.map((d, j) => (\r\n                        <div key={j} className=\"flex items-start gap-1.5 mt-0.5\">\r\n                          <ArrowRight className=\"w-3 h-3 text-[var(--accent-primary)] shrink-0 mt-0.5\" />\r\n                          <span className=\"text-[11px] text-[var(--text-secondary)]\">{d}</span>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                  {entry.blockers.length > 0 && (\r\n                    <div>\r\n                      <span className=\"text-[9px] text-[var(--status-danger)] uppercase tracking-wider font-medium\">Blockers</span>\r\n                      {entry.blockers.map((d, j) => (\r\n                        <div key={j} className=\"flex items-start gap-1.5 mt-0.5\">\r\n                          <AlertTriangle className=\"w-3 h-3 text-[var(--status-danger)] shrink-0 mt-0.5\" />\r\n                          <span className=\"text-[11px] text-[var(--text-secondary)]\">{d}</span>\r\n                        </div>\r\n                      ))}\r\n                    </div>\r\n                  )}\r\n                  {entry.done.length === 0 && entry.doing.length === 0 && entry.blockers.length === 0 && (\r\n                    <span className=\"text-[10px] text-[var(--text-tertiary)]\">No updates</span>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {!standup && !standupMut.isPending && (\r\n        <p className=\"text-xs text-[var(--text-tertiary)] text-center py-4\">Click \"Generate Standup\" to get today's team summary</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useMemo } from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { Loader2, Sparkles, Plus, X, Users } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { useSprintCapacity } from '../../hooks/useGodMode';\r\nimport type { SprintCapacity, Action } from '@/types/godmode';\r\nimport { CARD_FLAT, INPUT, SECTION_TITLE } from './styles';\r\n\r\ninterface CapacityPanelProps {\r\n  sprintId: string;\r\n  actions: Action[];\r\n}\r\n\r\nexport default function CapacityPanel({ sprintId, actions }: CapacityPanelProps) {\r\n  const capacityMut = useSprintCapacity();\r\n  const [capacities, setCapacities] = useState<Record<string, number>>({});\r\n  const [result, setResult] = useState<{ capacity: SprintCapacity[]; ai_recommendation: string | null } | null>(null);\r\n  const [newPerson, setNewPerson] = useState('');\r\n  const [newPoints, setNewPoints] = useState('');\r\n\r\n  const owners = useMemo(() => {\r\n    const set = new Set<string>();\r\n    actions.forEach(a => { if (a.owner?.trim()) set.add(a.owner.trim()); });\r\n    Object.keys(capacities).forEach(k => set.add(k));\r\n    return Array.from(set).sort();\r\n  }, [actions, capacities]);\r\n\r\n  const addPerson = () => {\r\n    if (!newPerson.trim() || !newPoints) return;\r\n    setCapacities(prev => ({ ...prev, [newPerson.trim()]: Number(newPoints) || 0 }));\r\n    setNewPerson('');\r\n    setNewPoints('');\r\n  };\r\n\r\n  const handleAnalyze = () => {\r\n    if (Object.keys(capacities).length === 0) {\r\n      toast.error('Set capacity for at least one person');\r\n      return;\r\n    }\r\n    capacityMut.mutate({ sprintId, capacities }, {\r\n      onSuccess: (d: any) => {\r\n        setResult(d);\r\n        toast.success('Capacity analysis complete');\r\n      },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <span className={SECTION_TITLE}>Capacity Planning</span>\r\n        <button onClick={handleAnalyze} disabled={capacityMut.isPending}\r\n          className=\"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-purple-500/10 text-purple-400 hover:bg-purple-500/20 disabled:opacity-50\">\r\n          {capacityMut.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Sparkles className=\"w-3.5 h-3.5\" />}\r\n          Analyze Capacity\r\n        </button>\r\n      </div>\r\n\r\n      <div className={cn(CARD_FLAT, 'p-3 space-y-2')}>\r\n        <span className=\"text-[10px] text-[var(--text-tertiary)] uppercase tracking-wider\">Team Capacity (points per sprint)</span>\r\n        {owners.map(person => (\r\n          <div key={person} className=\"flex items-center gap-2\">\r\n            <Users className=\"w-3 h-3 text-[var(--text-tertiary)]\" />\r\n            <span className=\"text-xs text-[var(--text-primary)] flex-1 truncate\">{person}</span>\r\n            <input\r\n              type=\"number\" min=\"0\"\r\n              value={capacities[person] ?? ''}\r\n              onChange={e => setCapacities(prev => ({ ...prev, [person]: Number(e.target.value) || 0 }))}\r\n              placeholder=\"pts\"\r\n              className={cn(INPUT, 'w-16 text-center')}\r\n            />\r\n            {capacities[person] !== undefined && (\r\n              <button onClick={() => setCapacities(prev => { const n = { ...prev }; delete n[person]; return n; })}\r\n                className=\"text-[var(--text-tertiary)] hover:text-[var(--status-danger)]\">\r\n                <X className=\"w-3 h-3\" />\r\n              </button>\r\n            )}\r\n          </div>\r\n        ))}\r\n        <div className=\"flex items-center gap-2 pt-1\">\r\n          <input value={newPerson} onChange={e => setNewPerson(e.target.value)} placeholder=\"Name\" className={cn(INPUT, 'flex-1')} />\r\n          <input type=\"number\" min=\"0\" value={newPoints} onChange={e => setNewPoints(e.target.value)} placeholder=\"pts\"\r\n            className={cn(INPUT, 'w-16 text-center')} onKeyDown={e => e.key === 'Enter' && addPerson()} />\r\n          <button onClick={addPerson} className=\"w-7 h-7 rounded-lg bg-[var(--surface-secondary)] hover:bg-[var(--surface-hover)] flex items-center justify-center\">\r\n            <Plus className=\"w-3.5 h-3.5 text-[var(--text-tertiary)]\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {result && (\r\n        <>\r\n          <div className=\"space-y-2\">\r\n            {result.capacity.map(c => {\r\n              const pct = c.utilization;\r\n              const barColor = c.over_allocated ? '#ef4444' : pct > 80 ? '#f59e0b' : '#22c55e';\r\n              const barWidth = Math.min(100, pct);\r\n              return (\r\n                <div key={c.person} className={cn(CARD_FLAT, 'p-3')}>\r\n                  <div className=\"flex items-center justify-between mb-1\">\r\n                    <span className=\"text-xs font-medium text-[var(--text-primary)]\">{c.person}</span>\r\n                    <span className=\"text-[10px] tabular-nums\" style={{ color: barColor }}>\r\n                      {c.assigned_points}/{c.available_points} pts ({pct}%)\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"h-2 rounded-full bg-[var(--surface-hover)] overflow-hidden\">\r\n                    <div className=\"h-full rounded-full transition-all\" style={{ width: `${barWidth}%`, backgroundColor: barColor }} />\r\n                  </div>\r\n                  {c.over_allocated && (\r\n                    <p className=\"text-[9px] text-[var(--status-danger)] mt-1\">Over-allocated by {c.assigned_points - c.available_points} points</p>\r\n                  )}\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          {result.ai_recommendation && (\r\n            <div className={cn(CARD_FLAT, 'p-4')}>\r\n              <span className=\"text-[10px] font-bold text-purple-400 uppercase tracking-[0.1em]\">AI Recommendation</span>\r\n              <div className=\"mt-2 text-xs text-[var(--text-secondary)] whitespace-pre-wrap leading-relaxed\">{result.ai_recommendation}</div>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { useState } from 'react';\r\nimport { cn } from '@/lib/utils';\r\nimport { Loader2, Sparkles } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { useSprintEstimatePoints } from '../../hooks/useGodMode';\r\n\r\ninterface EstimatePointsButtonProps {\r\n  sprintId: string;\r\n  taskDescription: string;\r\n  onEstimate?: (points: number) => void;\r\n  className?: string;\r\n}\r\n\r\nexport default function EstimatePointsButton({ sprintId, taskDescription, onEstimate, className }: EstimatePointsButtonProps) {\r\n  const estimateMut = useSprintEstimatePoints();\r\n  const [result, setResult] = useState<{ points: number; confidence: string; reasoning: string } | null>(null);\r\n\r\n  const handleEstimate = () => {\r\n    if (!taskDescription.trim()) { toast.error('Task description needed'); return; }\r\n    estimateMut.mutate({ sprintId, task: taskDescription }, {\r\n      onSuccess: (d: any) => {\r\n        setResult(d);\r\n        onEstimate?.(d.points);\r\n        toast.success(`Estimated: ${d.points} points (${d.confidence} confidence)`);\r\n      },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const confColor = result?.confidence === 'high'\r\n    ? 'text-[var(--status-success)]'\r\n    : result?.confidence === 'medium'\r\n      ? 'text-[var(--status-warning)]'\r\n      : 'text-orange-400';\r\n\r\n  return (\r\n    <div className={cn('inline-flex items-center gap-2', className)}>\r\n      <button onClick={handleEstimate} disabled={estimateMut.isPending}\r\n        className=\"inline-flex items-center gap-1 px-2 py-1 text-[10px] font-medium rounded-md bg-purple-500/10 text-purple-400 hover:bg-purple-500/20 disabled:opacity-50 transition-colors\"\r\n        title=\"AI estimate story points\">\r\n        {estimateMut.isPending ? <Loader2 className=\"w-3 h-3 animate-spin\" /> : <Sparkles className=\"w-3 h-3\" />}\r\n        Estimate\r\n      </button>\r\n      {result && (\r\n        <div className=\"flex items-center gap-1.5\">\r\n          <span className=\"text-xs font-bold text-[var(--accent-primary)] tabular-nums\">{result.points} pts</span>\r\n          <span className={cn('text-[9px]', confColor)}>({result.confidence})</span>\r\n          {result.reasoning && (\r\n            <span className=\"text-[9px] text-[var(--text-tertiary)] max-w-[200px] truncate\" title={result.reasoning}>\r\n              {result.reasoning}\r\n            </span>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useMemo, useCallback, useEffect } from 'react';\r\nimport { useQueryClient } from '@tanstack/react-query';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport {\r\n  Plus, Loader2, Calendar, Zap, FileBarChart, ChevronRight,\r\n  ArrowLeft, CheckCircle, Circle, Clock, Target, Trash2,\r\n  Edit3, Play, Square, Sparkles, AlertTriangle, X,\r\n  Copy, LayoutGrid, GanttChartSquare, Activity, Users, MessageSquare, BarChart3,\r\n  PlusCircle, Unlink, FileText, Presentation, Building2, Printer,\r\n} from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { cn } from '../lib/utils';\r\nimport { ErrorState } from '../components/shared/ErrorState';\r\nimport OwnerBadge from '../components/sot/OwnerBadge';\r\nimport BreakdownChart from '../components/sprints/BreakdownChart';\r\nimport BurndownChart from '../components/sprints/BurndownChart';\r\nimport VelocityChart from '../components/sprints/VelocityChart';\r\nimport HealthScoreWidget from '../components/sprints/HealthScoreWidget';\r\nimport KanbanBoard from '../components/sprints/KanbanBoard';\r\nimport GanttChart from '../components/sprints/GanttChart';\r\nimport RetrospectivePanel from '../components/sprints/RetrospectivePanel';\r\nimport StandupPanel from '../components/sprints/StandupPanel';\r\nimport CapacityPanel from '../components/sprints/CapacityPanel';\r\nimport EstimatePointsButton from '../components/sprints/EstimatePointsButton';\r\nimport {\r\n  CARD, BTN_PRIMARY, BTN_SECONDARY, BTN_DANGER, INPUT, SECTION_TITLE,\r\n} from '../components/sprints/styles';\r\nimport type { Sprint, Action, ProposedTask, SprintReport, SprintGenerateResult } from '../types/godmode';\r\nimport {\r\n  useSprints,\r\n  useCreateSprint,\r\n  useUpdateSprint,\r\n  useDeleteSprint,\r\n  useSprintStatusTransition,\r\n  useSprint,\r\n  useSprintGenerateTasks,\r\n  useSprintApplyTasks,\r\n  useSprintReport,\r\n  useSprintReportAnalyze,\r\n  useSprintBusinessReport,\r\n  useSprintVelocity,\r\n  useSprintHealth,\r\n  useSprintClone,\r\n  useUpdateAction,\r\n  useCreateAction,\r\n  useSprintReportDocument,\r\n  useSprintReportPresentation,\r\n  useDocuments,\r\n  useUpdateDocument,\r\n  type DocumentItem,\r\n} from '../hooks/useGodMode';\r\n\r\nconst STYLE_OPTIONS = [\r\n  { key: 'sprint_report_style_corporate_classic', label: 'Corporate Classic' },\r\n  { key: 'sprint_report_style_modern_minimal', label: 'Modern Minimal' },\r\n  { key: 'sprint_report_style_startup_tech', label: 'Startup Tech' },\r\n  { key: 'sprint_report_style_consultancy', label: 'Consultancy' },\r\n];\r\n\r\nfunction downloadHtml(html: string, filename: string) {\r\n  const blob = new Blob([html], { type: 'text/html' });\r\n  const url = URL.createObjectURL(blob);\r\n  const a = document.createElement('a');\r\n  a.href = url;\r\n  a.download = filename;\r\n  a.click();\r\n  URL.revokeObjectURL(url);\r\n}\r\n\r\nfunction openHtmlForPdf(html: string) {\r\n  const blob = new Blob([html], { type: 'text/html' });\r\n  const url = URL.createObjectURL(blob);\r\n  const win = window.open(url, '_blank');\r\n  if (win) {\r\n    win.addEventListener('load', () => {\r\n      setTimeout(() => win.print(), 600);\r\n    });\r\n  }\r\n}\r\n\r\nconst statusConfig: Record<string, { color: string; bg: string; border: string; icon: typeof Circle }> = {\r\n  planning: { color: 'text-[var(--text-tertiary)]', bg: 'bg-[var(--surface-secondary)]', border: 'border-[var(--border-secondary)]', icon: Circle },\r\n  active: { color: 'text-[var(--status-success)]', bg: 'bg-[var(--status-success-bg)]', border: 'border-[var(--status-success)]/30', icon: Clock },\r\n  completed: { color: 'text-[var(--status-info)]', bg: 'bg-[var(--status-info-bg)]', border: 'border-[var(--status-info)]/30', icon: CheckCircle },\r\n};\r\n\r\nconst taskStatusDot = (s: string) =>\r\n  s === 'completed' ? 'bg-[var(--status-success)]' :\r\n  s === 'in_progress' ? 'bg-[var(--status-info)]' :\r\n  s === 'overdue' ? 'bg-[var(--status-danger)]' : 'bg-[var(--text-tertiary)]';\r\n\r\nfunction normalizeSprint(raw: any): Sprint {\r\n  return {\r\n    id: raw.id,\r\n    name: raw.name || '',\r\n    start_date: raw.start_date || raw.startDate || '',\r\n    end_date: raw.end_date || raw.endDate || '',\r\n    context: raw.context || '',\r\n    goals: raw.goals || [],\r\n    status: raw.status || 'planning',\r\n    analysis_start_date: raw.analysis_start_date || '',\r\n    analysis_end_date: raw.analysis_end_date || '',\r\n    project_id: raw.project_id || '',\r\n    created_at: raw.created_at || '',\r\n    updated_at: raw.updated_at || '',\r\n  };\r\n}\r\n\r\nfunction CreateSprintForm({ onCreated }: { onCreated: () => void }) {\r\n  const createSprint = useCreateSprint();\r\n  const [form, setForm] = useState({ name: '', start_date: '', end_date: '', context: '', goals: '', analysis_start_date: '', analysis_end_date: '' });\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!form.name || !form.start_date || !form.end_date) {\r\n      toast.error('Name, start date and end date are required');\r\n      return;\r\n    }\r\n    createSprint.mutate({\r\n      name: form.name,\r\n      start_date: form.start_date,\r\n      end_date: form.end_date,\r\n      context: form.context || undefined,\r\n      goals: form.goals ? form.goals.split('\\n').filter(g => g.trim()) : undefined,\r\n      analysis_start_date: form.analysis_start_date || undefined,\r\n      analysis_end_date: form.analysis_end_date || undefined,\r\n    }, {\r\n      onSuccess: () => {\r\n        toast.success('Sprint created');\r\n        setForm({ name: '', start_date: '', end_date: '', context: '', goals: '', analysis_start_date: '', analysis_end_date: '' });\r\n        onCreated();\r\n      },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className={cn(CARD, 'p-5 space-y-4')}>\r\n      <h3 className={SECTION_TITLE}>New Sprint</h3>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n        <div>\r\n          <label className=\"block text-[10px] font-medium text-[var(--text-tertiary)] mb-1 uppercase tracking-wider\">Name *</label>\r\n          <input value={form.name} onChange={e => setForm(f => ({ ...f, name: e.target.value }))} className={cn(INPUT, 'w-full')} placeholder=\"Sprint 1\" required />\r\n        </div>\r\n        <div>\r\n          <label className=\"block text-[10px] font-medium text-[var(--text-tertiary)] mb-1 uppercase tracking-wider\">Start Date *</label>\r\n          <input type=\"date\" value={form.start_date} onChange={e => setForm(f => ({ ...f, start_date: e.target.value }))} className={cn(INPUT, 'w-full')} required />\r\n        </div>\r\n        <div>\r\n          <label className=\"block text-[10px] font-medium text-[var(--text-tertiary)] mb-1 uppercase tracking-wider\">End Date *</label>\r\n          <input type=\"date\" value={form.end_date} onChange={e => setForm(f => ({ ...f, end_date: e.target.value }))} className={cn(INPUT, 'w-full')} required />\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <label className=\"block text-[10px] font-medium text-[var(--text-tertiary)] mb-1 uppercase tracking-wider\">Context</label>\r\n        <input value={form.context} onChange={e => setForm(f => ({ ...f, context: e.target.value }))} className={cn(INPUT, 'w-full')} placeholder=\"Focus areas, constraints...\" />\r\n      </div>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        <div>\r\n          <label className=\"block text-[10px] font-medium text-[var(--text-tertiary)] mb-1 uppercase tracking-wider\">Goals (one per line)</label>\r\n          <textarea value={form.goals} onChange={e => setForm(f => ({ ...f, goals: e.target.value }))} rows={3} className={cn(INPUT, 'w-full resize-none')} placeholder=\"Complete feature X&#10;Fix bug Y\" />\r\n        </div>\r\n        <div className=\"space-y-3\">\r\n          <div>\r\n            <label className=\"block text-[10px] font-medium text-[var(--text-tertiary)] mb-1 uppercase tracking-wider\">Analysis Start Date</label>\r\n            <input type=\"date\" value={form.analysis_start_date} onChange={e => setForm(f => ({ ...f, analysis_start_date: e.target.value }))} className={cn(INPUT, 'w-full')} />\r\n          </div>\r\n          <div>\r\n            <label className=\"block text-[10px] font-medium text-[var(--text-tertiary)] mb-1 uppercase tracking-wider\">Analysis End Date</label>\r\n            <input type=\"date\" value={form.analysis_end_date} onChange={e => setForm(f => ({ ...f, analysis_end_date: e.target.value }))} className={cn(INPUT, 'w-full')} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"flex justify-end\">\r\n        <button type=\"submit\" disabled={createSprint.isPending} className={BTN_PRIMARY}>\r\n          {createSprint.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Plus className=\"w-3.5 h-3.5\" />}\r\n          Create Sprint\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n\r\ntype DetailTab = 'overview' | 'kanban' | 'timeline' | 'burndown' | 'standup' | 'retro' | 'capacity' | 'documents' | 'report';\r\n\r\nconst DETAIL_TABS: { id: DetailTab; label: string; icon: typeof Circle }[] = [\r\n  { id: 'overview', label: 'Overview', icon: BarChart3 },\r\n  { id: 'kanban', label: 'Kanban', icon: LayoutGrid },\r\n  { id: 'timeline', label: 'Timeline', icon: GanttChartSquare },\r\n  { id: 'burndown', label: 'Burndown', icon: Activity },\r\n  { id: 'standup', label: 'Standup', icon: MessageSquare },\r\n  { id: 'capacity', label: 'Capacity', icon: Users },\r\n  { id: 'documents', label: 'Documents', icon: FileText },\r\n  { id: 'retro', label: 'Retro', icon: Target },\r\n  { id: 'report', label: 'Report & Export', icon: FileBarChart },\r\n];\r\n\r\nfunction SprintDocumentsPanel({ sprintId }: { sprintId: string }) {\r\n  const docs = useDocuments({ sprint_id: sprintId, limit: 100 });\r\n  const updateDoc = useUpdateDocument();\r\n  const docList: DocumentItem[] = docs.data?.documents ?? [];\r\n\r\n  if (docs.isLoading) {\r\n    return <div className=\"flex justify-center py-12\"><Loader2 className=\"w-6 h-6 animate-spin text-[var(--accent-primary)]\" /></div>;\r\n  }\r\n\r\n  if (docList.length === 0) {\r\n    return (\r\n      <div className={CARD + ' p-8 text-center'}>\r\n        <FileText className=\"w-10 h-10 mx-auto mb-3 text-[var(--text-tertiary)]\" />\r\n        <p className=\"text-sm text-[var(--text-tertiary)]\">No documents associated with this sprint.</p>\r\n        <p className=\"text-xs text-[var(--text-tertiary)] mt-1\">Import files from Krisp or assign existing documents to this sprint in the Files page.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <div className=\"flex items-center justify-between mb-2\">\r\n        <p className=\"text-xs text-[var(--text-tertiary)]\">{docList.length} document(s) in this sprint</p>\r\n      </div>\r\n      {docList.map(doc => {\r\n        const d = doc as Record<string, unknown>;\r\n        const fileSize = d.file_size as number | undefined;\r\n        return (\r\n          <div key={doc.id} className={CARD + ' p-3 flex items-center gap-3'}>\r\n            <FileText className=\"w-4 h-4 text-[var(--text-tertiary)] flex-shrink-0\" />\r\n            <div className=\"flex-1 min-w-0\">\r\n              <p className=\"text-sm font-medium text-[var(--text-primary)] truncate\">{doc.original_filename || doc.filename}</p>\r\n              <div className=\"flex items-center gap-2 mt-0.5\">\r\n                {doc.type && <span className=\"text-[10px] text-[var(--text-tertiary)] capitalize\">{doc.type}</span>}\r\n                {doc.created_at && <span className=\"text-[10px] text-[var(--text-tertiary)]\">{new Date(doc.created_at).toLocaleDateString()}</span>}\r\n                {fileSize && <span className=\"text-[10px] text-[var(--text-tertiary)]\">{(fileSize / 1024).toFixed(1)} KB</span>}\r\n              </div>\r\n            </div>\r\n            <span className={`text-[10px] px-2 py-0.5 rounded-full font-medium ${\r\n              doc.status === 'processed' || doc.status === 'completed' ? 'bg-green-500/10 text-green-400' :\r\n              doc.status === 'processing' ? 'bg-blue-500/10 text-blue-400' : 'bg-yellow-500/10 text-yellow-400'\r\n            }`}>{doc.status || ''}</span>\r\n            <button\r\n              onClick={() => updateDoc.mutate({ id: doc.id, sprint_id: null }, {\r\n                onSuccess: () => toast.success('Removed from sprint'),\r\n              })}\r\n              className=\"p-1.5 text-[var(--text-tertiary)] hover:text-red-400 transition-colors\"\r\n              title=\"Remove from sprint\"\r\n            >\r\n              <Unlink className=\"w-3.5 h-3.5\" />\r\n            </button>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction SprintDetail({ sprintId, onBack }: { sprintId: string; onBack: () => void }) {\r\n  const queryClient = useQueryClient();\r\n  const { data: sprintRaw, isLoading } = useSprint(sprintId);\r\n  const { data: reportRaw, isLoading: reportLoading, error: reportError } = useSprintReport(sprintId);\r\n  const { data: velocityRaw, error: velocityError } = useSprintVelocity(sprintId);\r\n  const { data: healthRaw, isLoading: healthLoading, error: healthError } = useSprintHealth(sprintId);\r\n  const generateTasks = useSprintGenerateTasks();\r\n  const applyTasks = useSprintApplyTasks();\r\n  const analyzeMut = useSprintReportAnalyze();\r\n  const businessMut = useSprintBusinessReport();\r\n  const updateSprint = useUpdateSprint();\r\n  const deleteSprint = useDeleteSprint();\r\n  const transitionStatus = useSprintStatusTransition();\r\n  const cloneSprint = useSprintClone();\r\n  const updateAction = useUpdateAction();\r\n  const createAction = useCreateAction();\r\n\r\n  const [activeTab, setActiveTab] = useState<DetailTab>('overview');\r\n  const [showAddTask, setShowAddTask] = useState(false);\r\n  const [newTask, setNewTask] = useState({ task: '', owner: '', priority: 'medium' });\r\n  const [generatedResult, setGeneratedResult] = useState<SprintGenerateResult | null>(null);\r\n  const [selectedNewTasks, setSelectedNewTasks] = useState<Set<number>>(new Set());\r\n  const [selectedExisting, setSelectedExisting] = useState<Set<string>>(new Set());\r\n  const [analysisText, setAnalysisText] = useState('');\r\n  const [businessText, setBusinessText] = useState('');\r\n  const [editing, setEditing] = useState(false);\r\n  const [editForm, setEditForm] = useState({ name: '', context: '', goals: '', start_date: '', end_date: '', analysis_start_date: '', analysis_end_date: '' });\r\n  const [confirmDelete, setConfirmDelete] = useState(false);\r\n\r\n  const docMut = useSprintReportDocument();\r\n  const presMut = useSprintReportPresentation();\r\n  const [includeAnalysis, setIncludeAnalysis] = useState(true);\r\n  const [includeBusiness, setIncludeBusiness] = useState(true);\r\n  const [selectedStyle, setSelectedStyle] = useState('sprint_report_style_corporate_classic');\r\n  const [lastDocHtml, setLastDocHtml] = useState<string | null>(null);\r\n  const [lastPresHtml, setLastPresHtml] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    setActiveTab('overview');\r\n    setAnalysisText('');\r\n    setBusinessText('');\r\n    setEditing(false);\r\n    setConfirmDelete(false);\r\n    setIncludeAnalysis(true);\r\n    setIncludeBusiness(true);\r\n    setSelectedStyle('sprint_report_style_corporate_classic');\r\n    setLastDocHtml(null);\r\n    setLastPresHtml(null);\r\n    setGeneratedResult(null);\r\n    setShowAddTask(false);\r\n  }, [sprintId]);\r\n\r\n  const sprint = useMemo<Sprint>(() => {\r\n    const d = (sprintRaw as any)?.sprint ?? sprintRaw;\r\n    return d ? normalizeSprint(d) : { id: sprintId, name: '', start_date: '', end_date: '', status: 'planning' as const };\r\n  }, [sprintRaw, sprintId]);\r\n\r\n  const report = reportRaw as SprintReport | undefined;\r\n  const actions = (report?.actions ?? []) as Action[];\r\n  const breakdown = report?.breakdown ?? { by_status: {}, by_assignee: {} };\r\n  const totalTasks = report?.total_tasks ?? actions.length;\r\n  const graphContext = (report as any)?.graph_context as { sprint_name?: string; sprint_context?: string; assignees?: string[] } | null;\r\n  const completedTasks = report?.completed_tasks ?? actions.filter(a => a.status === 'completed').length;\r\n  const totalPoints = report?.total_task_points ?? 0;\r\n  const completedPoints = report?.completed_task_points ?? 0;\r\n  const completionPct = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;\r\n\r\n  const groupedActions = useMemo(() => {\r\n    const groups: Record<string, Action[]> = {};\r\n    actions.forEach(a => {\r\n      const s = a.status || 'pending';\r\n      if (!groups[s]) groups[s] = [];\r\n      groups[s].push(a);\r\n    });\r\n    return groups;\r\n  }, [actions]);\r\n\r\n  const startEdit = useCallback(() => {\r\n    setEditForm({\r\n      name: sprint.name,\r\n      context: sprint.context || '',\r\n      goals: (sprint.goals || []).join('\\n'),\r\n      start_date: sprint.start_date?.slice(0, 10) || '',\r\n      end_date: sprint.end_date?.slice(0, 10) || '',\r\n      analysis_start_date: sprint.analysis_start_date?.slice(0, 10) || '',\r\n      analysis_end_date: sprint.analysis_end_date?.slice(0, 10) || '',\r\n    });\r\n    setEditing(true);\r\n  }, [sprint]);\r\n\r\n  const saveEdit = () => {\r\n    updateSprint.mutate({\r\n      id: sprint.id,\r\n      name: editForm.name,\r\n      context: editForm.context || undefined,\r\n      goals: editForm.goals ? editForm.goals.split('\\n').filter(g => g.trim()) : [],\r\n      start_date: editForm.start_date || undefined,\r\n      end_date: editForm.end_date || undefined,\r\n      analysis_start_date: editForm.analysis_start_date || undefined,\r\n      analysis_end_date: editForm.analysis_end_date || undefined,\r\n    } as any, {\r\n      onSuccess: () => { toast.success('Sprint updated'); setEditing(false); },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    deleteSprint.mutate(sprint.id, {\r\n      onSuccess: () => { toast.success('Sprint deleted'); onBack(); },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const handleTransition = (status: 'planning' | 'active' | 'completed') => {\r\n    transitionStatus.mutate({ sprintId: sprint.id, status }, {\r\n      onSuccess: () => toast.success(`Sprint marked as ${status}`),\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const handleGenerate = () => {\r\n    generateTasks.mutate(sprintId, {\r\n      onSuccess: (d: any) => {\r\n        const result: SprintGenerateResult = {\r\n          proposed_new_tasks: d?.proposed_new_tasks ?? [],\r\n          existing_action_ids: d?.existing_action_ids ?? [],\r\n          existing_details: d?.existing_details ?? [],\r\n        };\r\n        setGeneratedResult(result);\r\n        const allNew = new Set<number>();\r\n        result.proposed_new_tasks.forEach((_, i) => allNew.add(i));\r\n        setSelectedNewTasks(allNew);\r\n        const allExisting = new Set<string>(result.existing_action_ids);\r\n        setSelectedExisting(allExisting);\r\n        toast.success(`Generated ${result.proposed_new_tasks.length} new tasks, found ${result.existing_action_ids.length} existing`);\r\n      },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const handleApply = () => {\r\n    if (!generatedResult) return;\r\n    const newTasks = generatedResult.proposed_new_tasks.filter((_, i) => selectedNewTasks.has(i));\r\n    const existingIds = generatedResult.existing_action_ids.filter(id => selectedExisting.has(id));\r\n    applyTasks.mutate({ sprintId, new_tasks: newTasks, existing_action_ids: existingIds }, {\r\n      onSuccess: (d: any) => {\r\n        toast.success(`Created ${d?.created ?? 0} tasks, linked ${d?.linked ?? 0} existing`);\r\n        setGeneratedResult(null);\r\n      },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const handleAnalyze = () => {\r\n    analyzeMut.mutate(sprintId, {\r\n      onSuccess: (d: any) => { setAnalysisText(d?.ai_analysis || d?.analysis || ''); toast.success('Analysis complete'); },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const handleBusiness = () => {\r\n    businessMut.mutate(sprintId, {\r\n      onSuccess: (d: any) => { setBusinessText(d?.business_report || d?.summary || ''); toast.success('Business report ready'); },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const handleExportDoc = () => {\r\n    docMut.mutate({ sprintId: sprint.id, style: selectedStyle, include_analysis: includeAnalysis, include_business: includeBusiness }, {\r\n      onSuccess: (d: any) => {\r\n        if (d?.html) {\r\n          setLastDocHtml(d.html);\r\n          downloadHtml(d.html, `sprint-${sprint.name || sprint.id}-report.html`);\r\n          toast.success('Document downloaded');\r\n        }\r\n      },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const handleExportPres = () => {\r\n    presMut.mutate({ sprintId: sprint.id, include_analysis: includeAnalysis, include_business: includeBusiness }, {\r\n      onSuccess: (d: any) => {\r\n        if (d?.html) {\r\n          setLastPresHtml(d.html);\r\n          downloadHtml(d.html, `sprint-${sprint.name || sprint.id}-presentation.html`);\r\n          toast.success('Presentation downloaded');\r\n        }\r\n      },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const handleOpenDocForPdf = () => {\r\n    if (lastDocHtml) {\r\n      openHtmlForPdf(lastDocHtml);\r\n    } else {\r\n      docMut.mutate({ sprintId: sprint.id, style: selectedStyle, include_analysis: includeAnalysis, include_business: includeBusiness }, {\r\n        onSuccess: (d: any) => {\r\n          if (d?.html) { setLastDocHtml(d.html); openHtmlForPdf(d.html); }\r\n        },\r\n        onError: (e: Error) => toast.error(e.message),\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleOpenPresForPdf = () => {\r\n    if (lastPresHtml) {\r\n      openHtmlForPdf(lastPresHtml);\r\n    } else {\r\n      presMut.mutate({ sprintId: sprint.id, include_analysis: includeAnalysis, include_business: includeBusiness }, {\r\n        onSuccess: (d: any) => {\r\n          if (d?.html) { setLastPresHtml(d.html); openHtmlForPdf(d.html); }\r\n        },\r\n        onError: (e: Error) => toast.error(e.message),\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleClone = () => {\r\n    cloneSprint.mutate({ sprintId: sprint.id }, {\r\n      onSuccess: (d: any) => {\r\n        toast.success(`Sprint cloned: ${d?.sprint?.name || 'Copy'}${d?.tasks_cloned ? ` with ${d.tasks_cloned} tasks` : ''}`);\r\n      },\r\n      onError: (e: Error) => toast.error(e.message),\r\n    });\r\n  };\r\n\r\n  const handleKanbanStatusChange = useCallback((actionId: string, newStatus: Action['status']) => {\r\n    updateAction.mutate({ id: actionId, status: newStatus }, {\r\n      onSuccess: () => {\r\n        queryClient.invalidateQueries({ queryKey: ['sprint', sprintId] });\r\n        queryClient.invalidateQueries({ queryKey: ['sprintReport', sprintId] });\r\n        toast.success('Task status updated');\r\n      },\r\n      onError: () => toast.error('Failed to update status'),\r\n    });\r\n  }, [updateAction, queryClient, sprintId]);\r\n\r\n  const handleAddTask = () => {\r\n    if (!newTask.task.trim()) return;\r\n    createAction.mutate({\r\n      task: newTask.task.trim(),\r\n      owner: newTask.owner.trim() || undefined,\r\n      priority: newTask.priority,\r\n      status: 'pending',\r\n      sprint_id: sprintId,\r\n    } as any, {\r\n      onSuccess: () => {\r\n        queryClient.invalidateQueries({ queryKey: ['sprint', sprintId] });\r\n        queryClient.invalidateQueries({ queryKey: ['sprintReport', sprintId] });\r\n        toast.success('Task added to sprint');\r\n        setNewTask({ task: '', owner: '', priority: 'medium' });\r\n        setShowAddTask(false);\r\n      },\r\n      onError: () => toast.error('Failed to add task'),\r\n    });\r\n  };\r\n\r\n  const handleRemoveFromSprint = useCallback((actionId: string) => {\r\n    updateAction.mutate({ id: actionId, sprint_id: null } as any, {\r\n      onSuccess: () => {\r\n        queryClient.invalidateQueries({ queryKey: ['sprint', sprintId] });\r\n        queryClient.invalidateQueries({ queryKey: ['sprintReport', sprintId] });\r\n        toast.success('Task removed from sprint');\r\n      },\r\n      onError: () => toast.error('Failed to remove task'),\r\n    });\r\n  }, [updateAction, queryClient, sprintId]);\r\n\r\n  const velocity = velocityRaw as any;\r\n  const health = healthRaw as any;\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"space-y-5 animate-pulse\">\r\n        <div className=\"flex items-start gap-3\">\r\n          <div className=\"w-8 h-8 rounded-lg bg-[var(--surface-hover)]\" />\r\n          <div className=\"flex-1 space-y-2\">\r\n            <div className=\"h-5 w-48 rounded bg-[var(--surface-hover)]\" />\r\n            <div className=\"h-3 w-32 rounded bg-[var(--surface-hover)]\" />\r\n          </div>\r\n          <div className=\"h-6 w-20 rounded-full bg-[var(--surface-hover)]\" />\r\n        </div>\r\n        <div className={cn(CARD, 'p-4 space-y-2')}>\r\n          <div className=\"h-3 w-16 rounded bg-[var(--surface-hover)]\" />\r\n          <div className=\"h-3 w-full rounded bg-[var(--surface-hover)]\" />\r\n          <div className=\"h-3 w-3/4 rounded bg-[var(--surface-hover)]\" />\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          {[1,2,3,4].map(i => <div key={i} className=\"h-8 w-24 rounded-lg bg-[var(--surface-hover)]\" />)}\r\n        </div>\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n          {[1,2,3,4].map(i => <div key={i} className={cn(CARD, 'p-3 h-20')} />)}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const cfg = statusConfig[sprint.status] || statusConfig.planning;\r\n  const StatusIcon = cfg.icon;\r\n\r\n  return (\r\n    <div className=\"space-y-5\">\r\n      {/* Header */}\r\n      <div className=\"flex items-start gap-3\">\r\n        <button onClick={onBack} className=\"mt-1 w-8 h-8 rounded-lg bg-[var(--surface-secondary)] flex items-center justify-center hover:bg-[var(--surface-hover)] shrink-0\">\r\n          <ArrowLeft className=\"w-4 h-4 text-[var(--text-tertiary)]\" />\r\n        </button>\r\n        <div className=\"flex-1 min-w-0\">\r\n          {editing ? (\r\n            <div className=\"space-y-2\">\r\n              <input value={editForm.name} onChange={e => setEditForm(f => ({ ...f, name: e.target.value }))} className={cn(INPUT, 'w-full text-lg font-bold')} />\r\n              <input value={editForm.context} onChange={e => setEditForm(f => ({ ...f, context: e.target.value }))} className={cn(INPUT, 'w-full')} placeholder=\"Context...\" />\r\n              <div className=\"grid grid-cols-2 gap-2\">\r\n                <label className=\"space-y-0.5\">\r\n                  <span className=\"text-[9px] text-[var(--text-tertiary)] uppercase\">Start Date</span>\r\n                  <input type=\"date\" value={editForm.start_date} onChange={e => setEditForm(f => ({ ...f, start_date: e.target.value }))} className={cn(INPUT, 'w-full')} />\r\n                </label>\r\n                <label className=\"space-y-0.5\">\r\n                  <span className=\"text-[9px] text-[var(--text-tertiary)] uppercase\">End Date</span>\r\n                  <input type=\"date\" value={editForm.end_date} onChange={e => setEditForm(f => ({ ...f, end_date: e.target.value }))} className={cn(INPUT, 'w-full')} />\r\n                </label>\r\n                <label className=\"space-y-0.5\">\r\n                  <span className=\"text-[9px] text-[var(--text-tertiary)] uppercase\">Analysis Start</span>\r\n                  <input type=\"date\" value={editForm.analysis_start_date} onChange={e => setEditForm(f => ({ ...f, analysis_start_date: e.target.value }))} className={cn(INPUT, 'w-full')} />\r\n                </label>\r\n                <label className=\"space-y-0.5\">\r\n                  <span className=\"text-[9px] text-[var(--text-tertiary)] uppercase\">Analysis End</span>\r\n                  <input type=\"date\" value={editForm.analysis_end_date} onChange={e => setEditForm(f => ({ ...f, analysis_end_date: e.target.value }))} className={cn(INPUT, 'w-full')} />\r\n                </label>\r\n              </div>\r\n              <textarea value={editForm.goals} onChange={e => setEditForm(f => ({ ...f, goals: e.target.value }))} className={cn(INPUT, 'w-full resize-none')} rows={2} placeholder=\"Goals (one per line)\" />\r\n              <div className=\"flex gap-2\">\r\n                <button onClick={saveEdit} disabled={updateSprint.isPending} className={BTN_PRIMARY}>\r\n                  {updateSprint.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <CheckCircle className=\"w-3.5 h-3.5\" />} Save\r\n                </button>\r\n                <button onClick={() => setEditing(false)} className={BTN_SECONDARY}><X className=\"w-3.5 h-3.5\" /> Cancel</button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <h2 className=\"text-lg font-bold text-[var(--text-primary)] truncate\">{sprint.name || 'Sprint'}</h2>\r\n              <div className=\"flex items-center gap-2 mt-0.5 flex-wrap\">\r\n                <span className=\"text-xs text-[var(--text-tertiary)]\">\r\n                  {sprint.start_date ? new Date(sprint.start_date).toLocaleDateString() : '?'}  {sprint.end_date ? new Date(sprint.end_date).toLocaleDateString() : '?'}\r\n                </span>\r\n                {sprint.context && <span className=\"text-xs text-[var(--text-tertiary)]\"> {sprint.context}</span>}\r\n              </div>\r\n            </>\r\n          )}\r\n        </div>\r\n        {!editing && (\r\n          <div className=\"flex items-center gap-2 shrink-0\">\r\n            <span className={cn('text-[10px] font-medium px-2.5 py-1 rounded-full border capitalize', cfg.bg, cfg.color, cfg.border)}>\r\n              <StatusIcon className=\"w-3 h-3 inline mr-1\" />{sprint.status}\r\n            </span>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Goals */}\r\n      {!editing && sprint.goals && sprint.goals.length > 0 && (\r\n        <div className={cn(CARD, 'p-4')}>\r\n          <h3 className={SECTION_TITLE}>Goals</h3>\r\n          <ul className=\"mt-2 space-y-1.5\">\r\n            {sprint.goals.map((g, i) => (\r\n              <li key={i} className=\"flex items-start gap-2 text-sm text-[var(--text-secondary)]\">\r\n                <Target className=\"w-3.5 h-3.5 text-[var(--accent-primary)] mt-0.5 shrink-0\" />\r\n                {g}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n\r\n      {/* Action Buttons */}\r\n      {!editing && (\r\n        <div className=\"flex flex-wrap gap-2\">\r\n          <button onClick={startEdit} className={BTN_SECONDARY}><Edit3 className=\"w-3.5 h-3.5\" /> Edit</button>\r\n\r\n          {sprint.status === 'planning' && (\r\n            <button onClick={() => handleTransition('active')} disabled={transitionStatus.isPending} className={cn(BTN_SECONDARY, 'text-[var(--status-success)] border-[var(--status-success)]/30')}>\r\n              {transitionStatus.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Play className=\"w-3.5 h-3.5\" />} Start Sprint\r\n            </button>\r\n          )}\r\n          {sprint.status === 'active' && (\r\n            <button onClick={() => handleTransition('completed')} disabled={transitionStatus.isPending} className={cn(BTN_SECONDARY, 'text-[var(--status-info)] border-[var(--status-info)]/30')}>\r\n              {transitionStatus.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Square className=\"w-3.5 h-3.5\" />} Complete Sprint\r\n            </button>\r\n          )}\r\n          {sprint.status === 'completed' && (\r\n            <button onClick={() => handleTransition('planning')} disabled={transitionStatus.isPending} className={BTN_SECONDARY}>\r\n              {transitionStatus.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Circle className=\"w-3.5 h-3.5\" />} Reopen\r\n            </button>\r\n          )}\r\n\r\n          <div className=\"w-px h-6 bg-[var(--border-primary)] self-center\" />\r\n\r\n          <button onClick={handleGenerate} disabled={generateTasks.isPending} className={BTN_PRIMARY}>\r\n            {generateTasks.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Zap className=\"w-3.5 h-3.5\" />} Generate Tasks (AI)\r\n          </button>\r\n          <button onClick={handleAnalyze} disabled={analyzeMut.isPending} className={cn(BTN_SECONDARY, 'text-purple-400 border-purple-400/30')}>\r\n            {analyzeMut.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Sparkles className=\"w-3.5 h-3.5\" />} AI Analysis\r\n          </button>\r\n          <button onClick={handleBusiness} disabled={businessMut.isPending} className={cn(BTN_SECONDARY, 'text-emerald-400 border-emerald-400/30')}>\r\n            {businessMut.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Sparkles className=\"w-3.5 h-3.5\" />} Business Report\r\n          </button>\r\n          <button onClick={handleClone} disabled={cloneSprint.isPending} className={BTN_SECONDARY}>\r\n            {cloneSprint.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Copy className=\"w-3.5 h-3.5\" />} Clone\r\n          </button>\r\n\r\n          <div className=\"flex-1\" />\r\n\r\n          {confirmDelete ? (\r\n            <div className=\"flex gap-1\">\r\n              <button onClick={handleDelete} disabled={deleteSprint.isPending} className={BTN_DANGER}>\r\n                {deleteSprint.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Trash2 className=\"w-3.5 h-3.5\" />} Confirm Delete\r\n              </button>\r\n              <button onClick={() => setConfirmDelete(false)} className={BTN_SECONDARY}><X className=\"w-3.5 h-3.5\" /></button>\r\n            </div>\r\n          ) : (\r\n            <button onClick={() => setConfirmDelete(true)} className={BTN_DANGER}><Trash2 className=\"w-3.5 h-3.5\" /> Delete</button>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Generated Tasks Preview */}\r\n      {generatedResult && (\r\n        <div className={cn(CARD, 'p-4 space-y-3')}>\r\n          <div className=\"flex items-center justify-between\">\r\n            <h3 className={SECTION_TITLE}>AI Generated Tasks</h3>\r\n            <div className=\"flex gap-2\">\r\n              <button onClick={handleApply} disabled={applyTasks.isPending || (selectedNewTasks.size === 0 && selectedExisting.size === 0)} className={BTN_PRIMARY}>\r\n                {applyTasks.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <CheckCircle className=\"w-3.5 h-3.5\" />}\r\n                Apply Selected ({selectedNewTasks.size + selectedExisting.size})\r\n              </button>\r\n              <button onClick={() => setGeneratedResult(null)} className={BTN_SECONDARY}><X className=\"w-3.5 h-3.5\" /> Dismiss</button>\r\n            </div>\r\n          </div>\r\n\r\n          {generatedResult.proposed_new_tasks.length > 0 && (\r\n            <div>\r\n              <p className=\"text-[10px] text-[var(--text-tertiary)] uppercase tracking-wider mb-1.5\">New Tasks ({generatedResult.proposed_new_tasks.length})</p>\r\n              <div className=\"space-y-1.5\">\r\n                {generatedResult.proposed_new_tasks.map((t, i) => (\r\n                  <label key={i} className=\"flex items-start gap-2 p-2 rounded-lg bg-[var(--surface-secondary)] hover:bg-[var(--surface-hover)] cursor-pointer\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedNewTasks.has(i)}\r\n                      onChange={e => {\r\n                        setSelectedNewTasks(prev => {\r\n                          const next = new Set(prev);\r\n                          e.target.checked ? next.add(i) : next.delete(i);\r\n                          return next;\r\n                        });\r\n                      }}\r\n                      className=\"mt-0.5 rounded border-[var(--border-primary)]\"\r\n                    />\r\n                    <div className=\"min-w-0 flex-1\">\r\n                      <p className=\"text-xs font-medium text-[var(--text-primary)]\">{t.task}</p>\r\n                      {t.description && <p className=\"text-[10px] text-[var(--text-tertiary)] mt-0.5 line-clamp-2\">{t.description}</p>}\r\n                    </div>\r\n                    {t.size_estimate && <span className=\"text-[9px] px-2 py-0.5 rounded-full bg-[var(--status-info-bg)] text-[var(--status-info)] shrink-0\">{t.size_estimate}</span>}\r\n                    {t.priority && <span className={cn('text-[9px] px-2 py-0.5 rounded-full shrink-0',\r\n                      t.priority === 'high' || t.priority === 'urgent' ? 'bg-[var(--status-danger-bg)] text-[var(--status-danger)]' :\r\n                      t.priority === 'medium' ? 'bg-[var(--status-warning-bg)] text-[var(--status-warning)]' : 'bg-[var(--surface-secondary)] text-[var(--text-tertiary)]'\r\n                    )}>{t.priority}</span>}\r\n                  </label>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {generatedResult.existing_details && generatedResult.existing_details.length > 0 && (\r\n            <div>\r\n              <p className=\"text-[10px] text-[var(--text-tertiary)] uppercase tracking-wider mb-1.5\">Existing Actions to Link ({generatedResult.existing_details.length})</p>\r\n              <div className=\"space-y-1.5\">\r\n                {generatedResult.existing_details.map(a => (\r\n                  <label key={a.id} className=\"flex items-center gap-2 p-2 rounded-lg bg-[var(--surface-secondary)] hover:bg-[var(--surface-hover)] cursor-pointer\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedExisting.has(a.id)}\r\n                      onChange={e => {\r\n                        setSelectedExisting(prev => {\r\n                          const next = new Set(prev);\r\n                          e.target.checked ? next.add(a.id) : next.delete(a.id);\r\n                          return next;\r\n                        });\r\n                      }}\r\n                      className=\"rounded border-[var(--border-primary)]\"\r\n                    />\r\n                    <span className=\"text-xs text-[var(--text-primary)] flex-1 truncate\">{a.task}</span>\r\n                    <span className=\"text-[9px] text-[var(--text-tertiary)] capitalize\">{a.status}</span>\r\n                  </label>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* AI Analysis */}\r\n      {analysisText && (\r\n        <div className={cn(CARD, 'p-4')}>\r\n          <h3 className=\"text-[10px] font-bold text-purple-400 uppercase tracking-[0.1em]\">AI Analysis</h3>\r\n          <div className=\"mt-2 text-xs text-[var(--text-secondary)] whitespace-pre-wrap leading-relaxed\">{analysisText}</div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Business Report */}\r\n      {businessText && (\r\n        <div className={cn(CARD, 'p-4')}>\r\n          <h3 className=\"text-[10px] font-bold text-emerald-400 uppercase tracking-[0.1em]\">Business Report</h3>\r\n          <div className=\"mt-2 text-xs text-[var(--text-secondary)] whitespace-pre-wrap leading-relaxed\">{businessText}</div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Health Score (compact) */}\r\n      <div className=\"flex items-center gap-3 flex-wrap\">\r\n        <HealthScoreWidget health={health} isLoading={healthLoading} compact />\r\n        {velocity?.daily_progress && (\r\n          <span className=\"text-[10px] text-[var(--text-tertiary)]\">\r\n            {velocity.completed_tasks}/{velocity.total_tasks} tasks  {velocity.completed_points}/{velocity.total_points} pts\r\n          </span>\r\n        )}\r\n      </div>\r\n\r\n      {/* Tab Navigation */}\r\n      <div className=\"flex gap-1 bg-[var(--surface-secondary)] rounded-xl p-1 border border-[var(--border-primary)] overflow-x-auto\">\r\n        {DETAIL_TABS.map(tab => {\r\n          const TabIcon = tab.icon;\r\n          return (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => setActiveTab(tab.id)}\r\n              className={cn(\r\n                'flex items-center gap-1.5 px-3 py-2 rounded-lg text-xs font-medium transition-colors whitespace-nowrap',\r\n                activeTab === tab.id\r\n                  ? 'bg-[var(--interactive-primary)]/15 text-[var(--accent-primary)]'\r\n                  : 'text-[var(--text-tertiary)] hover:text-[var(--text-primary)] hover:bg-[var(--surface-hover)]'\r\n              )}\r\n            >\r\n              <TabIcon className=\"w-3.5 h-3.5\" />\r\n              {tab.label}\r\n            </button>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      {/* Tab Content */}\r\n      <AnimatePresence mode=\"wait\">\r\n        <motion.div key={activeTab} initial={{ opacity: 0, y: 4 }} animate={{ opacity: 1, y: 0 }} exit={{ opacity: 0 }} transition={{ duration: 0.15 }}>\r\n\r\n          {activeTab === 'overview' && (\r\n            <div className=\"space-y-5\">\r\n              {reportLoading && (\r\n                <div className=\"flex items-center justify-center py-6 gap-2\">\r\n                  <Loader2 className=\"w-4 h-4 animate-spin text-[var(--accent-primary)]\" />\r\n                  <span className=\"text-xs text-[var(--text-tertiary)]\">Loading report data...</span>\r\n                </div>\r\n              )}\r\n              {(reportError || velocityError || healthError) && (\r\n                <div className=\"flex items-center gap-2 p-3 rounded-lg bg-[var(--status-danger-bg)] border border-[var(--status-danger)]/20\">\r\n                  <AlertTriangle className=\"w-4 h-4 text-[var(--status-danger)] shrink-0\" />\r\n                  <span className=\"text-xs text-[var(--status-danger)]\">Some report data failed to load. Partial data may be shown.</span>\r\n                </div>\r\n              )}\r\n              {/* Stats Cards */}\r\n              {totalTasks > 0 && (\r\n                <>\r\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n                    {[\r\n                      { label: 'Total Tasks', value: totalTasks },\r\n                      { label: 'Completed', value: completedTasks, sub: totalTasks > 0 ? `${Math.round((completedTasks / totalTasks) * 100)}%` : '' },\r\n                      { label: 'Total Points', value: report?.total_task_points ?? 0 },\r\n                      { label: 'Done Points', value: report?.completed_task_points ?? 0 },\r\n                    ].map(s => (\r\n                      <div key={s.label} className={cn(CARD, 'p-3 text-center')}>\r\n                        <p className=\"text-2xl font-bold text-[var(--text-primary)]\">{s.value}</p>\r\n                        <p className=\"text-[10px] text-[var(--text-tertiary)] uppercase tracking-wider\">{s.label}</p>\r\n                        {s.sub && <p className=\"text-xs text-[var(--accent-primary)] mt-0.5\">{s.sub}</p>}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div className={cn(CARD, 'p-4')}><BreakdownChart title=\"By Status\" data={breakdown.by_status} /></div>\r\n                    <div className={cn(CARD, 'p-4')}><BreakdownChart title=\"By Assignee\" data={breakdown.by_assignee} /></div>\r\n                  </div>\r\n                </>\r\n              )}\r\n\r\n              {/* Health Score (full) */}\r\n              <div className={cn(CARD, 'p-4')}>\r\n                <HealthScoreWidget health={health} isLoading={healthLoading} />\r\n              </div>\r\n\r\n              {/* Graph Context */}\r\n              {graphContext && (graphContext.assignees?.length || graphContext.sprint_name) && (\r\n                <div className={cn(CARD, 'p-4')}>\r\n                  <h3 className=\"text-[10px] font-bold text-purple-400 uppercase tracking-[0.1em]\">Graph Context</h3>\r\n                  <div className=\"mt-2 space-y-1.5\">\r\n                    {graphContext.sprint_name && (\r\n                      <p className=\"text-xs text-[var(--text-secondary)]\">\r\n                        <span className=\"text-[var(--text-tertiary)]\">Sprint node:</span> {graphContext.sprint_name}\r\n                        {graphContext.sprint_context && <span className=\"text-[var(--text-tertiary)]\">  {graphContext.sprint_context}</span>}\r\n                      </p>\r\n                    )}\r\n                    {graphContext.assignees && graphContext.assignees.length > 0 && (\r\n                      <div className=\"flex items-center gap-1.5 flex-wrap\">\r\n                        <span className=\"text-[10px] text-[var(--text-tertiary)]\">Assignees:</span>\r\n                        {graphContext.assignees.map(name => (\r\n                          <span key={name} className=\"text-[10px] px-2 py-0.5 rounded-full bg-purple-500/10 text-purple-400\">{name}</span>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Add Task */}\r\n              <div className={cn(CARD, 'p-4')}>\r\n                <div className=\"flex items-center justify-between\">\r\n                  <h3 className={SECTION_TITLE}>Sprint Tasks ({actions.length})</h3>\r\n                  <button onClick={() => setShowAddTask(!showAddTask)} className={BTN_SECONDARY}>\r\n                    <Plus className=\"w-3 h-3\" /> Add Task\r\n                  </button>\r\n                </div>\r\n                <AnimatePresence>\r\n                  {showAddTask && (\r\n                    <motion.div initial={{ opacity: 0, height: 0 }} animate={{ opacity: 1, height: 'auto' }} exit={{ opacity: 0, height: 0 }} className=\"overflow-hidden\">\r\n                      <div className=\"mt-3 space-y-2 p-3 rounded-lg bg-[var(--surface-secondary)] border border-[var(--border-primary)]\">\r\n                        <input\r\n                          value={newTask.task}\r\n                          onChange={e => setNewTask(f => ({ ...f, task: e.target.value }))}\r\n                          className={cn(INPUT, 'w-full')}\r\n                          placeholder=\"Task description...\"\r\n                          onKeyDown={e => e.key === 'Enter' && handleAddTask()}\r\n                        />\r\n                        <div className=\"flex gap-2\">\r\n                          <input\r\n                            value={newTask.owner}\r\n                            onChange={e => setNewTask(f => ({ ...f, owner: e.target.value }))}\r\n                            className={cn(INPUT, 'flex-1')}\r\n                            placeholder=\"Owner (optional)\"\r\n                          />\r\n                          <select\r\n                            value={newTask.priority}\r\n                            onChange={e => setNewTask(f => ({ ...f, priority: e.target.value }))}\r\n                            className={cn(INPUT, 'w-28')}\r\n                          >\r\n                            <option value=\"low\">Low</option>\r\n                            <option value=\"medium\">Medium</option>\r\n                            <option value=\"high\">High</option>\r\n                          </select>\r\n                          <button onClick={handleAddTask} disabled={!newTask.task.trim() || createAction.isPending} className={BTN_PRIMARY}>\r\n                            {createAction.isPending ? <Loader2 className=\"w-3 h-3 animate-spin\" /> : 'Add'}\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    </motion.div>\r\n                  )}\r\n                </AnimatePresence>\r\n              </div>\r\n\r\n              {/* Sprint Tasks grouped by status */}\r\n              {actions.length > 0 && (\r\n                <div className={cn(CARD, 'p-4')}>\r\n                  <div className=\"mt-3 space-y-4\">\r\n                    {['in_progress', 'pending', 'overdue', 'completed'].map(status => {\r\n                      const group = groupedActions[status];\r\n                      if (!group || group.length === 0) return null;\r\n                      return (\r\n                        <div key={status}>\r\n                          <p className=\"text-[10px] text-[var(--text-tertiary)] uppercase tracking-wider mb-1.5 flex items-center gap-1.5\">\r\n                            <span className={cn('w-2 h-2 rounded-full', taskStatusDot(status))} />\r\n                            {status.replace('_', ' ')} ({group.length})\r\n                          </p>\r\n                          <div className=\"space-y-1\">\r\n                            {group.map(a => (\r\n                              <div key={a.id} className=\"group flex items-center gap-2 py-1.5 px-2 rounded-lg hover:bg-[var(--surface-hover)]\">\r\n                                <span className={cn('w-1.5 h-1.5 rounded-full shrink-0', taskStatusDot(a.status))} />\r\n                                <span className={cn('text-xs flex-1 truncate', a.status === 'completed' ? 'line-through text-[var(--text-tertiary)]' : 'text-[var(--text-primary)]')}>\r\n                                  {a.task || a.title || '(untitled)'}\r\n                                </span>\r\n                                {a.owner && <OwnerBadge name={a.owner} size=\"sm\" />}\r\n                                {a.task_points != null && <span className=\"text-[9px] px-1.5 py-0.5 rounded bg-[var(--status-info-bg)] text-[var(--accent-primary)] tabular-nums\">{a.task_points}pt</span>}\r\n                                <EstimatePointsButton sprintId={sprintId} taskDescription={a.task || a.title || ''} />\r\n                                <button\r\n                                  onClick={e => { e.stopPropagation(); handleRemoveFromSprint(a.id); }}\r\n                                  className=\"opacity-0 group-hover:opacity-100 p-0.5 rounded hover:bg-[var(--status-danger-bg)] text-[var(--status-danger)] transition-all\"\r\n                                  title=\"Remove from sprint\"\r\n                                >\r\n                                  <X className=\"w-3 h-3\" />\r\n                                </button>\r\n                              </div>\r\n                            ))}\r\n                          </div>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Sprint Knowledge Entities */}\r\n              {report?.knowledge_counts && (report.knowledge_counts.facts > 0 || report.knowledge_counts.decisions > 0 || report.knowledge_counts.risks > 0 || report.knowledge_counts.questions > 0) && (\r\n                <div className={cn(CARD, 'p-4')}>\r\n                  <h3 className={cn(SECTION_TITLE, 'mb-3 flex items-center gap-1.5')}>\r\n                    <Sparkles className=\"w-3.5 h-3.5\" /> Knowledge Base\r\n                  </h3>\r\n                  <div className=\"grid grid-cols-4 gap-2 mb-3\">\r\n                    {[\r\n                      { label: 'Facts', count: report.knowledge_counts.facts, color: 'text-blue-400' },\r\n                      { label: 'Decisions', count: report.knowledge_counts.decisions, color: 'text-emerald-400' },\r\n                      { label: 'Risks', count: report.knowledge_counts.risks, color: 'text-orange-400' },\r\n                      { label: 'Questions', count: report.knowledge_counts.questions, color: 'text-purple-400' },\r\n                    ].map(item => (\r\n                      <div key={item.label} className=\"text-center p-2 rounded-lg bg-[var(--surface-hover)]\">\r\n                        <p className={cn('text-lg font-bold tabular-nums', item.color)}>{item.count}</p>\r\n                        <p className=\"text-[9px] text-[var(--text-tertiary)] uppercase tracking-wider\">{item.label}</p>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                  <div className=\"space-y-3\">\r\n                    {(report.facts?.length ?? 0) > 0 && (\r\n                      <details className=\"group\">\r\n                        <summary className=\"flex items-center gap-1.5 cursor-pointer text-[10px] text-[var(--text-secondary)] uppercase tracking-wider hover:text-[var(--text-primary)]\">\r\n                          <CheckCircle className=\"w-3 h-3 text-blue-400\" /> Facts ({report.facts.length})\r\n                        </summary>\r\n                        <div className=\"mt-1.5 space-y-1 pl-4\">\r\n                          {report.facts.slice(0, 15).map((f, i) => (\r\n                            <div key={f.id || i} className=\"text-xs text-[var(--text-secondary)] py-1 border-l-2 border-blue-400/30 pl-2\">\r\n                              <span className=\"text-[9px] text-blue-400 mr-1\">[{f.category || 'general'}]</span>\r\n                              {typeof f.content === 'string' ? f.content.slice(0, 200) : ''}\r\n                            </div>\r\n                          ))}\r\n                          {report.facts.length > 15 && <p className=\"text-[9px] text-[var(--text-tertiary)] pl-2\">+{report.facts.length - 15} more</p>}\r\n                        </div>\r\n                      </details>\r\n                    )}\r\n                    {(report.decisions?.length ?? 0) > 0 && (\r\n                      <details className=\"group\">\r\n                        <summary className=\"flex items-center gap-1.5 cursor-pointer text-[10px] text-[var(--text-secondary)] uppercase tracking-wider hover:text-[var(--text-primary)]\">\r\n                          <Target className=\"w-3 h-3 text-emerald-400\" /> Decisions ({report.decisions.length})\r\n                        </summary>\r\n                        <div className=\"mt-1.5 space-y-1 pl-4\">\r\n                          {report.decisions.slice(0, 15).map((d, i) => (\r\n                            <div key={d.id || i} className=\"text-xs text-[var(--text-secondary)] py-1 border-l-2 border-emerald-400/30 pl-2\">\r\n                              <span className=\"text-[9px] text-emerald-400 mr-1\">[{(d as any).status || 'active'}]</span>\r\n                              {typeof d.content === 'string' ? d.content.slice(0, 200) : ''}\r\n                              {(d as any).owner && <span className=\"text-[9px] text-[var(--text-tertiary)] ml-1\">({(d as any).owner})</span>}\r\n                            </div>\r\n                          ))}\r\n                          {report.decisions.length > 15 && <p className=\"text-[9px] text-[var(--text-tertiary)] pl-2\">+{report.decisions.length - 15} more</p>}\r\n                        </div>\r\n                      </details>\r\n                    )}\r\n                    {(report.risks?.length ?? 0) > 0 && (\r\n                      <details className=\"group\">\r\n                        <summary className=\"flex items-center gap-1.5 cursor-pointer text-[10px] text-[var(--text-secondary)] uppercase tracking-wider hover:text-[var(--text-primary)]\">\r\n                          <AlertTriangle className=\"w-3 h-3 text-orange-400\" /> Risks ({report.risks.length})\r\n                        </summary>\r\n                        <div className=\"mt-1.5 space-y-1 pl-4\">\r\n                          {report.risks.slice(0, 15).map((r, i) => (\r\n                            <div key={r.id || i} className=\"text-xs text-[var(--text-secondary)] py-1 border-l-2 border-orange-400/30 pl-2\">\r\n                              <span className={cn('text-[9px] mr-1', (r as any).status === 'open' ? 'text-orange-400' : 'text-[var(--text-tertiary)]')}>\r\n                                [{(r as any).impact || 'medium'}/{(r as any).status || 'open'}]\r\n                              </span>\r\n                              {typeof r.content === 'string' ? r.content.slice(0, 200) : ''}\r\n                            </div>\r\n                          ))}\r\n                          {report.risks.length > 15 && <p className=\"text-[9px] text-[var(--text-tertiary)] pl-2\">+{report.risks.length - 15} more</p>}\r\n                        </div>\r\n                      </details>\r\n                    )}\r\n                    {(report.questions?.length ?? 0) > 0 && (\r\n                      <details className=\"group\">\r\n                        <summary className=\"flex items-center gap-1.5 cursor-pointer text-[10px] text-[var(--text-secondary)] uppercase tracking-wider hover:text-[var(--text-primary)]\">\r\n                          <MessageSquare className=\"w-3 h-3 text-purple-400\" /> Questions ({report.questions.length})\r\n                        </summary>\r\n                        <div className=\"mt-1.5 space-y-1 pl-4\">\r\n                          {report.questions.slice(0, 15).map((q, i) => (\r\n                            <div key={q.id || i} className=\"text-xs text-[var(--text-secondary)] py-1 border-l-2 border-purple-400/30 pl-2\">\r\n                              <span className={cn('text-[9px] mr-1', (q as any).status === 'answered' || (q as any).status === 'closed' ? 'text-[var(--text-tertiary)]' : 'text-purple-400')}>\r\n                                [{(q as any).priority || 'medium'}/{(q as any).status || 'open'}]\r\n                              </span>\r\n                              {typeof q.content === 'string' ? q.content.slice(0, 200) : ''}\r\n                            </div>\r\n                          ))}\r\n                          {report.questions.length > 15 && <p className=\"text-[9px] text-[var(--text-tertiary)] pl-2\">+{report.questions.length - 15} more</p>}\r\n                        </div>\r\n                      </details>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {activeTab === 'kanban' && (\r\n            <div className={cn(CARD, 'p-4')}>\r\n              <KanbanBoard actions={actions} onStatusChange={handleKanbanStatusChange} />\r\n            </div>\r\n          )}\r\n\r\n          {activeTab === 'timeline' && (\r\n            <div className={cn(CARD, 'p-4')}>\r\n              <GanttChart actions={actions} sprintStart={sprint.start_date} sprintEnd={sprint.end_date} />\r\n            </div>\r\n          )}\r\n\r\n          {activeTab === 'burndown' && (\r\n            <div className=\"space-y-4\">\r\n              {velocity?.daily_progress ? (\r\n                <div className={cn(CARD, 'p-4')}>\r\n                  <BurndownChart dailyProgress={velocity.daily_progress} totalTasks={velocity.total_tasks} totalPoints={velocity.total_points} />\r\n                </div>\r\n              ) : (\r\n                <div className={cn(CARD, 'p-8 text-center')}>\r\n                  <Activity className=\"w-8 h-8 mx-auto text-[var(--text-tertiary)] mb-2\" />\r\n                  <p className=\"text-xs text-[var(--text-tertiary)]\">Burndown data will appear as tasks are completed</p>\r\n                </div>\r\n              )}\r\n              {velocity?.daily_progress && (\r\n                <div className={cn(CARD, 'p-4')}>\r\n                  <BurndownChart dailyProgress={velocity.daily_progress} totalTasks={velocity.total_tasks} totalPoints={velocity.total_points} usePoints />\r\n                </div>\r\n              )}\r\n              {velocity?.velocity_history?.length > 0 && (\r\n                <div className={cn(CARD, 'p-4')}>\r\n                  <VelocityChart history={velocity.velocity_history} />\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {activeTab === 'standup' && (\r\n            <StandupPanel sprintId={sprintId} />\r\n          )}\r\n\r\n          {activeTab === 'capacity' && (\r\n            <CapacityPanel sprintId={sprintId} actions={actions} />\r\n          )}\r\n\r\n          {activeTab === 'retro' && (\r\n            <RetrospectivePanel sprintId={sprintId} />\r\n          )}\r\n\r\n          {activeTab === 'documents' && (\r\n            <SprintDocumentsPanel sprintId={sprintId} />\r\n          )}\r\n\r\n          {activeTab === 'report' && (\r\n            <div className=\"space-y-5\">\r\n              {reportLoading ? (\r\n                <div className=\"flex items-center justify-center h-32\">\r\n                  <Loader2 className=\"w-6 h-6 animate-spin text-[var(--accent-primary)]\" />\r\n                </div>\r\n              ) : (\r\n                <>\r\n                  <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n                    {[\r\n                      { label: 'Total Tasks', value: totalTasks, sub: '' },\r\n                      { label: 'Completed', value: completedTasks, sub: `${completionPct}%` },\r\n                      { label: 'Total Points', value: totalPoints, sub: '' },\r\n                      { label: 'Done Points', value: completedPoints, sub: totalPoints > 0 ? `${Math.round((completedPoints / totalPoints) * 100)}%` : '' },\r\n                    ].map(s => (\r\n                      <div key={s.label} className={cn(CARD, 'p-3 text-center')}>\r\n                        <p className=\"text-2xl font-bold text-[var(--text-primary)]\">{s.value}</p>\r\n                        <p className=\"text-[10px] text-[var(--text-tertiary)] uppercase tracking-wider\">{s.label}</p>\r\n                        {s.sub && <p className=\"text-xs text-[var(--accent-primary)] mt-0.5\">{s.sub}</p>}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div className={cn(CARD, 'p-4')}>\r\n                      <BreakdownChart title=\"By Status\" data={breakdown.by_status} />\r\n                    </div>\r\n                    <div className={cn(CARD, 'p-4')}>\r\n                      <BreakdownChart title=\"By Assignee\" data={breakdown.by_assignee} />\r\n                    </div>\r\n                  </div>\r\n\r\n                  {graphContext && (graphContext.assignees?.length || graphContext.sprint_name) && (\r\n                    <div className={cn(CARD, 'p-4')}>\r\n                      <span className=\"text-[10px] font-bold text-purple-400 uppercase tracking-[0.1em]\">Graph Context</span>\r\n                      <div className=\"mt-2 space-y-1.5\">\r\n                        {graphContext.sprint_name && (\r\n                          <p className=\"text-xs text-[var(--text-secondary)]\">\r\n                            <span className=\"text-[var(--text-tertiary)]\">Sprint node:</span> {graphContext.sprint_name}\r\n                            {graphContext.sprint_context && <span className=\"text-[var(--text-tertiary)]\">  {graphContext.sprint_context}</span>}\r\n                          </p>\r\n                        )}\r\n                        {graphContext.assignees && graphContext.assignees.length > 0 && (\r\n                          <div className=\"flex items-center gap-1.5 flex-wrap\">\r\n                            <span className=\"text-[10px] text-[var(--text-tertiary)]\">Assignees:</span>\r\n                            {graphContext.assignees.map(name => (\r\n                              <span key={name} className=\"text-[10px] px-2 py-0.5 rounded-full bg-purple-500/10 text-purple-400\">{name}</span>\r\n                            ))}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {actions.length > 0 && (\r\n                    <div className={cn(CARD, 'p-4')}>\r\n                      <span className=\"text-[10px] font-bold text-[var(--accent-primary)] uppercase tracking-[0.1em]\">\r\n                        Tasks ({actions.length})\r\n                      </span>\r\n                      <div className=\"mt-2 space-y-1 max-h-48 overflow-y-auto\">\r\n                        {actions.map(a => {\r\n                          const done = a.status === 'completed';\r\n                          return (\r\n                            <div key={a.id} className=\"flex items-center gap-2 py-1 px-2 rounded hover:bg-[var(--surface-hover)]\">\r\n                              {done\r\n                                ? <CheckCircle className=\"w-3.5 h-3.5 text-[var(--status-success)] shrink-0\" />\r\n                                : <Circle className=\"w-3.5 h-3.5 text-[var(--text-tertiary)] shrink-0\" />}\r\n                              <span className={cn('text-xs flex-1 truncate', done ? 'line-through text-[var(--text-tertiary)]' : 'text-[var(--text-primary)]')}>\r\n                                {a.task || a.title || '(untitled)'}\r\n                              </span>\r\n                              {a.owner && <span className=\"text-[10px] text-[var(--text-tertiary)] truncate max-w-[100px]\">{a.owner}</span>}\r\n                              <span className=\"text-[9px] text-[var(--text-tertiary)] capitalize shrink-0\">{a.status}</span>\r\n                            </div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className=\"flex flex-wrap gap-2\">\r\n                    <button onClick={handleAnalyze} disabled={analyzeMut.isPending} className={cn(BTN_SECONDARY, 'text-purple-400 border-purple-400/30')}>\r\n                      {analyzeMut.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Zap className=\"w-3.5 h-3.5\" />}\r\n                      AI Analysis\r\n                    </button>\r\n                    <button onClick={handleBusiness} disabled={businessMut.isPending} className={cn(BTN_SECONDARY, 'text-emerald-400 border-emerald-400/30')}>\r\n                      {businessMut.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Building2 className=\"w-3.5 h-3.5\" />}\r\n                      Business Report\r\n                    </button>\r\n                  </div>\r\n\r\n                  {analysisText && (\r\n                    <div className={cn(CARD, 'p-4')}>\r\n                      <span className=\"text-[10px] font-bold text-purple-400 uppercase tracking-[0.1em]\">AI Analysis</span>\r\n                      <div className=\"mt-2 text-xs text-[var(--text-secondary)] whitespace-pre-wrap leading-relaxed\">\r\n                        {analysisText}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  {businessText && (\r\n                    <div className={cn(CARD, 'p-4')}>\r\n                      <span className=\"text-[10px] font-bold text-emerald-400 uppercase tracking-[0.1em]\">Business Report</span>\r\n                      <div className=\"mt-2 text-xs text-[var(--text-secondary)] whitespace-pre-wrap leading-relaxed\">\r\n                        {businessText}\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n\r\n                  <div className={cn(CARD, 'p-4 space-y-3')}>\r\n                    <span className=\"text-[10px] font-bold text-[var(--accent-primary)] uppercase tracking-[0.1em]\">Export</span>\r\n\r\n                    <div className=\"flex flex-wrap gap-3\">\r\n                      <label className=\"flex items-center gap-2 text-xs text-[var(--text-secondary)] cursor-pointer\">\r\n                        <input type=\"checkbox\" checked={includeAnalysis} onChange={e => setIncludeAnalysis(e.target.checked)} className=\"rounded border-[var(--border-primary)]\" />\r\n                        Include AI Analysis\r\n                      </label>\r\n                      <label className=\"flex items-center gap-2 text-xs text-[var(--text-secondary)] cursor-pointer\">\r\n                        <input type=\"checkbox\" checked={includeBusiness} onChange={e => setIncludeBusiness(e.target.checked)} className=\"rounded border-[var(--border-primary)]\" />\r\n                        Include Business Report\r\n                      </label>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"text-[10px] text-[var(--text-tertiary)] uppercase tracking-wider block mb-1\">Document Style</label>\r\n                      <div className=\"flex flex-wrap gap-1.5\">\r\n                        {STYLE_OPTIONS.map(opt => (\r\n                          <button\r\n                            key={opt.key}\r\n                            onClick={() => setSelectedStyle(opt.key)}\r\n                            className={cn(\r\n                              'px-2.5 py-1 rounded-md text-[10px] font-medium border transition-colors',\r\n                              selectedStyle === opt.key\r\n                                ? 'bg-[var(--interactive-primary)]/20 text-[var(--accent-primary)] border-[var(--accent-primary)]/30'\r\n                                : 'bg-[var(--surface-secondary)] text-[var(--text-tertiary)] border-[var(--border-primary)] hover:text-[var(--text-primary)]'\r\n                            )}\r\n                          >\r\n                            {opt.label}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-wrap gap-2 pt-1\">\r\n                      <button onClick={handleExportDoc} disabled={docMut.isPending} className={cn(BTN_PRIMARY)}>\r\n                        {docMut.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <FileText className=\"w-3.5 h-3.5\" />}\r\n                        Download A4 Document\r\n                      </button>\r\n                      <button onClick={handleExportPres} disabled={presMut.isPending} className={cn(BTN_SECONDARY, 'text-orange-400 border-orange-400/30')}>\r\n                        {presMut.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Presentation className=\"w-3.5 h-3.5\" />}\r\n                        Download Presentation\r\n                      </button>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-wrap gap-2\">\r\n                      <button onClick={handleOpenDocForPdf} disabled={docMut.isPending} className={BTN_SECONDARY}>\r\n                        {docMut.isPending && !lastDocHtml ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Printer className=\"w-3.5 h-3.5\" />}\r\n                        Open Document for PDF\r\n                      </button>\r\n                      <button onClick={handleOpenPresForPdf} disabled={presMut.isPending} className={BTN_SECONDARY}>\r\n                        {presMut.isPending && !lastPresHtml ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Printer className=\"w-3.5 h-3.5\" />}\r\n                        Open Presentation for PDF\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n        </motion.div>\r\n      </AnimatePresence>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function SprintsPage() {\r\n  const sprintsQuery = useSprints();\r\n  const { data: sprintsRaw, isLoading } = sprintsQuery;\r\n  const [selectedSprint, setSelectedSprint] = useState<string | null>(null);\r\n  const [showCreate, setShowCreate] = useState(false);\r\n\r\n  const sprints = useMemo<Sprint[]>(() => {\r\n    const arr = (sprintsRaw as any)?.sprints ?? (Array.isArray(sprintsRaw) ? sprintsRaw : []);\r\n    return arr.map((s: any) => normalizeSprint(s));\r\n  }, [sprintsRaw]);\r\n\r\n  const activeSprints = sprints.filter(s => s.status === 'active');\r\n  const planningSprints = sprints.filter(s => s.status === 'planning');\r\n  const completedSprints = sprints.filter(s => s.status === 'completed');\r\n\r\n  if (selectedSprint) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <SprintDetail sprintId={selectedSprint} onBack={() => setSelectedSprint(null)} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const renderSprintCard = (s: Sprint) => {\r\n    const cfg = statusConfig[s.status] || statusConfig.planning;\r\n    const StatusIcon = cfg.icon;\r\n    return (\r\n      <motion.div\r\n        key={s.id}\r\n        layout\r\n        className={cn(CARD, 'p-4 hover:border-[var(--accent-primary)]/30 transition-colors cursor-pointer')}\r\n        onClick={() => setSelectedSprint(s.id)}\r\n      >\r\n        <div className=\"flex items-center gap-3\">\r\n          <StatusIcon className={cn('w-4 h-4 shrink-0', cfg.color)} />\r\n          <div className=\"flex-1 min-w-0\">\r\n            <h3 className=\"text-sm font-semibold text-[var(--text-primary)] truncate\">{s.name || 'Unnamed Sprint'}</h3>\r\n            <p className=\"text-[10px] text-[var(--text-tertiary)]\">\r\n              {s.start_date ? new Date(s.start_date).toLocaleDateString() : '?'}  {s.end_date ? new Date(s.end_date).toLocaleDateString() : '?'}\r\n              {s.context && <span className=\"ml-2\"> {s.context.substring(0, 50)}{s.context.length > 50 ? '...' : ''}</span>}\r\n            </p>\r\n          </div>\r\n          <span className={cn('text-[10px] font-medium px-2.5 py-1 rounded-full border capitalize', cfg.bg, cfg.color, cfg.border)}>\r\n            {s.status}\r\n          </span>\r\n          <ChevronRight className=\"w-4 h-4 text-[var(--text-tertiary)]\" />\r\n        </div>\r\n        {s.goals && s.goals.length > 0 && (\r\n          <div className=\"flex flex-wrap gap-1.5 mt-2 ml-7\">\r\n            {s.goals.slice(0, 3).map((g, i) => (\r\n              <span key={i} className=\"text-[9px] px-2 py-0.5 rounded-full bg-[var(--surface-secondary)] text-[var(--text-tertiary)]\">{g}</span>\r\n            ))}\r\n            {s.goals.length > 3 && <span className=\"text-[9px] text-[var(--text-tertiary)]\">+{s.goals.length - 3} more</span>}\r\n          </div>\r\n        )}\r\n      </motion.div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-5\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-xl font-bold text-[var(--text-primary)]\">Sprints</h1>\r\n          <p className=\"text-xs text-[var(--text-tertiary)]\">\r\n            {sprints.length} sprint{sprints.length !== 1 ? 's' : ''}\r\n            {activeSprints.length > 0 && <span className=\"text-[var(--status-success)] ml-2\"> {activeSprints.length} active</span>}\r\n          </p>\r\n        </div>\r\n        <button onClick={() => setShowCreate(!showCreate)} className={BTN_PRIMARY}>\r\n          <Plus className=\"w-3.5 h-3.5\" /> New Sprint\r\n        </button>\r\n      </div>\r\n\r\n      <AnimatePresence>\r\n        {showCreate && (\r\n          <motion.div initial={{ opacity: 0, height: 0 }} animate={{ opacity: 1, height: 'auto' }} exit={{ opacity: 0, height: 0 }} className=\"overflow-hidden\">\r\n            <CreateSprintForm onCreated={() => setShowCreate(false)} />\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {sprintsQuery.error ? (\r\n        <ErrorState message=\"Failed to load sprints.\" onRetry={() => sprintsQuery.refetch()} />\r\n      ) : isLoading ? (\r\n        <div className=\"space-y-3 animate-pulse\">\r\n          {[1,2,3].map(i => (\r\n            <div key={i} className={cn(CARD, 'p-4')}>\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-4 h-4 rounded-full bg-[var(--surface-hover)]\" />\r\n                <div className=\"flex-1 space-y-1.5\">\r\n                  <div className=\"h-4 w-40 rounded bg-[var(--surface-hover)]\" />\r\n                  <div className=\"h-3 w-56 rounded bg-[var(--surface-hover)]\" />\r\n                </div>\r\n                <div className=\"h-5 w-16 rounded-full bg-[var(--surface-hover)]\" />\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : sprints.length === 0 ? (\r\n        <div className={cn(CARD, 'p-12 text-center')}>\r\n          <Calendar className=\"w-10 h-10 mx-auto text-[var(--text-tertiary)] mb-3\" />\r\n          <p className=\"text-sm text-[var(--text-tertiary)]\">No sprints yet. Create your first sprint to get started.</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"space-y-6\">\r\n          {activeSprints.length > 0 && (\r\n            <div>\r\n              <h2 className=\"text-xs font-bold text-[var(--status-success)] uppercase tracking-wider mb-2 flex items-center gap-1.5\">\r\n                <Clock className=\"w-3.5 h-3.5\" /> Active ({activeSprints.length})\r\n              </h2>\r\n              <div className=\"space-y-3\">{activeSprints.map(renderSprintCard)}</div>\r\n            </div>\r\n          )}\r\n          {planningSprints.length > 0 && (\r\n            <div>\r\n              <h2 className=\"text-xs font-bold text-[var(--text-tertiary)] uppercase tracking-wider mb-2 flex items-center gap-1.5\">\r\n                <Circle className=\"w-3.5 h-3.5\" /> Planning ({planningSprints.length})\r\n              </h2>\r\n              <div className=\"space-y-3\">{planningSprints.map(renderSprintCard)}</div>\r\n            </div>\r\n          )}\r\n          {completedSprints.length > 0 && (\r\n            <div>\r\n              <h2 className=\"text-xs font-bold text-[var(--accent-primary)] uppercase tracking-wider mb-2 flex items-center gap-1.5\">\r\n                <CheckCircle className=\"w-3.5 h-3.5\" /> Completed ({completedSprints.length})\r\n              </h2>\r\n              <div className=\"space-y-3\">{completedSprints.map(renderSprintCard)}</div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["__iconNode","Presentation","createLucideIcon","SquareChartGantt","Unlink","CARD","CARD_FLAT","BTN_PRIMARY","BTN_SECONDARY","BTN_DANGER","INPUT","SECTION_TITLE","STATUS_COLORS","ASSIGNEE_PALETTE","BreakdownChart","title","data","colorMap","bars","useMemo","entries","v","label","value","i","maxVal","b","total","s","jsxs","jsx","BarChart3","bar","pct","sharePct","BurndownChart","dailyProgress","totalTasks","totalPoints","usePoints","d","Activity","chartH","chartW","toX","toY","actualPath","idealPath","areaPath","todayIdx","today","idx","labels","step","f","VelocityChart","history","avgVelocity","totalH","riskConfig","CheckCircle","AlertTriangle","AlertCircle","XCircle","factorLabels","countFactors","countLabels","ScoreRing","score","size","strokeWidth","color","radius","circumference","offset","HealthScoreWidget","health","isLoading","compact","cfg","RiskIcon","scoreColor","cn","key","val","displayVal","barColor","alert","COLUMNS","KanbanBoard","actions","onStatusChange","dragId","setDragId","useState","dragOverCol","setDragOverCol","handleDragStart","useCallback","e","actionId","handleDragEnd","handleDragOver","colId","handleDragLeave","handleDrop","action","a","priorityDot","p","col","colActions","isOver","GripVertical","OwnerBadge","statusColor","GanttChart","sprintStart","sprintEnd","start","end","range","taskStart","taskEnd","left","width","hasDeps","now","dateLabels","GanttChartSquare","l","EditableList","items","onAdd","onRemove","placeholder","input","setInput","handleAdd","item","X","Plus","RetrospectivePanel","sprintId","retroMut","useSprintRetrospective","wentWell","setWentWell","wentWrong","setWentWrong","actionItems","setActionItems","aiSuggestions","setAiSuggestions","handleGenerate","toast","Loader2","Sparkles","ThumbsUp","prev","ThumbsDown","ListChecks","StandupPanel","standupMut","useSprintStandup","standup","setStandup","Fragment","entry","User","j","ArrowRight","CapacityPanel","capacityMut","useSprintCapacity","capacities","setCapacities","result","setResult","newPerson","setNewPerson","newPoints","setNewPoints","owners","set","k","addPerson","handleAnalyze","person","Users","n","c","barWidth","EstimatePointsButton","taskDescription","onEstimate","className","estimateMut","useSprintEstimatePoints","handleEstimate","confColor","STYLE_OPTIONS","downloadHtml","html","filename","blob","url","openHtmlForPdf","win","statusConfig","Circle","Clock","taskStatusDot","normalizeSprint","raw","CreateSprintForm","onCreated","createSprint","useCreateSprint","form","setForm","handleSubmit","g","DETAIL_TABS","LayoutGrid","MessageSquare","FileText","Target","FileBarChart","SprintDocumentsPanel","docs","useDocuments","updateDoc","useUpdateDocument","docList","doc","fileSize","SprintDetail","onBack","queryClient","useQueryClient","sprintRaw","useSprint","reportRaw","reportLoading","reportError","useSprintReport","velocityRaw","velocityError","useSprintVelocity","healthRaw","healthLoading","healthError","useSprintHealth","generateTasks","useSprintGenerateTasks","applyTasks","useSprintApplyTasks","analyzeMut","useSprintReportAnalyze","businessMut","useSprintBusinessReport","updateSprint","useUpdateSprint","deleteSprint","useDeleteSprint","transitionStatus","useSprintStatusTransition","cloneSprint","useSprintClone","updateAction","useUpdateAction","createAction","useCreateAction","activeTab","setActiveTab","showAddTask","setShowAddTask","newTask","setNewTask","generatedResult","setGeneratedResult","selectedNewTasks","setSelectedNewTasks","selectedExisting","setSelectedExisting","analysisText","setAnalysisText","businessText","setBusinessText","editing","setEditing","editForm","setEditForm","confirmDelete","setConfirmDelete","docMut","useSprintReportDocument","presMut","useSprintReportPresentation","includeAnalysis","setIncludeAnalysis","includeBusiness","setIncludeBusiness","selectedStyle","setSelectedStyle","lastDocHtml","setLastDocHtml","lastPresHtml","setLastPresHtml","useEffect","sprint","report","breakdown","graphContext","completedTasks","completedPoints","completionPct","groupedActions","groups","startEdit","saveEdit","handleDelete","handleTransition","status","allNew","_","allExisting","handleApply","newTasks","existingIds","id","handleBusiness","handleExportDoc","handleExportPres","handleOpenDocForPdf","handleOpenPresForPdf","handleClone","handleKanbanStatusChange","newStatus","handleAddTask","handleRemoveFromSprint","velocity","StatusIcon","ArrowLeft","Edit3","Play","Square","Zap","Copy","Trash2","t","next","tab","TabIcon","AnimatePresence","motion","name","group","r","q","done","Building2","opt","Printer","SprintsPage","sprintsQuery","useSprints","sprintsRaw","selectedSprint","setSelectedSprint","showCreate","setShowCreate","sprints","activeSprints","planningSprints","completedSprints","renderSprintCard","ChevronRight","ErrorState","Calendar"],"mappings":"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","x_google_ignoreList":[0,1,2]}