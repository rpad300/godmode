{"version":3,"file":"FilesPage-C7mO2WbF.js","sources":["../../../node_modules/lucide-react/dist/esm/icons/braces.js","../../frontend/src/components/files/FileDetail.tsx","../../frontend/src/pages/FilesPage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    { d: \"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1\", key: \"ezmyqa\" }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1\",\n      key: \"e1hn23\"\n    }\n  ]\n];\nconst Braces = createLucideIcon(\"braces\", __iconNode);\n\nexport { __iconNode, Braces as default };\n//# sourceMappingURL=braces.js.map\n","import { useState, useEffect } from 'react';\r\nimport {\r\n  FileText, Mic, Mail, MessageSquare, CheckCircle, Clock, AlertCircle,\r\n  RotateCw, Star, Download, Trash2, Share2, Copy,\r\n  Loader2, Eye, Braces, BarChart3, History, Activity, Link2, ArrowLeft,\r\n} from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport { cn } from '@/lib/utils';\r\nimport {\r\n  useDocumentDetail, useDocumentExtraction, useDocumentSummary,\r\n  useDocumentAnalysis, useDocumentVersions, useDocumentActivity,\r\n  useToggleDocumentFavorite, useShareDocument, useReprocessCheck,\r\n  useUpdateDocument, useProjects, useSprints, useActions,\r\n  type DocumentItem,\r\n} from '../../hooks/useGodMode';\r\nimport { CommentsPanel } from '../shared/CommentsPanel';\r\n\r\nconst CARD = 'rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-[var(--shadow-sm)] transition-all duration-200';\r\nconst BTN_DANGER = 'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--color-danger-500)] text-white hover:bg-[var(--color-danger-600)] shadow-sm transition-all duration-150 disabled:opacity-50';\r\nconst BTN_SECONDARY = 'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] hover:bg-[var(--gm-interactive-secondary-hover)] border border-[var(--gm-border-primary)] transition-all duration-150';\r\n\r\nconst typeIcon: Record<string, typeof FileText> = {\r\n  documents: FileText, document: FileText,\r\n  transcripts: Mic, transcript: Mic,\r\n  emails: Mail, email: Mail,\r\n  conversations: MessageSquare, conversation: MessageSquare,\r\n};\r\n\r\ntype TabKey = 'preview' | 'entities' | 'analysis' | 'versions' | 'activity' | 'share';\r\n\r\nfunction SprintProjectPanel({ doc, file, allProjects, allSprints, allActions, updateDoc }: {\r\n  doc: Record<string, unknown> | undefined;\r\n  file: DocumentItem;\r\n  allProjects: any[];\r\n  allSprints: any[];\r\n  allActions: any[];\r\n  updateDoc: ReturnType<typeof useUpdateDocument>;\r\n}) {\r\n  const currentProjectId = (doc?.project_id ?? (file as any).project_id) ? String(doc?.project_id ?? (file as any).project_id) : '';\r\n  const currentSprintId = (doc?.sprint_id ?? (file as any).sprint_id) ? String(doc?.sprint_id ?? (file as any).sprint_id) : '';\r\n  const currentActionId = (doc?.action_id ?? (file as any).action_id) ? String(doc?.action_id ?? (file as any).action_id) : '';\r\n\r\n  const sprints = currentProjectId\r\n    ? allSprints.filter((s: any) => s.project_id === currentProjectId)\r\n    : allSprints;\r\n\r\n  const actions = currentSprintId\r\n    ? allActions.filter((a: any) => (a.sprintId || a.sprint_id) === currentSprintId)\r\n    : allActions;\r\n\r\n  const save = (field: string, value: string) => {\r\n    const payload: Record<string, string | null> = { id: file.id, [field]: value || null };\r\n    if (field === 'project_id') {\r\n      payload.sprint_id = null;\r\n      payload.action_id = null;\r\n    } else if (field === 'sprint_id') {\r\n      payload.action_id = null;\r\n    }\r\n    updateDoc.mutate(\r\n      payload as any,\r\n      { onSuccess: () => toast.success('Updated'), onError: () => toast.error('Update failed') },\r\n    );\r\n  };\r\n\r\n  const SEL = 'w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-xs text-[var(--gm-text-primary)]';\r\n\r\n  return (\r\n    <div className=\"bg-[var(--gm-surface-secondary)] border border-[var(--gm-border-primary)] rounded-xl p-4 space-y-3\">\r\n      <h3 className=\"text-xs font-semibold text-[var(--gm-text-tertiary)] uppercase tracking-wider\">Association</h3>\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3\">\r\n        <div>\r\n          <label className=\"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider block mb-1\">Project</label>\r\n          <select value={currentProjectId} onChange={e => save('project_id', e.target.value)} className={SEL}>\r\n            <option value=\"\">No project</option>\r\n            {allProjects.map((p: any) => (\r\n              <option key={p.id} value={p.id}>{p.name}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n        <div>\r\n          <label className=\"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider block mb-1\">Sprint</label>\r\n          <select value={currentSprintId} onChange={e => save('sprint_id', e.target.value)} className={SEL}>\r\n            <option value=\"\">No sprint</option>\r\n            {sprints.map((s: any) => (\r\n              <option key={s.id} value={s.id}>\r\n                {s.name}{s.status === 'completed' ? ' (done)' : s.status === 'active' ? ' (active)' : ''}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n        <div>\r\n          <label className=\"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider block mb-1\">Task</label>\r\n          <select value={currentActionId} onChange={e => save('action_id', e.target.value)} className={SEL}>\r\n            <option value=\"\">No task</option>\r\n            {actions.map((a: any) => (\r\n              <option key={a.id} value={a.id}>{a.title || a.task || '(untitled)'}</option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n      {updateDoc.isPending && (\r\n        <div className=\"flex items-center gap-1.5 text-[10px] text-[var(--gm-text-tertiary)]\">\r\n          <Loader2 className=\"w-3 h-3 animate-spin\" /> Saving...\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface Props {\r\n  file: DocumentItem;\r\n  onBack: () => void;\r\n  onReprocess: (id: string) => void;\r\n  onDelete?: (id: string) => void;\r\n}\r\n\r\nexport default function FileDetail({ file, onBack, onReprocess, onDelete }: Props) {\r\n  const [activeTab, setActiveTab] = useState<TabKey>('preview');\r\n  const [confirmDelete, setConfirmDelete] = useState(false);\r\n  const id = file.id;\r\n\r\n  const detail = useDocumentDetail(id);\r\n  const extraction = useDocumentExtraction(activeTab === 'entities' ? id : null);\r\n  const summary = useDocumentSummary(id);\r\n  const analysis = useDocumentAnalysis(activeTab === 'analysis' ? id : null);\r\n  const versions = useDocumentVersions(activeTab === 'versions' ? id : null);\r\n  const activity = useDocumentActivity(activeTab === 'activity' ? id : null);\r\n  const reprocessCheck = useReprocessCheck(id);\r\n  const toggleFav = useToggleDocumentFavorite();\r\n  const shareDoc = useShareDocument();\r\n  const updateDoc = useUpdateDocument();\r\n  const { data: allProjects = [] } = useProjects();\r\n  const { data: sprintsData } = useSprints();\r\n  const { data: actionsData } = useActions();\r\n  const allSprints: any[] = (sprintsData as any)?.sprints ?? (Array.isArray(sprintsData) ? sprintsData : []);\r\n  const allActions: any[] = Array.isArray(actionsData) ? actionsData : [];\r\n\r\n  useEffect(() => {\r\n    setActiveTab('preview');\r\n    setConfirmDelete(false);\r\n  }, [file.id]);\r\n\r\n  const doc = (detail.data as Record<string, unknown>)?.document as Record<string, unknown> | undefined;\r\n  const displayName = file.original_filename || file.filename || '(unnamed)';\r\n  const fileType = (file.type || 'document') as string;\r\n  const Icon = typeIcon[fileType] || FileText;\r\n  const meta = (doc?.metadata ?? file.metadata ?? {}) as Record<string, unknown>;\r\n  const sizeStr = file.size ? `${(Number(file.size) / 1024).toFixed(1)} KB` : '—';\r\n  const isFav = !!(doc?.is_favorite ?? (file as Record<string, unknown>).is_favorite);\r\n  const entities = file.entity_counts;\r\n  const summaryText = (summary.data as Record<string, unknown>)?.summary as string | undefined;\r\n\r\n  const tabs: { key: TabKey; label: string; icon: typeof Eye }[] = [\r\n    { key: 'preview', label: 'Preview', icon: Eye },\r\n    { key: 'entities', label: 'Entities', icon: Braces },\r\n    { key: 'analysis', label: 'Analysis', icon: BarChart3 },\r\n    { key: 'versions', label: 'Versions', icon: History },\r\n    { key: 'activity', label: 'Activity', icon: Activity },\r\n    { key: 'share', label: 'Share', icon: Link2 },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-4\">\r\n      <button onClick={onBack} className=\"flex items-center gap-1.5 text-xs text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors mb-2\">\r\n        <ArrowLeft className=\"w-3.5 h-3.5\" /> Back to Files\r\n      </button>\r\n\r\n      <div className={CARD}>\r\n        {/* Header */}\r\n        <div className=\"p-5 rounded-t-xl\" style={{ background: 'linear-gradient(to right, rgba(37,99,235,0.15), rgba(37,99,235,0.04))' }}>\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-12 h-12 rounded-lg border border-blue-500/30 flex items-center justify-center\" style={{ backgroundColor: 'rgba(37,99,235,0.15)' }}>\r\n              <Icon className=\"w-5 h-5 text-blue-400\" />\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <h2 className=\"text-base font-bold text-[var(--gm-text-primary)] truncate\">{displayName}</h2>\r\n              <div className=\"flex items-center gap-2 mt-1\">\r\n                <span className=\"text-[10px] px-2 py-0.5 rounded-full bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)] capitalize\">{fileType}</span>\r\n                <span className=\"text-xs text-[var(--gm-text-tertiary)]\">{sizeStr}</span>\r\n                <span className={`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-full font-medium ${file.status === 'processed' || file.status === 'completed' ? 'bg-green-500/20 text-green-400' :\r\n                  file.status === 'pending' ? 'bg-yellow-500/20 text-yellow-400' :\r\n                    file.status === 'processing' ? 'bg-blue-500/20 text-blue-400' : 'bg-red-500/20 text-red-400'}`}>\r\n                  {file.status === 'processed' || file.status === 'completed' ? <CheckCircle className=\"w-3 h-3\" /> :\r\n                    file.status === 'pending' ? <Clock className=\"w-3 h-3\" /> :\r\n                      file.status === 'processing' ? <Loader2 className=\"w-3 h-3 animate-spin\" /> : <AlertCircle className=\"w-3 h-3\" />}\r\n                  {file.status || '—'}\r\n                </span>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center gap-1.5\">\r\n              <button onClick={() => toggleFav.mutate(file.id)} className=\"w-8 h-8 rounded-lg hover:bg-[var(--gm-surface-hover)] flex items-center justify-center transition-colors\" title=\"Favorite\">\r\n                <Star className={`w-4 h-4 ${isFav ? 'fill-yellow-400 text-yellow-400' : 'text-[var(--gm-text-tertiary)]'}`} />\r\n              </button>\r\n              <a href={`/api/documents/${file.id}/download`} className=\"w-8 h-8 rounded-lg hover:bg-[var(--gm-surface-hover)] flex items-center justify-center transition-colors\" title=\"Download\">\r\n                <Download className=\"w-4 h-4 text-[var(--gm-text-tertiary)]\" />\r\n              </a>\r\n              <button onClick={() => onReprocess(file.id)}\r\n                className={cn('w-8 h-8 rounded-lg hover:bg-[var(--gm-surface-hover)] flex items-center justify-center transition-colors',\r\n                  (reprocessCheck.data as Record<string, unknown>)?.needs_reprocess ? 'ring-2 ring-yellow-500/50' : '')}\r\n                title={(reprocessCheck.data as Record<string, unknown>)?.needs_reprocess ? 'Reprocessing recommended' : 'Reprocess'}>\r\n                <RotateCw className={cn('w-4 h-4', (reprocessCheck.data as Record<string, unknown>)?.needs_reprocess ? 'text-yellow-400' : 'text-[var(--gm-text-tertiary)]')} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Tabs */}\r\n        <div className=\"flex border-b border-[var(--gm-border-primary)] px-5 gap-1 overflow-x-auto\">\r\n          {tabs.map(t => (\r\n            <button key={t.key} onClick={() => setActiveTab(t.key)}\r\n              className={`flex items-center gap-1.5 px-3 py-2.5 text-xs font-medium border-b-2 transition-colors whitespace-nowrap ${activeTab === t.key\r\n                ? 'border-[var(--gm-accent-primary)] text-[var(--gm-accent-primary)]'\r\n                : 'border-transparent text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)]'}`}>\r\n              <t.icon className=\"w-3.5 h-3.5\" /> {t.label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Tab Content */}\r\n        <div className=\"p-5 space-y-4\">\r\n          {activeTab === 'preview' && (\r\n            <>\r\n              {summaryText && (\r\n                <div className=\"bg-blue-600/5 border border-blue-600/10 rounded-xl p-4\">\r\n                  <h3 className=\"text-xs font-semibold text-[var(--gm-accent-primary)] uppercase tracking-wider mb-2\">AI Summary</h3>\r\n                  <p className=\"text-sm text-[var(--gm-text-primary)] leading-relaxed\">{summaryText}</p>\r\n                </div>\r\n              )}\r\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2\">\r\n                {[\r\n                  { label: 'Type', value: fileType },\r\n                  { label: 'Size', value: sizeStr },\r\n                  { label: 'Created', value: file.created_at ? new Date(file.created_at).toLocaleDateString() : '—' },\r\n                  { label: 'Updated', value: file.updated_at ? new Date(file.updated_at).toLocaleDateString() : '—' },\r\n                  ...(meta.pages ? [{ label: 'Pages', value: String(meta.pages) }] : []),\r\n                  ...(meta.language ? [{ label: 'Language', value: String(meta.language) }] : []),\r\n                  ...(meta.author ? [{ label: 'Author', value: String(meta.author) }] : []),\r\n                  ...(meta.word_count ? [{ label: 'Words', value: Number(meta.word_count).toLocaleString() }] : []),\r\n                  ...(meta.source ? [{ label: 'Source', value: String(meta.source) }] : []),\r\n                  ...(meta.speakers ? [{ label: 'Speakers', value: (meta.speakers as string[]).join(', ') }] : []),\r\n                ].map(m => (\r\n                  <div key={m.label} className=\"bg-[var(--gm-bg-tertiary)] rounded-lg p-3\">\r\n                    <span className=\"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider\">{m.label}</span>\r\n                    <p className=\"text-sm font-medium text-[var(--gm-text-primary)] mt-0.5 truncate\">{m.value}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n\r\n              <SprintProjectPanel\r\n                doc={doc}\r\n                file={file}\r\n                allProjects={allProjects}\r\n                allSprints={allSprints}\r\n                allActions={allActions}\r\n                updateDoc={updateDoc}\r\n              />\r\n\r\n              {entities && (\r\n                <div className=\"grid grid-cols-5 gap-2\">\r\n                  {Object.entries(entities).map(([key, val]) => (\r\n                    <div key={key} className=\"bg-[var(--gm-bg-tertiary)] rounded-lg p-3 text-center\">\r\n                      <p className=\"text-xl font-bold text-[var(--gm-text-primary)]\">{val ?? 0}</p>\r\n                      <p className=\"text-[10px] text-[var(--gm-text-tertiary)] uppercase mt-0.5\">{key}</p>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n              {file.content_preview && (\r\n                <div>\r\n                  <h3 className=\"text-xs uppercase text-[var(--gm-text-tertiary)] font-semibold mb-2\">Content Preview</h3>\r\n                  <div className=\"bg-[var(--gm-bg-tertiary)] rounded-lg p-3 text-xs text-[var(--gm-text-secondary)] font-mono leading-relaxed max-h-60 overflow-y-auto whitespace-pre-wrap\">\r\n                    {file.content_preview}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n\r\n          {activeTab === 'entities' && (\r\n            <>\r\n              {extraction.isLoading && <div className=\"flex justify-center py-8\"><Loader2 className=\"w-6 h-6 animate-spin text-[var(--gm-accent-primary)]\" /></div>}\r\n              {extraction.data && (() => {\r\n                const ext = (extraction.data as Record<string, unknown>).extraction as Record<string, unknown> | undefined;\r\n                if (!ext) return <p className=\"text-sm text-[var(--gm-text-tertiary)] text-center py-6\">No extraction data available.</p>;\r\n                const sections = ['facts', 'decisions', 'questions', 'risks', 'actions', 'people', 'participants'] as const;\r\n                return sections.map(section => {\r\n                  const items = ext[section] as Array<Record<string, unknown>> | undefined;\r\n                  if (!items || items.length === 0) return null;\r\n                  return (\r\n                    <div key={section}>\r\n                      <h3 className=\"text-xs font-semibold uppercase tracking-wider text-[var(--gm-text-tertiary)] mb-2 capitalize\">{section} ({items.length})</h3>\r\n                      <div className=\"space-y-1.5\">\r\n                        {items.map((item, i) => (\r\n                          <div key={i} className=\"bg-[var(--gm-surface-hover)] rounded-lg p-3 text-sm\">\r\n                            <p className=\"text-[var(--gm-text-primary)]\">{String(item.text || item.name || item.content || JSON.stringify(item))}</p>\r\n                            <div className=\"flex items-center gap-2 mt-1\">\r\n                              {item.category && <span className=\"text-[10px] px-1.5 py-0.5 rounded bg-blue-600/10 text-[var(--gm-accent-primary)]\">{String(item.category)}</span>}\r\n                              {item.confidence != null && <span className=\"text-[10px] text-[var(--gm-text-tertiary)]\">{(Number(item.confidence) * 100).toFixed(0)}% confidence</span>}\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                });\r\n              })()}\r\n              {!extraction.isLoading && !extraction.data && <p className=\"text-sm text-[var(--gm-text-tertiary)] text-center py-6\">No extraction data available.</p>}\r\n            </>\r\n          )}\r\n\r\n          {activeTab === 'analysis' && (\r\n            <>\r\n              {analysis.isLoading && <div className=\"flex justify-center py-8\"><Loader2 className=\"w-6 h-6 animate-spin text-[var(--gm-accent-primary)]\" /></div>}\r\n              {(() => {\r\n                const analyses = ((analysis.data as Record<string, unknown>)?.analyses ?? []) as Array<Record<string, unknown>>;\r\n                if (!analysis.isLoading && analyses.length === 0) return <p className=\"text-sm text-[var(--gm-text-tertiary)] text-center py-6\">No analysis history yet.</p>;\r\n                return (\r\n                  <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full text-xs\">\r\n                      <thead>\r\n                        <tr className=\"border-b border-[var(--gm-border-primary)] text-left\">\r\n                          <th className=\"pb-2 pr-3 text-[var(--gm-text-tertiary)] font-medium\">Date</th>\r\n                          <th className=\"pb-2 pr-3 text-[var(--gm-text-tertiary)] font-medium\">Provider</th>\r\n                          <th className=\"pb-2 pr-3 text-[var(--gm-text-tertiary)] font-medium\">Model</th>\r\n                          <th className=\"pb-2 pr-3 text-[var(--gm-text-tertiary)] font-medium\">Tokens</th>\r\n                          <th className=\"pb-2 pr-3 text-[var(--gm-text-tertiary)] font-medium\">Cost</th>\r\n                          <th className=\"pb-2 pr-3 text-[var(--gm-text-tertiary)] font-medium\">Latency</th>\r\n                          <th className=\"pb-2 text-[var(--gm-text-tertiary)] font-medium\">Status</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {analyses.map((a, i) => (\r\n                          <tr key={i} className=\"border-b border-[var(--gm-border-primary)]\">\r\n                            <td className=\"py-2 pr-3 text-[var(--gm-text-primary)]\">{a.created_at ? new Date(String(a.created_at)).toLocaleString() : '—'}</td>\r\n                            <td className=\"py-2 pr-3 text-[var(--gm-text-primary)]\">{String(a.provider || '—')}</td>\r\n                            <td className=\"py-2 pr-3 text-[var(--gm-text-primary)]\">{String(a.model || '—')}</td>\r\n                            <td className=\"py-2 pr-3 text-[var(--gm-text-primary)]\">{a.tokens != null ? Number(a.tokens).toLocaleString() : '—'}</td>\r\n                            <td className=\"py-2 pr-3 text-[var(--gm-text-primary)]\">{a.cost != null ? `$${Number(a.cost).toFixed(4)}` : '—'}</td>\r\n                            <td className=\"py-2 pr-3 text-[var(--gm-text-primary)]\">{a.latency_ms != null ? `${Number(a.latency_ms)}ms` : '—'}</td>\r\n                            <td className=\"py-2\">\r\n                              <span className={`px-1.5 py-0.5 rounded text-[10px] font-medium ${a.status === 'completed' ? 'bg-green-500/10 text-green-500' : a.status === 'failed' ? 'bg-red-500/10 text-red-500' : 'bg-yellow-500/10 text-yellow-500'}`}>\r\n                                {String(a.status || '—')}\r\n                              </span>\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                );\r\n              })()}\r\n            </>\r\n          )}\r\n\r\n          {activeTab === 'versions' && (\r\n            <>\r\n              {versions.isLoading && <div className=\"flex justify-center py-8\"><Loader2 className=\"w-6 h-6 animate-spin text-[var(--gm-accent-primary)]\" /></div>}\r\n              {(() => {\r\n                const vList = ((versions.data as Record<string, unknown>)?.versions ?? []) as Array<Record<string, unknown>>;\r\n                if (!versions.isLoading && vList.length === 0) return <p className=\"text-sm text-[var(--gm-text-tertiary)] text-center py-6\">No version history.</p>;\r\n                return (\r\n                  <div className=\"space-y-2\">\r\n                    {vList.map((v, i) => (\r\n                      <div key={i} className=\"bg-[var(--gm-surface-hover)] rounded-lg p-3 flex items-center gap-3\">\r\n                        <div className=\"w-8 h-8 rounded-full bg-blue-600/10 flex items-center justify-center text-xs font-bold text-[var(--gm-accent-primary)]\">v{String(v.version ?? i + 1)}</div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <p className=\"text-sm font-medium text-[var(--gm-text-primary)]\">{String(v.change_notes || v.summary || 'Version update')}</p>\r\n                          <div className=\"flex items-center gap-3 mt-0.5\">\r\n                            {v.created_at && <span className=\"text-[10px] text-[var(--gm-text-tertiary)]\">{new Date(String(v.created_at)).toLocaleString()}</span>}\r\n                            {v.file_size != null && <span className=\"text-[10px] text-[var(--gm-text-tertiary)]\">{(Number(v.file_size) / 1024).toFixed(1)} KB</span>}\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                );\r\n              })()}\r\n            </>\r\n          )}\r\n\r\n          {activeTab === 'activity' && (\r\n            <>\r\n              {activity.isLoading && <div className=\"flex justify-center py-8\"><Loader2 className=\"w-6 h-6 animate-spin text-[var(--gm-accent-primary)]\" /></div>}\r\n              {(() => {\r\n                const aList = ((activity.data as Record<string, unknown>)?.activities ?? []) as Array<Record<string, unknown>>;\r\n                if (!activity.isLoading && aList.length === 0) return <p className=\"text-sm text-[var(--gm-text-tertiary)] text-center py-6\">No activity yet.</p>;\r\n                return (\r\n                  <div className=\"space-y-1.5\">\r\n                    {aList.map((a, i) => (\r\n                      <div key={i} className=\"flex items-start gap-3 py-2 border-b border-[var(--gm-border-primary)] last:border-0\">\r\n                        <div className=\"w-6 h-6 rounded-full bg-blue-600/10 flex items-center justify-center flex-shrink-0 mt-0.5\">\r\n                          <Activity className=\"w-3 h-3 text-[var(--gm-accent-primary)]\" />\r\n                        </div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                          <p className=\"text-sm text-[var(--gm-text-primary)]\">\r\n                            {a.user && <span className=\"font-medium\">{String(a.user)} </span>}\r\n                            {String(a.action || a.type || 'activity')}\r\n                          </p>\r\n                          {a.created_at && <span className=\"text-[10px] text-[var(--gm-text-tertiary)]\">{new Date(String(a.created_at)).toLocaleString()}</span>}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                );\r\n              })()}\r\n            </>\r\n          )}\r\n\r\n          {activeTab === 'share' && <ShareTabContent key={file.id} fileId={file.id} shareMutation={shareDoc} />}\r\n\r\n          {/* Comments */}\r\n          <div className=\"mt-4\">\r\n            <CommentsPanel targetType=\"document\" targetId={file.id} />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Danger Zone */}\r\n        {onDelete && (\r\n          <div className=\"px-5 py-4 border-t border-[var(--gm-border-primary)]\">\r\n            <div className=\"p-4 rounded-lg border border-red-500/20 bg-red-500/5\">\r\n              <p className=\"text-xs font-semibold text-red-500 mb-1\">Danger Zone</p>\r\n              <p className=\"text-xs text-[var(--gm-text-tertiary)] mb-3\">Deleting this document will permanently remove all associated data.</p>\r\n              {!confirmDelete ? (\r\n                <button className=\"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-red-500/10 text-red-500 border border-red-500/30 hover:bg-red-500/20 transition-colors\"\r\n                  onClick={() => setConfirmDelete(true)}>\r\n                  <Trash2 className=\"w-3.5 h-3.5\" /> Delete Document\r\n                </button>\r\n              ) : (\r\n                <div className=\"flex items-center gap-2\">\r\n                  <button className={BTN_DANGER} onClick={() => onDelete(file.id)}>\r\n                    <Trash2 className=\"w-3.5 h-3.5\" /> Confirm Delete\r\n                  </button>\r\n                  <button className={BTN_SECONDARY} onClick={() => setConfirmDelete(false)}>Cancel</button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction ShareTabContent({ fileId, shareMutation }: { fileId: string; shareMutation: ReturnType<typeof useShareDocument> }) {\r\n  const [expires, setExpires] = useState('7d');\r\n  const [maxViews, setMaxViews] = useState(100);\r\n  const [shareUrl, setShareUrl] = useState<string | null>(null);\r\n\r\n  const handleShare = () => {\r\n    shareMutation.mutate({ id: fileId, expires, maxViews }, {\r\n      onSuccess: (data) => { setShareUrl((data as Record<string, unknown>).url as string); toast.success('Share link created'); },\r\n      onError: () => toast.error('Failed to create share link'),\r\n    });\r\n  };\r\n\r\n  const copyLink = () => {\r\n    if (shareUrl) { navigator.clipboard.writeText(shareUrl); toast.success('Link copied to clipboard'); }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <p className=\"text-sm text-[var(--gm-text-tertiary)]\">Generate a shareable link for this document.</p>\r\n      <div className=\"grid grid-cols-2 gap-3\">\r\n        <div>\r\n          <label className=\"text-xs font-medium text-[var(--gm-text-tertiary)] block mb-1\">Expires</label>\r\n          <select value={expires} onChange={e => setExpires(e.target.value)} className=\"w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-xs text-[var(--gm-text-primary)]\">\r\n            <option value=\"1h\">1 hour</option><option value=\"24h\">24 hours</option><option value=\"7d\">7 days</option><option value=\"30d\">30 days</option><option value=\"never\">Never</option>\r\n          </select>\r\n        </div>\r\n        <div>\r\n          <label className=\"text-xs font-medium text-[var(--gm-text-tertiary)] block mb-1\">Max views</label>\r\n          <input type=\"number\" value={maxViews} onChange={e => setMaxViews(Number(e.target.value))} min={1} className=\"w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-xs text-[var(--gm-text-primary)]\" />\r\n        </div>\r\n      </div>\r\n      <button onClick={handleShare} disabled={shareMutation.isPending}\r\n        className=\"w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] text-sm font-medium hover:bg-[var(--gm-interactive-primary-hover)] disabled:opacity-50 transition-colors\">\r\n        {shareMutation.isPending ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Share2 className=\"w-4 h-4\" />} Generate Share Link\r\n      </button>\r\n      {shareUrl && (\r\n        <div className=\"bg-[var(--gm-bg-tertiary)] rounded-lg p-3 flex items-center gap-2\">\r\n          <input type=\"text\" readOnly value={shareUrl} className=\"flex-1 bg-transparent text-xs text-[var(--gm-text-primary)] outline-none truncate\" />\r\n          <button onClick={copyLink} className=\"flex-shrink-0 w-8 h-8 rounded-lg hover:bg-[var(--gm-surface-hover)] flex items-center justify-center\">\r\n            <Copy className=\"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]\" />\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { useState, useMemo } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  FileText, Mic, Mail, MessageSquare, Upload, RotateCw, Trash2, Search,\n  Loader2, CheckCircle, Clock, AlertCircle, FolderOpen,\n  Star, Download, List, Archive, LayoutGrid,\n} from 'lucide-react';\nimport { toast } from 'sonner';\nimport {\n  usePendingFiles, useDeletePendingFile, useUploadFiles, useProcessFiles,\n  useDocuments, useDeleteDocument, useReprocessDocument, useProcessStatus,\n  useToggleDocumentFavorite, useRestoreDocument,\n  useBulkDeleteDocuments, useBulkReprocessDocuments, useBulkExportDocuments,\n  useBulkUpdateDocuments, useSprints,\n  type DocumentItem,\n} from '../hooks/useGodMode';\nimport FileDetail from '../components/files/FileDetail';\n\nconst typeIcon: Record<string, typeof FileText> = {\n  documents: FileText,\n  transcripts: Mic,\n  emails: Mail,\n  images: MessageSquare,\n};\n\nconst statusBadge = (status: string) => {\n  switch (status) {\n    case 'processed': case 'completed': return { icon: CheckCircle, cls: 'bg-gm-status-success-bg text-gm-status-success' };\n    case 'processing': return { icon: Loader2, cls: 'bg-blue-600/10 text-gm-interactive-primary' };\n    case 'pending': return { icon: Clock, cls: 'bg-gm-status-warning-bg text-gm-status-warning' };\n    case 'deleted': return { icon: Archive, cls: 'bg-gm-surface-secondary text-gm-text-tertiary' };\n    default: return { icon: AlertCircle, cls: 'bg-gm-status-danger-bg text-gm-status-danger' };\n  }\n};\n\nexport default function FilesPage() {\n  const [tab, setTab] = useState<'documents' | 'pending' | 'deleted'>('documents');\n  const [search, setSearch] = useState('');\n  const [typeFilter, setTypeFilter] = useState('');\n  const [statusFilter, setStatusFilter] = useState('');\n  const [viewMode, setViewMode] = useState<'list' | 'grid'>('list');\n  const [favOnly, setFavOnly] = useState(false);\n  const [sprintFilter, setSprintFilter] = useState('');\n  const [selectedIds, setSelectedIds] = useState<Set<string>>(new Set());\n  const [modalDoc, setModalDoc] = useState<DocumentItem | null>(null);\n\n  const { data: sprintsData } = useSprints();\n  const allSprints: any[] = (sprintsData as any)?.sprints ?? (Array.isArray(sprintsData) ? sprintsData : []);\n\n  const documents = useDocuments({\n    search: search || undefined,\n    type: typeFilter || undefined,\n    status: tab === 'deleted' ? 'deleted' : (statusFilter || undefined),\n    sprint_id: sprintFilter || undefined,\n    limit: 100,\n  });\n  const pending = usePendingFiles();\n  const { data: processStatus } = useProcessStatus();\n\n  const uploadFiles = useUploadFiles();\n  const processFiles = useProcessFiles();\n  const deleteDocument = useDeleteDocument();\n  const reprocessDocument = useReprocessDocument();\n  const deletePendingFile = useDeletePendingFile();\n  const toggleFavorite = useToggleDocumentFavorite();\n  const restoreDocument = useRestoreDocument();\n  const bulkDelete = useBulkDeleteDocuments();\n  const bulkReprocess = useBulkReprocessDocuments();\n  const bulkExport = useBulkExportDocuments();\n  const bulkUpdate = useBulkUpdateDocuments();\n  const [bulkSprintId, setBulkSprintId] = useState('');\n\n  const isProcessing = processStatus?.status === 'processing' || processFiles.isPending;\n  const rawDocList = documents.data?.documents ?? [];\n  const statusCounts = documents.data?.statusCounts;\n  const pendingFiles = pending.data ?? [];\n\n  const docList = useMemo(() => {\n    if (!favOnly) return rawDocList;\n    return rawDocList.filter(d => (d as Record<string, unknown>).is_favorite);\n  }, [rawDocList, favOnly]);\n\n  const toggleSelect = (id: string) => {\n    setSelectedIds(prev => {\n      const next = new Set(prev);\n      if (next.has(id)) next.delete(id); else next.add(id);\n      return next;\n    });\n  };\n  const selectAll = () => setSelectedIds(new Set(docList.map(d => d.id)));\n  const clearSelection = () => setSelectedIds(new Set());\n\n  const handleUpload = (files: FileList | null) => {\n    if (!files || files.length === 0) return;\n    uploadFiles.mutate(\n      { files: Array.from(files), type: 'documents' },\n      {\n        onSuccess: () => toast.success(`${files.length} file(s) uploaded`),\n        onError: () => toast.error('Upload failed'),\n      },\n    );\n  };\n\n  const handleProcess = () => {\n    processFiles.mutate(undefined, {\n      onSuccess: () => toast.success('Processing started'),\n      onError: () => toast.error('Processing failed to start'),\n    });\n  };\n\n  const handleBulkDelete = () => {\n    const ids = Array.from(selectedIds);\n    bulkDelete.mutate(ids, {\n      onSuccess: () => { toast.success(`${ids.length} document(s) deleted`); clearSelection(); },\n      onError: () => toast.error('Bulk delete failed'),\n    });\n  };\n\n  const handleBulkReprocess = () => {\n    const ids = Array.from(selectedIds);\n    bulkReprocess.mutate(ids, {\n      onSuccess: () => { toast.success(`${ids.length} document(s) queued for reprocessing`); clearSelection(); },\n      onError: () => toast.error('Bulk reprocess failed'),\n    });\n  };\n\n  const handleBulkExport = () => {\n    const ids = Array.from(selectedIds);\n    bulkExport.mutate({ ids }, {\n      onSuccess: () => { toast.success('Export downloaded'); clearSelection(); },\n      onError: () => toast.error('Export failed'),\n    });\n  };\n\n  // Detail view (replaces list)\n  if (modalDoc) {\n    return (\n      <FileDetail\n        file={modalDoc}\n        onBack={() => setModalDoc(null)}\n        onReprocess={(id) => {\n          reprocessDocument.mutate(id, { onSuccess: () => toast.success('Reprocessing started') });\n        }}\n        onDelete={(id) => {\n          deleteDocument.mutate(id, { onSuccess: () => { toast.success('Document deleted'); setModalDoc(null); } });\n        }}\n      />\n    );\n  }\n\n  const handleFavorite = (e: React.MouseEvent, id: string) => {\n    e.stopPropagation();\n    toggleFavorite.mutate(id);\n  };\n\n  const handleRestore = (id: string) => {\n    restoreDocument.mutate(id, {\n      onSuccess: () => toast.success('Document restored'),\n    });\n  };\n\n  const renderDocCard = (doc: DocumentItem) => {\n    const sb = statusBadge(doc.status);\n    const Icon = typeIcon[doc.type || ''] || FileText;\n    const isFav = !!(doc as Record<string, unknown>).is_favorite;\n    const isSelected = selectedIds.has(doc.id);\n    const docSprintId = (doc as Record<string, unknown>).sprint_id as string | undefined;\n    const sprintName = docSprintId ? allSprints.find((s: any) => s.id === docSprintId)?.name : null;\n\n    if (viewMode === 'grid') {\n      return (\n        <motion.div\n          key={doc.id}\n          layout\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          className={`bg-gm-surface-primary border rounded-xl p-4 hover:border-blue-600/30 transition-all cursor-pointer group relative ${isSelected ? 'border-gm-interactive-primary ring-2 ring-blue-600/20' : 'border-gm-border-primary'}`}\n          onClick={() => setModalDoc(doc)}\n        >\n          <div className=\"absolute top-3 left-3 flex items-center gap-1.5\">\n            <input\n              type=\"checkbox\"\n              checked={isSelected}\n              onChange={() => toggleSelect(doc.id)}\n              onClick={e => e.stopPropagation()}\n              className=\"w-3.5 h-3.5 rounded border-gm-border-primary accent-gm-interactive-primary\"\n            />\n          </div>\n          <div className=\"absolute top-3 right-3 flex items-center gap-1\">\n            <button onClick={(e) => handleFavorite(e, doc.id)} className=\"opacity-0 group-hover:opacity-100 transition-opacity\">\n              <Star className={`w-3.5 h-3.5 ${isFav ? 'fill-yellow-400 text-yellow-400' : 'text-gm-text-tertiary hover:text-yellow-400'}`} />\n            </button>\n          </div>\n          <div className=\"flex flex-col items-center pt-4\">\n            <div className=\"w-12 h-12 rounded-lg bg-blue-600/10 border border-blue-600/20 flex items-center justify-center mb-3\">\n              <Icon className=\"w-5 h-5 text-gm-interactive-primary\" />\n            </div>\n            <p className=\"text-sm font-medium text-gm-text-primary truncate w-full text-center\">{doc.original_filename || doc.filename}</p>\n            <div className=\"flex items-center gap-2 mt-1.5 flex-wrap justify-center\">\n              {doc.type && <span className=\"text-[10px] text-gm-text-tertiary capitalize\">{doc.type}</span>}\n              <span className={`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-full font-medium ${sb.cls}`}>\n                <sb.icon className={`w-3 h-3 ${doc.status === 'processing' ? 'animate-spin' : ''}`} /> {doc.status || '—'}\n              </span>\n              {sprintName && (\n                <span className=\"inline-flex items-center text-[10px] px-2 py-0.5 rounded-full font-medium bg-purple-500/10 text-purple-400 border border-purple-500/20\">\n                  {sprintName}\n                </span>\n              )}\n            </div>\n            {doc.size && <span className=\"text-[10px] text-gm-text-tertiary mt-1\">{(Number(doc.size) / 1024).toFixed(1)} KB</span>}\n          </div>\n        </motion.div>\n      );\n    }\n\n    return (\n      <motion.div\n        key={doc.id}\n        layout\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        className={`bg-gm-surface-primary border rounded-xl p-3.5 hover:border-blue-600/30 transition-all cursor-pointer group ${isSelected ? 'border-gm-interactive-primary ring-2 ring-blue-600/20' : 'border-gm-border-primary'}`}\n        onClick={() => setModalDoc(doc)}\n      >\n        <div className=\"flex items-center gap-3\">\n          <input\n            type=\"checkbox\"\n            checked={isSelected}\n            onChange={() => toggleSelect(doc.id)}\n            onClick={e => e.stopPropagation()}\n            className=\"w-3.5 h-3.5 rounded border-gm-border-primary accent-gm-interactive-primary flex-shrink-0\"\n          />\n          <button onClick={(e) => handleFavorite(e, doc.id)} className=\"flex-shrink-0\">\n            <Star className={`w-4 h-4 transition-colors ${isFav ? 'fill-yellow-400 text-yellow-400' : 'text-gray-600 hover:text-yellow-400'}`} />\n          </button>\n          <Icon className=\"w-5 h-5 text-gm-text-tertiary group-hover:text-gm-interactive-primary transition-colors flex-shrink-0\" />\n          <div className=\"flex-1 min-w-0\">\n            <p className=\"text-sm font-medium text-gm-text-primary truncate group-hover:text-gm-interactive-primary transition-colors\">\n              {doc.original_filename || doc.filename}\n            </p>\n            <div className=\"flex items-center gap-2 mt-0.5\">\n              {doc.type && <span className=\"text-[10px] text-gm-text-tertiary capitalize\">{doc.type}</span>}\n              {doc.size && <span className=\"text-[10px] text-gm-text-tertiary\">{(Number(doc.size) / 1024).toFixed(1)} KB</span>}\n              {doc.created_at && <span className=\"text-[10px] text-gm-text-tertiary\">{new Date(doc.created_at).toLocaleDateString()}</span>}\n            </div>\n          </div>\n          {sprintName && (\n            <span className=\"inline-flex items-center text-[10px] px-2 py-0.5 rounded-full font-medium bg-purple-500/10 text-purple-400 border border-purple-500/20 whitespace-nowrap\">\n              {sprintName}\n            </span>\n          )}\n          <span className={`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-full font-medium ${sb.cls}`}>\n            <sb.icon className={`w-3 h-3 ${doc.status === 'processing' ? 'animate-spin' : ''}`} /> {doc.status || '—'}\n          </span>\n          <a\n            href={`/api/documents/${doc.id}/download`}\n            onClick={e => e.stopPropagation()}\n            className=\"w-7 h-7 rounded-lg hover:bg-gm-surface-hover flex items-center justify-center text-gm-text-tertiary hover:text-gm-text-primary transition-colors opacity-0 group-hover:opacity-100\"\n            title=\"Download\"\n          >\n            <Download className=\"w-3.5 h-3.5\" />\n          </a>\n        </div>\n      </motion.div>\n    );\n  };\n\n  return (\n    <div className=\"p-6 space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-2xl font-bold text-gm-text-primary\">Files & Documents</h1>\n        <div className=\"flex gap-2\">\n          {(pendingFiles.length > 0 || isProcessing) && (\n            <button onClick={handleProcess} disabled={isProcessing} className=\"px-3 py-1.5 rounded-lg bg-gm-interactive-secondary text-gm-text-primary text-xs font-medium hover:bg-gm-interactive-secondary-hover flex items-center gap-1.5 disabled:opacity-50\">\n              {isProcessing ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <RotateCw className=\"w-3.5 h-3.5\" />}\n              {isProcessing ? 'Processing...' : `Process ${pendingFiles.length} file(s)`}\n            </button>\n          )}\n          <label className=\"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover flex items-center gap-1.5 cursor-pointer transition-colors\">\n            <Upload className=\"w-3.5 h-3.5\" /> Upload\n            <input type=\"file\" multiple className=\"hidden\" onChange={(e) => handleUpload(e.target.files)} />\n          </label>\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"flex gap-1 bg-gm-surface-secondary rounded-xl p-1\">\n        {([\n          { key: 'documents' as const, label: 'Documents', count: documents.data?.total ?? 0 },\n          { key: 'pending' as const, label: 'Pending', count: pendingFiles.length },\n          { key: 'deleted' as const, label: 'Deleted', count: statusCounts?.deleted ?? 0 },\n        ]).map(t => (\n          <button\n            key={t.key}\n            onClick={() => { setTab(t.key); clearSelection(); }}\n            className={`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${tab === t.key ? 'bg-gm-surface-primary text-gm-text-primary shadow-sm' : 'text-gm-text-tertiary hover:text-gm-text-primary'}`}\n          >\n            {t.label} <span className=\"ml-1 text-[10px] opacity-60\">{t.count}</span>\n          </button>\n        ))}\n      </div>\n\n      {/* Processing progress bar */}\n      {isProcessing && processStatus && (\n        <motion.div initial={{ opacity: 0, height: 0 }} animate={{ opacity: 1, height: 'auto' }} className=\"bg-blue-600/5 border border-blue-600/20 rounded-xl p-4\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <div className=\"flex items-center gap-2\">\n              <Loader2 className=\"w-4 h-4 animate-spin text-gm-interactive-primary\" />\n              <span className=\"text-sm font-medium text-gm-text-primary\">Processing files...</span>\n            </div>\n            <span className=\"text-xs text-gm-text-tertiary\">\n              {processStatus.processedFiles ?? 0} / {processStatus.totalFiles ?? '?'} files\n            </span>\n          </div>\n          {processStatus.currentFile && (\n            <p className=\"text-xs text-gm-text-tertiary mb-2 truncate\">Current: {processStatus.currentFile}</p>\n          )}\n          <div className=\"w-full bg-gm-surface-secondary rounded-full h-2 overflow-hidden\">\n            <motion.div\n              className=\"bg-gm-interactive-primary h-full rounded-full\"\n              initial={{ width: 0 }}\n              animate={{ width: `${processStatus.progress ?? ((processStatus.processedFiles && processStatus.totalFiles) ? Math.round(((processStatus.processedFiles ?? 0) / (processStatus.totalFiles || 1)) * 100) : 0)}%` }}\n              transition={{ duration: 0.5 }}\n            />\n          </div>\n        </motion.div>\n      )}\n\n      {/* Status counts */}\n      {tab === 'documents' && statusCounts && (\n        <div className=\"flex gap-2 flex-wrap\">\n          {[\n            { label: 'Processed', value: statusCounts.processed ?? 0, color: 'text-gm-status-success' },\n            { label: 'Processing', value: statusCounts.processing ?? 0, color: 'text-gm-interactive-primary' },\n            { label: 'Pending', value: statusCounts.pending ?? 0, color: 'text-gm-status-warning' },\n            { label: 'Failed', value: statusCounts.failed ?? 0, color: 'text-gm-status-danger' },\n          ].map(s => (\n            <div key={s.label} className=\"bg-gm-surface-primary border border-gm-border-primary rounded-lg px-3 py-2 flex items-center gap-2\">\n              <span className={`text-lg font-bold ${s.color}`}>{s.value}</span>\n              <span className=\"text-[10px] text-gm-text-tertiary uppercase tracking-wider\">{s.label}</span>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Filters + View toggle */}\n      {(tab === 'documents' || tab === 'deleted') && (\n        <div className=\"flex items-center gap-2 flex-wrap\">\n          <div className=\"relative flex-1 max-w-xs\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gm-text-tertiary\" />\n            <input\n              value={search}\n              onChange={(e) => setSearch(e.target.value)}\n              placeholder=\"Search documents...\"\n              className=\"w-full pl-9 pr-3 py-1.5 bg-gm-surface-secondary border border-gm-border-primary rounded-lg text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus\"\n            />\n          </div>\n          {tab === 'documents' && (\n            <>\n              <select value={typeFilter} onChange={e => setTypeFilter(e.target.value)} className=\"bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-1.5 text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus\">\n                <option value=\"\">All types</option>\n                <option value=\"documents\">Documents</option>\n                <option value=\"transcripts\">Transcripts</option>\n                <option value=\"emails\">Emails</option>\n                <option value=\"images\">Images</option>\n              </select>\n              <select value={statusFilter} onChange={e => setStatusFilter(e.target.value)} className=\"bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-1.5 text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus\">\n                <option value=\"\">All statuses</option>\n                <option value=\"processed\">Processed</option>\n                <option value=\"processing\">Processing</option>\n                <option value=\"pending\">Pending</option>\n                <option value=\"failed\">Failed</option>\n              </select>\n              <select value={sprintFilter} onChange={e => setSprintFilter(e.target.value)} className=\"bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-1.5 text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus\">\n                <option value=\"\">All sprints</option>\n                <option value=\"_none\">No sprint</option>\n                {allSprints.map((s: any) => (\n                  <option key={s.id} value={s.id}>{s.name}{s.status === 'active' ? ' (active)' : ''}</option>\n                ))}\n              </select>\n              <button\n                onClick={() => setFavOnly(!favOnly)}\n                className={`flex items-center gap-1.5 px-3 py-1.5 rounded-lg border text-xs font-medium transition-colors ${favOnly ? 'bg-yellow-400/10 border-yellow-400/30 text-yellow-600' : 'bg-gm-surface-secondary border-gm-border-primary text-gm-text-tertiary hover:text-gm-text-primary'}`}\n              >\n                <Star className={`w-3.5 h-3.5 ${favOnly ? 'fill-yellow-400' : ''}`} /> Favorites\n              </button>\n            </>\n          )}\n          <div className=\"ml-auto flex items-center gap-1 bg-gm-surface-secondary rounded-lg p-0.5\">\n            <button onClick={() => setViewMode('list')} className={`p-1.5 rounded-md transition-colors ${viewMode === 'list' ? 'bg-gm-surface-primary shadow-sm text-gm-text-primary' : 'text-gm-text-tertiary hover:text-gm-text-primary'}`}>\n              <List className=\"w-3.5 h-3.5\" />\n            </button>\n            <button onClick={() => setViewMode('grid')} className={`p-1.5 rounded-md transition-colors ${viewMode === 'grid' ? 'bg-gm-surface-primary shadow-sm text-gm-text-primary' : 'text-gm-text-tertiary hover:text-gm-text-primary'}`}>\n              <LayoutGrid className=\"w-3.5 h-3.5\" />\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Bulk selection bar */}\n      <AnimatePresence>\n        {selectedIds.size > 0 && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: 'auto' }}\n            exit={{ opacity: 0, height: 0 }}\n            className=\"flex items-center gap-3 bg-blue-600/5 border border-blue-600/20 rounded-xl px-4 py-2.5\"\n          >\n            <span className=\"text-sm font-medium text-gm-text-primary\">{selectedIds.size} selected</span>\n            <button onClick={selectAll} className=\"text-xs text-gm-interactive-primary hover:underline\">Select all</button>\n            <button onClick={clearSelection} className=\"text-xs text-gm-text-tertiary hover:underline\">Clear</button>\n            <div className=\"flex items-center gap-2 ml-3\">\n              <select\n                value={bulkSprintId}\n                onChange={e => setBulkSprintId(e.target.value)}\n                className=\"bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-2 py-1.5 text-xs text-gm-text-primary\"\n              >\n                <option value=\"\">Assign sprint...</option>\n                <option value=\"_none\">Remove sprint</option>\n                {allSprints.map((s: any) => (\n                  <option key={s.id} value={s.id}>{s.name}</option>\n                ))}\n              </select>\n              <button\n                onClick={() => {\n                  if (!bulkSprintId) return;\n                  const ids = Array.from(selectedIds);\n                  const sprintVal = bulkSprintId === '_none' ? null : bulkSprintId;\n                  bulkUpdate.mutate({ ids, updates: { sprint_id: sprintVal } }, {\n                    onSuccess: () => { toast.success(`Sprint updated on ${ids.length} document(s)`); clearSelection(); setBulkSprintId(''); },\n                    onError: () => toast.error('Bulk sprint update failed'),\n                  });\n                }}\n                disabled={!bulkSprintId || bulkUpdate.isPending}\n                className=\"flex items-center gap-1 px-2.5 py-1.5 rounded-lg bg-purple-500/10 text-purple-400 border border-purple-500/20 text-xs font-medium hover:bg-purple-500/20 transition-colors disabled:opacity-40\"\n              >\n                {bulkUpdate.isPending ? <Loader2 className=\"w-3 h-3 animate-spin\" /> : null}\n                Apply\n              </button>\n            </div>\n            <div className=\"ml-auto flex items-center gap-2\">\n              <button\n                onClick={handleBulkExport}\n                disabled={bulkExport.isPending}\n                className=\"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-gm-surface-secondary text-gm-text-primary text-xs hover:bg-gm-surface-hover transition-colors\"\n              >\n                <Download className=\"w-3.5 h-3.5\" /> Export\n              </button>\n              <button\n                onClick={handleBulkReprocess}\n                disabled={bulkReprocess.isPending}\n                className=\"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs hover:bg-gm-interactive-primary-hover transition-colors\"\n              >\n                <RotateCw className=\"w-3.5 h-3.5\" /> Reprocess\n              </button>\n              <button\n                onClick={handleBulkDelete}\n                disabled={bulkDelete.isPending}\n                className=\"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-gm-status-danger-bg text-gm-status-danger text-xs hover:bg-red-500/20 transition-colors\"\n              >\n                <Trash2 className=\"w-3.5 h-3.5\" /> Delete\n              </button>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Documents tab */}\n      {tab === 'documents' && (\n        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }}>\n          {documents.isLoading ? (\n            <div className=\"flex items-center justify-center h-32\">\n              <Loader2 className=\"h-8 w-8 animate-spin text-gm-interactive-primary\" />\n            </div>\n          ) : docList.length === 0 ? (\n            <div className=\"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-8 text-center text-gm-text-tertiary\">\n              <FolderOpen className=\"h-12 w-12 mx-auto mb-4 text-gray-500\" />\n              {favOnly ? 'No favorite documents.' : 'No documents found. Upload files to get started.'}\n            </div>\n          ) : (\n            <div className={viewMode === 'grid' ? 'grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3' : 'space-y-2'}>\n              {docList.map(doc => renderDocCard(doc))}\n            </div>\n          )}\n        </motion.div>\n      )}\n\n      {/* Deleted tab */}\n      {tab === 'deleted' && (\n        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }}>\n          {documents.isLoading ? (\n            <div className=\"flex items-center justify-center h-32\">\n              <Loader2 className=\"h-8 w-8 animate-spin text-gm-interactive-primary\" />\n            </div>\n          ) : rawDocList.length === 0 ? (\n            <div className=\"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-8 text-center text-gm-text-tertiary\">\n              <Archive className=\"h-12 w-12 mx-auto mb-4 text-gray-500\" />\n              No deleted documents.\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              {rawDocList.map(doc => {\n                const Icon = typeIcon[doc.type || ''] || FileText;\n                return (\n                  <div key={doc.id} className=\"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-3.5 flex items-center gap-3 opacity-70\">\n                    <Icon className=\"w-5 h-5 text-gm-text-tertiary flex-shrink-0\" />\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-sm font-medium text-gm-text-primary truncate\">{doc.original_filename || doc.filename}</p>\n                      <div className=\"flex items-center gap-2 mt-0.5\">\n                        {doc.type && <span className=\"text-[10px] text-gm-text-tertiary capitalize\">{doc.type}</span>}\n                        {doc.created_at && <span className=\"text-[10px] text-gm-text-tertiary\">{new Date(doc.created_at).toLocaleDateString()}</span>}\n                      </div>\n                    </div>\n                    <button\n                      onClick={() => handleRestore(doc.id)}\n                      className=\"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs hover:bg-gm-interactive-primary-hover flex items-center gap-1.5 transition-colors\"\n                    >\n                      <RotateCw className=\"w-3.5 h-3.5\" /> Restore\n                    </button>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </motion.div>\n      )}\n\n      {/* Pending tab */}\n      {tab === 'pending' && (\n        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }}>\n          {pending.isLoading ? (\n            <div className=\"flex items-center justify-center h-32\">\n              <Loader2 className=\"h-8 w-8 animate-spin text-gm-interactive-primary\" />\n            </div>\n          ) : pendingFiles.length === 0 ? (\n            <div className=\"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-8 text-center text-gm-text-tertiary\">\n              <FolderOpen className=\"h-12 w-12 mx-auto mb-4 text-gray-500\" />\n              No pending files. Upload files to add them to the processing queue.\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              {pendingFiles.map(file => (\n                <div key={`${file.folder}/${file.filename}`} className=\"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-3.5 flex items-center gap-3\">\n                  <FileText className=\"w-5 h-5 text-gm-text-tertiary flex-shrink-0\" />\n                  <div className=\"flex-1 min-w-0\">\n                    <p className=\"text-sm font-medium text-gm-text-primary truncate\">{file.filename}</p>\n                    <div className=\"flex items-center gap-2 mt-0.5\">\n                      <span className=\"text-[10px] text-gm-text-tertiary\">{file.folder}</span>\n                      <span className=\"text-[10px] text-gm-text-tertiary\">{((file.size ?? 0) / 1024).toFixed(1)} KB</span>\n                    </div>\n                  </div>\n                  <span className=\"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-warning-bg text-gm-status-warning font-medium\">{file.status || '—'}</span>\n                  <button\n                    onClick={() => deletePendingFile.mutate({ folder: file.folder, filename: file.filename })}\n                    className=\"w-7 h-7 rounded-lg hover:bg-gm-status-danger-bg flex items-center justify-center text-gm-text-tertiary hover:text-gm-status-danger transition-colors\"\n                  >\n                    <Trash2 className=\"w-3.5 h-3.5\" />\n                  </button>\n                </div>\n              ))}\n            </div>\n          )}\n        </motion.div>\n      )}\n\n    </div>\n  );\n}\n"],"names":["__iconNode","Braces","createLucideIcon","CARD","BTN_DANGER","BTN_SECONDARY","typeIcon","FileText","Mic","Mail","MessageSquare","SprintProjectPanel","doc","file","allProjects","allSprints","allActions","updateDoc","currentProjectId","currentSprintId","currentActionId","sprints","s","actions","a","save","field","value","payload","toast","SEL","jsxs","jsx","e","p","Loader2","FileDetail","onBack","onReprocess","onDelete","activeTab","setActiveTab","useState","confirmDelete","setConfirmDelete","id","detail","useDocumentDetail","extraction","useDocumentExtraction","summary","useDocumentSummary","analysis","useDocumentAnalysis","versions","useDocumentVersions","activity","useDocumentActivity","reprocessCheck","useReprocessCheck","toggleFav","useToggleDocumentFavorite","shareDoc","useShareDocument","useUpdateDocument","useProjects","sprintsData","useSprints","actionsData","useActions","useEffect","displayName","fileType","Icon","meta","sizeStr","isFav","entities","summaryText","tabs","Eye","BarChart3","History","Activity","Link2","ArrowLeft","CheckCircle","Clock","AlertCircle","Star","Download","cn","RotateCw","t","Fragment","m","key","val","ext","section","items","item","i","analyses","vList","v","aList","ShareTabContent","CommentsPanel","Trash2","fileId","shareMutation","expires","setExpires","maxViews","setMaxViews","shareUrl","setShareUrl","handleShare","data","copyLink","Share2","Copy","statusBadge","status","Archive","FilesPage","tab","setTab","search","setSearch","typeFilter","setTypeFilter","statusFilter","setStatusFilter","viewMode","setViewMode","favOnly","setFavOnly","sprintFilter","setSprintFilter","selectedIds","setSelectedIds","modalDoc","setModalDoc","documents","useDocuments","pending","usePendingFiles","processStatus","useProcessStatus","uploadFiles","useUploadFiles","processFiles","useProcessFiles","deleteDocument","useDeleteDocument","reprocessDocument","useReprocessDocument","deletePendingFile","useDeletePendingFile","toggleFavorite","restoreDocument","useRestoreDocument","bulkDelete","useBulkDeleteDocuments","bulkReprocess","useBulkReprocessDocuments","bulkExport","useBulkExportDocuments","bulkUpdate","useBulkUpdateDocuments","bulkSprintId","setBulkSprintId","isProcessing","rawDocList","statusCounts","pendingFiles","docList","useMemo","d","toggleSelect","prev","next","selectAll","clearSelection","handleUpload","files","handleProcess","handleBulkDelete","ids","handleBulkReprocess","handleBulkExport","handleFavorite","handleRestore","renderDocCard","sb","isSelected","docSprintId","sprintName","motion","Upload","Search","List","LayoutGrid","AnimatePresence","sprintVal","FolderOpen"],"mappings":"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","x_google_ignoreList":[0]}