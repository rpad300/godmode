import{c as ve,r as x,bM as je,bN as fe,bO as Ne,bP as we,bQ as ke,bR as Se,bS as Ce,bT as ne,bU as De,j as e,br as Fe,bs as Pe,bt as _e,a3 as W,a1 as J,b9 as Q,K as L,C as le,N as p,M as ce,b8 as X,a as se,ak as Y,P as ae,bV as Le,O as n,bW as $e,bX as Ee,bY as ze,bZ as Ae,b_ as Re,b$ as Te,c0 as Be,c1 as Me,c2 as Ie,c3 as Ue,c4 as Oe,c5 as Ve,aq as w,a5 as qe,ar as Ke,H as re}from"./main-BKbBKYvC.js";import{C as He}from"./CommentsPanel-Dn8gVtu4.js";import{C as oe}from"./circle-check-big-BfAZDzfZ.js";import{S as q}from"./star-_8XYD7us.js";import{R as K}from"./rotate-cw-DMgodGxB.js";import{E as Ge}from"./eye-DDSd_vfm.js";import{C as We}from"./chart-column-WCU8uNwR.js";import{H as Je}from"./history-fSYOK_lq.js";import{L as Qe}from"./link-2-CWyrMbe7.js";import{C as Xe}from"./copy-nMxDZuon.js";import{U as Ye}from"./upload-BtADKM1s.js";import{L as Ze}from"./list-DtABesIA.js";import{L as et}from"./layout-grid-BBa61xmh.js";import{A as me}from"./archive-CJZaF8jg.js";import"./send-BFJJPLhY.js";import"./pen-BADy_74g.js";import"./circle-DnYbs28l.js";const tt=[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]],st=ve("braces",tt),at={documents:L,document:L,transcripts:Q,transcript:Q,emails:J,email:J,conversations:W,conversation:W},rt=({file:s,open:k,onClose:S,onReprocess:z,onDelete:f})=>{const[l,v]=x.useState("preview"),u=s?.id??null,N=je(u),g=fe(l==="entities"?u:null),o=Ne(u),C=we(l==="analysis"?u:null),h=ke(l==="versions"?u:null),D=Se(l==="activity"?u:null),$=Ce(u),E=ne(),F=De();if(!s)return null;const A=N.data?.document,m=s.original_filename||s.filename||"(unnamed)",R=s.type||"document",B=at[R]||L,d=A?.metadata??s.metadata??{},M=s.size?`${(Number(s.size)/1024).toFixed(1)} KB`:"—",H=!!(A?.is_favorite??s.is_favorite),I=s.entity_counts,U=o.data?.summary,O=[{key:"preview",label:"Preview",icon:Ge},{key:"entities",label:"Entities",icon:st},{key:"analysis",label:"Analysis",icon:We},{key:"versions",label:"Versions",icon:Je},{key:"activity",label:"Activity",icon:ae},{key:"share",label:"Share",icon:Qe}];return e.jsx(Fe,{open:k,onOpenChange:r=>!r&&S(),children:e.jsxs(Pe,{className:"max-w-3xl p-0 overflow-hidden",children:[e.jsxs(_e,{className:"sr-only",children:["File Details: ",m]}),e.jsx("div",{className:"p-5",style:{background:"linear-gradient(to right, rgba(37,99,235,0.25), rgba(37,99,235,0.08))"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg border border-blue-500/30 flex items-center justify-center",style:{backgroundColor:"rgba(37,99,235,0.15)"},children:e.jsx(B,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-base font-bold text-white truncate",children:m}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full text-blue-200 capitalize",style:{backgroundColor:"rgba(255,255,255,0.1)"},children:R}),e.jsx("span",{className:"text-xs text-slate-300",children:M}),e.jsxs("span",{className:`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-full font-medium ${s.status==="processed"||s.status==="completed"?"bg-green-500/20 text-green-400":s.status==="pending"?"bg-yellow-500/20 text-yellow-400":s.status==="processing"?"bg-blue-500/20 text-blue-400":"bg-red-500/20 text-red-400"}`,children:[s.status==="processed"||s.status==="completed"?e.jsx(oe,{className:"w-3 h-3"}):s.status==="pending"?e.jsx(le,{className:"w-3 h-3"}):s.status==="processing"?e.jsx(p,{className:"w-3 h-3 animate-spin"}):e.jsx(ce,{className:"w-3 h-3"}),s.status||"—"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("button",{onClick:()=>E.mutate(s.id),className:"w-8 h-8 rounded-lg hover:bg-white/10 flex items-center justify-center transition-colors",title:"Favorite",children:e.jsx(q,{className:`w-4 h-4 ${H?"fill-yellow-400 text-yellow-400":"text-slate-400"}`})}),e.jsx("a",{href:`/api/documents/${s.id}/download`,className:"w-8 h-8 rounded-lg hover:bg-white/10 flex items-center justify-center transition-colors",title:"Download",children:e.jsx(X,{className:"w-4 h-4 text-slate-400"})}),e.jsx("button",{onClick:()=>z(s.id),className:se("w-8 h-8 rounded-lg hover:bg-white/10 flex items-center justify-center transition-colors",$.data?.needs_reprocess?"ring-2 ring-yellow-500/50":""),title:$.data?.needs_reprocess?"Reprocessing recommended":"Reprocess",children:e.jsx(K,{className:se("w-4 h-4",$.data?.needs_reprocess?"text-yellow-400":"text-slate-400")})}),f&&e.jsx("button",{onClick:()=>f(s.id),className:"w-8 h-8 rounded-lg hover:bg-red-500/20 flex items-center justify-center transition-colors",title:"Delete",children:e.jsx(Y,{className:"w-4 h-4 text-red-400"})})]})]})}),e.jsx("div",{className:"flex border-b border-[var(--gm-border-primary)] px-5 gap-1 overflow-x-auto",style:{borderColor:"var(--gm-border-primary)"},children:O.map(r=>e.jsxs("button",{onClick:()=>v(r.key),className:`flex items-center gap-1.5 px-3 py-2.5 text-xs font-medium border-b-2 transition-colors whitespace-nowrap ${l===r.key?"border-blue-500 text-blue-400":"border-transparent text-slate-400 hover:text-slate-200"}`,children:[e.jsx(r.icon,{className:"w-3.5 h-3.5"})," ",r.label]},r.key))}),e.jsxs("div",{className:"p-5 max-h-[55vh] overflow-y-auto space-y-4 bg-[var(--gm-surface-primary)]",children:[l==="preview"&&e.jsxs(e.Fragment,{children:[U&&e.jsxs("div",{className:"bg-blue-600/5 border border-blue-600/10 rounded-xl p-4",children:[e.jsx("h3",{className:"text-xs font-semibold text-[var(--gm-interactive-primary)] uppercase tracking-wider mb-2",children:"AI Summary"}),e.jsx("p",{className:"text-sm text-[var(--gm-text-primary)] leading-relaxed",children:U})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[{label:"Type",value:R},{label:"Size",value:M},{label:"Created",value:s.created_at?new Date(s.created_at).toLocaleDateString():"—"},{label:"Updated",value:s.updated_at?new Date(s.updated_at).toLocaleDateString():"—"},...d.pages?[{label:"Pages",value:String(d.pages)}]:[],...d.language?[{label:"Language",value:String(d.language)}]:[],...d.author?[{label:"Author",value:String(d.author)}]:[],...d.word_count?[{label:"Words",value:Number(d.word_count).toLocaleString()}]:[],...d.source?[{label:"Source",value:String(d.source)}]:[],...d.speakers?[{label:"Speakers",value:d.speakers.join(", ")}]:[]].map(r=>e.jsxs("div",{className:"bg-[var(--gm-surface-secondary)] rounded-lg p-3",children:[e.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider",children:r.label}),e.jsx("p",{className:"text-sm font-medium text-[var(--gm-text-primary)] mt-0.5 truncate",children:r.value})]},r.label))}),I&&e.jsx("div",{className:"grid grid-cols-5 gap-2",children:Object.entries(I).map(([r,a])=>e.jsxs("div",{className:"bg-[var(--gm-surface-secondary)] rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-xl font-bold text-[var(--gm-text-primary)]",children:a??0}),e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)] uppercase mt-0.5",children:r})]},r))}),s.content_preview&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs uppercase text-[var(--gm-text-tertiary)] font-semibold mb-2",children:"Content Preview"}),e.jsx("div",{className:"bg-[var(--gm-bg-tertiary)] rounded-lg p-3 text-xs text-[var(--gm-text-secondary)] font-mono leading-relaxed max-h-40 overflow-y-auto whitespace-pre-wrap",children:s.content_preview})]})]}),l==="entities"&&e.jsxs(e.Fragment,{children:[g.isLoading&&e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(p,{className:"w-6 h-6 animate-spin text-gm-interactive-primary"})}),g.data&&(()=>{const r=g.data.extraction;return r?["facts","decisions","questions","risks","actions","people","participants"].map(i=>{const y=r[i];return!y||y.length===0?null:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary mb-2 capitalize",children:[i," (",y.length,")"]}),e.jsx("div",{className:"space-y-1.5",children:y.map((c,P)=>e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-lg p-3 text-sm",children:[e.jsx("p",{className:"text-gm-text-primary",children:String(c.text||c.name||c.content||JSON.stringify(c))}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.category&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-blue-600/10 text-gm-interactive-primary",children:String(c.category)}),c.confidence!=null&&e.jsxs("span",{className:"text-[10px] text-gm-text-tertiary",children:[(Number(c.confidence)*100).toFixed(0),"% confidence"]})]})]},P))})]},i)}):e.jsx("p",{className:"text-sm text-gm-text-tertiary text-center py-6",children:"No extraction data available."})})(),!g.isLoading&&!g.data&&e.jsx("p",{className:"text-sm text-gm-text-tertiary text-center py-6",children:"No extraction data available."})]}),l==="analysis"&&e.jsxs(e.Fragment,{children:[C.isLoading&&e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(p,{className:"w-6 h-6 animate-spin text-gm-interactive-primary"})}),(()=>{const r=C.data?.analyses??[];return!C.isLoading&&r.length===0?e.jsx("p",{className:"text-sm text-gm-text-tertiary text-center py-6",children:"No analysis history yet."}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gm-border-primary text-left",children:[e.jsx("th",{className:"pb-2 pr-3 text-gm-text-tertiary font-medium",children:"Date"}),e.jsx("th",{className:"pb-2 pr-3 text-gm-text-tertiary font-medium",children:"Provider"}),e.jsx("th",{className:"pb-2 pr-3 text-gm-text-tertiary font-medium",children:"Model"}),e.jsx("th",{className:"pb-2 pr-3 text-gm-text-tertiary font-medium",children:"Tokens"}),e.jsx("th",{className:"pb-2 pr-3 text-gm-text-tertiary font-medium",children:"Cost"}),e.jsx("th",{className:"pb-2 pr-3 text-gm-text-tertiary font-medium",children:"Latency"}),e.jsx("th",{className:"pb-2 text-gm-text-tertiary font-medium",children:"Status"})]})}),e.jsx("tbody",{children:r.map((a,i)=>e.jsxs("tr",{className:"border-b border-[var(--gm-border-primary)]",children:[e.jsx("td",{className:"py-2 pr-3 text-gm-text-primary",children:a.created_at?new Date(String(a.created_at)).toLocaleString():"—"}),e.jsx("td",{className:"py-2 pr-3 text-gm-text-primary",children:String(a.provider||"—")}),e.jsx("td",{className:"py-2 pr-3 text-gm-text-primary",children:String(a.model||"—")}),e.jsx("td",{className:"py-2 pr-3 text-gm-text-primary",children:a.tokens!=null?Number(a.tokens).toLocaleString():"—"}),e.jsx("td",{className:"py-2 pr-3 text-gm-text-primary",children:a.cost!=null?`$${Number(a.cost).toFixed(4)}`:"—"}),e.jsx("td",{className:"py-2 pr-3 text-gm-text-primary",children:a.latency_ms!=null?`${Number(a.latency_ms)}ms`:"—"}),e.jsx("td",{className:"py-2",children:e.jsx("span",{className:`px-1.5 py-0.5 rounded text-[10px] font-medium ${a.status==="completed"?"bg-gm-status-success-bg text-gm-status-success":a.status==="failed"?"bg-gm-status-danger-bg text-gm-status-danger":"bg-gm-status-warning-bg text-gm-status-warning"}`,children:String(a.status||"—")})})]},i))})]})})})()]}),l==="versions"&&e.jsxs(e.Fragment,{children:[h.isLoading&&e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(p,{className:"w-6 h-6 animate-spin text-gm-interactive-primary"})}),(()=>{const r=h.data?.versions??[];return!h.isLoading&&r.length===0?e.jsx("p",{className:"text-sm text-gm-text-tertiary text-center py-6",children:"No version history."}):e.jsx("div",{className:"space-y-2",children:r.map((a,i)=>e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-lg p-3 flex items-center gap-3",children:[e.jsxs("div",{className:"w-8 h-8 rounded-full bg-blue-600/10 flex items-center justify-center text-xs font-bold text-gm-interactive-primary",children:["v",String(a.version??i+1)]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gm-text-primary",children:String(a.change_notes||a.summary||"Version update")}),e.jsxs("div",{className:"flex items-center gap-3 mt-0.5",children:[a.created_at&&e.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:new Date(String(a.created_at)).toLocaleString()}),a.file_size!=null&&e.jsxs("span",{className:"text-[10px] text-gm-text-tertiary",children:[(Number(a.file_size)/1024).toFixed(1)," KB"]})]})]})]},i))})})()]}),l==="activity"&&e.jsxs(e.Fragment,{children:[D.isLoading&&e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(p,{className:"w-6 h-6 animate-spin text-gm-interactive-primary"})}),(()=>{const r=D.data?.activities??[];return!D.isLoading&&r.length===0?e.jsx("p",{className:"text-sm text-gm-text-tertiary text-center py-6",children:"No activity yet."}):e.jsx("div",{className:"space-y-1.5",children:r.map((a,i)=>e.jsxs("div",{className:"flex items-start gap-3 py-2 border-b border-[var(--gm-border-primary)] last:border-0",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-600/10 flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(ae,{className:"w-3 h-3 text-gm-interactive-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm text-gm-text-primary",children:[a.user&&e.jsxs("span",{className:"font-medium",children:[String(a.user)," "]}),String(a.action||a.type||"activity")]}),a.created_at&&e.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:new Date(String(a.created_at)).toLocaleString()})]})]},i))})})()]}),l==="share"&&e.jsx(it,{fileId:s.id,shareMutation:F}),e.jsx("div",{className:"mt-4",children:e.jsx(He,{targetType:"document",targetId:s.id})})]})]})})};function it({fileId:s,shareMutation:k}){const[S,z]=x.useState("7d"),[f,l]=x.useState(100),[v,u]=x.useState(null),N=()=>{k.mutate({id:s,expires:S,maxViews:f},{onSuccess:o=>{const C=o.url;u(C),n.success("Share link created")},onError:()=>n.error("Failed to create share link")})},g=()=>{v&&(navigator.clipboard.writeText(v),n.success("Link copied to clipboard"))};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-[var(--gm-text-tertiary)]",children:"Generate a shareable link for this document."}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] block mb-1",children:"Expires"}),e.jsxs("select",{value:S,onChange:o=>z(o.target.value),className:"w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-xs text-[var(--gm-text-primary)]",children:[e.jsx("option",{value:"1h",children:"1 hour"}),e.jsx("option",{value:"24h",children:"24 hours"}),e.jsx("option",{value:"7d",children:"7 days"}),e.jsx("option",{value:"30d",children:"30 days"}),e.jsx("option",{value:"never",children:"Never"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-[var(--gm-text-tertiary)] block mb-1",children:"Max views"}),e.jsx("input",{type:"number",value:f,onChange:o=>l(Number(o.target.value)),min:1,className:"w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-xs text-[var(--gm-text-primary)]"})]})]}),e.jsxs("button",{onClick:N,disabled:k.isPending,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] text-sm font-medium hover:bg-[var(--gm-interactive-primary-hover)] disabled:opacity-50 transition-colors",children:[k.isPending?e.jsx(p,{className:"w-4 h-4 animate-spin"}):e.jsx(Le,{className:"w-4 h-4"}),"Generate Share Link"]}),v&&e.jsxs("div",{className:"bg-[var(--gm-surface-secondary)] rounded-lg p-3 flex items-center gap-2",children:[e.jsx("input",{type:"text",readOnly:!0,value:v,className:"flex-1 bg-transparent text-xs text-[var(--gm-text-primary)] outline-none truncate"}),e.jsx("button",{onClick:g,className:"flex-shrink-0 w-8 h-8 rounded-lg hover:bg-[var(--gm-surface-hover)] flex items-center justify-center",children:e.jsx(Xe,{className:"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]"})})]})]})}const ie={documents:L,transcripts:Q,emails:J,images:W},nt=s=>{switch(s){case"processed":case"completed":return{icon:oe,cls:"bg-gm-status-success-bg text-gm-status-success"};case"processing":return{icon:p,cls:"bg-blue-600/10 text-gm-interactive-primary"};case"pending":return{icon:le,cls:"bg-gm-status-warning-bg text-gm-status-warning"};case"deleted":return{icon:me,cls:"bg-gm-surface-secondary text-gm-text-tertiary"};default:return{icon:ce,cls:"bg-gm-status-danger-bg text-gm-status-danger"}}};function kt(){const[s,k]=x.useState("documents"),[S,z]=x.useState(""),[f,l]=x.useState(""),[v,u]=x.useState(""),[N,g]=x.useState("list"),[o,C]=x.useState(!1),[h,D]=x.useState(new Set),[$,E]=x.useState(null),F=$e({search:S||void 0,type:f||void 0,status:s==="deleted"?"deleted":v||void 0,limit:100}),A=Ee(),{data:m}=ze(),R=Ae(),B=Re(),d=Te(),M=Be(),H=Me(),I=ne(),U=Ie(),O=Ue(),r=Oe(),a=Ve(),i=m?.status==="processing"||B.isPending,y=F.data?.documents??[],c=F.data?.statusCounts,P=A.data??[],G=x.useMemo(()=>o?y.filter(t=>t.is_favorite):y,[y,o]),Z=t=>{D(b=>{const _=new Set(b);return _.has(t)?_.delete(t):_.add(t),_})},de=()=>D(new Set(G.map(t=>t.id))),T=()=>D(new Set),xe=t=>{!t||t.length===0||R.mutate({files:Array.from(t),type:"documents"},{onSuccess:()=>n.success(`${t.length} file(s) uploaded`),onError:()=>n.error("Upload failed")})},pe=()=>{B.mutate(void 0,{onSuccess:()=>n.success("Processing started"),onError:()=>n.error("Processing failed to start")})},ue=()=>{const t=Array.from(h);O.mutate(t,{onSuccess:()=>{n.success(`${t.length} document(s) deleted`),T()},onError:()=>n.error("Bulk delete failed")})},ge=()=>{const t=Array.from(h);r.mutate(t,{onSuccess:()=>{n.success(`${t.length} document(s) queued for reprocessing`),T()},onError:()=>n.error("Bulk reprocess failed")})},he=()=>{const t=Array.from(h);a.mutate({ids:t},{onSuccess:()=>{n.success("Export downloaded"),T()},onError:()=>n.error("Export failed")})},ee=(t,b)=>{t.stopPropagation(),I.mutate(b)},ye=t=>{U.mutate(t,{onSuccess:()=>n.success("Document restored")})},be=t=>{const b=nt(t.status),_=ie[t.type||""]||L,te=!!t.is_favorite,V=h.has(t.id);return N==="grid"?e.jsxs(w.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:`bg-gm-surface-primary border rounded-xl p-4 hover:border-blue-600/30 transition-all cursor-pointer group relative ${V?"border-gm-interactive-primary ring-2 ring-blue-600/20":"border-gm-border-primary"}`,onClick:()=>E(t),children:[e.jsx("div",{className:"absolute top-3 left-3 flex items-center gap-1.5",children:e.jsx("input",{type:"checkbox",checked:V,onChange:()=>Z(t.id),onClick:j=>j.stopPropagation(),className:"w-3.5 h-3.5 rounded border-gm-border-primary accent-gm-interactive-primary"})}),e.jsx("div",{className:"absolute top-3 right-3 flex items-center gap-1",children:e.jsx("button",{onClick:j=>ee(j,t.id),className:"opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(q,{className:`w-3.5 h-3.5 ${te?"fill-yellow-400 text-yellow-400":"text-gm-text-tertiary hover:text-yellow-400"}`})})}),e.jsxs("div",{className:"flex flex-col items-center pt-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-blue-600/10 border border-blue-600/20 flex items-center justify-center mb-3",children:e.jsx(_,{className:"w-5 h-5 text-gm-interactive-primary"})}),e.jsx("p",{className:"text-sm font-medium text-gm-text-primary truncate w-full text-center",children:t.original_filename||t.filename}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[t.type&&e.jsx("span",{className:"text-[10px] text-gm-text-tertiary capitalize",children:t.type}),e.jsxs("span",{className:`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-full font-medium ${b.cls}`,children:[e.jsx(b.icon,{className:`w-3 h-3 ${t.status==="processing"?"animate-spin":""}`})," ",t.status||"—"]})]}),t.size&&e.jsxs("span",{className:"text-[10px] text-gm-text-tertiary mt-1",children:[(Number(t.size)/1024).toFixed(1)," KB"]})]})]},t.id):e.jsx(w.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},className:`bg-gm-surface-primary border rounded-xl p-3.5 hover:border-blue-600/30 transition-all cursor-pointer group ${V?"border-gm-interactive-primary ring-2 ring-blue-600/20":"border-gm-border-primary"}`,onClick:()=>E(t),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:V,onChange:()=>Z(t.id),onClick:j=>j.stopPropagation(),className:"w-3.5 h-3.5 rounded border-gm-border-primary accent-gm-interactive-primary flex-shrink-0"}),e.jsx("button",{onClick:j=>ee(j,t.id),className:"flex-shrink-0",children:e.jsx(q,{className:`w-4 h-4 transition-colors ${te?"fill-yellow-400 text-yellow-400":"text-gray-600 hover:text-yellow-400"}`})}),e.jsx(_,{className:"w-5 h-5 text-gm-text-tertiary group-hover:text-gm-interactive-primary transition-colors flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gm-text-primary truncate group-hover:text-gm-interactive-primary transition-colors",children:t.original_filename||t.filename}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.type&&e.jsx("span",{className:"text-[10px] text-gm-text-tertiary capitalize",children:t.type}),t.size&&e.jsxs("span",{className:"text-[10px] text-gm-text-tertiary",children:[(Number(t.size)/1024).toFixed(1)," KB"]}),t.created_at&&e.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:new Date(t.created_at).toLocaleDateString()})]})]}),e.jsxs("span",{className:`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-full font-medium ${b.cls}`,children:[e.jsx(b.icon,{className:`w-3 h-3 ${t.status==="processing"?"animate-spin":""}`})," ",t.status||"—"]}),e.jsx("a",{href:`/api/documents/${t.id}/download`,onClick:j=>j.stopPropagation(),className:"w-7 h-7 rounded-lg hover:bg-gm-surface-hover flex items-center justify-center text-gm-text-tertiary hover:text-gm-text-primary transition-colors opacity-0 group-hover:opacity-100",title:"Download",children:e.jsx(X,{className:"w-3.5 h-3.5"})})]})},t.id)};return e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gm-text-primary",children:"Files & Documents"}),e.jsxs("div",{className:"flex gap-2",children:[(P.length>0||i)&&e.jsxs("button",{onClick:pe,disabled:i,className:"px-3 py-1.5 rounded-lg bg-gm-interactive-secondary text-gm-text-primary text-xs font-medium hover:bg-gm-interactive-secondary-hover flex items-center gap-1.5 disabled:opacity-50",children:[i?e.jsx(p,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(K,{className:"w-3.5 h-3.5"}),i?"Processing...":`Process ${P.length} file(s)`]}),e.jsxs("label",{className:"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover flex items-center gap-1.5 cursor-pointer transition-colors",children:[e.jsx(Ye,{className:"w-3.5 h-3.5"})," Upload",e.jsx("input",{type:"file",multiple:!0,className:"hidden",onChange:t=>xe(t.target.files)})]})]})]}),e.jsx("div",{className:"flex gap-1 bg-gm-surface-secondary rounded-xl p-1",children:[{key:"documents",label:"Documents",count:F.data?.total??0},{key:"pending",label:"Pending",count:P.length},{key:"deleted",label:"Deleted",count:c?.deleted??0}].map(t=>e.jsxs("button",{onClick:()=>{k(t.key),T()},className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${s===t.key?"bg-gm-surface-primary text-gm-text-primary shadow-sm":"text-gm-text-tertiary hover:text-gm-text-primary"}`,children:[t.label," ",e.jsx("span",{className:"ml-1 text-[10px] opacity-60",children:t.count})]},t.key))}),i&&m&&e.jsxs(w.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-blue-600/5 border border-blue-600/20 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4 animate-spin text-gm-interactive-primary"}),e.jsx("span",{className:"text-sm font-medium text-gm-text-primary",children:"Processing files..."})]}),e.jsxs("span",{className:"text-xs text-gm-text-tertiary",children:[m.processedFiles??0," / ",m.totalFiles??"?"," files"]})]}),m.currentFile&&e.jsxs("p",{className:"text-xs text-gm-text-tertiary mb-2 truncate",children:["Current: ",m.currentFile]}),e.jsx("div",{className:"w-full bg-gm-surface-secondary rounded-full h-2 overflow-hidden",children:e.jsx(w.div,{className:"bg-gm-interactive-primary h-full rounded-full",initial:{width:0},animate:{width:`${m.progress??(m.processedFiles&&m.totalFiles?Math.round((m.processedFiles??0)/(m.totalFiles||1)*100):0)}%`},transition:{duration:.5}})})]}),s==="documents"&&c&&e.jsx("div",{className:"flex gap-2 flex-wrap",children:[{label:"Processed",value:c.processed??0,color:"text-gm-status-success"},{label:"Processing",value:c.processing??0,color:"text-gm-interactive-primary"},{label:"Pending",value:c.pending??0,color:"text-gm-status-warning"},{label:"Failed",value:c.failed??0,color:"text-gm-status-danger"}].map(t=>e.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-lg px-3 py-2 flex items-center gap-2",children:[e.jsx("span",{className:`text-lg font-bold ${t.color}`,children:t.value}),e.jsx("span",{className:"text-[10px] text-gm-text-tertiary uppercase tracking-wider",children:t.label})]},t.label))}),(s==="documents"||s==="deleted")&&e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("div",{className:"relative flex-1 max-w-xs",children:[e.jsx(qe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gm-text-tertiary"}),e.jsx("input",{value:S,onChange:t=>z(t.target.value),placeholder:"Search documents...",className:"w-full pl-9 pr-3 py-1.5 bg-gm-surface-secondary border border-gm-border-primary rounded-lg text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus"})]}),s==="documents"&&e.jsxs(e.Fragment,{children:[e.jsxs("select",{value:f,onChange:t=>l(t.target.value),className:"bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-1.5 text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus",children:[e.jsx("option",{value:"",children:"All types"}),e.jsx("option",{value:"documents",children:"Documents"}),e.jsx("option",{value:"transcripts",children:"Transcripts"}),e.jsx("option",{value:"emails",children:"Emails"}),e.jsx("option",{value:"images",children:"Images"})]}),e.jsxs("select",{value:v,onChange:t=>u(t.target.value),className:"bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-1.5 text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus",children:[e.jsx("option",{value:"",children:"All statuses"}),e.jsx("option",{value:"processed",children:"Processed"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"})]}),e.jsxs("button",{onClick:()=>C(!o),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-lg border text-xs font-medium transition-colors ${o?"bg-yellow-400/10 border-yellow-400/30 text-yellow-600":"bg-gm-surface-secondary border-gm-border-primary text-gm-text-tertiary hover:text-gm-text-primary"}`,children:[e.jsx(q,{className:`w-3.5 h-3.5 ${o?"fill-yellow-400":""}`})," Favorites"]})]}),e.jsxs("div",{className:"ml-auto flex items-center gap-1 bg-gm-surface-secondary rounded-lg p-0.5",children:[e.jsx("button",{onClick:()=>g("list"),className:`p-1.5 rounded-md transition-colors ${N==="list"?"bg-gm-surface-primary shadow-sm text-gm-text-primary":"text-gm-text-tertiary hover:text-gm-text-primary"}`,children:e.jsx(Ze,{className:"w-3.5 h-3.5"})}),e.jsx("button",{onClick:()=>g("grid"),className:`p-1.5 rounded-md transition-colors ${N==="grid"?"bg-gm-surface-primary shadow-sm text-gm-text-primary":"text-gm-text-tertiary hover:text-gm-text-primary"}`,children:e.jsx(et,{className:"w-3.5 h-3.5"})})]})]}),e.jsx(Ke,{children:h.size>0&&e.jsxs(w.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center gap-3 bg-blue-600/5 border border-blue-600/20 rounded-xl px-4 py-2.5",children:[e.jsxs("span",{className:"text-sm font-medium text-gm-text-primary",children:[h.size," selected"]}),e.jsx("button",{onClick:de,className:"text-xs text-gm-interactive-primary hover:underline",children:"Select all"}),e.jsx("button",{onClick:T,className:"text-xs text-gm-text-tertiary hover:underline",children:"Clear"}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[e.jsxs("button",{onClick:he,disabled:a.isPending,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-gm-surface-secondary text-gm-text-primary text-xs hover:bg-gm-surface-hover transition-colors",children:[e.jsx(X,{className:"w-3.5 h-3.5"})," Export"]}),e.jsxs("button",{onClick:ge,disabled:r.isPending,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs hover:bg-gm-interactive-primary-hover transition-colors",children:[e.jsx(K,{className:"w-3.5 h-3.5"})," Reprocess"]}),e.jsxs("button",{onClick:ue,disabled:O.isPending,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-gm-status-danger-bg text-gm-status-danger text-xs hover:bg-red-500/20 transition-colors",children:[e.jsx(Y,{className:"w-3.5 h-3.5"})," Delete"]})]})]})}),s==="documents"&&e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},children:F.isLoading?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(p,{className:"h-8 w-8 animate-spin text-gm-interactive-primary"})}):G.length===0?e.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-8 text-center text-gm-text-tertiary",children:[e.jsx(re,{className:"h-12 w-12 mx-auto mb-4 text-gray-500"}),o?"No favorite documents.":"No documents found. Upload files to get started."]}):e.jsx("div",{className:N==="grid"?"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3":"space-y-2",children:G.map(t=>be(t))})}),s==="deleted"&&e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},children:F.isLoading?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(p,{className:"h-8 w-8 animate-spin text-gm-interactive-primary"})}):y.length===0?e.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-8 text-center text-gm-text-tertiary",children:[e.jsx(me,{className:"h-12 w-12 mx-auto mb-4 text-gray-500"}),"No deleted documents."]}):e.jsx("div",{className:"space-y-2",children:y.map(t=>{const b=ie[t.type||""]||L;return e.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-3.5 flex items-center gap-3 opacity-70",children:[e.jsx(b,{className:"w-5 h-5 text-gm-text-tertiary flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gm-text-primary truncate",children:t.original_filename||t.filename}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.type&&e.jsx("span",{className:"text-[10px] text-gm-text-tertiary capitalize",children:t.type}),t.created_at&&e.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:new Date(t.created_at).toLocaleDateString()})]})]}),e.jsxs("button",{onClick:()=>ye(t.id),className:"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs hover:bg-gm-interactive-primary-hover flex items-center gap-1.5 transition-colors",children:[e.jsx(K,{className:"w-3.5 h-3.5"})," Restore"]})]},t.id)})})}),s==="pending"&&e.jsx(w.div,{initial:{opacity:0},animate:{opacity:1},children:A.isLoading?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(p,{className:"h-8 w-8 animate-spin text-gm-interactive-primary"})}):P.length===0?e.jsxs("div",{className:"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-8 text-center text-gm-text-tertiary",children:[e.jsx(re,{className:"h-12 w-12 mx-auto mb-4 text-gray-500"}),"No pending files. Upload files to add them to the processing queue."]}):e.jsx("div",{className:"space-y-2",children:P.map(t=>e.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-3.5 flex items-center gap-3",children:[e.jsx(L,{className:"w-5 h-5 text-gm-text-tertiary flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gm-text-primary truncate",children:t.filename}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:t.folder}),e.jsxs("span",{className:"text-[10px] text-gm-text-tertiary",children:[((t.size??0)/1024).toFixed(1)," KB"]})]})]}),e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-warning-bg text-gm-status-warning font-medium",children:t.status||"—"}),e.jsx("button",{onClick:()=>H.mutate({folder:t.folder,filename:t.filename}),className:"w-7 h-7 rounded-lg hover:bg-gm-status-danger-bg flex items-center justify-center text-gm-text-tertiary hover:text-gm-status-danger transition-colors",children:e.jsx(Y,{className:"w-3.5 h-3.5"})})]},`${t.folder}/${t.filename}`))})}),e.jsx(rt,{file:$,open:!!$,onClose:()=>E(null),onReprocess:t=>{M.mutate(t,{onSuccess:()=>n.success("Reprocessing started")})},onDelete:t=>{d.mutate(t,{onSuccess:()=>{n.success("Document deleted"),E(null)}})}})]})}export{kt as default};
//# sourceMappingURL=FilesPage-GsRgoFIM.js.map
