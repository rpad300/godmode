{"version":3,"file":"CompaniesPage-BP8ymWpp.js","sources":["../../frontend/src/pages/CompaniesPage.tsx"],"sourcesContent":["/**\n * Purpose:\n *   Full company management page with list, view (report), edit, and template\n *   sub-views. Allows creating companies, triggering AI analysis, editing\n *   metadata, and managing A4/PPT document templates.\n *\n * Responsibilities:\n *   - List all companies with quick-create, analyze, edit, view, delete actions\n *   - Display a multi-section analysis report (Portuguese section titles) per company\n *   - Provide an edit form for company metadata (name, description, logo, website, linkedin)\n *   - Manage A4 and PPT templates: load, generate with AI, save, and preview\n *\n * Key dependencies:\n *   - react-query hooks (useCompanies, useCreateCompany, useUpdateCompany, useDeleteCompany, useAnalyzeCompany)\n *   - framer-motion: animated transitions between views\n *   - AlertDialog (shadcn): confirmation dialog for destructive actions\n *\n * Side effects:\n *   - Network: CRUD operations on companies, template loading/saving, AI analysis trigger\n *\n * Notes:\n *   - Report section names (reportSections) are in Portuguese, matching the backend analysis output.\n *   - The page uses a single-page navigation pattern via `pageView` state rather than routes.\n */\nimport { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport {\n  Building2, Plus, Eye, Edit2, FileText, Zap, Trash2, ArrowLeft,\n  Globe, ExternalLink, RefreshCw, ChevronRight, Check, Code2, Palette, Loader2\n} from 'lucide-react';\nimport { Input } from '@/components/ui/input';\nimport { toast } from 'sonner';\nimport { cn } from '@/lib/utils';\nimport { apiClient } from '@/lib/api-client';\nimport {\n  useCompanies, useCreateCompany, useUpdateCompany, useDeleteCompany, useAnalyzeCompany,\n} from '@/hooks/useGodMode';\nimport { ErrorState } from '../components/shared/ErrorState';\nimport {\n  AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent,\n  AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle,\n} from '@/components/ui/alert-dialog';\n\nconst CARD = 'rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-[var(--shadow-sm)] transition-all duration-200';\nconst INPUT = 'w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-placeholder)] focus:outline-none focus:border-[var(--gm-border-focus)] focus:shadow-[var(--shadow-focus)] transition-all duration-150';\nconst BTN_PRIMARY = 'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] hover:bg-[var(--gm-interactive-primary-hover)] shadow-sm transition-all duration-150 disabled:opacity-50';\nconst BTN_SECONDARY = 'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] hover:bg-[var(--gm-interactive-secondary-hover)] border border-[var(--gm-border-primary)] transition-all duration-150';\nconst BTN_DANGER = 'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--color-danger-500)] text-white hover:bg-[var(--color-danger-600)] shadow-sm transition-all duration-150 disabled:opacity-50';\nconst SECTION_TITLE = 'text-[10px] font-bold text-[var(--gm-accent-primary)] uppercase tracking-[0.1em]';\nconst LABEL = 'text-[10px] font-bold text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-1 flex items-center gap-1.5';\n\ninterface Company {\n  id: string;\n  name: string;\n  logo_url?: string;\n  website?: string;\n  linkedin?: string;\n  description?: string;\n  status?: 'analyzed' | 'not_analyzed';\n  colors?: string[];\n  report?: Record<string, string>;\n}\n\nconst reportSections = [\n  'Ficha de Identidade', 'Visão Geral e Posicionamento', 'Produtos e Serviços',\n  'Público-Alvo e Clientes', 'Equipa e Liderança', 'Presença Digital e Marketing',\n  'Análise Competitiva', 'Indicadores de Crescimento', 'Análise SWOT', 'Conclusões e Insights',\n];\n\ntype CompanyPageView = 'list' | 'view' | 'edit' | 'templates';\n\nconst CompaniesPage = () => {\n  const [pageView, setPageView] = useState<CompanyPageView>('list');\n  const [selectedCompany, setSelectedCompany] = useState<Company | null>(null);\n  const companiesQuery = useCompanies();\n\n  const openView = (company: Company, view: CompanyPageView) => {\n    setSelectedCompany(company);\n    setPageView(view);\n  };\n\n  const backToList = () => {\n    setPageView('list');\n    setSelectedCompany(null);\n  };\n\n  return (\n    <div className=\"p-6 space-y-4\">\n      {pageView === 'list' && (\n        companiesQuery.isError\n          ? <ErrorState message=\"Failed to load companies\" onRetry={() => companiesQuery.refetch()} />\n          : <CompanyList companies={companiesQuery.data?.companies || []} loading={companiesQuery.isLoading} onView={c => openView(c, 'view')} onEdit={c => openView(c, 'edit')} onTemplates={c => openView(c, 'templates')} />\n      )}\n      {pageView === 'view' && selectedCompany && <CompanyView company={selectedCompany} onBack={backToList} onEdit={() => setPageView('edit')} />}\n      {pageView === 'edit' && selectedCompany && <CompanyEdit company={selectedCompany} onBack={backToList} onTemplates={() => setPageView('templates')} />}\n      {pageView === 'templates' && selectedCompany && <CompanyTemplates company={selectedCompany} onBack={() => setPageView('edit')} />}\n    </div>\n  );\n};\n\n// ==================== LIST ====================\n\nfunction CompanyList({ companies, loading, onView, onEdit, onTemplates }: {\n  companies: Company[]; loading: boolean;\n  onView: (c: Company) => void; onEdit: (c: Company) => void; onTemplates: (c: Company) => void;\n}) {\n  const [newName, setNewName] = useState('');\n  const [deleteTarget, setDeleteTarget] = useState<Company | null>(null);\n  const createCompany = useCreateCompany();\n  const deleteCompany = useDeleteCompany();\n  const analyzeCompany = useAnalyzeCompany();\n\n  const handleCreate = async () => {\n    if (!newName.trim()) { toast.error('Company name is required'); return; }\n    try {\n      await createCompany.mutateAsync({ name: newName.trim() });\n      toast.success('Company created');\n      setNewName('');\n    } catch (err: any) {\n      toast.error(err.message || 'Failed to create company');\n    }\n  };\n\n  const handleAnalyze = async (company: Company) => {\n    toast.info(`Analyzing ${company.name}...`);\n    try {\n      await analyzeCompany.mutateAsync(company.id);\n      toast.success(`${company.name} analysis started`);\n    } catch (err: any) {\n      toast.error(err.message || 'Analysis failed');\n    }\n  };\n\n  const handleDeleteConfirm = async () => {\n    if (!deleteTarget) return;\n    try {\n      await deleteCompany.mutateAsync(deleteTarget.id);\n      toast.success('Company deleted');\n    } catch (err: any) {\n      toast.error(err.message || 'Failed to delete');\n    } finally {\n      setDeleteTarget(null);\n    }\n  };\n\n  return (\n    <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"space-y-4\">\n      <AlertDialog open={!!deleteTarget} onOpenChange={(open) => { if (!open) setDeleteTarget(null); }}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Delete {deleteTarget?.name || 'this item'}?</AlertDialogTitle>\n            <AlertDialogDescription>\n              This action cannot be undone. The company and all its data will be permanently removed.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction onClick={handleDeleteConfirm} className={BTN_DANGER}>\n              Delete\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-[var(--gm-text-primary)]\">Companies</h1>\n          <p className=\"text-sm text-[var(--gm-text-tertiary)]\">Manage company profiles and assets</p>\n        </div>\n      </div>\n\n      {/* Quick create */}\n      <div className=\"flex gap-2\">\n        <Input value={newName} onChange={e => setNewName(e.target.value)} placeholder=\"New company name...\" className={cn(INPUT, 'max-w-xs')}\n          onKeyDown={e => { if (e.key === 'Enter') handleCreate(); }} />\n        <button onClick={handleCreate} disabled={createCompany.isPending}\n          className={cn(BTN_PRIMARY, 'px-4 py-2 text-sm')}>\n          {createCompany.isPending ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Plus className=\"w-4 h-4\" />} New company\n        </button>\n      </div>\n\n      {loading ? (\n        <div className=\"flex justify-center py-12\"><Loader2 className=\"w-6 h-6 animate-spin text-[var(--gm-accent-primary)]\" /></div>\n      ) : companies.length === 0 ? (\n        <div className=\"text-center py-12 text-[var(--gm-text-tertiary)] text-sm\">No companies yet. Create one above.</div>\n      ) : (\n        <div className=\"space-y-3\">\n          {companies.map((company, i) => (\n            <motion.div\n              key={company.id}\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: i * 0.05 }}\n              className={cn(CARD, 'p-4 hover:border-[var(--gm-accent-primary)]/20')}\n            >\n              <div className=\"flex items-center gap-4\">\n                <div className=\"w-12 h-12 rounded-lg bg-[var(--gm-bg-tertiary)] flex items-center justify-center flex-shrink-0\">\n                  <span className=\"text-sm font-bold text-[var(--gm-text-primary)]\">{(company.name || '???').substring(0, 3).toUpperCase()}</span>\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center gap-2\">\n                    <h3 className=\"text-sm font-semibold text-[var(--gm-text-primary)]\">{company.name}</h3>\n                    {(company.colors || []).length > 0 && (\n                      <div className=\"flex gap-0.5\">\n                        {(company.colors || []).map((c, i) => (\n                          <div key={i} className=\"w-3 h-3 rounded-sm\" style={{ backgroundColor: c }} />\n                        ))}\n                      </div>\n                    )}\n                    <span className={`text-[10px] px-2 py-0.5 rounded-full font-medium ${\n                      company.status === 'analyzed' ? 'bg-[var(--gm-accent-primary)]/10 text-[var(--gm-accent-primary)]' : 'bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)]'\n                    }`}>\n                      {company.status === 'analyzed' ? 'Analyzed' : 'Not analyzed'}\n                    </span>\n                  </div>\n                  {company.website && <p className=\"text-[10px] text-[var(--gm-text-tertiary)]\">{company.website}</p>}\n                </div>\n                <div className=\"flex items-center gap-1 flex-shrink-0 flex-wrap\">\n                  <button onClick={() => onView(company)} className=\"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)] transition-colors\">\n                    <Eye className=\"w-3.5 h-3.5\" /> View\n                  </button>\n                  <button onClick={() => onEdit(company)} className=\"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)] transition-colors\">\n                    <Edit2 className=\"w-3.5 h-3.5\" /> Edit\n                  </button>\n                  <button onClick={() => onTemplates(company)} className=\"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)] transition-colors\">\n                    <FileText className=\"w-3.5 h-3.5\" /> Templates\n                  </button>\n                  <button onClick={() => handleAnalyze(company)} className=\"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)] transition-colors\">\n                    <Zap className=\"w-3.5 h-3.5\" /> {company.status === 'analyzed' ? 'Re-analyze' : 'Analyze'}\n                  </button>\n                  <button onClick={() => setDeleteTarget(company)} className=\"p-1.5 rounded-lg text-[var(--gm-text-tertiary)] hover:bg-[var(--color-danger-500)]/10 hover:text-[var(--color-danger-500)] transition-colors\">\n                    <Trash2 className=\"w-3.5 h-3.5\" />\n                  </button>\n                </div>\n              </div>\n            </motion.div>\n          ))}\n        </div>\n      )}\n    </motion.div>\n  );\n}\n\n// ==================== VIEW ====================\n\nfunction CompanyView({ company, onBack, onEdit }: { company: Company; onBack: () => void; onEdit: () => void }) {\n  const [activeSection, setActiveSection] = useState(reportSections[0]);\n  const analyzeCompany = useAnalyzeCompany();\n\n  const handleReanalyze = async () => {\n    try {\n      await analyzeCompany.mutateAsync(company.id);\n      toast.success('Analysis started');\n    } catch (err: any) {\n      toast.error(err.message || 'Analysis failed');\n    }\n  };\n\n  return (\n    <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"space-y-4\">\n      <button onClick={onBack} className=\"flex items-center gap-1.5 text-sm text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors\">\n        <ArrowLeft className=\"w-4 h-4\" /> Back to Companies\n      </button>\n\n      <div className=\"flex items-center gap-4 mb-2\">\n        <div className=\"w-14 h-14 rounded-xl bg-[var(--gm-bg-tertiary)] flex items-center justify-center\">\n          <span className=\"text-lg font-bold text-[var(--gm-text-primary)]\">{(company.name || '???').substring(0, 3).toUpperCase()}</span>\n        </div>\n        <div className=\"flex-1\">\n          <div className=\"flex items-center gap-2\">\n            <h1 className=\"text-2xl font-bold text-[var(--gm-text-primary)]\">{company.name}</h1>\n          </div>\n          <div className=\"flex items-center gap-3 mt-1\">\n            {company.website && <a href={company.website} target=\"_blank\" rel=\"noreferrer\" className=\"text-xs text-[var(--gm-accent-primary)] flex items-center gap-1 hover:underline\"><Globe className=\"w-3 h-3\" /> {company.website}</a>}\n            {company.linkedin && <a href={company.linkedin} target=\"_blank\" rel=\"noreferrer\" className=\"text-xs text-[var(--gm-accent-primary)] flex items-center gap-1 hover:underline\"><ExternalLink className=\"w-3 h-3\" /> LinkedIn</a>}\n          </div>\n        </div>\n        <div className=\"flex gap-2 flex-shrink-0\">\n          <button onClick={handleReanalyze} disabled={analyzeCompany.isPending}\n            className={cn(BTN_PRIMARY, 'px-4 py-2 text-sm')}>\n            {analyzeCompany.isPending ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <RefreshCw className=\"w-4 h-4\" />} Re-analyze\n          </button>\n          <button onClick={onEdit} className=\"text-sm text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors\">Edit</button>\n        </div>\n      </div>\n\n      <div className=\"flex gap-6\">\n        <div className=\"w-56 flex-shrink-0\">\n          <h4 className=\"text-xs font-semibold text-[var(--gm-text-primary)] mb-2\">Report Sections</h4>\n          <div className=\"space-y-0.5\">\n            {reportSections.map(section => (\n              <button\n                key={section}\n                onClick={() => setActiveSection(section)}\n                className={`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors flex items-center justify-between ${\n                  activeSection === section ? 'bg-[var(--gm-interactive-primary)]/10 text-[var(--gm-accent-primary)] font-medium' : 'text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] hover:bg-[var(--gm-surface-hover)]'\n                }`}\n              >\n                {section}\n                {activeSection === section && <ChevronRight className=\"w-3.5 h-3.5\" />}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        <div className={cn(CARD, 'flex-1 p-6')}>\n          <h3 className=\"text-lg font-bold text-[var(--gm-text-primary)] mb-4\">{activeSection}</h3>\n          <div className=\"text-sm text-[var(--gm-text-tertiary)] whitespace-pre-line leading-relaxed\">\n            {company.report?.[activeSection] || `Content for \"${activeSection}\" — run analysis to populate.`}\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\n// ==================== EDIT ====================\n\nfunction CompanyEdit({ company, onBack, onTemplates }: { company: Company; onBack: () => void; onTemplates: () => void }) {\n  const [name, setName] = useState(company.name);\n  const [description, setDescription] = useState(company.description || '');\n  const [logoUrl, setLogoUrl] = useState(company.logo_url || '');\n  const [website, setWebsite] = useState(company.website || '');\n  const [linkedin, setLinkedin] = useState(company.linkedin || '');\n  const updateCompany = useUpdateCompany();\n\n  const handleSave = async () => {\n    if (!name.trim()) { toast.error('Name is required'); return; }\n    const urlPattern = /^https?:\\/\\//;\n    if (website.trim() && !urlPattern.test(website.trim())) {\n      toast.error('Website must start with http:// or https://');\n      return;\n    }\n    if (linkedin.trim() && !urlPattern.test(linkedin.trim())) {\n      toast.error('LinkedIn URL must start with http:// or https://');\n      return;\n    }\n    try {\n      await updateCompany.mutateAsync({\n        id: company.id, name, description, logo_url: logoUrl, website, linkedin,\n      });\n      toast.success('Company updated');\n      onBack();\n    } catch (err: any) {\n      toast.error(err.message || 'Failed to save');\n    }\n  };\n\n  return (\n    <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"space-y-4\">\n      <button onClick={onBack} className=\"flex items-center gap-1.5 text-sm text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors\">\n        <ArrowLeft className=\"w-4 h-4\" /> Back to Companies\n      </button>\n\n      <div className={cn(CARD, 'p-5')}>\n        <h2 className=\"text-lg font-bold text-[var(--gm-text-primary)] mb-5\">Edit {company.name}</h2>\n\n        <div className=\"max-w-lg space-y-5\">\n          <div>\n            <label className={LABEL}>Name *</label>\n            <Input value={name} onChange={e => setName(e.target.value)} className={INPUT} />\n          </div>\n          <div>\n            <label className={LABEL}>Description</label>\n            <textarea\n              value={description}\n              onChange={e => setDescription(e.target.value)}\n              rows={4}\n              className={cn(INPUT, 'resize-y')}\n            />\n          </div>\n          <div>\n            <label className={LABEL}>Logo URL</label>\n            <Input value={logoUrl} onChange={e => setLogoUrl(e.target.value)} placeholder=\"https://...\" className={cn(INPUT, 'font-mono text-xs')} />\n          </div>\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div>\n              <label className={LABEL}>Website</label>\n              <Input value={website} onChange={e => setWebsite(e.target.value)} className={INPUT} />\n            </div>\n            <div>\n              <label className={LABEL}>LinkedIn</label>\n              <Input value={linkedin} onChange={e => setLinkedin(e.target.value)} className={INPUT} />\n            </div>\n          </div>\n\n          <div className=\"border-t border-[var(--gm-border-primary)] pt-4 flex justify-center gap-2\">\n            <button onClick={handleSave} disabled={updateCompany.isPending}\n              className={cn(BTN_PRIMARY, 'px-5 py-2.5 text-sm')}>\n              {updateCompany.isPending ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Check className=\"w-4 h-4\" />}\n              {updateCompany.isPending ? 'Saving...' : 'Save'}\n            </button>\n            <button onClick={onBack} className={cn(BTN_SECONDARY, 'px-5 py-2.5 text-sm')}>Cancel</button>\n          </div>\n        </div>\n\n        <div className=\"mt-8 pt-5 border-t border-[var(--gm-border-primary)]\">\n          <h3 className={cn(SECTION_TITLE, 'text-sm mb-3')}>Documents</h3>\n          <button onClick={onTemplates} className={cn(BTN_SECONDARY, 'px-4 py-2 text-sm')}>\n            <FileText className=\"w-4 h-4\" /> Templates (A4 / PPT)\n          </button>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\n// ==================== TEMPLATES ====================\n\nfunction CompanyTemplates({ company, onBack }: { company: Company; onBack: () => void }) {\n  const [templateType, setTemplateType] = useState<'a4' | 'ppt'>('a4');\n  const [codeTab, setCodeTab] = useState<'code' | 'theme'>('code');\n  const [templateCode, setTemplateCode] = useState('');\n  const [loadingTemplate, setLoadingTemplate] = useState(false);\n  const [generating, setGenerating] = useState(false);\n  const [saving, setSaving] = useState(false);\n\n  const loadTemplate = async () => {\n    setLoadingTemplate(true);\n    try {\n      const data = await apiClient.get<{ template: { content: string } }>(`/api/companies/${company.id}/templates/${templateType}`);\n      setTemplateCode(data.template?.content || `<!-- No ${templateType} template yet -->`);\n      toast.success('Template loaded');\n    } catch {\n      setTemplateCode(`<!-- No ${templateType} template found -->`);\n    } finally {\n      setLoadingTemplate(false);\n    }\n  };\n\n  const handleGenerate = async () => {\n    setGenerating(true);\n    try {\n      const data = await apiClient.post<{ template: { content: string } }>(`/api/companies/${company.id}/templates/generate`, { type: templateType });\n      setTemplateCode(data.template?.content || templateCode);\n      toast.success('Template generated');\n    } catch (err: any) {\n      toast.error(err.message || 'Generation failed');\n    } finally {\n      setGenerating(false);\n    }\n  };\n\n  const handleSave = async () => {\n    setSaving(true);\n    try {\n      await apiClient.put(`/api/companies/${company.id}/templates/${templateType}`, { content: templateCode });\n      toast.success('Template saved');\n    } catch (err: any) {\n      toast.error(err.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  useEffect(() => { loadTemplate(); }, [templateType]);\n\n  return (\n    <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"space-y-4\">\n      <button onClick={onBack} className=\"flex items-center gap-1.5 text-sm text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors\">\n        <ArrowLeft className=\"w-4 h-4\" /> Back to Edit\n      </button>\n\n      <div className=\"mb-4\">\n        <h1 className=\"text-2xl font-bold text-[var(--gm-text-primary)]\">{company.name} – Templates</h1>\n        <p className=\"text-sm text-[var(--gm-text-tertiary)]\">Manage document templates for this company.</p>\n      </div>\n\n      <div className=\"flex items-center justify-between mb-4\">\n        <div className=\"flex gap-1\">\n          {(['a4', 'ppt'] as const).map(t => (\n            <button key={t} onClick={() => setTemplateType(t)}\n              className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\n                templateType === t ? 'bg-[var(--gm-interactive-primary)]/10 text-[var(--gm-accent-primary)]' : 'text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)]'\n              }`}>\n              {t === 'a4' ? 'A4 document' : 'Presentation'}\n            </button>\n          ))}\n        </div>\n        <div className=\"flex gap-2\">\n          <button onClick={loadTemplate} disabled={loadingTemplate}\n            className={cn(BTN_SECONDARY, 'px-4 py-2 text-sm disabled:opacity-50')}>\n            {loadingTemplate ? 'Loading...' : 'Load current'}\n          </button>\n          <button onClick={handleGenerate} disabled={generating}\n            className={cn(BTN_PRIMARY, 'px-4 py-2 text-sm')}>\n            {generating ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Zap className=\"w-4 h-4\" />}\n            {generating ? 'Generating...' : 'Generate with AI'}\n          </button>\n          <button onClick={handleSave} disabled={saving}\n            className={cn(BTN_SECONDARY, 'px-4 py-2 text-sm disabled:opacity-50')}>\n            {saving ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Check className=\"w-4 h-4\" />}\n            {saving ? 'Saving...' : 'Save template'}\n          </button>\n        </div>\n      </div>\n\n      <div className=\"flex gap-4\">\n        <div className=\"flex-1\">\n          <div className=\"flex border-b border-[var(--gm-border-primary)] mb-2\">\n            {(['code', 'theme'] as const).map(tab => (\n              <button key={tab} onClick={() => setCodeTab(tab)}\n                className={`flex items-center gap-1.5 px-3 py-2 text-sm border-b-2 transition-colors ${\n                  codeTab === tab ? 'text-[var(--gm-accent-primary)] border-[var(--gm-accent-primary)]' : 'text-[var(--gm-text-tertiary)] border-transparent'\n                }`}>\n                {tab === 'code' ? <Code2 className=\"w-3.5 h-3.5\" /> : <Palette className=\"w-3.5 h-3.5\" />}\n                {tab === 'code' ? 'Code' : 'Theme'}\n              </button>\n            ))}\n          </div>\n          <textarea\n            value={templateCode}\n            onChange={e => setTemplateCode(e.target.value)}\n            className={cn(INPUT, 'p-4 font-mono text-xs h-[500px] scrollbar-thin resize-none')}\n          />\n        </div>\n\n        <div className=\"w-[320px] flex-shrink-0\">\n          <p className={cn(SECTION_TITLE, 'mb-2')}>Preview</p>\n          <div className=\"bg-white border border-[var(--gm-border-primary)] rounded-lg overflow-hidden h-[500px]\">\n            <div className=\"h-1.5 bg-[var(--color-danger-500)]\" />\n            <div className=\"p-5\">\n              <div className=\"flex items-center gap-2 mb-5\">\n                <div className=\"w-8 h-8 bg-[var(--gm-bg-tertiary)] rounded flex items-center justify-center\">\n                  <span className=\"text-[8px] font-bold text-[var(--gm-text-tertiary)]\">{(company.name || '???').substring(0, 3)}</span>\n                </div>\n                <div>\n                  <p className=\"text-[10px] font-bold text-[var(--gm-text-primary)]\">{company.name}</p>\n                  <p className=\"text-[8px] text-[var(--gm-text-tertiary)]\">{templateType === 'a4' ? 'Document' : 'Presentation'} Template</p>\n                </div>\n              </div>\n              <div className=\"text-[9px] text-[var(--gm-text-tertiary)] whitespace-pre-wrap font-mono max-h-[400px] overflow-auto\">\n                {templateCode.substring(0, 500)}\n                {templateCode.length > 500 && '...'}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\nexport default CompaniesPage;\n"],"names":["CARD","INPUT","BTN_PRIMARY","BTN_SECONDARY","BTN_DANGER","SECTION_TITLE","LABEL","reportSections","CompaniesPage","pageView","setPageView","useState","selectedCompany","setSelectedCompany","companiesQuery","useCompanies","openView","company","view","backToList","jsxs","ErrorState","jsx","CompanyList","c","CompanyView","CompanyEdit","CompanyTemplates","companies","loading","onView","onEdit","onTemplates","newName","setNewName","deleteTarget","setDeleteTarget","createCompany","useCreateCompany","deleteCompany","useDeleteCompany","analyzeCompany","useAnalyzeCompany","handleCreate","toast","err","handleAnalyze","handleDeleteConfirm","motion","AlertDialog","open","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","Input","e","cn","Loader2","Plus","i","Eye","Edit2","FileText","Zap","Trash2","onBack","activeSection","setActiveSection","handleReanalyze","ArrowLeft","Globe","ExternalLink","RefreshCw","section","ChevronRight","name","setName","description","setDescription","logoUrl","setLogoUrl","website","setWebsite","linkedin","setLinkedin","updateCompany","useUpdateCompany","handleSave","urlPattern","Check","templateType","setTemplateType","codeTab","setCodeTab","templateCode","setTemplateCode","loadingTemplate","setLoadingTemplate","generating","setGenerating","saving","setSaving","loadTemplate","data","apiClient","handleGenerate","useEffect","t","tab","Code2","Palette"],"mappings":"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"}