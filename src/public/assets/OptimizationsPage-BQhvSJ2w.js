import{r as g,j as e}from"./vendor-react-CZ-WyKWZ.js";import{t as o}from"./vendor-ui-BS9QKitv.js";import{Z as C,aX as M,c as v,eX as U,eY as B,eZ as J,e_ as Z,e$ as G,f0 as Q,A as V,f1 as X,f2 as Y,f3 as K,f4 as W,f5 as ee,f6 as te,R as re,L as d,P as O,a8 as R,f7 as se,f8 as ae,f9 as ie,T as ne,O as ce,fa as oe,fb as le}from"./main-B3DZn5B_.js";import{E as f}from"./ErrorState-to3SSPKs.js";import{C as N}from"./chart-column-BRODuIXF.js";import{B as k}from"./brain-BD_Z4K1O.js";import{S as j}from"./sparkles-D3iJUPqd.js";import{C as w}from"./cpu-DUHk4ipN.js";import{D as me}from"./database-DDPnWHnY.js";import{c as L}from"./vendor-markdown-Cu8AM8lU.js";import{T as de,a as xe}from"./thumbs-up-CvVh3ELI.js";import"./vendor-supabase-Bpw_79gH.js";import"./vendor-query-DSf7I7Ei.js";import"./vendor-router-D_XeKoA_.js";const ge=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],pe=L("git-merge",ge);const ue=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],A=L("tag",ue),he=[{key:"overview",label:"Overview",icon:N},{key:"tools",label:"AI Tools",icon:k},{key:"insights",label:"Insights",icon:j},{key:"digest",label:"Digest",icon:C}];function b({title:t,icon:s,data:r,isLoading:i,isError:n,refetch:a}){if(i)return e.jsx("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary flex items-center justify-center min-h-[120px]",children:e.jsx(d,{className:"w-5 h-5 animate-spin text-gm-interactive-primary"})});if(n)return e.jsx("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary",children:e.jsx(f,{message:`Failed to load ${t.toLowerCase()}.`,onRetry:a})});const c=r&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).filter(([,l])=>l!=null):[];return e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(s,{className:"w-4 h-4 text-gm-interactive-primary"}),e.jsx("h3",{className:"text-xs font-semibold text-gm-text-primary",children:t})]}),c.length>0?e.jsx("div",{className:"space-y-2",children:c.map(([l,x])=>e.jsxs("div",{className:"flex items-start justify-between gap-2 text-[11px]",children:[e.jsx("span",{className:"text-gm-text-tertiary capitalize shrink-0",children:l.replace(/[_-]/g," ")}),e.jsx("span",{className:"text-gm-text-primary text-right break-all",children:typeof x=="object"?JSON.stringify(x,null,0):String(x)})]},l))}):e.jsx("p",{className:"text-[11px] text-gm-text-tertiary",children:"No data available"})]})}function T({title:t,icon:s,data:r,isLoading:i,isError:n,refetch:a}){if(i)return e.jsx("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary flex items-center justify-center min-h-[120px]",children:e.jsx(d,{className:"w-5 h-5 animate-spin text-gm-interactive-primary"})});if(n)return e.jsx("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary",children:e.jsx(f,{message:`Failed to load ${t.toLowerCase()}.`,onRetry:a})});const c=Array.isArray(r)?r:r&&typeof r=="object"?[r]:[];return e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(s,{className:"w-4 h-4 text-gm-interactive-primary"}),e.jsx("h3",{className:"text-xs font-semibold text-gm-text-primary",children:t}),e.jsx("span",{className:"text-[10px] text-gm-text-tertiary bg-gm-surface-secondary px-2 py-0.5 rounded-full ml-auto",children:c.length})]}),c.length>0?e.jsx("div",{className:"space-y-2",children:c.map((l,x)=>e.jsx("div",{className:"bg-gm-surface-secondary rounded-lg p-3 border border-[var(--gm-border-primary)]",children:typeof l=="object"&&l!==null?e.jsx("div",{className:"space-y-1.5",children:Object.entries(l).filter(([,h])=>h!=null).map(([h,p])=>e.jsxs("div",{className:"text-[11px]",children:[e.jsxs("span",{className:"text-gm-text-tertiary capitalize",children:[h.replace(/[_-]/g," "),": "]}),e.jsx("span",{className:"text-gm-text-primary",children:typeof p=="object"?JSON.stringify(p,null,0):String(p)})]},h))}):e.jsx("p",{className:"text-[11px] text-gm-text-primary",children:String(l)})},x))}):e.jsx("p",{className:"text-[11px] text-gm-text-tertiary",children:"No items available"})]})}function be(){const t=U(),s=B(),r=J(),i=Z(),n=G(),a=Q();return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[e.jsx(b,{title:"Health Summary",icon:V,data:t.data,isLoading:t.isLoading,isError:t.isError,refetch:t.refetch}),e.jsx(b,{title:"Health Metrics",icon:w,data:n.data,isLoading:n.isLoading,isError:n.isError,refetch:n.refetch}),e.jsx(b,{title:"Usage Stats",icon:N,data:s.data,isLoading:s.isLoading,isError:s.isError,refetch:s.refetch}),e.jsx(b,{title:"Cache Stats",icon:me,data:r.data,isLoading:r.isLoading,isError:r.isError,refetch:r.refetch}),e.jsx(b,{title:"Analytics",icon:N,data:i.data,isLoading:i.isLoading,isError:i.isError,refetch:i.refetch}),e.jsx(b,{title:"Feedback Stats",icon:j,data:a.data,isLoading:a.isLoading,isError:a.isError,refetch:a.refetch})]})}function ye(){const t=X(),s=Y(),r=K(),i=W(),n=ee(),a=te(),[c,l]=g.useState(""),[x,h]=g.useState(null),[p,D]=g.useState(""),[S,P]=g.useState(null),[y,E]=g.useState(null),F=()=>{t.mutate(void 0,{onSuccess:m=>{o.success("Deduplication scan completed"),E(m)},onError:()=>o.error("Deduplication failed")})},I=()=>{const m=y,z=m?.duplicate_ids??m?.ids??[];if(z.length===0){o.info("Run dedup scan first to find duplicates");return}s.mutate({ids:z},{onSuccess:()=>{o.success("Duplicates resolved"),E(null)},onError:()=>o.error("Failed to resolve duplicates")})},_=()=>{r.mutate({},{onSuccess:()=>o.success("Auto-tagging completed"),onError:()=>o.error("Auto-tagging failed")})},H=()=>{c.trim()&&i.mutate({text:c},{onSuccess:m=>{h(m),o.success("NER analysis complete")},onError:()=>o.error("NER analysis failed")})},q=()=>{p.trim()&&n.mutate({query:p},{onSuccess:m=>{P(m),o.success("Context optimized")},onError:()=>o.error("Context optimization failed")})},$=()=>{a.mutate(void 0,{onSuccess:()=>o.success("Cache cleared"),onError:()=>o.error("Failed to clear cache")})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4 text-gm-interactive-primary"}),e.jsx("h3",{className:"text-xs font-semibold text-gm-text-primary",children:"Deduplication"})]}),e.jsx("p",{className:"text-[11px] text-gm-text-tertiary",children:"Scan and merge duplicate entities across the knowledge base."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:F,disabled:t.isPending,className:"flex-1 px-3 py-2 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover disabled:opacity-50 flex items-center justify-center gap-1.5 transition-colors",children:[t.isPending?e.jsx(d,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(O,{className:"w-3.5 h-3.5"}),"Scan"]}),e.jsxs("button",{onClick:I,disabled:s.isPending||!y,className:"flex-1 px-3 py-2 rounded-lg bg-gm-surface-secondary text-gm-text-primary text-xs font-medium hover:bg-gm-surface-hover border border-gm-border-primary disabled:opacity-50 flex items-center justify-center gap-1.5 transition-colors",children:[s.isPending?e.jsx(d,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(pe,{className:"w-3.5 h-3.5"}),"Resolve"]})]}),y&&e.jsx("div",{className:"bg-gm-surface-secondary rounded-lg p-2 border border-[var(--gm-border-primary)]",children:e.jsx(u,{data:y})})]}),e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4 text-gm-interactive-primary"}),e.jsx("h3",{className:"text-xs font-semibold text-gm-text-primary",children:"Auto-Tag"})]}),e.jsx("p",{className:"text-[11px] text-gm-text-tertiary",children:"Automatically classify and tag all entities using AI."}),e.jsxs("button",{onClick:_,disabled:r.isPending,className:"w-full px-3 py-2 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover disabled:opacity-50 flex items-center justify-center gap-1.5 transition-colors",children:[r.isPending?e.jsx(d,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(A,{className:"w-3.5 h-3.5"}),"Run Auto-Tag"]})]}),e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4 text-gm-status-danger"}),e.jsx("h3",{className:"text-xs font-semibold text-gm-text-primary",children:"Clear Cache"})]}),e.jsx("p",{className:"text-[11px] text-gm-text-tertiary",children:"Purge all optimization caches. Data will be re-computed on next request."}),e.jsxs("button",{onClick:$,disabled:a.isPending,className:"w-full px-3 py-2 rounded-lg bg-gm-surface-secondary text-gm-text-primary text-xs font-medium hover:bg-gm-surface-hover border border-gm-border-primary disabled:opacity-50 flex items-center justify-center gap-1.5 transition-colors",children:[a.isPending?e.jsx(d,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(R,{className:"w-3.5 h-3.5"}),"Clear Cache"]})]})]}),e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4 text-gm-interactive-primary"}),e.jsx("h3",{className:"text-xs font-semibold text-gm-text-primary",children:"Named Entity Recognition"})]}),e.jsx("p",{className:"text-[11px] text-gm-text-tertiary",children:"Extract named entities (people, orgs, locations, etc.) from text."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:c,onChange:m=>l(m.target.value),placeholder:"Paste text to analyze...",className:"flex-1 px-3 py-2 bg-gm-surface-primary border border-gm-border-primary rounded-lg text-xs text-gm-text-primary placeholder:text-gm-text-tertiary focus:outline-none focus:ring-2 focus:ring-gm-border-focus"}),e.jsxs("button",{onClick:H,disabled:i.isPending||!c.trim(),className:"px-4 py-2 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover disabled:opacity-50 flex items-center gap-1.5 transition-colors shrink-0",children:[i.isPending?e.jsx(d,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(k,{className:"w-3.5 h-3.5"}),"Analyze"]})]}),x&&e.jsx("div",{className:"bg-gm-surface-secondary rounded-lg p-3 border border-[var(--gm-border-primary)]",children:e.jsx(u,{data:x})})]}),e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4 text-gm-interactive-primary"}),e.jsx("h3",{className:"text-xs font-semibold text-gm-text-primary",children:"Context Optimization"})]}),e.jsx("p",{className:"text-[11px] text-gm-text-tertiary",children:"Optimize RAG context retrieval for a given query."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:p,onChange:m=>D(m.target.value),placeholder:"Enter query to optimize context for...",className:"flex-1 px-3 py-2 bg-gm-surface-primary border border-gm-border-primary rounded-lg text-xs text-gm-text-primary placeholder:text-gm-text-tertiary focus:outline-none focus:ring-2 focus:ring-gm-border-focus"}),e.jsxs("button",{onClick:q,disabled:n.isPending||!p.trim(),className:"px-4 py-2 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover disabled:opacity-50 flex items-center gap-1.5 transition-colors shrink-0",children:[n.isPending?e.jsx(d,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(w,{className:"w-3.5 h-3.5"}),"Optimize"]})]}),S&&e.jsx("div",{className:"bg-gm-surface-secondary rounded-lg p-3 border border-[var(--gm-border-primary)]",children:e.jsx(u,{data:S})})]})]})}function fe(){const t=se(),s=ae(),r=ie(),[i,n]=g.useState(""),[a,c]=g.useState(null),l=()=>{!i.trim()||!a||r.mutate({message:i,rating:a,category:"general"},{onSuccess:()=>{o.success("Feedback submitted"),n(""),c(null)},onError:()=>o.error("Failed to submit feedback")})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx(T,{title:"Insights",icon:j,data:t.data,isLoading:t.isLoading,isError:t.isError,refetch:t.refetch}),e.jsx(T,{title:"Suggestions",icon:ne,data:s.data,isLoading:s.isLoading,isError:s.isError,refetch:s.refetch})]}),e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"w-4 h-4 text-gm-interactive-primary"}),e.jsx("h3",{className:"text-xs font-semibold text-gm-text-primary",children:"Submit Feedback"})]}),e.jsx("p",{className:"text-[11px] text-gm-text-tertiary",children:"Help improve optimization suggestions by providing feedback."}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>c(a==="positive"?null:"positive"),className:v("px-3 py-1.5 rounded-lg text-xs font-medium flex items-center gap-1.5 transition-colors border",a==="positive"?"bg-green-500/10 border-green-500/30 text-gm-status-success":"border-gm-border-primary text-gm-text-tertiary hover:text-gm-text-primary"),children:[e.jsx(de,{className:"w-3.5 h-3.5"})," Helpful"]}),e.jsxs("button",{onClick:()=>c(a==="negative"?null:"negative"),className:v("px-3 py-1.5 rounded-lg text-xs font-medium flex items-center gap-1.5 transition-colors border",a==="negative"?"bg-red-500/10 border-red-500/30 text-gm-status-danger":"border-gm-border-primary text-gm-text-tertiary hover:text-gm-text-primary"),children:[e.jsx(xe,{className:"w-3.5 h-3.5"})," Not Helpful"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{value:i,onChange:x=>n(x.target.value),placeholder:"Describe your experience or suggestion...",className:"flex-1 px-3 py-2 bg-gm-surface-primary border border-gm-border-primary rounded-lg text-xs text-gm-text-primary placeholder:text-gm-text-tertiary focus:outline-none focus:ring-2 focus:ring-gm-border-focus"}),e.jsxs("button",{onClick:l,disabled:r.isPending||!i.trim()||!a,className:"px-4 py-2 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover disabled:opacity-50 flex items-center gap-1.5 transition-colors shrink-0",children:[r.isPending?e.jsx(d,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(j,{className:"w-3.5 h-3.5"}),"Submit"]})]})]})]})}function je(){const t=oe(),s=le();return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(C,{className:"w-4 h-4 text-gm-interactive-primary"}),e.jsx("h3",{className:"text-xs font-semibold text-gm-text-primary",children:"Periodic Digest"})]}),t.isLoading?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(d,{className:"w-5 h-5 animate-spin text-gm-interactive-primary"})}):t.isError?e.jsx(f,{message:"Failed to load digest.",onRetry:t.refetch}):e.jsx(u,{data:t.data})]}),e.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(k,{className:"w-4 h-4 text-gm-interactive-primary"}),e.jsx("h3",{className:"text-xs font-semibold text-gm-text-primary",children:"AI Project Summary"})]}),s.isLoading?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(d,{className:"w-5 h-5 animate-spin text-gm-interactive-primary"})}):s.isError?e.jsx(f,{message:"Failed to load summary.",onRetry:s.refetch}):e.jsx(u,{data:s.data})]})]})}function u({data:t}){if(t==null)return e.jsx("p",{className:"text-[11px] text-gm-text-tertiary",children:"No data"});if(typeof t=="string")return e.jsx("p",{className:"text-[11px] text-gm-text-primary whitespace-pre-wrap",children:t});if(Array.isArray(t))return e.jsxs("div",{className:"space-y-2",children:[t.map((s,r)=>e.jsx("div",{className:"bg-[var(--gm-surface-hover)] rounded-lg p-2 border border-[var(--gm-border-primary)]",children:e.jsx(u,{data:s})},r)),t.length===0&&e.jsx("p",{className:"text-[11px] text-gm-text-tertiary",children:"Empty list"})]});if(typeof t=="object"){const s=Object.entries(t).filter(([,r])=>r!=null);return e.jsxs("div",{className:"space-y-1.5",children:[s.map(([r,i])=>e.jsxs("div",{className:"text-[11px]",children:[e.jsxs("span",{className:"text-gm-text-tertiary capitalize font-medium",children:[r.replace(/[_-]/g," "),": "]}),typeof i=="object"?e.jsx("div",{className:"ml-3 mt-1",children:e.jsx(u,{data:i})}):e.jsx("span",{className:"text-gm-text-primary",children:String(i)})]},r)),s.length===0&&e.jsx("p",{className:"text-[11px] text-gm-text-tertiary",children:"Empty object"})]})}return e.jsx("p",{className:"text-[11px] text-gm-text-primary",children:String(t)})}function Pe(){const[t,s]=g.useState("overview"),[r,i]=g.useState(!1),n=a=>{window.open(`/api/optimizations/export/${a}`,"_blank"),i(!1),o.success(`Exporting as ${a.toUpperCase()}`)};return e.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto h-[calc(100vh-4rem)]",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{className:"w-5 h-5 text-gm-interactive-primary"}),e.jsx("h1",{className:"text-base font-bold text-gm-text-primary",children:"Optimizations"}),e.jsx("span",{className:"text-[10px] text-gm-text-tertiary bg-gm-surface-secondary px-2 py-0.5 rounded-full",children:"AI-Powered"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>i(!r),className:"px-3 py-1.5 rounded-lg bg-gm-surface-secondary text-gm-text-secondary text-[10px] font-medium hover:bg-gm-surface-hover border border-gm-border-primary flex items-center gap-1.5 transition-colors",children:[e.jsx(M,{className:"w-3 h-3"})," Export"]}),r&&e.jsxs("div",{className:"absolute right-0 mt-1 bg-gm-surface-primary border border-gm-border-primary rounded-lg shadow-lg z-10 py-1 min-w-[100px]",children:[e.jsx("button",{onClick:()=>n("json"),className:"w-full text-left px-3 py-1.5 text-[10px] text-gm-text-primary hover:bg-gm-surface-hover",children:"JSON"}),e.jsx("button",{onClick:()=>n("csv"),className:"w-full text-left px-3 py-1.5 text-[10px] text-gm-text-primary hover:bg-gm-surface-hover",children:"CSV"})]})]}),e.jsx("div",{className:"flex bg-gm-surface-secondary rounded-lg border border-gm-border-primary overflow-hidden",children:he.map(a=>{const c=a.icon;return e.jsxs("button",{onClick:()=>s(a.key),className:v("px-3 py-1.5 text-[10px] font-medium flex items-center gap-1 transition-colors",t===a.key?"bg-gm-interactive-primary text-gm-text-on-brand":"text-gm-text-tertiary hover:text-gm-text-primary"),children:[e.jsx(c,{className:"w-3 h-3"})," ",a.label]},a.key)})})]})]}),t==="overview"&&e.jsx(be,{}),t==="tools"&&e.jsx(ye,{}),t==="insights"&&e.jsx(fe,{}),t==="digest"&&e.jsx(je,{})]})}export{Pe as default};
//# sourceMappingURL=OptimizationsPage-BQhvSJ2w.js.map
