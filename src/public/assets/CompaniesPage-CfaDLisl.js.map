{"version":3,"file":"CompaniesPage-CfaDLisl.js","sources":["../../../node_modules/lucide-react/dist/esm/icons/code-xml.js","../../../node_modules/lucide-react/dist/esm/icons/palette.js","../../../node_modules/lucide-react/dist/esm/icons/rotate-ccw.js","../../../node_modules/react-simple-code-editor/lib/index.js","../../frontend/src/pages/CompaniesPage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m18 16 4-4-4-4\", key: \"1inbqp\" }],\n  [\"path\", { d: \"m6 8-4 4 4 4\", key: \"15zrgr\" }],\n  [\"path\", { d: \"m14.5 4-5 16\", key: \"e7oirm\" }]\n];\nconst CodeXml = createLucideIcon(\"code-xml\", __iconNode);\n\nexport { __iconNode, CodeXml as default };\n//# sourceMappingURL=code-xml.js.map\n","/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z\",\n      key: \"e79jfc\"\n    }\n  ],\n  [\"circle\", { cx: \"13.5\", cy: \"6.5\", r: \".5\", fill: \"currentColor\", key: \"1okk4w\" }],\n  [\"circle\", { cx: \"17.5\", cy: \"10.5\", r: \".5\", fill: \"currentColor\", key: \"f64h9f\" }],\n  [\"circle\", { cx: \"6.5\", cy: \"12.5\", r: \".5\", fill: \"currentColor\", key: \"qy21gx\" }],\n  [\"circle\", { cx: \"8.5\", cy: \"7.5\", r: \".5\", fill: \"currentColor\", key: \"fotxhn\" }]\n];\nconst Palette = createLucideIcon(\"palette\", __iconNode);\n\nexport { __iconNode, Palette as default };\n//# sourceMappingURL=palette.js.map\n","/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8\", key: \"1357e3\" }],\n  [\"path\", { d: \"M3 3v5h5\", key: \"1xhq8a\" }]\n];\nconst RotateCcw = createLucideIcon(\"rotate-ccw\", __iconNode);\n\nexport { __iconNode, RotateCcw as default };\n//# sourceMappingURL=rotate-ccw.js.map\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar React = __importStar(require(\"react\"));\nvar KEYCODE_Y = 89;\nvar KEYCODE_Z = 90;\nvar KEYCODE_M = 77;\nvar KEYCODE_PARENS = 57;\nvar KEYCODE_BRACKETS = 219;\nvar KEYCODE_QUOTE = 222;\nvar KEYCODE_BACK_QUOTE = 192;\nvar HISTORY_LIMIT = 100;\nvar HISTORY_TIME_GAP = 3000;\nvar isWindows = typeof window !== 'undefined' &&\n    'navigator' in window &&\n    /Win/i.test(navigator.platform);\nvar isMacLike = typeof window !== 'undefined' &&\n    'navigator' in window &&\n    /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);\nvar className = 'npm__react-simple-code-editor__textarea';\nvar cssText = /* CSS */ \"\\n/**\\n * Reset the text fill color so that placeholder is visible\\n */\\n.\".concat(className, \":empty {\\n  -webkit-text-fill-color: inherit !important;\\n}\\n\\n/**\\n * Hack to apply on some CSS on IE10 and IE11\\n */\\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\\n  /**\\n    * IE doesn't support '-webkit-text-fill-color'\\n    * So we use 'color: transparent' to make the text transparent on IE\\n    * Unlike other browsers, it doesn't affect caret color in IE\\n    */\\n  .\").concat(className, \" {\\n    color: transparent !important;\\n  }\\n\\n  .\").concat(className, \"::selection {\\n    background-color: #accef7 !important;\\n    color: transparent !important;\\n  }\\n}\\n\");\nvar Editor = React.forwardRef(function Editor(props, ref) {\n    var autoFocus = props.autoFocus, disabled = props.disabled, form = props.form, highlight = props.highlight, _a = props.ignoreTabKey, ignoreTabKey = _a === void 0 ? false : _a, _b = props.insertSpaces, insertSpaces = _b === void 0 ? true : _b, maxLength = props.maxLength, minLength = props.minLength, name = props.name, onBlur = props.onBlur, onClick = props.onClick, onFocus = props.onFocus, onKeyDown = props.onKeyDown, onKeyUp = props.onKeyUp, onValueChange = props.onValueChange, _c = props.padding, padding = _c === void 0 ? 0 : _c, placeholder = props.placeholder, preClassName = props.preClassName, readOnly = props.readOnly, required = props.required, style = props.style, _d = props.tabSize, tabSize = _d === void 0 ? 2 : _d, textareaClassName = props.textareaClassName, textareaId = props.textareaId, value = props.value, rest = __rest(props, [\"autoFocus\", \"disabled\", \"form\", \"highlight\", \"ignoreTabKey\", \"insertSpaces\", \"maxLength\", \"minLength\", \"name\", \"onBlur\", \"onClick\", \"onFocus\", \"onKeyDown\", \"onKeyUp\", \"onValueChange\", \"padding\", \"placeholder\", \"preClassName\", \"readOnly\", \"required\", \"style\", \"tabSize\", \"textareaClassName\", \"textareaId\", \"value\"]);\n    var historyRef = React.useRef({\n        stack: [],\n        offset: -1,\n    });\n    var inputRef = React.useRef(null);\n    var _e = React.useState(true), capture = _e[0], setCapture = _e[1];\n    var contentStyle = {\n        paddingTop: typeof padding === 'object' ? padding.top : padding,\n        paddingRight: typeof padding === 'object' ? padding.right : padding,\n        paddingBottom: typeof padding === 'object' ? padding.bottom : padding,\n        paddingLeft: typeof padding === 'object' ? padding.left : padding,\n    };\n    var highlighted = highlight(value);\n    var getLines = function (text, position) {\n        return text.substring(0, position).split('\\n');\n    };\n    var recordChange = React.useCallback(function (record, overwrite) {\n        var _a, _b, _c;\n        if (overwrite === void 0) { overwrite = false; }\n        var _d = historyRef.current, stack = _d.stack, offset = _d.offset;\n        if (stack.length && offset > -1) {\n            // When something updates, drop the redo operations\n            historyRef.current.stack = stack.slice(0, offset + 1);\n            // Limit the number of operations to 100\n            var count = historyRef.current.stack.length;\n            if (count > HISTORY_LIMIT) {\n                var extras = count - HISTORY_LIMIT;\n                historyRef.current.stack = stack.slice(extras, count);\n                historyRef.current.offset = Math.max(historyRef.current.offset - extras, 0);\n            }\n        }\n        var timestamp = Date.now();\n        if (overwrite) {\n            var last = historyRef.current.stack[historyRef.current.offset];\n            if (last && timestamp - last.timestamp < HISTORY_TIME_GAP) {\n                // A previous entry exists and was in short interval\n                // Match the last word in the line\n                var re = /[^a-z0-9]([a-z0-9]+)$/i;\n                // Get the previous line\n                var previous = (_a = getLines(last.value, last.selectionStart)\n                    .pop()) === null || _a === void 0 ? void 0 : _a.match(re);\n                // Get the current line\n                var current = (_b = getLines(record.value, record.selectionStart)\n                    .pop()) === null || _b === void 0 ? void 0 : _b.match(re);\n                if ((previous === null || previous === void 0 ? void 0 : previous[1]) && ((_c = current === null || current === void 0 ? void 0 : current[1]) === null || _c === void 0 ? void 0 : _c.startsWith(previous[1]))) {\n                    // The last word of the previous line and current line match\n                    // Overwrite previous entry so that undo will remove whole word\n                    historyRef.current.stack[historyRef.current.offset] = __assign(__assign({}, record), { timestamp: timestamp });\n                    return;\n                }\n            }\n        }\n        // Add the new operation to the stack\n        historyRef.current.stack.push(__assign(__assign({}, record), { timestamp: timestamp }));\n        historyRef.current.offset++;\n    }, []);\n    var recordCurrentState = React.useCallback(function () {\n        var input = inputRef.current;\n        if (!input)\n            return;\n        // Save current state of the input\n        var value = input.value, selectionStart = input.selectionStart, selectionEnd = input.selectionEnd;\n        recordChange({\n            value: value,\n            selectionStart: selectionStart,\n            selectionEnd: selectionEnd,\n        });\n    }, [recordChange]);\n    var updateInput = function (record) {\n        var input = inputRef.current;\n        if (!input)\n            return;\n        // Update values and selection state\n        input.value = record.value;\n        input.selectionStart = record.selectionStart;\n        input.selectionEnd = record.selectionEnd;\n        onValueChange === null || onValueChange === void 0 ? void 0 : onValueChange(record.value);\n    };\n    var applyEdits = function (record) {\n        // Save last selection state\n        var input = inputRef.current;\n        var last = historyRef.current.stack[historyRef.current.offset];\n        if (last && input) {\n            historyRef.current.stack[historyRef.current.offset] = __assign(__assign({}, last), { selectionStart: input.selectionStart, selectionEnd: input.selectionEnd });\n        }\n        // Save the changes\n        recordChange(record);\n        updateInput(record);\n    };\n    var undoEdit = function () {\n        var _a = historyRef.current, stack = _a.stack, offset = _a.offset;\n        // Get the previous edit\n        var record = stack[offset - 1];\n        if (record) {\n            // Apply the changes and update the offset\n            updateInput(record);\n            historyRef.current.offset = Math.max(offset - 1, 0);\n        }\n    };\n    var redoEdit = function () {\n        var _a = historyRef.current, stack = _a.stack, offset = _a.offset;\n        // Get the next edit\n        var record = stack[offset + 1];\n        if (record) {\n            // Apply the changes and update the offset\n            updateInput(record);\n            historyRef.current.offset = Math.min(offset + 1, stack.length - 1);\n        }\n    };\n    var handleKeyDown = function (e) {\n        if (onKeyDown) {\n            onKeyDown(e);\n            if (e.defaultPrevented) {\n                return;\n            }\n        }\n        if (e.key === 'Escape') {\n            e.currentTarget.blur();\n        }\n        var _a = e.currentTarget, value = _a.value, selectionStart = _a.selectionStart, selectionEnd = _a.selectionEnd;\n        var tabCharacter = (insertSpaces ? ' ' : '\\t').repeat(tabSize);\n        if (e.key === 'Tab' && !ignoreTabKey && capture) {\n            // Prevent focus change\n            e.preventDefault();\n            if (e.shiftKey) {\n                // Unindent selected lines\n                var linesBeforeCaret = getLines(value, selectionStart);\n                var startLine_1 = linesBeforeCaret.length - 1;\n                var endLine_1 = getLines(value, selectionEnd).length - 1;\n                var nextValue = value\n                    .split('\\n')\n                    .map(function (line, i) {\n                    if (i >= startLine_1 &&\n                        i <= endLine_1 &&\n                        line.startsWith(tabCharacter)) {\n                        return line.substring(tabCharacter.length);\n                    }\n                    return line;\n                })\n                    .join('\\n');\n                if (value !== nextValue) {\n                    var startLineText = linesBeforeCaret[startLine_1];\n                    applyEdits({\n                        value: nextValue,\n                        // Move the start cursor if first line in selection was modified\n                        // It was modified only if it started with a tab\n                        selectionStart: (startLineText === null || startLineText === void 0 ? void 0 : startLineText.startsWith(tabCharacter))\n                            ? selectionStart - tabCharacter.length\n                            : selectionStart,\n                        // Move the end cursor by total number of characters removed\n                        selectionEnd: selectionEnd - (value.length - nextValue.length),\n                    });\n                }\n            }\n            else if (selectionStart !== selectionEnd) {\n                // Indent selected lines\n                var linesBeforeCaret = getLines(value, selectionStart);\n                var startLine_2 = linesBeforeCaret.length - 1;\n                var endLine_2 = getLines(value, selectionEnd).length - 1;\n                var startLineText = linesBeforeCaret[startLine_2];\n                applyEdits({\n                    value: value\n                        .split('\\n')\n                        .map(function (line, i) {\n                        if (i >= startLine_2 && i <= endLine_2) {\n                            return tabCharacter + line;\n                        }\n                        return line;\n                    })\n                        .join('\\n'),\n                    // Move the start cursor by number of characters added in first line of selection\n                    // Don't move it if it there was no text before cursor\n                    selectionStart: startLineText && /\\S/.test(startLineText)\n                        ? selectionStart + tabCharacter.length\n                        : selectionStart,\n                    // Move the end cursor by total number of characters added\n                    selectionEnd: selectionEnd + tabCharacter.length * (endLine_2 - startLine_2 + 1),\n                });\n            }\n            else {\n                var updatedSelection = selectionStart + tabCharacter.length;\n                applyEdits({\n                    // Insert tab character at caret\n                    value: value.substring(0, selectionStart) +\n                        tabCharacter +\n                        value.substring(selectionEnd),\n                    // Update caret position\n                    selectionStart: updatedSelection,\n                    selectionEnd: updatedSelection,\n                });\n            }\n        }\n        else if (e.key === 'Backspace') {\n            var hasSelection = selectionStart !== selectionEnd;\n            var textBeforeCaret = value.substring(0, selectionStart);\n            if (textBeforeCaret.endsWith(tabCharacter) && !hasSelection) {\n                // Prevent default delete behaviour\n                e.preventDefault();\n                var updatedSelection = selectionStart - tabCharacter.length;\n                applyEdits({\n                    // Remove tab character at caret\n                    value: value.substring(0, selectionStart - tabCharacter.length) +\n                        value.substring(selectionEnd),\n                    // Update caret position\n                    selectionStart: updatedSelection,\n                    selectionEnd: updatedSelection,\n                });\n            }\n        }\n        else if (e.key === 'Enter') {\n            // Ignore selections\n            if (selectionStart === selectionEnd) {\n                // Get the current line\n                var line = getLines(value, selectionStart).pop();\n                var matches = line === null || line === void 0 ? void 0 : line.match(/^\\s+/);\n                if (matches === null || matches === void 0 ? void 0 : matches[0]) {\n                    e.preventDefault();\n                    // Preserve indentation on inserting a new line\n                    var indent = '\\n' + matches[0];\n                    var updatedSelection = selectionStart + indent.length;\n                    applyEdits({\n                        // Insert indentation character at caret\n                        value: value.substring(0, selectionStart) +\n                            indent +\n                            value.substring(selectionEnd),\n                        // Update caret position\n                        selectionStart: updatedSelection,\n                        selectionEnd: updatedSelection,\n                    });\n                }\n            }\n        }\n        else if (e.keyCode === KEYCODE_PARENS ||\n            e.keyCode === KEYCODE_BRACKETS ||\n            e.keyCode === KEYCODE_QUOTE ||\n            e.keyCode === KEYCODE_BACK_QUOTE) {\n            var chars = void 0;\n            if (e.keyCode === KEYCODE_PARENS && e.shiftKey) {\n                chars = ['(', ')'];\n            }\n            else if (e.keyCode === KEYCODE_BRACKETS) {\n                if (e.shiftKey) {\n                    chars = ['{', '}'];\n                }\n                else {\n                    chars = ['[', ']'];\n                }\n            }\n            else if (e.keyCode === KEYCODE_QUOTE) {\n                if (e.shiftKey) {\n                    chars = ['\"', '\"'];\n                }\n                else {\n                    chars = [\"'\", \"'\"];\n                }\n            }\n            else if (e.keyCode === KEYCODE_BACK_QUOTE && !e.shiftKey) {\n                chars = ['`', '`'];\n            }\n            // If text is selected, wrap them in the characters\n            if (selectionStart !== selectionEnd && chars) {\n                e.preventDefault();\n                applyEdits({\n                    value: value.substring(0, selectionStart) +\n                        chars[0] +\n                        value.substring(selectionStart, selectionEnd) +\n                        chars[1] +\n                        value.substring(selectionEnd),\n                    // Update caret position\n                    selectionStart: selectionStart,\n                    selectionEnd: selectionEnd + 2,\n                });\n            }\n        }\n        else if ((isMacLike\n            ? // Trigger undo with ⌘+Z on Mac\n                e.metaKey && e.keyCode === KEYCODE_Z\n            : // Trigger undo with Ctrl+Z on other platforms\n                e.ctrlKey && e.keyCode === KEYCODE_Z) &&\n            !e.shiftKey &&\n            !e.altKey) {\n            e.preventDefault();\n            undoEdit();\n        }\n        else if ((isMacLike\n            ? // Trigger redo with ⌘+Shift+Z on Mac\n                e.metaKey && e.keyCode === KEYCODE_Z && e.shiftKey\n            : isWindows\n                ? // Trigger redo with Ctrl+Y on Windows\n                    e.ctrlKey && e.keyCode === KEYCODE_Y\n                : // Trigger redo with Ctrl+Shift+Z on other platforms\n                    e.ctrlKey && e.keyCode === KEYCODE_Z && e.shiftKey) &&\n            !e.altKey) {\n            e.preventDefault();\n            redoEdit();\n        }\n        else if (e.keyCode === KEYCODE_M &&\n            e.ctrlKey &&\n            (isMacLike ? e.shiftKey : true)) {\n            e.preventDefault();\n            // Toggle capturing tab key so users can focus away\n            setCapture(function (prev) { return !prev; });\n        }\n    };\n    var handleChange = function (e) {\n        var _a = e.currentTarget, value = _a.value, selectionStart = _a.selectionStart, selectionEnd = _a.selectionEnd;\n        recordChange({\n            value: value,\n            selectionStart: selectionStart,\n            selectionEnd: selectionEnd,\n        }, true);\n        onValueChange(value);\n    };\n    React.useEffect(function () {\n        recordCurrentState();\n    }, [recordCurrentState]);\n    React.useImperativeHandle(ref, function () {\n        return {\n            get session() {\n                return {\n                    history: historyRef.current,\n                };\n            },\n            set session(session) {\n                historyRef.current = session.history;\n            },\n        };\n    }, []);\n    return (React.createElement(\"div\", __assign({}, rest, { style: __assign(__assign({}, styles.container), style) }),\n        React.createElement(\"pre\", __assign({ className: preClassName, \"aria-hidden\": \"true\", style: __assign(__assign(__assign({}, styles.editor), styles.highlight), contentStyle) }, (typeof highlighted === 'string'\n            ? { dangerouslySetInnerHTML: { __html: highlighted + '<br />' } }\n            : { children: highlighted }))),\n        React.createElement(\"textarea\", { ref: function (c) { return (inputRef.current = c); }, style: __assign(__assign(__assign({}, styles.editor), styles.textarea), contentStyle), className: className + (textareaClassName ? \" \".concat(textareaClassName) : ''), id: textareaId, value: value, onChange: handleChange, onKeyDown: handleKeyDown, onClick: onClick, onKeyUp: onKeyUp, onFocus: onFocus, onBlur: onBlur, disabled: disabled, form: form, maxLength: maxLength, minLength: minLength, name: name, placeholder: placeholder, readOnly: readOnly, required: required, autoFocus: autoFocus, autoCapitalize: \"off\", autoComplete: \"off\", autoCorrect: \"off\", spellCheck: false, \"data-gramm\": false }),\n        React.createElement(\"style\", { dangerouslySetInnerHTML: { __html: cssText } })));\n});\nvar styles = {\n    container: {\n        position: 'relative',\n        textAlign: 'left',\n        boxSizing: 'border-box',\n        padding: 0,\n        overflow: 'hidden',\n    },\n    textarea: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        height: '100%',\n        width: '100%',\n        resize: 'none',\n        color: 'inherit',\n        overflow: 'hidden',\n        MozOsxFontSmoothing: 'grayscale',\n        WebkitFontSmoothing: 'antialiased',\n        WebkitTextFillColor: 'transparent',\n    },\n    highlight: {\n        position: 'relative',\n        pointerEvents: 'none',\n    },\n    editor: {\n        margin: 0,\n        border: 0,\n        background: 'none',\n        boxSizing: 'inherit',\n        display: 'inherit',\n        fontFamily: 'inherit',\n        fontSize: 'inherit',\n        fontStyle: 'inherit',\n        fontVariantLigatures: 'inherit',\n        fontWeight: 'inherit',\n        letterSpacing: 'inherit',\n        lineHeight: 'inherit',\n        tabSize: 'inherit',\n        textIndent: 'inherit',\n        textRendering: 'inherit',\n        textTransform: 'inherit',\n        whiteSpace: 'pre-wrap',\n        wordBreak: 'keep-all',\n        overflowWrap: 'break-word',\n    },\n};\nexports.default = Editor;\n//# sourceMappingURL=index.js.map","import { useState, useEffect, useMemo, useCallback, useRef } from 'react';\nimport { motion } from 'framer-motion';\nimport {\n  Building2, Plus, Eye, Edit2, FileText, Zap, Trash2, ArrowLeft,\n  Globe, ExternalLink, RefreshCw, ChevronRight, Check, Code2, Palette, Loader2,\n  AlertTriangle, Sparkles, Save, RotateCcw, Type, Maximize2, Minimize2,\n  Printer, Download, Upload\n} from 'lucide-react';\nimport { Input } from '@/components/ui/input';\nimport { toast } from 'sonner';\nimport { cn } from '@/lib/utils';\nimport { apiClient } from '@/lib/api-client';\nimport {\n  useCompanies, useCompany, useCreateCompany, useUpdateCompany,\n  useDeleteCompany, useAnalyzeCompany,\n} from '@/hooks/useKrisp';\nimport { AvatarUpload } from '../components/shared/AvatarUpload';\nimport { ErrorState } from '../components/shared/ErrorState';\nimport {\n  AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent,\n  AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle,\n} from '@/components/ui/alert-dialog';\nimport Editor from 'react-simple-code-editor';\nimport Prism from 'prismjs';\nimport 'prismjs/components/prism-markup';\nimport 'prismjs/themes/prism.css';\n\nconst CARD = 'rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-[var(--shadow-sm)] transition-all duration-200';\nconst INPUT = 'w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-placeholder)] focus:outline-none focus:border-[var(--gm-border-focus)] focus:shadow-[var(--shadow-focus)] transition-all duration-150';\nconst BTN_PRIMARY = 'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] hover:bg-[var(--gm-interactive-primary-hover)] shadow-sm transition-all duration-150 disabled:opacity-50';\nconst BTN_SECONDARY = 'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] hover:bg-[var(--gm-interactive-secondary-hover)] border border-[var(--gm-border-primary)] transition-all duration-150';\nconst BTN_DANGER = 'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--color-danger-500)] text-white hover:bg-[var(--color-danger-600)] shadow-sm transition-all duration-150 disabled:opacity-50';\nconst SECTION_TITLE = 'text-[10px] font-bold text-[var(--gm-accent-primary)] uppercase tracking-[0.1em]';\nconst LABEL = 'text-[10px] font-bold text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-1 flex items-center gap-1.5';\n\ninterface Company {\n  id: string;\n  name: string;\n  logo_url?: string;\n  website_url?: string;\n  website?: string;\n  linkedin_url?: string;\n  linkedin?: string;\n  description?: string;\n  status?: 'analyzed' | 'not_analyzed';\n  colors?: string[];\n  report?: Record<string, string>;\n  brand_assets?: {\n    primary_color?: string;\n    secondary_color?: string;\n    ai_context?: string;\n    analyzed_at?: string;\n    analysis_report?: Record<string, string>;\n  };\n}\n\nconst reportSections = [\n  { display: 'Ficha de Identidade', key: 'ficha_identidade' },\n  { display: 'Visão Geral e Posicionamento', key: 'visao_geral' },\n  { display: 'Produtos e Serviços', key: 'produtos_servicos' },\n  { display: 'Público-Alvo e Clientes', key: 'publico_alvo' },\n  { display: 'Equipa e Liderança', key: 'equipa_lideranca' },\n  { display: 'Presença Digital e Marketing', key: 'presenca_digital' },\n  { display: 'Análise Competitiva', key: 'analise_competitiva' },\n  { display: 'Indicadores de Crescimento', key: 'indicadores_crescimento' },\n  { display: 'Análise SWOT', key: 'swot' },\n  { display: 'Conclusões e Insights', key: 'conclusoes' },\n];\n\nconst TEMPLATE_PLACEHOLDERS = ['{{COMPANY_NAME}}', '{{LOGO_URL}}', '{{COMPANY_LOGO_URL}}', '{{PRIMARY_COLOR}}', '{{SECONDARY_COLOR}}', '{{REPORT_DATA}}'];\nconst REQUIRED_PLACEHOLDERS = ['{{REPORT_DATA}}'];\n\nconst STYLE_OPTIONS = [\n  { value: 'corporate', label: 'Corporate Classic', desc: 'Formal, structured, traditional' },\n  { value: 'minimal', label: 'Modern Minimal', desc: 'Clean, spacious, focus on content' },\n  { value: 'tech', label: 'Startup Tech', desc: 'Bold, modern, geometric' },\n  { value: 'consultancy', label: 'Consultancy Premium', desc: 'Executive, refined, data-friendly' },\n];\n\nconst FONT_OPTIONS = [\n  { value: \"'Segoe UI', Roboto, Helvetica, Arial, sans-serif\", label: 'System Default' },\n  { value: \"'Georgia', 'Times New Roman', serif\", label: 'Georgia (Serif)' },\n  { value: \"'Inter', 'Helvetica Neue', sans-serif\", label: 'Inter' },\n  { value: \"'Roboto', 'Arial', sans-serif\", label: 'Roboto' },\n  { value: \"'Playfair Display', serif\", label: 'Playfair Display' },\n  { value: \"'Source Sans Pro', sans-serif\", label: 'Source Sans Pro' },\n  { value: \"'Fira Code', monospace\", label: 'Fira Code (Mono)' },\n];\n\ntype CompanyPageView = 'list' | 'view' | 'edit' | 'templates';\n\nfunction getMissingPlaceholders(html: string): string[] {\n  return REQUIRED_PLACEHOLDERS.filter(p => !html.includes(p));\n}\n\nfunction getUsedPlaceholders(html: string): string[] {\n  return TEMPLATE_PLACEHOLDERS.filter(p => html.includes(p));\n}\n\nfunction fillPlaceholders(html: string, company: Company): string {\n  const ba = company.brand_assets || {};\n  return html\n    .replace(/\\{\\{COMPANY_NAME\\}\\}/g, company.name || 'Company Name')\n    .replace(/\\{\\{COMPANY_LOGO_URL\\}\\}/g, company.logo_url || '')\n    .replace(/\\{\\{LOGO_URL\\}\\}/g, company.logo_url || '')\n    .replace(/\\{\\{PRIMARY_COLOR\\}\\}/g, ba.primary_color || '#1a1a2e')\n    .replace(/\\{\\{SECONDARY_COLOR\\}\\}/g, ba.secondary_color || '#16213e')\n    .replace(/\\{\\{REPORT_DATA\\}\\}/g, '<h2>Sample Section Title</h2><p>This is sample report content to demonstrate how your template will look when populated with real data. The actual report will contain analysis, metrics, and insights.</p><h2>Another Section</h2><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>');\n}\n\nfunction openHtmlForPdf(html: string) {\n  const blob = new Blob([html], { type: 'text/html' });\n  const url = URL.createObjectURL(blob);\n  const win = window.open(url, '_blank');\n  if (win) {\n    win.addEventListener('load', () => {\n      setTimeout(() => win.print(), 600);\n    });\n  }\n}\n\nfunction downloadHtmlFile(html: string, filename: string) {\n  const blob = new Blob([html], { type: 'text/html' });\n  const url = URL.createObjectURL(blob);\n  const a = document.createElement('a');\n  a.href = url;\n  a.download = filename;\n  document.body.appendChild(a);\n  a.click();\n  document.body.removeChild(a);\n  URL.revokeObjectURL(url);\n}\n\nconst CompaniesPage = () => {\n  const [pageView, setPageView] = useState<CompanyPageView>('list');\n  const [selectedCompany, setSelectedCompany] = useState<Company | null>(null);\n  const companiesQuery = useCompanies();\n\n  const openView = (company: Company, view: CompanyPageView) => {\n    setSelectedCompany(company);\n    setPageView(view);\n  };\n\n  const backToList = () => {\n    setPageView('list');\n    setSelectedCompany(null);\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      {pageView === 'list' && (\n        companiesQuery.isError\n          ? <ErrorState message=\"Failed to load companies\" onRetry={() => companiesQuery.refetch()} />\n          : <CompanyList companies={companiesQuery.data?.companies || []} loading={companiesQuery.isLoading} onView={c => openView(c, 'view')} onEdit={c => openView(c, 'edit')} onTemplates={c => openView(c, 'templates')} />\n      )}\n      {pageView === 'view' && selectedCompany && <CompanyView company={selectedCompany} onBack={backToList} onEdit={() => setPageView('edit')} />}\n      {pageView === 'edit' && selectedCompany && <CompanyEdit company={selectedCompany} onBack={backToList} onTemplates={() => setPageView('templates')} onUpdated={(c) => setSelectedCompany(c)} />}\n      {pageView === 'templates' && selectedCompany && <CompanyTemplates company={selectedCompany} onBack={() => setPageView('edit')} />}\n    </div>\n  );\n};\n\n// ==================== LIST ====================\n\nfunction CompanyList({ companies, loading, onView, onEdit, onTemplates }: {\n  companies: Company[]; loading: boolean;\n  onView: (c: Company) => void; onEdit: (c: Company) => void; onTemplates: (c: Company) => void;\n}) {\n  const [newName, setNewName] = useState('');\n  const [deleteTarget, setDeleteTarget] = useState<Company | null>(null);\n  const createCompany = useCreateCompany();\n  const deleteCompany = useDeleteCompany();\n  const analyzeCompany = useAnalyzeCompany();\n\n  const handleCreate = async () => {\n    if (!newName.trim()) { toast.error('Company name is required'); return; }\n    try {\n      await createCompany.mutateAsync({ name: newName.trim() });\n      toast.success('Company created');\n      setNewName('');\n    } catch (err: any) {\n      toast.error(err.message || 'Failed to create company');\n    }\n  };\n\n  const handleAnalyze = async (company: Company) => {\n    toast.info(`Analyzing ${company.name}...`);\n    try {\n      await analyzeCompany.mutateAsync(company.id);\n      toast.success(`${company.name} analysis complete`);\n    } catch (err: any) {\n      toast.error(err.message || 'Analysis failed');\n    }\n  };\n\n  const handleDeleteConfirm = async () => {\n    if (!deleteTarget) return;\n    try {\n      await deleteCompany.mutateAsync(deleteTarget.id);\n      toast.success('Company deleted');\n    } catch (err: any) {\n      toast.error(err.message || 'Failed to delete');\n    } finally {\n      setDeleteTarget(null);\n    }\n  };\n\n  return (\n    <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"space-y-4\">\n      <AlertDialog open={!!deleteTarget} onOpenChange={(open) => { if (!open) setDeleteTarget(null); }}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Delete {deleteTarget?.name || 'this item'}?</AlertDialogTitle>\n            <AlertDialogDescription>\n              This action cannot be undone. The company and all its data will be permanently removed.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction onClick={handleDeleteConfirm} className={BTN_DANGER}>\n              Delete\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-[var(--gm-text-primary)]\">Companies</h1>\n          <p className=\"text-sm text-[var(--gm-text-tertiary)]\">Manage company profiles and assets</p>\n        </div>\n      </div>\n\n      <div className=\"flex gap-2\">\n        <Input value={newName} onChange={e => setNewName(e.target.value)} placeholder=\"New company name...\" className={cn(INPUT, 'max-w-xs')}\n          onKeyDown={e => { if (e.key === 'Enter') handleCreate(); }} />\n        <button onClick={handleCreate} disabled={createCompany.isPending}\n          className={cn(BTN_PRIMARY, 'px-4 py-2 text-sm')}>\n          {createCompany.isPending ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Plus className=\"w-4 h-4\" />} New company\n        </button>\n      </div>\n\n      {loading ? (\n        <div className=\"flex justify-center py-12\"><Loader2 className=\"w-6 h-6 animate-spin text-[var(--gm-accent-primary)]\" /></div>\n      ) : companies.length === 0 ? (\n        <div className=\"text-center py-12 text-[var(--gm-text-tertiary)] text-sm\">No companies yet. Create one above.</div>\n      ) : (\n        <div className=\"space-y-3\">\n          {companies.map((company, i) => (\n            <motion.div\n              key={company.id}\n              initial={{ opacity: 0, y: 10 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: i * 0.05 }}\n              className={cn(CARD, 'p-4 hover:border-[var(--gm-accent-primary)]/20')}\n            >\n              <div className=\"flex items-center gap-4\">\n                <div className=\"w-12 h-12 rounded-lg bg-[var(--gm-bg-tertiary)] flex items-center justify-center flex-shrink-0 overflow-hidden\">\n                  {company.logo_url ? (\n                    <img src={company.logo_url} alt={company.name} className=\"w-full h-full object-contain\" />\n                  ) : (\n                    <span className=\"text-sm font-bold text-[var(--gm-text-primary)]\">{(company.name || '???').substring(0, 3).toUpperCase()}</span>\n                  )}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center gap-2\">\n                    <h3 className=\"text-sm font-semibold text-[var(--gm-text-primary)]\">{company.name}</h3>\n                    {(company.colors || []).length > 0 && (\n                      <div className=\"flex gap-0.5\">\n                        {(company.colors || []).map((c, i) => (\n                          <div key={i} className=\"w-3 h-3 rounded-sm\" style={{ backgroundColor: c }} />\n                        ))}\n                      </div>\n                    )}\n                    <span className={`text-[10px] px-2 py-0.5 rounded-full font-medium ${\n                      company.status === 'analyzed' ? 'bg-[var(--gm-accent-primary)]/10 text-[var(--gm-accent-primary)]' : 'bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)]'\n                    }`}>\n                      {company.status === 'analyzed' ? 'Analyzed' : 'Not analyzed'}\n                    </span>\n                  </div>\n                  {(company.website || company.website_url) && <p className=\"text-[10px] text-[var(--gm-text-tertiary)]\">{company.website || company.website_url}</p>}\n                </div>\n                <div className=\"flex items-center gap-1 flex-shrink-0 flex-wrap\">\n                  <button onClick={() => onView(company)} className=\"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)] transition-colors\">\n                    <Eye className=\"w-3.5 h-3.5\" /> View\n                  </button>\n                  <button onClick={() => onEdit(company)} className=\"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)] transition-colors\">\n                    <Edit2 className=\"w-3.5 h-3.5\" /> Edit\n                  </button>\n                  <button onClick={() => onTemplates(company)} className=\"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)] transition-colors\">\n                    <FileText className=\"w-3.5 h-3.5\" /> Templates\n                  </button>\n                  <button onClick={() => handleAnalyze(company)} className=\"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)] transition-colors\">\n                    <Zap className=\"w-3.5 h-3.5\" /> {company.status === 'analyzed' ? 'Re-analyze' : 'Analyze'}\n                  </button>\n                  <button onClick={() => setDeleteTarget(company)} className=\"p-1.5 rounded-lg text-[var(--gm-text-tertiary)] hover:bg-[var(--color-danger-500)]/10 hover:text-[var(--color-danger-500)] transition-colors\">\n                    <Trash2 className=\"w-3.5 h-3.5\" />\n                  </button>\n                </div>\n              </div>\n            </motion.div>\n          ))}\n        </div>\n      )}\n    </motion.div>\n  );\n}\n\n// ==================== VIEW ====================\n\nfunction CompanyView({ company, onBack, onEdit }: { company: Company; onBack: () => void; onEdit: () => void }) {\n  const companyQuery = useCompany(company.id);\n  const fullCompany = companyQuery.data?.company || company;\n  const [activeSection, setActiveSection] = useState(reportSections[0].key);\n  const analyzeCompany = useAnalyzeCompany();\n\n  const analysisReport = fullCompany.brand_assets?.analysis_report || {};\n\n  const handleReanalyze = async () => {\n    try {\n      await analyzeCompany.mutateAsync(company.id);\n      toast.success('Analysis complete');\n      companyQuery.refetch();\n    } catch (err: any) {\n      toast.error(err.message || 'Analysis failed');\n    }\n  };\n\n  const activeSectionData = reportSections.find(s => s.key === activeSection);\n\n  return (\n    <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"space-y-4\">\n      <button onClick={onBack} className=\"flex items-center gap-1.5 text-sm text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors\">\n        <ArrowLeft className=\"w-4 h-4\" /> Back to Companies\n      </button>\n\n      <div className=\"flex items-center gap-4 mb-2\">\n        <div className=\"w-14 h-14 rounded-xl bg-[var(--gm-bg-tertiary)] flex items-center justify-center overflow-hidden\">\n          {fullCompany.logo_url ? (\n            <img src={fullCompany.logo_url} alt={fullCompany.name} className=\"w-full h-full object-contain\" />\n          ) : (\n            <span className=\"text-lg font-bold text-[var(--gm-text-primary)]\">{(fullCompany.name || '???').substring(0, 3).toUpperCase()}</span>\n          )}\n        </div>\n        <div className=\"flex-1\">\n          <div className=\"flex items-center gap-2\">\n            <h1 className=\"text-2xl font-bold text-[var(--gm-text-primary)]\">{fullCompany.name}</h1>\n            {fullCompany.brand_assets?.primary_color && (\n              <div className=\"flex gap-1 ml-2\">\n                <div className=\"w-4 h-4 rounded-sm border border-[var(--gm-border-primary)]\" style={{ backgroundColor: fullCompany.brand_assets.primary_color }} />\n                {fullCompany.brand_assets?.secondary_color && (\n                  <div className=\"w-4 h-4 rounded-sm border border-[var(--gm-border-primary)]\" style={{ backgroundColor: fullCompany.brand_assets.secondary_color }} />\n                )}\n              </div>\n            )}\n          </div>\n          <div className=\"flex items-center gap-3 mt-1\">\n            {(fullCompany.website || fullCompany.website_url) && (\n              <a href={fullCompany.website || fullCompany.website_url} target=\"_blank\" rel=\"noreferrer\"\n                className=\"text-xs text-[var(--gm-accent-primary)] flex items-center gap-1 hover:underline\">\n                <Globe className=\"w-3 h-3\" /> {fullCompany.website || fullCompany.website_url}\n              </a>\n            )}\n            {(fullCompany.linkedin || fullCompany.linkedin_url) && (\n              <a href={fullCompany.linkedin || fullCompany.linkedin_url} target=\"_blank\" rel=\"noreferrer\"\n                className=\"text-xs text-[var(--gm-accent-primary)] flex items-center gap-1 hover:underline\">\n                <ExternalLink className=\"w-3 h-3\" /> LinkedIn\n              </a>\n            )}\n          </div>\n        </div>\n        <div className=\"flex gap-2 flex-shrink-0\">\n          <button onClick={handleReanalyze} disabled={analyzeCompany.isPending}\n            className={cn(BTN_PRIMARY, 'px-4 py-2 text-sm')}>\n            {analyzeCompany.isPending ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <RefreshCw className=\"w-4 h-4\" />} Re-analyze\n          </button>\n          <button onClick={onEdit} className=\"text-sm text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors\">Edit</button>\n        </div>\n      </div>\n\n      <div className=\"flex gap-6\">\n        <div className=\"w-56 flex-shrink-0\">\n          <h4 className=\"text-xs font-semibold text-[var(--gm-text-primary)] mb-2\">Report Sections</h4>\n          <div className=\"space-y-0.5\">\n            {reportSections.map(section => (\n              <button\n                key={section.key}\n                onClick={() => setActiveSection(section.key)}\n                className={`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors flex items-center justify-between ${\n                  activeSection === section.key ? 'bg-[var(--gm-interactive-primary)]/10 text-[var(--gm-accent-primary)] font-medium' : 'text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] hover:bg-[var(--gm-surface-hover)]'\n                }`}\n              >\n                {section.display}\n                {activeSection === section.key && <ChevronRight className=\"w-3.5 h-3.5\" />}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        <div className={cn(CARD, 'flex-1 p-6')}>\n          <h3 className=\"text-lg font-bold text-[var(--gm-text-primary)] mb-4\">{activeSectionData?.display}</h3>\n          <div className=\"text-sm text-[var(--gm-text-tertiary)] whitespace-pre-line leading-relaxed\">\n            {analysisReport[activeSection] || `Content for \"${activeSectionData?.display}\" — run analysis to populate.`}\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\n// ==================== EDIT ====================\n\nfunction CompanyEdit({ company, onBack, onTemplates, onUpdated }: {\n  company: Company; onBack: () => void; onTemplates: () => void; onUpdated?: (c: Company) => void;\n}) {\n  const companyQuery = useCompany(company.id);\n  const fullCompany = companyQuery.data?.company || company;\n\n  const [name, setName] = useState(company.name);\n  const [description, setDescription] = useState(company.description || '');\n  const [logoUrl, setLogoUrl] = useState(company.logo_url || '');\n  const [website, setWebsite] = useState(company.website || company.website_url || '');\n  const [linkedin, setLinkedin] = useState(company.linkedin || company.linkedin_url || '');\n  const [primaryColor, setPrimaryColor] = useState(fullCompany.brand_assets?.primary_color || '');\n  const [secondaryColor, setSecondaryColor] = useState(fullCompany.brand_assets?.secondary_color || '');\n  const [aiContext, setAiContext] = useState(fullCompany.brand_assets?.ai_context || '');\n  const updateCompany = useUpdateCompany();\n  const analyzeCompany = useAnalyzeCompany();\n\n  useEffect(() => {\n    if (companyQuery.data?.company) {\n      const c = companyQuery.data.company;\n      setPrimaryColor(c.brand_assets?.primary_color || '');\n      setSecondaryColor(c.brand_assets?.secondary_color || '');\n      setAiContext(c.brand_assets?.ai_context || '');\n      if (c.logo_url) setLogoUrl(c.logo_url);\n    }\n  }, [companyQuery.data]);\n\n  const handleSave = async () => {\n    if (!name.trim()) { toast.error('Name is required'); return; }\n    const urlPattern = /^https?:\\/\\//;\n    if (website.trim() && !urlPattern.test(website.trim())) {\n      toast.error('Website must start with http:// or https://');\n      return;\n    }\n    if (linkedin.trim() && !urlPattern.test(linkedin.trim())) {\n      toast.error('LinkedIn URL must start with http:// or https://');\n      return;\n    }\n    try {\n      const brand_assets = {\n        ...(fullCompany.brand_assets || {}),\n        primary_color: primaryColor || undefined,\n        secondary_color: secondaryColor || undefined,\n        ai_context: aiContext || undefined,\n      };\n      const result = await updateCompany.mutateAsync({\n        id: company.id, name, description, logo_url: logoUrl,\n        website_url: website, linkedin_url: linkedin, brand_assets,\n      } as any);\n      toast.success('Company updated');\n      if (onUpdated && result?.company) onUpdated(result.company);\n      onBack();\n    } catch (err: any) {\n      toast.error(err.message || 'Failed to save');\n    }\n  };\n\n  const handleAnalyze = async () => {\n    toast.info(`Analyzing ${company.name}...`);\n    try {\n      await analyzeCompany.mutateAsync(company.id);\n      toast.success('Analysis complete');\n      companyQuery.refetch();\n    } catch (err: any) {\n      toast.error(err.message || 'Analysis failed');\n    }\n  };\n\n  const analyzedAt = fullCompany.brand_assets?.analyzed_at;\n\n  return (\n    <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"space-y-4\">\n      <button onClick={onBack} className=\"flex items-center gap-1.5 text-sm text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors\">\n        <ArrowLeft className=\"w-4 h-4\" /> Back to Companies\n      </button>\n\n      <div className={cn(CARD, 'p-5')}>\n        <h2 className=\"text-lg font-bold text-[var(--gm-text-primary)] mb-5\">Edit {company.name}</h2>\n\n        <div className=\"flex gap-8\">\n          <div className=\"flex-shrink-0\">\n            <label className={cn(LABEL, 'mb-3')}>Company Logo</label>\n            <AvatarUpload\n              currentUrl={logoUrl || undefined}\n              name={company.name}\n              uploadEndpoint={`/api/companies/${company.id}/logo`}\n              deleteEndpoint={`/api/companies/${company.id}/logo`}\n              onUploaded={(url) => { setLogoUrl(url); }}\n              onRemoved={() => { setLogoUrl(''); }}\n              onUrlChange={(url) => { setLogoUrl(url); }}\n              size=\"xl\"\n              showUrlInput={true}\n            />\n          </div>\n\n          <div className=\"flex-1 max-w-lg space-y-5\">\n            <div>\n              <label className={LABEL}>Name *</label>\n              <Input value={name} onChange={e => setName(e.target.value)} className={INPUT} />\n            </div>\n            <div>\n              <label className={LABEL}>Description</label>\n              <textarea value={description} onChange={e => setDescription(e.target.value)} rows={3} className={cn(INPUT, 'resize-y')} />\n            </div>\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <label className={LABEL}><Globe className=\"w-3 h-3\" /> Website</label>\n                <Input value={website} onChange={e => setWebsite(e.target.value)} placeholder=\"https://...\" className={INPUT} />\n              </div>\n              <div>\n                <label className={LABEL}><ExternalLink className=\"w-3 h-3\" /> LinkedIn</label>\n                <Input value={linkedin} onChange={e => setLinkedin(e.target.value)} placeholder=\"https://linkedin.com/company/...\" className={INPUT} />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Brand Colors & AI Section */}\n        <div className=\"mt-8 pt-5 border-t border-[var(--gm-border-primary)]\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className={cn(SECTION_TITLE, 'text-sm')}>Brand & AI Analysis</h3>\n            <div className=\"flex items-center gap-3\">\n              {analyzedAt && (\n                <span className=\"text-[10px] text-[var(--gm-text-tertiary)]\">\n                  Last analyzed: {new Date(analyzedAt).toLocaleDateString()}\n                </span>\n              )}\n              <button onClick={handleAnalyze} disabled={analyzeCompany.isPending} className={cn(BTN_SECONDARY, 'text-xs')}>\n                {analyzeCompany.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Zap className=\"w-3.5 h-3.5\" />}\n                {analyzedAt ? 'Re-analyze' : 'Analyze with AI'}\n              </button>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-4 max-w-lg\">\n            <div>\n              <label className={LABEL}><Palette className=\"w-3 h-3\" /> Primary Color</label>\n              <div className=\"flex items-center gap-2\">\n                <input type=\"color\" value={primaryColor || '#1a1a2e'} onChange={e => setPrimaryColor(e.target.value)}\n                  className=\"w-8 h-8 rounded border border-[var(--gm-border-primary)] cursor-pointer bg-transparent\" />\n                <Input value={primaryColor} onChange={e => setPrimaryColor(e.target.value)} placeholder=\"#1a1a2e\" className={cn(INPUT, 'font-mono text-xs flex-1')} />\n              </div>\n            </div>\n            <div>\n              <label className={LABEL}><Palette className=\"w-3 h-3\" /> Secondary Color</label>\n              <div className=\"flex items-center gap-2\">\n                <input type=\"color\" value={secondaryColor || '#16213e'} onChange={e => setSecondaryColor(e.target.value)}\n                  className=\"w-8 h-8 rounded border border-[var(--gm-border-primary)] cursor-pointer bg-transparent\" />\n                <Input value={secondaryColor} onChange={e => setSecondaryColor(e.target.value)} placeholder=\"#16213e\" className={cn(INPUT, 'font-mono text-xs flex-1')} />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"mt-4 max-w-lg\">\n            <label className={LABEL}><Sparkles className=\"w-3 h-3\" /> AI Brand Context</label>\n            <textarea value={aiContext} onChange={e => setAiContext(e.target.value)} rows={2}\n              placeholder=\"AI-generated brand summary (auto-filled on analysis)\" className={cn(INPUT, 'resize-y text-xs')} />\n          </div>\n\n          {(primaryColor || secondaryColor) && (\n            <div className=\"mt-4 flex items-center gap-3\">\n              <span className=\"text-[10px] text-[var(--gm-text-tertiary)]\">Brand preview:</span>\n              <div className=\"flex gap-1.5 items-center\">\n                {primaryColor && (\n                  <div className=\"flex items-center gap-1\">\n                    <div className=\"w-6 h-6 rounded-md shadow-sm border border-[var(--gm-border-primary)]\" style={{ backgroundColor: primaryColor }} />\n                    <span className=\"text-[10px] font-mono text-[var(--gm-text-tertiary)]\">{primaryColor}</span>\n                  </div>\n                )}\n                {secondaryColor && (\n                  <div className=\"flex items-center gap-1 ml-2\">\n                    <div className=\"w-6 h-6 rounded-md shadow-sm border border-[var(--gm-border-primary)]\" style={{ backgroundColor: secondaryColor }} />\n                    <span className=\"text-[10px] font-mono text-[var(--gm-text-tertiary)]\">{secondaryColor}</span>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n\n        <div className=\"mt-6 border-t border-[var(--gm-border-primary)] pt-4 flex justify-center gap-2\">\n          <button onClick={handleSave} disabled={updateCompany.isPending} className={cn(BTN_PRIMARY, 'px-5 py-2.5 text-sm')}>\n            {updateCompany.isPending ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Check className=\"w-4 h-4\" />}\n            {updateCompany.isPending ? 'Saving...' : 'Save'}\n          </button>\n          <button onClick={onBack} className={cn(BTN_SECONDARY, 'px-5 py-2.5 text-sm')}>Cancel</button>\n        </div>\n\n        <div className=\"mt-8 pt-5 border-t border-[var(--gm-border-primary)]\">\n          <h3 className={cn(SECTION_TITLE, 'text-sm mb-3')}>Documents</h3>\n          <button onClick={onTemplates} className={cn(BTN_SECONDARY, 'px-4 py-2 text-sm')}>\n            <FileText className=\"w-4 h-4\" /> Templates (A4 / PPT)\n          </button>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\n// ==================== TEMPLATES ====================\n\nfunction CompanyTemplates({ company, onBack }: { company: Company; onBack: () => void }) {\n  const companyQuery = useCompany(company.id);\n  const fullCompany = companyQuery.data?.company || company;\n\n  const [templateType, setTemplateType] = useState<'a4' | 'ppt'>('a4');\n  const [codeTab, setCodeTab] = useState<'code' | 'theme'>('code');\n  const [templateCode, setTemplateCode] = useState('');\n  const [loadingTemplate, setLoadingTemplate] = useState(false);\n  const [generating, setGenerating] = useState(false);\n  const [saving, setSaving] = useState(false);\n  const [resetting, setResetting] = useState(false);\n  const [selectedStyle, setSelectedStyle] = useState('corporate');\n  const [showStylePicker, setShowStylePicker] = useState(false);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const iframeRef = useRef<HTMLIFrameElement>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const editorWrapperRef = useRef<HTMLDivElement>(null);\n\n  const [themePrimary, setThemePrimary] = useState(fullCompany.brand_assets?.primary_color || '#1a1a2e');\n  const [themeSecondary, setThemeSecondary] = useState(fullCompany.brand_assets?.secondary_color || '#16213e');\n  const [themeFont, setThemeFont] = useState(\"'Segoe UI', Roboto, Helvetica, Arial, sans-serif\");\n\n  useEffect(() => {\n    if (companyQuery.data?.company?.brand_assets) {\n      const ba = companyQuery.data.company.brand_assets;\n      if (ba.primary_color) setThemePrimary(ba.primary_color);\n      if (ba.secondary_color) setThemeSecondary(ba.secondary_color);\n    }\n  }, [companyQuery.data]);\n\n  const loadTemplate = async () => {\n    setLoadingTemplate(true);\n    try {\n      const data = await apiClient.get<{ html: string }>(`/api/companies/${company.id}/templates/${templateType}`);\n      setTemplateCode(data.html || `<!-- No ${templateType} template yet -->`);\n      toast.success('Template loaded');\n    } catch {\n      setTemplateCode(`<!-- No ${templateType} template found -->`);\n    } finally {\n      setLoadingTemplate(false);\n    }\n  };\n\n  const handleGenerate = async () => {\n    setGenerating(true);\n    setShowStylePicker(false);\n    try {\n      const data = await apiClient.post<{ html: string }>(`/api/companies/${company.id}/templates/generate`, {\n        type: templateType, style: selectedStyle,\n      });\n      setTemplateCode(data.html || templateCode);\n      toast.success('Template generated');\n    } catch (err: any) {\n      toast.error(err.message || 'Generation failed');\n    } finally {\n      setGenerating(false);\n    }\n  };\n\n  const handleSave = async () => {\n    setSaving(true);\n    try {\n      await apiClient.put(`/api/companies/${company.id}/templates/${templateType}`, { html: templateCode });\n      toast.success('Template saved');\n    } catch (err: any) {\n      toast.error(err.message || 'Failed to save');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleResetToDefault = async () => {\n    setResetting(true);\n    try {\n      const data = await apiClient.post<{ html: string }>(`/api/companies/${company.id}/templates/${templateType}/reset`);\n      setTemplateCode(data.html || '');\n      toast.success('Template reset to default');\n    } catch (err: any) {\n      toast.error(err.message || 'Failed to reset');\n    } finally {\n      setResetting(false);\n    }\n  };\n\n  const handleExportHtml = () => {\n    if (!templateCode) { toast.error('No template to export'); return; }\n    const filled = fillPlaceholders(templateCode, fullCompany);\n    downloadHtmlFile(filled, `${company.name}-${templateType}-template.html`);\n    toast.success('Template exported');\n  };\n\n  const handleExportRaw = () => {\n    if (!templateCode) { toast.error('No template to export'); return; }\n    downloadHtmlFile(templateCode, `${company.name}-${templateType}-template-raw.html`);\n    toast.success('Raw template exported');\n  };\n\n  const handleImportHtml = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    if (!file.name.endsWith('.html') && !file.name.endsWith('.htm')) {\n      toast.error('Please select an HTML file');\n      return;\n    }\n    const reader = new FileReader();\n    reader.onload = (ev) => {\n      const content = ev.target?.result as string;\n      if (content) {\n        setTemplateCode(content);\n        toast.success('Template imported from file');\n      }\n    };\n    reader.readAsText(file);\n    e.target.value = '';\n  };\n\n  const handlePrintPreview = () => {\n    if (!previewHtml) { toast.error('No template to preview'); return; }\n    openHtmlForPdf(previewHtml);\n  };\n\n  useEffect(() => { loadTemplate(); }, [templateType]);\n\n  // Ctrl+S keyboard shortcut\n  useEffect(() => {\n    const handler = (e: KeyboardEvent) => {\n      if ((e.ctrlKey || e.metaKey) && e.key === 's') {\n        e.preventDefault();\n        if (!saving) handleSave();\n      }\n    };\n    window.addEventListener('keydown', handler);\n    return () => window.removeEventListener('keydown', handler);\n  }, [templateCode, saving]);\n\n  // Escape to exit fullscreen\n  useEffect(() => {\n    if (!isFullscreen) return;\n    const handler = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') setIsFullscreen(false);\n    };\n    window.addEventListener('keydown', handler);\n    return () => window.removeEventListener('keydown', handler);\n  }, [isFullscreen]);\n\n  const previewHtml = useMemo(() => {\n    if (!templateCode || templateCode.startsWith('<!--')) return '';\n    return fillPlaceholders(templateCode, fullCompany);\n  }, [templateCode, fullCompany]);\n\n  const missingPlaceholders = useMemo(() => getMissingPlaceholders(templateCode), [templateCode]);\n  const usedPlaceholders = useMemo(() => getUsedPlaceholders(templateCode), [templateCode]);\n\n  const applyThemeToCode = useCallback(() => {\n    let code = templateCode;\n    code = code.replace(/(--primary:\\s*)([^;]+)(;)/g, `$1${themePrimary}$3`);\n    code = code.replace(/(--secondary:\\s*)([^;]+)(;)/g, `$1${themeSecondary}$3`);\n    code = code.replace(/(font-family:\\s*)([^;]+)(;)/g, `$1${themeFont}$3`);\n    setTemplateCode(code);\n    toast.success('Theme applied to code');\n  }, [templateCode, themePrimary, themeSecondary, themeFont]);\n\n  const highlightCode = useCallback((code: string) => {\n    return Prism.highlight(code, Prism.languages.markup, 'markup');\n  }, []);\n\n  const editorHeight = isFullscreen ? 'calc(100vh - 120px)' : '500px';\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }} animate={{ opacity: 1 }}\n      className={cn('space-y-4', isFullscreen && 'fixed inset-0 z-50 bg-[var(--gm-bg-primary)] p-6 overflow-auto')}\n    >\n      <input ref={fileInputRef} type=\"file\" accept=\".html,.htm\" onChange={handleImportHtml} className=\"hidden\" />\n\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-3\">\n          <button onClick={onBack} className=\"flex items-center gap-1.5 text-sm text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors\">\n            <ArrowLeft className=\"w-4 h-4\" /> Back to Edit\n          </button>\n          <div>\n            <h1 className=\"text-2xl font-bold text-[var(--gm-text-primary)]\">{company.name} – Templates</h1>\n            <p className=\"text-sm text-[var(--gm-text-tertiary)]\">Manage document templates for this company</p>\n          </div>\n        </div>\n        <button onClick={() => setIsFullscreen(!isFullscreen)}\n          className=\"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)] transition-colors\">\n          {isFullscreen ? <Minimize2 className=\"w-4 h-4\" /> : <Maximize2 className=\"w-4 h-4\" />}\n          {isFullscreen ? 'Exit fullscreen' : 'Fullscreen'}\n        </button>\n      </div>\n\n      {/* Toolbar */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex gap-1\">\n          {(['a4', 'ppt'] as const).map(t => (\n            <button key={t} onClick={() => setTemplateType(t)}\n              className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\n                templateType === t ? 'bg-[var(--gm-interactive-primary)]/10 text-[var(--gm-accent-primary)]' : 'text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)]'\n              }`}>\n              {t === 'a4' ? 'A4 document' : 'Presentation'}\n            </button>\n          ))}\n        </div>\n        <div className=\"flex gap-2 flex-wrap\">\n          <button onClick={loadTemplate} disabled={loadingTemplate}\n            className={cn(BTN_SECONDARY, 'px-3 py-1.5 text-xs disabled:opacity-50')}>\n            {loadingTemplate ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <RotateCcw className=\"w-3.5 h-3.5\" />}\n            Reload\n          </button>\n\n          <button onClick={handleResetToDefault} disabled={resetting}\n            className={cn(BTN_SECONDARY, 'px-3 py-1.5 text-xs disabled:opacity-50')}>\n            {resetting ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <RefreshCw className=\"w-3.5 h-3.5\" />}\n            Reset default\n          </button>\n\n          {/* Import / Export */}\n          <button onClick={() => fileInputRef.current?.click()} className={cn(BTN_SECONDARY, 'px-3 py-1.5 text-xs')}>\n            <Upload className=\"w-3.5 h-3.5\" /> Import\n          </button>\n          <button onClick={handleExportRaw} className={cn(BTN_SECONDARY, 'px-3 py-1.5 text-xs')}>\n            <Download className=\"w-3.5 h-3.5\" /> Export\n          </button>\n\n          {/* AI Generate */}\n          <div className=\"relative\">\n            <button onClick={() => setShowStylePicker(!showStylePicker)} disabled={generating}\n              className={cn(BTN_PRIMARY, 'px-3 py-1.5 text-xs')}>\n              {generating ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Sparkles className=\"w-3.5 h-3.5\" />}\n              {generating ? 'Generating...' : 'Generate AI'}\n            </button>\n            {showStylePicker && !generating && (\n              <div className={cn(CARD, 'absolute right-0 top-full mt-1 z-50 p-3 w-72 shadow-lg')}>\n                <p className=\"text-xs font-semibold text-[var(--gm-text-primary)] mb-2\">Choose a style</p>\n                <div className=\"space-y-1.5\">\n                  {STYLE_OPTIONS.map(opt => (\n                    <button key={opt.value} onClick={() => setSelectedStyle(opt.value)}\n                      className={cn('w-full text-left px-3 py-2 rounded-lg text-sm transition-colors',\n                        selectedStyle === opt.value\n                          ? 'bg-[var(--gm-interactive-primary)]/10 text-[var(--gm-accent-primary)]'\n                          : 'text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)]'\n                      )}>\n                      <span className=\"font-medium\">{opt.label}</span>\n                      <span className=\"block text-[10px] opacity-70\">{opt.desc}</span>\n                    </button>\n                  ))}\n                </div>\n                <button onClick={handleGenerate} className={cn(BTN_PRIMARY, 'w-full mt-3 py-2 text-sm justify-center')}>\n                  <Sparkles className=\"w-4 h-4\" /> Generate\n                </button>\n              </div>\n            )}\n          </div>\n\n          <button onClick={handleSave} disabled={saving} className={cn(BTN_PRIMARY, 'px-3 py-1.5 text-xs')}>\n            {saving ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Save className=\"w-3.5 h-3.5\" />}\n            Save\n          </button>\n        </div>\n      </div>\n\n      {/* Placeholder validation */}\n      {missingPlaceholders.length > 0 && templateCode.length > 20 && (\n        <div className=\"flex items-start gap-2 px-4 py-3 rounded-lg bg-[var(--color-warning-500)]/10 border border-[var(--color-warning-500)]/20\">\n          <AlertTriangle className=\"w-4 h-4 text-[var(--color-warning-500)] flex-shrink-0 mt-0.5\" />\n          <div className=\"text-xs text-[var(--gm-text-secondary)]\">\n            <span className=\"font-medium\">Missing required placeholders: </span>\n            {missingPlaceholders.map(p => (\n              <code key={p} className=\"mx-1 px-1.5 py-0.5 rounded bg-[var(--gm-bg-tertiary)] text-[10px] font-mono\">{p}</code>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {usedPlaceholders.length > 0 && (\n        <div className=\"flex items-center gap-2 text-[10px] text-[var(--gm-text-tertiary)]\">\n          <span>Placeholders:</span>\n          {usedPlaceholders.map(p => (\n            <code key={p} className=\"px-1.5 py-0.5 rounded bg-[var(--gm-accent-primary)]/10 text-[var(--gm-accent-primary)] font-mono\">{p}</code>\n          ))}\n          <span className=\"ml-auto text-[var(--gm-text-tertiary)]\">Ctrl+S to save</span>\n        </div>\n      )}\n\n      {/* Editor + Preview */}\n      <div className=\"flex gap-4\" onClick={() => showStylePicker && setShowStylePicker(false)}>\n        <div className=\"flex-1 min-w-0\" ref={editorWrapperRef}>\n          <div className=\"flex border-b border-[var(--gm-border-primary)] mb-2\">\n            {(['code', 'theme'] as const).map(tab => (\n              <button key={tab} onClick={() => setCodeTab(tab)}\n                className={`flex items-center gap-1.5 px-3 py-2 text-sm border-b-2 transition-colors ${\n                  codeTab === tab ? 'text-[var(--gm-accent-primary)] border-[var(--gm-accent-primary)]' : 'text-[var(--gm-text-tertiary)] border-transparent'\n                }`}>\n                {tab === 'code' ? <Code2 className=\"w-3.5 h-3.5\" /> : <Palette className=\"w-3.5 h-3.5\" />}\n                {tab === 'code' ? 'Code' : 'Theme'}\n              </button>\n            ))}\n          </div>\n\n          {codeTab === 'code' ? (\n            <div className=\"border border-[var(--gm-border-primary)] rounded-lg overflow-hidden bg-white\">\n              <div className=\"overflow-auto\" style={{ height: editorHeight }}>\n                <Editor\n                  value={templateCode}\n                  onValueChange={setTemplateCode}\n                  highlight={highlightCode}\n                  padding={16}\n                  style={{\n                    fontFamily: \"'Fira Code', 'Consolas', monospace\",\n                    fontSize: 12,\n                    lineHeight: '1.5',\n                    minHeight: editorHeight,\n                  }}\n                  textareaClassName=\"focus:outline-none\"\n                />\n              </div>\n            </div>\n          ) : (\n            <div className={cn(CARD, 'p-5 space-y-5')} style={{ minHeight: editorHeight }}>\n              <h4 className=\"text-sm font-semibold text-[var(--gm-text-primary)]\">Visual Theme Editor</h4>\n              <p className=\"text-xs text-[var(--gm-text-tertiary)]\">Adjust colors and fonts, then apply to update the template code.</p>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className={LABEL}><Palette className=\"w-3 h-3\" /> Primary Color</label>\n                  <div className=\"flex items-center gap-2\">\n                    <input type=\"color\" value={themePrimary} onChange={e => setThemePrimary(e.target.value)}\n                      className=\"w-10 h-10 rounded-lg border border-[var(--gm-border-primary)] cursor-pointer bg-transparent p-0.5\" />\n                    <Input value={themePrimary} onChange={e => setThemePrimary(e.target.value)} className={cn(INPUT, 'font-mono text-xs')} />\n                  </div>\n                </div>\n                <div>\n                  <label className={LABEL}><Palette className=\"w-3 h-3\" /> Secondary Color</label>\n                  <div className=\"flex items-center gap-2\">\n                    <input type=\"color\" value={themeSecondary} onChange={e => setThemeSecondary(e.target.value)}\n                      className=\"w-10 h-10 rounded-lg border border-[var(--gm-border-primary)] cursor-pointer bg-transparent p-0.5\" />\n                    <Input value={themeSecondary} onChange={e => setThemeSecondary(e.target.value)} className={cn(INPUT, 'font-mono text-xs')} />\n                  </div>\n                </div>\n              </div>\n\n              <div>\n                <label className={LABEL}><Type className=\"w-3 h-3\" /> Font Family</label>\n                <select value={themeFont} onChange={e => setThemeFont(e.target.value)} className={cn(INPUT, 'cursor-pointer')}>\n                  {FONT_OPTIONS.map(f => <option key={f.value} value={f.value}>{f.label}</option>)}\n                </select>\n              </div>\n\n              <div>\n                <label className={cn(LABEL, 'mb-2')}>Preview</label>\n                <div className=\"flex gap-2 items-stretch h-16 rounded-lg overflow-hidden border border-[var(--gm-border-primary)]\">\n                  <div className=\"flex-1 flex items-center justify-center text-white text-xs font-semibold\"\n                    style={{ backgroundColor: themePrimary, fontFamily: themeFont }}>Primary</div>\n                  <div className=\"flex-1 flex items-center justify-center text-white text-xs font-semibold\"\n                    style={{ backgroundColor: themeSecondary, fontFamily: themeFont }}>Secondary</div>\n                  <div className=\"flex-1 flex items-center justify-center text-sm bg-white border-l border-[var(--gm-border-primary)]\"\n                    style={{ fontFamily: themeFont, color: themePrimary }}>Body Text</div>\n                </div>\n              </div>\n\n              <button onClick={applyThemeToCode} className={cn(BTN_PRIMARY, 'px-5 py-2.5 text-sm')}>\n                <Check className=\"w-4 h-4\" /> Apply theme to template code\n              </button>\n            </div>\n          )}\n        </div>\n\n        {/* Live Preview panel */}\n        <div className={cn('flex-shrink-0', isFullscreen ? 'w-[45%]' : 'w-[360px]')}>\n          <div className=\"flex items-center justify-between mb-2\">\n            <p className={SECTION_TITLE}>Live Preview</p>\n            <div className=\"flex gap-1\">\n              <button onClick={handlePrintPreview} disabled={!previewHtml}\n                className=\"flex items-center gap-1 px-2 py-1 rounded text-[10px] font-medium text-[var(--gm-text-tertiary)] hover:text-[var(--gm-accent-primary)] hover:bg-[var(--gm-surface-hover)] transition-colors disabled:opacity-30\">\n                <Printer className=\"w-3 h-3\" /> Print / PDF\n              </button>\n              <button onClick={handleExportHtml} disabled={!previewHtml}\n                className=\"flex items-center gap-1 px-2 py-1 rounded text-[10px] font-medium text-[var(--gm-text-tertiary)] hover:text-[var(--gm-accent-primary)] hover:bg-[var(--gm-surface-hover)] transition-colors disabled:opacity-30\">\n                <Download className=\"w-3 h-3\" /> Download\n              </button>\n            </div>\n          </div>\n          <div className=\"border border-[var(--gm-border-primary)] rounded-lg overflow-hidden bg-white\"\n            style={{ height: isFullscreen ? 'calc(100vh - 200px)' : '520px' }}>\n            {previewHtml ? (\n              <iframe\n                ref={iframeRef}\n                srcDoc={previewHtml}\n                title=\"Template Preview\"\n                className=\"w-full h-full border-0\"\n                sandbox=\"allow-same-origin\"\n                style={{\n                  transform: templateType === 'a4' ? 'scale(0.35)' : 'scale(0.3)',\n                  transformOrigin: 'top left',\n                  width: templateType === 'a4' ? '210mm' : '297mm',\n                  height: templateType === 'a4' ? '297mm' : '210mm',\n                }}\n              />\n            ) : (\n              <div className=\"h-full flex items-center justify-center text-sm text-[var(--gm-text-tertiary)]\">\n                <div className=\"text-center\">\n                  <FileText className=\"w-8 h-8 mx-auto mb-2 opacity-30\" />\n                  <p>No template to preview</p>\n                  <p className=\"text-[10px] mt-1\">Load or generate a template</p>\n                </div>\n              </div>\n            )}\n          </div>\n          <div className=\"mt-2 text-[10px] text-[var(--gm-text-tertiary)] text-center\">\n            {templateType === 'a4' ? '210mm x 297mm (A4 Portrait)' : '297mm x 210mm (A4 Landscape)'}\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n\nexport default CompaniesPage;\n"],"names":["__iconNode","CodeXml","createLucideIcon","Palette","RotateCcw","__assign","this","t","s","i","n","p","__createBinding","o","m","k","k2","desc","__setModuleDefault","v","__importStar","mod","result","__rest","e","lib","React","require$$0","KEYCODE_Y","KEYCODE_Z","KEYCODE_M","KEYCODE_PARENS","KEYCODE_BRACKETS","KEYCODE_QUOTE","KEYCODE_BACK_QUOTE","HISTORY_LIMIT","HISTORY_TIME_GAP","isWindows","isMacLike","className","cssText","Editor","props","ref","autoFocus","disabled","form","highlight","_a","ignoreTabKey","_b","insertSpaces","maxLength","minLength","name","onBlur","onClick","onFocus","onKeyDown","onKeyUp","onValueChange","_c","padding","placeholder","preClassName","readOnly","required","style","_d","tabSize","textareaClassName","textareaId","value","rest","historyRef","inputRef","_e","capture","setCapture","contentStyle","highlighted","getLines","text","position","recordChange","record","overwrite","stack","offset","count","extras","timestamp","last","re","previous","current","recordCurrentState","input","selectionStart","selectionEnd","updateInput","applyEdits","undoEdit","redoEdit","handleKeyDown","tabCharacter","linesBeforeCaret","startLine_1","endLine_1","nextValue","line","startLineText","startLine_2","endLine_2","updatedSelection","hasSelection","textBeforeCaret","matches","indent","chars","prev","handleChange","session","styles","c","CARD","INPUT","BTN_PRIMARY","BTN_SECONDARY","BTN_DANGER","SECTION_TITLE","LABEL","reportSections","TEMPLATE_PLACEHOLDERS","REQUIRED_PLACEHOLDERS","STYLE_OPTIONS","FONT_OPTIONS","getMissingPlaceholders","html","getUsedPlaceholders","fillPlaceholders","company","ba","openHtmlForPdf","blob","url","win","downloadHtmlFile","filename","a","CompaniesPage","pageView","setPageView","useState","selectedCompany","setSelectedCompany","companiesQuery","useCompanies","openView","view","backToList","jsxs","ErrorState","jsx","CompanyList","CompanyView","CompanyEdit","CompanyTemplates","companies","loading","onView","onEdit","onTemplates","newName","setNewName","deleteTarget","setDeleteTarget","createCompany","useCreateCompany","deleteCompany","useDeleteCompany","analyzeCompany","useAnalyzeCompany","handleCreate","toast","err","handleAnalyze","handleDeleteConfirm","motion","AlertDialog","open","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","Input","cn","Loader2","Plus","Eye","Edit2","FileText","Zap","Trash2","onBack","companyQuery","useCompany","fullCompany","activeSection","setActiveSection","analysisReport","handleReanalyze","activeSectionData","ArrowLeft","Globe","ExternalLink","RefreshCw","section","ChevronRight","onUpdated","setName","description","setDescription","logoUrl","setLogoUrl","website","setWebsite","linkedin","setLinkedin","primaryColor","setPrimaryColor","secondaryColor","setSecondaryColor","aiContext","setAiContext","updateCompany","useUpdateCompany","useEffect","handleSave","urlPattern","brand_assets","analyzedAt","AvatarUpload","Sparkles","Check","templateType","setTemplateType","codeTab","setCodeTab","templateCode","setTemplateCode","loadingTemplate","setLoadingTemplate","generating","setGenerating","saving","setSaving","resetting","setResetting","selectedStyle","setSelectedStyle","showStylePicker","setShowStylePicker","isFullscreen","setIsFullscreen","iframeRef","useRef","fileInputRef","editorWrapperRef","themePrimary","setThemePrimary","themeSecondary","setThemeSecondary","themeFont","setThemeFont","loadTemplate","data","apiClient","handleGenerate","handleResetToDefault","handleExportHtml","filled","handleExportRaw","handleImportHtml","file","reader","ev","content","handlePrintPreview","previewHtml","handler","useMemo","missingPlaceholders","usedPlaceholders","applyThemeToCode","useCallback","code","highlightCode","Prism","editorHeight","Minimize2","Maximize2","Upload","Download","opt","Save","AlertTriangle","tab","Code2","Type","f","Printer"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}