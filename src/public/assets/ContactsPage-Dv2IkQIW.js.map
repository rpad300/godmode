{"version":3,"file":"ContactsPage-Dv2IkQIW.js","sources":["../../../node_modules/lucide-react/dist/esm/icons/file-spreadsheet.js","../../../node_modules/lucide-react/dist/esm/icons/linkedin.js","../../../node_modules/lucide-react/dist/esm/icons/map-pin.js","../../../node_modules/lucide-react/dist/esm/icons/phone.js","../../../node_modules/lucide-react/dist/esm/icons/sticky-note.js","../../../node_modules/@radix-ui/react-label/node_modules/@radix-ui/react-primitive/dist/index.mjs","../../../node_modules/@radix-ui/react-label/dist/index.mjs","../../../node_modules/class-variance-authority/dist/index.mjs","../../frontend/src/components/ui/label.tsx","../../frontend/src/components/ui/textarea.tsx","../../frontend/src/components/contacts/ContactForm.tsx","../../../node_modules/@radix-ui/react-roving-focus/dist/index.mjs","../../../node_modules/@radix-ui/react-tabs/dist/index.mjs","../../frontend/src/components/ui/tabs.tsx","../../frontend/src/components/contacts/ContactDetailModal.tsx","../../frontend/src/pages/ContactsPage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z\",\n      key: \"1oefj6\"\n    }\n  ],\n  [\"path\", { d: \"M14 2v5a1 1 0 0 0 1 1h5\", key: \"wfsgrz\" }],\n  [\"path\", { d: \"M8 13h2\", key: \"yr2amv\" }],\n  [\"path\", { d: \"M14 13h2\", key: \"un5t4a\" }],\n  [\"path\", { d: \"M8 17h2\", key: \"2yhykz\" }],\n  [\"path\", { d: \"M14 17h2\", key: \"10kma7\" }]\n];\nconst FileSpreadsheet = createLucideIcon(\"file-spreadsheet\", __iconNode);\n\nexport { __iconNode, FileSpreadsheet as default };\n//# sourceMappingURL=file-spreadsheet.js.map\n","/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z\",\n      key: \"c2jq9f\"\n    }\n  ],\n  [\"rect\", { width: \"4\", height: \"12\", x: \"2\", y: \"9\", key: \"mk3on5\" }],\n  [\"circle\", { cx: \"4\", cy: \"4\", r: \"2\", key: \"bt5ra8\" }]\n];\nconst Linkedin = createLucideIcon(\"linkedin\", __iconNode);\n\nexport { __iconNode, Linkedin as default };\n//# sourceMappingURL=linkedin.js.map\n","/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0\",\n      key: \"1r0f0z\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"10\", r: \"3\", key: \"ilqhr7\" }]\n];\nconst MapPin = createLucideIcon(\"map-pin\", __iconNode);\n\nexport { __iconNode, MapPin as default };\n//# sourceMappingURL=map-pin.js.map\n","/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384\",\n      key: \"9njp5v\"\n    }\n  ]\n];\nconst Phone = createLucideIcon(\"phone\", __iconNode);\n\nexport { __iconNode, Phone as default };\n//# sourceMappingURL=phone.js.map\n","/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z\",\n      key: \"1dfntj\"\n    }\n  ],\n  [\"path\", { d: \"M15 3v5a1 1 0 0 0 1 1h5\", key: \"6s6qgf\" }]\n];\nconst StickyNote = createLucideIcon(\"sticky-note\", __iconNode);\n\nexport { __iconNode, StickyNote as default };\n//# sourceMappingURL=sticky-note.js.map\n","// src/primitive.tsx\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { createSlot } from \"@radix-ui/react-slot\";\nimport { jsx } from \"react/jsx-runtime\";\nvar NODES = [\n  \"a\",\n  \"button\",\n  \"div\",\n  \"form\",\n  \"h2\",\n  \"h3\",\n  \"img\",\n  \"input\",\n  \"label\",\n  \"li\",\n  \"nav\",\n  \"ol\",\n  \"p\",\n  \"select\",\n  \"span\",\n  \"svg\",\n  \"ul\"\n];\nvar Primitive = NODES.reduce((primitive, node) => {\n  const Slot = createSlot(`Primitive.${node}`);\n  const Node = React.forwardRef((props, forwardedRef) => {\n    const { asChild, ...primitiveProps } = props;\n    const Comp = asChild ? Slot : node;\n    if (typeof window !== \"undefined\") {\n      window[Symbol.for(\"radix-ui\")] = true;\n    }\n    return /* @__PURE__ */ jsx(Comp, { ...primitiveProps, ref: forwardedRef });\n  });\n  Node.displayName = `Primitive.${node}`;\n  return { ...primitive, [node]: Node };\n}, {});\nfunction dispatchDiscreteCustomEvent(target, event) {\n  if (target) ReactDOM.flushSync(() => target.dispatchEvent(event));\n}\nvar Root = Primitive;\nexport {\n  Primitive,\n  Root,\n  dispatchDiscreteCustomEvent\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\";\n\n// src/label.tsx\nimport * as React from \"react\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx } from \"react/jsx-runtime\";\nvar NAME = \"Label\";\nvar Label = React.forwardRef((props, forwardedRef) => {\n  return /* @__PURE__ */ jsx(\n    Primitive.label,\n    {\n      ...props,\n      ref: forwardedRef,\n      onMouseDown: (event) => {\n        const target = event.target;\n        if (target.closest(\"button, input, select, textarea\")) return;\n        props.onMouseDown?.(event);\n        if (!event.defaultPrevented && event.detail > 1) event.preventDefault();\n      }\n    }\n  );\n});\nLabel.displayName = NAME;\nvar Root = Label;\nexport {\n  Label,\n  Root\n};\n//# sourceMappingURL=index.mjs.map\n","/**\n * Copyright 2022 Joe Bell. All rights reserved.\n *\n * This file is licensed to you under the Apache License, Version 2.0\n * (the \"License\"); you may not use this file except in compliance with the\n * License. You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR REPRESENTATIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations under\n * the License.\n */ import { clsx } from \"clsx\";\nconst falsyToString = (value)=>typeof value === \"boolean\" ? `${value}` : value === 0 ? \"0\" : value;\nexport const cx = clsx;\nexport const cva = (base, config)=>(props)=>{\n        var _config_compoundVariants;\n        if ((config === null || config === void 0 ? void 0 : config.variants) == null) return cx(base, props === null || props === void 0 ? void 0 : props.class, props === null || props === void 0 ? void 0 : props.className);\n        const { variants, defaultVariants } = config;\n        const getVariantClassNames = Object.keys(variants).map((variant)=>{\n            const variantProp = props === null || props === void 0 ? void 0 : props[variant];\n            const defaultVariantProp = defaultVariants === null || defaultVariants === void 0 ? void 0 : defaultVariants[variant];\n            if (variantProp === null) return null;\n            const variantKey = falsyToString(variantProp) || falsyToString(defaultVariantProp);\n            return variants[variant][variantKey];\n        });\n        const propsWithoutUndefined = props && Object.entries(props).reduce((acc, param)=>{\n            let [key, value] = param;\n            if (value === undefined) {\n                return acc;\n            }\n            acc[key] = value;\n            return acc;\n        }, {});\n        const getCompoundVariantClassNames = config === null || config === void 0 ? void 0 : (_config_compoundVariants = config.compoundVariants) === null || _config_compoundVariants === void 0 ? void 0 : _config_compoundVariants.reduce((acc, param)=>{\n            let { class: cvClass, className: cvClassName, ...compoundVariantOptions } = param;\n            return Object.entries(compoundVariantOptions).every((param)=>{\n                let [key, value] = param;\n                return Array.isArray(value) ? value.includes({\n                    ...defaultVariants,\n                    ...propsWithoutUndefined\n                }[key]) : ({\n                    ...defaultVariants,\n                    ...propsWithoutUndefined\n                })[key] === value;\n            }) ? [\n                ...acc,\n                cvClass,\n                cvClassName\n            ] : acc;\n        }, []);\n        return cx(base, getVariantClassNames, getCompoundVariantClassNames, props === null || props === void 0 ? void 0 : props.class, props === null || props === void 0 ? void 0 : props.className);\n    };\n\n","import * as React from \"react\";\r\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\r\nimport { cva, type VariantProps } from \"class-variance-authority\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst labelVariants = cva(\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\");\r\n\r\nconst Label = React.forwardRef<\r\n  React.ElementRef<typeof LabelPrimitive.Root>,\r\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> & VariantProps<typeof labelVariants>\r\n>(({ className, ...props }, ref) => (\r\n  <LabelPrimitive.Root ref={ref} className={cn(labelVariants(), className)} {...props} />\r\n));\r\nLabel.displayName = LabelPrimitive.Root.displayName;\r\n\r\nexport { Label };\r\n","import * as React from \"react\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nexport interface TextareaProps extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\r\n\r\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(({ className, ...props }, ref) => {\r\n  return (\r\n    <textarea\r\n      className={cn(\r\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\r\n        className,\r\n      )}\r\n      ref={ref}\r\n      {...props}\r\n    />\r\n  );\r\n});\r\nTextarea.displayName = \"Textarea\";\r\n\r\nexport { Textarea };\r\n","/**\r\n * Purpose:\r\n *   Reusable form component for creating or editing a contact, with\r\n *   dynamically loaded role templates, timezone options, and company names.\r\n *\r\n * Responsibilities:\r\n *   - Fetches role templates, timezones, and companies from the API on\r\n *     mount to populate Select dropdowns\r\n *   - Pre-fills all fields when editing an existing contact\r\n *   - Alias management: add/remove alternative names with Enter-key\r\n *     shortcut\r\n *   - Field sub-component for consistent icon+label+input rendering\r\n *   - Validates that name and role are non-empty before submission\r\n *\r\n * Key dependencies:\r\n *   - apiClient: fetches /api/role-templates, /api/timezones,\r\n *     /api/contacts/metadata/companies\r\n *   - Contact (godmode types): contact data shape\r\n *\r\n * Side effects:\r\n *   - Network: three GET requests on mount for metadata\r\n *\r\n * Notes:\r\n *   - The useEffect that fetches metadata and sets form state from the\r\n *     contact prop has `[contact]` as its dependency, meaning metadata\r\n *     will be re-fetched when the contact changes. Consider separating\r\n *     the metadata fetch (run once) from the form initialization.\r\n *   - Organization field defaults to \"Unknown\" when empty on submit.\r\n */\r\nimport { useState, useEffect } from 'react';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Plus, Save, User, Briefcase, Mail, Phone, Building2, Linkedin, MapPin, Clock, Image, StickyNote } from 'lucide-react';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { cn, resolveAvatarUrl } from \"@/lib/utils\";\r\nimport { apiClient } from '@/lib/api-client';\r\nimport type { Contact } from '@/types/godmode';\r\n\r\ninterface ContactFormProps {\r\n  contact?: Contact | null;\r\n  onSubmit: (data: Omit<Contact, 'id' | 'mentionCount'>) => void;\r\n  onCancel: () => void;\r\n  mode: 'add' | 'edit';\r\n}\r\n\r\ninterface RoleTemplate {\r\n  id: string;\r\n  display_name: string;\r\n  name: string;\r\n}\r\n\r\ninterface Timezone {\r\n  id: string;\r\n  name: string;\r\n  code: string;\r\n}\r\n\r\ninterface Company {\r\n  id: string;\r\n  name: string;\r\n}\r\n\r\nconst ContactForm = ({ contact, onSubmit, onCancel, mode }: ContactFormProps) => {\r\n  const [form, setForm] = useState({\r\n    name: '',\r\n    role: '',\r\n    organization: '',\r\n    email: '',\r\n    phone: '',\r\n    linkedin: '',\r\n    avatarUrl: '',\r\n    department: '',\r\n    location: '',\r\n    timezone: '',\r\n    notes: '',\r\n    aliases: [] as string[],\r\n  });\r\n  const [newAlias, setNewAlias] = useState('');\r\n\r\n  // Data sources\r\n  const [roleTemplates, setRoleTemplates] = useState<RoleTemplate[]>([]);\r\n  const [timezones, setTimezones] = useState<Timezone[]>([]);\r\n  const [companies, setCompanies] = useState<Company[]>([]);\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const [rolesData, timezonesData, companiesData] = await Promise.all([\r\n          apiClient.get<{ roles: RoleTemplate[] }>('/api/role-templates'),\r\n          apiClient.get<{ timezones: Timezone[] }>('/api/timezones'),\r\n          apiClient.get<{ companies: Company[] }>('/api/contacts/metadata/companies')\r\n        ]);\r\n\r\n        // Handle different response structures if needed\r\n        // Handle different response structures if needed\r\n        const roles = rolesData.roles || [];\r\n        const tzs = timezonesData.timezones || [];\r\n        const comps = companiesData.companies || [];\r\n\r\n        setRoleTemplates(roles);\r\n        setTimezones(tzs);\r\n        setCompanies(comps);\r\n      } catch (err) {\r\n        console.error('Failed to load metadata', err);\r\n      }\r\n    };\r\n    fetchData();\r\n\r\n    if (contact) {\r\n      setForm({\r\n        name: contact.name,\r\n        role: contact.role,\r\n        organization: contact.organization,\r\n        email: contact.email || '',\r\n        phone: contact.phone || '',\r\n        linkedin: contact.linkedin || '',\r\n        avatarUrl: resolveAvatarUrl(contact as any) || '',\r\n        department: contact.department || '',\r\n        location: contact.location || '',\r\n        timezone: contact.timezone || '',\r\n        notes: contact.notes || '',\r\n        aliases: contact.aliases || [],\r\n      });\r\n    }\r\n  }, [contact]);\r\n\r\n  const handleSubmit = () => {\r\n    if (!form.name.trim() || !form.role.trim()) return;\r\n    onSubmit({\r\n      name: form.name.trim(),\r\n      role: form.role.trim(),\r\n      organization: form.organization.trim() || 'Unknown',\r\n      email: form.email.trim() || undefined,\r\n      phone: form.phone.trim() || undefined,\r\n      linkedin: form.linkedin.trim() || undefined,\r\n      avatarUrl: form.avatarUrl.trim() || undefined,\r\n      department: form.department.trim() || undefined,\r\n      location: form.location.trim() || undefined,\r\n      timezone: form.timezone.trim() || undefined,\r\n      notes: form.notes.trim() || undefined,\r\n      aliases: form.aliases,\r\n    });\r\n  };\r\n\r\n  const update = (field: string, value: any) =>\r\n    setForm(prev => ({ ...prev, [field]: value }));\r\n\r\n  const addAlias = () => {\r\n    if (newAlias.trim() && !form.aliases.includes(newAlias.trim())) {\r\n      setForm(prev => ({ ...prev, aliases: [...prev.aliases, newAlias.trim()] }));\r\n      setNewAlias('');\r\n    }\r\n  };\r\n\r\n  const removeAlias = (alias: string) => {\r\n    setForm(prev => ({ ...prev, aliases: prev.aliases.filter(a => a !== alias) }));\r\n  };\r\n\r\n  const Field = ({ icon: Icon, label, id, placeholder, value, type = 'text', required = false }: {\r\n    icon: React.ElementType; label: string; id: string; placeholder: string; value: string; type?: string; required?: boolean;\r\n  }) => (\r\n    <div>\r\n      <Label htmlFor={id} className=\"flex items-center gap-1.5 text-xs text-muted-foreground mb-1.5\">\r\n        <Icon className=\"w-3.5 h-3.5\" /> {label} {required && '*'}\r\n      </Label>\r\n      <Input id={id} type={type} placeholder={placeholder} value={value} onChange={e => update(id, e.target.value)} />\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"space-y-4 mt-2\">\r\n      <div className=\"grid grid-cols-2 gap-x-4 gap-y-3\">\r\n        <div className=\"col-span-2 sm:col-span-1\">\r\n          <Field icon={User} label=\"Name\" id=\"name\" placeholder=\"Full name\" value={form.name} required />\r\n        </div>\r\n\r\n        {/* Role Selection */}\r\n        <div className=\"col-span-2 sm:col-span-1\">\r\n          <Label className=\"flex items-center gap-1.5 text-xs text-muted-foreground mb-1.5\">\r\n            <Briefcase className=\"w-3.5 h-3.5\" /> Role *\r\n          </Label>\r\n          <Select\r\n            value={form.role}\r\n            onValueChange={(val) => update('role', val)}\r\n          >\r\n            <SelectTrigger className=\"w-full\">\r\n              <SelectValue placeholder=\"Select role...\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {roleTemplates\r\n                .filter(r => r && (r.name || r.display_name))\r\n                .map((role) => (\r\n                  <SelectItem\r\n                    key={role.id || role.name}\r\n                    value={role.display_name || role.name || \"Unknown\"}\r\n                  >\r\n                    {role.display_name || role.name || \"Unknown Role\"}\r\n                  </SelectItem>\r\n                ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n\r\n        <Field icon={Mail} label=\"Email\" id=\"email\" placeholder=\"email@example.com\" value={form.email} type=\"email\" />\r\n        <Field icon={Phone} label=\"Phone\" id=\"phone\" placeholder=\"+351 900 000 000\" value={form.phone} type=\"tel\" />\r\n\r\n        {/* Organization Selection */}\r\n        <div className=\"col-span-2 sm:col-span-1\">\r\n          <Label className=\"flex items-center gap-1.5 text-xs text-muted-foreground mb-1.5\">\r\n            <Building2 className=\"w-3.5 h-3.5\" /> Organization\r\n          </Label>\r\n          <Select\r\n            value={form.organization}\r\n            onValueChange={(val) => update('organization', val)}\r\n          >\r\n            <SelectTrigger className=\"w-full\">\r\n              <SelectValue placeholder=\"Select organization...\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {companies\r\n                .filter(c => c && c.name)\r\n                .map((company) => (\r\n                  <SelectItem\r\n                    key={company.id || company.name}\r\n                    value={company.name || \"Unknown\"}\r\n                  >\r\n                    {company.name || \"Unknown Company\"}\r\n                  </SelectItem>\r\n                ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n\r\n        <Field icon={Linkedin} label=\"LinkedIn\" id=\"linkedin\" placeholder=\"https://linkedin.com/in/...\" value={form.linkedin} />\r\n\r\n        {/* Aliases Section */}\r\n        <div className=\"col-span-2\">\r\n          <Label className=\"flex items-center gap-1.5 text-xs text-muted-foreground mb-1.5\">\r\n            <User className=\"w-3.5 h-3.5\" /> Aliases\r\n          </Label>\r\n          <div className=\"flex gap-2 mb-2\">\r\n            <Input\r\n              value={newAlias}\r\n              onChange={e => setNewAlias(e.target.value)}\r\n              placeholder=\"Add alias (e.g. nickname, alternate name)\"\r\n              onKeyDown={e => e.key === 'Enter' && (e.preventDefault(), addAlias())}\r\n            />\r\n            <Button type=\"button\" size=\"sm\" onClick={addAlias} variant=\"secondary\">Add</Button>\r\n          </div>\r\n          {form.aliases.length > 0 && (\r\n            <div className=\"flex flex-wrap gap-2\">\r\n              {form.aliases.map(alias => (\r\n                <span key={alias} className=\"inline-flex items-center gap-1 px-2 py-1 rounded bg-secondary text-xs\">\r\n                  {alias}\r\n                  <button onClick={() => removeAlias(alias)} className=\"hover:text-destructive\">&times;</button>\r\n                </span>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"col-span-2\">\r\n          <Field icon={Image} label=\"Avatar URL\" id=\"avatarUrl\" placeholder=\"https://...\" value={form.avatarUrl} />\r\n          {!form.avatarUrl && (\r\n            <p className=\"text-[10px] text-muted-foreground mt-1\">Enter a URL to set the contact's profile picture</p>\r\n          )}\r\n        </div>\r\n        <Field icon={Briefcase} label=\"Department\" id=\"department\" placeholder=\"Engineering, Sales, etc.\" value={form.department} />\r\n        <Field icon={MapPin} label=\"Location\" id=\"location\" placeholder=\"e.g. Lisbon, Portugal\" value={form.location} />\r\n\r\n        {/* Timezone Selection */}\r\n        <div className=\"col-span-2 sm:col-span-1\">\r\n          <Label className=\"flex items-center gap-1.5 text-xs text-muted-foreground mb-1.5\">\r\n            <Clock className=\"w-3.5 h-3.5\" /> Timezone\r\n          </Label>\r\n          <Select\r\n            value={form.timezone}\r\n            onValueChange={(val) => update('timezone', val)}\r\n          >\r\n            <SelectTrigger className=\"w-full\">\r\n              <SelectValue placeholder=\"Select timezone...\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {timezones\r\n                .filter(tz => tz && tz.name)\r\n                .map((tz) => (\r\n                  <SelectItem\r\n                    key={tz.id || tz.code || tz.name}\r\n                    value={tz.code || tz.name}\r\n                  >\r\n                    {tz.name || \"Unknown Timezone\"} ({tz.code})\r\n                  </SelectItem>\r\n                ))}\r\n            </SelectContent>\r\n          </Select>\r\n        </div>\r\n\r\n        <div className=\"col-span-2\">\r\n          <Label htmlFor=\"notes\" className=\"flex items-center gap-1.5 text-xs text-muted-foreground mb-1.5\">\r\n            <StickyNote className=\"w-3.5 h-3.5\" /> Notes\r\n          </Label>\r\n          <Textarea id=\"notes\" placeholder=\"Additional notes...\" value={form.notes} onChange={e => update('notes', e.target.value)} rows={2} />\r\n        </div>\r\n      </div>\r\n      <div className=\"flex gap-2 pt-1\">\r\n        <Button variant=\"outline\" onClick={onCancel} className=\"flex-1\">Cancel</Button>\r\n        <Button onClick={handleSubmit} disabled={!form.name.trim() || !form.role.trim()} className=\"flex-1 gap-1.5\">\r\n          {mode === 'add' ? <><Plus className=\"w-4 h-4\" /> Add Contact</> : <><Save className=\"w-4 h-4\" /> Save Changes</>}\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ContactForm;\r\n","\"use client\";\n\n// src/roving-focus-group.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { createCollection } from \"@radix-ui/react-collection\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useId } from \"@radix-ui/react-id\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { useCallbackRef } from \"@radix-ui/react-use-callback-ref\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { useDirection } from \"@radix-ui/react-direction\";\nimport { jsx } from \"react/jsx-runtime\";\nvar ENTRY_FOCUS = \"rovingFocusGroup.onEntryFocus\";\nvar EVENT_OPTIONS = { bubbles: false, cancelable: true };\nvar GROUP_NAME = \"RovingFocusGroup\";\nvar [Collection, useCollection, createCollectionScope] = createCollection(GROUP_NAME);\nvar [createRovingFocusGroupContext, createRovingFocusGroupScope] = createContextScope(\n  GROUP_NAME,\n  [createCollectionScope]\n);\nvar [RovingFocusProvider, useRovingFocusContext] = createRovingFocusGroupContext(GROUP_NAME);\nvar RovingFocusGroup = React.forwardRef(\n  (props, forwardedRef) => {\n    return /* @__PURE__ */ jsx(Collection.Provider, { scope: props.__scopeRovingFocusGroup, children: /* @__PURE__ */ jsx(Collection.Slot, { scope: props.__scopeRovingFocusGroup, children: /* @__PURE__ */ jsx(RovingFocusGroupImpl, { ...props, ref: forwardedRef }) }) });\n  }\n);\nRovingFocusGroup.displayName = GROUP_NAME;\nvar RovingFocusGroupImpl = React.forwardRef((props, forwardedRef) => {\n  const {\n    __scopeRovingFocusGroup,\n    orientation,\n    loop = false,\n    dir,\n    currentTabStopId: currentTabStopIdProp,\n    defaultCurrentTabStopId,\n    onCurrentTabStopIdChange,\n    onEntryFocus,\n    preventScrollOnEntryFocus = false,\n    ...groupProps\n  } = props;\n  const ref = React.useRef(null);\n  const composedRefs = useComposedRefs(forwardedRef, ref);\n  const direction = useDirection(dir);\n  const [currentTabStopId, setCurrentTabStopId] = useControllableState({\n    prop: currentTabStopIdProp,\n    defaultProp: defaultCurrentTabStopId ?? null,\n    onChange: onCurrentTabStopIdChange,\n    caller: GROUP_NAME\n  });\n  const [isTabbingBackOut, setIsTabbingBackOut] = React.useState(false);\n  const handleEntryFocus = useCallbackRef(onEntryFocus);\n  const getItems = useCollection(__scopeRovingFocusGroup);\n  const isClickFocusRef = React.useRef(false);\n  const [focusableItemsCount, setFocusableItemsCount] = React.useState(0);\n  React.useEffect(() => {\n    const node = ref.current;\n    if (node) {\n      node.addEventListener(ENTRY_FOCUS, handleEntryFocus);\n      return () => node.removeEventListener(ENTRY_FOCUS, handleEntryFocus);\n    }\n  }, [handleEntryFocus]);\n  return /* @__PURE__ */ jsx(\n    RovingFocusProvider,\n    {\n      scope: __scopeRovingFocusGroup,\n      orientation,\n      dir: direction,\n      loop,\n      currentTabStopId,\n      onItemFocus: React.useCallback(\n        (tabStopId) => setCurrentTabStopId(tabStopId),\n        [setCurrentTabStopId]\n      ),\n      onItemShiftTab: React.useCallback(() => setIsTabbingBackOut(true), []),\n      onFocusableItemAdd: React.useCallback(\n        () => setFocusableItemsCount((prevCount) => prevCount + 1),\n        []\n      ),\n      onFocusableItemRemove: React.useCallback(\n        () => setFocusableItemsCount((prevCount) => prevCount - 1),\n        []\n      ),\n      children: /* @__PURE__ */ jsx(\n        Primitive.div,\n        {\n          tabIndex: isTabbingBackOut || focusableItemsCount === 0 ? -1 : 0,\n          \"data-orientation\": orientation,\n          ...groupProps,\n          ref: composedRefs,\n          style: { outline: \"none\", ...props.style },\n          onMouseDown: composeEventHandlers(props.onMouseDown, () => {\n            isClickFocusRef.current = true;\n          }),\n          onFocus: composeEventHandlers(props.onFocus, (event) => {\n            const isKeyboardFocus = !isClickFocusRef.current;\n            if (event.target === event.currentTarget && isKeyboardFocus && !isTabbingBackOut) {\n              const entryFocusEvent = new CustomEvent(ENTRY_FOCUS, EVENT_OPTIONS);\n              event.currentTarget.dispatchEvent(entryFocusEvent);\n              if (!entryFocusEvent.defaultPrevented) {\n                const items = getItems().filter((item) => item.focusable);\n                const activeItem = items.find((item) => item.active);\n                const currentItem = items.find((item) => item.id === currentTabStopId);\n                const candidateItems = [activeItem, currentItem, ...items].filter(\n                  Boolean\n                );\n                const candidateNodes = candidateItems.map((item) => item.ref.current);\n                focusFirst(candidateNodes, preventScrollOnEntryFocus);\n              }\n            }\n            isClickFocusRef.current = false;\n          }),\n          onBlur: composeEventHandlers(props.onBlur, () => setIsTabbingBackOut(false))\n        }\n      )\n    }\n  );\n});\nvar ITEM_NAME = \"RovingFocusGroupItem\";\nvar RovingFocusGroupItem = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeRovingFocusGroup,\n      focusable = true,\n      active = false,\n      tabStopId,\n      children,\n      ...itemProps\n    } = props;\n    const autoId = useId();\n    const id = tabStopId || autoId;\n    const context = useRovingFocusContext(ITEM_NAME, __scopeRovingFocusGroup);\n    const isCurrentTabStop = context.currentTabStopId === id;\n    const getItems = useCollection(__scopeRovingFocusGroup);\n    const { onFocusableItemAdd, onFocusableItemRemove, currentTabStopId } = context;\n    React.useEffect(() => {\n      if (focusable) {\n        onFocusableItemAdd();\n        return () => onFocusableItemRemove();\n      }\n    }, [focusable, onFocusableItemAdd, onFocusableItemRemove]);\n    return /* @__PURE__ */ jsx(\n      Collection.ItemSlot,\n      {\n        scope: __scopeRovingFocusGroup,\n        id,\n        focusable,\n        active,\n        children: /* @__PURE__ */ jsx(\n          Primitive.span,\n          {\n            tabIndex: isCurrentTabStop ? 0 : -1,\n            \"data-orientation\": context.orientation,\n            ...itemProps,\n            ref: forwardedRef,\n            onMouseDown: composeEventHandlers(props.onMouseDown, (event) => {\n              if (!focusable) event.preventDefault();\n              else context.onItemFocus(id);\n            }),\n            onFocus: composeEventHandlers(props.onFocus, () => context.onItemFocus(id)),\n            onKeyDown: composeEventHandlers(props.onKeyDown, (event) => {\n              if (event.key === \"Tab\" && event.shiftKey) {\n                context.onItemShiftTab();\n                return;\n              }\n              if (event.target !== event.currentTarget) return;\n              const focusIntent = getFocusIntent(event, context.orientation, context.dir);\n              if (focusIntent !== void 0) {\n                if (event.metaKey || event.ctrlKey || event.altKey || event.shiftKey) return;\n                event.preventDefault();\n                const items = getItems().filter((item) => item.focusable);\n                let candidateNodes = items.map((item) => item.ref.current);\n                if (focusIntent === \"last\") candidateNodes.reverse();\n                else if (focusIntent === \"prev\" || focusIntent === \"next\") {\n                  if (focusIntent === \"prev\") candidateNodes.reverse();\n                  const currentIndex = candidateNodes.indexOf(event.currentTarget);\n                  candidateNodes = context.loop ? wrapArray(candidateNodes, currentIndex + 1) : candidateNodes.slice(currentIndex + 1);\n                }\n                setTimeout(() => focusFirst(candidateNodes));\n              }\n            }),\n            children: typeof children === \"function\" ? children({ isCurrentTabStop, hasTabStop: currentTabStopId != null }) : children\n          }\n        )\n      }\n    );\n  }\n);\nRovingFocusGroupItem.displayName = ITEM_NAME;\nvar MAP_KEY_TO_FOCUS_INTENT = {\n  ArrowLeft: \"prev\",\n  ArrowUp: \"prev\",\n  ArrowRight: \"next\",\n  ArrowDown: \"next\",\n  PageUp: \"first\",\n  Home: \"first\",\n  PageDown: \"last\",\n  End: \"last\"\n};\nfunction getDirectionAwareKey(key, dir) {\n  if (dir !== \"rtl\") return key;\n  return key === \"ArrowLeft\" ? \"ArrowRight\" : key === \"ArrowRight\" ? \"ArrowLeft\" : key;\n}\nfunction getFocusIntent(event, orientation, dir) {\n  const key = getDirectionAwareKey(event.key, dir);\n  if (orientation === \"vertical\" && [\"ArrowLeft\", \"ArrowRight\"].includes(key)) return void 0;\n  if (orientation === \"horizontal\" && [\"ArrowUp\", \"ArrowDown\"].includes(key)) return void 0;\n  return MAP_KEY_TO_FOCUS_INTENT[key];\n}\nfunction focusFirst(candidates, preventScroll = false) {\n  const PREVIOUSLY_FOCUSED_ELEMENT = document.activeElement;\n  for (const candidate of candidates) {\n    if (candidate === PREVIOUSLY_FOCUSED_ELEMENT) return;\n    candidate.focus({ preventScroll });\n    if (document.activeElement !== PREVIOUSLY_FOCUSED_ELEMENT) return;\n  }\n}\nfunction wrapArray(array, startIndex) {\n  return array.map((_, index) => array[(startIndex + index) % array.length]);\n}\nvar Root = RovingFocusGroup;\nvar Item = RovingFocusGroupItem;\nexport {\n  Item,\n  Root,\n  RovingFocusGroup,\n  RovingFocusGroupItem,\n  createRovingFocusGroupScope\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\";\n\n// src/tabs.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { createRovingFocusGroupScope } from \"@radix-ui/react-roving-focus\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport * as RovingFocusGroup from \"@radix-ui/react-roving-focus\";\nimport { useDirection } from \"@radix-ui/react-direction\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { useId } from \"@radix-ui/react-id\";\nimport { jsx } from \"react/jsx-runtime\";\nvar TABS_NAME = \"Tabs\";\nvar [createTabsContext, createTabsScope] = createContextScope(TABS_NAME, [\n  createRovingFocusGroupScope\n]);\nvar useRovingFocusGroupScope = createRovingFocusGroupScope();\nvar [TabsProvider, useTabsContext] = createTabsContext(TABS_NAME);\nvar Tabs = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeTabs,\n      value: valueProp,\n      onValueChange,\n      defaultValue,\n      orientation = \"horizontal\",\n      dir,\n      activationMode = \"automatic\",\n      ...tabsProps\n    } = props;\n    const direction = useDirection(dir);\n    const [value, setValue] = useControllableState({\n      prop: valueProp,\n      onChange: onValueChange,\n      defaultProp: defaultValue ?? \"\",\n      caller: TABS_NAME\n    });\n    return /* @__PURE__ */ jsx(\n      TabsProvider,\n      {\n        scope: __scopeTabs,\n        baseId: useId(),\n        value,\n        onValueChange: setValue,\n        orientation,\n        dir: direction,\n        activationMode,\n        children: /* @__PURE__ */ jsx(\n          Primitive.div,\n          {\n            dir: direction,\n            \"data-orientation\": orientation,\n            ...tabsProps,\n            ref: forwardedRef\n          }\n        )\n      }\n    );\n  }\n);\nTabs.displayName = TABS_NAME;\nvar TAB_LIST_NAME = \"TabsList\";\nvar TabsList = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTabs, loop = true, ...listProps } = props;\n    const context = useTabsContext(TAB_LIST_NAME, __scopeTabs);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeTabs);\n    return /* @__PURE__ */ jsx(\n      RovingFocusGroup.Root,\n      {\n        asChild: true,\n        ...rovingFocusGroupScope,\n        orientation: context.orientation,\n        dir: context.dir,\n        loop,\n        children: /* @__PURE__ */ jsx(\n          Primitive.div,\n          {\n            role: \"tablist\",\n            \"aria-orientation\": context.orientation,\n            ...listProps,\n            ref: forwardedRef\n          }\n        )\n      }\n    );\n  }\n);\nTabsList.displayName = TAB_LIST_NAME;\nvar TRIGGER_NAME = \"TabsTrigger\";\nvar TabsTrigger = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTabs, value, disabled = false, ...triggerProps } = props;\n    const context = useTabsContext(TRIGGER_NAME, __scopeTabs);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeTabs);\n    const triggerId = makeTriggerId(context.baseId, value);\n    const contentId = makeContentId(context.baseId, value);\n    const isSelected = value === context.value;\n    return /* @__PURE__ */ jsx(\n      RovingFocusGroup.Item,\n      {\n        asChild: true,\n        ...rovingFocusGroupScope,\n        focusable: !disabled,\n        active: isSelected,\n        children: /* @__PURE__ */ jsx(\n          Primitive.button,\n          {\n            type: \"button\",\n            role: \"tab\",\n            \"aria-selected\": isSelected,\n            \"aria-controls\": contentId,\n            \"data-state\": isSelected ? \"active\" : \"inactive\",\n            \"data-disabled\": disabled ? \"\" : void 0,\n            disabled,\n            id: triggerId,\n            ...triggerProps,\n            ref: forwardedRef,\n            onMouseDown: composeEventHandlers(props.onMouseDown, (event) => {\n              if (!disabled && event.button === 0 && event.ctrlKey === false) {\n                context.onValueChange(value);\n              } else {\n                event.preventDefault();\n              }\n            }),\n            onKeyDown: composeEventHandlers(props.onKeyDown, (event) => {\n              if ([\" \", \"Enter\"].includes(event.key)) context.onValueChange(value);\n            }),\n            onFocus: composeEventHandlers(props.onFocus, () => {\n              const isAutomaticActivation = context.activationMode !== \"manual\";\n              if (!isSelected && !disabled && isAutomaticActivation) {\n                context.onValueChange(value);\n              }\n            })\n          }\n        )\n      }\n    );\n  }\n);\nTabsTrigger.displayName = TRIGGER_NAME;\nvar CONTENT_NAME = \"TabsContent\";\nvar TabsContent = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTabs, value, forceMount, children, ...contentProps } = props;\n    const context = useTabsContext(CONTENT_NAME, __scopeTabs);\n    const triggerId = makeTriggerId(context.baseId, value);\n    const contentId = makeContentId(context.baseId, value);\n    const isSelected = value === context.value;\n    const isMountAnimationPreventedRef = React.useRef(isSelected);\n    React.useEffect(() => {\n      const rAF = requestAnimationFrame(() => isMountAnimationPreventedRef.current = false);\n      return () => cancelAnimationFrame(rAF);\n    }, []);\n    return /* @__PURE__ */ jsx(Presence, { present: forceMount || isSelected, children: ({ present }) => /* @__PURE__ */ jsx(\n      Primitive.div,\n      {\n        \"data-state\": isSelected ? \"active\" : \"inactive\",\n        \"data-orientation\": context.orientation,\n        role: \"tabpanel\",\n        \"aria-labelledby\": triggerId,\n        hidden: !present,\n        id: contentId,\n        tabIndex: 0,\n        ...contentProps,\n        ref: forwardedRef,\n        style: {\n          ...props.style,\n          animationDuration: isMountAnimationPreventedRef.current ? \"0s\" : void 0\n        },\n        children: present && children\n      }\n    ) });\n  }\n);\nTabsContent.displayName = CONTENT_NAME;\nfunction makeTriggerId(baseId, value) {\n  return `${baseId}-trigger-${value}`;\n}\nfunction makeContentId(baseId, value) {\n  return `${baseId}-content-${value}`;\n}\nvar Root2 = Tabs;\nvar List = TabsList;\nvar Trigger = TabsTrigger;\nvar Content = TabsContent;\nexport {\n  Content,\n  List,\n  Root2 as Root,\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n  Trigger,\n  createTabsScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\";\r\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\";\r\n\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nconst Tabs = TabsPrimitive.Root;\r\n\r\nconst TabsList = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.List>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.List\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nTabsList.displayName = TabsPrimitive.List.displayName;\r\n\r\nconst TabsTrigger = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Trigger\r\n    ref={ref}\r\n    className={cn(\r\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName;\r\n\r\nconst TabsContent = React.forwardRef<\r\n  React.ElementRef<typeof TabsPrimitive.Content>,\r\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\r\n>(({ className, ...props }, ref) => (\r\n  <TabsPrimitive.Content\r\n    ref={ref}\r\n    className={cn(\r\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\r\n      className,\r\n    )}\r\n    {...props}\r\n  />\r\n));\r\nTabsContent.displayName = TabsPrimitive.Content.displayName;\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent };\r\n","/**\n * Purpose:\n *   Multi-tab modal for viewing and managing a contact's full profile,\n *   including personal info, project assignments, inter-contact\n *   relationships, document mentions, and activity history.\n *\n * Responsibilities:\n *   - Info tab: displays contact metadata (email, phone, LinkedIn, org,\n *     department, location, timezone, notes, aliases) with gradient avatar\n *   - Projects tab: lists associated projects with role badges and\n *     \"primary\" toggle; supports assigning/unassigning projects via\n *     apiClient\n *   - Relations tab: shows directional relationships to other contacts\n *     with type and strength; supports creating new relationships\n *   - Mentions tab: lists documents/emails/transcripts that mention the\n *     contact, with type-specific icons and timestamps\n *   - Activity tab: chronological activity feed (conversations, emails,\n *     meetings, documents) with type-specific styling\n *   - Loads all data (projects, relationships, mentions, activity) on\n *     modal open via parallel API calls\n *\n * Key dependencies:\n *   - apiClient: REST calls for projects, relationships, mentions, activity\n *   - Dialog (shadcn/ui): modal container\n *   - Tabs (shadcn/ui): tab navigation within the modal\n *   - Contact, ContactRelationship, Project, ContactMention (godmode types)\n *\n * Side effects:\n *   - Network: fetches contact-related data on open; mutates project\n *     assignments and relationships\n *\n * Notes:\n *   - Avatar gradient is deterministically selected via a djb2 hash of\n *     the contact name.\n *   - The \"all contacts\" list for the relationship creator is fetched\n *     fresh on every modal open; consider caching.\n *   - Error handling is minimal (console.error only).\n */\nimport { useState, useEffect } from 'react';\nimport { User, FolderOpen, Users2, Clock, Building2, Mail, Phone, Linkedin, MapPin, Globe, Briefcase, StickyNote, CheckCircle2, AlertTriangle, Plus, Trash2, Sparkles, ArrowRight, ArrowLeft, MessageSquare, FileText, FileAudio, Loader2, X, Link2 as LinkIcon } from 'lucide-react';\nimport { Dialog, DialogContent, DialogTitle } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from '@/components/ui/tabs';\nimport { apiClient } from '@/lib/api-client';\nimport { toast } from 'sonner';\nimport { useEnrichContact, useDeleteRelationship, useUnlinkParticipant } from '@/hooks/useGodMode';\nimport type { Contact, ContactRelationship, Project, ContactMention } from '@/types/godmode';\nimport { CommentsPanel } from '../shared/CommentsPanel';\nimport { AvatarUpload } from '../shared/AvatarUpload';\nimport { getInitials, resolveAvatarUrl } from '../../lib/utils';\n\nconst avatarGradients = [\n  'from-rose-400 to-pink-500',\n  'from-violet-400 to-purple-500',\n  'from-blue-400 to-cyan-500',\n  'from-emerald-400 to-teal-500',\n  'from-amber-400 to-orange-500',\n  'from-fuchsia-400 to-pink-500',\n];\n\nconst getGradient = (name: string) => {\n  let hash = 0;\n  for (let i = 0; i < name.length; i++) hash = name.charCodeAt(i) + ((hash << 5) - hash);\n  return avatarGradients[Math.abs(hash) % avatarGradients.length];\n};\n\ninterface ContactDetailModalProps {\n  contact: Contact | null;\n  open: boolean;\n  onClose: () => void;\n  onEdit: (contact: Contact) => void;\n  onDelete: (contactId: string) => void;\n  onUpdateProjects?: (contactId: string, projectIds: string[], primaryProjectId: string | null) => void;\n}\n\nconst InfoRow = ({ icon: Icon, label, value }: { icon: React.ElementType; label: string; value?: string }) => {\n  if (!value) return null;\n  return (\n    <div className=\"grid grid-cols-2 gap-4 py-2.5 border-b border-white/10 last:border-0\">\n      <div className=\"flex items-center gap-2 text-sm text-slate-400\">\n        <Icon className=\"w-4 h-4 text-blue-400\" /> {label}\n      </div>\n      <p className=\"text-sm text-white break-all\">{value}</p>\n    </div>\n  );\n};\n\nconst ContactDetailModal = ({ contact, open, onClose, onEdit, onDelete, onUpdateProjects }: ContactDetailModalProps) => {\n  const [activeTab, setActiveTab] = useState('info');\n  const [loading, setLoading] = useState(false);\n\n  // Data State\n  const [projects, setProjects] = useState<Project[]>([]);\n  const [assignedProjectIds, setAssignedProjectIds] = useState<string[]>([]);\n  const [primaryProjectId, setPrimaryProjectId] = useState<string | null>(null);\n\n  const [relations, setRelations] = useState<ContactRelationship[]>([]);\n  const [activity, setActivity] = useState<any[]>([]);\n  const [mentions, setMentions] = useState<ContactMention[]>([]);\n  const [allContacts, setAllContacts] = useState<Contact[]>([]);\n\n  // Hooks\n  const enrichContact = useEnrichContact();\n  const deleteRelationship = useDeleteRelationship();\n  const unlinkParticipant = useUnlinkParticipant();\n\n  // UI State\n  const [showAddRelation, setShowAddRelation] = useState(false);\n  const [newRelTarget, setNewRelTarget] = useState('');\n  const [newRelType, setNewRelType] = useState('works_with');\n  const [mentionFilter, setMentionFilter] = useState<string | null>(null);\n  const [contactAvatarUrl, setContactAvatarUrl] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (contact && open) {\n      loadData();\n      setContactAvatarUrl(resolveAvatarUrl(contact as any));\n    }\n  }, [contact, open]);\n\n  const loadData = async () => {\n    if (!contact) return;\n    setLoading(true);\n    try {\n      // 1. Projects (all available)\n      // The API returns the list directly or wrapped? Usually wrapped for list endpoints, but let's check apiClient implementation or assume consistency with routes\n      // /api/projects -> usually returns { projects: [...] } or just [...]\n      // Looking at Contact routes, they return { projects: [...] }. Assuming /api/projects is similar.\n      // If /api/projects returns array directly (legacy), try that.\n      // Let's assume standardized response { ok: true, projects: [] } based on other routes seen.\n      // But verify_endpoints or similar might be needed if I'm unsure.\n      // Wait, handleProjects in routes.js usually follows the pattern.\n      // Safest to handle both or expect standard wrapper.\n      // Contact routes used `jsonResponse(res, { ok: true, projects })`.\n\n      const projectsData = await apiClient.get<any>('/api/projects');\n      setProjects(Array.isArray(projectsData) ? projectsData : (projectsData.projects || []));\n\n      // 2. Assigned Projects\n      const assignedData = await apiClient.get<{ projects: any[] }>(`/api/contacts/${contact.id}/projects`);\n      const assigned = assignedData.projects || [];\n      const assignedIds = assigned.map((p: any) => p.id); // Note: Route maps internal project_id to id\n      setAssignedProjectIds(assignedIds);\n      const primary = assigned.find((p: any) => p.is_primary);\n      setPrimaryProjectId(primary ? primary.id : (assignedIds[0] || null));\n\n      // 3. Relationships\n      const relsData = await apiClient.get<{ relationships: ContactRelationship[] }>(`/api/contacts/${contact.id}/relationships`);\n      setRelations(relsData.relationships || []);\n\n      // 4. Activity\n      const activityData = await apiClient.get<{ activities: any[] }>(`/api/contacts/${contact.id}/activity`);\n      setActivity(activityData.activities || []);\n\n      // 5. Mentions\n      try {\n        const mentionsData = await apiClient.get<{ mentions: ContactMention[] }>(`/api/contacts/${contact.id}/mentions`);\n        setMentions(mentionsData.mentions || []);\n      } catch (e) {\n        console.error(\"Error loading mentions\", e);\n      }\n\n      // 6. Contacts for dropdown\n      const contactsResp = await apiClient.get<{ contacts: Contact[] }>('/api/contacts');\n      const contactsList = contactsResp.contacts || [];\n      setAllContacts(contactsList.filter((c: Contact) => c.id !== contact.id));\n\n    } catch (err) {\n      console.error(\"Error loading contact details:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (!contact) return null;\n\n  const toggleProject = async (projectId: string) => {\n    const isAssigned = assignedProjectIds.includes(projectId);\n    try {\n      if (isAssigned) {\n        await apiClient.delete(`/api/contacts/${contact.id}/projects/${projectId}`);\n        setAssignedProjectIds(prev => prev.filter(id => id !== projectId));\n        if (primaryProjectId === projectId) setPrimaryProjectId(null);\n      } else {\n        await apiClient.post(`/api/contacts/${contact.id}/projects`, { projectId });\n        setAssignedProjectIds(prev => [...prev, projectId]);\n        if (!primaryProjectId) setPrimaryProjectId(projectId);\n      }\n      onUpdateProjects?.(contact.id, assignedProjectIds, primaryProjectId);\n    } catch (err) {\n      console.error(\"Error toggling project:\", err);\n    }\n  };\n\n  const setPrimary = async (projectId: string) => {\n    try {\n      // First ensure it's assigned\n      if (!assignedProjectIds.includes(projectId)) {\n        await apiClient.post(`/api/contacts/${contact.id}/projects`, { projectId, isPrimary: true });\n        setAssignedProjectIds(prev => [...prev, projectId]);\n      } else {\n        // Update existing to primary (implies backend logic to unset others, or just marking this one)\n        await apiClient.post(`/api/contacts/${contact.id}/projects`, { projectId, isPrimary: true });\n      }\n      setPrimaryProjectId(projectId);\n    } catch (err) {\n      console.error(\"Error setting primary project\", err);\n    }\n  };\n\n  const handleAddRelationship = async () => {\n    if (!newRelTarget) return;\n    try {\n      const targetContact = allContacts.find(c => c.id === newRelTarget);\n      if (!targetContact) return;\n\n      const response = await apiClient.post<{ relationship: ContactRelationship }>(`/api/contacts/${contact.id}/relationships`, {\n        toContactId: targetContact.id,\n        type: newRelType\n      });\n\n      const newRel = response.relationship;\n\n      // Optimistic update (or use backend response if complete)\n      setRelations(prev => [...prev, {\n        id: newRel.id,\n        type: newRelType,\n        direction: 'forward',\n        other_contact: {\n          id: targetContact.id,\n          name: targetContact.name,\n          role: targetContact.role,\n          avatarUrl: targetContact.avatarUrl\n        }\n      } as ContactRelationship]);\n\n      setNewRelTarget('');\n      setShowAddRelation(false);\n    } catch (err) {\n      console.error(\"Error adding relationship:\", err);\n    }\n  };\n\n\n  return (\n    <Dialog open={open} onOpenChange={(o) => !o && onClose()}>\n      <DialogContent className=\"max-w-2xl p-0 overflow-hidden\">\n        <DialogTitle className=\"sr-only\">Contact Details</DialogTitle>\n        {/* Header with gradient */}\n        <div className={`bg-gradient-to-r ${getGradient(contact.name)} p-6 pb-12 relative`}>\n          <button onClick={onClose} className=\"absolute top-3 right-3 text-white/80 hover:text-white transition-colors\">\n            <span className=\"sr-only\">Close</span>\n          </button>\n          <div className=\"absolute top-4 right-4 flex gap-2\">\n            <Button\n              variant=\"secondary\"\n              size=\"sm\"\n              className=\"gap-1.5 bg-white/20 text-white border-0 hover:bg-white/30 backdrop-blur-sm\"\n              disabled={enrichContact.isPending}\n              onClick={() => {\n                enrichContact.mutate(contact.id, {\n                  onSuccess: (data: any) => {\n                    toast.success('AI enrichment complete');\n                    if (data?.suggestions) {\n                      const s = data.suggestions;\n                      const fields: string[] = [];\n                      if (s.role) fields.push(`Role: ${s.role}`);\n                      if (s.department) fields.push(`Dept: ${s.department}`);\n                      if (s.tags) fields.push(`Tags: ${(s.tags as string[]).join(', ')}`);\n                      if (fields.length) toast.info(fields.join(' | '));\n                    }\n                    loadData();\n                  },\n                  onError: () => toast.error('Enrichment failed'),\n                });\n              }}\n            >\n              {enrichContact.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Sparkles className=\"w-3.5 h-3.5\" />} Enrich AI\n            </Button>\n            <Button variant=\"secondary\" size=\"sm\"\n              className=\"gap-1.5 bg-white/20 text-white border-0 hover:bg-white/30 backdrop-blur-sm\"\n              disabled={unlinkParticipant.isPending}\n              onClick={() => {\n                const name = contact.display_name || contact.name || '';\n                if (!name) { toast.error('No participant name to unlink'); return; }\n                unlinkParticipant.mutate(name, {\n                  onSuccess: () => toast.success(`Unlinked participant \"${name}\"`),\n                  onError: () => toast.error('Unlink failed'),\n                });\n              }}>\n              {unlinkParticipant.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <LinkIcon className=\"w-3.5 h-3.5\" />} Unlink\n            </Button>\n            <Button variant=\"secondary\" size=\"sm\" className=\"gap-1.5 bg-white/20 text-white border-0 hover:bg-white/30 backdrop-blur-sm\" onClick={() => onEdit(contact)}>\n              Edit\n            </Button>\n          </div>\n        </div>\n\n        {/* Avatar + Name overlapping header */}\n        <div className=\"px-6 -mt-10 relative z-10\">\n          <div className=\"flex items-end gap-4\">\n            <AvatarUpload\n              currentUrl={contactAvatarUrl}\n              name={contact.name}\n              uploadEndpoint={`/api/contacts/${contact.id}/avatar`}\n              deleteEndpoint={`/api/contacts/${contact.id}/avatar`}\n              onUploaded={(url) => { setContactAvatarUrl(url); loadData(); }}\n              onRemoved={() => { setContactAvatarUrl(null); loadData(); }}\n              size=\"md\"\n              showUrlInput={false}\n              className=\"!gap-0\"\n            />\n            <div className=\"pb-1\">\n              <h2 className=\"text-xl font-bold text-white\">{contact.name || '(unnamed)'}</h2>\n              <p className=\"text-sm text-slate-300\">\n                {contact.role || contact.cargo || ''}\n                {(contact.organization || contact.empresa) && `  ${contact.organization || contact.empresa}`}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"px-6 mt-4\">\n          <Tabs value={activeTab} onValueChange={setActiveTab}>\n            <TabsList className=\"w-full justify-start bg-transparent border-b border-white/10 rounded-none h-auto p-0 gap-0\">\n              {[\n                { id: 'info', label: 'Info', icon: User, count: undefined },\n                { id: 'projects', label: 'Projects', icon: FolderOpen, count: assignedProjectIds.length },\n                { id: 'relations', label: 'Relations', icon: Users2, count: relations.length },\n                { id: 'mentions', label: 'Mentions', icon: MessageSquare, count: mentions.length },\n                { id: 'activity', label: 'Activity', icon: Clock, count: activity.length > 0 ? activity.length : undefined },\n              ].map((tab) => (\n                <TabsTrigger\n                  key={tab.id}\n                  value={tab.id}\n                  className=\"rounded-none border-b-2 border-transparent data-[state=active]:border-blue-500 data-[state=active]:text-blue-400 data-[state=active]:shadow-none bg-transparent text-slate-400 hover:text-slate-200 px-4 py-2.5 text-sm gap-1.5\"\n                >\n                  <tab.icon className=\"w-3.5 h-3.5\" />\n                  {tab.label}\n                  {tab.count !== undefined && (\n                    <span className=\"ml-1 text-[10px] px-1.5 py-0.5 rounded-full bg-blue-500/10 text-blue-400 font-semibold\">\n                      {tab.count}\n                    </span>\n                  )}\n                </TabsTrigger>\n              ))}\n            </TabsList>\n\n            {/* Info Tab */}\n            <TabsContent value=\"info\" className=\"mt-4 pb-0\">\n              <div className=\"divide-y divide-white/10\">\n                <InfoRow icon={User} label=\"Name *\" value={contact.name} />\n                <InfoRow icon={Briefcase} label=\"Role\" value={contact.role} />\n                <InfoRow icon={Mail} label=\"Email\" value={contact.email} />\n                <InfoRow icon={Phone} label=\"Phone\" value={contact.phone} />\n                <InfoRow icon={Building2} label=\"Organization\" value={contact.organization} />\n                <InfoRow icon={Linkedin} label=\"LinkedIn\" value={contact.linkedin} />\n                <InfoRow icon={Briefcase} label=\"Department\" value={contact.department} />\n                <InfoRow icon={MapPin} label=\"Location\" value={contact.location} />\n                <InfoRow icon={Globe} label=\"Timezone\" value={contact.timezone} />\n                {contact.aliases && contact.aliases.length > 0 && (\n                  <div className=\"grid grid-cols-2 gap-4 py-2.5 border-b border-white/10 last:border-0\">\n                    <div className=\"flex items-center gap-2 text-sm text-slate-400\">\n                      <User className=\"w-4 h-4 text-blue-400\" /> Aliases\n                    </div>\n                    <div className=\"flex flex-wrap gap-1\">\n                      {contact.aliases.map(a => (\n                        <span key={a} className=\"text-xs px-1.5 py-0.5 bg-white/5 rounded text-slate-400\">{a}</span>\n                      ))}\n                    </div>\n                  </div>\n                )}\n                {contact.notes && <InfoRow icon={StickyNote} label=\"Notes\" value={contact.notes} />}\n              </div>\n            </TabsContent>\n\n            {/* Projects Tab */}\n            <TabsContent value=\"projects\" className=\"mt-4 pb-0\">\n              <div className=\"space-y-1 max-h-60 overflow-y-auto\">\n                {projects.map((p) => {\n                  const isAssigned = assignedProjectIds.includes(p.id);\n                  const isPrimary = primaryProjectId === p.id;\n                  return (\n                    <div key={p.id} className=\"flex items-center justify-between py-2.5 border-b border-white/10 last:border-0 hover:bg-white/5 px-2 rounded\">\n                      <div className=\"flex items-center gap-3 cursor-pointer flex-1\" onClick={() => toggleProject(p.id)}>\n                        <div className={`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${isAssigned ? 'border-blue-500 bg-blue-600' : 'border-white/20 hover:border-slate-400'}`}>\n                          {isAssigned && <CheckCircle2 className=\"w-3 h-3 text-white\" />}\n                        </div>\n                        <div className=\"flex flex-col\">\n                          <span className={`text-sm ${isAssigned ? 'text-white' : 'text-slate-400'}`}>{p.name}</span>\n                          {p.description && <span className=\"text-[10px] text-slate-400 truncate max-w-[200px]\">{p.description}</span>}\n                        </div>\n                      </div>\n                      {isPrimary ? (\n                        <span className=\"text-[10px] px-2 py-0.5 rounded bg-blue-600 text-white font-semibold\">Primary</span>\n                      ) : isAssigned ? (\n                        <button onClick={(e) => { e.stopPropagation(); setPrimary(p.id); }} className=\"text-[10px] px-2 py-0.5 rounded bg-white/5 text-slate-400 hover:text-white transition-colors\">\n                          Set Primary\n                        </button>\n                      ) : null}\n                    </div>\n                  );\n                })}\n              </div>\n            </TabsContent>\n\n            {/* Relations Tab */}\n            <TabsContent value=\"relations\" className=\"mt-4 pb-0\">\n              {relations.length > 0 ? (\n                <div className=\"space-y-2 max-h-60 overflow-y-auto\">\n                  {relations.map((r, i) => {\n                    const label = (r.type || '').replace('_', ' ');\n                    const otherName = r.other_contact?.name || 'Unknown';\n\n                    return (\n                      <div key={i} className=\"flex items-center gap-3 py-2.5 border-b border-white/10 last:border-0 group/rel\">\n                        <Users2 className=\"w-4 h-4 text-slate-400\" />\n                        <div className=\"flex-1 flex items-center gap-2 text-sm\">\n                          <span className=\"font-medium text-white\">{contact.name}</span>\n                          <span className=\"text-slate-400 text-xs px-1 bg-white/5 rounded\">{label}</span>\n                          <span className=\"font-medium text-white\">{otherName}</span>\n                        </div>\n                        <button\n                          className=\"opacity-0 group-hover/rel:opacity-100 transition-opacity text-red-400/60 hover:text-red-400\"\n                          title=\"Remove relationship\"\n                          onClick={() => {\n                            if (!r.other_contact?.id) return;\n                            deleteRelationship.mutate(\n                              { contactId: contact.id, toContactId: r.other_contact.id, type: r.type },\n                              {\n                                onSuccess: () => {\n                                  setRelations(prev => prev.filter((_, idx) => idx !== i));\n                                  toast.success('Relationship removed');\n                                },\n                                onError: () => toast.error('Failed to remove relationship'),\n                              }\n                            );\n                          }}\n                        >\n                          <X className=\"w-3.5 h-3.5\" />\n                        </button>\n                      </div>\n                    );\n                  })}\n                </div>\n              ) : (\n                <div className=\"flex flex-col items-center py-8 text-slate-400\">\n                  <Users2 className=\"w-10 h-10 mb-2 opacity-40\" />\n                  <p className=\"text-sm\">No relationships yet</p>\n                </div>\n              )}\n\n              {showAddRelation ? (\n                <div className=\"mt-3 p-3 rounded-lg border border-white/10 bg-white/5 space-y-3\">\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <Select value={newRelTarget} onValueChange={setNewRelTarget}>\n                      <SelectTrigger className=\"text-sm\">\n                        <SelectValue placeholder=\"Select contact\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        {allContacts.map(c => (\n                          <SelectItem key={c.id} value={c.id}>{c.name}</SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <Select value={newRelType} onValueChange={setNewRelType}>\n                      <SelectTrigger className=\"text-sm\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"reports_to\">Reports to</SelectItem>\n                        <SelectItem value=\"manages\">Manages</SelectItem>\n                        <SelectItem value=\"leads\">Leads</SelectItem>\n                        <SelectItem value=\"works_with\">Works with</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                  <div className=\"flex gap-2\">\n                    <Button variant=\"outline\" size=\"sm\" className=\"flex-1\" onClick={() => { setShowAddRelation(false); setNewRelTarget(''); }}>\n                      Cancel\n                    </Button>\n                    <Button size=\"sm\" className=\"flex-1\" disabled={!newRelTarget} onClick={handleAddRelationship}>\n                      Add\n                    </Button>\n                  </div>\n                </div>\n              ) : (\n                <button onClick={() => setShowAddRelation(true)} className=\"flex items-center gap-1.5 text-sm text-slate-400 hover:text-white mt-4 transition-colors\">\n                  <Plus className=\"w-4 h-4\" /> Add Relationship\n                </button>\n              )}\n            </TabsContent>\n\n            {/* Mentions Tab */}\n            <TabsContent value=\"mentions\" className=\"mt-4 pb-0\">\n              {mentions.length > 0 ? (\n                <div className=\"space-y-4\">\n                  <div className=\"flex gap-2 pb-2 overflow-x-auto\">\n                    {['all', 'document', 'email', 'conversation'].map(type => (\n                      <button\n                        key={type}\n                        onClick={() => setMentionFilter(type === 'all' ? null : type)}\n                        className={`text-xs px-2.5 py-1 rounded-full border transition-colors ${(mentionFilter === type || (mentionFilter === null && type === 'all'))\n                          ? 'bg-blue-500/10 text-blue-400 border-blue-500/20'\n                          : 'bg-white/5 text-slate-400 border-transparent hover:bg-white/10 hover:text-slate-200'\n                          }`}\n                      >\n                        {type.charAt(0).toUpperCase() + type.slice(1)}s\n                      </button>\n                    ))}\n                  </div>\n\n                  <div className=\"space-y-2 max-h-60 overflow-y-auto pr-2\">\n                    {mentions\n                      .filter(m => !mentionFilter || m.type === mentionFilter)\n                      .map((mention) => (\n                        <div key={mention.id} className=\"flex gap-3 py-3 border-b border-white/10 last:border-0 group\">\n                          <div className=\"mt-0.5\">\n                            {mention.type === 'email' ? <Mail className=\"w-3.5 h-3.5 text-blue-400\" /> :\n                              mention.type === 'conversation' ? <MessageSquare className=\"w-3.5 h-3.5 text-violet-400\" /> :\n                                <FileText className=\"w-3.5 h-3.5 text-amber-400\" />}\n                          </div>\n                          <div className=\"flex-1 space-y-1\">\n                            <div className=\"flex justify-between items-start\">\n                              <span className=\"text-xs font-medium text-slate-400 uppercase tracking-wider\">{mention.source || ''}</span>\n                              <span className=\"text-[10px] text-slate-400 whitespace-nowrap ml-2\">\n                                {mention.date ? new Date(mention.date).toLocaleDateString() : ''}\n                              </span>\n                            </div>\n                            <p className=\"text-sm text-white line-clamp-2 bg-white/5 p-2 rounded border border-white/10 italic\">\n                              \"{mention.text}\"\n                            </p>\n                            {mention.link && (\n                              <a href={mention.link} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-xs text-blue-400 hover:underline inline-flex items-center gap-1 mt-1 font-medium transition-colors\">\n                                View Context <ArrowRight className=\"w-3 h-3\" />\n                              </a>\n                            )}\n                          </div>\n                        </div>\n                      ))}\n                    {mentions.filter(m => !mentionFilter || m.type === mentionFilter).length === 0 && (\n                      <p className=\"text-center text-sm text-slate-400 py-8\">No mentions found for this filter</p>\n                    )}\n                  </div>\n                </div>\n              ) : (\n                <div className=\"flex flex-col items-center py-8 text-slate-400\">\n                  <MessageSquare className=\"w-10 h-10 mb-2 opacity-40\" />\n                  <p className=\"text-sm\">No mentions found</p>\n                </div>\n              )}\n            </TabsContent>\n\n            {/* Activity Tab */}\n            <TabsContent value=\"activity\" className=\"mt-4 pb-0\">\n              {activity.length > 0 ? (\n                <div className=\"space-y-2 max-h-60 overflow-y-auto\">\n                  {activity.map((item) => (\n                    <div key={`${item.type}-${item.id}`} className=\"flex items-center gap-3 py-2.5 border-b border-white/10 last:border-0\">\n                      {item.status === 'completed' || item.status === 'approved' ? (\n                        <CheckCircle2 className=\"w-4 h-4 text-emerald-500 shrink-0\" />\n                      ) : item.status === 'overdue' || item.status === 'rejected' ? (\n                        <AlertTriangle className=\"w-4 h-4 text-red-400 shrink-0\" />\n                      ) : (\n                        <Clock className=\"w-4 h-4 text-slate-400 shrink-0\" />\n                      )}\n                      <span className=\"text-sm text-white flex-1 truncate\">{item.description}</span>\n                      <span className=\"text-[10px] text-slate-400 shrink-0\">\n                        {item.date ? new Date(item.date).toLocaleDateString() : ''}\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"flex flex-col items-center py-8 text-slate-400\">\n                  <Clock className=\"w-10 h-10 mb-2 opacity-40\" />\n                  <p className=\"text-sm\">No activity recorded yet</p>\n                </div>\n              )}\n            </TabsContent>\n          </Tabs>\n        </div>\n\n        {/* Footer */}\n        <div className=\"flex items-center justify-between px-6 py-4 border-t border-white/10 mt-4\">\n          <Button variant=\"outline\" size=\"sm\" className=\"text-red-400 border-red-400/30 hover:bg-red-500/10 gap-1.5\" onClick={() => onDelete(contact.id)}>\n            <Trash2 className=\"w-3.5 h-3.5\" /> Delete\n          </Button>\n          <div className=\"flex gap-2\">\n            <Button variant=\"outline\" size=\"sm\" className=\"text-slate-300 border-white/20 hover:bg-white/10\" onClick={onClose}>Cancel</Button>\n            <Button size=\"sm\" className=\"gap-1.5 bg-blue-600 hover:bg-blue-700 text-white\" onClick={() => onEdit(contact)}>\n              <CheckCircle2 className=\"w-3.5 h-3.5\" /> Save Changes\n            </Button>\n          </div>\n        </div>\n\n        {/* Comments */}\n        <div className=\"mt-4\">\n          <CommentsPanel targetType=\"contact\" targetId={contact.id} />\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default ContactDetailModal;\n","/**\n * Purpose:\n *   Full CRUD management page for project contacts with favorites, filters,\n *   multi-select merge, duplicate detection, AI enrichment, import/export,\n *   and unmatched participant linking.\n *\n * Key dependencies:\n *   - useContacts / useCreateContact / useUpdateContact / useDeleteContact\n *   - useContactDuplicates / useMergeContacts / useEnrichContact\n *   - useExportContacts / useImportContacts\n *   - useUnmatchedParticipants / useLinkParticipant / useSyncPeopleToContacts\n *   - ContactForm / ContactDetailModal\n */\nimport { useState, useRef, useMemo } from 'react';\nimport {\n  Users, Search, Plus, Loader2, Mail, Phone, Building2,\n  Briefcase, X, Star, Filter, Download, Upload, Sparkles,\n  AlertTriangle, Merge, CheckSquare, Square, UserPlus, Link2, RefreshCw,\n  FileJson, FileSpreadsheet, ChevronDown,\n} from 'lucide-react';\nimport { toast } from 'sonner';\nimport {\n  useContacts, useCreateContact, useUpdateContact, useDeleteContact,\n  useContactDuplicates, useMergeContacts, useEnrichContact,\n  useExportContacts, useImportContacts,\n  useUnmatchedParticipants, useLinkParticipant, useSyncPeopleToContacts,\n} from '../hooks/useGodMode';\nimport ContactForm from '../components/contacts/ContactForm';\nimport ContactDetailModal from '../components/contacts/ContactDetailModal';\nimport { cn, isValidAvatarUrl, getInitials, resolveAvatarUrl } from '../lib/utils';\nimport type { Contact } from '../types/godmode';\n\nconst CARD = 'rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-[var(--shadow-sm)] transition-all duration-200';\nconst INPUT = 'w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-placeholder)] focus:outline-none focus:border-[var(--gm-border-focus)] focus:shadow-[var(--shadow-focus)] transition-all duration-150';\nconst BTN_PRIMARY = 'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] hover:bg-[var(--gm-interactive-primary-hover)] shadow-sm transition-all duration-150 disabled:opacity-50';\nconst BTN_SECONDARY = 'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] hover:bg-[var(--gm-interactive-secondary-hover)] border border-[var(--gm-border-primary)] transition-all duration-150';\nconst SECTION_TITLE = 'text-[10px] font-bold text-[var(--gm-accent-primary)] uppercase tracking-[0.1em]';\nconst LABEL = 'text-[10px] font-bold text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-1 flex items-center gap-1.5';\n\nconst avatarGradients = [\n  'from-rose-400 to-pink-500',\n  'from-violet-400 to-purple-500',\n  'from-blue-400 to-cyan-500',\n  'from-emerald-400 to-teal-500',\n  'from-amber-400 to-orange-500',\n  'from-fuchsia-400 to-pink-500',\n];\n\nconst getGradient = (name: string) => {\n  let hash = 0;\n  for (let i = 0; i < name.length; i++) hash = name.charCodeAt(i) + ((hash << 5) - hash);\n  return avatarGradients[Math.abs(hash) % avatarGradients.length];\n};\n\nfunction ContactAvatarImg({ contact, size = 'md' }: { contact: Record<string, unknown>; size?: 'sm' | 'md' | 'lg' }) {\n  const name = String(contact.name || '?');\n  const url = resolveAvatarUrl(contact);\n  const dim = size === 'sm' ? 'w-7 h-7' : size === 'lg' ? 'w-16 h-16' : 'w-10 h-10';\n  const textSz = size === 'sm' ? 'text-[9px]' : size === 'lg' ? 'text-lg' : 'text-xs';\n  return (\n    <div className={`${dim} rounded-full bg-gradient-to-br ${getGradient(name)} flex items-center justify-center flex-shrink-0 overflow-hidden`}>\n      {url ? (\n        <img src={url} alt={name} className=\"w-full h-full rounded-full object-cover\" onError={(e) => { (e.target as HTMLImageElement).style.display = 'none'; }} />\n      ) : (\n        <span className={`${textSz} font-bold text-white`}>{getInitials(name)}</span>\n      )}\n    </div>\n  );\n}\n\nexport default function ContactsPage() {\n  const [search, setSearch] = useState('');\n  const [showForm, setShowForm] = useState(false);\n  const [editContact, setEditContact] = useState<Contact | null>(null);\n  const [detailContact, setDetailContact] = useState<Contact | null>(null);\n\n  // Filters\n  const [orgFilter, setOrgFilter] = useState('');\n  const [tagFilter, setTagFilter] = useState('');\n  const [showFavoritesOnly, setShowFavoritesOnly] = useState(false);\n  const [showFilters, setShowFilters] = useState(false);\n\n  // Multi-select\n  const [selectedIds, setSelectedIds] = useState<Set<string>>(new Set());\n  const [selectMode, setSelectMode] = useState(false);\n\n  // Duplicates\n  const [showDuplicates, setShowDuplicates] = useState(false);\n  const [mergePrimary, setMergePrimary] = useState<Record<number, string>>({});\n\n  // Import\n  const [showImport, setShowImport] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Unmatched\n  const [showUnmatched, setShowUnmatched] = useState(false);\n  const [linkTarget, setLinkTarget] = useState<Record<string, string>>({});\n\n  // Queries & mutations\n  const contactsQuery = useContacts({ search: search || undefined, organization: orgFilter || undefined });\n  const createContact = useCreateContact();\n  const updateContact = useUpdateContact();\n  const deleteContact = useDeleteContact();\n  const duplicatesQuery = useContactDuplicates();\n  const mergeContacts = useMergeContacts();\n  const enrichContact = useEnrichContact();\n  const exportContacts = useExportContacts();\n  const importContacts = useImportContacts();\n  const unmatchedQuery = useUnmatchedParticipants();\n  const linkParticipant = useLinkParticipant();\n  const syncPeople = useSyncPeopleToContacts();\n\n  const rawData = contactsQuery.data;\n  const allContacts: Contact[] = Array.isArray(rawData)\n    ? rawData as unknown as Contact[]\n    : (rawData?.contacts as unknown as Contact[] ?? []);\n\n  // Derive org and tag lists for filter dropdowns\n  const organizations = useMemo(() => {\n    const orgs = new Set<string>();\n    allContacts.forEach(c => { if (c.organization) orgs.add(c.organization); });\n    return Array.from(orgs).sort();\n  }, [allContacts]);\n\n  const allTags = useMemo(() => {\n    const tags = new Set<string>();\n    allContacts.forEach(c => {\n      const ct = c.tags;\n      if (Array.isArray(ct)) ct.forEach((t: string) => tags.add(t));\n    });\n    return Array.from(tags).sort();\n  }, [allContacts]);\n\n  // Client-side filtering (tag, favorites) on top of API-side search/org filtering\n  const contacts = useMemo(() => {\n    let result = allContacts;\n    if (tagFilter) {\n      result = result.filter(c => {\n        return Array.isArray(c.tags) && c.tags.includes(tagFilter);\n      });\n    }\n    if (showFavoritesOnly) {\n      result = result.filter(c => c.is_favorite || c.isFavorite);\n    }\n    return result;\n  }, [allContacts, tagFilter, showFavoritesOnly]);\n\n  const favorites = useMemo(\n    () => allContacts.filter(c => c.is_favorite || c.isFavorite),\n    [allContacts]\n  );\n\n  const duplicates: any[] = (duplicatesQuery.data as any)?.duplicates || [];\n\n  const unmatched: { name: string; count?: number }[] = (unmatchedQuery.data as any)?.unmatched || [];\n\n  // Handlers\n  const handleCreate = (data: Omit<Contact, 'id' | 'mentionCount'>) => {\n    createContact.mutate(data as Record<string, unknown>, {\n      onSuccess: () => { toast.success('Contact created'); setShowForm(false); },\n      onError: () => toast.error('Failed to create contact'),\n    });\n  };\n\n  const handleUpdate = (data: Omit<Contact, 'id' | 'mentionCount'>) => {\n    if (!editContact) return;\n    updateContact.mutate({ id: editContact.id, ...data } as { id: string; [key: string]: unknown }, {\n      onSuccess: () => { toast.success('Contact updated'); setEditContact(null); setShowForm(false); },\n      onError: () => toast.error('Failed to update contact'),\n    });\n  };\n\n  const handleDelete = (id: string) => {\n    deleteContact.mutate(id, {\n      onSuccess: () => { toast.success('Contact deleted'); setDetailContact(null); },\n      onError: () => toast.error('Failed to delete contact'),\n    });\n  };\n\n  const handleEditFromDetail = (contact: Contact) => {\n    setDetailContact(null);\n    setEditContact(contact);\n    setShowForm(true);\n  };\n\n  const toggleFavorite = (contact: Contact) => {\n    const isFav = contact.is_favorite || contact.isFavorite;\n    updateContact.mutate({ id: contact.id, is_favorite: !isFav } as { id: string; [key: string]: unknown }, {\n      onSuccess: () => toast.success(isFav ? 'Removed from favorites' : 'Added to favorites'),\n      onError: () => toast.error('Failed to update'),\n    });\n  };\n\n  const toggleSelect = (id: string) => {\n    setSelectedIds(prev => {\n      const next = new Set(prev);\n      if (next.has(id)) next.delete(id); else next.add(id);\n      return next;\n    });\n  };\n\n  const handleMergeSelected = () => {\n    if (selectedIds.size < 2) { toast.error('Select at least 2 contacts to merge'); return; }\n    mergeContacts.mutate(Array.from(selectedIds), {\n      onSuccess: () => { toast.success('Contacts merged'); setSelectedIds(new Set()); setSelectMode(false); },\n      onError: () => toast.error('Merge failed'),\n    });\n  };\n\n  const handleMergeDuplicateGroup = (groupIndex: number, group: any[]) => {\n    const primary = mergePrimary[groupIndex];\n    if (!primary) { toast.error('Select a primary contact'); return; }\n    const ids = group.map((c: any) => c.id);\n    mergeContacts.mutate(ids, {\n      onSuccess: () => { toast.success('Duplicates merged'); duplicatesQuery.refetch(); },\n      onError: () => toast.error('Merge failed'),\n    });\n  };\n\n  const handleEnrich = (id: string) => {\n    enrichContact.mutate(id, {\n      onSuccess: (data: any) => {\n        toast.success('AI enrichment complete');\n        if (data?.suggestions) {\n          const s = data.suggestions;\n          const fields: string[] = [];\n          if (s.role) fields.push(`Role: ${s.role}`);\n          if (s.department) fields.push(`Dept: ${s.department}`);\n          if (s.tags) fields.push(`Tags: ${(s.tags as string[]).join(', ')}`);\n          if (fields.length) toast.info(fields.join(' | '));\n        }\n        contactsQuery.refetch();\n      },\n      onError: () => toast.error('Enrichment failed'),\n    });\n  };\n\n  const handleImportFile = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = () => {\n      const text = reader.result as string;\n      const isCSV = file.name.endsWith('.csv');\n      if (isCSV) {\n        importContacts.mutate({ format: 'csv', data: text }, {\n          onSuccess: (r: any) => { toast.success(`Imported ${r?.added || 0} contacts`); setShowImport(false); },\n          onError: () => toast.error('Import failed'),\n        });\n      } else {\n        try {\n          const json = JSON.parse(text);\n          importContacts.mutate({ format: 'json', data: json }, {\n            onSuccess: (r: any) => { toast.success(`Imported ${r?.added || 0} contacts`); setShowImport(false); },\n            onError: () => toast.error('Import failed'),\n          });\n        } catch { toast.error('Invalid JSON file'); }\n      }\n    };\n    reader.readAsText(file);\n    e.target.value = '';\n  };\n\n  const handleLinkParticipant = (name: string, contactId: string) => {\n    linkParticipant.mutate({ participantName: name, contactId }, {\n      onSuccess: () => toast.success(`Linked \"${name}\"`),\n      onError: () => toast.error('Link failed'),\n    });\n  };\n\n  // Form view (add or edit)\n  if (showForm) {\n    return (\n      <div className=\"p-6 max-w-2xl\">\n        <div className=\"flex items-center gap-3 mb-4\">\n          <button\n            onClick={() => { setShowForm(false); setEditContact(null); }}\n            className=\"w-8 h-8 rounded-lg bg-[var(--gm-bg-tertiary)] flex items-center justify-center hover:bg-[var(--gm-surface-hover)]\"\n          >\n            <X className=\"w-4 h-4 text-[var(--gm-text-tertiary)]\" />\n          </button>\n          <h1 className=\"text-2xl font-bold text-[var(--gm-text-primary)]\">\n            {editContact ? 'Edit Contact' : 'Add Contact'}\n          </h1>\n        </div>\n        <div className=\"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-xl p-5\">\n          <ContactForm\n            contact={editContact}\n            mode={editContact ? 'edit' : 'add'}\n            onSubmit={editContact ? handleUpdate : handleCreate}\n            onCancel={() => { setShowForm(false); setEditContact(null); }}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  // Main list view\n  return (\n    <div className=\"p-6 space-y-4\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between flex-wrap gap-2\">\n        <h1 className=\"text-2xl font-bold text-[var(--gm-text-primary)]\">Contacts</h1>\n        <div className=\"flex items-center gap-2 flex-wrap\">\n          {/* Sync people */}\n          <button\n            onClick={() => syncPeople.mutate(undefined, {\n              onSuccess: (r: any) => toast.success(`Synced: ${r?.added || 0} added`),\n              onError: () => toast.error('Sync failed'),\n            })}\n            className=\"px-2.5 py-1.5 rounded-lg bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)] text-xs hover:bg-[var(--gm-surface-hover)] flex items-center gap-1.5\"\n            title=\"Sync people from documents to contacts\"\n          >\n            <RefreshCw className={`w-3.5 h-3.5 ${syncPeople.isPending ? 'animate-spin' : ''}`} /> Sync People\n          </button>\n\n          {/* Unmatched */}\n          {unmatched.length > 0 && (\n            <button\n              onClick={() => setShowUnmatched(!showUnmatched)}\n              className=\"px-2.5 py-1.5 rounded-lg bg-amber-500/10 text-amber-600 text-xs hover:bg-amber-500/20 flex items-center gap-1.5\"\n            >\n              <UserPlus className=\"w-3.5 h-3.5\" /> {unmatched.length} Unmatched\n            </button>\n          )}\n\n          {/* Duplicates */}\n          {duplicates.length > 0 && (\n            <button\n              onClick={() => setShowDuplicates(!showDuplicates)}\n              className=\"px-2.5 py-1.5 rounded-lg bg-orange-500/10 text-orange-600 text-xs hover:bg-orange-500/20 flex items-center gap-1.5\"\n            >\n              <AlertTriangle className=\"w-3.5 h-3.5\" /> {duplicates.length} Duplicate groups\n            </button>\n          )}\n\n          {/* Select mode */}\n          <button\n            onClick={() => { setSelectMode(!selectMode); setSelectedIds(new Set()); }}\n            className={`px-2.5 py-1.5 rounded-lg text-xs flex items-center gap-1.5 ${selectMode ? 'bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)]' : 'bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)]'}`}\n          >\n            <CheckSquare className=\"w-3.5 h-3.5\" /> Select\n          </button>\n\n          {/* Export */}\n          <div className=\"relative group\">\n            <button className=\"px-2.5 py-1.5 rounded-lg bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)] text-xs hover:bg-[var(--gm-surface-hover)] flex items-center gap-1.5\">\n              <Download className=\"w-3.5 h-3.5\" /> Export <ChevronDown className=\"w-3 h-3\" />\n            </button>\n            <div className=\"absolute right-0 top-full mt-1 bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-20 min-w-[120px]\">\n              <button onClick={() => exportContacts.mutate('json')} className=\"w-full px-3 py-2 text-xs text-left hover:bg-[var(--gm-surface-hover)] flex items-center gap-2 rounded-t-lg\">\n                <FileJson className=\"w-3.5 h-3.5\" /> JSON\n              </button>\n              <button onClick={() => exportContacts.mutate('csv')} className=\"w-full px-3 py-2 text-xs text-left hover:bg-[var(--gm-surface-hover)] flex items-center gap-2 rounded-b-lg\">\n                <FileSpreadsheet className=\"w-3.5 h-3.5\" /> CSV\n              </button>\n            </div>\n          </div>\n\n          {/* Import */}\n          <button\n            onClick={() => fileInputRef.current?.click()}\n            className=\"px-2.5 py-1.5 rounded-lg bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)] text-xs hover:bg-[var(--gm-surface-hover)] flex items-center gap-1.5\"\n          >\n            <Upload className=\"w-3.5 h-3.5\" /> Import\n          </button>\n          <input ref={fileInputRef} type=\"file\" accept=\".json,.csv\" className=\"hidden\" onChange={handleImportFile} />\n\n          {/* Add */}\n          <button\n            onClick={() => { setEditContact(null); setShowForm(true); }}\n            className=\"px-3 py-1.5 rounded-lg bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] text-xs font-medium hover:bg-[var(--gm-interactive-primary-hover)] flex items-center gap-1.5\"\n          >\n            <Plus className=\"w-3.5 h-3.5\" /> Add Contact\n          </button>\n        </div>\n      </div>\n\n      {/* Search + Filters row */}\n      <div className=\"flex items-center gap-2 flex-wrap\">\n        <div className=\"relative max-w-sm flex-1 min-w-[200px]\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-[var(--gm-text-tertiary)]\" />\n          <input\n            value={search}\n            onChange={e => setSearch(e.target.value)}\n            placeholder=\"Search contacts...\"\n            className=\"w-full pl-9 pr-3 py-1.5 bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg text-xs text-[var(--gm-text-primary)] focus:outline-none focus:border-[var(--gm-border-focus)] focus:shadow-[var(--shadow-focus)]\"\n          />\n        </div>\n\n        <button\n          onClick={() => setShowFilters(!showFilters)}\n          className={`px-2.5 py-1.5 rounded-lg text-xs flex items-center gap-1.5 ${(orgFilter || tagFilter || showFavoritesOnly) ? 'bg-[var(--gm-interactive-primary)]/10 text-[var(--gm-accent-primary)] border border-[var(--gm-accent-primary)]/30' : 'bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)]'}`}\n        >\n          <Filter className=\"w-3.5 h-3.5\" /> Filters\n          {(orgFilter || tagFilter || showFavoritesOnly) && (\n            <span className=\"px-1.5 py-0.5 rounded-full bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] text-[10px]\">\n              {[orgFilter, tagFilter, showFavoritesOnly].filter(Boolean).length}\n            </span>\n          )}\n        </button>\n\n        <button\n          onClick={() => setShowFavoritesOnly(!showFavoritesOnly)}\n          className={`px-2.5 py-1.5 rounded-lg text-xs flex items-center gap-1.5 ${showFavoritesOnly ? 'bg-amber-500/10 text-amber-500 border border-amber-500/30' : 'bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)]'}`}\n        >\n          <Star className={`w-3.5 h-3.5 ${showFavoritesOnly ? 'fill-amber-500' : ''}`} /> Favorites {favorites.length > 0 && `(${favorites.length})`}\n        </button>\n      </div>\n\n      {/* Filter dropdowns */}\n      {showFilters && (\n        <div className=\"flex items-center gap-3 p-3 rounded-lg bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] flex-wrap\">\n          <div className=\"flex items-center gap-2\">\n            <label className=\"text-xs text-[var(--gm-text-tertiary)]\">Organization:</label>\n            <select\n              value={orgFilter}\n              onChange={e => setOrgFilter(e.target.value)}\n              className=\"px-2 py-1 bg-[var(--gm-bg-primary)] border border-[var(--gm-border-primary)] rounded text-xs text-[var(--gm-text-primary)]\"\n            >\n              <option value=\"\">All</option>\n              {organizations.map(org => <option key={org} value={org}>{org}</option>)}\n            </select>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <label className=\"text-xs text-[var(--gm-text-tertiary)]\">Tag:</label>\n            <select\n              value={tagFilter}\n              onChange={e => setTagFilter(e.target.value)}\n              className=\"px-2 py-1 bg-[var(--gm-bg-primary)] border border-[var(--gm-border-primary)] rounded text-xs text-[var(--gm-text-primary)]\"\n            >\n              <option value=\"\">All</option>\n              {allTags.map(tag => <option key={tag} value={tag}>{tag}</option>)}\n            </select>\n          </div>\n          {(orgFilter || tagFilter) && (\n            <button\n              onClick={() => { setOrgFilter(''); setTagFilter(''); }}\n              className=\"text-xs text-[var(--gm-accent-primary)] hover:underline\"\n            >\n              Clear filters\n            </button>\n          )}\n        </div>\n      )}\n\n      {/* Selection bar */}\n      {selectMode && selectedIds.size > 0 && (\n        <div className=\"flex items-center gap-3 p-3 rounded-lg bg-[var(--gm-interactive-primary)]/5 border border-[var(--gm-accent-primary)]/20\">\n          <span className=\"text-xs text-[var(--gm-accent-primary)] font-medium\">{selectedIds.size} selected</span>\n          <button\n            onClick={handleMergeSelected}\n            disabled={selectedIds.size < 2 || mergeContacts.isPending}\n            className=\"px-2.5 py-1 rounded bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] text-xs flex items-center gap-1.5 disabled:opacity-50\"\n          >\n            <Merge className=\"w-3.5 h-3.5\" /> Merge Selected\n          </button>\n          <button onClick={() => { setSelectedIds(new Set()); setSelectMode(false); }} className=\"text-xs text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)]\">\n            Cancel\n          </button>\n        </div>\n      )}\n\n      {/* Unmatched panel */}\n      {showUnmatched && unmatched.length > 0 && (\n        <div className=\"p-4 rounded-xl border border-amber-500/30 bg-amber-500/5 space-y-3\">\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"text-sm font-semibold text-[var(--gm-text-primary)] flex items-center gap-2\">\n              <UserPlus className=\"w-4 h-4 text-amber-500\" /> Unmatched Participants ({unmatched.length})\n            </h3>\n            <button onClick={() => setShowUnmatched(false)} className=\"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)]\"><X className=\"w-4 h-4\" /></button>\n          </div>\n          <p className=\"text-[11px] text-[var(--gm-text-tertiary)]\">These names were found in documents but don't match any contact. Link them to existing contacts.</p>\n          <div className=\"space-y-2 max-h-48 overflow-y-auto\">\n            {unmatched.map((u) => (\n              <div key={u.name} className=\"flex items-center gap-2 p-2 rounded bg-[var(--gm-bg-primary)] border border-[var(--gm-border-primary)]\">\n                <span className=\"text-xs font-medium text-[var(--gm-text-primary)] flex-1\">{u.name}</span>\n                {u.count && <span className=\"text-[10px] text-[var(--gm-text-tertiary)]\">{u.count} mentions</span>}\n                <select\n                  value={linkTarget[u.name] || ''}\n                  onChange={e => setLinkTarget(prev => ({ ...prev, [u.name]: e.target.value }))}\n                  className=\"px-2 py-1 bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded text-xs max-w-[150px]\"\n                >\n                  <option value=\"\">Link to...</option>\n                  {allContacts.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\n                </select>\n                <button\n                  disabled={!linkTarget[u.name]}\n                  onClick={() => linkTarget[u.name] && handleLinkParticipant(u.name, linkTarget[u.name])}\n                  className=\"px-2 py-1 rounded bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] text-[10px] disabled:opacity-40 flex items-center gap-1\"\n                >\n                  <Link2 className=\"w-3 h-3\" /> Link\n                </button>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Duplicates panel */}\n      {showDuplicates && duplicates.length > 0 && (\n        <div className=\"p-4 rounded-xl border border-orange-500/30 bg-orange-500/5 space-y-3\">\n          <div className=\"flex items-center justify-between\">\n            <h3 className=\"text-sm font-semibold text-[var(--gm-text-primary)] flex items-center gap-2\">\n              <AlertTriangle className=\"w-4 h-4 text-orange-500\" /> Duplicate Groups ({duplicates.length})\n            </h3>\n            <button onClick={() => setShowDuplicates(false)} className=\"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)]\"><X className=\"w-4 h-4\" /></button>\n          </div>\n          <div className=\"space-y-3 max-h-60 overflow-y-auto\">\n            {duplicates.map((group: any, gi: number) => {\n              const items = Array.isArray(group) ? group : group.contacts || [group];\n              return (\n                <div key={gi} className=\"p-3 rounded-lg bg-[var(--gm-bg-primary)] border border-[var(--gm-border-primary)] space-y-2\">\n                  <p className=\"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider\">Group {gi + 1}  Select primary</p>\n                  {items.map((c: any) => (\n                    <label key={c.id} className=\"flex items-center gap-2 cursor-pointer p-1 rounded hover:bg-[var(--gm-surface-hover)]\">\n                      <input\n                        type=\"radio\"\n                        name={`merge-group-${gi}`}\n                        checked={mergePrimary[gi] === c.id}\n                        onChange={() => setMergePrimary(prev => ({ ...prev, [gi]: c.id }))}\n                        className=\"accent-primary\"\n                      />\n                      <span className=\"text-xs text-[var(--gm-text-primary)]\">{c.name}</span>\n                      {c.email && <span className=\"text-[10px] text-[var(--gm-text-tertiary)]\">({c.email})</span>}\n                    </label>\n                  ))}\n                  <button\n                    onClick={() => handleMergeDuplicateGroup(gi, items)}\n                    disabled={!mergePrimary[gi] || mergeContacts.isPending}\n                    className=\"px-2.5 py-1 rounded bg-orange-500 text-white text-xs disabled:opacity-50 flex items-center gap-1\"\n                  >\n                    <Merge className=\"w-3 h-3\" /> Merge Group\n                  </button>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      )}\n\n      {/* Favorites horizontal scroll */}\n      {favorites.length > 0 && !showFavoritesOnly && (\n        <div>\n          <p className=\"text-xs text-[var(--gm-text-tertiary)] mb-2 flex items-center gap-1\">\n            <Star className=\"w-3 h-3 fill-amber-500 text-amber-500\" /> Favorites\n          </p>\n          <div className=\"flex gap-2 overflow-x-auto pb-2\">\n            {favorites.map(c => (\n              <button\n                key={c.id}\n                onClick={() => setDetailContact(c)}\n                className=\"flex items-center gap-2 px-3 py-2 rounded-lg bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] hover:border-[var(--gm-accent-primary)]/30 flex-shrink-0\"\n              >\n                <ContactAvatarImg contact={c as unknown as Record<string, unknown>} size=\"sm\" />\n                <div className=\"text-left\">\n                  <p className=\"text-xs font-medium text-[var(--gm-text-primary)]\">{c.name}</p>\n                  {c.role && <p className=\"text-[10px] text-[var(--gm-text-tertiary)]\">{c.role}</p>}\n                </div>\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Count */}\n      <p className=\"text-xs text-[var(--gm-text-tertiary)]\">{contacts.length} contact{contacts.length !== 1 ? 's' : ''}</p>\n\n      {/* List */}\n      {contactsQuery.isLoading ? (\n        <div className=\"flex items-center justify-center h-32\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-[var(--gm-accent-primary)]\" />\n        </div>\n      ) : contacts.length === 0 ? (\n        <div className=\"rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] p-8 text-center text-[var(--gm-text-tertiary)]\">\n          <Users className=\"h-12 w-12 mx-auto mb-4 text-[var(--gm-text-tertiary)]/40\" />\n          {search || orgFilter || tagFilter ? 'No contacts match your filters.' : 'No contacts found. Add one to get started.'}\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n          {contacts.map((contact) => {\n            const isFav = contact.is_favorite || contact.isFavorite;\n            const isSelected = selectedIds.has(contact.id);\n            return (\n              <div\n                key={contact.id}\n                className={`bg-[var(--gm-surface-primary)] border rounded-xl p-4 hover:border-[var(--gm-accent-primary)]/30 transition-colors cursor-pointer group relative ${isSelected ? 'border-[var(--gm-accent-primary)] bg-[var(--gm-interactive-primary)]/5' : 'border-[var(--gm-border-primary)]'}`}\n                onClick={() => selectMode ? toggleSelect(contact.id) : setDetailContact(contact)}\n              >\n                {/* Select checkbox */}\n                {selectMode && (\n                  <div className=\"absolute top-3 left-3 z-10\">\n                    {isSelected ? (\n                      <CheckSquare className=\"w-4 h-4 text-[var(--gm-accent-primary)]\" />\n                    ) : (\n                      <Square className=\"w-4 h-4 text-[var(--gm-text-tertiary)]\" />\n                    )}\n                  </div>\n                )}\n\n                {/* Favorite star */}\n                <button\n                  className=\"absolute top-3 right-3 z-10 opacity-0 group-hover:opacity-100 transition-opacity\"\n                  onClick={(e) => { e.stopPropagation(); toggleFavorite(contact); }}\n                  title={isFav ? 'Remove from favorites' : 'Add to favorites'}\n                >\n                  <Star className={`w-4 h-4 ${isFav ? 'fill-amber-500 text-amber-500' : 'text-[var(--gm-text-tertiary)] hover:text-amber-500'}`} />\n                </button>\n\n                {/* AI Enrich button */}\n                <button\n                  className=\"absolute top-3 right-9 z-10 opacity-0 group-hover:opacity-100 transition-opacity\"\n                  onClick={(e) => { e.stopPropagation(); handleEnrich(contact.id); }}\n                  title=\"Enrich with AI\"\n                >\n                  <Sparkles className={`w-4 h-4 text-violet-400 hover:text-violet-300 ${enrichContact.isPending ? 'animate-pulse' : ''}`} />\n                </button>\n\n                <div className={`flex items-center gap-3 ${selectMode ? 'ml-5' : ''}`}>\n                  <div className={`w-10 h-10 rounded-full bg-gradient-to-br ${getGradient(contact.name)} flex items-center justify-center flex-shrink-0 overflow-hidden`}>\n                    {resolveAvatarUrl(contact as any) ? (\n                      <img src={resolveAvatarUrl(contact as any)!} alt={contact.name} className=\"w-full h-full rounded-full object-cover\" />\n                    ) : (\n                      <span className=\"text-xs font-bold text-white\">{getInitials(contact.name)}</span>\n                    )}\n                  </div>\n                  <div className=\"min-w-0 flex-1\">\n                    <p className=\"text-sm font-medium text-[var(--gm-text-primary)] truncate group-hover:text-[var(--gm-accent-primary)] transition-colors\">\n                      {contact.name || '(unnamed)'}\n                      {isFav && <Star className=\"w-3 h-3 inline ml-1 fill-amber-500 text-amber-500\" />}\n                    </p>\n                    {contact.role && (\n                      <div className=\"flex items-center gap-1 mt-0.5\">\n                        <Briefcase className=\"w-3 h-3 text-[var(--gm-text-tertiary)]\" />\n                        <span className=\"text-[10px] text-[var(--gm-text-tertiary)] truncate\">{contact.role}</span>\n                      </div>\n                    )}\n                  </div>\n                </div>\n                <div className=\"mt-3 space-y-1\">\n                  {contact.organization && (\n                    <div className=\"flex items-center gap-1.5 text-[10px] text-[var(--gm-text-tertiary)]\">\n                      <Building2 className=\"w-3 h-3\" />\n                      <span className=\"truncate\">{contact.organization}</span>\n                    </div>\n                  )}\n                  {contact.email && (\n                    <div className=\"flex items-center gap-1.5 text-[10px] text-[var(--gm-text-tertiary)]\">\n                      <Mail className=\"w-3 h-3\" />\n                      <span className=\"truncate\">{contact.email}</span>\n                    </div>\n                  )}\n                  {contact.phone && (\n                    <div className=\"flex items-center gap-1.5 text-[10px] text-[var(--gm-text-tertiary)]\">\n                      <Phone className=\"w-3 h-3\" />\n                      <span className=\"truncate\">{contact.phone}</span>\n                    </div>\n                  )}\n                  {contact.tags && contact.tags.length > 0 && (\n                    <div className=\"flex flex-wrap gap-1 mt-1\">\n                      {contact.tags.slice(0, 4).map(tag => (\n                        <span key={tag} className=\"text-[9px] px-1.5 py-0.5 rounded-full bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)]\">{tag}</span>\n                      ))}\n                      {contact.tags.length > 4 && (\n                        <span className=\"text-[9px] text-[var(--gm-text-tertiary)]\">+{contact.tags.length - 4}</span>\n                      )}\n                    </div>\n                  )}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      )}\n\n      {/* Detail modal */}\n      <ContactDetailModal\n        contact={detailContact}\n        open={!!detailContact}\n        onClose={() => setDetailContact(null)}\n        onEdit={handleEditFromDetail}\n        onDelete={handleDelete}\n      />\n    </div>\n  );\n}\n"],"names":["__iconNode","FileSpreadsheet","createLucideIcon","Linkedin","MapPin","Phone","StickyNote","NODES","Primitive","primitive","node","Slot","createSlot","Node","React.forwardRef","props","forwardedRef","asChild","primitiveProps","Comp","jsx","NAME","Label","event","Root","cx","clsx","cva","base","config","labelVariants","className","ref","LabelPrimitive.Root","cn","Textarea","ContactForm","contact","onSubmit","onCancel","mode","form","setForm","useState","newAlias","setNewAlias","roleTemplates","setRoleTemplates","timezones","setTimezones","companies","setCompanies","useEffect","rolesData","timezonesData","companiesData","apiClient","roles","tzs","comps","err","resolveAvatarUrl","handleSubmit","update","field","value","prev","addAlias","removeAlias","alias","a","Field","Icon","label","id","placeholder","type","required","jsxs","Input","e","User","Briefcase","Select","val","SelectTrigger","SelectValue","SelectContent","role","SelectItem","Mail","Building2","c","company","Button","Image","Clock","tz","Fragment","Plus","Save","ENTRY_FOCUS","EVENT_OPTIONS","GROUP_NAME","Collection","useCollection","createCollectionScope","createCollection","createRovingFocusGroupContext","createRovingFocusGroupScope","createContextScope","RovingFocusProvider","useRovingFocusContext","RovingFocusGroup","RovingFocusGroupImpl","__scopeRovingFocusGroup","orientation","loop","dir","currentTabStopIdProp","defaultCurrentTabStopId","onCurrentTabStopIdChange","onEntryFocus","preventScrollOnEntryFocus","groupProps","React.useRef","composedRefs","useComposedRefs","direction","useDirection","currentTabStopId","setCurrentTabStopId","useControllableState","isTabbingBackOut","setIsTabbingBackOut","React.useState","handleEntryFocus","useCallbackRef","getItems","isClickFocusRef","focusableItemsCount","setFocusableItemsCount","React.useEffect","React.useCallback","tabStopId","prevCount","composeEventHandlers","isKeyboardFocus","entryFocusEvent","items","item","activeItem","currentItem","candidateNodes","focusFirst","ITEM_NAME","RovingFocusGroupItem","focusable","active","children","itemProps","autoId","useId","context","isCurrentTabStop","onFocusableItemAdd","onFocusableItemRemove","focusIntent","getFocusIntent","currentIndex","wrapArray","MAP_KEY_TO_FOCUS_INTENT","getDirectionAwareKey","key","candidates","preventScroll","PREVIOUSLY_FOCUSED_ELEMENT","candidate","array","startIndex","_","index","Item","TABS_NAME","createTabsContext","useRovingFocusGroupScope","TabsProvider","useTabsContext","Tabs","__scopeTabs","valueProp","onValueChange","defaultValue","activationMode","tabsProps","setValue","TAB_LIST_NAME","TabsList","listProps","rovingFocusGroupScope","RovingFocusGroup.Root","TRIGGER_NAME","TabsTrigger","disabled","triggerProps","triggerId","makeTriggerId","contentId","makeContentId","isSelected","RovingFocusGroup.Item","isAutomaticActivation","CONTENT_NAME","TabsContent","forceMount","contentProps","isMountAnimationPreventedRef","rAF","Presence","present","baseId","Root2","List","Trigger","Content","TabsPrimitive.Root","TabsPrimitive.List","TabsPrimitive.Trigger","TabsPrimitive.Content","avatarGradients","getGradient","name","hash","i","InfoRow","ContactDetailModal","open","onClose","onEdit","onDelete","onUpdateProjects","activeTab","setActiveTab","loading","setLoading","projects","setProjects","assignedProjectIds","setAssignedProjectIds","primaryProjectId","setPrimaryProjectId","relations","setRelations","activity","setActivity","mentions","setMentions","allContacts","setAllContacts","enrichContact","useEnrichContact","deleteRelationship","useDeleteRelationship","unlinkParticipant","useUnlinkParticipant","showAddRelation","setShowAddRelation","newRelTarget","setNewRelTarget","newRelType","setNewRelType","mentionFilter","setMentionFilter","contactAvatarUrl","setContactAvatarUrl","loadData","projectsData","assigned","assignedIds","p","primary","relsData","activityData","mentionsData","contactsList","toggleProject","projectId","isAssigned","setPrimary","handleAddRelationship","targetContact","newRel","Dialog","o","DialogContent","DialogTitle","data","toast","s","fields","Loader2","Sparkles","LinkIcon","AvatarUpload","url","FolderOpen","Users2","MessageSquare","tab","Globe","isPrimary","CheckCircle2","r","otherName","idx","X","m","mention","FileText","ArrowRight","AlertTriangle","Trash2","CommentsPanel","ContactAvatarImg","size","dim","textSz","getInitials","ContactsPage","search","setSearch","showForm","setShowForm","editContact","setEditContact","detailContact","setDetailContact","orgFilter","setOrgFilter","tagFilter","setTagFilter","showFavoritesOnly","setShowFavoritesOnly","showFilters","setShowFilters","selectedIds","setSelectedIds","selectMode","setSelectMode","showDuplicates","setShowDuplicates","mergePrimary","setMergePrimary","showImport","setShowImport","fileInputRef","useRef","showUnmatched","setShowUnmatched","linkTarget","setLinkTarget","contactsQuery","useContacts","createContact","useCreateContact","updateContact","useUpdateContact","deleteContact","useDeleteContact","duplicatesQuery","useContactDuplicates","mergeContacts","useMergeContacts","exportContacts","useExportContacts","importContacts","useImportContacts","unmatchedQuery","useUnmatchedParticipants","linkParticipant","useLinkParticipant","syncPeople","useSyncPeopleToContacts","rawData","organizations","useMemo","orgs","allTags","tags","ct","t","contacts","result","favorites","duplicates","unmatched","handleCreate","handleUpdate","handleDelete","handleEditFromDetail","toggleFavorite","isFav","toggleSelect","next","handleMergeSelected","handleMergeDuplicateGroup","groupIndex","group","ids","handleEnrich","handleImportFile","file","reader","text","json","handleLinkParticipant","contactId","RefreshCw","UserPlus","CheckSquare","Download","ChevronDown","FileJson","Upload","Search","Filter","Star","org","tag","Merge","u","Link2","gi","Users","Square"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,11,12]}