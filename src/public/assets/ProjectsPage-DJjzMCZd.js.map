{"version":3,"file":"ProjectsPage-DJjzMCZd.js","sources":["../../../node_modules/lucide-react/dist/esm/icons/settings-2.js","../../../node_modules/lucide-react/dist/esm/icons/shield-check.js","../../../node_modules/lucide-react/dist/esm/icons/sliders-horizontal.js","../../frontend/src/data/mock-data.ts","../../frontend/src/pages/ProjectsPage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M14 17H5\", key: \"gfn3mx\" }],\n  [\"path\", { d: \"M19 7h-9\", key: \"6i9tg\" }],\n  [\"circle\", { cx: \"17\", cy: \"17\", r: \"3\", key: \"18b49y\" }],\n  [\"circle\", { cx: \"7\", cy: \"7\", r: \"3\", key: \"dfmy0x\" }]\n];\nconst Settings2 = createLucideIcon(\"settings-2\", __iconNode);\n\nexport { __iconNode, Settings2 as default };\n//# sourceMappingURL=settings-2.js.map\n","/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z\",\n      key: \"oel41y\"\n    }\n  ],\n  [\"path\", { d: \"m9 12 2 2 4-4\", key: \"dzmm74\" }]\n];\nconst ShieldCheck = createLucideIcon(\"shield-check\", __iconNode);\n\nexport { __iconNode, ShieldCheck as default };\n//# sourceMappingURL=shield-check.js.map\n","/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M10 5H3\", key: \"1qgfaw\" }],\n  [\"path\", { d: \"M12 19H3\", key: \"yhmn1j\" }],\n  [\"path\", { d: \"M14 3v4\", key: \"1sua03\" }],\n  [\"path\", { d: \"M16 17v4\", key: \"1q0r14\" }],\n  [\"path\", { d: \"M21 12h-9\", key: \"1o4lsq\" }],\n  [\"path\", { d: \"M21 19h-5\", key: \"1rlt1p\" }],\n  [\"path\", { d: \"M21 5h-7\", key: \"1oszz2\" }],\n  [\"path\", { d: \"M8 10v4\", key: \"tgpxqk\" }],\n  [\"path\", { d: \"M8 12H3\", key: \"a7s4jb\" }]\n];\nconst SlidersHorizontal = createLucideIcon(\"sliders-horizontal\", __iconNode);\n\nexport { __iconNode, SlidersHorizontal as default };\n//# sourceMappingURL=sliders-horizontal.js.map\n","/**\r\n * Purpose:\r\n *   Provides static seed / placeholder data for development and initial UI\r\n *   rendering before real project data is loaded from the server.\r\n *\r\n * Responsibilities:\r\n *   - Export mockProjectRoles: predefined role templates for new projects\r\n *   - Export mockContacts: empty placeholder (real contacts come from the API)\r\n *\r\n * Key dependencies:\r\n *   - None\r\n *\r\n * Side effects:\r\n *   - None\r\n *\r\n * Notes:\r\n *   - Only the first three roles are active by default; the rest are offered\r\n *     as opt-in templates during project setup.\r\n *   - mockContacts is intentionally empty -- kept as a typed stub so components\r\n *     can reference it without conditional imports.\r\n */\r\n\r\nexport interface ProjectRole {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  active: boolean;\r\n  category?: string;\r\n}\r\n\r\nexport const mockProjectRoles: ProjectRole[] = [\r\n  { id: '1', name: 'Project Manager', description: 'Oversees project execution and delivery', active: true },\r\n  { id: '2', name: 'Tech Lead', description: 'Technical leadership and architecture decisions', active: true },\r\n  { id: '3', name: 'Product Owner', description: 'Defines product vision and priorities', active: true },\r\n  { id: '4', name: 'Designer', description: 'UI/UX design and prototyping', active: false },\r\n  { id: '5', name: 'QA Lead', description: 'Quality assurance and testing strategy', active: false },\r\n  { id: '6', name: 'DevOps', description: 'Infrastructure and deployment automation', active: false },\r\n];\r\n\r\nexport const mockContacts: Array<{ id: string; name: string; email?: string; role?: string }> = [];\r\n","/**\n * Purpose:\n *   Comprehensive project management page with CRUD for projects and four detail\n *   tabs: General settings, Members (with drag-and-drop team assignment), Roles\n *   configuration, and Categories management.\n *\n * Responsibilities:\n *   - List all projects from context, create new projects linked to a company\n *   - ProjectDetail view with tabbed sub-pages:\n *     - General: edit name, description, role, role prompt, company; delete project\n *     - Members: invite via email or existing contacts, assign roles via dropdown or\n *       drag-and-drop between category groups, set team leads\n *     - Roles: manage project roles (toggle active, assign to categories, create custom)\n *     - Categories: CRUD for team categories (groups), assign leads per category\n *\n * Key dependencies:\n *   - useProject (ProjectContext): project list and refresh\n *   - apiClient: direct REST calls for projects, members, roles, categories\n *   - framer-motion: animated transitions and drag-and-drop visual feedback\n *   - AlertDialog / Dialog / Select (shadcn): modal confirmations and selection UIs\n *   - mockProjectRoles: template roles merged with actual project roles\n *\n * Side effects:\n *   - Network: extensive CRUD operations across projects, members, roles, categories\n *   - Fetches companies list for project creation dropdown\n *\n * Notes:\n *   - Imports are split across the file (apiClient, date-fns, AlertDialog are imported\n *     mid-file after the GeneralTab component). This is unconventional but functional.\n *   - Role assignment uses `user_role` field to avoid 400 errors from the system `role`\n *     enum constraint on the backend.\n *   - Drag-and-drop in the Members \"Teams\" view uses native HTML5 drag events.\n */\nimport { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  FolderOpen, Plus, Edit2, ArrowLeft, Settings2, Users, ShieldCheck, SlidersHorizontal,\n  AlertTriangle, Trash2, Check, User, X, Copy, Link2, Mail, Sparkles, CheckSquare, GripVertical,\n  UserPlus, UsersRound, Loader2, Clock, Activity, Download, Upload, Star, Play, Key, TestTube,\n  Search, Building2,\n} from 'lucide-react';\nimport { toast } from 'sonner';\nimport { cn, isValidAvatarUrl, getInitials, resolveAvatarUrl } from '@/lib/utils';\n\n// â”€â”€ Style tokens (aligned with ProfilePage) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nconst CARD = 'rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-[var(--shadow-sm)] transition-all duration-200';\nconst INPUT = 'w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-placeholder)] focus:outline-none focus:border-[var(--gm-border-focus)] focus:shadow-[var(--shadow-focus)] transition-all duration-150';\nconst BTN_PRIMARY = 'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] hover:bg-[var(--gm-interactive-primary-hover)] shadow-sm transition-all duration-150 disabled:opacity-50';\nconst BTN_SECONDARY = 'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] hover:bg-[var(--gm-interactive-secondary-hover)] border border-[var(--gm-border-primary)] transition-all duration-150';\nconst BTN_DANGER = 'inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--color-danger-500)] text-white hover:bg-[var(--color-danger-600)] shadow-sm transition-all duration-150 disabled:opacity-50';\nconst SECTION_TITLE = 'text-[10px] font-bold text-[var(--gm-accent-primary)] uppercase tracking-[0.1em]';\nconst LABEL = 'text-[10px] font-bold text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-1 flex items-center gap-1.5';\nimport { useProject } from '@/contexts/ProjectContext';\nimport { mockProjectRoles, type ProjectRole } from '@/data/mock-data';\nimport { Input } from '@/components/ui/input';\nimport { Badge } from '@/components/ui/badge';\nimport {\n  Dialog, DialogContent, DialogHeader, DialogTitle\n} from '@/components/ui/dialog';\nimport {\n  Select, SelectContent, SelectGroup, SelectItem, SelectLabel, SelectTrigger, SelectValue\n} from '@/components/ui/select';\nimport { Project, Contact, Category } from '@/types/godmode';\nimport {\n  useProjectInvites, useCreateInvite, useGenerateInviteLink, useRevokeInvite,\n  useTeams, useCreateTeam, useDeleteTeam, useUpdateTeam, useAddTeamMember, useRemoveTeamMember,\n  useAcceptInvite, useAuditLog,\n  useProjectActivity, type ActivityEntry,\n  useProjectStats, useActivateProject, useSetDefaultProject,\n  useExportProject, useImportProject,\n  useProjectProviders, useSetProjectProviderKey, useDeleteProjectProviderKey, useValidateProjectProviderKey,\n  useContacts,\n  useDocuments, useSprints, useUpdateDocument,\n  type DocumentItem,\n} from '@/hooks/useGodMode';\n\ntype ProjectTab = 'general' | 'members' | 'roles' | 'categories' | 'invites' | 'teams' | 'providers' | 'documents' | 'activity';\n\nconst projectTabs: { id: ProjectTab; label: string; icon: React.ElementType; count?: number }[] = [\n  { id: 'general', label: 'General', icon: Settings2 },\n  { id: 'members', label: 'Members', icon: Users, count: 0 },\n  { id: 'invites', label: 'Invites', icon: UserPlus },\n  { id: 'teams', label: 'Teams', icon: UsersRound },\n  { id: 'roles', label: 'Roles', icon: ShieldCheck },\n  { id: 'categories', label: 'Categories', icon: SlidersHorizontal },\n  { id: 'providers', label: 'AI Providers', icon: Key },\n  { id: 'documents', label: 'Documents', icon: FolderOpen },\n  { id: 'activity', label: 'Activity', icon: Activity },\n];\n\nconst ProjectsPage = () => {\n  const { projects, refreshProjects, currentProjectId } = useProject();\n  const [selectedProjectId, setSelectedProjectId] = useState<string | null>(null);\n  const activateProject = useActivateProject();\n  const setDefaultProject = useSetDefaultProject();\n  const exportProject = useExportProject();\n  const importProject = useImportProject();\n  const [showImport, setShowImport] = useState(false);\n  const [importData, setImportData] = useState('');\n  const [importName, setImportName] = useState('');\n\n  const selectedProject = projects.find(p => p.id === selectedProjectId) || null;\n  const [showNewForm, setShowNewForm] = useState(projects.length === 0);\n  const [formName, setFormName] = useState('');\n  const [formDesc, setFormDesc] = useState('');\n  const [companies, setCompanies] = useState<{ id: string; name: string }[]>([]);\n  const [selectedCompanyId, setSelectedCompanyId] = useState<string>('');\n  const [newCompanyName, setNewCompanyName] = useState('');\n  const [isCreating, setIsCreating] = useState(false);\n\n  const handleActivate = (projectId: string) => {\n    activateProject.mutate(projectId, {\n      onSuccess: () => { toast.success('Project activated'); refreshProjects(); },\n      onError: () => toast.error('Failed to activate project'),\n    });\n  };\n\n  const handleSetDefault = (projectId: string) => {\n    setDefaultProject.mutate(projectId, {\n      onSuccess: () => { toast.success('Default project set'); refreshProjects(); },\n      onError: () => toast.error('Failed to set default'),\n    });\n  };\n\n  const handleExport = () => {\n    exportProject.mutate(undefined, {\n      onSuccess: (data) => {\n        const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url; a.download = `project-export-${Date.now()}.json`; a.click();\n        URL.revokeObjectURL(url);\n        toast.success('Project exported');\n      },\n      onError: () => toast.error('Export failed'),\n    });\n  };\n\n  const handleImport = () => {\n    try {\n      const parsed = JSON.parse(importData);\n      importProject.mutate({ data: parsed, name: importName || undefined }, {\n        onSuccess: () => { toast.success('Project imported'); setShowImport(false); setImportData(''); setImportName(''); refreshProjects(); },\n        onError: () => toast.error('Import failed'),\n      });\n    } catch {\n      toast.error('Invalid JSON data');\n    }\n  };\n\n  const fetchCompanies = async () => {\n    try {\n      const data = await apiClient.get<{ companies: { id: string; name: string }[] }>('/api/companies');\n      if (data.companies) {\n        setCompanies(data.companies);\n        if (data.companies.length > 0 && !selectedCompanyId) setSelectedCompanyId(data.companies[0].id);\n        else if (data.companies.length === 0) setSelectedCompanyId('__new__');\n      }\n    } catch (error) {\n      console.error('Failed to fetch companies:', error);\n    }\n  };\n\n  useEffect(() => { fetchCompanies(); }, []);\n\n  useEffect(() => {\n    if (projects.length === 0) setShowNewForm(true);\n  }, [projects]);\n\n  const handleCreateProject = async () => {\n    if (!formName.trim()) {\n      toast.error('Please enter a project name.');\n      return;\n    }\n    const isNewCompany = selectedCompanyId === '__new__' || companies.length === 0;\n    if (isNewCompany && !newCompanyName.trim()) {\n      toast.error('Please enter a company name.');\n      return;\n    }\n    if (!isNewCompany && !selectedCompanyId) {\n      toast.error('Please select a company or create a new one.');\n      return;\n    }\n\n    try {\n      setIsCreating(true);\n      const payload: Record<string, string> = {\n        name: formName,\n        description: formDesc,\n      };\n      if (!isNewCompany && selectedCompanyId) {\n        payload.company_id = selectedCompanyId;\n      } else {\n        payload.new_company_name = newCompanyName.trim();\n      }\n      await apiClient.post('/api/projects', payload);\n\n      setFormName('');\n      setFormDesc('');\n      setNewCompanyName('');\n      setSelectedCompanyId('');\n      setShowNewForm(false);\n      refreshProjects();\n      fetchCompanies();\n      toast.success('Project created successfully');\n    } catch (error) {\n      console.error('Failed to create project:', error);\n      // specific error already handled by apiClient for 500s, but we catch it here so we might want to show it if it wasn't shown?\n      // actually apiClient throws, so we can show it here.\n      toast.error(error instanceof Error ? error.message : 'Failed to create project');\n    } finally {\n      setIsCreating(false);\n    }\n  };\n\n  if (selectedProjectId && selectedProject) {\n    return <ProjectDetail project={selectedProject as any} onBack={() => setSelectedProjectId(null)} onUpdate={refreshProjects} />;\n  } else if (selectedProjectId && !selectedProject) {\n    // Project not found (maybe deleted), reset\n    setSelectedProjectId(null);\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center justify-between flex-wrap gap-2\">\n        <h1 className=\"text-lg font-bold text-[var(--gm-text-primary)]\">Projects</h1>\n        <div className=\"flex items-center gap-2\">\n          <button onClick={handleExport} disabled={exportProject.isPending} className={BTN_SECONDARY}>\n            {exportProject.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Download className=\"w-3.5 h-3.5\" />} Export\n          </button>\n          <button onClick={() => setShowImport(!showImport)} className={BTN_SECONDARY}>\n            <Upload className=\"w-3.5 h-3.5\" /> Import\n          </button>\n          <button onClick={() => setShowNewForm(!showNewForm)} className={BTN_PRIMARY}>\n            <Plus className=\"w-3.5 h-3.5\" /> New Project\n          </button>\n        </div>\n      </div>\n\n      {/* Import Form */}\n      <AnimatePresence>\n        {showImport && (\n          <motion.div initial={{ opacity: 0, height: 0 }} animate={{ opacity: 1, height: 'auto' }} exit={{ opacity: 0, height: 0 }}\n            className={cn(CARD, 'p-5')}>\n            <h3 className={SECTION_TITLE}>Import Project</h3>\n            <div className=\"space-y-3 mt-3\">\n              <div>\n                <label className={LABEL}>Project Name (optional)</label>\n                <input value={importName} onChange={e => setImportName(e.target.value)} placeholder=\"Project name...\" className={INPUT} />\n              </div>\n              <div>\n                <label className={LABEL}>JSON Data</label>\n                <textarea value={importData} onChange={e => setImportData(e.target.value)} placeholder=\"Paste exported JSON data here...\" rows={5}\n                  className={cn(INPUT, 'resize-none font-mono')} />\n              </div>\n              <div className=\"flex gap-2 justify-end\">\n                <button onClick={() => setShowImport(false)} className={BTN_SECONDARY}>Cancel</button>\n                <button onClick={handleImport} disabled={importProject.isPending || !importData.trim()} className={BTN_PRIMARY}>\n                  {importProject.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Upload className=\"w-3.5 h-3.5\" />} Import\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Create Form */}\n      <AnimatePresence>\n        {showNewForm && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: 'auto' }}\n            exit={{ opacity: 0, height: 0 }}\n            className={cn(CARD, 'p-5')}\n          >\n            <h3 className={SECTION_TITLE}>Create New Project</h3>\n            <div className=\"space-y-3 mt-3\">\n              <div>\n                <label className={LABEL}>Project Name *</label>\n                <input value={formName} onChange={(e) => setFormName(e.target.value)} placeholder=\"Project name...\" className={INPUT} />\n              </div>\n              <div>\n                <label className={LABEL}>Description</label>\n                <textarea value={formDesc} onChange={(e) => setFormDesc(e.target.value)} placeholder=\"Description...\" rows={2} className={cn(INPUT, 'resize-none')} />\n              </div>\n              <div>\n                <label className={LABEL}>Company</label>\n                <select\n                  value={selectedCompanyId}\n                  onChange={(e) => {\n                    setSelectedCompanyId(e.target.value);\n                    if (e.target.value !== '__new__') setNewCompanyName('');\n                  }}\n                  className={INPUT}\n                >\n                  {companies.length > 0 && <option value=\"\">Select a company...</option>}\n                  {companies.map(c => (\n                    <option key={c.id} value={c.id}>{c.name}</option>\n                  ))}\n                  <option value=\"__new__\">+ Create new company</option>\n                </select>\n                {(selectedCompanyId === '__new__' || companies.length === 0) && (\n                  <input\n                    value={newCompanyName}\n                    onChange={(e) => setNewCompanyName(e.target.value)}\n                    placeholder=\"New company name...\"\n                    className={cn(INPUT, 'mt-2')}\n                    autoFocus\n                  />\n                )}\n              </div>\n              <div className=\"flex gap-2 justify-end pt-2\">\n                <button onClick={() => setShowNewForm(false)} className={BTN_SECONDARY}>Cancel</button>\n                <button onClick={handleCreateProject} disabled={isCreating} className={BTN_PRIMARY}>\n                  {isCreating ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Plus className=\"w-3.5 h-3.5\" />}\n                  {isCreating ? 'Creating...' : 'Create'}\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Projects List */}\n      <div className=\"space-y-3\">\n        {projects.length === 0 && !showNewForm && (\n          <div className={cn(CARD, 'p-8 text-center')}>\n            <FolderOpen className=\"w-10 h-10 mx-auto text-[var(--gm-text-placeholder)] mb-3\" />\n            <p className=\"text-sm text-[var(--gm-text-secondary)]\">No projects yet</p>\n            <p className=\"text-xs text-[var(--gm-text-tertiary)] mt-1\">Click \"New Project\" above to get started</p>\n          </div>\n        )}\n        {projects.map((project, i) => {\n          const isActive = currentProjectId === project.id;\n          const isDefault = (project as Record<string, unknown>).is_default === true;\n          return (\n            <motion.div\n              key={project.id}\n              initial={{ opacity: 0, y: 15 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: i * 0.06 }}\n              className={cn(CARD, 'p-5',\n                isActive && 'border-[var(--gm-accent-primary)]/40 ring-1 ring-[var(--gm-accent-primary)]/20')}\n            >\n              <div className=\"flex items-center justify-between gap-4\">\n                <div className=\"flex items-center gap-3 flex-1 min-w-0\">\n                  <div className={cn('w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0',\n                    isActive ? 'bg-[var(--gm-interactive-primary)]/10' : 'bg-[var(--gm-bg-tertiary)]')}>\n                    <FolderOpen className={cn('w-5 h-5', isActive ? 'text-[var(--gm-accent-primary)]' : 'text-[var(--gm-text-tertiary)]')} />\n                  </div>\n                  <div className=\"min-w-0\">\n                    <div className=\"flex items-center gap-2\">\n                      <h3 className=\"text-sm font-semibold text-[var(--gm-text-primary)]\">{project.name || '(unnamed project)'}</h3>\n                      {isActive && (\n                        <span className=\"text-[9px] font-bold uppercase tracking-wider px-1.5 py-0.5 rounded bg-[var(--gm-interactive-primary)]/10 text-[var(--gm-accent-primary)]\">Active</span>\n                      )}\n                      {isDefault && (\n                        <span className=\"text-[9px] font-bold uppercase tracking-wider px-1.5 py-0.5 rounded bg-amber-500/10 text-amber-500 flex items-center gap-0.5\"><Star className=\"w-2.5 h-2.5\" /> Default</span>\n                      )}\n                    </div>\n                    <p className=\"text-[10px] text-[var(--gm-text-tertiary)] font-mono\">{project.id}</p>\n                    {project.description && <p className=\"text-[10px] text-[var(--gm-text-tertiary)] mt-0.5 truncate max-w-md\">{project.description}</p>}\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-2 flex-shrink-0\">\n                  {!isActive && (\n                    <button onClick={() => handleActivate(project.id)} disabled={activateProject.isPending}\n                      className=\"inline-flex items-center gap-1 px-2.5 py-1 rounded-lg bg-[var(--gm-interactive-primary)]/10 text-[var(--gm-accent-primary)] text-[10px] font-medium hover:bg-[var(--gm-interactive-primary)]/20 transition-colors\">\n                      <Play className=\"w-3 h-3\" /> Switch\n                    </button>\n                  )}\n                  {!isDefault && (\n                    <button onClick={() => handleSetDefault(project.id)} disabled={setDefaultProject.isPending}\n                      className={BTN_SECONDARY} title=\"Set as default project\">\n                      <Star className=\"w-3 h-3\" />\n                    </button>\n                  )}\n                  <button onClick={() => setSelectedProjectId(project.id)} className={BTN_SECONDARY}>\n                    <Edit2 className=\"w-3 h-3\" /> Edit\n                  </button>\n                </div>\n              </div>\n            </motion.div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\n// ==================== PROJECT DETAIL ====================\n\n// ==================== PROJECT DETAIL ====================\n\nfunction ProjectDetail({ project, onBack, onUpdate }: { project: Project; onBack: () => void; onUpdate: () => void }) {\n  const [activeTab, setActiveTab] = useState<ProjectTab>('general');\n  const [members, setMembers] = useState<ProjectMember[]>([]);\n  const [loadingMembers, setLoadingMembers] = useState(false);\n\n  const fetchMembers = async () => {\n    try {\n      setLoadingMembers(true);\n      const data = await apiClient.get<{ members: ProjectMember[] }>(`/api/projects/${project.id}/members`);\n      if (data.members) {\n        setMembers(data.members);\n      }\n    } catch (error) {\n      console.error('Failed to fetch members:', error);\n    } finally {\n      setLoadingMembers(false);\n    }\n  };\n\n  const handleUpdate = () => {\n    onUpdate();\n    if (activeTab === 'members') fetchMembers();\n  };\n\n  useEffect(() => {\n    fetchMembers();\n  }, [project.id]);\n\n  return (\n    <div className=\"space-y-4\">\n      <button onClick={onBack} className=\"flex items-center gap-1.5 text-xs text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors mb-2\">\n        <ArrowLeft className=\"w-3.5 h-3.5\" /> Back to Projects\n      </button>\n\n      {/* Header */}\n      <div className=\"flex items-center gap-4\">\n        <div className=\"w-12 h-12 rounded-xl bg-[var(--gm-interactive-primary)]/10 flex items-center justify-center\">\n          <FolderOpen className=\"w-6 h-6 text-[var(--gm-accent-primary)]\" />\n        </div>\n        <div>\n          <h1 className=\"text-lg font-bold text-[var(--gm-text-primary)]\">{project.name || '(unnamed project)'}</h1>\n          <p className=\"text-xs text-[var(--gm-text-tertiary)]\">{project.description || 'No description'}</p>\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"flex border-b border-[var(--gm-border-primary)] overflow-x-auto\">\n        {projectTabs.map(tab => (\n          <button\n            key={tab.id}\n            onClick={() => setActiveTab(tab.id)}\n            className={`flex items-center gap-1.5 px-3 py-2.5 text-xs font-medium transition-colors border-b-2 whitespace-nowrap ${activeTab === tab.id\n              ? 'text-[var(--gm-accent-primary)] border-[var(--gm-accent-primary)]'\n              : 'text-[var(--gm-text-tertiary)] border-transparent hover:text-[var(--gm-text-primary)]'\n              }`}\n          >\n            <tab.icon className=\"w-4 h-4\" />\n            {tab.label}\n            {(tab.id === 'members' ? members.length : tab.count) !== undefined && (\n              <span className=\"text-[10px] bg-[var(--gm-bg-tertiary)] px-1.5 py-0.5 rounded-full\">\n                {tab.id === 'members' ? members.length : tab.count}\n              </span>\n            )}\n          </button>\n        ))}\n      </div>\n\n      {/* Tab Content */}\n      <div>\n        {activeTab === 'general' && <GeneralTab project={project} onUpdate={onUpdate} onBack={onBack} />}\n        {activeTab === 'members' && (\n          <MembersTab\n            project={project}\n            members={members}\n            loading={loadingMembers}\n            onUpdate={fetchMembers}\n          />\n        )}\n        {activeTab === 'roles' && (\n          <RolesTab\n            project={project}\n            onUpdate={handleUpdate}\n          />\n        )}\n        {activeTab === 'categories' && (\n          <CategoriesTab\n            project={project}\n            members={members}\n            onUpdate={onUpdate}\n          />\n        )}\n        {activeTab === 'invites' && <InvitesTab projectId={project.id} />}\n        {activeTab === 'teams' && <TeamsTab />}\n        {activeTab === 'providers' && <ProvidersTab projectId={project.id} />}\n        {activeTab === 'documents' && <ProjectDocumentsTab />}\n        {activeTab === 'activity' && <ActivityTab projectId={project.id} />}\n      </div>\n    </div>\n  );\n}\n\n// ==================== GENERAL TAB ====================\n\nfunction ProjectStatsBar({ projectId }: { projectId: string }) {\n  const { data, isLoading } = useProjectStats(projectId);\n  if (isLoading || !data) return null;\n  const stats = data as Record<string, unknown>;\n  const items = Object.entries(stats).filter(([, v]) => typeof v === 'number').slice(0, 8);\n  if (items.length === 0) return null;\n  return (\n    <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-2 mb-4\">\n      {items.map(([key, val]) => (\n        <div key={key} className=\"bg-[var(--gm-bg-tertiary)] rounded-lg px-3 py-2 text-center\">\n          <p className=\"text-lg font-bold text-[var(--gm-text-primary)]\">{String(val)}</p>\n          <p className=\"text-[10px] text-[var(--gm-text-tertiary)] capitalize\">{key.replace(/[_-]/g, ' ')}</p>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nfunction GeneralTab({ project, onUpdate, onBack }: { project: any; onUpdate: () => void; onBack: () => void }) {\n  const [name, setName] = useState(project.name);\n  const [description, setDescription] = useState(project.description);\n  const [role, setRole] = useState(project.role || '');\n  const [rolePrompt, setRolePrompt] = useState(project.rolePrompt || '');\n  const [company, setCompany] = useState(project.company_id || project.company?.id || '');\n  const [saving, setSaving] = useState(false);\n  const [deleting, setDeleting] = useState(false);\n  const [confirmDelete, setConfirmDelete] = useState(false);\n  const [roleTemplates, setRoleTemplates] = useState<{ id: string; name: string; display_name?: string }[]>([]);\n  const [companies, setCompanies] = useState<{ id: string; name: string; logo_url?: string }[]>([]);\n\n  useEffect(() => {\n    apiClient.get<{ roles: any[] }>('/api/role-templates')\n      .then(data => setRoleTemplates(data.roles || []))\n      .catch(() => {});\n    apiClient.get<{ companies: { id: string; name: string; logo_url?: string }[] }>('/api/companies')\n      .then(data => { if (data.companies) setCompanies(data.companies); })\n      .catch(() => {});\n  }, []);\n\n  const handleSave = async () => {\n    if (!name.trim()) {\n      toast.error('Project name is required');\n      return;\n    }\n    setSaving(true);\n    try {\n      await apiClient.put(`/api/projects/${project.id}`, {\n        name, description, role, rolePrompt, company_id: company,\n      });\n      toast.success('Project updated');\n      onUpdate();\n    } catch (err: any) {\n      toast.error(err.message || 'Failed to update project');\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const handleDelete = async () => {\n    setDeleting(true);\n    try {\n      await apiClient.delete(`/api/projects/${project.id}`);\n      toast.success('Project deleted');\n      onUpdate();\n      onBack();\n    } catch (err: any) {\n      toast.error(err.message || 'Failed to delete project');\n    } finally {\n      setDeleting(false);\n      setConfirmDelete(false);\n    }\n  };\n\n  return (\n    <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"space-y-4\">\n      <ProjectStatsBar projectId={project.id} />\n      <div className={cn(CARD, 'p-5 space-y-5')}>\n        <div>\n          <label className={LABEL}>\n            <FolderOpen className=\"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]\" /> Project Name *\n          </label>\n          <Input value={name} onChange={e => setName(e.target.value)} className=\"bg-[var(--gm-bg-tertiary)] border-[var(--gm-border-primary)] text-sm\" />\n        </div>\n\n        <div>\n          <label className={LABEL}>\n            â‰¡ Description\n          </label>\n          <textarea\n            value={description}\n            onChange={e => setDescription(e.target.value)}\n            placeholder=\"Brief description of the project\"\n            rows={4}\n            className={cn(INPUT, 'resize-y')}\n          />\n        </div>\n\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n          <div>\n            <label className={LABEL}>\n              <User className=\"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]\" /> Your Role\n            </label>\n            <Select value={role} onValueChange={setRole}>\n              <SelectTrigger className=\"bg-[var(--gm-bg-tertiary)] border-[var(--gm-border-primary)] text-sm\">\n                <SelectValue placeholder=\"Select role...\" />\n              </SelectTrigger>\n              <SelectContent>\n                {roleTemplates.filter(r => r.name || r.display_name).map(r => (\n                  <SelectItem key={r.id || r.name} value={r.display_name || r.name}>\n                    {r.display_name || r.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n            <p className=\"text-[10px] text-[var(--gm-text-tertiary)] mt-1\">Your role in this project (used for AI context)</p>\n          </div>\n          <div>\n            <label className={LABEL}>\n              ðŸ’¬ Role Prompt\n            </label>\n            <Input value={rolePrompt} onChange={e => setRolePrompt(e.target.value)} className=\"bg-[var(--gm-bg-tertiary)] border-[var(--gm-border-primary)] text-sm\" />\n            <p className=\"text-[10px] text-[var(--gm-text-tertiary)] mt-1\">Brief description of your responsibilities</p>\n          </div>\n        </div>\n\n        <div>\n          <label className={LABEL}>\n            <FolderOpen className=\"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]\" /> Company\n          </label>\n          <Select value={company} onValueChange={setCompany}>\n            <SelectTrigger className=\"bg-[var(--gm-bg-tertiary)] border-[var(--gm-border-primary)] text-sm\">\n              <SelectValue placeholder=\"Select company...\" />\n            </SelectTrigger>\n            <SelectContent>\n              {companies.map(c => (\n                <SelectItem key={c.id} value={c.id}>{c.name}</SelectItem>\n              ))}\n            </SelectContent>\n          </Select>\n          <p className=\"text-[10px] text-[var(--gm-text-tertiary)] mt-1\">Templates and branding from this company will be used in reports</p>\n        </div>\n\n        <div className=\"flex justify-end pt-2\">\n          <button\n            onClick={handleSave}\n            disabled={saving}\n            className={BTN_PRIMARY}\n          >\n            {saving ? <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" /> : <Check className=\"w-4 h-4\" />}\n            {saving ? 'Saving...' : 'Save Changes'}\n          </button>\n        </div>\n      </div>\n\n      {/* Danger Zone */}\n      <div className=\"border border-[var(--color-danger-500)]/30 bg-[var(--color-danger-500)]/5 rounded-xl p-5\">\n        <h3 className=\"text-sm font-semibold text-[var(--color-danger-500)] mb-1 flex items-center gap-2\">\n          <AlertTriangle className=\"w-4 h-4\" /> Danger Zone\n        </h3>\n        <p className=\"text-xs text-[var(--gm-text-tertiary)] mb-3\">Deleting a project will permanently remove all associated data including questions, decisions, risks, and contacts.</p>\n        {!confirmDelete ? (\n          <button\n            onClick={() => setConfirmDelete(true)}\n            className=\"flex items-center gap-2 px-4 py-2 rounded-lg border border-[var(--color-danger-500)]/30 text-[var(--color-danger-500)] text-sm font-medium hover:bg-[var(--color-danger-500)]/10 transition-colors\"\n          >\n            <Trash2 className=\"w-4 h-4\" /> Delete Project\n          </button>\n        ) : (\n          <div className=\"flex items-center gap-2\">\n            <button\n              onClick={handleDelete}\n              disabled={deleting}\n              className={BTN_DANGER}\n            >\n              {deleting ? <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" /> : <Trash2 className=\"w-4 h-4\" />}\n              {deleting ? 'Deleting...' : 'Confirm Delete'}\n            </button>\n            <button\n              onClick={() => setConfirmDelete(false)}\n              className={BTN_SECONDARY}\n            >\n              Cancel\n            </button>\n          </div>\n        )}\n      </div>\n    </motion.div>\n  );\n}\n\n// ==================== MEMBERS TAB ====================\n\nimport { apiClient } from '@/lib/api-client';\nimport { format } from 'date-fns';\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\n\n// ... existing imports ...\n\ninterface ProjectMember {\n  user_id: string;\n  role: string;\n  user_role?: string;\n  joined_at: string;\n  display_name?: string;\n  username?: string;\n  avatar_url?: string;\n  linked_contact?: {\n    id: string;\n    name: string;\n    email?: string;\n    organization?: string;\n    avatar_url?: string;\n  } | null;\n}\n\nfunction MembersTab({\n  project,\n  members,\n  loading,\n  onUpdate\n}: {\n  project: Project;\n  members: ProjectMember[];\n  loading: boolean;\n  onUpdate: () => void;\n}) {\n  const [showInviteModal, setShowInviteModal] = useState(false);\n  const [removing, setRemoving] = useState<string | null>(null);\n  const [memberToRemove, setMemberToRemove] = useState<ProjectMember | null>(null);\n  const [viewMode, setViewMode] = useState<'list' | 'teams'>('list');\n  const [categories, setCategories] = useState<Category[]>([]);\n  const [loadingCategories, setLoadingCategories] = useState(false);\n\n  useEffect(() => {\n    fetchCategories();\n  }, [project.id]);\n\n  const fetchCategories = async () => {\n    try {\n      setLoadingCategories(true);\n      const data = await apiClient.get<Category[]>(`/api/projects/${project.id}/categories`);\n      setCategories(data);\n    } catch (error) {\n      console.error('Failed to fetch categories:', error);\n    } finally {\n      setLoadingCategories(false);\n    }\n  };\n\n  const handleRemoveMember = async () => {\n    if (!memberToRemove) return;\n\n    try {\n      setRemoving(memberToRemove.user_id);\n      await apiClient.delete(`/api/projects/${project.id}/members/${memberToRemove.user_id}`);\n      onUpdate();\n    } catch (error) {\n      console.error('Failed to remove member:', error);\n      toast.error('Failed to remove member');\n    } finally {\n      setRemoving(null);\n      setMemberToRemove(null);\n    }\n  };\n\n  const handleRoleChange = async (userId: string, newRoleName: string) => {\n    try {\n      // We need to determine if this newRoleName corresponds to a system role or a custom role title.\n      // But based on the error, let's assume `role` column is restricted (enum) and `user_role` is the free text title.\n      // However, roles defined in settings are \"Project Roles\". \n      // If the backend 400s on `role`, it's likely an enum constraint.\n      // Let's try updating `user_role` instead if the `role` is just \"member\".\n\n      // WAIT: The roles in settings have IDs and Names. \n      // If we are assigning a \"Role\" to a user, are we assigning the `role` (enum) or `user_role` (title)?\n      // If the project allows custom roles, `role` in DB should probably be 'member' and `user_role` should be 'Designer'.\n      // OR `role` should be a foreign key to something? No, it's usually text.\n\n      // Strategy: Try to update `user_role` with the role name, and keep `role` as 'member' (or whatever it was).\n      // But the UI shows `member.role`. \n\n      // Let's try sending BOTH, or just `user_role`. \n      // If I look at `handleUpdate` in `ProjectsPage.tsx`, it uses `role`?\n\n      // Let's try updating `role` AND `user_role` to be safe, or just `user_role` if `role` fails.\n      // Actually, looking at the error `400 Bad Request`, it confirms a constraint.\n\n      // I will update `user_role` property in the PUT request.\n      // Update only user_role to avoid 400 Bad Request (system role constraint)\n      await apiClient.put(`/api/projects/${project.id}/members/${userId}`, {\n        user_role: newRoleName\n      });\n      onUpdate();\n    } catch (error) {\n      console.error('Failed to update member role:', error);\n    }\n  };\n\n  // Group members by category based on their role\n  const getTeamMembers = (category: Category) => {\n    return members.filter(m => {\n      const memberRole = m.user_role || m.role;\n      const role = project.settings?.roles?.find(r => r.name === memberRole);\n\n      // DEBUG: Log mismatch failures for first member to reduce spam\n      // if (m === members[0]) {\n      //   console.log('Checking member:', m.display_name, 'Role:', memberRole, 'FoundRole:', role, 'CatID:', category.id, 'Match:', role?.category === category.id);\n      // }\n\n      const match = role?.category === category.id;\n      if (match) return true;\n      return false;\n    });\n  };\n\n  // Drag and Drop Handlers\n  const handleDragStart = (e: React.DragEvent, memberId: string) => {\n    e.dataTransfer.setData('text/plain', memberId);\n    e.dataTransfer.effectAllowed = 'move';\n  };\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  };\n\n  const handleDrop = async (e: React.DragEvent, targetCategoryId: string | null) => {\n    e.preventDefault();\n    const memberId = e.dataTransfer.getData('text/plain');\n    if (!memberId) return;\n\n    // Find member\n    const member = members.find(m => m.user_id === memberId);\n    if (!member) return;\n\n    // Determine new role\n    let newRoleName = '';\n    if (targetCategoryId) {\n      // Find existing role in this category or default to first available\n      const categoryRoles = project.settings?.roles?.filter(r => r.category === targetCategoryId) || [];\n      if (categoryRoles.length > 0) {\n        newRoleName = categoryRoles[0].name;\n      } else {\n        // check if there is a 'Member' role for this category\n        const defaultRole = categoryRoles.find(r => r.name === 'Member') || categoryRoles[0];\n        newRoleName = defaultRole?.name || 'Member'; // fallback to Member if no specific roles\n      }\n    } else {\n      // Dropped on \"Unassigned\" - clear role\n      newRoleName = '';\n    }\n\n    const currentRole = member.user_role || member.role;\n    if (newRoleName !== currentRole) {\n      await handleRoleChange(memberId, newRoleName);\n    }\n  };\n\n  const getUnassignedMembers = () => {\n    return members.filter(m => {\n      const memberRole = m.user_role || m.role;\n      const role = project.settings?.roles?.find(r => r.name === memberRole);\n\n      const isUnassigned = !role || !role.category || !categories.find(c => c.id === role.category);\n      if (isUnassigned && m.display_name === 'RPAD') { // Debug specific user\n        console.log('Unassigned Debug (RPAD):', { memberRole, roleFound: !!role, roleCategory: role?.category, catExists: !!categories.find(c => c.id === role?.category) });\n      }\n      return isUnassigned;\n    });\n  };\n\n  const setCategoryLead = async (categoryId: string, userId: string) => {\n    try {\n      const updatedSettings = {\n        ...project.settings,\n        category_leads: {\n          ...project.settings?.category_leads,\n          [categoryId]: userId\n        }\n      };\n      await apiClient.put(`/api/projects/${project.id}`, { settings: updatedSettings });\n      onUpdate(); // Trigger parent refresh to update project context\n    } catch (error) {\n      console.error('Failed to set lead:', error);\n      toast.error('Failed to set team lead');\n    }\n  };\n\n  const existingContactIds = members\n    .map(m => m.linked_contact?.id)\n    .filter((id): id is string => !!id);\n\n  return (\n    <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"space-y-4\">\n      <div className={cn(CARD, 'p-5')}>\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center gap-4\">\n            <h3 className=\"text-sm font-semibold text-[var(--gm-text-primary)] flex items-center gap-2\">\n              <Users className=\"w-4 h-4\" /> TEAM MEMBERS ({members.length})\n            </h3>\n            <div className=\"flex bg-[var(--gm-bg-tertiary)] rounded-lg p-0.5\">\n              <button\n                onClick={() => setViewMode('list')}\n                className={`px-3 py-1.5 rounded-md text-xs font-medium transition-colors ${viewMode === 'list' ? 'bg-[var(--gm-surface-primary)] text-[var(--gm-text-primary)] shadow-[var(--shadow-sm)]' : 'text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)]'\n                  }`}\n              >\n                List\n              </button>\n              <button\n                onClick={() => setViewMode('teams')}\n                className={`px-3 py-1.5 rounded-md text-xs font-medium transition-colors ${viewMode === 'teams' ? 'bg-[var(--gm-surface-primary)] text-[var(--gm-text-primary)] shadow-[var(--shadow-sm)]' : 'text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)]'\n                  }`}\n              >\n                Teams\n              </button>\n            </div>\n          </div>\n          <button\n            onClick={() => setShowInviteModal(true)}\n            className={BTN_PRIMARY}\n          >\n            <Users className=\"w-4 h-4\" /> Invite\n          </button>\n        </div>\n\n        {loading || loadingCategories ? (\n          <div className=\"flex justify-center py-8\">\n            <div className=\"w-6 h-6 border-2 border-[var(--gm-accent-primary)] border-t-transparent rounded-full animate-spin\" />\n          </div>\n        ) : members.length === 0 ? (\n          <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n            <div className=\"w-16 h-16 rounded-full bg-[var(--gm-bg-tertiary)] flex items-center justify-center mb-3\">\n              <Users className=\"w-8 h-8 text-[var(--gm-text-tertiary)]\" />\n            </div>\n            <p className=\"text-sm text-[var(--gm-text-tertiary)] mb-4\">No team members yet</p>\n            <button\n              onClick={() => setShowInviteModal(true)}\n              className={BTN_PRIMARY}\n            >\n              Invite Member\n            </button>\n          </div>\n        ) : viewMode === 'list' ? (\n          <div className=\"grid gap-3\">\n            {members.map((member) => (\n              <div key={member.user_id} className=\"flex items-center justify-between p-3 rounded-lg border border-[var(--gm-border-primary)] bg-[var(--gm-bg-tertiary)]/20 hover:bg-[var(--gm-bg-tertiary)]/40 transition-colors\">\n                <div className=\"flex items-center gap-3\">\n                  {isValidAvatarUrl(member.avatar_url) || isValidAvatarUrl(member.linked_contact?.avatar_url) ? (\n                    <img\n                      src={(isValidAvatarUrl(member.avatar_url) ? member.avatar_url : member.linked_contact?.avatar_url)!}\n                      alt={member.display_name || member.linked_contact?.name || 'Member'}\n                      className=\"w-10 h-10 rounded-full object-cover bg-[var(--gm-bg-tertiary)]\"\n                    />\n                  ) : (\n                    <div className=\"w-10 h-10 rounded-full bg-[var(--gm-interactive-primary)]/10 flex items-center justify-center text-[var(--gm-accent-primary)] font-bold\">\n                      {getInitials(member.display_name || member.username || member.linked_contact?.name)}\n                    </div>\n                  )}\n                  <div>\n                    <h4 className=\"text-sm font-medium text-[var(--gm-text-primary)]\">\n                      {member.display_name || member.linked_contact?.name || member.username || 'Unknown User'}\n                    </h4>\n                    <div className=\"flex items-center gap-2 text-xs text-[var(--gm-text-tertiary)]\">\n                      <span>{member.user_role || member.role}</span>\n                      {member.linked_contact?.organization && (\n                        <>\n                          <span>â€¢</span>\n                          <span>{member.linked_contact.organization}</span>\n                        </>\n                      )}\n                    </div>\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"text-xs text-right text-[var(--gm-text-tertiary)]\">\n                    <p>Joined {member.joined_at ? new Date(member.joined_at).toLocaleDateString() : 'â€”'}</p>\n                  </div>\n                  <button\n                    onClick={() => setMemberToRemove(member)}\n                    disabled={removing === member.user_id}\n                    className=\"p-2 text-[var(--gm-text-tertiary)] hover:text-[var(--color-danger-500)] transition-colors disabled:opacity-50\"\n                  >\n                    {removing === member.user_id ? (\n                      <div className=\"w-4 h-4 border-2 border-[var(--color-danger-500)] border-t-transparent rounded-full animate-spin\" />\n                    ) : (\n                      <Trash2 className=\"w-4 h-4\" />\n                    )}\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <div className=\"space-y-4\">\n            {categories.map((category) => {\n              const teamMembers = getTeamMembers(category);\n              const leadId = project.settings?.category_leads?.[category.id];\n              const lead = members.find(m => m.user_id === leadId);\n\n              return (\n                <motion.div\n                  key={category.id}\n                  initial={{ opacity: 0, y: 15 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  className={cn(CARD, 'p-5')}\n                  onDragOver={handleDragOver}\n                  onDrop={(e) => handleDrop(e, category.id)}\n                >\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className={`p-2 rounded-lg bg-${category.color || 'blue'}-500/10 text-${category.color || 'blue'}-500`}>\n                        <Users className=\"w-5 h-5\" />\n                      </div>\n                      <div>\n                        <h3 className=\"text-base font-semibold text-[var(--gm-text-primary)] flex items-center gap-2\">\n                          {category.display_name}\n                          <span className=\"text-[10px] px-2 py-0.5 rounded-full bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)]\">{teamMembers.length}</span>\n                        </h3>\n                        {lead && (\n                          <p className=\"text-xs text-[var(--gm-text-tertiary)] flex items-center gap-1\">\n                            <ShieldCheck className=\"w-3 h-3 text-amber-500\" />\n                            Lead: <span className=\"font-medium text-[var(--gm-text-primary)]\">{lead.display_name}</span>\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-2\">\n                    {teamMembers.map((m) => {\n                      const isLead = leadId === m.user_id;\n                      return (\n                        <div\n                          key={m.user_id}\n                          className={`flex items-center gap-4 p-3 rounded-xl border transition-all cursor-grab active:cursor-grabbing group relative ${isLead ? 'bg-amber-500/5 border-amber-500/20' : 'bg-[var(--gm-bg-primary)] border-[var(--gm-border-primary)] hover:border-[var(--gm-accent-primary)]/30'\n                            }`}\n                          draggable={true}\n                          onDragStart={(e) => handleDragStart(e, m.user_id)}\n                        >\n                          {/* Avatar */}\n                          <div className=\"relative\">\n                            {isValidAvatarUrl(m.avatar_url) || isValidAvatarUrl(m.linked_contact?.avatar_url) ? (\n                              <img\n                                src={(isValidAvatarUrl(m.avatar_url) ? m.avatar_url : m.linked_contact?.avatar_url)!}\n                                alt={m.display_name}\n                                className=\"w-10 h-10 rounded-full object-cover border border-[var(--gm-border-primary)]\"\n                              />\n                            ) : (\n                              <div className=\"w-10 h-10 rounded-full bg-[var(--gm-bg-tertiary)] flex items-center justify-center text-sm font-bold text-[var(--gm-text-tertiary)] border border-[var(--gm-border-primary)]\">\n                                {getInitials(m.display_name)}\n                              </div>\n                            )}\n                            {isLead && (\n                              <div className=\"absolute -bottom-1 -right-1 bg-amber-500 text-white rounded-full p-0.5 border-2 border-[var(--gm-bg-primary)]\">\n                                <ShieldCheck className=\"w-3 h-3\" />\n                              </div>\n                            )}\n                          </div>\n\n                          {/* Info */}\n                          <div className=\"flex-1 min-w-0\">\n                            <div className=\"flex items-center gap-2\">\n                              <h4 className=\"text-sm font-medium text-[var(--gm-text-primary)] truncate\">{m.display_name}</h4>\n                              {m.linked_contact?.organization && (\n                                <span className=\"text-[10px] px-1.5 py-0.5 rounded bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)] truncate max-w-[100px]\">\n                                  {m.linked_contact.organization}\n                                </span>\n                              )}\n                            </div>\n\n                            <div className=\"flex items-center gap-2 mt-0.5\">\n                              <Select\n                                value={m.user_role || m.role || ''}\n                                onValueChange={(value) => handleRoleChange(m.user_id, value === 'no-role' ? '' : value)}\n                              >\n                                <SelectTrigger className=\"h-5 text-[11px] bg-transparent border-none p-0 text-[var(--gm-text-tertiary)] focus:ring-0 shadow-none w-auto gap-1 hover:text-[var(--gm-text-primary)]\">\n                                  <SelectValue placeholder=\"No Role\" />\n                                </SelectTrigger>\n                                <SelectContent>\n                                  <SelectItem value=\"no-role\">No Role</SelectItem>\n                                  {categories.map(cat => {\n                                    const catRoles = project.settings?.roles?.filter(r => r.category === cat.id) || [];\n                                    if (catRoles.length === 0) return null;\n                                    return (\n                                      <SelectGroup key={cat.id}>\n                                        <SelectLabel className=\"text-[10px] font-bold text-[var(--gm-text-tertiary)] px-2 py-1.5\">{cat.display_name}</SelectLabel>\n                                        {catRoles.map(r => (\n                                          <SelectItem key={r.id} value={r.name} className=\"text-[10px]\">{r.name}</SelectItem>\n                                        ))}\n                                      </SelectGroup>\n                                    );\n                                  })}\n                                </SelectContent>\n                              </Select>\n                            </div>\n                          </div>\n\n                          {/* Actions */}\n                          <div className=\"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity\">\n                            <button\n                              onClick={(e) => {\n                                e.preventDefault();\n                                e.stopPropagation();\n                                setCategoryLead(category.id, m.user_id);\n                              }}\n                              className={`p-2 rounded-lg transition-colors ${isLead\n                                ? 'text-amber-500 bg-amber-500/10 hover:bg-amber-500/20'\n                                : 'text-[var(--gm-text-tertiary)] hover:text-amber-500 hover:bg-amber-500/10'\n                                }`}\n                              title={isLead ? \"Current Team Lead\" : \"Make Team Lead\"}\n                            >\n                              <ShieldCheck className=\"w-4 h-4\" />\n                            </button>\n                            <div className=\"w-px h-4 bg-[var(--gm-border-primary)] mx-1\" />\n                            <div className=\"p-2 text-[var(--gm-text-tertiary)] cursor-grab active:cursor-grabbing\">\n                              <GripVertical className=\"w-4 h-4\" />\n                            </div>\n                          </div>\n                        </div>\n                      );\n                    })}\n                    {teamMembers.length === 0 && (\n                      <div className=\"flex flex-col items-center justify-center py-8 text-center border border-dashed border-[var(--gm-border-primary)]/50 rounded-xl bg-[var(--gm-bg-tertiary)]/5\">\n                        <Users className=\"w-8 h-8 text-[var(--gm-text-tertiary)]/30 mb-2\" />\n                        <p className=\"text-xs text-[var(--gm-text-tertiary)]\">Drag members here to assign them to {category.display_name}</p>\n                      </div>\n                    )}\n                  </div>\n                </motion.div>\n              );\n            })}\n\n            {/* Unassigned Section */}\n            {getUnassignedMembers().length > 0 && (\n              <motion.div\n                initial={{ opacity: 0, y: 15 }}\n                animate={{ opacity: 1, y: 0 }}\n                className=\"bg-[var(--gm-surface-primary)] border border-[var(--gm-border-primary)] border-dashed rounded-xl p-5\"\n                onDragOver={handleDragOver}\n                onDrop={(e) => handleDrop(e, null)}\n              >\n                <h3 className=\"text-sm font-semibold text-[var(--gm-text-primary)] mb-3 flex items-center gap-2\">\n                  <div className=\"w-2 h-2 rounded-full bg-amber-500 animate-pulse\" />\n                  Unassigned Members\n                  <span className=\"text-[10px] bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)] px-2 py-0.5 rounded-full\">{getUnassignedMembers().length}</span>\n                </h3>\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3\">\n                  {getUnassignedMembers().map((m) => (\n                    <div\n                      key={m.user_id}\n                      className=\"flex items-center gap-3 bg-[var(--gm-bg-tertiary)]/10 border border-[var(--gm-border-primary)]/50 hover:border-amber-500/50 rounded-xl p-3 cursor-grab active:cursor-grabbing group relative transition-colors\"\n                      draggable={true}\n                      onDragStart={(e) => handleDragStart(e, m.user_id)}\n                    >\n                      {/* Avatar */}\n                      <div className=\"relative\">\n                        {isValidAvatarUrl(m.avatar_url) || isValidAvatarUrl(m.linked_contact?.avatar_url) ? (\n                          <img\n                            src={(isValidAvatarUrl(m.avatar_url) ? m.avatar_url : m.linked_contact?.avatar_url)!}\n                            alt={m.display_name}\n                            className=\"w-10 h-10 rounded-full object-cover border border-[var(--gm-border-primary)]\"\n                          />\n                        ) : (\n                          <div className=\"w-10 h-10 rounded-full bg-[var(--gm-bg-tertiary)] flex items-center justify-center text-sm font-bold text-[var(--gm-text-tertiary)] border border-[var(--gm-border-primary)]\">\n                            {(m.display_name?.[0] || '?').toUpperCase()}\n                          </div>\n                        )}\n                        <div className=\"absolute -top-1 -right-1 bg-amber-500 text-white rounded-full p-0.5 w-4 h-4 flex items-center justify-center text-[10px]\">\n                          !\n                        </div>\n                      </div>\n\n                      {/* Info */}\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-center gap-2\">\n                          <h4 className=\"text-sm font-medium text-[var(--gm-text-primary)] truncate\">{m.display_name}</h4>\n                        </div>\n\n                        <div className=\"flex items-center gap-2 mt-1\">\n                          <Select\n                            value={m.user_role || m.role || ''}\n                            onValueChange={(val) => handleRoleChange(m.user_id, val)}\n                          >\n                            <SelectTrigger className=\"h-6 text-[11px] bg-[var(--gm-bg-primary)] border-[var(--gm-border-primary)] w-full\">\n                              <SelectValue placeholder=\"Select Role...\" />\n                            </SelectTrigger>\n                            <SelectContent>\n                              <SelectItem value=\"no-role\">No Role</SelectItem>\n                              {categories.map(cat => {\n                                const catRoles = project.settings?.roles?.filter(r => r.category === cat.id) || [];\n                                if (catRoles.length === 0) return null;\n                                return (\n                                  <SelectGroup key={cat.id}>\n                                    <SelectLabel className=\"text-[10px] font-bold text-[var(--gm-text-tertiary)] px-2 py-1.5\">{cat.display_name}</SelectLabel>\n                                    {catRoles.map(r => (\n                                      <SelectItem key={r.id} value={r.name} className=\"text-[10px]\">{r.name}</SelectItem>\n                                    ))}\n                                  </SelectGroup>\n                                );\n                              })}\n                            </SelectContent>\n                          </Select>\n                        </div>\n                      </div>\n\n                      {/* Drag Handle */}\n                      <div className=\"text-[var(--gm-text-tertiary)] opacity-50 group-hover:opacity-100\">\n                        <GripVertical className=\"w-4 h-4\" />\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </motion.div>\n            )}\n          </div>\n        )}\n      </div>\n\n      <InviteMemberModal\n        open={showInviteModal}\n        onClose={() => setShowInviteModal(false)}\n        projectId={project.id}\n        onMemberAdded={onUpdate}\n        existingContactIds={existingContactIds}\n      />\n\n      <AlertDialog open={!!memberToRemove} onOpenChange={(open) => !open && setMemberToRemove(null)}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Remove Team Member</AlertDialogTitle>\n            <AlertDialogDescription>\n              Are you sure you want to remove <strong>{memberToRemove?.display_name || memberToRemove?.linked_contact?.name || 'this member'}</strong> from the project?\n              This action cannot be undone.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleRemoveMember}\n              className=\"bg-[var(--color-danger-500)] text-white hover:bg-[var(--color-danger-600)]\"\n            >\n              Remove Member\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </motion.div>\n  );\n}\n\n// ==================== INVITE MEMBER MODAL ====================\n\nfunction InviteMemberModal({\n  open,\n  onClose,\n  projectId,\n  onMemberAdded,\n  existingContactIds = []\n}: {\n  open: boolean;\n  onClose: () => void;\n  projectId: string;\n  onMemberAdded: () => void;\n  existingContactIds?: string[];\n}) {\n  const [inviteTab, setInviteTab] = useState<'email' | 'contacts'>('contacts');\n  const [email, setEmail] = useState('');\n  const [message, setMessage] = useState('');\n  const [selectedContact, setSelectedContact] = useState<string | null>(null);\n  const [contacts, setContacts] = useState<Contact[]>([]);\n  const [loadingContacts, setLoadingContacts] = useState(false);\n  const [adding, setAdding] = useState(false);\n  const [sendingInvite, setSendingInvite] = useState(false);\n\n  useEffect(() => {\n    if (open && inviteTab === 'contacts') {\n      fetchContacts();\n    }\n  }, [open, inviteTab]);\n\n  const fetchContacts = async () => {\n    try {\n      setLoadingContacts(true);\n      const data = await apiClient.get<{ contacts: Contact[] }>('/api/contacts');\n      if (data.contacts) {\n        const availableContacts = data.contacts.filter(c => !existingContactIds.includes(c.id));\n        setContacts(availableContacts);\n      }\n    } catch (error) {\n      console.error('Failed to fetch contacts:', error);\n    } finally {\n      setLoadingContacts(false);\n    }\n  };\n\n  const handleSendInvitation = async () => {\n    if (!email.trim()) {\n      toast.error('Please enter an email address');\n      return;\n    }\n    setSendingInvite(true);\n    try {\n      await apiClient.post(`/api/projects/${projectId}/members/invite`, {\n        email: email.trim(),\n        message: message.trim() || undefined,\n      });\n      toast.success('Invitation sent');\n      setEmail('');\n      setMessage('');\n      onMemberAdded();\n      onClose();\n    } catch (err: any) {\n      toast.error(err.message || 'Failed to send invitation');\n    } finally {\n      setSendingInvite(false);\n    }\n  };\n\n  const handleAddContact = async () => {\n    if (!selectedContact) return;\n\n    try {\n      setAdding(true);\n      await apiClient.post(`/api/projects/${projectId}/members/add-contact`, {\n        contact_id: selectedContact\n      });\n      onMemberAdded();\n      onClose();\n    } catch (error) {\n      console.error('Failed to add contact:', error);\n      toast.error('Failed to add contact to team');\n    } finally {\n      setAdding(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-[500px] bg-[var(--gm-surface-primary)] border-[var(--gm-border-primary)]\">\n        <DialogHeader>\n          <DialogTitle className=\"text-[var(--gm-text-primary)]\">Invite Team Member</DialogTitle>\n        </DialogHeader>\n\n        <div className=\"flex border-b border-[var(--gm-border-primary)] mb-4\">\n          <button\n            onClick={() => setInviteTab('email')}\n            className={`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${inviteTab === 'email' ? 'text-[var(--gm-accent-primary)] border-[var(--gm-accent-primary)]' : 'text-[var(--gm-text-tertiary)] border-transparent'\n              }`}\n          >\n            New Email\n          </button>\n          <button\n            onClick={() => setInviteTab('contacts')}\n            className={`px-4 py-2 text-sm font-medium border-b-2 transition-colors ${inviteTab === 'contacts' ? 'text-[var(--gm-accent-primary)] border-[var(--gm-accent-primary)]' : 'text-[var(--gm-text-tertiary)] border-transparent'\n              }`}\n          >\n            Existing Contacts\n          </button>\n        </div>\n\n        {inviteTab === 'email' ? (\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"text-xs font-medium text-[var(--gm-text-primary)] mb-1 block\">Email Address *</label>\n              <Input value={email} onChange={e => setEmail(e.target.value)} placeholder=\"colleague@example.com\" className=\"bg-[var(--gm-bg-tertiary)] border-[var(--gm-border-primary)] text-sm\" />\n              <p className=\"text-[10px] text-[var(--gm-text-tertiary)] mt-1\">They will receive an email invitation to join this project</p>\n            </div>\n            <div>\n              <label className=\"text-xs font-medium text-[var(--gm-text-primary)] mb-1 block\">Access Level</label>\n              <p className=\"text-sm text-[var(--gm-text-primary)]\">Member - Can view and edit data</p>\n              <p className=\"text-[10px] text-[var(--gm-text-tertiary)] mt-1\">You can assign a project role after they join.</p>\n            </div>\n            <div>\n              <label className=\"text-xs font-medium text-[var(--gm-text-primary)] mb-1 block\">Personal Message (optional)</label>\n              <textarea\n                value={message}\n                onChange={e => setMessage(e.target.value)}\n                placeholder=\"Add a personal note to the invitation...\"\n                rows={3}\n                className={cn(INPUT, 'resize-none')}\n              />\n            </div>\n            <div className=\"flex justify-end gap-2 pt-2\">\n              <button onClick={onClose} className={BTN_SECONDARY}>\n                Cancel\n              </button>\n              <button\n                onClick={handleSendInvitation}\n                disabled={sendingInvite || !email.trim()}\n                className={BTN_PRIMARY}\n              >\n                {sendingInvite ? 'Sending...' : 'Send Invitation'}\n              </button>\n            </div>\n          </div>\n        ) : (\n          <div className=\"space-y-3\">\n            {loadingContacts ? (\n              <div className=\"flex justify-center py-8\">\n                <div className=\"w-6 h-6 border-2 border-[var(--gm-accent-primary)] border-t-transparent rounded-full animate-spin\" />\n              </div>\n            ) : contacts.length === 0 ? (\n              <div className=\"text-center py-8 text-[var(--gm-text-tertiary)] text-sm\">\n                No contacts found.\n              </div>\n            ) : (\n              <div className=\"space-y-2 max-h-[300px] overflow-y-auto scrollbar-thin pr-1\">\n                {contacts.map(contact => (\n                  <div\n                    key={contact.id}\n                    onClick={() => setSelectedContact(contact.id)}\n                    className={`flex items-center gap-3 p-3 rounded-lg cursor-pointer border transition-all ${selectedContact === contact.id\n                      ? 'bg-[var(--gm-interactive-primary)]/10 border-[var(--gm-accent-primary)] shadow-[var(--shadow-sm)]'\n                      : 'bg-[var(--gm-surface-primary)] hover:bg-[var(--gm-surface-hover)] border-[var(--gm-border-primary)] hover:border-[var(--gm-border-primary)]/80'\n                      }`}\n                  >\n                    <div className={`w-4 h-4 rounded-full border flex items-center justify-center transition-colors ${selectedContact === contact.id ? 'border-[var(--gm-accent-primary)] bg-[var(--gm-interactive-primary)]' : 'border-[var(--gm-text-tertiary)]'}`}>\n                      {selectedContact === contact.id && <div className=\"w-1.5 h-1.5 rounded-full bg-[var(--gm-text-on-brand)]\" />}\n                    </div>\n\n                    {resolveAvatarUrl(contact as any) ? (\n                      <img\n                        src={resolveAvatarUrl(contact as any)!}\n                        alt={contact.name}\n                        className=\"w-10 h-10 rounded-full object-cover bg-[var(--gm-bg-tertiary)]\"\n                      />\n                    ) : (\n                      <div className=\"w-10 h-10 rounded-full bg-[var(--gm-interactive-primary)]/10 flex items-center justify-center text-[var(--gm-accent-primary)] font-bold text-sm\">\n                        {getInitials(contact.name)}\n                      </div>\n                    )}\n\n                    <div className=\"min-w-0 flex-1\">\n                      <p className={`text-sm font-medium ${selectedContact === contact.id ? 'text-[var(--gm-accent-primary)]' : 'text-[var(--gm-text-primary)]'}`}>\n                        {contact.name || '(unnamed)'}\n                      </p>\n                      <div className=\"flex flex-col gap-0.5\">\n                        {contact.organization && (\n                          <p className=\"text-[10px] text-[var(--gm-text-tertiary)] font-medium\">\n                            {contact.organization}\n                          </p>\n                        )}\n                        <p className=\"text-[10px] text-[var(--gm-text-tertiary)] truncate\">\n                          {contact.email || 'No email'}\n                        </p>\n                      </div>\n                    </div>\n\n                    {contact.role && (\n                      <div className=\"text-[10px] px-2 py-0.5 rounded-full bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-primary)]\">\n                        {contact.role}\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            )}\n\n            <div>\n              <label className=\"text-xs font-medium text-[var(--gm-text-primary)] mb-1 block\">Access Level</label>\n              <p className=\"text-sm text-[var(--gm-text-primary)]\">Member - Can view and edit data</p>\n            </div>\n\n            <div className=\"flex gap-2\">\n              <button\n                onClick={handleAddContact}\n                disabled={!selectedContact || adding}\n                className={cn(BTN_PRIMARY, 'disabled:cursor-not-allowed')}\n              >\n                {adding ? <div className=\"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" /> : <Users className=\"w-4 h-4\" />}\n                Add to Team\n              </button>\n            </div>\n\n            <div className=\"text-[10px] text-[var(--gm-text-tertiary)] space-y-0.5\">\n              <p><span className=\"font-medium text-[var(--gm-accent-primary)]\">Add to Team:</span> Adds contact as team member directly.</p>\n            </div>\n          </div>\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n// ==================== ROLES TAB ====================\n\n// ==================== ROLES TAB ====================\n\nfunction RolesTab({ project, onUpdate }: { project: Project; onUpdate: () => void }) {\n  const [showAddRole, setShowAddRole] = useState(false);\n  const [processing, setProcessing] = useState<string | null>(null);\n  const [categories, setCategories] = useState<Category[]>([]);\n\n  useEffect(() => {\n    fetchCategories();\n  }, [project.id]);\n\n  const fetchCategories = async () => {\n    try {\n      const data = await apiClient.get<Category[]>(`/api/projects/${project.id}/categories`);\n      setCategories(data);\n    } catch (error) {\n      console.error('Failed to fetch categories:', error);\n    }\n  };\n\n  const projectRoles = project.settings?.roles || [];\n\n  // Combine custom roles with templates (mock roles)\n  // If a mock role ID exists in projectRoles, use the projectRole version\n  const combinedRoles = [...mockProjectRoles];\n\n  // Update templates with active status if they exist in project settings\n  const displayRoles = combinedRoles.map(template => {\n    const existing = projectRoles.find(r => r.name === template.name); // Match by name or ID? Mock IDs are '1', '2'. Real IDs are UUIDs.\n    // If we have a real role with same name, use its status.\n    // Actually, let's list all projectRoles. And suggest templates that differ.\n    // But for now, let's just list projectRoles.\n    // If projectRoles is empty, we show checking logic.\n    return template;\n  });\n\n  // Better approach:\n  // Show all roles from project.settings.roles.\n  // If empty, allow \"Import Defaults\" or just Add.\n  // Implementation:\n  // mergedRoles = unique by name?\n  const mergedRoles = [...projectRoles];\n\n  // Add templates that are NOT in projectRoles (by name)\n  mockProjectRoles.forEach(template => {\n    if (!mergedRoles.find(r => r.name === template.name)) {\n      mergedRoles.push({ ...template, active: false, id: `template-${template.id}` });\n    }\n  });\n\n  const toggleRole = async (role: ProjectRole) => {\n    try {\n      setProcessing(role.id);\n\n      // If it's a template (id starts with template-), we need to Create it\n      if (role.id.toString().startsWith('template-')) {\n        const newRole = {\n          name: role.name,\n          description: role.description,\n          active: true\n        };\n        await apiClient.post(`/api/projects/${project.id}/roles`, newRole);\n      } else {\n        // It's a real role, toggle active\n        await apiClient.put(`/api/projects/${project.id}/roles/${role.id}`, {\n          active: !role.active\n        });\n      }\n      onUpdate();\n    } catch (error) {\n      console.error('Error toggling role:', error);\n      toast.error('Failed to update role');\n    } finally {\n      setProcessing(null);\n    }\n  };\n\n  return (\n    <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"space-y-4\">\n      <div className={cn(CARD, 'p-5')}>\n        <div className=\"flex items-center justify-between mb-2\">\n          <h3 className=\"text-sm font-semibold text-[var(--gm-text-primary)] flex items-center gap-2\">\n            <ShieldCheck className=\"w-4 h-4\" /> PROJECT ROLES\n          </h3>\n          <button\n            onClick={() => setShowAddRole(true)}\n            className={BTN_PRIMARY}\n          >\n            <Plus className=\"w-4 h-4\" /> Add Role\n          </button>\n        </div>\n        <p className=\"text-xs text-[var(--gm-text-tertiary)] mb-4\">Define roles and responsibilities for this project.</p>\n\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n          {mergedRoles.map(role => (\n            <div\n              key={role.id}\n              className={`p-4 rounded-xl border transition-colors ${role.active === true ? 'border-[var(--gm-accent-primary)]/30 bg-[var(--gm-interactive-primary)]/5' : 'border-[var(--gm-border-primary)]'\n                }`}\n            >\n              <div className=\"flex items-center gap-3 mb-2\">\n                <div className={`w-9 h-9 rounded-lg flex items-center justify-center flex-shrink-0 ${role.active === true ? 'bg-[var(--gm-interactive-primary)]/10' : 'bg-[var(--gm-bg-tertiary)]'}`}>\n                  <User className={`w-4 h-4 ${role.active === true ? 'text-[var(--gm-accent-primary)]' : 'text-[var(--gm-text-tertiary)]'}`} />\n                </div>\n                <h4 className=\"text-sm font-semibold text-[var(--gm-text-primary)]\">{role.name || '(unnamed role)'}</h4>\n              </div>\n              <p className=\"text-xs text-[var(--gm-text-tertiary)] mb-3\">{role.description || 'â€”'}</p>\n              <div className=\"mt-3 pt-3 border-t border-[var(--gm-border-primary)] flex items-center justify-between\">\n                <label className=\"flex items-center gap-2 cursor-pointer\">\n                  <input\n                    type=\"checkbox\"\n                    checked={role.active === true}\n                    onChange={() => toggleRole(role)}\n                    disabled={!!processing}\n                    className=\"accent-[var(--gm-accent-primary)] w-4 h-4\"\n                  />\n                  <span className=\"text-xs text-[var(--gm-text-primary)]\">\n                    {processing === role.id\n                      ? 'Updating...'\n                      : role.active === true\n                        ? 'Active'\n                        : 'Inactive'}\n                  </span>\n                </label>\n\n                {role.active && (\n                  <select\n                    className=\"max-w-[120px] text-[10px] bg-[var(--gm-bg-tertiary)]/50 border-none rounded px-2 py-1 text-[var(--gm-text-primary)] focus:ring-0\"\n                    value={role.category || ''}\n                    onChange={async (e) => {\n                      const newCategory = e.target.value;\n                      try {\n                        // Update role with new category\n                        // Assuming endpoint PUT /api/projects/:pid/roles/:rid supports partial update\n                        // If role is a template, this might be tricky. But we only show this for active roles (which should be real roles).\n                        if (!role.id.toString().startsWith('template-')) {\n                          await apiClient.put(`/api/projects/${project.id}/roles/${role.id}`, { category: newCategory });\n                          onUpdate();\n                        }\n                      } catch (err) {\n                        console.error('Failed to update role category', err);\n                      }\n                    }}\n                  >\n                    <option value=\"\">No Category</option>\n                    {categories.map(c => (\n                      <option key={c.id} value={c.id}>{c.display_name}</option>\n                    ))}\n                  </select>\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      <AddRoleModal\n        open={showAddRole}\n        onClose={() => setShowAddRole(false)}\n        projectId={project.id}\n        onRoleAdded={onUpdate}\n      />\n    </motion.div>\n  );\n}\n\n// ==================== ADD ROLE MODAL ====================\n\nfunction AddRoleModal({ open, onClose, projectId, onRoleAdded }: { open: boolean; onClose: () => void; projectId: string; onRoleAdded: () => void }) {\n  const [roleName, setRoleName] = useState('');\n  const [category, setCategory] = useState('');\n  const [categories, setCategories] = useState<Category[]>([]);\n  const [loadingCategories, setLoadingCategories] = useState(false);\n  const [description, setDescription] = useState('');\n  const [context, setContext] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (open) {\n      fetchCategories();\n    }\n  }, [open]);\n\n  const fetchCategories = async () => {\n    try {\n      setLoadingCategories(true);\n      const data = await apiClient.get<Category[]>(`/api/projects/${projectId}/categories`);\n      setCategories(data);\n      if (data.length > 0 && !category) {\n        setCategory(data[0].id);\n      }\n    } catch (error) {\n      console.error('Failed to fetch categories:', error);\n    } finally {\n      setLoadingCategories(false);\n    }\n  };\n\n  const handleCreateRole = async () => {\n    if (!roleName.trim()) return;\n\n    try {\n      setLoading(true);\n      await apiClient.post(`/api/projects/${projectId}/roles`, {\n        name: roleName,\n        category, // This will be the category ID now\n        description,\n        role_context: context,\n        active: true\n      });\n      onRoleAdded();\n      onClose();\n      // Reset form\n      setRoleName('');\n      setDescription('');\n      setContext('');\n      if (categories.length > 0) setCategory(categories[0].id);\n    } catch (error) {\n      console.error('Error creating role:', error);\n      toast.error('Failed to create role');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-[450px] bg-[var(--gm-surface-primary)] border-[var(--gm-border-primary)]\">\n        <DialogHeader>\n          <DialogTitle className=\"text-[var(--gm-text-primary)]\">Add New Role</DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          <div>\n            <label className={LABEL}>Role Name *</label>\n            <Input value={roleName} onChange={e => setRoleName(e.target.value)} placeholder=\"e.g., Senior Developer, Tech Lead\" className=\"bg-[var(--gm-bg-tertiary)] border-[var(--gm-border-primary)] text-sm\" />\n          </div>\n          <div>\n            <label className={LABEL}>Category</label>\n            <select\n              value={category}\n              onChange={(e) => setCategory(e.target.value)}\n              disabled={loadingCategories}\n              className={INPUT}\n            >\n              {loadingCategories ? (\n                <option>Loading categories...</option>\n              ) : (\n                categories.map(cat => (\n                  <option key={cat.id} value={cat.id}>\n                    {cat.display_name}\n                  </option>\n                ))\n              )}\n            </select>\n          </div>\n          <div>\n            <label className={LABEL}>Description</label>\n            <Input value={description} onChange={e => setDescription(e.target.value)} placeholder=\"Brief description of this role\" className=\"bg-[var(--gm-bg-tertiary)] border-[var(--gm-border-primary)] text-sm\" />\n          </div>\n          <div>\n            <label className={LABEL}>Role Context (for AI)</label>\n            <textarea\n              value={context}\n              onChange={e => setContext(e.target.value)}\n              placeholder=\"Describe this role's responsibilities, priorities, and how the AI should adapt responses...\"\n              rows={4}\n              className={cn(INPUT, 'resize-y')}\n            />\n          </div>\n          <button\n            onClick={() => toast.info('AI enhancement will use the project context to suggest role descriptions')}\n            className=\"flex items-center gap-2 text-sm text-[var(--gm-accent-primary)] font-medium hover:text-[var(--gm-accent-primary)]/80 transition-colors\"\n          >\n            <Sparkles className=\"w-4 h-4\" /> Enhance with AI\n          </button>\n        </div>\n\n        <div className=\"flex justify-end gap-2 pt-2\">\n          <button onClick={onClose} className={BTN_SECONDARY}>\n            Cancel\n          </button>\n          <button\n            onClick={handleCreateRole}\n            disabled={loading || !roleName.trim()}\n            className={BTN_PRIMARY}\n          >\n            {loading ? 'Creating...' : 'Create Role'}\n          </button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n// ==================== CATEGORIES TAB ====================\n\nfunction CategoriesTab({\n  project,\n  members,\n  onUpdate\n}: {\n  project: Project;\n  members: ProjectMember[];\n  onUpdate: () => void;\n}) {\n  const [categories, setCategories] = useState<Category[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [editingCategory, setEditingCategory] = useState<Category | null>(null);\n\n  const [categoryToDelete, setCategoryToDelete] = useState<Category | null>(null);\n\n  const fetchCategories = async () => {\n    try {\n      setLoading(true);\n      const data = await apiClient.get<Category[]>(`/api/projects/${project.id}/categories`);\n      setCategories(data);\n    } catch (error) {\n      console.error('Failed to fetch categories:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchCategories();\n  }, [project.id]);\n\n  const handleDeleteClick = (category: Category) => {\n    setCategoryToDelete(category);\n  };\n\n  const handleDeleteConfirm = async () => {\n    if (!categoryToDelete) return;\n\n    try {\n      await apiClient.delete(`/api/projects/${project.id}/categories/${categoryToDelete.id}`);\n      fetchCategories();\n    } catch (error) {\n      console.error('Failed to delete category:', error);\n      toast.error('Failed to delete category');\n    } finally {\n      setCategoryToDelete(null);\n    }\n  };\n\n  const handleSetLead = async (categoryId: string, userId: string) => {\n    try {\n      const currentLeads = project.settings?.category_leads || {};\n      const updatedSettings = {\n        ...project.settings,\n        category_leads: {\n          ...currentLeads,\n          [categoryId]: userId\n        }\n      };\n      // Use PUT acting as partial update for settings based on backend analysis\n      await apiClient.put(`/api/projects/${project.id}`, { settings: updatedSettings });\n      onUpdate();\n    } catch (error) {\n      console.error('Failed to set lead:', error);\n      toast.error('Failed to set team lead');\n    }\n  };\n\n  return (\n    <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} className=\"space-y-4\">\n      <div className={cn(CARD, 'p-5')}>\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-sm font-semibold text-[var(--gm-text-primary)] flex items-center gap-2\">\n            <SlidersHorizontal className=\"w-4 h-4\" /> PROJECT CATEGORIES\n          </h3>\n          <button\n            onClick={() => { setEditingCategory(null); setShowAddModal(true); }}\n            className={BTN_PRIMARY}\n          >\n            <Plus className=\"w-4 h-4\" /> Add Category\n          </button>\n        </div>\n\n        {loading ? (\n          <div className=\"flex justify-center py-8\">\n            <div className=\"w-6 h-6 border-2 border-[var(--gm-accent-primary)] border-t-transparent rounded-full animate-spin\" />\n          </div>\n        ) : categories.length === 0 ? (\n          <div className=\"text-center py-8 text-[var(--gm-text-tertiary)] text-sm\">\n            No categories found.\n          </div>\n        ) : (\n          <div className=\"grid gap-3\">\n            {categories.map((cat) => (\n              <div key={cat.id} className=\"flex items-center justify-between p-3 rounded-lg border border-[var(--gm-border-primary)] bg-[var(--gm-bg-tertiary)]/20 hover:bg-[var(--gm-bg-tertiary)]/40 transition-colors\">\n                <div className=\"flex items-center gap-3\">\n                  <div className={`w-8 h-8 rounded-lg flex items-center justify-center text-xs font-bold bg-${cat.color || 'blue'}-500/10 text-${cat.color || 'blue'}-500`}>\n                    {getInitials(cat.display_name)}\n                  </div>\n                  <div>\n                    <h4 className=\"text-sm font-medium text-[var(--gm-text-primary)]\">{cat.display_name}</h4>\n                    <p className=\"text-xs text-[var(--gm-text-tertiary)]\">{cat.description || 'No description'}</p>\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-4\">\n                  {/* Lead Selector */}\n                  <div className=\"flex flex-col items-end\">\n                    <span className=\"text-[10px] text-[var(--gm-text-tertiary)] mb-0.5\">Team Lead</span>\n                    <Select\n                      value={project.settings?.category_leads?.[cat.id] || ''}\n                      onValueChange={(value) => handleSetLead(cat.id, value)}\n                    >\n                      <SelectTrigger className=\"h-6 text-[10px] bg-[var(--gm-bg-primary)] border-[var(--gm-border-primary)] w-[140px]\">\n                        <SelectValue placeholder=\"No Lead\" />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"no-lead\">No Lead Assigned</SelectItem>\n                        {members.map(m => (\n                          <SelectItem key={m.user_id} value={m.user_id} className=\"text-[10px]\">{m.display_name}</SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  <span className={`text-[10px] px-2 py-0.5 rounded-full ${!(cat as any).project_id ? 'bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-primary)]' : 'bg-[var(--gm-interactive-primary)]/10 text-[var(--gm-accent-primary)]'}`}>\n                    {!(cat as any).project_id ? 'Global' : 'Project'}\n                  </span>\n                  {/* Only allow editing/deleting project-specific categories */}\n                  {(cat as any).project_id && (\n                    <div className=\"flex items-center gap-1\">\n                      <button\n                        onClick={() => { setEditingCategory(cat); setShowAddModal(true); }}\n                        className=\"p-1.5 text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors\"\n                      >\n                        <Edit2 className=\"w-3.5 h-3.5\" />\n                      </button>\n                      <button\n                        onClick={() => handleDeleteClick(cat)}\n                        className=\"p-1.5 text-[var(--gm-text-tertiary)] hover:text-[var(--color-danger-500)] transition-colors\"\n                      >\n                        <Trash2 className=\"w-3.5 h-3.5\" />\n                      </button>\n                    </div>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      <AddCategoryModal\n        open={showAddModal}\n        onClose={() => setShowAddModal(false)}\n        projectId={project.id}\n        onSuccess={fetchCategories}\n        initialData={editingCategory}\n      />\n\n      <AlertDialog open={!!categoryToDelete} onOpenChange={(open) => !open && setCategoryToDelete(null)}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Delete Category</AlertDialogTitle>\n            <AlertDialogDescription>\n              Are you sure you want to delete the category <strong>{categoryToDelete?.display_name}</strong>?\n              This action cannot be undone.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={handleDeleteConfirm}\n              className=\"bg-[var(--color-danger-500)] text-white hover:bg-[var(--color-danger-600)]\"\n            >\n              Delete\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </motion.div>\n  );\n}\n\nfunction AddCategoryModal({ open, onClose, projectId, onSuccess, initialData }: { open: boolean; onClose: () => void; projectId: string; onSuccess: () => void; initialData: Category | null }) {\n  const [name, setName] = useState('');\n  const [displayName, setDisplayName] = useState('');\n  const [description, setDescription] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    if (open) {\n      if (initialData) {\n        setName(initialData.name);\n        setDisplayName(initialData.display_name);\n        setDescription(initialData.description || '');\n      } else {\n        setName('');\n        setDisplayName('');\n        setDescription('');\n      }\n    }\n  }, [open, initialData]);\n\n  const handleSubmit = async () => {\n    if (!name.trim() || !displayName.trim()) return;\n\n    try {\n      setLoading(true);\n      const payload = {\n        name: name.toLowerCase().replace(/\\s+/g, '_'), // Ensure internal name is slug-like\n        display_name: displayName,\n        description,\n        color: 'blue' // Default color for now\n      };\n\n      if (initialData) {\n        await apiClient.put(`/api/projects/${projectId}/categories/${initialData.id}`, payload);\n      } else {\n        await apiClient.post(`/api/projects/${projectId}/categories`, payload);\n      }\n      onSuccess();\n      onClose();\n    } catch (error) {\n      console.error('Failed to save category:', error);\n      toast.error('Failed to save category');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-[450px] bg-[var(--gm-surface-primary)] border-[var(--gm-border-primary)]\">\n        <DialogHeader>\n          <DialogTitle className=\"text-[var(--gm-text-primary)]\">{initialData ? 'Edit Category' : 'Add New Category'}</DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          <div>\n            <label className={LABEL}>Display Name *</label>\n            <Input\n              value={displayName}\n              onChange={e => {\n                setDisplayName(e.target.value);\n                if (!initialData && (!name || name === displayName.toLowerCase().replace(/\\s+/g, '_').slice(0, -1))) {\n                  setName(e.target.value.toLowerCase().replace(/\\s+/g, '_'));\n                }\n              }}\n              placeholder=\"e.g. Frontend Team\"\n              className=\"bg-[var(--gm-bg-tertiary)] border-[var(--gm-border-primary)] text-sm\"\n            />\n          </div>\n          <div>\n            <label className={LABEL}>Internal Name (Slug) *</label>\n            <Input value={name} onChange={e => setName(e.target.value)} placeholder=\"e.g. frontend_team\" className=\"bg-[var(--gm-bg-tertiary)] border-[var(--gm-border-primary)] text-sm font-mono\" />\n            <p className=\"text-[10px] text-[var(--gm-text-tertiary)] mt-1\">Unique identifier used in system.</p>\n          </div>\n          <div>\n            <label className={LABEL}>Description</label>\n            <Input value={description} onChange={e => setDescription(e.target.value)} placeholder=\"Description...\" className=\"bg-[var(--gm-bg-tertiary)] border-[var(--gm-border-primary)] text-sm\" />\n          </div>\n\n          <div className=\"flex justify-end gap-2 pt-2\">\n            <button onClick={onClose} className={BTN_SECONDARY}>\n              Cancel\n            </button>\n            <button\n              onClick={handleSubmit}\n              disabled={loading}\n              className={BTN_PRIMARY}\n            >\n              {loading ? 'Saving...' : (initialData ? 'Update' : 'Create')}\n            </button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\n\n\n// ==================== INVITES TAB ====================\n\nfunction InvitesTab({ projectId }: { projectId: string }) {\n  const [email, setEmail] = useState('');\n  const [role, setRole] = useState('member');\n  const [acceptToken, setAcceptToken] = useState('');\n\n  const { data, isLoading } = useProjectInvites(projectId);\n  const createMut = useCreateInvite();\n  const linkMut = useGenerateInviteLink();\n  const revokeMut = useRevokeInvite();\n  const acceptMut = useAcceptInvite();\n\n  const invites = data?.invites ?? [];\n\n  const handleInvite = async () => {\n    if (!email.trim()) { toast.error('Email is required'); return; }\n    try {\n      const result = await createMut.mutateAsync({ projectId, email: email.trim(), role });\n      if (result.invite_url) {\n        await navigator.clipboard.writeText(result.invite_url);\n        toast.success(`Invite sent! Link copied to clipboard.${result.email_sent ? ' Email sent.' : ''}`);\n      } else {\n        toast.success('Invite created');\n      }\n      setEmail('');\n    } catch {\n      toast.error('Failed to create invite');\n    }\n  };\n\n  const handleGenerateLink = async () => {\n    try {\n      const result = await linkMut.mutateAsync(projectId);\n      if (result.link) {\n        await navigator.clipboard.writeText(result.link);\n        toast.success('Invite link copied to clipboard');\n      }\n    } catch {\n      toast.error('Failed to generate link');\n    }\n  };\n\n  const handleAcceptInvite = async () => {\n    if (!acceptToken.trim()) { toast.error('Token is required'); return; }\n    try {\n      await acceptMut.mutateAsync(acceptToken.trim());\n      toast.success('Invite accepted! You have joined the project.');\n      setAcceptToken('');\n    } catch {\n      toast.error('Failed to accept invite â€” token may be invalid or expired');\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className={cn(CARD, 'p-5 space-y-4')}>\n        <h3 className={SECTION_TITLE}>Invite Members</h3>\n        <div className=\"flex gap-2\">\n          <Input value={email} onChange={e => setEmail(e.target.value)} placeholder=\"Email address...\" className=\"flex-1\" onKeyDown={e => e.key === 'Enter' && handleInvite()} />\n          <select value={role} onChange={e => setRole(e.target.value)} className={INPUT}>\n            <option value=\"member\">Member</option>\n            <option value=\"admin\">Admin</option>\n            <option value=\"read\">Read Only</option>\n          </select>\n          <button onClick={handleInvite} disabled={createMut.isPending} className={BTN_PRIMARY}>\n            {createMut.isPending ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Mail className=\"w-4 h-4\" />} Invite\n          </button>\n        </div>\n        <button onClick={handleGenerateLink} disabled={linkMut.isPending} className={cn(BTN_SECONDARY, 'disabled:opacity-50')}>\n          {linkMut.isPending ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Link2 className=\"w-4 h-4\" />} Generate Shareable Link\n        </button>\n      </div>\n\n      {/* Accept Invite */}\n      <div className={cn(CARD, 'p-5 space-y-3')}>\n        <h3 className={SECTION_TITLE}>Accept an Invite</h3>\n        <p className=\"text-xs text-[var(--gm-text-tertiary)]\">Paste an invite token to join a project you've been invited to.</p>\n        <div className=\"flex gap-2\">\n          <Input\n            value={acceptToken}\n            onChange={e => setAcceptToken(e.target.value)}\n            placeholder=\"Paste invite token...\"\n            className=\"flex-1\"\n            onKeyDown={e => e.key === 'Enter' && handleAcceptInvite()}\n          />\n          <button onClick={handleAcceptInvite} disabled={acceptMut.isPending || !acceptToken.trim()}\n            className={BTN_PRIMARY}>\n            {acceptMut.isPending ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <CheckSquare className=\"w-4 h-4\" />} Accept\n          </button>\n        </div>\n      </div>\n\n      <div className={cn(CARD, 'p-5')}>\n        <h3 className={cn(SECTION_TITLE, 'mb-3')}>Pending Invites</h3>\n        {isLoading ? (\n          <div className=\"flex justify-center py-6\"><Loader2 className=\"w-5 h-5 animate-spin text-[var(--gm-accent-primary)]\" /></div>\n        ) : invites.length === 0 ? (\n          <p className=\"text-sm text-[var(--gm-text-tertiary)] text-center py-6\">No pending invites</p>\n        ) : (\n          <div className=\"space-y-2\">\n            {invites.map(inv => (\n              <div key={inv.id} className=\"flex items-center justify-between p-3 rounded-lg border border-[var(--gm-border-primary)] hover:bg-[var(--gm-surface-hover)] transition-colors\">\n                <div className=\"flex items-center gap-3\">\n                  <UserPlus className=\"w-4 h-4 text-[var(--gm-accent-primary)]\" />\n                  <div>\n                    <p className=\"text-sm text-[var(--gm-text-primary)]\">{inv.email || 'Link invite'}</p>\n                    <div className=\"flex items-center gap-2 text-[10px] text-[var(--gm-text-tertiary)]\">\n                      <span className=\"capitalize\">{inv.role}</span>\n                      {inv.expires_at && (\n                        <span className=\"flex items-center gap-0.5\"><Clock className=\"w-3 h-3\" /> Expires {new Date(inv.expires_at).toLocaleDateString()}</span>\n                      )}\n                    </div>\n                  </div>\n                </div>\n                <button onClick={() => revokeMut.mutate(inv.id)} disabled={revokeMut.isPending} className=\"p-1.5 rounded-lg text-[var(--gm-text-tertiary)] hover:text-red-400 hover:bg-red-500/10 transition-colors\">\n                  <Trash2 className=\"w-4 h-4\" />\n                </button>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// ==================== TEAMS TAB ====================\n\nfunction TeamsTab() {\n  const [creating, setCreating] = useState(false);\n  const [teamName, setTeamName] = useState('');\n  const [teamColor, setTeamColor] = useState('#3b82f6');\n  const [editingTeamId, setEditingTeamId] = useState<string | null>(null);\n  const [editName, setEditName] = useState('');\n  const [addingMemberTeamId, setAddingMemberTeamId] = useState<string | null>(null);\n  const [memberSearch, setMemberSearch] = useState('');\n\n  const { data, isLoading } = useTeams();\n  const contactsQuery = useContacts(memberSearch ? { search: memberSearch } : undefined);\n  const allContacts = (contactsQuery.data?.contacts ?? []) as Array<Record<string, any>>;\n  const createMut = useCreateTeam();\n  const deleteMut = useDeleteTeam();\n  const updateMut = useUpdateTeam();\n  const addMemberMut = useAddTeamMember();\n  const removeMemberMut = useRemoveTeamMember();\n\n  const teams = data?.teams ?? [];\n\n  const getFilteredContacts = (teamId: string) => {\n    const team = teams.find(t => t.id === teamId);\n    const existingIds = new Set((team?.memberDetails ?? []).map(m => m.contactId));\n    return allContacts.filter(c => !existingIds.has(c.id as string));\n  };\n\n  const handleCreate = async () => {\n    if (!teamName.trim()) { toast.error('Team name is required'); return; }\n    try {\n      await createMut.mutateAsync({ name: teamName.trim(), color: teamColor });\n      toast.success('Team created');\n      setTeamName('');\n      setCreating(false);\n    } catch {\n      toast.error('Failed to create team');\n    }\n  };\n\n  const handleRename = async (teamId: string) => {\n    if (!editName.trim()) { toast.error('Team name is required'); return; }\n    try {\n      await updateMut.mutateAsync({ id: teamId, name: editName.trim() });\n      toast.success('Team renamed');\n      setEditingTeamId(null);\n    } catch {\n      toast.error('Failed to rename team');\n    }\n  };\n\n  const handleAddMember = async (teamId: string, contactId: string) => {\n    try {\n      await addMemberMut.mutateAsync({ teamId, contactId });\n      toast.success('Member added');\n      setMemberSearch('');\n      setAddingMemberTeamId(null);\n    } catch {\n      toast.error('Failed to add member');\n    }\n  };\n\n  const handleRemoveMember = async (teamId: string, contactId: string) => {\n    try {\n      await removeMemberMut.mutateAsync({ teamId, contactId });\n      toast.success('Member removed');\n    } catch {\n      toast.error('Failed to remove member');\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className={SECTION_TITLE}>Teams ({teams.length})</h3>\n        <button onClick={() => setCreating(!creating)} className={BTN_PRIMARY}>\n          <Plus className=\"w-3.5 h-3.5\" /> New Team\n        </button>\n      </div>\n\n      <AnimatePresence>\n        {creating && (\n          <motion.div initial={{ opacity: 0, height: 0 }} animate={{ opacity: 1, height: 'auto' }} exit={{ opacity: 0, height: 0 }} className=\"overflow-hidden\">\n            <div className={cn(CARD, 'p-4 space-y-3')}>\n              <div className=\"flex gap-2\">\n                <Input value={teamName} onChange={e => setTeamName(e.target.value)} placeholder=\"Team name...\" className=\"flex-1\" onKeyDown={e => e.key === 'Enter' && handleCreate()} />\n                <input type=\"color\" value={teamColor} onChange={e => setTeamColor(e.target.value)} className=\"w-10 h-10 rounded-lg border border-[var(--gm-border-primary)] cursor-pointer\" />\n              </div>\n              <div className=\"flex gap-2\">\n                <button onClick={handleCreate} disabled={createMut.isPending} className={BTN_PRIMARY}>\n                  {createMut.isPending ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Check className=\"w-4 h-4\" />} Create\n                </button>\n                <button onClick={() => setCreating(false)} className={BTN_SECONDARY}>Cancel</button>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {isLoading ? (\n        <div className=\"flex justify-center py-8\"><Loader2 className=\"w-5 h-5 animate-spin text-[var(--gm-accent-primary)]\" /></div>\n      ) : teams.length === 0 ? (\n        <div className=\"text-center py-8 text-sm text-[var(--gm-text-tertiary)]\">No teams yet. Create one to get started.</div>\n      ) : (\n        <div className=\"space-y-2\">\n          {teams.map(team => (\n            <motion.div key={team.id} initial={{ opacity: 0, y: 5 }} animate={{ opacity: 1, y: 0 }}\n              className={cn(CARD, 'p-4 hover:border-[var(--gm-accent-primary)]/20')}>\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-3 h-3 rounded-full\" style={{ backgroundColor: team.color || '#3b82f6' }} />\n                  {editingTeamId === team.id ? (\n                    <div className=\"flex items-center gap-2\">\n                      <Input\n                        value={editName}\n                        onChange={e => setEditName(e.target.value)}\n                        className=\"h-7 text-sm w-48\"\n                        onKeyDown={e => {\n                          if (e.key === 'Enter') handleRename(team.id);\n                          if (e.key === 'Escape') setEditingTeamId(null);\n                        }}\n                        autoFocus\n                      />\n                      <button onClick={() => handleRename(team.id)} disabled={updateMut.isPending}\n                        className=\"p-1 rounded text-[var(--gm-accent-primary)] hover:bg-[var(--gm-interactive-primary)]/10 transition-colors\">\n                        {updateMut.isPending ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <Check className=\"w-3.5 h-3.5\" />}\n                      </button>\n                      <button onClick={() => setEditingTeamId(null)} className=\"p-1 rounded text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)] transition-colors\">\n                        <X className=\"w-3.5 h-3.5\" />\n                      </button>\n                    </div>\n                  ) : (\n                    <div className=\"flex items-center gap-2\">\n                      <div>\n                        <h4 className=\"text-sm font-medium text-[var(--gm-text-primary)]\">{team.name}</h4>\n                        {team.description && <p className=\"text-xs text-[var(--gm-text-tertiary)]\">{team.description}</p>}\n                      </div>\n                      <button\n                        onClick={() => { setEditingTeamId(team.id); setEditName(team.name); }}\n                        className=\"p-1 rounded text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] hover:bg-[var(--gm-surface-hover)] transition-colors\"\n                        title=\"Rename team\"\n                      >\n                        <Edit2 className=\"w-3 h-3\" />\n                      </button>\n                    </div>\n                  )}\n                  <Badge variant=\"secondary\" className=\"text-[10px]\">\n                    {team.memberCount ?? 0} members\n                  </Badge>\n                </div>\n                <div className=\"flex items-center gap-1\">\n                  <button\n                    onClick={() => setAddingMemberTeamId(addingMemberTeamId === team.id ? null : team.id)}\n                    className=\"p-1.5 rounded-lg text-[var(--gm-text-tertiary)] hover:text-[var(--gm-accent-primary)] hover:bg-[var(--gm-interactive-primary)]/10 transition-colors\"\n                    title=\"Add member\"\n                  >\n                    <UserPlus className=\"w-4 h-4\" />\n                  </button>\n                  <button onClick={() => deleteMut.mutate(team.id)} disabled={deleteMut.isPending}\n                    className=\"p-1.5 rounded-lg text-[var(--gm-text-tertiary)] hover:text-red-400 hover:bg-red-500/10 transition-colors\">\n                    <Trash2 className=\"w-4 h-4\" />\n                  </button>\n                </div>\n              </div>\n\n              {/* Add member - contact picker */}\n              <AnimatePresence>\n                {addingMemberTeamId === team.id && (\n                  <motion.div initial={{ opacity: 0, height: 0 }} animate={{ opacity: 1, height: 'auto' }} exit={{ opacity: 0, height: 0 }} className=\"overflow-hidden\">\n                    <div className=\"mt-3 pt-3 border-t border-[var(--gm-border-primary)] space-y-2\">\n                      <div className=\"flex items-center gap-2\">\n                        <div className=\"relative flex-1\">\n                          <Search className=\"absolute left-2.5 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-[var(--gm-text-tertiary)]\" />\n                          <Input\n                            value={memberSearch}\n                            onChange={e => setMemberSearch(e.target.value)}\n                            placeholder=\"Search contacts by name, role, or organization...\"\n                            className=\"pl-8 h-8 text-sm\"\n                            autoFocus\n                          />\n                        </div>\n                        <button onClick={() => { setAddingMemberTeamId(null); setMemberSearch(''); }}\n                          className=\"p-1.5 rounded-lg text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)]\">\n                          <X className=\"w-3.5 h-3.5\" />\n                        </button>\n                      </div>\n\n                      <div className=\"max-h-56 overflow-y-auto rounded-lg border border-[var(--gm-border-primary)] bg-[var(--gm-bg-tertiary)]\">\n                        {contactsQuery.isLoading ? (\n                          <div className=\"flex items-center justify-center py-6\">\n                            <Loader2 className=\"w-4 h-4 animate-spin text-[var(--gm-accent-primary)]\" />\n                          </div>\n                        ) : getFilteredContacts(team.id).length === 0 ? (\n                          <div className=\"text-center py-6 text-xs text-[var(--gm-text-tertiary)]\">\n                            {memberSearch ? 'No matching contacts found' : 'No contacts available'}\n                          </div>\n                        ) : (\n                          getFilteredContacts(team.id).map(contact => {\n                            const avatarUrl = resolveAvatarUrl(contact as any);\n                            const name = (contact.name as string) || 'Unknown';\n                            const role = (contact.role as string) || (contact.cargo as string) || '';\n                            const org = (contact.organization as string) || (contact.empresa as string) || '';\n                            return (\n                              <button\n                                key={contact.id}\n                                onClick={() => handleAddMember(team.id, contact.id as string)}\n                                disabled={addMemberMut.isPending}\n                                className=\"w-full flex items-center gap-3 px-3 py-2 text-left hover:bg-[var(--gm-surface-hover)] transition-colors border-b border-[var(--gm-border-primary)] last:border-b-0 disabled:opacity-50\"\n                              >\n                                {avatarUrl ? (\n                                  <img src={avatarUrl} alt={name} className=\"w-8 h-8 rounded-full object-cover shrink-0\" />\n                                ) : (\n                                  <div className=\"w-8 h-8 rounded-full bg-[var(--gm-interactive-primary)]/20 flex items-center justify-center text-[10px] font-bold text-[var(--gm-accent-primary)] shrink-0\">\n                                    {getInitials(name)}\n                                  </div>\n                                )}\n                                <div className=\"flex-1 min-w-0\">\n                                  <p className=\"text-sm font-medium text-[var(--gm-text-primary)] truncate\">{name}</p>\n                                  <div className=\"flex items-center gap-2 text-[10px] text-[var(--gm-text-tertiary)]\">\n                                    {role && <span className=\"truncate\">{role}</span>}\n                                    {role && org && <span>Â·</span>}\n                                    {org && (\n                                      <span className=\"flex items-center gap-0.5 truncate\">\n                                        <Building2 className=\"w-2.5 h-2.5\" />{org}\n                                      </span>\n                                    )}\n                                  </div>\n                                </div>\n                                {contact.email && (\n                                  <span className=\"text-[10px] text-[var(--gm-text-tertiary)] truncate max-w-[140px] shrink-0\">{contact.email as string}</span>\n                                )}\n                                <UserPlus className=\"w-3.5 h-3.5 text-[var(--gm-accent-primary)] shrink-0\" />\n                              </button>\n                            );\n                          })\n                        )}\n                      </div>\n                    </div>\n                  </motion.div>\n                )}\n              </AnimatePresence>\n\n              {/* Member list with remove buttons */}\n              {team.memberDetails && team.memberDetails.length > 0 && (\n                <div className=\"mt-3 flex flex-wrap gap-1.5\">\n                  {team.memberDetails.map((m, i) => (\n                    <span key={i} className=\"flex items-center gap-1 px-2 py-0.5 rounded-full bg-[var(--gm-bg-tertiary)] text-[10px] text-[var(--gm-text-primary)] group/member\">\n                      <User className=\"w-3 h-3\" /> {m.name || m.contactId}\n                      {m.isLead && <span className=\"text-amber-400\">â˜…</span>}\n                      {m.role && <span className=\"text-[var(--gm-text-tertiary)]\">({m.role})</span>}\n                      <button\n                        onClick={() => handleRemoveMember(team.id, m.contactId)}\n                        disabled={removeMemberMut.isPending}\n                        className=\"ml-0.5 p-0.5 rounded-full text-[var(--gm-text-tertiary)] hover:text-red-400 hover:bg-red-500/10 opacity-0 group-hover/member:opacity-100 transition-all\"\n                        title=\"Remove member\"\n                      >\n                        <X className=\"w-2.5 h-2.5\" />\n                      </button>\n                    </span>\n                  ))}\n                </div>\n              )}\n            </motion.div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// ==================== PROVIDERS TAB (BYOK) ====================\n\nfunction ProvidersTab({ projectId }: { projectId: string }) {\n  const { data, isLoading, refetch } = useProjectProviders(projectId);\n  const setKey = useSetProjectProviderKey();\n  const deleteKey = useDeleteProjectProviderKey();\n  const validateKey = useValidateProjectProviderKey();\n  const [editProvider, setEditProvider] = useState<string | null>(null);\n  const [apiKeyInput, setApiKeyInput] = useState('');\n\n  const providers = data?.providers ?? [];\n\n  const handleSaveKey = (provider: string) => {\n    if (!apiKeyInput.trim()) return;\n    setKey.mutate({ projectId, provider, apiKey: apiKeyInput.trim() }, {\n      onSuccess: () => { toast.success(`${provider} key saved`); setEditProvider(null); setApiKeyInput(''); refetch(); },\n      onError: () => toast.error('Failed to save key'),\n    });\n  };\n\n  const handleDeleteKey = (provider: string) => {\n    deleteKey.mutate({ projectId, provider }, {\n      onSuccess: () => { toast.success(`${provider} key removed`); refetch(); },\n      onError: () => toast.error('Failed to remove key'),\n    });\n  };\n\n  const handleValidate = (provider: string) => {\n    validateKey.mutate({ projectId, provider }, {\n      onSuccess: () => toast.success(`${provider} key is valid`),\n      onError: () => toast.error(`${provider} key validation failed`),\n    });\n  };\n\n  const knownProviders = ['openai', 'anthropic', 'google', 'groq', 'deepseek', 'ollama'];\n  const displayProviders = knownProviders.map(name => {\n    const existing = providers.find((p: Record<string, unknown>) => p.provider === name || p.name === name);\n    return { name, hasKey: !!(existing as Record<string, unknown>)?.has_key, ...((existing || {}) as Record<string, unknown>) };\n  });\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className={SECTION_TITLE}>AI Provider Keys (BYOK)</h3>\n        <p className=\"text-[10px] text-[var(--gm-text-tertiary)]\">Bring your own API keys for each provider</p>\n      </div>\n\n      {isLoading ? (\n        <div className=\"flex justify-center py-8\"><Loader2 className=\"w-5 h-5 animate-spin text-[var(--gm-accent-primary)]\" /></div>\n      ) : (\n        <div className=\"space-y-2\">\n          {displayProviders.map(p => (\n            <div key={p.name} className={cn(CARD, 'p-4')}>\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-3\">\n                  <div className={cn('w-8 h-8 rounded-lg flex items-center justify-center',\n                    p.hasKey ? 'bg-green-500/10' : 'bg-[var(--gm-bg-tertiary)]')}>\n                    <Key className={cn('w-4 h-4', p.hasKey ? 'text-green-500' : 'text-[var(--gm-text-tertiary)]')} />\n                  </div>\n                  <div>\n                    <p className=\"text-xs font-medium text-[var(--gm-text-primary)] capitalize\">{p.name}</p>\n                    <p className=\"text-[10px] text-[var(--gm-text-tertiary)]\">\n                      {p.hasKey ? 'Key configured' : 'No key set â€” uses system default'}\n                    </p>\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-1.5\">\n                  {p.hasKey && (\n                    <>\n                      <button onClick={() => handleValidate(p.name)} disabled={validateKey.isPending} className={BTN_SECONDARY}>\n                        <TestTube className=\"w-3 h-3\" /> Test\n                      </button>\n                      <button onClick={() => handleDeleteKey(p.name)} disabled={deleteKey.isPending}\n                        className=\"inline-flex items-center gap-1 px-2 py-1 rounded-md text-[10px] text-[var(--gm-text-tertiary)] hover:text-[var(--color-danger-500)] transition-colors\">\n                        <Trash2 className=\"w-3 h-3\" /> Remove\n                      </button>\n                    </>\n                  )}\n                  <button onClick={() => { setEditProvider(editProvider === p.name ? null : p.name); setApiKeyInput(''); }}\n                    className={BTN_SECONDARY}>\n                    {editProvider === p.name ? 'Cancel' : p.hasKey ? 'Update' : 'Set Key'}\n                  </button>\n                </div>\n              </div>\n              {editProvider === p.name && (\n                <div className=\"mt-3 flex gap-2\">\n                  <input value={apiKeyInput} onChange={e => setApiKeyInput(e.target.value)}\n                    type=\"password\" placeholder={`Enter ${p.name} API key...`} className={INPUT} />\n                  <button onClick={() => handleSaveKey(p.name)} disabled={setKey.isPending || !apiKeyInput.trim()} className={BTN_PRIMARY}>\n                    {setKey.isPending ? <Loader2 className=\"w-3 h-3 animate-spin\" /> : <Check className=\"w-3 h-3\" />} Save\n                  </button>\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// ==================== DOCUMENTS TAB ====================\n\nfunction ProjectDocumentsTab() {\n  const [search, setSearch] = useState('');\n  const [sprintFilter, setSprintFilter] = useState('');\n  const docs = useDocuments({ limit: 100, search: search || undefined, sprint_id: sprintFilter || undefined });\n  const { data: sprintsData } = useSprints();\n  const updateDoc = useUpdateDocument();\n  const allSprints: any[] = (sprintsData as any)?.sprints ?? (Array.isArray(sprintsData) ? sprintsData : []);\n  const docList: DocumentItem[] = docs.data?.documents ?? [];\n\n  const CARD = 'rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-sm';\n\n  return (\n    <div className=\"space-y-3\">\n      <div className=\"flex items-center gap-2\">\n        <div className=\"relative flex-1 max-w-xs\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-[var(--gm-text-tertiary)]\" />\n          <input\n            value={search}\n            onChange={e => setSearch(e.target.value)}\n            placeholder=\"Search documents...\"\n            className=\"w-full pl-9 pr-3 py-1.5 bg-[var(--gm-surface-secondary)] border border-[var(--gm-border-primary)] rounded-lg text-xs text-[var(--gm-text-primary)] focus:outline-none focus:ring-2 focus:ring-[var(--gm-border-focus)]\"\n          />\n        </div>\n        <select value={sprintFilter} onChange={e => setSprintFilter(e.target.value)}\n          className=\"bg-[var(--gm-surface-secondary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-1.5 text-xs text-[var(--gm-text-primary)]\">\n          <option value=\"\">All sprints</option>\n          <option value=\"_none\">No sprint</option>\n          {allSprints.map((s: any) => (\n            <option key={s.id} value={s.id}>{s.name}{s.status === 'active' ? ' (active)' : ''}</option>\n          ))}\n        </select>\n        <span className=\"text-xs text-[var(--gm-text-tertiary)]\">{docList.length} document(s)</span>\n      </div>\n\n      {docs.isLoading ? (\n        <div className=\"flex justify-center py-12\"><Loader2 className=\"w-6 h-6 animate-spin text-[var(--gm-accent-primary)]\" /></div>\n      ) : docList.length === 0 ? (\n        <div className={CARD + ' p-8 text-center'}>\n          <FolderOpen className=\"w-10 h-10 mx-auto mb-3 text-[var(--gm-text-tertiary)]\" />\n          <p className=\"text-sm text-[var(--gm-text-tertiary)]\">No documents found.</p>\n        </div>\n      ) : (\n        <div className=\"space-y-1.5\">\n          {docList.map(doc => {\n            const d = doc as Record<string, unknown>;\n            const sprintId = d.sprint_id as string | undefined;\n            const sprint = sprintId ? allSprints.find((s: any) => s.id === sprintId) : null;\n            return (\n              <div key={doc.id} className={CARD + ' p-3 flex items-center gap-3'}>\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"text-sm font-medium text-[var(--gm-text-primary)] truncate\">{doc.original_filename || doc.filename}</p>\n                  <div className=\"flex items-center gap-2 mt-0.5\">\n                    {doc.type && <span className=\"text-[10px] text-[var(--gm-text-tertiary)] capitalize\">{doc.type}</span>}\n                    {doc.created_at && <span className=\"text-[10px] text-[var(--gm-text-tertiary)]\">{new Date(doc.created_at).toLocaleDateString()}</span>}\n                  </div>\n                </div>\n                {sprint && (\n                  <span className=\"inline-flex items-center text-[10px] px-2 py-0.5 rounded-full font-medium bg-purple-500/10 text-purple-400 border border-purple-500/20 whitespace-nowrap\">\n                    {sprint.name}\n                  </span>\n                )}\n                <span className={`text-[10px] px-2 py-0.5 rounded-full font-medium ${\n                  doc.status === 'processed' || doc.status === 'completed' ? 'bg-green-500/10 text-green-400' :\n                  doc.status === 'processing' ? 'bg-blue-500/10 text-blue-400' : 'bg-yellow-500/10 text-yellow-400'\n                }`}>{doc.status || 'â€”'}</span>\n                <select\n                  value={sprintId || ''}\n                  onChange={e => {\n                    updateDoc.mutate(\n                      { id: doc.id, sprint_id: e.target.value || null },\n                      { onSuccess: () => toast.success('Sprint updated') },\n                    );\n                  }}\n                  className=\"bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded px-2 py-1 text-[10px] text-[var(--gm-text-primary)] w-32\"\n                >\n                  <option value=\"\">No sprint</option>\n                  {allSprints.map((s: any) => (\n                    <option key={s.id} value={s.id}>{s.name}</option>\n                  ))}\n                </select>\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// ==================== ACTIVITY TAB ====================\n\nfunction ActivityTab({ projectId }: { projectId: string }) {\n  const [activeSubTab, setActiveSubTab] = useState<'activity' | 'audit'>('activity');\n  const { data, isLoading } = useProjectActivity(projectId, { limit: 50 });\n  const { data: auditData, isLoading: auditLoading } = useAuditLog(projectId, { limit: 50 });\n  const activities = data?.activities ?? [];\n  const auditEntries = auditData?.entries ?? [];\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <h3 className={SECTION_TITLE}>\n          {activeSubTab === 'activity' ? `Recent Activity (${data?.total ?? 0})` : `Audit Log (${auditData?.total ?? 0})`}\n        </h3>\n        <div className=\"flex bg-[var(--gm-bg-tertiary)] rounded-lg p-0.5\">\n          <button onClick={() => setActiveSubTab('activity')}\n            className={cn('px-3 py-1.5 rounded-md text-xs font-medium transition-colors',\n              activeSubTab === 'activity' ? 'bg-[var(--gm-surface-primary)] text-[var(--gm-text-primary)] shadow-[var(--shadow-sm)]' : 'text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)]')}>\n            Activity\n          </button>\n          <button onClick={() => setActiveSubTab('audit')}\n            className={cn('px-3 py-1.5 rounded-md text-xs font-medium transition-colors',\n              activeSubTab === 'audit' ? 'bg-[var(--gm-surface-primary)] text-[var(--gm-text-primary)] shadow-[var(--shadow-sm)]' : 'text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)]')}>\n            Audit Log\n          </button>\n        </div>\n      </div>\n\n      {activeSubTab === 'activity' ? (\n        <>\n          {isLoading ? (\n            <div className=\"flex justify-center py-8\"><Loader2 className=\"w-5 h-5 animate-spin text-[var(--gm-accent-primary)]\" /></div>\n          ) : activities.length === 0 ? (\n            <div className=\"text-center py-8 text-xs text-[var(--gm-text-tertiary)]\">No activity recorded yet.</div>\n          ) : (\n            <div className=\"space-y-1\">\n              {activities.map((entry, i) => (\n                <div key={entry.id || i} className=\"flex items-center gap-3 p-3 rounded-lg hover:bg-[var(--gm-surface-hover)] transition-colors\">\n                  <Activity className=\"w-3.5 h-3.5 text-[var(--gm-accent-primary)] flex-shrink-0\" />\n                  <div className=\"flex-1 min-w-0\">\n                    <p className=\"text-xs text-[var(--gm-text-primary)]\">\n                      {entry.actor_name && <span className=\"font-medium\">{entry.actor_name} </span>}\n                      {entry.action?.replace(/[._]/g, ' ')}\n                      {entry.target_type && <span className=\"text-[var(--gm-text-tertiary)]\"> on {entry.target_type}</span>}\n                    </p>\n                  </div>\n                  <span className=\"text-[10px] text-[var(--gm-text-tertiary)] flex-shrink-0\">\n                    {new Date(entry.created_at).toLocaleString()}\n                  </span>\n                </div>\n              ))}\n            </div>\n          )}\n        </>\n      ) : (\n        <>\n          {auditLoading ? (\n            <div className=\"flex justify-center py-8\"><Loader2 className=\"w-5 h-5 animate-spin text-[var(--gm-accent-primary)]\" /></div>\n          ) : auditEntries.length === 0 ? (\n            <div className=\"text-center py-8 text-xs text-[var(--gm-text-tertiary)]\">No audit entries yet.</div>\n          ) : (\n            <div className=\"space-y-1\">\n              {auditEntries.map((entry: Record<string, unknown>, i: number) => (\n                <div key={(entry.id as string) || i} className={cn(CARD, 'flex items-center gap-3 p-3')}>\n                  <ShieldCheck className=\"w-3.5 h-3.5 text-amber-500 flex-shrink-0\" />\n                  <div className=\"flex-1 min-w-0\">\n                    <p className=\"text-xs text-[var(--gm-text-primary)]\">\n                      {entry.actor_name && <span className=\"font-medium\">{entry.actor_name as string} </span>}\n                      <span>{((entry.action as string) || '').replace(/[._]/g, ' ')}</span>\n                      {entry.target_type && <span className=\"text-[var(--gm-text-tertiary)]\"> on {entry.target_type as string}</span>}\n                    </p>\n                    {entry.details && (\n                      <p className=\"text-[10px] text-[var(--gm-text-tertiary)] mt-0.5 truncate max-w-md\">\n                        {typeof entry.details === 'string' ? entry.details : JSON.stringify(entry.details)}\n                      </p>\n                    )}\n                  </div>\n                  <span className=\"text-[10px] text-[var(--gm-text-tertiary)] flex-shrink-0\">\n                    {entry.created_at ? new Date(entry.created_at as string).toLocaleString() : 'â€”'}\n                  </span>\n                </div>\n              ))}\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default ProjectsPage;\n"],"names":["__iconNode","Settings2","createLucideIcon","ShieldCheck","SlidersHorizontal","mockProjectRoles","CARD","INPUT","BTN_PRIMARY","BTN_SECONDARY","BTN_DANGER","SECTION_TITLE","LABEL","projectTabs","Users","UserPlus","UsersRound","Key","FolderOpen","Activity","ProjectsPage","projects","refreshProjects","currentProjectId","useProject","selectedProjectId","setSelectedProjectId","useState","activateProject","useActivateProject","setDefaultProject","useSetDefaultProject","exportProject","useExportProject","importProject","useImportProject","showImport","setShowImport","importData","setImportData","importName","setImportName","selectedProject","p","showNewForm","setShowNewForm","formName","setFormName","formDesc","setFormDesc","companies","setCompanies","selectedCompanyId","setSelectedCompanyId","newCompanyName","setNewCompanyName","isCreating","setIsCreating","handleActivate","projectId","toast","handleSetDefault","handleExport","data","blob","url","a","handleImport","parsed","fetchCompanies","apiClient","error","useEffect","handleCreateProject","isNewCompany","payload","jsx","ProjectDetail","jsxs","Loader2","Download","Upload","Plus","AnimatePresence","motion","cn","e","c","project","i","isActive","isDefault","Star","Play","Edit2","onBack","onUpdate","activeTab","setActiveTab","members","setMembers","loadingMembers","setLoadingMembers","fetchMembers","handleUpdate","ArrowLeft","tab","GeneralTab","MembersTab","RolesTab","CategoriesTab","InvitesTab","TeamsTab","ProvidersTab","ProjectDocumentsTab","ActivityTab","ProjectStatsBar","isLoading","useProjectStats","items","v","key","val","name","setName","description","setDescription","role","setRole","rolePrompt","setRolePrompt","company","setCompany","saving","setSaving","deleting","setDeleting","confirmDelete","setConfirmDelete","roleTemplates","setRoleTemplates","handleSave","err","handleDelete","Input","User","Select","SelectTrigger","SelectValue","SelectContent","r","SelectItem","Check","AlertTriangle","Trash2","loading","showInviteModal","setShowInviteModal","removing","setRemoving","memberToRemove","setMemberToRemove","viewMode","setViewMode","categories","setCategories","loadingCategories","setLoadingCategories","fetchCategories","handleRemoveMember","handleRoleChange","userId","newRoleName","getTeamMembers","category","m","memberRole","handleDragStart","memberId","handleDragOver","handleDrop","targetCategoryId","member","categoryRoles","currentRole","getUnassignedMembers","isUnassigned","setCategoryLead","categoryId","updatedSettings","existingContactIds","id","isValidAvatarUrl","getInitials","Fragment","teamMembers","leadId","lead","isLead","value","cat","catRoles","SelectGroup","SelectLabel","GripVertical","InviteMemberModal","AlertDialog","open","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","onClose","onMemberAdded","inviteTab","setInviteTab","email","setEmail","message","setMessage","selectedContact","setSelectedContact","contacts","setContacts","loadingContacts","setLoadingContacts","adding","setAdding","sendingInvite","setSendingInvite","fetchContacts","availableContacts","handleSendInvitation","handleAddContact","Dialog","DialogContent","DialogHeader","DialogTitle","contact","resolveAvatarUrl","showAddRole","setShowAddRole","processing","setProcessing","projectRoles","template","mergedRoles","toggleRole","newRole","newCategory","AddRoleModal","onRoleAdded","roleName","setRoleName","setCategory","context","setContext","setLoading","handleCreateRole","Sparkles","showAddModal","setShowAddModal","editingCategory","setEditingCategory","categoryToDelete","setCategoryToDelete","handleDeleteClick","handleDeleteConfirm","handleSetLead","currentLeads","AddCategoryModal","onSuccess","initialData","displayName","setDisplayName","handleSubmit","acceptToken","setAcceptToken","useProjectInvites","createMut","useCreateInvite","linkMut","useGenerateInviteLink","revokeMut","useRevokeInvite","acceptMut","useAcceptInvite","invites","handleInvite","result","handleGenerateLink","handleAcceptInvite","Mail","Link2","CheckSquare","inv","Clock","creating","setCreating","teamName","setTeamName","teamColor","setTeamColor","editingTeamId","setEditingTeamId","editName","setEditName","addingMemberTeamId","setAddingMemberTeamId","memberSearch","setMemberSearch","useTeams","contactsQuery","useContacts","allContacts","useCreateTeam","deleteMut","useDeleteTeam","updateMut","useUpdateTeam","addMemberMut","useAddTeamMember","removeMemberMut","useRemoveTeamMember","teams","getFilteredContacts","teamId","team","t","existingIds","handleCreate","handleRename","handleAddMember","contactId","X","Badge","Search","avatarUrl","org","Building2","refetch","useProjectProviders","setKey","useSetProjectProviderKey","deleteKey","useDeleteProjectProviderKey","validateKey","useValidateProjectProviderKey","editProvider","setEditProvider","apiKeyInput","setApiKeyInput","providers","handleSaveKey","provider","handleDeleteKey","handleValidate","displayProviders","existing","TestTube","search","setSearch","sprintFilter","setSprintFilter","docs","useDocuments","sprintsData","useSprints","updateDoc","useUpdateDocument","allSprints","docList","s","doc","sprintId","sprint","activeSubTab","setActiveSubTab","useProjectActivity","auditData","auditLoading","useAuditLog","activities","auditEntries","entry"],"mappings":"q/CASA,MAAMA,GAAa,CACjB,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,QAAQ,CAAE,EACzC,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,OAAO,CAAE,EACxC,CAAC,SAAU,CAAE,GAAI,KAAM,GAAI,KAAM,EAAG,IAAK,IAAK,SAAU,EACxD,CAAC,SAAU,CAAE,GAAI,IAAK,GAAI,IAAK,EAAG,IAAK,IAAK,QAAQ,CAAE,CACxD,EACMC,GAAYC,GAAiB,aAAcF,EAAU,ECN3D,MAAMA,GAAa,CACjB,CACE,OACA,CACE,EAAG,qKACH,IAAK,QACX,CACA,EACE,CAAC,OAAQ,CAAE,EAAG,gBAAiB,IAAK,QAAQ,CAAE,CAChD,EACMG,GAAcD,GAAiB,eAAgBF,EAAU,ECV/D,MAAMA,GAAa,CACjB,CAAC,OAAQ,CAAE,EAAG,UAAW,IAAK,QAAQ,CAAE,EACxC,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,QAAQ,CAAE,EACzC,CAAC,OAAQ,CAAE,EAAG,UAAW,IAAK,QAAQ,CAAE,EACxC,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,QAAQ,CAAE,EACzC,CAAC,OAAQ,CAAE,EAAG,YAAa,IAAK,QAAQ,CAAE,EAC1C,CAAC,OAAQ,CAAE,EAAG,YAAa,IAAK,QAAQ,CAAE,EAC1C,CAAC,OAAQ,CAAE,EAAG,WAAY,IAAK,QAAQ,CAAE,EACzC,CAAC,OAAQ,CAAE,EAAG,UAAW,IAAK,QAAQ,CAAE,EACxC,CAAC,OAAQ,CAAE,EAAG,UAAW,IAAK,QAAQ,CAAE,CAC1C,EACMI,GAAoBF,GAAiB,qBAAsBF,EAAU,ECU9DK,GAAkC,CAC7C,CAAE,GAAI,IAAK,KAAM,kBAAmB,YAAa,0CAA2C,OAAQ,EAAA,EACpG,CAAE,GAAI,IAAK,KAAM,YAAa,YAAa,kDAAmD,OAAQ,EAAA,EACtG,CAAE,GAAI,IAAK,KAAM,gBAAiB,YAAa,wCAAyC,OAAQ,EAAA,EAChG,CAAE,GAAI,IAAK,KAAM,WAAY,YAAa,+BAAgC,OAAQ,EAAA,EAClF,CAAE,GAAI,IAAK,KAAM,UAAW,YAAa,yCAA0C,OAAQ,EAAA,EAC3F,CAAE,GAAI,IAAK,KAAM,SAAU,YAAa,2CAA4C,OAAQ,EAAA,CAC9F,ECQMC,EAAO,2IACPC,EAAQ,8SACRC,EAAc,yPACdC,EAAgB,uQAChBC,GAAa,mNACbC,EAAgB,mFAChBC,EAAQ,+GA2BRC,GAA4F,CAChG,CAAE,GAAI,UAAW,MAAO,UAAW,KAAMZ,EAAA,EACzC,CAAE,GAAI,UAAW,MAAO,UAAW,KAAMa,GAAO,MAAO,CAAA,EACvD,CAAE,GAAI,UAAW,MAAO,UAAW,KAAMC,EAAA,EACzC,CAAE,GAAI,QAAS,MAAO,QAAS,KAAMC,EAAA,EACrC,CAAE,GAAI,QAAS,MAAO,QAAS,KAAMb,EAAA,EACrC,CAAE,GAAI,aAAc,MAAO,aAAc,KAAMC,EAAA,EAC/C,CAAE,GAAI,YAAa,MAAO,eAAgB,KAAMa,EAAA,EAChD,CAAE,GAAI,YAAa,MAAO,YAAa,KAAMC,EAAA,EAC7C,CAAE,GAAI,WAAY,MAAO,WAAY,KAAMC,EAAA,CAC7C,EAEMC,GAAe,IAAM,CACzB,KAAM,CAAE,SAAAC,EAAU,gBAAAC,EAAiB,iBAAAC,CAAA,EAAqBC,GAAA,EAClD,CAACC,EAAmBC,CAAoB,EAAIC,EAAAA,SAAwB,IAAI,EACxEC,EAAkBC,GAAA,EAClBC,EAAoBC,GAAA,EACpBC,EAAgBC,GAAA,EAChBC,EAAgBC,GAAA,EAChB,CAACC,EAAYC,CAAa,EAAIV,EAAAA,SAAS,EAAK,EAC5C,CAACW,EAAYC,CAAa,EAAIZ,EAAAA,SAAS,EAAE,EACzC,CAACa,EAAYC,CAAa,EAAId,EAAAA,SAAS,EAAE,EAEzCe,EAAkBrB,EAAS,QAAUsB,EAAE,KAAOlB,CAAiB,GAAK,KACpE,CAACmB,EAAaC,CAAc,EAAIlB,EAAAA,SAASN,EAAS,SAAW,CAAC,EAC9D,CAACyB,EAAUC,CAAW,EAAIpB,EAAAA,SAAS,EAAE,EACrC,CAACqB,EAAUC,CAAW,EAAItB,EAAAA,SAAS,EAAE,EACrC,CAACuB,EAAWC,CAAY,EAAIxB,EAAAA,SAAyC,CAAA,CAAE,EACvE,CAACyB,EAAmBC,CAAoB,EAAI1B,EAAAA,SAAiB,EAAE,EAC/D,CAAC2B,EAAgBC,CAAiB,EAAI5B,EAAAA,SAAS,EAAE,EACjD,CAAC6B,EAAYC,CAAa,EAAI9B,EAAAA,SAAS,EAAK,EAE5C+B,EAAkBC,GAAsB,CAC5C/B,EAAgB,OAAO+B,EAAW,CAChC,UAAW,IAAM,CAAEC,EAAM,QAAQ,mBAAmB,EAAGtC,EAAA,CAAmB,EAC1E,QAAS,IAAMsC,EAAM,MAAM,4BAA4B,CAAA,CACxD,CACH,EAEMC,EAAoBF,GAAsB,CAC9C7B,EAAkB,OAAO6B,EAAW,CAClC,UAAW,IAAM,CAAEC,EAAM,QAAQ,qBAAqB,EAAGtC,EAAA,CAAmB,EAC5E,QAAS,IAAMsC,EAAM,MAAM,uBAAuB,CAAA,CACnD,CACH,EAEME,EAAe,IAAM,CACzB9B,EAAc,OAAO,OAAW,CAC9B,UAAY+B,GAAS,CACnB,MAAMC,EAAO,IAAI,KAAK,CAAC,KAAK,UAAUD,EAAM,KAAM,CAAC,CAAC,EAAG,CAAE,KAAM,mBAAoB,EAC7EE,EAAM,IAAI,gBAAgBD,CAAI,EAC9BE,GAAI,SAAS,cAAc,GAAG,EACpCA,GAAE,KAAOD,EAAKC,GAAE,SAAW,kBAAkB,KAAK,IAAA,CAAK,QAASA,GAAE,MAAA,EAClE,IAAI,gBAAgBD,CAAG,EACvBL,EAAM,QAAQ,kBAAkB,CAClC,EACA,QAAS,IAAMA,EAAM,MAAM,eAAe,CAAA,CAC3C,CACH,EAEMO,EAAe,IAAM,CACzB,GAAI,CACF,MAAMC,EAAS,KAAK,MAAM9B,CAAU,EACpCJ,EAAc,OAAO,CAAE,KAAMkC,EAAQ,KAAM5B,GAAc,QAAa,CACpE,UAAW,IAAM,CAAEoB,EAAM,QAAQ,kBAAkB,EAAGvB,EAAc,EAAK,EAAGE,EAAc,EAAE,EAAGE,EAAc,EAAE,EAAGnB,EAAA,CAAmB,EACrI,QAAS,IAAMsC,EAAM,MAAM,eAAe,CAAA,CAC3C,CACH,MAAQ,CACNA,EAAM,MAAM,mBAAmB,CACjC,CACF,EAEMS,EAAiB,SAAY,CACjC,GAAI,CACF,MAAMN,EAAO,MAAMO,EAAU,IAAmD,gBAAgB,EAC5FP,EAAK,YACPZ,EAAaY,EAAK,SAAS,EACvBA,EAAK,UAAU,OAAS,GAAK,CAACX,EAAmBC,EAAqBU,EAAK,UAAU,CAAC,EAAE,EAAE,EACrFA,EAAK,UAAU,SAAW,KAAwB,SAAS,EAExE,OAASQ,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,CACnD,CACF,EAEAC,EAAAA,UAAU,IAAM,CAAEH,EAAA,CAAkB,EAAG,CAAA,CAAE,EAEzCG,EAAAA,UAAU,IAAM,CACVnD,EAAS,SAAW,GAAGwB,EAAe,EAAI,CAChD,EAAG,CAACxB,CAAQ,CAAC,EAEb,MAAMoD,GAAsB,SAAY,CACtC,GAAI,CAAC3B,EAAS,OAAQ,CACpBc,EAAM,MAAM,8BAA8B,EAC1C,MACF,CACA,MAAMc,EAAetB,IAAsB,WAAaF,EAAU,SAAW,EAC7E,GAAIwB,GAAgB,CAACpB,EAAe,OAAQ,CAC1CM,EAAM,MAAM,8BAA8B,EAC1C,MACF,CACA,GAAI,CAACc,GAAgB,CAACtB,EAAmB,CACvCQ,EAAM,MAAM,8CAA8C,EAC1D,MACF,CAEA,GAAI,CACFH,EAAc,EAAI,EAClB,MAAMkB,EAAkC,CACtC,KAAM7B,EACN,YAAaE,CAAA,EAEX,CAAC0B,GAAgBtB,EACnBuB,EAAQ,WAAavB,EAErBuB,EAAQ,iBAAmBrB,EAAe,KAAA,EAE5C,MAAMgB,EAAU,KAAK,gBAAiBK,CAAO,EAE7C5B,EAAY,EAAE,EACdE,EAAY,EAAE,EACdM,EAAkB,EAAE,EACpBF,EAAqB,EAAE,EACvBR,EAAe,EAAK,EACpBvB,EAAA,EACA+C,EAAA,EACAT,EAAM,QAAQ,8BAA8B,CAC9C,OAASW,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,EAGhDX,EAAM,MAAMW,aAAiB,MAAQA,EAAM,QAAU,0BAA0B,CACjF,QAAA,CACEd,EAAc,EAAK,CACrB,CACF,EAEA,OAAIhC,GAAqBiB,EAChBkC,MAACC,GAAA,CAAc,QAASnC,EAAwB,OAAQ,IAAMhB,EAAqB,IAAI,EAAG,SAAUJ,CAAA,CAAiB,GACnHG,GAAqB,CAACiB,GAE/BhB,EAAqB,IAAI,EAIzBoD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAF,EAAAA,IAAC,KAAA,CAAG,UAAU,kDAAkD,SAAA,WAAQ,EACxEE,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAA,EAAAA,KAAC,UAAO,QAAShB,EAAc,SAAU9B,EAAc,UAAW,UAAWvB,EAC1E,SAAA,CAAAuB,EAAc,gBAAa+C,EAAA,CAAQ,UAAU,2BAA2B,EAAKH,EAAAA,IAACI,GAAA,CAAS,UAAU,aAAA,CAAc,EAAG,SAAA,EACrH,EACAF,OAAC,UAAO,QAAS,IAAMzC,EAAc,CAACD,CAAU,EAAG,UAAW3B,EAC5D,SAAA,CAAAmE,EAAAA,IAACK,GAAA,CAAO,UAAU,aAAA,CAAc,EAAE,SAAA,EACpC,EACAH,OAAC,UAAO,QAAS,IAAMjC,EAAe,CAACD,CAAW,EAAG,UAAWpC,EAC9D,SAAA,CAAAoE,EAAAA,IAACM,GAAA,CAAK,UAAU,aAAA,CAAc,EAAE,cAAA,CAAA,CAClC,CAAA,CAAA,CACF,CAAA,EACF,EAGAN,EAAAA,IAACO,IACE,SAAA/C,GACC0C,EAAAA,KAACM,EAAO,IAAP,CAAW,QAAS,CAAE,QAAS,EAAG,OAAQ,CAAA,EAAK,QAAS,CAAE,QAAS,EAAG,OAAQ,MAAA,EAAU,KAAM,CAAE,QAAS,EAAG,OAAQ,CAAA,EACnH,UAAWC,EAAG/E,EAAM,KAAK,EACzB,SAAA,CAAAsE,EAAAA,IAAC,KAAA,CAAG,UAAWjE,EAAe,SAAA,iBAAc,EAC5CmE,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAF,EAAAA,IAAC,QAAA,CAAM,UAAWhE,EAAO,SAAA,0BAAuB,EAChDgE,EAAAA,IAAC,QAAA,CAAM,MAAOpC,EAAY,SAAU8C,GAAK7C,EAAc6C,EAAE,OAAO,KAAK,EAAG,YAAY,kBAAkB,UAAW/E,CAAA,CAAO,CAAA,EAC1H,SACC,MAAA,CACC,SAAA,CAAAqE,EAAAA,IAAC,QAAA,CAAM,UAAWhE,EAAO,SAAA,YAAS,EAClCgE,EAAAA,IAAC,WAAA,CAAS,MAAOtC,EAAY,SAAUgD,GAAK/C,EAAc+C,EAAE,OAAO,KAAK,EAAG,YAAY,mCAAmC,KAAM,EAC9H,UAAWD,EAAG9E,EAAO,uBAAuB,CAAA,CAAA,CAAG,EACnD,EACAuE,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAF,EAAAA,IAAC,SAAA,CAAO,QAAS,IAAMvC,EAAc,EAAK,EAAG,UAAW5B,EAAe,SAAA,QAAA,CAAM,EAC7EqE,EAAAA,KAAC,SAAA,CAAO,QAASX,EAAc,SAAUjC,EAAc,WAAa,CAACI,EAAW,KAAA,EAAQ,UAAW9B,EAChG,SAAA,CAAA0B,EAAc,gBAAa6C,EAAA,CAAQ,UAAU,2BAA2B,EAAKH,EAAAA,IAACK,GAAA,CAAO,UAAU,aAAA,CAAc,EAAG,SAAA,CAAA,CACnH,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,EAGN,EAGAL,EAAAA,IAACO,IACE,SAAAvC,GACCkC,EAAAA,KAACM,EAAO,IAAP,CACC,QAAS,CAAE,QAAS,EAAG,OAAQ,CAAA,EAC/B,QAAS,CAAE,QAAS,EAAG,OAAQ,MAAA,EAC/B,KAAM,CAAE,QAAS,EAAG,OAAQ,CAAA,EAC5B,UAAWC,EAAG/E,EAAM,KAAK,EAEzB,SAAA,CAAAsE,EAAAA,IAAC,KAAA,CAAG,UAAWjE,EAAe,SAAA,qBAAkB,EAChDmE,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAF,EAAAA,IAAC,QAAA,CAAM,UAAWhE,EAAO,SAAA,iBAAc,EACvCgE,EAAAA,IAAC,QAAA,CAAM,MAAO9B,EAAU,SAAWwC,GAAMvC,EAAYuC,EAAE,OAAO,KAAK,EAAG,YAAY,kBAAkB,UAAW/E,CAAA,CAAO,CAAA,EACxH,SACC,MAAA,CACC,SAAA,CAAAqE,EAAAA,IAAC,QAAA,CAAM,UAAWhE,EAAO,SAAA,cAAW,EACpCgE,MAAC,YAAS,MAAO5B,EAAU,SAAWsC,GAAMrC,EAAYqC,EAAE,OAAO,KAAK,EAAG,YAAY,iBAAiB,KAAM,EAAG,UAAWD,EAAG9E,EAAO,aAAa,CAAA,CAAG,CAAA,EACtJ,SACC,MAAA,CACC,SAAA,CAAAqE,EAAAA,IAAC,QAAA,CAAM,UAAWhE,EAAO,SAAA,UAAO,EAChCkE,EAAAA,KAAC,SAAA,CACC,MAAO1B,EACP,SAAWkC,GAAM,CACfjC,EAAqBiC,EAAE,OAAO,KAAK,EAC/BA,EAAE,OAAO,QAAU,aAA6B,EAAE,CACxD,EACA,UAAW/E,EAEV,SAAA,CAAA2C,EAAU,OAAS,GAAK0B,MAAC,SAAA,CAAO,MAAM,GAAG,SAAA,sBAAmB,EAC5D1B,EAAU,IAAIqC,GACbX,EAAAA,IAAC,SAAA,CAAkB,MAAOW,EAAE,GAAK,SAAAA,EAAE,IAAA,EAAtBA,EAAE,EAAyB,CACzC,EACDX,EAAAA,IAAC,SAAA,CAAO,MAAM,UAAU,SAAA,sBAAA,CAAoB,CAAA,CAAA,CAAA,GAE5CxB,IAAsB,WAAaF,EAAU,SAAW,IACxD0B,EAAAA,IAAC,QAAA,CACC,MAAOtB,EACP,SAAWgC,GAAM/B,EAAkB+B,EAAE,OAAO,KAAK,EACjD,YAAY,sBACZ,UAAWD,EAAG9E,EAAO,MAAM,EAC3B,UAAS,EAAA,CAAA,CACX,EAEJ,EACAuE,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAF,EAAAA,IAAC,SAAA,CAAO,QAAS,IAAM/B,EAAe,EAAK,EAAG,UAAWpC,EAAe,SAAA,QAAA,CAAM,SAC7E,SAAA,CAAO,QAASgE,GAAqB,SAAUjB,EAAY,UAAWhD,EACpE,SAAA,CAAAgD,EAAaoB,EAAAA,IAACG,GAAQ,UAAU,0BAAA,CAA2B,EAAKH,EAAAA,IAACM,GAAA,CAAK,UAAU,aAAA,CAAc,EAC9F1B,EAAa,cAAgB,QAAA,CAAA,CAChC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,EAGN,EAGAsB,EAAAA,KAAC,MAAA,CAAI,UAAU,YACZ,SAAA,CAAAzD,EAAS,SAAW,GAAK,CAACuB,GACzBkC,EAAAA,KAAC,OAAI,UAAWO,EAAG/E,EAAM,iBAAiB,EACxC,SAAA,CAAAsE,EAAAA,IAAC1D,GAAA,CAAW,UAAU,0DAAA,CAA2D,EACjF0D,EAAAA,IAAC,IAAA,CAAE,UAAU,0CAA0C,SAAA,kBAAe,EACtEA,EAAAA,IAAC,IAAA,CAAE,UAAU,8CAA8C,SAAA,0CAAA,CAAwC,CAAA,EACrG,EAEDvD,EAAS,IAAI,CAACmE,EAASC,IAAM,CAC5B,MAAMC,EAAWnE,IAAqBiE,EAAQ,GACxCG,GAAaH,EAAoC,aAAe,GACtE,OACEZ,EAAAA,IAACQ,EAAO,IAAP,CAEC,QAAS,CAAE,QAAS,EAAG,EAAG,EAAA,EAC1B,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EAC1B,WAAY,CAAE,MAAOK,EAAI,GAAA,EACzB,UAAWJ,EAAG/E,EAAM,MAClBoF,GAAY,gFAAA,EAEd,SAAAZ,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAF,MAAC,OAAI,UAAWS,EAAG,sEACjBK,EAAW,wCAA0C,4BAAA,EACrD,SAAAd,EAAAA,IAAC1D,GAAA,CAAW,UAAWmE,EAAG,UAAWK,EAAW,kCAAoC,gCAAgC,CAAA,CAAG,CAAA,CACzH,EACAZ,EAAAA,KAAC,MAAA,CAAI,UAAU,UACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAF,MAAC,KAAA,CAAG,UAAU,sDAAuD,SAAAY,EAAQ,MAAQ,oBAAoB,EACxGE,GACCd,EAAAA,IAAC,OAAA,CAAK,UAAU,4IAA4I,SAAA,SAAM,EAEnKe,IACCb,EAAAA,KAAC,OAAA,CAAK,UAAU,+HAA+H,SAAA,CAAAF,EAAAA,IAACgB,GAAA,CAAK,UAAU,aAAA,CAAc,EAAE,UAAA,CAAA,CAAQ,CAAA,EAE3L,EACAhB,EAAAA,IAAC,IAAA,CAAE,UAAU,uDAAwD,WAAQ,GAAG,EAC/EY,EAAQ,aAAeZ,EAAAA,IAAC,KAAE,UAAU,sEAAuE,WAAQ,WAAA,CAAY,CAAA,CAAA,CAClI,CAAA,EACF,EACAE,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACZ,SAAA,CAAA,CAACY,GACAZ,EAAAA,KAAC,SAAA,CAAO,QAAS,IAAMpB,EAAe8B,EAAQ,EAAE,EAAG,SAAU5D,EAAgB,UAC3E,UAAU,oNACV,SAAA,CAAAgD,EAAAA,IAACiB,GAAA,CAAK,UAAU,SAAA,CAAU,EAAE,SAAA,CAAA,CAAA,EAG/B,CAACF,IACAf,EAAAA,IAAC,SAAA,CAAO,QAAS,IAAMf,EAAiB2B,EAAQ,EAAE,EAAG,SAAU1D,EAAkB,UAC/E,UAAWrB,EAAe,MAAM,yBAChC,SAAAmE,EAAAA,IAACgB,GAAA,CAAK,UAAU,SAAA,CAAU,CAAA,CAAA,EAG9Bd,EAAAA,KAAC,UAAO,QAAS,IAAMpD,EAAqB8D,EAAQ,EAAE,EAAG,UAAW/E,EAClE,SAAA,CAAAmE,EAAAA,IAACkB,GAAA,CAAM,UAAU,SAAA,CAAU,EAAE,OAAA,CAAA,CAC/B,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EA5CKN,EAAQ,EAAA,CA+CnB,CAAC,CAAA,CAAA,CACH,CAAA,EACF,EAEJ,EAMA,SAASX,GAAc,CAAE,QAAAW,EAAS,OAAAO,EAAQ,SAAAC,GAA4E,CACpH,KAAM,CAACC,EAAWC,CAAY,EAAIvE,EAAAA,SAAqB,SAAS,EAC1D,CAACwE,EAASC,CAAU,EAAIzE,EAAAA,SAA0B,CAAA,CAAE,EACpD,CAAC0E,EAAgBC,CAAiB,EAAI3E,EAAAA,SAAS,EAAK,EAEpD4E,EAAe,SAAY,CAC/B,GAAI,CACFD,EAAkB,EAAI,EACtB,MAAMvC,EAAO,MAAMO,EAAU,IAAkC,iBAAiBkB,EAAQ,EAAE,UAAU,EAChGzB,EAAK,SACPqC,EAAWrC,EAAK,OAAO,CAE3B,OAASQ,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,CACjD,QAAA,CACE+B,EAAkB,EAAK,CACzB,CACF,EAEME,EAAe,IAAM,CACzBR,EAAA,EACIC,IAAc,WAAWM,EAAA,CAC/B,EAEA/B,OAAAA,EAAAA,UAAU,IAAM,CACd+B,EAAA,CACF,EAAG,CAACf,EAAQ,EAAE,CAAC,EAGbV,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CAAO,QAASiB,EAAQ,UAAU,8HACjC,SAAA,CAAAnB,EAAAA,IAAC6B,GAAA,CAAU,UAAU,aAAA,CAAc,EAAE,mBAAA,EACvC,EAGA3B,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAF,EAAAA,IAAC,OAAI,UAAU,8FACb,eAAC1D,GAAA,CAAW,UAAU,0CAA0C,CAAA,CAClE,SACC,MAAA,CACC,SAAA,CAAA0D,MAAC,KAAA,CAAG,UAAU,kDAAmD,SAAAY,EAAQ,MAAQ,oBAAoB,QACpG,IAAA,CAAE,UAAU,yCAA0C,SAAAA,EAAQ,aAAe,gBAAA,CAAiB,CAAA,CAAA,CACjG,CAAA,EACF,QAGC,MAAA,CAAI,UAAU,kEACZ,SAAA3E,GAAY,IAAI6F,GACf5B,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAMoB,EAAaQ,EAAI,EAAE,EAClC,UAAW,4GAA4GT,IAAcS,EAAI,GACrI,oEACA,uFACF,GAEF,SAAA,CAAA9B,EAAAA,IAAC8B,EAAI,KAAJ,CAAS,UAAU,SAAA,CAAU,EAC7BA,EAAI,OACHA,EAAI,KAAO,UAAYP,EAAQ,OAASO,EAAI,SAAW,QACvD9B,MAAC,OAAA,CAAK,UAAU,oEACb,SAAA8B,EAAI,KAAO,UAAYP,EAAQ,OAASO,EAAI,KAAA,CAC/C,CAAA,CAAA,EAZGA,EAAI,EAAA,CAeZ,EACH,SAGC,MAAA,CACE,SAAA,CAAAT,IAAc,WAAarB,MAAC+B,GAAA,CAAW,QAAAnB,EAAkB,SAAAQ,EAAoB,OAAAD,EAAgB,EAC7FE,IAAc,WACbrB,EAAAA,IAACgC,GAAA,CACC,QAAApB,EACA,QAAAW,EACA,QAASE,EACT,SAAUE,CAAA,CAAA,EAGbN,IAAc,SACbrB,EAAAA,IAACiC,GAAA,CACC,QAAArB,EACA,SAAUgB,CAAA,CAAA,EAGbP,IAAc,cACbrB,EAAAA,IAACkC,GAAA,CACC,QAAAtB,EACA,QAAAW,EACA,SAAAH,CAAA,CAAA,EAGHC,IAAc,WAAarB,MAACmC,GAAA,CAAW,UAAWvB,EAAQ,GAAI,EAC9DS,IAAc,SAAWrB,MAACoC,GAAA,CAAA,CAAS,EACnCf,IAAc,aAAerB,MAACqC,GAAA,CAAa,UAAWzB,EAAQ,GAAI,EAClES,IAAc,aAAerB,MAACsC,GAAA,CAAA,CAAoB,EAClDjB,IAAc,YAAcrB,MAACuC,GAAA,CAAY,UAAW3B,EAAQ,EAAA,CAAI,CAAA,CAAA,CACnE,CAAA,EACF,CAEJ,CAIA,SAAS4B,GAAgB,CAAE,UAAAzD,GAAoC,CAC7D,KAAM,CAAE,KAAAI,EAAM,UAAAsD,GAAcC,GAAgB3D,CAAS,EACrD,GAAI0D,GAAa,CAACtD,EAAM,OAAO,KAE/B,MAAMwD,EAAQ,OAAO,QADPxD,CACoB,EAAE,OAAO,CAAC,CAAA,CAAGyD,CAAC,IAAM,OAAOA,GAAM,QAAQ,EAAE,MAAM,EAAG,CAAC,EACvF,OAAID,EAAM,SAAW,EAAU,KAE7B3C,EAAAA,IAAC,MAAA,CAAI,UAAU,6CACZ,WAAM,IAAI,CAAC,CAAC6C,EAAKC,CAAG,IACnB5C,EAAAA,KAAC,MAAA,CAAc,UAAU,8DACvB,SAAA,CAAAF,MAAC,IAAA,CAAE,UAAU,kDAAmD,SAAA,OAAO8C,CAAG,EAAE,EAC5E9C,MAAC,KAAE,UAAU,wDAAyD,WAAI,QAAQ,QAAS,GAAG,CAAA,CAAE,CAAA,GAFxF6C,CAGV,CACD,EACH,CAEJ,CAEA,SAASd,GAAW,CAAE,QAAAnB,EAAS,SAAAQ,EAAU,OAAAD,GAAsE,CAC7G,KAAM,CAAC4B,EAAMC,CAAO,EAAIjG,EAAAA,SAAS6D,EAAQ,IAAI,EACvC,CAACqC,EAAaC,CAAc,EAAInG,EAAAA,SAAS6D,EAAQ,WAAW,EAC5D,CAACuC,EAAMC,CAAO,EAAIrG,EAAAA,SAAS6D,EAAQ,MAAQ,EAAE,EAC7C,CAACyC,EAAYC,CAAa,EAAIvG,EAAAA,SAAS6D,EAAQ,YAAc,EAAE,EAC/D,CAAC2C,EAASC,CAAU,EAAIzG,WAAS6D,EAAQ,YAAcA,EAAQ,SAAS,IAAM,EAAE,EAChF,CAAC6C,EAAQC,CAAS,EAAI3G,EAAAA,SAAS,EAAK,EACpC,CAAC4G,EAAUC,CAAW,EAAI7G,EAAAA,SAAS,EAAK,EACxC,CAAC8G,EAAeC,CAAgB,EAAI/G,EAAAA,SAAS,EAAK,EAClD,CAACgH,EAAeC,CAAgB,EAAIjH,EAAAA,SAAgE,CAAA,CAAE,EACtG,CAACuB,EAAWC,CAAY,EAAIxB,EAAAA,SAA4D,CAAA,CAAE,EAEhG6C,EAAAA,UAAU,IAAM,CACdF,EAAU,IAAsB,qBAAqB,EAClD,KAAKP,GAAQ6E,EAAiB7E,EAAK,OAAS,CAAA,CAAE,CAAC,EAC/C,MAAM,IAAM,CAAC,CAAC,EACjBO,EAAU,IAAsE,gBAAgB,EAC7F,KAAKP,GAAQ,CAAMA,EAAK,WAAWZ,EAAaY,EAAK,SAAS,CAAG,CAAC,EAClE,MAAM,IAAM,CAAC,CAAC,CACnB,EAAG,CAAA,CAAE,EAEL,MAAM8E,EAAa,SAAY,CAC7B,GAAI,CAAClB,EAAK,OAAQ,CAChB/D,EAAM,MAAM,0BAA0B,EACtC,MACF,CACA0E,EAAU,EAAI,EACd,GAAI,CACF,MAAMhE,EAAU,IAAI,iBAAiBkB,EAAQ,EAAE,GAAI,CACjD,KAAAmC,EAAM,YAAAE,EAAa,KAAAE,EAAM,WAAAE,EAAY,WAAYE,CAAA,CAClD,EACDvE,EAAM,QAAQ,iBAAiB,EAC/BoC,EAAA,CACF,OAAS8C,EAAU,CACjBlF,EAAM,MAAMkF,EAAI,SAAW,0BAA0B,CACvD,QAAA,CACER,EAAU,EAAK,CACjB,CACF,EAEMS,EAAe,SAAY,CAC/BP,EAAY,EAAI,EAChB,GAAI,CACF,MAAMlE,EAAU,OAAO,iBAAiBkB,EAAQ,EAAE,EAAE,EACpD5B,EAAM,QAAQ,iBAAiB,EAC/BoC,EAAA,EACAD,EAAA,CACF,OAAS+C,EAAU,CACjBlF,EAAM,MAAMkF,EAAI,SAAW,0BAA0B,CACvD,QAAA,CACEN,EAAY,EAAK,EACjBE,EAAiB,EAAK,CACxB,CACF,EAEA,OACE5D,EAAAA,KAACM,EAAO,IAAP,CAAW,QAAS,CAAE,QAAS,CAAA,EAAK,QAAS,CAAE,QAAS,CAAA,EAAK,UAAU,YACtE,SAAA,CAAAR,EAAAA,IAACwC,GAAA,CAAgB,UAAW5B,EAAQ,EAAA,CAAI,SACvC,MAAA,CAAI,UAAWH,EAAG/E,EAAM,eAAe,EACtC,SAAA,CAAAwE,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAWlE,EAChB,SAAA,CAAAgE,EAAAA,IAAC1D,GAAA,CAAW,UAAU,4CAAA,CAA6C,EAAE,iBAAA,EACvE,EACA0D,EAAAA,IAACoE,EAAA,CAAM,MAAOrB,EAAM,SAAUrC,GAAKsC,EAAQtC,EAAE,OAAO,KAAK,EAAG,UAAU,sEAAA,CAAuE,CAAA,EAC/I,SAEC,MAAA,CACC,SAAA,CAAAV,EAAAA,IAAC,QAAA,CAAM,UAAWhE,EAAO,SAAA,gBAEzB,EACAgE,EAAAA,IAAC,WAAA,CACC,MAAOiD,EACP,SAAUvC,GAAKwC,EAAexC,EAAE,OAAO,KAAK,EAC5C,YAAY,mCACZ,KAAM,EACN,UAAWD,EAAG9E,EAAO,UAAU,CAAA,CAAA,CACjC,EACF,EAEAuE,EAAAA,KAAC,MAAA,CAAI,UAAU,wCACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAWlE,EAChB,SAAA,CAAAgE,EAAAA,IAACqE,GAAA,CAAK,UAAU,4CAAA,CAA6C,EAAE,YAAA,EACjE,EACAnE,EAAAA,KAACoE,GAAA,CAAO,MAAOnB,EAAM,cAAeC,EAClC,SAAA,CAAApD,EAAAA,IAACuE,IAAc,UAAU,uEACvB,eAACC,GAAA,CAAY,YAAY,iBAAiB,CAAA,CAC5C,EACAxE,EAAAA,IAACyE,GAAA,CACE,SAAAV,EAAc,OAAOW,GAAKA,EAAE,MAAQA,EAAE,YAAY,EAAE,IAAIA,GACvD1E,MAAC2E,EAAA,CAAgC,MAAOD,EAAE,cAAgBA,EAAE,KACzD,SAAAA,EAAE,cAAgBA,EAAE,IAAA,EADNA,EAAE,IAAMA,EAAE,IAE3B,CACD,CAAA,CACH,CAAA,EACF,EACA1E,EAAAA,IAAC,IAAA,CAAE,UAAU,kDAAkD,SAAA,iDAAA,CAA+C,CAAA,EAChH,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,QAAA,CAAM,UAAWhE,EAAO,SAAA,iBAEzB,EACAgE,EAAAA,IAACoE,EAAA,CAAM,MAAOf,EAAY,SAAU3C,GAAK4C,EAAc5C,EAAE,OAAO,KAAK,EAAG,UAAU,sEAAA,CAAuE,EACzJV,EAAAA,IAAC,IAAA,CAAE,UAAU,kDAAkD,SAAA,4CAAA,CAA0C,CAAA,CAAA,CAC3G,CAAA,EACF,SAEC,MAAA,CACC,SAAA,CAAAE,EAAAA,KAAC,QAAA,CAAM,UAAWlE,EAChB,SAAA,CAAAgE,EAAAA,IAAC1D,GAAA,CAAW,UAAU,4CAAA,CAA6C,EAAE,UAAA,EACvE,EACA4D,EAAAA,KAACoE,GAAA,CAAO,MAAOf,EAAS,cAAeC,EACrC,SAAA,CAAAxD,EAAAA,IAACuE,IAAc,UAAU,uEACvB,eAACC,GAAA,CAAY,YAAY,oBAAoB,CAAA,CAC/C,EACAxE,MAACyE,GAAA,CACE,SAAAnG,EAAU,OACT0B,EAAAA,IAAC2E,EAAA,CAAsB,MAAOhE,EAAE,GAAK,SAAAA,EAAE,MAAtBA,EAAE,EAAyB,CAC7C,CAAA,CACH,CAAA,EACF,EACAX,EAAAA,IAAC,IAAA,CAAE,UAAU,kDAAkD,SAAA,kEAAA,CAAgE,CAAA,EACjI,EAEAA,EAAAA,IAAC,MAAA,CAAI,UAAU,wBACb,SAAAE,EAAAA,KAAC,SAAA,CACC,QAAS+D,EACT,SAAUR,EACV,UAAW7H,EAEV,SAAA,CAAA6H,EAASzD,EAAAA,IAAC,OAAI,UAAU,2EAAA,CAA4E,EAAKA,EAAAA,IAAC4E,GAAA,CAAM,UAAU,SAAA,CAAU,EACpInB,EAAS,YAAc,cAAA,CAAA,CAAA,CAC1B,CACF,CAAA,EACF,EAGAvD,EAAAA,KAAC,MAAA,CAAI,UAAU,2FACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,oFACZ,SAAA,CAAAF,EAAAA,IAAC6E,GAAA,CAAc,UAAU,SAAA,CAAU,EAAE,cAAA,EACvC,EACA7E,EAAAA,IAAC,IAAA,CAAE,UAAU,8CAA8C,SAAA,sHAAmH,EAC5K6D,EAQA3D,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAASiE,EACT,SAAUR,EACV,UAAW7H,GAEV,SAAA,CAAA6H,EAAW3D,EAAAA,IAAC,OAAI,UAAU,2EAAA,CAA4E,EAAKA,EAAAA,IAAC8E,GAAA,CAAO,UAAU,SAAA,CAAU,EACvInB,EAAW,cAAgB,gBAAA,CAAA,CAAA,EAE9B3D,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM8D,EAAiB,EAAK,EACrC,UAAWjI,EACZ,SAAA,QAAA,CAAA,CAED,CAAA,CACF,EAtBAqE,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM4D,EAAiB,EAAI,EACpC,UAAU,qMAEV,SAAA,CAAA9D,EAAAA,IAAC8E,GAAA,CAAO,UAAU,SAAA,CAAU,EAAE,iBAAA,CAAA,CAAA,CAkBhC,CAAA,CAEJ,CAAA,EACF,CAEJ,CAoCA,SAAS9C,GAAW,CAClB,QAAApB,EACA,QAAAW,EACA,QAAAwD,EACA,SAAA3D,CACF,EAKG,CACD,KAAM,CAAC4D,EAAiBC,CAAkB,EAAIlI,EAAAA,SAAS,EAAK,EACtD,CAACmI,EAAUC,CAAW,EAAIpI,EAAAA,SAAwB,IAAI,EACtD,CAACqI,EAAgBC,CAAiB,EAAItI,EAAAA,SAA+B,IAAI,EACzE,CAACuI,EAAUC,CAAW,EAAIxI,EAAAA,SAA2B,MAAM,EAC3D,CAACyI,EAAYC,CAAa,EAAI1I,EAAAA,SAAqB,CAAA,CAAE,EACrD,CAAC2I,EAAmBC,CAAoB,EAAI5I,EAAAA,SAAS,EAAK,EAEhE6C,EAAAA,UAAU,IAAM,CACdgG,EAAA,CACF,EAAG,CAAChF,EAAQ,EAAE,CAAC,EAEf,MAAMgF,EAAkB,SAAY,CAClC,GAAI,CACFD,EAAqB,EAAI,EACzB,MAAMxG,EAAO,MAAMO,EAAU,IAAgB,iBAAiBkB,EAAQ,EAAE,aAAa,EACrF6E,EAActG,CAAI,CACpB,OAASQ,EAAO,CACd,QAAQ,MAAM,8BAA+BA,CAAK,CACpD,QAAA,CACEgG,EAAqB,EAAK,CAC5B,CACF,EAEME,EAAqB,SAAY,CACrC,GAAKT,EAEL,GAAI,CACFD,EAAYC,EAAe,OAAO,EAClC,MAAM1F,EAAU,OAAO,iBAAiBkB,EAAQ,EAAE,YAAYwE,EAAe,OAAO,EAAE,EACtFhE,EAAA,CACF,OAASzB,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,EAC/CX,EAAM,MAAM,yBAAyB,CACvC,QAAA,CACEmG,EAAY,IAAI,EAChBE,EAAkB,IAAI,CACxB,CACF,EAEMS,EAAmB,MAAOC,EAAgBC,IAAwB,CACtE,GAAI,CAuBF,MAAMtG,EAAU,IAAI,iBAAiBkB,EAAQ,EAAE,YAAYmF,CAAM,GAAI,CACnE,UAAWC,CAAA,CACZ,EACD5E,EAAA,CACF,OAASzB,EAAO,CACd,QAAQ,MAAM,gCAAiCA,CAAK,CACtD,CACF,EAGMsG,EAAkBC,GACf3E,EAAQ,OAAO4E,GAAK,CACzB,MAAMC,EAAaD,EAAE,WAAaA,EAAE,KASpC,OARavF,EAAQ,UAAU,OAAO,KAAK8D,GAAKA,EAAE,OAAS0B,CAAU,GAOjD,WAAaF,EAAS,EAG5C,CAAC,EAIGG,EAAkB,CAAC3F,EAAoB4F,IAAqB,CAChE5F,EAAE,aAAa,QAAQ,aAAc4F,CAAQ,EAC7C5F,EAAE,aAAa,cAAgB,MACjC,EAEM6F,EAAkB7F,GAAuB,CAC7CA,EAAE,eAAA,EACFA,EAAE,aAAa,WAAa,MAC9B,EAEM8F,EAAa,MAAO9F,EAAoB+F,IAAoC,CAChF/F,EAAE,eAAA,EACF,MAAM4F,EAAW5F,EAAE,aAAa,QAAQ,YAAY,EACpD,GAAI,CAAC4F,EAAU,OAGf,MAAMI,EAASnF,EAAQ,KAAK4E,GAAKA,EAAE,UAAYG,CAAQ,EACvD,GAAI,CAACI,EAAQ,OAGb,IAAIV,EAAc,GAClB,GAAIS,EAAkB,CAEpB,MAAME,EAAgB/F,EAAQ,UAAU,OAAO,UAAY8D,EAAE,WAAa+B,CAAgB,GAAK,CAAA,EAC3FE,EAAc,OAAS,EACzBX,EAAcW,EAAc,CAAC,EAAE,KAI/BX,GADoBW,EAAc,KAAKjC,GAAKA,EAAE,OAAS,QAAQ,GAAKiC,EAAc,CAAC,IACxD,MAAQ,QAEvC,MAEEX,EAAc,GAGhB,MAAMY,EAAcF,EAAO,WAAaA,EAAO,KAC3CV,IAAgBY,GAClB,MAAMd,EAAiBQ,EAAUN,CAAW,CAEhD,EAEMa,EAAuB,IACpBtF,EAAQ,OAAO4E,GAAK,CACzB,MAAMC,EAAaD,EAAE,WAAaA,EAAE,KAC9BhD,EAAOvC,EAAQ,UAAU,OAAO,KAAK8D,GAAKA,EAAE,OAAS0B,CAAU,EAE/DU,EAAe,CAAC3D,GAAQ,CAACA,EAAK,UAAY,CAACqC,EAAW,KAAK7E,GAAKA,EAAE,KAAOwC,EAAK,QAAQ,EAC5F,OAAI2D,GAAgBX,EAAE,eAAiB,QACrC,QAAQ,IAAI,2BAA4B,CAAE,WAAAC,EAAY,UAAW,CAAC,CAACjD,EAAM,aAAcA,GAAM,SAAU,UAAW,CAAC,CAACqC,EAAW,KAAK7E,GAAKA,EAAE,KAAOwC,GAAM,QAAQ,EAAG,EAE9J2D,CACT,CAAC,EAGGC,EAAkB,MAAOC,EAAoBjB,IAAmB,CACpE,GAAI,CACF,MAAMkB,EAAkB,CACtB,GAAGrG,EAAQ,SACX,eAAgB,CACd,GAAGA,EAAQ,UAAU,eACrB,CAACoG,CAAU,EAAGjB,CAAA,CAChB,EAEF,MAAMrG,EAAU,IAAI,iBAAiBkB,EAAQ,EAAE,GAAI,CAAE,SAAUqG,EAAiB,EAChF7F,EAAA,CACF,OAASzB,EAAO,CACd,QAAQ,MAAM,sBAAuBA,CAAK,EAC1CX,EAAM,MAAM,yBAAyB,CACvC,CACF,EAEMkI,EAAqB3F,EACxB,IAAI4E,GAAKA,EAAE,gBAAgB,EAAE,EAC7B,OAAQgB,GAAqB,CAAC,CAACA,CAAE,EAEpC,OACEjH,EAAAA,KAACM,EAAO,IAAP,CAAW,QAAS,CAAE,QAAS,CAAA,EAAK,QAAS,CAAE,QAAS,CAAA,EAAK,UAAU,YACtE,SAAA,CAAAN,EAAAA,KAAC,MAAA,CAAI,UAAWO,EAAG/E,EAAM,KAAK,EAC5B,SAAA,CAAAwE,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,8EACZ,SAAA,CAAAF,EAAAA,IAAC9D,GAAA,CAAM,UAAU,SAAA,CAAU,EAAE,kBAAgBqF,EAAQ,OAAO,GAAA,EAC9D,EACArB,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAF,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMuF,EAAY,MAAM,EACjC,UAAW,gEAAgED,IAAa,OAAS,yFAA2F,oEAC1L,GACH,SAAA,MAAA,CAAA,EAGDtF,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMuF,EAAY,OAAO,EAClC,UAAW,gEAAgED,IAAa,QAAU,yFAA2F,oEAC3L,GACH,SAAA,OAAA,CAAA,CAED,CAAA,CACF,CAAA,EACF,EACApF,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM+E,EAAmB,EAAI,EACtC,UAAWrJ,EAEX,SAAA,CAAAoE,EAAAA,IAAC9D,GAAA,CAAM,UAAU,SAAA,CAAU,EAAE,SAAA,CAAA,CAAA,CAC/B,EACF,EAEC6I,GAAWW,EACV1F,MAAC,OAAI,UAAU,2BACb,eAAC,MAAA,CAAI,UAAU,mGAAA,CAAoG,EACrH,EACEuB,EAAQ,SAAW,EACrBrB,OAAC,MAAA,CAAI,UAAU,8DACb,SAAA,CAAAF,EAAAA,IAAC,OAAI,UAAU,0FACb,eAAC9D,GAAA,CAAM,UAAU,yCAAyC,CAAA,CAC5D,EACA8D,EAAAA,IAAC,IAAA,CAAE,UAAU,8CAA8C,SAAA,sBAAmB,EAC9EA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMiF,EAAmB,EAAI,EACtC,UAAWrJ,EACZ,SAAA,eAAA,CAAA,CAED,CAAA,CACF,EACE0J,IAAa,OACftF,EAAAA,IAAC,OAAI,UAAU,aACZ,SAAAuB,EAAQ,IAAKmF,GACZxG,EAAAA,KAAC,MAAA,CAAyB,UAAU,gLAClC,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACZ,SAAA,CAAAkH,EAAiBV,EAAO,UAAU,GAAKU,EAAiBV,EAAO,gBAAgB,UAAU,EACxF1G,EAAAA,IAAC,MAAA,CACC,IAAMoH,EAAiBV,EAAO,UAAU,EAAIA,EAAO,WAAaA,EAAO,gBAAgB,WACvF,IAAKA,EAAO,cAAgBA,EAAO,gBAAgB,MAAQ,SAC3D,UAAU,gEAAA,CAAA,EAGZ1G,EAAAA,IAAC,MAAA,CAAI,UAAU,0IACZ,SAAAqH,GAAYX,EAAO,cAAgBA,EAAO,UAAYA,EAAO,gBAAgB,IAAI,EACpF,SAED,MAAA,CACC,SAAA,CAAA1G,EAAAA,IAAC,KAAA,CAAG,UAAU,oDACX,SAAA0G,EAAO,cAAgBA,EAAO,gBAAgB,MAAQA,EAAO,UAAY,cAAA,CAC5E,EACAxG,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAF,EAAAA,IAAC,OAAA,CAAM,SAAA0G,EAAO,WAAaA,EAAO,KAAK,EACtCA,EAAO,gBAAgB,cACtBxG,EAAAA,KAAAoH,EAAAA,SAAA,CACE,SAAA,CAAAtH,EAAAA,IAAC,QAAK,SAAA,GAAA,CAAC,EACPA,EAAAA,IAAC,OAAA,CAAM,SAAA0G,EAAO,eAAe,YAAA,CAAa,CAAA,CAAA,CAC5C,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,EACF,EACAxG,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAF,MAAC,MAAA,CAAI,UAAU,oDACb,SAAAE,EAAAA,KAAC,IAAA,CAAE,SAAA,CAAA,UAAQwG,EAAO,UAAY,IAAI,KAAKA,EAAO,SAAS,EAAE,qBAAuB,GAAA,CAAA,CAAI,CAAA,CACtF,EACA1G,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMqF,EAAkBqB,CAAM,EACvC,SAAUxB,IAAawB,EAAO,QAC9B,UAAU,gHAET,SAAAxB,IAAawB,EAAO,QACnB1G,EAAAA,IAAC,MAAA,CAAI,UAAU,kGAAA,CAAmG,EAElHA,EAAAA,IAAC8E,GAAA,CAAO,UAAU,SAAA,CAAU,CAAA,CAAA,CAEhC,CAAA,CACF,CAAA,CAAA,EA3CQ4B,EAAO,OA4CjB,CACD,EACH,EAEAxG,OAAC,MAAA,CAAI,UAAU,YACZ,SAAA,CAAAsF,EAAW,IAAKU,GAAa,CAC5B,MAAMqB,EAActB,EAAeC,CAAQ,EACrCsB,EAAS5G,EAAQ,UAAU,iBAAiBsF,EAAS,EAAE,EACvDuB,EAAOlG,EAAQ,KAAK4E,GAAKA,EAAE,UAAYqB,CAAM,EAEnD,OACEtH,EAAAA,KAACM,EAAO,IAAP,CAEC,QAAS,CAAE,QAAS,EAAG,EAAG,EAAA,EAC1B,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EAC1B,UAAWC,EAAG/E,EAAM,KAAK,EACzB,WAAY6K,EACZ,OAAS7F,GAAM8F,EAAW9F,EAAGwF,EAAS,EAAE,EAExC,SAAA,CAAAlG,EAAAA,IAAC,OAAI,UAAU,yCACb,SAAAE,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAF,MAAC,MAAA,CAAI,UAAW,qBAAqBkG,EAAS,OAAS,MAAM,gBAAgBA,EAAS,OAAS,MAAM,OACnG,SAAAlG,EAAAA,IAAC9D,GAAA,CAAM,UAAU,UAAU,EAC7B,SACC,MAAA,CACC,SAAA,CAAAgE,EAAAA,KAAC,KAAA,CAAG,UAAU,gFACX,SAAA,CAAAgG,EAAS,aACVlG,EAAAA,IAAC,OAAA,CAAK,UAAU,iGAAkG,WAAY,MAAA,CAAO,CAAA,EACvI,EACCyH,GACCvH,EAAAA,KAAC,IAAA,CAAE,UAAU,iEACX,SAAA,CAAAF,EAAAA,IAACzE,GAAA,CAAY,UAAU,wBAAA,CAAyB,EAAE,SAC5CyE,EAAAA,IAAC,OAAA,CAAK,UAAU,4CAA6C,WAAK,YAAA,CAAa,CAAA,CAAA,CACvF,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,CACF,EAEAE,EAAAA,KAAC,MAAA,CAAI,UAAU,YACZ,SAAA,CAAAqH,EAAY,IAAKpB,GAAM,CACtB,MAAMuB,EAASF,IAAWrB,EAAE,QAC5B,OACEjG,EAAAA,KAAC,MAAA,CAEC,UAAW,kHAAkHwH,EAAS,qCAAuC,wGAC3K,GACF,UAAW,GACX,YAAchH,GAAM2F,EAAgB3F,EAAGyF,EAAE,OAAO,EAGhD,SAAA,CAAAjG,EAAAA,KAAC,MAAA,CAAI,UAAU,WACZ,SAAA,CAAAkH,EAAiBjB,EAAE,UAAU,GAAKiB,EAAiBjB,EAAE,gBAAgB,UAAU,EAC9EnG,EAAAA,IAAC,MAAA,CACC,IAAMoH,EAAiBjB,EAAE,UAAU,EAAIA,EAAE,WAAaA,EAAE,gBAAgB,WACxE,IAAKA,EAAE,aACP,UAAU,8EAAA,CAAA,QAGX,MAAA,CAAI,UAAU,+KACZ,SAAAkB,GAAYlB,EAAE,YAAY,EAC7B,EAEDuB,SACE,MAAA,CAAI,UAAU,gHACb,SAAA1H,EAAAA,IAACzE,GAAA,CAAY,UAAU,SAAA,CAAU,CAAA,CACnC,CAAA,EAEJ,EAGA2E,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAF,EAAAA,IAAC,KAAA,CAAG,UAAU,6DAA8D,SAAAmG,EAAE,aAAa,EAC1FA,EAAE,gBAAgB,cACjBnG,EAAAA,IAAC,QAAK,UAAU,qHACb,SAAAmG,EAAE,eAAe,YAAA,CACpB,CAAA,EAEJ,EAEAnG,EAAAA,IAAC,MAAA,CAAI,UAAU,iCACb,SAAAE,EAAAA,KAACoE,GAAA,CACC,MAAO6B,EAAE,WAAaA,EAAE,MAAQ,GAChC,cAAgBwB,GAAU7B,EAAiBK,EAAE,QAASwB,IAAU,UAAY,GAAKA,CAAK,EAEtF,SAAA,CAAA3H,EAAAA,IAACuE,IAAc,UAAU,0JACvB,eAACC,GAAA,CAAY,YAAY,UAAU,CAAA,CACrC,SACCC,GAAA,CACC,SAAA,CAAAzE,EAAAA,IAAC2E,EAAA,CAAW,MAAM,UAAU,SAAA,UAAO,EAClCa,EAAW,IAAIoC,GAAO,CACrB,MAAMC,EAAWjH,EAAQ,UAAU,OAAO,OAAO8D,GAAKA,EAAE,WAAakD,EAAI,EAAE,GAAK,CAAA,EAChF,OAAIC,EAAS,SAAW,EAAU,YAE/BC,GAAA,CACC,SAAA,CAAA9H,EAAAA,IAAC+H,GAAA,CAAY,UAAU,mEAAoE,SAAAH,EAAI,aAAa,EAC3GC,EAAS,IAAInD,GACZ1E,EAAAA,IAAC2E,GAAsB,MAAOD,EAAE,KAAM,UAAU,cAAe,SAAAA,EAAE,IAAA,EAAhDA,EAAE,EAAmD,CACvE,CAAA,CAAA,EAJekD,EAAI,EAKtB,CAEJ,CAAC,CAAA,CAAA,CACH,CAAA,CAAA,CAAA,CACF,CACF,CAAA,EACF,EAGA1H,EAAAA,KAAC,MAAA,CAAI,UAAU,+EACb,SAAA,CAAAF,EAAAA,IAAC,SAAA,CACC,QAAUU,GAAM,CACdA,EAAE,eAAA,EACFA,EAAE,gBAAA,EACFqG,EAAgBb,EAAS,GAAIC,EAAE,OAAO,CACxC,EACA,UAAW,oCAAoCuB,EAC3C,uDACA,2EACF,GACF,MAAOA,EAAS,oBAAsB,iBAEtC,SAAA1H,EAAAA,IAACzE,GAAA,CAAY,UAAU,SAAA,CAAU,CAAA,CAAA,EAEnCyE,EAAAA,IAAC,MAAA,CAAI,UAAU,6CAAA,CAA8C,EAC7DA,EAAAA,IAAC,OAAI,UAAU,wEACb,eAACgI,GAAA,CAAa,UAAU,UAAU,CAAA,CACpC,CAAA,CAAA,CACF,CAAA,CAAA,EApFK7B,EAAE,OAAA,CAuFb,CAAC,EACAoB,EAAY,SAAW,GACtBrH,EAAAA,KAAC,MAAA,CAAI,UAAU,+JACb,SAAA,CAAAF,EAAAA,IAAC9D,GAAA,CAAM,UAAU,gDAAA,CAAiD,EAClEgE,EAAAA,KAAC,IAAA,CAAE,UAAU,yCAAyC,SAAA,CAAA,uCAAqCgG,EAAS,YAAA,CAAA,CAAa,CAAA,CAAA,CACnH,CAAA,CAAA,CAEJ,CAAA,CAAA,EA9HKA,EAAS,EAAA,CAiIpB,CAAC,EAGAW,EAAA,EAAuB,OAAS,GAC/B3G,EAAAA,KAACM,EAAO,IAAP,CACC,QAAS,CAAE,QAAS,EAAG,EAAG,EAAA,EAC1B,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EAC1B,UAAU,uGACV,WAAY+F,EACZ,OAAS7F,GAAM8F,EAAW9F,EAAG,IAAI,EAEjC,SAAA,CAAAR,EAAAA,KAAC,KAAA,CAAG,UAAU,mFACZ,SAAA,CAAAF,EAAAA,IAAC,MAAA,CAAI,UAAU,iDAAA,CAAkD,EAAE,2BAElE,OAAA,CAAK,UAAU,iGAAkG,SAAA6G,EAAA,EAAuB,MAAA,CAAO,CAAA,EAClJ,EACA7G,MAAC,OAAI,UAAU,uDACZ,aAAuB,IAAKmG,GAC3BjG,EAAAA,KAAC,MAAA,CAEC,UAAU,iNACV,UAAW,GACX,YAAcQ,GAAM2F,EAAgB3F,EAAGyF,EAAE,OAAO,EAGhD,SAAA,CAAAjG,EAAAA,KAAC,MAAA,CAAI,UAAU,WACZ,SAAA,CAAAkH,EAAiBjB,EAAE,UAAU,GAAKiB,EAAiBjB,EAAE,gBAAgB,UAAU,EAC9EnG,EAAAA,IAAC,MAAA,CACC,IAAMoH,EAAiBjB,EAAE,UAAU,EAAIA,EAAE,WAAaA,EAAE,gBAAgB,WACxE,IAAKA,EAAE,aACP,UAAU,8EAAA,CAAA,EAGZnG,EAAAA,IAAC,MAAA,CAAI,UAAU,+KACX,UAAAmG,EAAE,eAAe,CAAC,GAAK,KAAK,YAAA,CAAY,CAC5C,EAEFnG,EAAAA,IAAC,MAAA,CAAI,UAAU,2HAA2H,SAAA,GAAA,CAE1I,CAAA,EACF,EAGAE,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAF,EAAAA,IAAC,MAAA,CAAI,UAAU,0BACb,SAAAA,EAAAA,IAAC,MAAG,UAAU,6DAA8D,SAAAmG,EAAE,YAAA,CAAa,CAAA,CAC7F,EAEAnG,EAAAA,IAAC,MAAA,CAAI,UAAU,+BACb,SAAAE,EAAAA,KAACoE,GAAA,CACC,MAAO6B,EAAE,WAAaA,EAAE,MAAQ,GAChC,cAAgBrD,GAAQgD,EAAiBK,EAAE,QAASrD,CAAG,EAEvD,SAAA,CAAA9C,EAAAA,IAACuE,IAAc,UAAU,qFACvB,eAACC,GAAA,CAAY,YAAY,iBAAiB,CAAA,CAC5C,SACCC,GAAA,CACC,SAAA,CAAAzE,EAAAA,IAAC2E,EAAA,CAAW,MAAM,UAAU,SAAA,UAAO,EAClCa,EAAW,IAAIoC,GAAO,CACrB,MAAMC,EAAWjH,EAAQ,UAAU,OAAO,OAAO8D,GAAKA,EAAE,WAAakD,EAAI,EAAE,GAAK,CAAA,EAChF,OAAIC,EAAS,SAAW,EAAU,YAE/BC,GAAA,CACC,SAAA,CAAA9H,EAAAA,IAAC+H,GAAA,CAAY,UAAU,mEAAoE,SAAAH,EAAI,aAAa,EAC3GC,EAAS,IAAInD,GACZ1E,EAAAA,IAAC2E,GAAsB,MAAOD,EAAE,KAAM,UAAU,cAAe,SAAAA,EAAE,IAAA,EAAhDA,EAAE,EAAmD,CACvE,CAAA,CAAA,EAJekD,EAAI,EAKtB,CAEJ,CAAC,CAAA,CAAA,CACH,CAAA,CAAA,CAAA,CACF,CACF,CAAA,EACF,EAGA5H,EAAAA,IAAC,OAAI,UAAU,oEACb,eAACgI,GAAA,CAAa,UAAU,UAAU,CAAA,CACpC,CAAA,CAAA,EA3DK7B,EAAE,OAAA,CA6DV,CAAA,CACH,CAAA,CAAA,CAAA,CACF,CAAA,CAEJ,CAAA,EAEJ,EAEAnG,EAAAA,IAACiI,GAAA,CACC,KAAMjD,EACN,QAAS,IAAMC,EAAmB,EAAK,EACvC,UAAWrE,EAAQ,GACnB,cAAeQ,EACf,mBAAA8F,CAAA,CAAA,EAGFlH,EAAAA,IAACkI,GAAA,CAAY,KAAM,CAAC,CAAC9C,EAAgB,aAAe+C,GAAS,CAACA,GAAQ9C,EAAkB,IAAI,EAC1F,gBAAC+C,GAAA,CACC,SAAA,CAAAlI,OAACmI,GAAA,CACC,SAAA,CAAArI,EAAAA,IAACsI,IAAiB,SAAA,oBAAA,CAAkB,SACnCC,GAAA,CAAuB,SAAA,CAAA,yCACW,SAAA,CAAQ,SAAAnD,GAAgB,cAAgBA,GAAgB,gBAAgB,MAAQ,cAAc,EAAS,kDAAA,CAAA,CAE1I,CAAA,EACF,SACCoD,GAAA,CACC,SAAA,CAAAxI,EAAAA,IAACyI,IAAkB,SAAA,QAAA,CAAM,EACzBzI,EAAAA,IAAC0I,GAAA,CACC,QAAS7C,EACT,UAAU,6EACX,SAAA,eAAA,CAAA,CAED,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,CAEJ,CAIA,SAASoC,GAAkB,CACzB,KAAAE,EACA,QAAAQ,EACA,UAAA5J,EACA,cAAA6J,EACA,mBAAA1B,EAAqB,CAAA,CACvB,EAMG,CACD,KAAM,CAAC2B,EAAWC,CAAY,EAAI/L,EAAAA,SAA+B,UAAU,EACrE,CAACgM,EAAOC,CAAQ,EAAIjM,EAAAA,SAAS,EAAE,EAC/B,CAACkM,EAASC,CAAU,EAAInM,EAAAA,SAAS,EAAE,EACnC,CAACoM,EAAiBC,CAAkB,EAAIrM,EAAAA,SAAwB,IAAI,EACpE,CAACsM,EAAUC,CAAW,EAAIvM,EAAAA,SAAoB,CAAA,CAAE,EAChD,CAACwM,EAAiBC,CAAkB,EAAIzM,EAAAA,SAAS,EAAK,EACtD,CAAC0M,EAAQC,CAAS,EAAI3M,EAAAA,SAAS,EAAK,EACpC,CAAC4M,EAAeC,CAAgB,EAAI7M,EAAAA,SAAS,EAAK,EAExD6C,EAAAA,UAAU,IAAM,CACVuI,GAAQU,IAAc,YACxBgB,EAAA,CAEJ,EAAG,CAAC1B,EAAMU,CAAS,CAAC,EAEpB,MAAMgB,EAAgB,SAAY,CAChC,GAAI,CACFL,EAAmB,EAAI,EACvB,MAAMrK,EAAO,MAAMO,EAAU,IAA6B,eAAe,EACzE,GAAIP,EAAK,SAAU,CACjB,MAAM2K,EAAoB3K,EAAK,SAAS,OAAOwB,GAAK,CAACuG,EAAmB,SAASvG,EAAE,EAAE,CAAC,EACtF2I,EAAYQ,CAAiB,CAC/B,CACF,OAASnK,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,CAClD,QAAA,CACE6J,EAAmB,EAAK,CAC1B,CACF,EAEMO,EAAuB,SAAY,CACvC,GAAI,CAAChB,EAAM,OAAQ,CACjB/J,EAAM,MAAM,+BAA+B,EAC3C,MACF,CACA4K,EAAiB,EAAI,EACrB,GAAI,CACF,MAAMlK,EAAU,KAAK,iBAAiBX,CAAS,kBAAmB,CAChE,MAAOgK,EAAM,KAAA,EACb,QAASE,EAAQ,KAAA,GAAU,MAAA,CAC5B,EACDjK,EAAM,QAAQ,iBAAiB,EAC/BgK,EAAS,EAAE,EACXE,EAAW,EAAE,EACbN,EAAA,EACAD,EAAA,CACF,OAASzE,EAAU,CACjBlF,EAAM,MAAMkF,EAAI,SAAW,2BAA2B,CACxD,QAAA,CACE0F,EAAiB,EAAK,CACxB,CACF,EAEMI,EAAmB,SAAY,CACnC,GAAKb,EAEL,GAAI,CACFO,EAAU,EAAI,EACd,MAAMhK,EAAU,KAAK,iBAAiBX,CAAS,uBAAwB,CACrE,WAAYoK,CAAA,CACb,EACDP,EAAA,EACAD,EAAA,CACF,OAAShJ,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CX,EAAM,MAAM,+BAA+B,CAC7C,QAAA,CACE0K,EAAU,EAAK,CACjB,CACF,EAEA,OACE1J,EAAAA,IAACiK,IAAO,KAAA9B,EAAY,aAAcQ,EAChC,SAAAzI,EAAAA,KAACgK,GAAA,CAAc,UAAU,oFACvB,SAAA,CAAAlK,EAAAA,IAACmK,IACC,SAAAnK,EAAAA,IAACoK,GAAA,CAAY,UAAU,gCAAgC,8BAAkB,CAAA,CAC3E,EAEAlK,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAF,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM8I,EAAa,OAAO,EACnC,UAAW,8DAA8DD,IAAc,QAAU,oEAAsE,mDACrK,GACH,SAAA,WAAA,CAAA,EAGD7I,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM8I,EAAa,UAAU,EACtC,UAAW,8DAA8DD,IAAc,WAAa,oEAAsE,mDACxK,GACH,SAAA,mBAAA,CAAA,CAED,EACF,EAECA,IAAc,QACb3I,OAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAF,EAAAA,IAAC,QAAA,CAAM,UAAU,+DAA+D,SAAA,kBAAe,EAC/FA,EAAAA,IAACoE,EAAA,CAAM,MAAO2E,EAAO,SAAUrI,GAAKsI,EAAStI,EAAE,OAAO,KAAK,EAAG,YAAY,wBAAwB,UAAU,uEAAuE,EACnLV,EAAAA,IAAC,IAAA,CAAE,UAAU,kDAAkD,SAAA,4DAAA,CAA0D,CAAA,EAC3H,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,QAAA,CAAM,UAAU,+DAA+D,SAAA,eAAY,EAC5FA,EAAAA,IAAC,IAAA,CAAE,UAAU,wCAAwC,SAAA,kCAA+B,EACpFA,EAAAA,IAAC,IAAA,CAAE,UAAU,kDAAkD,SAAA,gDAAA,CAA8C,CAAA,EAC/G,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,QAAA,CAAM,UAAU,+DAA+D,SAAA,8BAA2B,EAC3GA,EAAAA,IAAC,WAAA,CACC,MAAOiJ,EACP,SAAUvI,GAAKwI,EAAWxI,EAAE,OAAO,KAAK,EACxC,YAAY,2CACZ,KAAM,EACN,UAAWD,EAAG9E,EAAO,aAAa,CAAA,CAAA,CACpC,EACF,EACAuE,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAF,MAAC,SAAA,CAAO,QAAS2I,EAAS,UAAW9M,EAAe,SAAA,SAEpD,EACAmE,EAAAA,IAAC,SAAA,CACC,QAAS+J,EACT,SAAUJ,GAAiB,CAACZ,EAAM,KAAA,EAClC,UAAWnN,EAEV,WAAgB,aAAe,iBAAA,CAAA,CAClC,CAAA,CACF,CAAA,CAAA,CACF,EAEAsE,EAAAA,KAAC,MAAA,CAAI,UAAU,YACZ,SAAA,CAAAqJ,EACCvJ,EAAAA,IAAC,MAAA,CAAI,UAAU,2BACb,SAAAA,EAAAA,IAAC,OAAI,UAAU,mGAAA,CAAoG,CAAA,CACrH,EACEqJ,EAAS,SAAW,EACtBrJ,EAAAA,IAAC,MAAA,CAAI,UAAU,0DAA0D,SAAA,oBAAA,CAEzE,EAEAA,EAAAA,IAAC,MAAA,CAAI,UAAU,8DACZ,SAAAqJ,EAAS,IAAIgB,GACZnK,EAAAA,KAAC,MAAA,CAEC,QAAS,IAAMkJ,EAAmBiB,EAAQ,EAAE,EAC5C,UAAW,+EAA+ElB,IAAoBkB,EAAQ,GAClH,oGACA,gJACF,GAEF,SAAA,CAAArK,MAAC,OAAI,UAAW,kFAAkFmJ,IAAoBkB,EAAQ,GAAK,uEAAyE,kCAAkC,GAC3O,SAAAlB,IAAoBkB,EAAQ,IAAMrK,EAAAA,IAAC,MAAA,CAAI,UAAU,wDAAwD,EAC5G,EAECsK,GAAiBD,CAAc,EAC9BrK,EAAAA,IAAC,MAAA,CACC,IAAKsK,GAAiBD,CAAc,EACpC,IAAKA,EAAQ,KACb,UAAU,gEAAA,CAAA,QAGX,MAAA,CAAI,UAAU,kJACZ,SAAAhD,GAAYgD,EAAQ,IAAI,EAC3B,EAGFnK,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAF,EAAAA,IAAC,IAAA,CAAE,UAAW,uBAAuBmJ,IAAoBkB,EAAQ,GAAK,kCAAoC,+BAA+B,GACtI,SAAAA,EAAQ,MAAQ,YACnB,EACAnK,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACZ,SAAA,CAAAmK,EAAQ,cACPrK,EAAAA,IAAC,IAAA,CAAE,UAAU,yDACV,WAAQ,aACX,QAED,IAAA,CAAE,UAAU,sDACV,SAAAqK,EAAQ,OAAS,UAAA,CACpB,CAAA,CAAA,CACF,CAAA,EACF,EAECA,EAAQ,MACPrK,EAAAA,IAAC,OAAI,UAAU,gGACZ,WAAQ,IAAA,CACX,CAAA,CAAA,EA1CGqK,EAAQ,EAAA,CA6ChB,EACH,SAGD,MAAA,CACC,SAAA,CAAArK,EAAAA,IAAC,QAAA,CAAM,UAAU,+DAA+D,SAAA,eAAY,EAC5FA,EAAAA,IAAC,IAAA,CAAE,UAAU,wCAAwC,SAAA,iCAAA,CAA+B,CAAA,EACtF,EAEAA,EAAAA,IAAC,MAAA,CAAI,UAAU,aACb,SAAAE,EAAAA,KAAC,SAAA,CACC,QAAS8J,EACT,SAAU,CAACb,GAAmBM,EAC9B,UAAWhJ,EAAG7E,EAAa,6BAA6B,EAEvD,SAAA,CAAA6N,EAASzJ,EAAAA,IAAC,OAAI,UAAU,2EAAA,CAA4E,EAAKA,EAAAA,IAAC9D,GAAA,CAAM,UAAU,SAAA,CAAU,EAAG,aAAA,CAAA,CAAA,EAG5I,EAEA8D,MAAC,MAAA,CAAI,UAAU,yDACb,gBAAC,IAAA,CAAE,SAAA,CAAAA,EAAAA,IAAC,OAAA,CAAK,UAAU,8CAA8C,SAAA,eAAY,EAAO,wCAAA,CAAA,CAAsC,CAAA,CAC5H,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CACF,CAEJ,CAMA,SAASiC,GAAS,CAAE,QAAArB,EAAS,SAAAQ,GAAwD,CACnF,KAAM,CAACmJ,EAAaC,CAAc,EAAIzN,EAAAA,SAAS,EAAK,EAC9C,CAAC0N,EAAYC,CAAa,EAAI3N,EAAAA,SAAwB,IAAI,EAC1D,CAACyI,EAAYC,CAAa,EAAI1I,EAAAA,SAAqB,CAAA,CAAE,EAE3D6C,EAAAA,UAAU,IAAM,CACdgG,EAAA,CACF,EAAG,CAAChF,EAAQ,EAAE,CAAC,EAEf,MAAMgF,EAAkB,SAAY,CAClC,GAAI,CACF,MAAMzG,EAAO,MAAMO,EAAU,IAAgB,iBAAiBkB,EAAQ,EAAE,aAAa,EACrF6E,EAActG,CAAI,CACpB,OAASQ,EAAO,CACd,QAAQ,MAAM,8BAA+BA,CAAK,CACpD,CACF,EAEMgL,EAAe/J,EAAQ,UAAU,OAAS,CAAA,EAI1B,CAAC,GAAGnF,EAAgB,EAGP,IAAImP,IACpBD,EAAa,QAAUjG,EAAE,OAASkG,EAAS,IAAI,EAKzDA,EACR,EAOD,MAAMC,EAAc,CAAC,GAAGF,CAAY,EAGpClP,GAAiB,QAAQmP,GAAY,CAC9BC,EAAY,KAAKnG,GAAKA,EAAE,OAASkG,EAAS,IAAI,GACjDC,EAAY,KAAK,CAAE,GAAGD,EAAU,OAAQ,GAAO,GAAI,YAAYA,EAAS,EAAE,EAAA,CAAI,CAElF,CAAC,EAED,MAAME,EAAa,MAAO3H,GAAsB,CAC9C,GAAI,CAIF,GAHAuH,EAAcvH,EAAK,EAAE,EAGjBA,EAAK,GAAG,SAAA,EAAW,WAAW,WAAW,EAAG,CAC9C,MAAM4H,EAAU,CACd,KAAM5H,EAAK,KACX,YAAaA,EAAK,YAClB,OAAQ,EAAA,EAEV,MAAMzD,EAAU,KAAK,iBAAiBkB,EAAQ,EAAE,SAAUmK,CAAO,CACnE,MAEE,MAAMrL,EAAU,IAAI,iBAAiBkB,EAAQ,EAAE,UAAUuC,EAAK,EAAE,GAAI,CAClE,OAAQ,CAACA,EAAK,MAAA,CACf,EAEH/B,EAAA,CACF,OAASzB,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,EAC3CX,EAAM,MAAM,uBAAuB,CACrC,QAAA,CACE0L,EAAc,IAAI,CACpB,CACF,EAEA,OACExK,EAAAA,KAACM,EAAO,IAAP,CAAW,QAAS,CAAE,QAAS,CAAA,EAAK,QAAS,CAAE,QAAS,CAAA,EAAK,UAAU,YACtE,SAAA,CAAAN,EAAAA,KAAC,MAAA,CAAI,UAAWO,EAAG/E,EAAM,KAAK,EAC5B,SAAA,CAAAwE,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,8EACZ,SAAA,CAAAF,EAAAA,IAACzE,GAAA,CAAY,UAAU,SAAA,CAAU,EAAE,gBAAA,EACrC,EACA2E,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMsK,EAAe,EAAI,EAClC,UAAW5O,EAEX,SAAA,CAAAoE,EAAAA,IAACM,GAAA,CAAK,UAAU,SAAA,CAAU,EAAE,WAAA,CAAA,CAAA,CAC9B,EACF,EACAN,EAAAA,IAAC,IAAA,CAAE,UAAU,8CAA8C,SAAA,sDAAmD,QAE7G,MAAA,CAAI,UAAU,wCACZ,SAAA6K,EAAY,IAAI1H,GACfjD,EAAAA,KAAC,MAAA,CAEC,UAAW,2CAA2CiD,EAAK,SAAW,GAAO,4EAA8E,mCACzJ,GAEF,SAAA,CAAAjD,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAAF,EAAAA,IAAC,OAAI,UAAW,qEAAqEmD,EAAK,SAAW,GAAO,wCAA0C,4BAA4B,GAChL,eAACkB,GAAA,CAAK,UAAW,WAAWlB,EAAK,SAAW,GAAO,kCAAoC,gCAAgC,GAAI,CAAA,CAC7H,QACC,KAAA,CAAG,UAAU,sDAAuD,SAAAA,EAAK,MAAQ,gBAAA,CAAiB,CAAA,EACrG,QACC,IAAA,CAAE,UAAU,8CAA+C,SAAAA,EAAK,aAAe,IAAI,EACpFjD,EAAAA,KAAC,MAAA,CAAI,UAAU,yFACb,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAU,yCACf,SAAA,CAAAF,EAAAA,IAAC,QAAA,CACC,KAAK,WACL,QAASmD,EAAK,SAAW,GACzB,SAAU,IAAM2H,EAAW3H,CAAI,EAC/B,SAAU,CAAC,CAACsH,EACZ,UAAU,2CAAA,CAAA,EAEZzK,EAAAA,IAAC,OAAA,CAAK,UAAU,wCACb,SAAAyK,IAAetH,EAAK,GACjB,cACAA,EAAK,SAAW,GACd,SACA,UAAA,CACR,CAAA,EACF,EAECA,EAAK,QACJjD,EAAAA,KAAC,SAAA,CACC,UAAU,mIACV,MAAOiD,EAAK,UAAY,GACxB,SAAU,MAAOzC,GAAM,CACrB,MAAMsK,EAActK,EAAE,OAAO,MAC7B,GAAI,CAIGyC,EAAK,GAAG,WAAW,WAAW,WAAW,IAC5C,MAAMzD,EAAU,IAAI,iBAAiBkB,EAAQ,EAAE,UAAUuC,EAAK,EAAE,GAAI,CAAE,SAAU6H,CAAA,CAAa,EAC7F5J,EAAA,EAEJ,OAAS8C,EAAK,CACZ,QAAQ,MAAM,iCAAkCA,CAAG,CACrD,CACF,EAEA,SAAA,CAAAlE,EAAAA,IAAC,SAAA,CAAO,MAAM,GAAG,SAAA,cAAW,EAC3BwF,EAAW,IAAI7E,GACdX,EAAAA,IAAC,SAAA,CAAkB,MAAOW,EAAE,GAAK,SAAAA,EAAE,YAAA,EAAtBA,EAAE,EAAiC,CACjD,CAAA,CAAA,CAAA,CACH,CAAA,CAEJ,CAAA,CAAA,EAtDKwC,EAAK,EAAA,CAwDb,CAAA,CACH,CAAA,EACF,EAEAnD,EAAAA,IAACiL,GAAA,CACC,KAAMV,EACN,QAAS,IAAMC,EAAe,EAAK,EACnC,UAAW5J,EAAQ,GACnB,YAAaQ,CAAA,CAAA,CACf,EACF,CAEJ,CAIA,SAAS6J,GAAa,CAAE,KAAA9C,EAAM,QAAAQ,EAAS,UAAA5J,EAAW,YAAAmM,GAAmG,CACnJ,KAAM,CAACC,EAAUC,CAAW,EAAIrO,EAAAA,SAAS,EAAE,EACrC,CAACmJ,EAAUmF,CAAW,EAAItO,EAAAA,SAAS,EAAE,EACrC,CAACyI,EAAYC,CAAa,EAAI1I,EAAAA,SAAqB,CAAA,CAAE,EACrD,CAAC2I,EAAmBC,CAAoB,EAAI5I,EAAAA,SAAS,EAAK,EAC1D,CAACkG,EAAaC,CAAc,EAAInG,EAAAA,SAAS,EAAE,EAC3C,CAACuO,EAASC,CAAU,EAAIxO,EAAAA,SAAS,EAAE,EACnC,CAACgI,EAASyG,CAAU,EAAIzO,EAAAA,SAAS,EAAK,EAE5C6C,EAAAA,UAAU,IAAM,CACVuI,GACFvC,EAAA,CAEJ,EAAG,CAACuC,CAAI,CAAC,EAET,MAAMvC,EAAkB,SAAY,CAClC,GAAI,CACFD,EAAqB,EAAI,EACzB,MAAMxG,EAAO,MAAMO,EAAU,IAAgB,iBAAiBX,CAAS,aAAa,EACpF0G,EAActG,CAAI,EACdA,EAAK,OAAS,GAAK,CAAC+G,GACtBmF,EAAYlM,EAAK,CAAC,EAAE,EAAE,CAE1B,OAASQ,EAAO,CACd,QAAQ,MAAM,8BAA+BA,CAAK,CACpD,QAAA,CACEgG,EAAqB,EAAK,CAC5B,CACF,EAEM8F,EAAmB,SAAY,CACnC,GAAKN,EAAS,OAEd,GAAI,CACFK,EAAW,EAAI,EACf,MAAM9L,EAAU,KAAK,iBAAiBX,CAAS,SAAU,CACvD,KAAMoM,EACN,SAAAjF,EACA,YAAAjD,EACA,aAAcqI,EACd,OAAQ,EAAA,CACT,EACDJ,EAAA,EACAvC,EAAA,EAEAyC,EAAY,EAAE,EACdlI,EAAe,EAAE,EACjBqI,EAAW,EAAE,EACT/F,EAAW,OAAS,KAAeA,EAAW,CAAC,EAAE,EAAE,CACzD,OAAS7F,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,EAC3CX,EAAM,MAAM,uBAAuB,CACrC,QAAA,CACEwM,EAAW,EAAK,CAClB,CACF,EAGA,OACExL,EAAAA,IAACiK,IAAO,KAAA9B,EAAY,aAAcQ,EAChC,SAAAzI,EAAAA,KAACgK,GAAA,CAAc,UAAU,oFACvB,SAAA,CAAAlK,EAAAA,IAACmK,IACC,SAAAnK,EAAAA,IAACoK,GAAA,CAAY,UAAU,gCAAgC,wBAAY,CAAA,CACrE,EAEAlK,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAF,EAAAA,IAAC,QAAA,CAAM,UAAWhE,EAAO,SAAA,cAAW,EACpCgE,EAAAA,IAACoE,EAAA,CAAM,MAAO+G,EAAU,SAAUzK,GAAK0K,EAAY1K,EAAE,OAAO,KAAK,EAAG,YAAY,oCAAoC,UAAU,sEAAA,CAAuE,CAAA,EACvM,SACC,MAAA,CACC,SAAA,CAAAV,EAAAA,IAAC,QAAA,CAAM,UAAWhE,EAAO,SAAA,WAAQ,EACjCgE,EAAAA,IAAC,SAAA,CACC,MAAOkG,EACP,SAAWxF,GAAM2K,EAAY3K,EAAE,OAAO,KAAK,EAC3C,SAAUgF,EACV,UAAW/J,EAEV,WACCqE,EAAAA,IAAC,SAAA,CAAO,SAAA,wBAAqB,EAE7BwF,EAAW,IAAIoC,GACb5H,EAAAA,IAAC,SAAA,CAAoB,MAAO4H,EAAI,GAC7B,WAAI,YAAA,EADMA,EAAI,EAEjB,CACD,CAAA,CAAA,CAEL,EACF,SACC,MAAA,CACC,SAAA,CAAA5H,EAAAA,IAAC,QAAA,CAAM,UAAWhE,EAAO,SAAA,cAAW,EACpCgE,EAAAA,IAACoE,EAAA,CAAM,MAAOnB,EAAa,SAAUvC,GAAKwC,EAAexC,EAAE,OAAO,KAAK,EAAG,YAAY,iCAAiC,UAAU,sEAAA,CAAuE,CAAA,EAC1M,SACC,MAAA,CACC,SAAA,CAAAV,EAAAA,IAAC,QAAA,CAAM,UAAWhE,EAAO,SAAA,wBAAqB,EAC9CgE,EAAAA,IAAC,WAAA,CACC,MAAOsL,EACP,SAAU5K,GAAK6K,EAAW7K,EAAE,OAAO,KAAK,EACxC,YAAY,8FACZ,KAAM,EACN,UAAWD,EAAG9E,EAAO,UAAU,CAAA,CAAA,CACjC,EACF,EACAuE,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMlB,EAAM,KAAK,0EAA0E,EACpG,UAAU,yIAEV,SAAA,CAAAgB,EAAAA,IAAC0L,GAAA,CAAS,UAAU,SAAA,CAAU,EAAE,kBAAA,CAAA,CAAA,CAClC,EACF,EAEAxL,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAF,MAAC,SAAA,CAAO,QAAS2I,EAAS,UAAW9M,EAAe,SAAA,SAEpD,EACAmE,EAAAA,IAAC,SAAA,CACC,QAASyL,EACT,SAAU1G,GAAW,CAACoG,EAAS,KAAA,EAC/B,UAAWvP,EAEV,WAAU,cAAgB,aAAA,CAAA,CAC7B,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CAIA,SAASsG,GAAc,CACrB,QAAAtB,EACA,QAAAW,EACA,SAAAH,CACF,EAIG,CACD,KAAM,CAACoE,EAAYC,CAAa,EAAI1I,EAAAA,SAAqB,CAAA,CAAE,EACrD,CAACgI,EAASyG,CAAU,EAAIzO,EAAAA,SAAS,EAAK,EACtC,CAAC4O,EAAcC,CAAe,EAAI7O,EAAAA,SAAS,EAAK,EAChD,CAAC8O,EAAiBC,CAAkB,EAAI/O,EAAAA,SAA0B,IAAI,EAEtE,CAACgP,EAAkBC,CAAmB,EAAIjP,EAAAA,SAA0B,IAAI,EAExE6I,EAAkB,SAAY,CAClC,GAAI,CACF4F,EAAW,EAAI,EACf,MAAMrM,EAAO,MAAMO,EAAU,IAAgB,iBAAiBkB,EAAQ,EAAE,aAAa,EACrF6E,EAActG,CAAI,CACpB,OAASQ,EAAO,CACd,QAAQ,MAAM,8BAA+BA,CAAK,CACpD,QAAA,CACE6L,EAAW,EAAK,CAClB,CACF,EAEA5L,EAAAA,UAAU,IAAM,CACdgG,EAAA,CACF,EAAG,CAAChF,EAAQ,EAAE,CAAC,EAEf,MAAMqL,EAAqB/F,GAAuB,CAChD8F,EAAoB9F,CAAQ,CAC9B,EAEMgG,EAAsB,SAAY,CACtC,GAAKH,EAEL,GAAI,CACF,MAAMrM,EAAU,OAAO,iBAAiBkB,EAAQ,EAAE,eAAemL,EAAiB,EAAE,EAAE,EACtFnG,EAAA,CACF,OAASjG,EAAO,CACd,QAAQ,MAAM,6BAA8BA,CAAK,EACjDX,EAAM,MAAM,2BAA2B,CACzC,QAAA,CACEgN,EAAoB,IAAI,CAC1B,CACF,EAEMG,EAAgB,MAAOnF,EAAoBjB,IAAmB,CAClE,GAAI,CACF,MAAMqG,EAAexL,EAAQ,UAAU,gBAAkB,CAAA,EACnDqG,EAAkB,CACtB,GAAGrG,EAAQ,SACX,eAAgB,CACd,GAAGwL,EACH,CAACpF,CAAU,EAAGjB,CAAA,CAChB,EAGF,MAAMrG,EAAU,IAAI,iBAAiBkB,EAAQ,EAAE,GAAI,CAAE,SAAUqG,EAAiB,EAChF7F,EAAA,CACF,OAASzB,EAAO,CACd,QAAQ,MAAM,sBAAuBA,CAAK,EAC1CX,EAAM,MAAM,yBAAyB,CACvC,CACF,EAEA,OACEkB,EAAAA,KAACM,EAAO,IAAP,CAAW,QAAS,CAAE,QAAS,CAAA,EAAK,QAAS,CAAE,QAAS,CAAA,EAAK,UAAU,YACtE,SAAA,CAAAN,EAAAA,KAAC,MAAA,CAAI,UAAWO,EAAG/E,EAAM,KAAK,EAC5B,SAAA,CAAAwE,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,8EACZ,SAAA,CAAAF,EAAAA,IAACxE,GAAA,CAAkB,UAAU,SAAA,CAAU,EAAE,qBAAA,EAC3C,EACA0E,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CAAE4L,EAAmB,IAAI,EAAGF,EAAgB,EAAI,CAAG,EAClE,UAAWhQ,EAEX,SAAA,CAAAoE,EAAAA,IAACM,GAAA,CAAK,UAAU,SAAA,CAAU,EAAE,eAAA,CAAA,CAAA,CAC9B,EACF,EAECyE,EACC/E,EAAAA,IAAC,MAAA,CAAI,UAAU,2BACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,mGAAA,CAAoG,CAAA,CACrH,EACEwF,EAAW,SAAW,EACxBxF,EAAAA,IAAC,MAAA,CAAI,UAAU,0DAA0D,SAAA,uBAEzE,EAEAA,EAAAA,IAAC,OAAI,UAAU,aACZ,SAAAwF,EAAW,IAAKoC,GACf1H,EAAAA,KAAC,MAAA,CAAiB,UAAU,gLAC1B,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAF,MAAC,MAAA,CAAI,UAAW,4EAA4E4H,EAAI,OAAS,MAAM,gBAAgBA,EAAI,OAAS,MAAM,OAC/I,SAAAP,GAAYO,EAAI,YAAY,EAC/B,SACC,MAAA,CACC,SAAA,CAAA5H,EAAAA,IAAC,KAAA,CAAG,UAAU,oDAAqD,SAAA4H,EAAI,aAAa,QACnF,IAAA,CAAE,UAAU,yCAA0C,SAAAA,EAAI,aAAe,gBAAA,CAAiB,CAAA,CAAA,CAC7F,CAAA,EACF,EACA1H,EAAAA,KAAC,MAAA,CAAI,UAAU,0BAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAF,EAAAA,IAAC,OAAA,CAAK,UAAU,oDAAoD,SAAA,YAAS,EAC7EE,EAAAA,KAACoE,GAAA,CACC,MAAO1D,EAAQ,UAAU,iBAAiBgH,EAAI,EAAE,GAAK,GACrD,cAAgBD,GAAUwE,EAAcvE,EAAI,GAAID,CAAK,EAErD,SAAA,CAAA3H,EAAAA,IAACuE,IAAc,UAAU,wFACvB,eAACC,GAAA,CAAY,YAAY,UAAU,CAAA,CACrC,SACCC,GAAA,CACC,SAAA,CAAAzE,EAAAA,IAAC2E,EAAA,CAAW,MAAM,UAAU,SAAA,mBAAgB,EAC3CpD,EAAQ,IAAI4E,GACXnG,EAAAA,IAAC2E,GAA2B,MAAOwB,EAAE,QAAS,UAAU,cAAe,SAAAA,EAAE,YAAA,EAAxDA,EAAE,OAAmE,CACvF,CAAA,CAAA,CACH,CAAA,CAAA,CAAA,CACF,EACF,EAEAnG,EAAAA,IAAC,OAAA,CAAK,UAAW,wCAA0C4H,EAAY,WAA0E,wEAA7D,0DAAoI,GACrN,SAAEA,EAAY,WAAwB,UAAX,SAC9B,EAEEA,EAAY,YACZ1H,OAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAF,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,CAAE8L,EAAmBlE,CAAG,EAAGgE,EAAgB,EAAI,CAAG,EACjE,UAAU,6FAEV,SAAA5L,EAAAA,IAACkB,GAAA,CAAM,UAAU,aAAA,CAAc,CAAA,CAAA,EAEjClB,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMiM,EAAkBrE,CAAG,EACpC,UAAU,8FAEV,SAAA5H,EAAAA,IAAC8E,GAAA,CAAO,UAAU,aAAA,CAAc,CAAA,CAAA,CAClC,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,GAlDQ8C,EAAI,EAmDd,CACD,CAAA,CACH,CAAA,EAEJ,EAEA5H,EAAAA,IAACqM,GAAA,CACC,KAAMV,EACN,QAAS,IAAMC,EAAgB,EAAK,EACpC,UAAWhL,EAAQ,GACnB,UAAWgF,EACX,YAAaiG,CAAA,CAAA,EAGf7L,EAAAA,IAACkI,GAAA,CAAY,KAAM,CAAC,CAAC6D,EAAkB,aAAe5D,GAAS,CAACA,GAAQ6D,EAAoB,IAAI,EAC9F,gBAAC5D,GAAA,CACC,SAAA,CAAAlI,OAACmI,GAAA,CACC,SAAA,CAAArI,EAAAA,IAACsI,IAAiB,SAAA,iBAAA,CAAe,SAChCC,GAAA,CAAuB,SAAA,CAAA,gDACuBvI,EAAAA,IAAC,SAAA,CAAQ,SAAA+L,GAAkB,YAAA,CAAa,EAAS,iCAAA,CAAA,CAEhG,CAAA,EACF,SACCvD,GAAA,CACC,SAAA,CAAAxI,EAAAA,IAACyI,IAAkB,SAAA,QAAA,CAAM,EACzBzI,EAAAA,IAAC0I,GAAA,CACC,QAASwD,EACT,UAAU,6EACX,SAAA,QAAA,CAAA,CAED,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,CAEJ,CAEA,SAASG,GAAiB,CAAE,KAAAlE,EAAM,QAAAQ,EAAS,UAAA5J,EAAW,UAAAuN,EAAW,YAAAC,GAA+H,CAC9L,KAAM,CAACxJ,EAAMC,CAAO,EAAIjG,EAAAA,SAAS,EAAE,EAC7B,CAACyP,EAAaC,CAAc,EAAI1P,EAAAA,SAAS,EAAE,EAC3C,CAACkG,EAAaC,CAAc,EAAInG,EAAAA,SAAS,EAAE,EAC3C,CAACgI,EAASyG,CAAU,EAAIzO,EAAAA,SAAS,EAAK,EAE5C6C,EAAAA,UAAU,IAAM,CACVuI,IACEoE,GACFvJ,EAAQuJ,EAAY,IAAI,EACxBE,EAAeF,EAAY,YAAY,EACvCrJ,EAAeqJ,EAAY,aAAe,EAAE,IAE5CvJ,EAAQ,EAAE,EACVyJ,EAAe,EAAE,EACjBvJ,EAAe,EAAE,GAGvB,EAAG,CAACiF,EAAMoE,CAAW,CAAC,EAEtB,MAAMG,EAAe,SAAY,CAC/B,GAAI,GAAC3J,EAAK,KAAA,GAAU,CAACyJ,EAAY,QAEjC,GAAI,CACFhB,EAAW,EAAI,EACf,MAAMzL,EAAU,CACd,KAAMgD,EAAK,YAAA,EAAc,QAAQ,OAAQ,GAAG,EAC5C,aAAcyJ,EACd,YAAAvJ,EACA,MAAO,MAAA,EAGLsJ,EACF,MAAM7M,EAAU,IAAI,iBAAiBX,CAAS,eAAewN,EAAY,EAAE,GAAIxM,CAAO,EAEtF,MAAML,EAAU,KAAK,iBAAiBX,CAAS,cAAegB,CAAO,EAEvEuM,EAAA,EACA3D,EAAA,CACF,OAAShJ,EAAO,CACd,QAAQ,MAAM,2BAA4BA,CAAK,EAC/CX,EAAM,MAAM,yBAAyB,CACvC,QAAA,CACEwM,EAAW,EAAK,CAClB,CACF,EAEA,OACExL,EAAAA,IAACiK,IAAO,KAAA9B,EAAY,aAAcQ,EAChC,SAAAzI,EAAAA,KAACgK,GAAA,CAAc,UAAU,oFACvB,SAAA,CAAAlK,EAAAA,IAACmK,GAAA,CACC,eAACC,GAAA,CAAY,UAAU,gCAAiC,SAAAmC,EAAc,gBAAkB,mBAAmB,CAAA,CAC7G,EAEArM,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAF,EAAAA,IAAC,QAAA,CAAM,UAAWhE,EAAO,SAAA,iBAAc,EACvCgE,EAAAA,IAACoE,EAAA,CACC,MAAOoI,EACP,SAAU9L,GAAK,CACb+L,EAAe/L,EAAE,OAAO,KAAK,EACzB,CAAC6L,IAAgB,CAACxJ,GAAQA,IAASyJ,EAAY,YAAA,EAAc,QAAQ,OAAQ,GAAG,EAAE,MAAM,EAAG,EAAE,IAC/FxJ,EAAQtC,EAAE,OAAO,MAAM,YAAA,EAAc,QAAQ,OAAQ,GAAG,CAAC,CAE7D,EACA,YAAY,qBACZ,UAAU,sEAAA,CAAA,CACZ,EACF,SACC,MAAA,CACC,SAAA,CAAAV,EAAAA,IAAC,QAAA,CAAM,UAAWhE,EAAO,SAAA,yBAAsB,EAC/CgE,EAAAA,IAACoE,EAAA,CAAM,MAAOrB,EAAM,SAAUrC,GAAKsC,EAAQtC,EAAE,OAAO,KAAK,EAAG,YAAY,qBAAqB,UAAU,iFAAiF,EACxLV,EAAAA,IAAC,IAAA,CAAE,UAAU,kDAAkD,SAAA,mCAAA,CAAiC,CAAA,EAClG,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,QAAA,CAAM,UAAWhE,EAAO,SAAA,cAAW,EACpCgE,EAAAA,IAACoE,EAAA,CAAM,MAAOnB,EAAa,SAAUvC,GAAKwC,EAAexC,EAAE,OAAO,KAAK,EAAG,YAAY,iBAAiB,UAAU,sEAAA,CAAuE,CAAA,EAC1L,EAEAR,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAF,MAAC,SAAA,CAAO,QAAS2I,EAAS,UAAW9M,EAAe,SAAA,SAEpD,EACAmE,EAAAA,IAAC,SAAA,CACC,QAAS0M,EACT,SAAU3H,EACV,UAAWnJ,EAEV,SAAAmJ,EAAU,YAAewH,EAAc,SAAW,QAAA,CAAA,CACrD,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAEJ,CAMA,SAASpK,GAAW,CAAE,UAAApD,GAAoC,CACxD,KAAM,CAACgK,EAAOC,CAAQ,EAAIjM,EAAAA,SAAS,EAAE,EAC/B,CAACoG,EAAMC,CAAO,EAAIrG,EAAAA,SAAS,QAAQ,EACnC,CAAC4P,EAAaC,CAAc,EAAI7P,EAAAA,SAAS,EAAE,EAE3C,CAAE,KAAAoC,EAAM,UAAAsD,GAAcoK,GAAkB9N,CAAS,EACjD+N,EAAYC,GAAA,EACZC,EAAUC,GAAA,EACVC,EAAYC,GAAA,EACZC,EAAYC,GAAA,EAEZC,EAAUnO,GAAM,SAAW,CAAA,EAE3BoO,EAAe,SAAY,CAC/B,GAAI,CAACxE,EAAM,OAAQ,CAAE/J,EAAM,MAAM,mBAAmB,EAAG,MAAQ,CAC/D,GAAI,CACF,MAAMwO,EAAS,MAAMV,EAAU,YAAY,CAAE,UAAA/N,EAAW,MAAOgK,EAAM,OAAQ,KAAA5F,EAAM,EAC/EqK,EAAO,YACT,MAAM,UAAU,UAAU,UAAUA,EAAO,UAAU,EACrDxO,EAAM,QAAQ,yCAAyCwO,EAAO,WAAa,eAAiB,EAAE,EAAE,GAEhGxO,EAAM,QAAQ,gBAAgB,EAEhCgK,EAAS,EAAE,CACb,MAAQ,CACNhK,EAAM,MAAM,yBAAyB,CACvC,CACF,EAEMyO,EAAqB,SAAY,CACrC,GAAI,CACF,MAAMD,EAAS,MAAMR,EAAQ,YAAYjO,CAAS,EAC9CyO,EAAO,OACT,MAAM,UAAU,UAAU,UAAUA,EAAO,IAAI,EAC/CxO,EAAM,QAAQ,iCAAiC,EAEnD,MAAQ,CACNA,EAAM,MAAM,yBAAyB,CACvC,CACF,EAEM0O,EAAqB,SAAY,CACrC,GAAI,CAACf,EAAY,OAAQ,CAAE3N,EAAM,MAAM,mBAAmB,EAAG,MAAQ,CACrE,GAAI,CACF,MAAMoO,EAAU,YAAYT,EAAY,KAAA,CAAM,EAC9C3N,EAAM,QAAQ,+CAA+C,EAC7D4N,EAAe,EAAE,CACnB,MAAQ,CACN5N,EAAM,MAAM,2DAA2D,CACzE,CACF,EAEA,OACEkB,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAWO,EAAG/E,EAAM,eAAe,EACtC,SAAA,CAAAsE,EAAAA,IAAC,KAAA,CAAG,UAAWjE,EAAe,SAAA,iBAAc,EAC5CmE,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAF,EAAAA,IAACoE,EAAA,CAAM,MAAO2E,EAAO,YAAeC,EAAStI,EAAE,OAAO,KAAK,EAAG,YAAY,mBAAmB,UAAU,SAAS,UAAWA,GAAKA,EAAE,MAAQ,SAAW6M,GAAa,CAAG,EACrKrN,EAAAA,KAAC,SAAA,CAAO,MAAOiD,EAAM,SAAUzC,GAAK0C,EAAQ1C,EAAE,OAAO,KAAK,EAAG,UAAW/E,EACtE,SAAA,CAAAqE,EAAAA,IAAC,SAAA,CAAO,MAAM,SAAS,SAAA,SAAM,EAC7BA,EAAAA,IAAC,SAAA,CAAO,MAAM,QAAQ,SAAA,QAAK,EAC3BA,EAAAA,IAAC,SAAA,CAAO,MAAM,OAAO,SAAA,WAAA,CAAS,CAAA,EAChC,EACAE,EAAAA,KAAC,UAAO,QAASqN,EAAc,SAAUT,EAAU,UAAW,UAAWlR,EACtE,SAAA,CAAAkR,EAAU,gBAAa3M,EAAA,CAAQ,UAAU,uBAAuB,EAAKH,EAAAA,IAAC2N,GAAA,CAAK,UAAU,SAAA,CAAU,EAAG,SAAA,CAAA,CACrG,CAAA,EACF,EACAzN,EAAAA,KAAC,SAAA,CAAO,QAASuN,EAAoB,SAAUT,EAAQ,UAAW,UAAWvM,EAAG5E,EAAe,qBAAqB,EACjH,SAAA,CAAAmR,EAAQ,gBAAa7M,EAAA,CAAQ,UAAU,uBAAuB,EAAKH,EAAAA,IAAC4N,GAAA,CAAM,UAAU,SAAA,CAAU,EAAG,0BAAA,CAAA,CACpG,CAAA,EACF,SAGC,MAAA,CAAI,UAAWnN,EAAG/E,EAAM,eAAe,EACtC,SAAA,CAAAsE,EAAAA,IAAC,KAAA,CAAG,UAAWjE,EAAe,SAAA,mBAAgB,EAC9CiE,EAAAA,IAAC,IAAA,CAAE,UAAU,yCAAyC,SAAA,kEAA+D,EACrHE,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAF,EAAAA,IAACoE,EAAA,CACC,MAAOuI,EACP,SAAUjM,GAAKkM,EAAelM,EAAE,OAAO,KAAK,EAC5C,YAAY,wBACZ,UAAU,SACV,UAAWA,GAAKA,EAAE,MAAQ,SAAWgN,EAAA,CAAmB,CAAA,EAE1DxN,EAAAA,KAAC,SAAA,CAAO,QAASwN,EAAoB,SAAUN,EAAU,WAAa,CAACT,EAAY,KAAA,EACjF,UAAW/Q,EACV,SAAA,CAAAwR,EAAU,gBAAajN,EAAA,CAAQ,UAAU,uBAAuB,EAAKH,EAAAA,IAAC6N,GAAA,CAAY,UAAU,SAAA,CAAU,EAAG,SAAA,CAAA,CAAA,CAC5G,CAAA,CACF,CAAA,EACF,SAEC,MAAA,CAAI,UAAWpN,EAAG/E,EAAM,KAAK,EAC5B,SAAA,CAAAsE,MAAC,MAAG,UAAWS,EAAG1E,EAAe,MAAM,EAAG,SAAA,kBAAe,EACxD0G,EACCzC,EAAAA,IAAC,MAAA,CAAI,UAAU,2BAA2B,SAAAA,EAAAA,IAACG,EAAA,CAAQ,UAAU,sDAAA,CAAuD,CAAA,CAAE,EACpHmN,EAAQ,SAAW,EACrBtN,EAAAA,IAAC,IAAA,CAAE,UAAU,0DAA0D,SAAA,qBAAkB,EAEzFA,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAAsN,EAAQ,IAAIQ,GACX5N,EAAAA,KAAC,MAAA,CAAiB,UAAU,iJAC1B,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAF,EAAAA,IAAC7D,GAAA,CAAS,UAAU,yCAAA,CAA0C,SAC7D,MAAA,CACC,SAAA,CAAA6D,MAAC,IAAA,CAAE,UAAU,wCAAyC,SAAA8N,EAAI,OAAS,cAAc,EACjF5N,EAAAA,KAAC,MAAA,CAAI,UAAU,qEACb,SAAA,CAAAF,EAAAA,IAAC,OAAA,CAAK,UAAU,aAAc,SAAA8N,EAAI,KAAK,EACtCA,EAAI,YACH5N,OAAC,OAAA,CAAK,UAAU,4BAA4B,SAAA,CAAAF,EAAAA,IAAC+N,GAAA,CAAM,UAAU,SAAA,CAAU,EAAE,YAAU,IAAI,KAAKD,EAAI,UAAU,EAAE,mBAAA,CAAmB,CAAA,CAAE,CAAA,CAAA,CAErI,CAAA,CAAA,CACF,CAAA,EACF,QACC,SAAA,CAAO,QAAS,IAAMZ,EAAU,OAAOY,EAAI,EAAE,EAAG,SAAUZ,EAAU,UAAW,UAAU,2GACxF,eAACpI,GAAA,CAAO,UAAU,UAAU,CAAA,CAC9B,CAAA,GAfQgJ,EAAI,EAgBd,CACD,CAAA,CACH,CAAA,CAAA,CAEJ,CAAA,EACF,CAEJ,CAIA,SAAS1L,IAAW,CAClB,KAAM,CAAC4L,EAAUC,CAAW,EAAIlR,EAAAA,SAAS,EAAK,EACxC,CAACmR,EAAUC,CAAW,EAAIpR,EAAAA,SAAS,EAAE,EACrC,CAACqR,EAAWC,CAAY,EAAItR,EAAAA,SAAS,SAAS,EAC9C,CAACuR,EAAeC,CAAgB,EAAIxR,EAAAA,SAAwB,IAAI,EAChE,CAACyR,EAAUC,CAAW,EAAI1R,EAAAA,SAAS,EAAE,EACrC,CAAC2R,EAAoBC,CAAqB,EAAI5R,EAAAA,SAAwB,IAAI,EAC1E,CAAC6R,EAAcC,CAAe,EAAI9R,EAAAA,SAAS,EAAE,EAE7C,CAAE,KAAAoC,EAAM,UAAAsD,CAAA,EAAcqM,GAAA,EACtBC,EAAgBC,GAAYJ,EAAe,CAAE,OAAQA,CAAA,EAAiB,MAAS,EAC/EK,EAAeF,EAAc,MAAM,UAAY,CAAA,EAC/CjC,EAAYoC,GAAA,EACZC,EAAYC,GAAA,EACZC,EAAYC,GAAA,EACZC,EAAeC,GAAA,EACfC,EAAkBC,GAAA,EAElBC,EAAQxQ,GAAM,OAAS,CAAA,EAEvByQ,EAAuBC,GAAmB,CAC9C,MAAMC,EAAOH,EAAM,KAAKI,GAAKA,EAAE,KAAOF,CAAM,EACtCG,EAAc,IAAI,KAAKF,GAAM,eAAiB,IAAI,IAAI3J,GAAKA,EAAE,SAAS,CAAC,EAC7E,OAAO8I,EAAY,OAAOtO,GAAK,CAACqP,EAAY,IAAIrP,EAAE,EAAY,CAAC,CACjE,EAEMsP,EAAe,SAAY,CAC/B,GAAI,CAAC/B,EAAS,OAAQ,CAAElP,EAAM,MAAM,uBAAuB,EAAG,MAAQ,CACtE,GAAI,CACF,MAAM8N,EAAU,YAAY,CAAE,KAAMoB,EAAS,KAAA,EAAQ,MAAOE,EAAW,EACvEpP,EAAM,QAAQ,cAAc,EAC5BmP,EAAY,EAAE,EACdF,EAAY,EAAK,CACnB,MAAQ,CACNjP,EAAM,MAAM,uBAAuB,CACrC,CACF,EAEMkR,EAAe,MAAOL,GAAmB,CAC7C,GAAI,CAACrB,EAAS,OAAQ,CAAExP,EAAM,MAAM,uBAAuB,EAAG,MAAQ,CACtE,GAAI,CACF,MAAMqQ,EAAU,YAAY,CAAE,GAAIQ,EAAQ,KAAMrB,EAAS,KAAA,EAAQ,EACjExP,EAAM,QAAQ,cAAc,EAC5BuP,EAAiB,IAAI,CACvB,MAAQ,CACNvP,EAAM,MAAM,uBAAuB,CACrC,CACF,EAEMmR,EAAkB,MAAON,EAAgBO,IAAsB,CACnE,GAAI,CACF,MAAMb,EAAa,YAAY,CAAE,OAAAM,EAAQ,UAAAO,EAAW,EACpDpR,EAAM,QAAQ,cAAc,EAC5B6P,EAAgB,EAAE,EAClBF,EAAsB,IAAI,CAC5B,MAAQ,CACN3P,EAAM,MAAM,sBAAsB,CACpC,CACF,EAEM6G,EAAqB,MAAOgK,EAAgBO,IAAsB,CACtE,GAAI,CACF,MAAMX,EAAgB,YAAY,CAAE,OAAAI,EAAQ,UAAAO,EAAW,EACvDpR,EAAM,QAAQ,gBAAgB,CAChC,MAAQ,CACNA,EAAM,MAAM,yBAAyB,CACvC,CACF,EAEA,OACEkB,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAWnE,EAAe,SAAA,CAAA,UAAQ4T,EAAM,OAAO,GAAA,EAAC,EACpDzP,OAAC,UAAO,QAAS,IAAM+N,EAAY,CAACD,CAAQ,EAAG,UAAWpS,EACxD,SAAA,CAAAoE,EAAAA,IAACM,GAAA,CAAK,UAAU,aAAA,CAAc,EAAE,WAAA,CAAA,CAClC,CAAA,EACF,QAECC,GAAA,CACE,SAAAyN,GACChO,MAACQ,EAAO,IAAP,CAAW,QAAS,CAAE,QAAS,EAAG,OAAQ,CAAA,EAAK,QAAS,CAAE,QAAS,EAAG,OAAQ,MAAA,EAAU,KAAM,CAAE,QAAS,EAAG,OAAQ,CAAA,EAAK,UAAU,kBAClI,gBAAC,MAAA,CAAI,UAAWC,EAAG/E,EAAM,eAAe,EACtC,SAAA,CAAAwE,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAF,EAAAA,IAACoE,EAAA,CAAM,MAAO8J,EAAU,YAAeC,EAAYzN,EAAE,OAAO,KAAK,EAAG,YAAY,eAAe,UAAU,SAAS,UAAWA,GAAKA,EAAE,MAAQ,SAAWuP,GAAa,CAAG,EACvKjQ,EAAAA,IAAC,QAAA,CAAM,KAAK,QAAQ,MAAOoO,EAAW,SAAU1N,GAAK2N,EAAa3N,EAAE,OAAO,KAAK,EAAG,UAAU,8EAAA,CAA+E,CAAA,EAC9K,EACAR,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAA,EAAAA,KAAC,UAAO,QAAS+P,EAAc,SAAUnD,EAAU,UAAW,UAAWlR,EACtE,SAAA,CAAAkR,EAAU,gBAAa3M,EAAA,CAAQ,UAAU,uBAAuB,EAAKH,EAAAA,IAAC4E,GAAA,CAAM,UAAU,SAAA,CAAU,EAAG,SAAA,EACtG,EACA5E,EAAAA,IAAC,UAAO,QAAS,IAAMiO,EAAY,EAAK,EAAG,UAAWpS,EAAe,SAAA,QAAA,CAAM,CAAA,CAAA,CAC7E,CAAA,CAAA,CACF,EACF,EAEJ,EAEC4G,EACCzC,EAAAA,IAAC,MAAA,CAAI,UAAU,2BAA2B,SAAAA,EAAAA,IAACG,EAAA,CAAQ,UAAU,sDAAA,CAAuD,CAAA,CAAE,EACpHwP,EAAM,SAAW,EACnB3P,EAAAA,IAAC,MAAA,CAAI,UAAU,0DAA0D,SAAA,0CAAA,CAAwC,EAEjHA,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAA2P,EAAM,IAAIG,GACT5P,EAAAA,KAACM,EAAO,IAAP,CAAyB,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EAAK,QAAS,CAAE,QAAS,EAAG,EAAG,CAAA,EACjF,UAAWC,EAAG/E,EAAM,gDAAgD,EACpE,SAAA,CAAAwE,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAF,EAAAA,IAAC,MAAA,CAAI,UAAU,uBAAuB,MAAO,CAAE,gBAAiB8P,EAAK,OAAS,SAAA,CAAU,CAAG,EAC1FxB,IAAkBwB,EAAK,GACtB5P,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAF,EAAAA,IAACoE,EAAA,CACC,MAAOoK,EACP,SAAU9N,GAAK+N,EAAY/N,EAAE,OAAO,KAAK,EACzC,UAAU,mBACV,UAAWA,GAAK,CACVA,EAAE,MAAQ,SAASwP,EAAaJ,EAAK,EAAE,EACvCpP,EAAE,MAAQ,UAAU6N,EAAiB,IAAI,CAC/C,EACA,UAAS,EAAA,CAAA,EAEXvO,EAAAA,IAAC,SAAA,CAAO,QAAS,IAAMkQ,EAAaJ,EAAK,EAAE,EAAG,SAAUT,EAAU,UAChE,UAAU,4GACT,SAAAA,EAAU,UAAYrP,EAAAA,IAACG,EAAA,CAAQ,UAAU,2BAA2B,EAAKH,EAAAA,IAAC4E,GAAA,CAAM,UAAU,aAAA,CAAc,CAAA,CAAA,EAE3G5E,EAAAA,IAAC,SAAA,CAAO,QAAS,IAAMuO,EAAiB,IAAI,EAAG,UAAU,kGACvD,SAAAvO,EAAAA,IAACqQ,GAAA,CAAE,UAAU,cAAc,CAAA,CAC7B,CAAA,CAAA,CACF,EAEAnQ,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAF,EAAAA,IAAC,KAAA,CAAG,UAAU,oDAAqD,SAAA8P,EAAK,KAAK,EAC5EA,EAAK,aAAe9P,EAAAA,IAAC,KAAE,UAAU,yCAA0C,WAAK,WAAA,CAAY,CAAA,EAC/F,EACAA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,CAAEuO,EAAiBuB,EAAK,EAAE,EAAGrB,EAAYqB,EAAK,IAAI,CAAG,EACpE,UAAU,sIACV,MAAM,cAEN,SAAA9P,EAAAA,IAACkB,GAAA,CAAM,UAAU,SAAA,CAAU,CAAA,CAAA,CAC7B,EACF,EAEFhB,EAAAA,KAACoQ,GAAA,CAAM,QAAQ,YAAY,UAAU,cAClC,SAAA,CAAAR,EAAK,aAAe,EAAE,UAAA,CAAA,CACzB,CAAA,EACF,EACA5P,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAF,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM2O,EAAsBD,IAAuBoB,EAAK,GAAK,KAAOA,EAAK,EAAE,EACpF,UAAU,sJACV,MAAM,aAEN,SAAA9P,EAAAA,IAAC7D,GAAA,CAAS,UAAU,SAAA,CAAU,CAAA,CAAA,EAEhC6D,EAAAA,IAAC,SAAA,CAAO,QAAS,IAAMmP,EAAU,OAAOW,EAAK,EAAE,EAAG,SAAUX,EAAU,UACpE,UAAU,2GACV,SAAAnP,EAAAA,IAAC8E,GAAA,CAAO,UAAU,SAAA,CAAU,CAAA,CAAA,CAC9B,CAAA,CACF,CAAA,EACF,EAGA9E,EAAAA,IAACO,GAAA,CACE,SAAAmO,IAAuBoB,EAAK,IAC3B9P,EAAAA,IAACQ,EAAO,IAAP,CAAW,QAAS,CAAE,QAAS,EAAG,OAAQ,GAAK,QAAS,CAAE,QAAS,EAAG,OAAQ,QAAU,KAAM,CAAE,QAAS,EAAG,OAAQ,CAAA,EAAK,UAAU,kBAClI,SAAAN,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAF,EAAAA,IAACuQ,GAAA,CAAO,UAAU,uFAAA,CAAwF,EAC1GvQ,EAAAA,IAACoE,EAAA,CACC,MAAOwK,EACP,SAAUlO,GAAKmO,EAAgBnO,EAAE,OAAO,KAAK,EAC7C,YAAY,oDACZ,UAAU,mBACV,UAAS,EAAA,CAAA,CACX,EACF,EACAV,EAAAA,IAAC,SAAA,CAAO,QAAS,IAAM,CAAE2O,EAAsB,IAAI,EAAGE,EAAgB,EAAE,CAAG,EACzE,UAAU,qFACV,SAAA7O,EAAAA,IAACqQ,GAAA,CAAE,UAAU,aAAA,CAAc,CAAA,CAAA,CAC7B,EACF,EAEArQ,MAAC,MAAA,CAAI,UAAU,0GACZ,WAAc,UACbA,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACb,SAAAA,MAACG,EAAA,CAAQ,UAAU,uDAAuD,EAC5E,EACEyP,EAAoBE,EAAK,EAAE,EAAE,SAAW,EAC1C9P,EAAAA,IAAC,MAAA,CAAI,UAAU,0DACZ,SAAA4O,EAAe,6BAA+B,uBAAA,CACjD,EAEAgB,EAAoBE,EAAK,EAAE,EAAE,IAAIzF,GAAW,CAC1C,MAAMmG,EAAYlG,GAAiBD,CAAc,EAC3CtH,EAAQsH,EAAQ,MAAmB,UACnClH,EAAQkH,EAAQ,MAAoBA,EAAQ,OAAoB,GAChEoG,EAAOpG,EAAQ,cAA4BA,EAAQ,SAAsB,GAC/E,OACEnK,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAMiQ,EAAgBL,EAAK,GAAIzF,EAAQ,EAAY,EAC5D,SAAUkF,EAAa,UACvB,UAAU,yLAET,SAAA,CAAAiB,EACCxQ,EAAAA,IAAC,MAAA,CAAI,IAAKwQ,EAAW,IAAKzN,EAAM,UAAU,4CAAA,CAA6C,QAEtF,MAAA,CAAI,UAAU,6JACZ,SAAAsE,GAAYtE,CAAI,EACnB,EAEF7C,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAF,EAAAA,IAAC,IAAA,CAAE,UAAU,6DAA8D,SAAA+C,EAAK,EAChF7C,EAAAA,KAAC,MAAA,CAAI,UAAU,qEACZ,SAAA,CAAAiD,GAAQnD,EAAAA,IAAC,OAAA,CAAK,UAAU,WAAY,SAAAmD,EAAK,EACzCA,GAAQsN,GAAOzQ,EAAAA,IAAC,OAAA,CAAK,SAAA,IAAC,EACtByQ,GACCvQ,EAAAA,KAAC,OAAA,CAAK,UAAU,qCACd,SAAA,CAAAF,EAAAA,IAAC0Q,GAAA,CAAU,UAAU,aAAA,CAAc,EAAGD,CAAA,CAAA,CACxC,CAAA,CAAA,CAEJ,CAAA,EACF,EACCpG,EAAQ,OACPrK,EAAAA,IAAC,QAAK,UAAU,6EAA8E,WAAQ,MAAgB,EAExHA,EAAAA,IAAC7D,GAAA,CAAS,UAAU,sDAAA,CAAuD,CAAA,CAAA,EA3BtEkO,EAAQ,EAAA,CA8BnB,CAAC,CAAA,CAEL,CAAA,CAAA,CACF,EACF,EAEJ,EAGCyF,EAAK,eAAiBA,EAAK,cAAc,OAAS,SAChD,MAAA,CAAI,UAAU,8BACZ,SAAAA,EAAK,cAAc,IAAI,CAAC3J,EAAGtF,IAC1BX,OAAC,OAAA,CAAa,UAAU,qIACtB,SAAA,CAAAF,EAAAA,IAACqE,GAAA,CAAK,UAAU,SAAA,CAAU,EAAE,IAAE8B,EAAE,MAAQA,EAAE,UACzCA,EAAE,QAAUnG,EAAAA,IAAC,OAAA,CAAK,UAAU,iBAAiB,SAAA,IAAC,EAC9CmG,EAAE,MAAQjG,OAAC,OAAA,CAAK,UAAU,iCAAiC,SAAA,CAAA,IAAEiG,EAAE,KAAK,GAAA,EAAC,EACtEnG,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM6F,EAAmBiK,EAAK,GAAI3J,EAAE,SAAS,EACtD,SAAUsJ,EAAgB,UAC1B,UAAU,0JACV,MAAM,gBAEN,SAAAzP,EAAAA,IAACqQ,GAAA,CAAE,UAAU,aAAA,CAAc,CAAA,CAAA,CAC7B,CAAA,EAXSxP,CAYX,CACD,CAAA,CACH,CAAA,CAAA,EA1JaiP,EAAK,EAAA,CA6JvB,CAAA,CACH,CAAA,EAEJ,CAEJ,CAIA,SAASzN,GAAa,CAAE,UAAAtD,GAAoC,CAC1D,KAAM,CAAE,KAAAI,EAAM,UAAAsD,EAAW,QAAAkO,CAAA,EAAYC,GAAoB7R,CAAS,EAC5D8R,EAASC,GAAA,EACTC,EAAYC,GAAA,EACZC,EAAcC,GAAA,EACd,CAACC,EAAcC,CAAe,EAAIrU,EAAAA,SAAwB,IAAI,EAC9D,CAACsU,EAAaC,CAAc,EAAIvU,EAAAA,SAAS,EAAE,EAE3CwU,EAAYpS,GAAM,WAAa,CAAA,EAE/BqS,EAAiBC,GAAqB,CACrCJ,EAAY,QACjBR,EAAO,OAAO,CAAE,UAAA9R,EAAW,SAAA0S,EAAU,OAAQJ,EAAY,KAAA,GAAU,CACjE,UAAW,IAAM,CAAErS,EAAM,QAAQ,GAAGyS,CAAQ,YAAY,EAAGL,EAAgB,IAAI,EAAGE,EAAe,EAAE,EAAGX,EAAA,CAAW,EACjH,QAAS,IAAM3R,EAAM,MAAM,oBAAoB,CAAA,CAChD,CACH,EAEM0S,EAAmBD,GAAqB,CAC5CV,EAAU,OAAO,CAAE,UAAAhS,EAAW,SAAA0S,CAAA,EAAY,CACxC,UAAW,IAAM,CAAEzS,EAAM,QAAQ,GAAGyS,CAAQ,cAAc,EAAGd,EAAA,CAAW,EACxE,QAAS,IAAM3R,EAAM,MAAM,sBAAsB,CAAA,CAClD,CACH,EAEM2S,EAAkBF,GAAqB,CAC3CR,EAAY,OAAO,CAAE,UAAAlS,EAAW,SAAA0S,CAAA,EAAY,CAC1C,UAAW,IAAMzS,EAAM,QAAQ,GAAGyS,CAAQ,eAAe,EACzD,QAAS,IAAMzS,EAAM,MAAM,GAAGyS,CAAQ,wBAAwB,CAAA,CAC/D,CACH,EAGMG,EADiB,CAAC,SAAU,YAAa,SAAU,OAAQ,WAAY,QAAQ,EAC7C,IAAI7O,GAAQ,CAClD,MAAM8O,EAAWN,EAAU,KAAMxT,GAA+BA,EAAE,WAAagF,GAAQhF,EAAE,OAASgF,CAAI,EACtG,MAAO,CAAE,KAAAA,EAAM,OAAQ,CAAC,CAAE8O,GAAsC,QAAS,GAAKA,GAAY,EAAC,CAC7F,CAAC,EAED,OACE3R,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAF,EAAAA,IAAC,KAAA,CAAG,UAAWjE,EAAe,SAAA,0BAAuB,EACrDiE,EAAAA,IAAC,IAAA,CAAE,UAAU,6CAA6C,SAAA,2CAAA,CAAyC,CAAA,EACrG,EAECyC,EACCzC,EAAAA,IAAC,MAAA,CAAI,UAAU,2BAA2B,eAACG,EAAA,CAAQ,UAAU,sDAAA,CAAuD,CAAA,CAAE,EAEtHH,EAAAA,IAAC,OAAI,UAAU,YACZ,SAAA4R,EAAiB,IAAI7T,GACpBmC,EAAAA,KAAC,OAAiB,UAAWO,EAAG/E,EAAM,KAAK,EACzC,SAAA,CAAAwE,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAF,MAAC,OAAI,UAAWS,EAAG,sDACjB1C,EAAE,OAAS,kBAAoB,4BAAA,EAC/B,SAAAiC,EAAAA,IAAC3D,GAAA,CAAI,UAAWoE,EAAG,UAAW1C,EAAE,OAAS,iBAAmB,gCAAgC,CAAA,CAAG,CAAA,CACjG,SACC,MAAA,CACC,SAAA,CAAAiC,EAAAA,IAAC,IAAA,CAAE,UAAU,+DAAgE,SAAAjC,EAAE,KAAK,QACnF,IAAA,CAAE,UAAU,6CACV,SAAAA,EAAE,OAAS,iBAAmB,kCAAA,CACjC,CAAA,CAAA,CACF,CAAA,EACF,EACAmC,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACZ,SAAA,CAAAnC,EAAE,QACDmC,EAAAA,KAAAoH,EAAAA,SAAA,CACE,SAAA,CAAApH,EAAAA,KAAC,SAAA,CAAO,QAAS,IAAMyR,EAAe5T,EAAE,IAAI,EAAG,SAAUkT,EAAY,UAAW,UAAWpV,EACzF,SAAA,CAAAmE,EAAAA,IAAC8R,GAAA,CAAS,UAAU,SAAA,CAAU,EAAE,OAAA,EAClC,EACA5R,EAAAA,KAAC,SAAA,CAAO,QAAS,IAAMwR,EAAgB3T,EAAE,IAAI,EAAG,SAAUgT,EAAU,UAClE,UAAU,wJACV,SAAA,CAAA/Q,EAAAA,IAAC8E,GAAA,CAAO,UAAU,SAAA,CAAU,EAAE,SAAA,CAAA,CAAA,CAChC,EACF,EAEF9E,EAAAA,IAAC,SAAA,CAAO,QAAS,IAAM,CAAEoR,EAAgBD,IAAiBpT,EAAE,KAAO,KAAOA,EAAE,IAAI,EAAGuT,EAAe,EAAE,CAAG,EACrG,UAAWzV,EACV,aAAiBkC,EAAE,KAAO,SAAWA,EAAE,OAAS,SAAW,SAAA,CAAA,CAC9D,CAAA,CACF,CAAA,EACF,EACCoT,IAAiBpT,EAAE,MAClBmC,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAF,EAAAA,IAAC,QAAA,CAAM,MAAOqR,EAAa,SAAU3Q,GAAK4Q,EAAe5Q,EAAE,OAAO,KAAK,EACrE,KAAK,WAAW,YAAa,SAAS3C,EAAE,IAAI,cAAe,UAAWpC,CAAA,CAAA,SACvE,SAAA,CAAO,QAAS,IAAM6V,EAAczT,EAAE,IAAI,EAAG,SAAU8S,EAAO,WAAa,CAACQ,EAAY,KAAA,EAAQ,UAAWzV,EACzG,SAAA,CAAAiV,EAAO,gBAAa1Q,EAAA,CAAQ,UAAU,uBAAuB,EAAKH,EAAAA,IAAC4E,GAAA,CAAM,UAAU,SAAA,CAAU,EAAG,OAAA,CAAA,CACnG,CAAA,CAAA,CACF,CAAA,GAvCM7G,EAAE,IAyCZ,CACD,CAAA,CACH,CAAA,EAEJ,CAEJ,CAIA,SAASuE,IAAsB,CAC7B,KAAM,CAACyP,EAAQC,CAAS,EAAIjV,EAAAA,SAAS,EAAE,EACjC,CAACkV,EAAcC,CAAe,EAAInV,EAAAA,SAAS,EAAE,EAC7CoV,EAAOC,GAAa,CAAE,MAAO,IAAK,OAAQL,GAAU,OAAW,UAAWE,GAAgB,MAAA,CAAW,EACrG,CAAE,KAAMI,CAAA,EAAgBC,GAAA,EACxBC,EAAYC,GAAA,EACZC,EAAqBJ,GAAqB,UAAY,MAAM,QAAQA,CAAW,EAAIA,EAAc,IACjGK,EAA0BP,EAAK,MAAM,WAAa,CAAA,EAElDzW,EAAO,+FAEb,OACEwE,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,2BACb,SAAA,CAAAF,EAAAA,IAACuQ,GAAA,CAAO,UAAU,qFAAA,CAAsF,EACxGvQ,EAAAA,IAAC,QAAA,CACC,MAAO+R,EACP,SAAUrR,GAAKsR,EAAUtR,EAAE,OAAO,KAAK,EACvC,YAAY,sBACZ,UAAU,wNAAA,CAAA,CACZ,EACF,EACAR,EAAAA,KAAC,SAAA,CAAO,MAAO+R,EAAc,SAAUvR,GAAKwR,EAAgBxR,EAAE,OAAO,KAAK,EACxE,UAAU,yIACV,SAAA,CAAAV,EAAAA,IAAC,SAAA,CAAO,MAAM,GAAG,SAAA,cAAW,EAC5BA,EAAAA,IAAC,SAAA,CAAO,MAAM,QAAQ,SAAA,YAAS,EAC9ByS,EAAW,IAAKE,UACd,SAAA,CAAkB,MAAOA,EAAE,GAAK,SAAA,CAAAA,EAAE,KAAMA,EAAE,SAAW,SAAW,YAAc,EAAA,CAAA,EAAlEA,EAAE,EAAmE,CACnF,CAAA,CAAA,CAAA,EAEHzS,EAAAA,KAAC,OAAA,CAAK,UAAU,yCAA0C,SAAA,CAAAwS,EAAQ,OAAO,cAAA,CAAA,CAAY,CAAA,EACvF,EAECP,EAAK,UACJnS,MAAC,OAAI,UAAU,4BAA4B,eAACG,EAAA,CAAQ,UAAU,uDAAuD,CAAA,CAAE,EACrHuS,EAAQ,SAAW,SACpB,MAAA,CAAI,UAAWhX,EAAO,mBACrB,SAAA,CAAAsE,EAAAA,IAAC1D,GAAA,CAAW,UAAU,uDAAA,CAAwD,EAC9E0D,EAAAA,IAAC,IAAA,CAAE,UAAU,yCAAyC,SAAA,qBAAA,CAAmB,CAAA,CAAA,CAC3E,EAEAA,EAAAA,IAAC,MAAA,CAAI,UAAU,cACZ,SAAA0S,EAAQ,IAAIE,GAAO,CAElB,MAAMC,EADID,EACS,UACbE,EAASD,EAAWJ,EAAW,KAAME,GAAWA,EAAE,KAAOE,CAAQ,EAAI,KAC3E,OACE3S,EAAAA,KAAC,MAAA,CAAiB,UAAWxE,EAAO,+BAClC,SAAA,CAAAwE,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAF,MAAC,KAAE,UAAU,6DAA8D,SAAA4S,EAAI,mBAAqBA,EAAI,SAAS,EACjH1S,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACZ,SAAA,CAAA0S,EAAI,MAAQ5S,EAAAA,IAAC,OAAA,CAAK,UAAU,wDAAyD,WAAI,KAAK,EAC9F4S,EAAI,YAAc5S,EAAAA,IAAC,OAAA,CAAK,UAAU,6CAA8C,SAAA,IAAI,KAAK4S,EAAI,UAAU,EAAE,mBAAA,CAAmB,CAAE,CAAA,CAAA,CACjI,CAAA,EACF,EACCE,GACC9S,EAAAA,IAAC,OAAA,CAAK,UAAU,2JACb,WAAO,KACV,QAED,OAAA,CAAK,UAAW,oDACf4S,EAAI,SAAW,aAAeA,EAAI,SAAW,YAAc,iCAC3DA,EAAI,SAAW,aAAe,+BAAiC,kCACjE,GAAK,SAAAA,EAAI,QAAU,IAAI,EACvB1S,EAAAA,KAAC,SAAA,CACC,MAAO2S,GAAY,GACnB,SAAUnS,GAAK,CACb6R,EAAU,OACR,CAAE,GAAIK,EAAI,GAAI,UAAWlS,EAAE,OAAO,OAAS,IAAA,EAC3C,CAAE,UAAW,IAAM1B,EAAM,QAAQ,gBAAgB,CAAA,CAAE,CAEvD,EACA,UAAU,uIAEV,SAAA,CAAAgB,EAAAA,IAAC,SAAA,CAAO,MAAM,GAAG,SAAA,YAAS,EACzByS,EAAW,IAAKE,GACf3S,EAAAA,IAAC,SAAA,CAAkB,MAAO2S,EAAE,GAAK,SAAAA,EAAE,IAAA,EAAtBA,EAAE,EAAyB,CACzC,CAAA,CAAA,CAAA,CACH,CAAA,EA/BQC,EAAI,EAgCd,CAEJ,CAAC,CAAA,CACH,CAAA,EAEJ,CAEJ,CAIA,SAASrQ,GAAY,CAAE,UAAAxD,GAAoC,CACzD,KAAM,CAACgU,EAAcC,CAAe,EAAIjW,EAAAA,SAA+B,UAAU,EAC3E,CAAE,KAAAoC,EAAM,UAAAsD,GAAcwQ,GAAmBlU,EAAW,CAAE,MAAO,GAAI,EACjE,CAAE,KAAMmU,EAAW,UAAWC,CAAA,EAAiBC,GAAYrU,EAAW,CAAE,MAAO,GAAI,EACnFsU,EAAalU,GAAM,YAAc,CAAA,EACjCmU,EAAeJ,GAAW,SAAW,CAAA,EAE3C,OACEhT,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oCACb,SAAA,CAAAF,MAAC,KAAA,CAAG,UAAWjE,EACZ,SAAAgX,IAAiB,WAAa,oBAAoB5T,GAAM,OAAS,CAAC,IAAM,cAAc+T,GAAW,OAAS,CAAC,IAC9G,EACAhT,EAAAA,KAAC,MAAA,CAAI,UAAU,mDACb,SAAA,CAAAF,EAAAA,IAAC,SAAA,CAAO,QAAS,IAAMgT,EAAgB,UAAU,EAC/C,UAAWvS,EAAG,+DACZsS,IAAiB,WAAa,yFAA2F,oEAAA,EAAuE,SAAA,UAAA,CAAA,EAGpM/S,EAAAA,IAAC,SAAA,CAAO,QAAS,IAAMgT,EAAgB,OAAO,EAC5C,UAAWvS,EAAG,+DACZsS,IAAiB,QAAU,yFAA2F,oEAAA,EAAuE,SAAA,WAAA,CAAA,CAEjM,CAAA,CACF,CAAA,EACF,EAECA,IAAiB,WAChB/S,EAAAA,IAAAsH,WAAA,CACG,SAAA7E,QACE,MAAA,CAAI,UAAU,2BAA2B,SAAAzC,EAAAA,IAACG,GAAQ,UAAU,uDAAuD,CAAA,CAAE,EACpHkT,EAAW,SAAW,EACxBrT,EAAAA,IAAC,MAAA,CAAI,UAAU,0DAA0D,SAAA,4BAAyB,EAElGA,MAAC,OAAI,UAAU,YACZ,SAAAqT,EAAW,IAAI,CAACE,EAAO1S,IACtBX,OAAC,MAAA,CAAwB,UAAU,8FACjC,SAAA,CAAAF,EAAAA,IAACzD,GAAA,CAAS,UAAU,2DAAA,CAA4D,QAC/E,MAAA,CAAI,UAAU,iBACb,SAAA2D,EAAAA,KAAC,IAAA,CAAE,UAAU,wCACV,SAAA,CAAAqT,EAAM,YAAcrT,OAAC,OAAA,CAAK,UAAU,cAAe,SAAA,CAAAqT,EAAM,WAAW,GAAA,EAAC,EACrEA,EAAM,QAAQ,QAAQ,QAAS,GAAG,EAClCA,EAAM,aAAerT,OAAC,OAAA,CAAK,UAAU,iCAAiC,SAAA,CAAA,OAAKqT,EAAM,WAAA,CAAA,CAAY,CAAA,CAAA,CAChG,CAAA,CACF,EACAvT,EAAAA,IAAC,OAAA,CAAK,UAAU,2DACb,SAAA,IAAI,KAAKuT,EAAM,UAAU,EAAE,eAAA,CAAe,CAC7C,CAAA,CAAA,EAXQA,EAAM,IAAM1S,CAYtB,CACD,CAAA,CACH,EAEJ,EAEAb,MAAAsH,EAAAA,SAAA,CACG,SAAA6L,QACE,MAAA,CAAI,UAAU,2BAA2B,SAAAnT,EAAAA,IAACG,EAAA,CAAQ,UAAU,sDAAA,CAAuD,EAAE,EACpHmT,EAAa,SAAW,EAC1BtT,EAAAA,IAAC,MAAA,CAAI,UAAU,0DAA0D,SAAA,uBAAA,CAAqB,EAE9FA,EAAAA,IAAC,MAAA,CAAI,UAAU,YACZ,SAAAsT,EAAa,IAAI,CAACC,EAAgC1S,IACjDX,EAAAA,KAAC,MAAA,CAAoC,UAAWO,EAAG/E,EAAM,6BAA6B,EACpF,SAAA,CAAAsE,EAAAA,IAACzE,GAAA,CAAY,UAAU,0CAAA,CAA2C,EAClE2E,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,IAAA,CAAE,UAAU,wCACV,SAAA,CAAAqT,EAAM,YAAcrT,OAAC,OAAA,CAAK,UAAU,cAAe,SAAA,CAAAqT,EAAM,WAAqB,GAAA,EAAC,EAChFvT,EAAAA,IAAC,QAAQ,UAAAuT,EAAM,QAAqB,IAAI,QAAQ,QAAS,GAAG,CAAA,CAAE,EAC7DA,EAAM,aAAerT,OAAC,OAAA,CAAK,UAAU,iCAAiC,SAAA,CAAA,OAAKqT,EAAM,WAAA,CAAA,CAAsB,CAAA,EAC1G,EACCA,EAAM,SACLvT,MAAC,IAAA,CAAE,UAAU,sEACV,SAAA,OAAOuT,EAAM,SAAY,SAAWA,EAAM,QAAU,KAAK,UAAUA,EAAM,OAAO,CAAA,CACnF,CAAA,EAEJ,EACAvT,EAAAA,IAAC,OAAA,CAAK,UAAU,2DACb,SAAAuT,EAAM,WAAa,IAAI,KAAKA,EAAM,UAAoB,EAAE,eAAA,EAAmB,GAAA,CAC9E,CAAA,CAAA,EAhBSA,EAAM,IAAiB1S,CAiBlC,CACD,EACH,CAAA,CAEJ,CAAA,EAEJ,CAEJ","x_google_ignoreList":[0,1,2]}