{"version":3,"file":"FilesPage-GsRgoFIM.js","sources":["../../../node_modules/lucide-react/dist/esm/icons/braces.js","../../frontend/src/components/files/FileDetailModal.tsx","../../frontend/src/pages/FilesPage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.564.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    { d: \"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1\", key: \"ezmyqa\" }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1\",\n      key: \"e1hn23\"\n    }\n  ]\n];\nconst Braces = createLucideIcon(\"braces\", __iconNode);\n\nexport { __iconNode, Braces as default };\n//# sourceMappingURL=braces.js.map\n","import { useState } from 'react';\nimport { Dialog, DialogContent, DialogTitle } from '@/components/ui/Dialog';\nimport {\n  FileText, Mic, Mail, MessageSquare, CheckCircle, Clock, AlertCircle,\n  RotateCw, Star, Download, Trash2, Share2, Copy,\n  Loader2, Eye, Braces, BarChart3, History, Activity, Link2,\n} from 'lucide-react';\nimport { toast } from 'sonner';\nimport { cn } from '@/lib/utils';\nimport {\n  useDocumentDetail, useDocumentExtraction, useDocumentSummary,\n  useDocumentAnalysis, useDocumentVersions, useDocumentActivity,\n  useToggleDocumentFavorite, useShareDocument, useReprocessCheck,\n  type DocumentItem,\n} from '../../hooks/useGodMode';\nimport { CommentsPanel } from '../shared/CommentsPanel';\n\nconst typeIcon: Record<string, typeof FileText> = {\n  documents: FileText, document: FileText,\n  transcripts: Mic, transcript: Mic,\n  emails: Mail, email: Mail,\n  conversations: MessageSquare, conversation: MessageSquare,\n};\n\ntype TabKey = 'preview' | 'entities' | 'analysis' | 'versions' | 'activity' | 'share';\n\ninterface Props {\n  file: DocumentItem | null;\n  open: boolean;\n  onClose: () => void;\n  onReprocess: (id: string) => void;\n  onDelete?: (id: string) => void;\n}\n\nconst FileDetailModal = ({ file, open, onClose, onReprocess, onDelete }: Props) => {\n  const [activeTab, setActiveTab] = useState<TabKey>('preview');\n  const id = file?.id ?? null;\n\n  const detail = useDocumentDetail(id);\n  const extraction = useDocumentExtraction(activeTab === 'entities' ? id : null);\n  const summary = useDocumentSummary(id);\n  const analysis = useDocumentAnalysis(activeTab === 'analysis' ? id : null);\n  const versions = useDocumentVersions(activeTab === 'versions' ? id : null);\n  const activity = useDocumentActivity(activeTab === 'activity' ? id : null);\n  const reprocessCheck = useReprocessCheck(id);\n  const toggleFav = useToggleDocumentFavorite();\n  const shareDoc = useShareDocument();\n\n  if (!file) return null;\n\n  const doc = (detail.data as Record<string, unknown>)?.document as Record<string, unknown> | undefined;\n  const displayName = file.original_filename || file.filename || '(unnamed)';\n  const fileType = (file.type || 'document') as string;\n  const Icon = typeIcon[fileType] || FileText;\n  const meta = (doc?.metadata ?? file.metadata ?? {}) as Record<string, unknown>;\n  const sizeStr = file.size ? `${(Number(file.size) / 1024).toFixed(1)} KB` : '—';\n  const isFav = !!(doc?.is_favorite ?? (file as Record<string, unknown>).is_favorite);\n  const entities = file.entity_counts;\n  const summaryText = (summary.data as Record<string, unknown>)?.summary as string | undefined;\n\n  const tabs: { key: TabKey; label: string; icon: typeof Eye }[] = [\n    { key: 'preview', label: 'Preview', icon: Eye },\n    { key: 'entities', label: 'Entities', icon: Braces },\n    { key: 'analysis', label: 'Analysis', icon: BarChart3 },\n    { key: 'versions', label: 'Versions', icon: History },\n    { key: 'activity', label: 'Activity', icon: Activity },\n    { key: 'share', label: 'Share', icon: Link2 },\n  ];\n\n  return (\n    <Dialog open={open} onOpenChange={(o) => !o && onClose()}>\n      <DialogContent className=\"max-w-3xl p-0 overflow-hidden\">\n        <DialogTitle className=\"sr-only\">File Details: {displayName}</DialogTitle>\n\n        {/* Header */}\n        <div className=\"p-5\" style={{ background: 'linear-gradient(to right, rgba(37,99,235,0.25), rgba(37,99,235,0.08))' }}>\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-12 h-12 rounded-lg border border-blue-500/30 flex items-center justify-center\" style={{ backgroundColor: 'rgba(37,99,235,0.15)' }}>\n              <Icon className=\"w-5 h-5 text-blue-400\" />\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              <h2 className=\"text-base font-bold text-white truncate\">{displayName}</h2>\n              <div className=\"flex items-center gap-2 mt-1\">\n                <span className=\"text-[10px] px-2 py-0.5 rounded-full text-blue-200 capitalize\" style={{ backgroundColor: 'rgba(255,255,255,0.1)' }}>{fileType}</span>\n                <span className=\"text-xs text-slate-300\">{sizeStr}</span>\n                <span className={`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-full font-medium ${file.status === 'processed' || file.status === 'completed' ? 'bg-green-500/20 text-green-400' :\n                  file.status === 'pending' ? 'bg-yellow-500/20 text-yellow-400' :\n                    file.status === 'processing' ? 'bg-blue-500/20 text-blue-400' :\n                      'bg-red-500/20 text-red-400'\n                  }`}>\n                  {file.status === 'processed' || file.status === 'completed' ? <CheckCircle className=\"w-3 h-3\" /> :\n                    file.status === 'pending' ? <Clock className=\"w-3 h-3\" /> :\n                      file.status === 'processing' ? <Loader2 className=\"w-3 h-3 animate-spin\" /> :\n                        <AlertCircle className=\"w-3 h-3\" />}\n                  {file.status || '—'}\n                </span>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-1.5\">\n              <button onClick={() => toggleFav.mutate(file.id)} className=\"w-8 h-8 rounded-lg hover:bg-white/10 flex items-center justify-center transition-colors\" title=\"Favorite\">\n                <Star className={`w-4 h-4 ${isFav ? 'fill-yellow-400 text-yellow-400' : 'text-slate-400'}`} />\n              </button>\n              <a href={`/api/documents/${file.id}/download`} className=\"w-8 h-8 rounded-lg hover:bg-white/10 flex items-center justify-center transition-colors\" title=\"Download\">\n                <Download className=\"w-4 h-4 text-slate-400\" />\n              </a>\n              <button onClick={() => onReprocess(file.id)}\n                className={cn('w-8 h-8 rounded-lg hover:bg-white/10 flex items-center justify-center transition-colors',\n                  (reprocessCheck.data as Record<string, unknown>)?.needs_reprocess ? 'ring-2 ring-yellow-500/50' : '')}\n                title={(reprocessCheck.data as Record<string, unknown>)?.needs_reprocess ? 'Reprocessing recommended' : 'Reprocess'}>\n                <RotateCw className={cn('w-4 h-4', (reprocessCheck.data as Record<string, unknown>)?.needs_reprocess ? 'text-yellow-400' : 'text-slate-400')} />\n              </button>\n              {onDelete && (\n                <button onClick={() => onDelete(file.id)} className=\"w-8 h-8 rounded-lg hover:bg-red-500/20 flex items-center justify-center transition-colors\" title=\"Delete\">\n                  <Trash2 className=\"w-4 h-4 text-red-400\" />\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"flex border-b border-[var(--gm-border-primary)] px-5 gap-1 overflow-x-auto\" style={{ borderColor: 'var(--gm-border-primary)' }}>\n          {tabs.map(t => (\n            <button\n              key={t.key}\n              onClick={() => setActiveTab(t.key)}\n              className={`flex items-center gap-1.5 px-3 py-2.5 text-xs font-medium border-b-2 transition-colors whitespace-nowrap ${activeTab === t.key\n                ? 'border-blue-500 text-blue-400'\n                : 'border-transparent text-slate-400 hover:text-slate-200'\n                }`}\n            >\n              <t.icon className=\"w-3.5 h-3.5\" /> {t.label}\n            </button>\n          ))}\n        </div>\n\n        {/* Tab Content */}\n        <div className=\"p-5 max-h-[55vh] overflow-y-auto space-y-4 bg-[var(--gm-surface-primary)]\">\n          {/* Preview Tab */}\n          {activeTab === 'preview' && (\n            <>\n              {summaryText && (\n                <div className=\"bg-blue-600/5 border border-blue-600/10 rounded-xl p-4\">\n                  <h3 className=\"text-xs font-semibold text-[var(--gm-interactive-primary)] uppercase tracking-wider mb-2\">AI Summary</h3>\n                  <p className=\"text-sm text-[var(--gm-text-primary)] leading-relaxed\">{summaryText}</p>\n                </div>\n              )}\n\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-2\">\n                {[\n                  { label: 'Type', value: fileType },\n                  { label: 'Size', value: sizeStr },\n                  { label: 'Created', value: file.created_at ? new Date(file.created_at).toLocaleDateString() : '—' },\n                  { label: 'Updated', value: file.updated_at ? new Date(file.updated_at).toLocaleDateString() : '—' },\n                  ...(meta.pages ? [{ label: 'Pages', value: String(meta.pages) }] : []),\n                  ...(meta.language ? [{ label: 'Language', value: String(meta.language) }] : []),\n                  ...(meta.author ? [{ label: 'Author', value: String(meta.author) }] : []),\n                  ...(meta.word_count ? [{ label: 'Words', value: Number(meta.word_count).toLocaleString() }] : []),\n                  ...(meta.source ? [{ label: 'Source', value: String(meta.source) }] : []),\n                  ...(meta.speakers ? [{ label: 'Speakers', value: (meta.speakers as string[]).join(', ') }] : []),\n                ].map(m => (\n                  <div key={m.label} className=\"bg-[var(--gm-surface-secondary)] rounded-lg p-3\">\n                    <span className=\"text-[10px] text-[var(--gm-text-tertiary)] uppercase tracking-wider\">{m.label}</span>\n                    <p className=\"text-sm font-medium text-[var(--gm-text-primary)] mt-0.5 truncate\">{m.value}</p>\n                  </div>\n                ))}\n              </div>\n\n              {entities && (\n                <div className=\"grid grid-cols-5 gap-2\">\n                  {Object.entries(entities).map(([key, val]) => (\n                    <div key={key} className=\"bg-[var(--gm-surface-secondary)] rounded-lg p-3 text-center\">\n                      <p className=\"text-xl font-bold text-[var(--gm-text-primary)]\">{val ?? 0}</p>\n                      <p className=\"text-[10px] text-[var(--gm-text-tertiary)] uppercase mt-0.5\">{key}</p>\n                    </div>\n                  ))}\n                </div>\n              )}\n\n              {file.content_preview && (\n                <div>\n                  <h3 className=\"text-xs uppercase text-[var(--gm-text-tertiary)] font-semibold mb-2\">Content Preview</h3>\n                  <div className=\"bg-[var(--gm-bg-tertiary)] rounded-lg p-3 text-xs text-[var(--gm-text-secondary)] font-mono leading-relaxed max-h-40 overflow-y-auto whitespace-pre-wrap\">\n                    {file.content_preview}\n                  </div>\n                </div>\n              )}\n            </>\n          )}\n\n          {/* Entities Tab */}\n          {activeTab === 'entities' && (\n            <>\n              {extraction.isLoading && <div className=\"flex justify-center py-8\"><Loader2 className=\"w-6 h-6 animate-spin text-gm-interactive-primary\" /></div>}\n              {extraction.data && (() => {\n                const ext = (extraction.data as Record<string, unknown>).extraction as Record<string, unknown> | undefined;\n                if (!ext) return <p className=\"text-sm text-gm-text-tertiary text-center py-6\">No extraction data available.</p>;\n                const sections = ['facts', 'decisions', 'questions', 'risks', 'actions', 'people', 'participants'] as const;\n                return sections.map(section => {\n                  const items = ext[section] as Array<Record<string, unknown>> | undefined;\n                  if (!items || items.length === 0) return null;\n                  return (\n                    <div key={section}>\n                      <h3 className=\"text-xs font-semibold uppercase tracking-wider text-gm-text-tertiary mb-2 capitalize\">{section} ({items.length})</h3>\n                      <div className=\"space-y-1.5\">\n                        {items.map((item, i) => (\n                          <div key={i} className=\"bg-[var(--gm-surface-hover)] rounded-lg p-3 text-sm\">\n                            <p className=\"text-gm-text-primary\">{String(item.text || item.name || item.content || JSON.stringify(item))}</p>\n                            <div className=\"flex items-center gap-2 mt-1\">\n                              {item.category && <span className=\"text-[10px] px-1.5 py-0.5 rounded bg-blue-600/10 text-gm-interactive-primary\">{String(item.category)}</span>}\n                              {item.confidence != null && <span className=\"text-[10px] text-gm-text-tertiary\">{(Number(item.confidence) * 100).toFixed(0)}% confidence</span>}\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  );\n                });\n              })()}\n              {!extraction.isLoading && !extraction.data && (\n                <p className=\"text-sm text-gm-text-tertiary text-center py-6\">No extraction data available.</p>\n              )}\n            </>\n          )}\n\n          {/* Analysis Tab */}\n          {activeTab === 'analysis' && (\n            <>\n              {analysis.isLoading && <div className=\"flex justify-center py-8\"><Loader2 className=\"w-6 h-6 animate-spin text-gm-interactive-primary\" /></div>}\n              {(() => {\n                const analyses = ((analysis.data as Record<string, unknown>)?.analyses ?? []) as Array<Record<string, unknown>>;\n                if (!analysis.isLoading && analyses.length === 0) return <p className=\"text-sm text-gm-text-tertiary text-center py-6\">No analysis history yet.</p>;\n                return (\n                  <div className=\"overflow-x-auto\">\n                    <table className=\"w-full text-xs\">\n                      <thead>\n                        <tr className=\"border-b border-gm-border-primary text-left\">\n                          <th className=\"pb-2 pr-3 text-gm-text-tertiary font-medium\">Date</th>\n                          <th className=\"pb-2 pr-3 text-gm-text-tertiary font-medium\">Provider</th>\n                          <th className=\"pb-2 pr-3 text-gm-text-tertiary font-medium\">Model</th>\n                          <th className=\"pb-2 pr-3 text-gm-text-tertiary font-medium\">Tokens</th>\n                          <th className=\"pb-2 pr-3 text-gm-text-tertiary font-medium\">Cost</th>\n                          <th className=\"pb-2 pr-3 text-gm-text-tertiary font-medium\">Latency</th>\n                          <th className=\"pb-2 text-gm-text-tertiary font-medium\">Status</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {analyses.map((a, i) => (\n                          <tr key={i} className=\"border-b border-[var(--gm-border-primary)]\">\n                            <td className=\"py-2 pr-3 text-gm-text-primary\">{a.created_at ? new Date(String(a.created_at)).toLocaleString() : '—'}</td>\n                            <td className=\"py-2 pr-3 text-gm-text-primary\">{String(a.provider || '—')}</td>\n                            <td className=\"py-2 pr-3 text-gm-text-primary\">{String(a.model || '—')}</td>\n                            <td className=\"py-2 pr-3 text-gm-text-primary\">{a.tokens != null ? Number(a.tokens).toLocaleString() : '—'}</td>\n                            <td className=\"py-2 pr-3 text-gm-text-primary\">{a.cost != null ? `$${Number(a.cost).toFixed(4)}` : '—'}</td>\n                            <td className=\"py-2 pr-3 text-gm-text-primary\">{a.latency_ms != null ? `${Number(a.latency_ms)}ms` : '—'}</td>\n                            <td className=\"py-2\">\n                              <span className={`px-1.5 py-0.5 rounded text-[10px] font-medium ${a.status === 'completed' ? 'bg-gm-status-success-bg text-gm-status-success' : a.status === 'failed' ? 'bg-gm-status-danger-bg text-gm-status-danger' : 'bg-gm-status-warning-bg text-gm-status-warning'}`}>\n                                {String(a.status || '—')}\n                              </span>\n                            </td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                  </div>\n                );\n              })()}\n            </>\n          )}\n\n          {/* Versions Tab */}\n          {activeTab === 'versions' && (\n            <>\n              {versions.isLoading && <div className=\"flex justify-center py-8\"><Loader2 className=\"w-6 h-6 animate-spin text-gm-interactive-primary\" /></div>}\n              {(() => {\n                const vList = ((versions.data as Record<string, unknown>)?.versions ?? []) as Array<Record<string, unknown>>;\n                if (!versions.isLoading && vList.length === 0) return <p className=\"text-sm text-gm-text-tertiary text-center py-6\">No version history.</p>;\n                return (\n                  <div className=\"space-y-2\">\n                    {vList.map((v, i) => (\n                      <div key={i} className=\"bg-[var(--gm-surface-hover)] rounded-lg p-3 flex items-center gap-3\">\n                        <div className=\"w-8 h-8 rounded-full bg-blue-600/10 flex items-center justify-center text-xs font-bold text-gm-interactive-primary\">\n                          v{String(v.version ?? i + 1)}\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <p className=\"text-sm font-medium text-gm-text-primary\">{String(v.change_notes || v.summary || 'Version update')}</p>\n                          <div className=\"flex items-center gap-3 mt-0.5\">\n                            {v.created_at && <span className=\"text-[10px] text-gm-text-tertiary\">{new Date(String(v.created_at)).toLocaleString()}</span>}\n                            {v.file_size != null && <span className=\"text-[10px] text-gm-text-tertiary\">{(Number(v.file_size) / 1024).toFixed(1)} KB</span>}\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                );\n              })()}\n            </>\n          )}\n\n          {/* Activity Tab */}\n          {activeTab === 'activity' && (\n            <>\n              {activity.isLoading && <div className=\"flex justify-center py-8\"><Loader2 className=\"w-6 h-6 animate-spin text-gm-interactive-primary\" /></div>}\n              {(() => {\n                const aList = ((activity.data as Record<string, unknown>)?.activities ?? []) as Array<Record<string, unknown>>;\n                if (!activity.isLoading && aList.length === 0) return <p className=\"text-sm text-gm-text-tertiary text-center py-6\">No activity yet.</p>;\n                return (\n                  <div className=\"space-y-1.5\">\n                    {aList.map((a, i) => (\n                      <div key={i} className=\"flex items-start gap-3 py-2 border-b border-[var(--gm-border-primary)] last:border-0\">\n                        <div className=\"w-6 h-6 rounded-full bg-blue-600/10 flex items-center justify-center flex-shrink-0 mt-0.5\">\n                          <Activity className=\"w-3 h-3 text-gm-interactive-primary\" />\n                        </div>\n                        <div className=\"flex-1 min-w-0\">\n                          <p className=\"text-sm text-gm-text-primary\">\n                            {a.user && <span className=\"font-medium\">{String(a.user)} </span>}\n                            {String(a.action || a.type || 'activity')}\n                          </p>\n                          {a.created_at && <span className=\"text-[10px] text-gm-text-tertiary\">{new Date(String(a.created_at)).toLocaleString()}</span>}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                );\n              })()}\n            </>\n          )}\n\n          {/* Share Tab */}\n          {activeTab === 'share' && (\n            <ShareTabContent fileId={file.id} shareMutation={shareDoc} />\n          )}\n\n          {/* Comments */}\n          <div className=\"mt-4\">\n            <CommentsPanel targetType=\"document\" targetId={file.id} />\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nfunction ShareTabContent({ fileId, shareMutation }: { fileId: string; shareMutation: ReturnType<typeof useShareDocument> }) {\n  const [expires, setExpires] = useState('7d');\n  const [maxViews, setMaxViews] = useState(100);\n  const [shareUrl, setShareUrl] = useState<string | null>(null);\n\n  const handleShare = () => {\n    shareMutation.mutate({ id: fileId, expires, maxViews }, {\n      onSuccess: (data) => {\n        const url = (data as Record<string, unknown>).url as string;\n        setShareUrl(url);\n        toast.success('Share link created');\n      },\n      onError: () => toast.error('Failed to create share link'),\n    });\n  };\n\n  const copyLink = () => {\n    if (shareUrl) {\n      navigator.clipboard.writeText(shareUrl);\n      toast.success('Link copied to clipboard');\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <p className=\"text-sm text-[var(--gm-text-tertiary)]\">Generate a shareable link for this document.</p>\n      <div className=\"grid grid-cols-2 gap-3\">\n        <div>\n          <label className=\"text-xs font-medium text-[var(--gm-text-tertiary)] block mb-1\">Expires</label>\n          <select value={expires} onChange={e => setExpires(e.target.value)} className=\"w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-xs text-[var(--gm-text-primary)]\">\n            <option value=\"1h\">1 hour</option>\n            <option value=\"24h\">24 hours</option>\n            <option value=\"7d\">7 days</option>\n            <option value=\"30d\">30 days</option>\n            <option value=\"never\">Never</option>\n          </select>\n        </div>\n        <div>\n          <label className=\"text-xs font-medium text-[var(--gm-text-tertiary)] block mb-1\">Max views</label>\n          <input type=\"number\" value={maxViews} onChange={e => setMaxViews(Number(e.target.value))} min={1} className=\"w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-xs text-[var(--gm-text-primary)]\" />\n        </div>\n      </div>\n\n      <button\n        onClick={handleShare}\n        disabled={shareMutation.isPending}\n        className=\"w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] text-sm font-medium hover:bg-[var(--gm-interactive-primary-hover)] disabled:opacity-50 transition-colors\"\n      >\n        {shareMutation.isPending ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Share2 className=\"w-4 h-4\" />}\n        Generate Share Link\n      </button>\n\n      {shareUrl && (\n        <div className=\"bg-[var(--gm-surface-secondary)] rounded-lg p-3 flex items-center gap-2\">\n          <input type=\"text\" readOnly value={shareUrl} className=\"flex-1 bg-transparent text-xs text-[var(--gm-text-primary)] outline-none truncate\" />\n          <button onClick={copyLink} className=\"flex-shrink-0 w-8 h-8 rounded-lg hover:bg-[var(--gm-surface-hover)] flex items-center justify-center\">\n            <Copy className=\"w-3.5 h-3.5 text-[var(--gm-text-tertiary)]\" />\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default FileDetailModal;\n","import { useState, useMemo } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport {\n  FileText, Mic, Mail, MessageSquare, Upload, RotateCw, Trash2, Search,\n  Loader2, CheckCircle, Clock, AlertCircle, FolderOpen,\n  Star, Download, List, Archive, LayoutGrid,\n} from 'lucide-react';\nimport { toast } from 'sonner';\nimport {\n  usePendingFiles, useDeletePendingFile, useUploadFiles, useProcessFiles,\n  useDocuments, useDeleteDocument, useReprocessDocument, useProcessStatus,\n  useToggleDocumentFavorite, useRestoreDocument,\n  useBulkDeleteDocuments, useBulkReprocessDocuments, useBulkExportDocuments,\n  type DocumentItem,\n} from '../hooks/useGodMode';\nimport FileDetailModal from '../components/files/FileDetailModal';\n\nconst typeIcon: Record<string, typeof FileText> = {\n  documents: FileText,\n  transcripts: Mic,\n  emails: Mail,\n  images: MessageSquare,\n};\n\nconst statusBadge = (status: string) => {\n  switch (status) {\n    case 'processed': case 'completed': return { icon: CheckCircle, cls: 'bg-gm-status-success-bg text-gm-status-success' };\n    case 'processing': return { icon: Loader2, cls: 'bg-blue-600/10 text-gm-interactive-primary' };\n    case 'pending': return { icon: Clock, cls: 'bg-gm-status-warning-bg text-gm-status-warning' };\n    case 'deleted': return { icon: Archive, cls: 'bg-gm-surface-secondary text-gm-text-tertiary' };\n    default: return { icon: AlertCircle, cls: 'bg-gm-status-danger-bg text-gm-status-danger' };\n  }\n};\n\nexport default function FilesPage() {\n  const [tab, setTab] = useState<'documents' | 'pending' | 'deleted'>('documents');\n  const [search, setSearch] = useState('');\n  const [typeFilter, setTypeFilter] = useState('');\n  const [statusFilter, setStatusFilter] = useState('');\n  const [viewMode, setViewMode] = useState<'list' | 'grid'>('list');\n  const [favOnly, setFavOnly] = useState(false);\n  const [selectedIds, setSelectedIds] = useState<Set<string>>(new Set());\n  const [modalDoc, setModalDoc] = useState<DocumentItem | null>(null);\n\n  const documents = useDocuments({\n    search: search || undefined,\n    type: typeFilter || undefined,\n    status: tab === 'deleted' ? 'deleted' : (statusFilter || undefined),\n    limit: 100,\n  });\n  const pending = usePendingFiles();\n  const { data: processStatus } = useProcessStatus();\n\n  const uploadFiles = useUploadFiles();\n  const processFiles = useProcessFiles();\n  const deleteDocument = useDeleteDocument();\n  const reprocessDocument = useReprocessDocument();\n  const deletePendingFile = useDeletePendingFile();\n  const toggleFavorite = useToggleDocumentFavorite();\n  const restoreDocument = useRestoreDocument();\n  const bulkDelete = useBulkDeleteDocuments();\n  const bulkReprocess = useBulkReprocessDocuments();\n  const bulkExport = useBulkExportDocuments();\n\n  const isProcessing = processStatus?.status === 'processing' || processFiles.isPending;\n  const rawDocList = documents.data?.documents ?? [];\n  const statusCounts = documents.data?.statusCounts;\n  const pendingFiles = pending.data ?? [];\n\n  const docList = useMemo(() => {\n    if (!favOnly) return rawDocList;\n    return rawDocList.filter(d => (d as Record<string, unknown>).is_favorite);\n  }, [rawDocList, favOnly]);\n\n  const toggleSelect = (id: string) => {\n    setSelectedIds(prev => {\n      const next = new Set(prev);\n      if (next.has(id)) next.delete(id); else next.add(id);\n      return next;\n    });\n  };\n  const selectAll = () => setSelectedIds(new Set(docList.map(d => d.id)));\n  const clearSelection = () => setSelectedIds(new Set());\n\n  const handleUpload = (files: FileList | null) => {\n    if (!files || files.length === 0) return;\n    uploadFiles.mutate(\n      { files: Array.from(files), type: 'documents' },\n      {\n        onSuccess: () => toast.success(`${files.length} file(s) uploaded`),\n        onError: () => toast.error('Upload failed'),\n      },\n    );\n  };\n\n  const handleProcess = () => {\n    processFiles.mutate(undefined, {\n      onSuccess: () => toast.success('Processing started'),\n      onError: () => toast.error('Processing failed to start'),\n    });\n  };\n\n  const handleBulkDelete = () => {\n    const ids = Array.from(selectedIds);\n    bulkDelete.mutate(ids, {\n      onSuccess: () => { toast.success(`${ids.length} document(s) deleted`); clearSelection(); },\n      onError: () => toast.error('Bulk delete failed'),\n    });\n  };\n\n  const handleBulkReprocess = () => {\n    const ids = Array.from(selectedIds);\n    bulkReprocess.mutate(ids, {\n      onSuccess: () => { toast.success(`${ids.length} document(s) queued for reprocessing`); clearSelection(); },\n      onError: () => toast.error('Bulk reprocess failed'),\n    });\n  };\n\n  const handleBulkExport = () => {\n    const ids = Array.from(selectedIds);\n    bulkExport.mutate({ ids }, {\n      onSuccess: () => { toast.success('Export downloaded'); clearSelection(); },\n      onError: () => toast.error('Export failed'),\n    });\n  };\n\n  const handleFavorite = (e: React.MouseEvent, id: string) => {\n    e.stopPropagation();\n    toggleFavorite.mutate(id);\n  };\n\n  const handleRestore = (id: string) => {\n    restoreDocument.mutate(id, {\n      onSuccess: () => toast.success('Document restored'),\n    });\n  };\n\n  const renderDocCard = (doc: DocumentItem) => {\n    const sb = statusBadge(doc.status);\n    const Icon = typeIcon[doc.type || ''] || FileText;\n    const isFav = !!(doc as Record<string, unknown>).is_favorite;\n    const isSelected = selectedIds.has(doc.id);\n\n    if (viewMode === 'grid') {\n      return (\n        <motion.div\n          key={doc.id}\n          layout\n          initial={{ opacity: 0, scale: 0.95 }}\n          animate={{ opacity: 1, scale: 1 }}\n          className={`bg-gm-surface-primary border rounded-xl p-4 hover:border-blue-600/30 transition-all cursor-pointer group relative ${isSelected ? 'border-gm-interactive-primary ring-2 ring-blue-600/20' : 'border-gm-border-primary'}`}\n          onClick={() => setModalDoc(doc)}\n        >\n          <div className=\"absolute top-3 left-3 flex items-center gap-1.5\">\n            <input\n              type=\"checkbox\"\n              checked={isSelected}\n              onChange={() => toggleSelect(doc.id)}\n              onClick={e => e.stopPropagation()}\n              className=\"w-3.5 h-3.5 rounded border-gm-border-primary accent-gm-interactive-primary\"\n            />\n          </div>\n          <div className=\"absolute top-3 right-3 flex items-center gap-1\">\n            <button onClick={(e) => handleFavorite(e, doc.id)} className=\"opacity-0 group-hover:opacity-100 transition-opacity\">\n              <Star className={`w-3.5 h-3.5 ${isFav ? 'fill-yellow-400 text-yellow-400' : 'text-gm-text-tertiary hover:text-yellow-400'}`} />\n            </button>\n          </div>\n          <div className=\"flex flex-col items-center pt-4\">\n            <div className=\"w-12 h-12 rounded-lg bg-blue-600/10 border border-blue-600/20 flex items-center justify-center mb-3\">\n              <Icon className=\"w-5 h-5 text-gm-interactive-primary\" />\n            </div>\n            <p className=\"text-sm font-medium text-gm-text-primary truncate w-full text-center\">{doc.original_filename || doc.filename}</p>\n            <div className=\"flex items-center gap-2 mt-1.5\">\n              {doc.type && <span className=\"text-[10px] text-gm-text-tertiary capitalize\">{doc.type}</span>}\n              <span className={`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-full font-medium ${sb.cls}`}>\n                <sb.icon className={`w-3 h-3 ${doc.status === 'processing' ? 'animate-spin' : ''}`} /> {doc.status || '—'}\n              </span>\n            </div>\n            {doc.size && <span className=\"text-[10px] text-gm-text-tertiary mt-1\">{(Number(doc.size) / 1024).toFixed(1)} KB</span>}\n          </div>\n        </motion.div>\n      );\n    }\n\n    return (\n      <motion.div\n        key={doc.id}\n        layout\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        className={`bg-gm-surface-primary border rounded-xl p-3.5 hover:border-blue-600/30 transition-all cursor-pointer group ${isSelected ? 'border-gm-interactive-primary ring-2 ring-blue-600/20' : 'border-gm-border-primary'}`}\n        onClick={() => setModalDoc(doc)}\n      >\n        <div className=\"flex items-center gap-3\">\n          <input\n            type=\"checkbox\"\n            checked={isSelected}\n            onChange={() => toggleSelect(doc.id)}\n            onClick={e => e.stopPropagation()}\n            className=\"w-3.5 h-3.5 rounded border-gm-border-primary accent-gm-interactive-primary flex-shrink-0\"\n          />\n          <button onClick={(e) => handleFavorite(e, doc.id)} className=\"flex-shrink-0\">\n            <Star className={`w-4 h-4 transition-colors ${isFav ? 'fill-yellow-400 text-yellow-400' : 'text-gray-600 hover:text-yellow-400'}`} />\n          </button>\n          <Icon className=\"w-5 h-5 text-gm-text-tertiary group-hover:text-gm-interactive-primary transition-colors flex-shrink-0\" />\n          <div className=\"flex-1 min-w-0\">\n            <p className=\"text-sm font-medium text-gm-text-primary truncate group-hover:text-gm-interactive-primary transition-colors\">\n              {doc.original_filename || doc.filename}\n            </p>\n            <div className=\"flex items-center gap-2 mt-0.5\">\n              {doc.type && <span className=\"text-[10px] text-gm-text-tertiary capitalize\">{doc.type}</span>}\n              {doc.size && <span className=\"text-[10px] text-gm-text-tertiary\">{(Number(doc.size) / 1024).toFixed(1)} KB</span>}\n              {doc.created_at && <span className=\"text-[10px] text-gm-text-tertiary\">{new Date(doc.created_at).toLocaleDateString()}</span>}\n            </div>\n          </div>\n          <span className={`inline-flex items-center gap-1 text-[10px] px-2 py-0.5 rounded-full font-medium ${sb.cls}`}>\n            <sb.icon className={`w-3 h-3 ${doc.status === 'processing' ? 'animate-spin' : ''}`} /> {doc.status || '—'}\n          </span>\n          <a\n            href={`/api/documents/${doc.id}/download`}\n            onClick={e => e.stopPropagation()}\n            className=\"w-7 h-7 rounded-lg hover:bg-gm-surface-hover flex items-center justify-center text-gm-text-tertiary hover:text-gm-text-primary transition-colors opacity-0 group-hover:opacity-100\"\n            title=\"Download\"\n          >\n            <Download className=\"w-3.5 h-3.5\" />\n          </a>\n        </div>\n      </motion.div>\n    );\n  };\n\n  return (\n    <div className=\"p-6 space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-2xl font-bold text-gm-text-primary\">Files & Documents</h1>\n        <div className=\"flex gap-2\">\n          {(pendingFiles.length > 0 || isProcessing) && (\n            <button onClick={handleProcess} disabled={isProcessing} className=\"px-3 py-1.5 rounded-lg bg-gm-interactive-secondary text-gm-text-primary text-xs font-medium hover:bg-gm-interactive-secondary-hover flex items-center gap-1.5 disabled:opacity-50\">\n              {isProcessing ? <Loader2 className=\"w-3.5 h-3.5 animate-spin\" /> : <RotateCw className=\"w-3.5 h-3.5\" />}\n              {isProcessing ? 'Processing...' : `Process ${pendingFiles.length} file(s)`}\n            </button>\n          )}\n          <label className=\"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover flex items-center gap-1.5 cursor-pointer transition-colors\">\n            <Upload className=\"w-3.5 h-3.5\" /> Upload\n            <input type=\"file\" multiple className=\"hidden\" onChange={(e) => handleUpload(e.target.files)} />\n          </label>\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"flex gap-1 bg-gm-surface-secondary rounded-xl p-1\">\n        {([\n          { key: 'documents' as const, label: 'Documents', count: documents.data?.total ?? 0 },\n          { key: 'pending' as const, label: 'Pending', count: pendingFiles.length },\n          { key: 'deleted' as const, label: 'Deleted', count: statusCounts?.deleted ?? 0 },\n        ]).map(t => (\n          <button\n            key={t.key}\n            onClick={() => { setTab(t.key); clearSelection(); }}\n            className={`flex-1 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${tab === t.key ? 'bg-gm-surface-primary text-gm-text-primary shadow-sm' : 'text-gm-text-tertiary hover:text-gm-text-primary'}`}\n          >\n            {t.label} <span className=\"ml-1 text-[10px] opacity-60\">{t.count}</span>\n          </button>\n        ))}\n      </div>\n\n      {/* Processing progress bar */}\n      {isProcessing && processStatus && (\n        <motion.div initial={{ opacity: 0, height: 0 }} animate={{ opacity: 1, height: 'auto' }} className=\"bg-blue-600/5 border border-blue-600/20 rounded-xl p-4\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <div className=\"flex items-center gap-2\">\n              <Loader2 className=\"w-4 h-4 animate-spin text-gm-interactive-primary\" />\n              <span className=\"text-sm font-medium text-gm-text-primary\">Processing files...</span>\n            </div>\n            <span className=\"text-xs text-gm-text-tertiary\">\n              {processStatus.processedFiles ?? 0} / {processStatus.totalFiles ?? '?'} files\n            </span>\n          </div>\n          {processStatus.currentFile && (\n            <p className=\"text-xs text-gm-text-tertiary mb-2 truncate\">Current: {processStatus.currentFile}</p>\n          )}\n          <div className=\"w-full bg-gm-surface-secondary rounded-full h-2 overflow-hidden\">\n            <motion.div\n              className=\"bg-gm-interactive-primary h-full rounded-full\"\n              initial={{ width: 0 }}\n              animate={{ width: `${processStatus.progress ?? ((processStatus.processedFiles && processStatus.totalFiles) ? Math.round(((processStatus.processedFiles ?? 0) / (processStatus.totalFiles || 1)) * 100) : 0)}%` }}\n              transition={{ duration: 0.5 }}\n            />\n          </div>\n        </motion.div>\n      )}\n\n      {/* Status counts */}\n      {tab === 'documents' && statusCounts && (\n        <div className=\"flex gap-2 flex-wrap\">\n          {[\n            { label: 'Processed', value: statusCounts.processed ?? 0, color: 'text-gm-status-success' },\n            { label: 'Processing', value: statusCounts.processing ?? 0, color: 'text-gm-interactive-primary' },\n            { label: 'Pending', value: statusCounts.pending ?? 0, color: 'text-gm-status-warning' },\n            { label: 'Failed', value: statusCounts.failed ?? 0, color: 'text-gm-status-danger' },\n          ].map(s => (\n            <div key={s.label} className=\"bg-gm-surface-primary border border-gm-border-primary rounded-lg px-3 py-2 flex items-center gap-2\">\n              <span className={`text-lg font-bold ${s.color}`}>{s.value}</span>\n              <span className=\"text-[10px] text-gm-text-tertiary uppercase tracking-wider\">{s.label}</span>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Filters + View toggle */}\n      {(tab === 'documents' || tab === 'deleted') && (\n        <div className=\"flex items-center gap-2 flex-wrap\">\n          <div className=\"relative flex-1 max-w-xs\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gm-text-tertiary\" />\n            <input\n              value={search}\n              onChange={(e) => setSearch(e.target.value)}\n              placeholder=\"Search documents...\"\n              className=\"w-full pl-9 pr-3 py-1.5 bg-gm-surface-secondary border border-gm-border-primary rounded-lg text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus\"\n            />\n          </div>\n          {tab === 'documents' && (\n            <>\n              <select value={typeFilter} onChange={e => setTypeFilter(e.target.value)} className=\"bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-1.5 text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus\">\n                <option value=\"\">All types</option>\n                <option value=\"documents\">Documents</option>\n                <option value=\"transcripts\">Transcripts</option>\n                <option value=\"emails\">Emails</option>\n                <option value=\"images\">Images</option>\n              </select>\n              <select value={statusFilter} onChange={e => setStatusFilter(e.target.value)} className=\"bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-1.5 text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus\">\n                <option value=\"\">All statuses</option>\n                <option value=\"processed\">Processed</option>\n                <option value=\"processing\">Processing</option>\n                <option value=\"pending\">Pending</option>\n                <option value=\"failed\">Failed</option>\n              </select>\n              <button\n                onClick={() => setFavOnly(!favOnly)}\n                className={`flex items-center gap-1.5 px-3 py-1.5 rounded-lg border text-xs font-medium transition-colors ${favOnly ? 'bg-yellow-400/10 border-yellow-400/30 text-yellow-600' : 'bg-gm-surface-secondary border-gm-border-primary text-gm-text-tertiary hover:text-gm-text-primary'}`}\n              >\n                <Star className={`w-3.5 h-3.5 ${favOnly ? 'fill-yellow-400' : ''}`} /> Favorites\n              </button>\n            </>\n          )}\n          <div className=\"ml-auto flex items-center gap-1 bg-gm-surface-secondary rounded-lg p-0.5\">\n            <button onClick={() => setViewMode('list')} className={`p-1.5 rounded-md transition-colors ${viewMode === 'list' ? 'bg-gm-surface-primary shadow-sm text-gm-text-primary' : 'text-gm-text-tertiary hover:text-gm-text-primary'}`}>\n              <List className=\"w-3.5 h-3.5\" />\n            </button>\n            <button onClick={() => setViewMode('grid')} className={`p-1.5 rounded-md transition-colors ${viewMode === 'grid' ? 'bg-gm-surface-primary shadow-sm text-gm-text-primary' : 'text-gm-text-tertiary hover:text-gm-text-primary'}`}>\n              <LayoutGrid className=\"w-3.5 h-3.5\" />\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Bulk selection bar */}\n      <AnimatePresence>\n        {selectedIds.size > 0 && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: 'auto' }}\n            exit={{ opacity: 0, height: 0 }}\n            className=\"flex items-center gap-3 bg-blue-600/5 border border-blue-600/20 rounded-xl px-4 py-2.5\"\n          >\n            <span className=\"text-sm font-medium text-gm-text-primary\">{selectedIds.size} selected</span>\n            <button onClick={selectAll} className=\"text-xs text-gm-interactive-primary hover:underline\">Select all</button>\n            <button onClick={clearSelection} className=\"text-xs text-gm-text-tertiary hover:underline\">Clear</button>\n            <div className=\"ml-auto flex items-center gap-2\">\n              <button\n                onClick={handleBulkExport}\n                disabled={bulkExport.isPending}\n                className=\"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-gm-surface-secondary text-gm-text-primary text-xs hover:bg-gm-surface-hover transition-colors\"\n              >\n                <Download className=\"w-3.5 h-3.5\" /> Export\n              </button>\n              <button\n                onClick={handleBulkReprocess}\n                disabled={bulkReprocess.isPending}\n                className=\"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs hover:bg-gm-interactive-primary-hover transition-colors\"\n              >\n                <RotateCw className=\"w-3.5 h-3.5\" /> Reprocess\n              </button>\n              <button\n                onClick={handleBulkDelete}\n                disabled={bulkDelete.isPending}\n                className=\"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-gm-status-danger-bg text-gm-status-danger text-xs hover:bg-red-500/20 transition-colors\"\n              >\n                <Trash2 className=\"w-3.5 h-3.5\" /> Delete\n              </button>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n\n      {/* Documents tab */}\n      {tab === 'documents' && (\n        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }}>\n          {documents.isLoading ? (\n            <div className=\"flex items-center justify-center h-32\">\n              <Loader2 className=\"h-8 w-8 animate-spin text-gm-interactive-primary\" />\n            </div>\n          ) : docList.length === 0 ? (\n            <div className=\"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-8 text-center text-gm-text-tertiary\">\n              <FolderOpen className=\"h-12 w-12 mx-auto mb-4 text-gray-500\" />\n              {favOnly ? 'No favorite documents.' : 'No documents found. Upload files to get started.'}\n            </div>\n          ) : (\n            <div className={viewMode === 'grid' ? 'grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3' : 'space-y-2'}>\n              {docList.map(doc => renderDocCard(doc))}\n            </div>\n          )}\n        </motion.div>\n      )}\n\n      {/* Deleted tab */}\n      {tab === 'deleted' && (\n        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }}>\n          {documents.isLoading ? (\n            <div className=\"flex items-center justify-center h-32\">\n              <Loader2 className=\"h-8 w-8 animate-spin text-gm-interactive-primary\" />\n            </div>\n          ) : rawDocList.length === 0 ? (\n            <div className=\"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-8 text-center text-gm-text-tertiary\">\n              <Archive className=\"h-12 w-12 mx-auto mb-4 text-gray-500\" />\n              No deleted documents.\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              {rawDocList.map(doc => {\n                const Icon = typeIcon[doc.type || ''] || FileText;\n                return (\n                  <div key={doc.id} className=\"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-3.5 flex items-center gap-3 opacity-70\">\n                    <Icon className=\"w-5 h-5 text-gm-text-tertiary flex-shrink-0\" />\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-sm font-medium text-gm-text-primary truncate\">{doc.original_filename || doc.filename}</p>\n                      <div className=\"flex items-center gap-2 mt-0.5\">\n                        {doc.type && <span className=\"text-[10px] text-gm-text-tertiary capitalize\">{doc.type}</span>}\n                        {doc.created_at && <span className=\"text-[10px] text-gm-text-tertiary\">{new Date(doc.created_at).toLocaleDateString()}</span>}\n                      </div>\n                    </div>\n                    <button\n                      onClick={() => handleRestore(doc.id)}\n                      className=\"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs hover:bg-gm-interactive-primary-hover flex items-center gap-1.5 transition-colors\"\n                    >\n                      <RotateCw className=\"w-3.5 h-3.5\" /> Restore\n                    </button>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </motion.div>\n      )}\n\n      {/* Pending tab */}\n      {tab === 'pending' && (\n        <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }}>\n          {pending.isLoading ? (\n            <div className=\"flex items-center justify-center h-32\">\n              <Loader2 className=\"h-8 w-8 animate-spin text-gm-interactive-primary\" />\n            </div>\n          ) : pendingFiles.length === 0 ? (\n            <div className=\"rounded-xl border border-gm-border-primary bg-gm-surface-primary p-8 text-center text-gm-text-tertiary\">\n              <FolderOpen className=\"h-12 w-12 mx-auto mb-4 text-gray-500\" />\n              No pending files. Upload files to add them to the processing queue.\n            </div>\n          ) : (\n            <div className=\"space-y-2\">\n              {pendingFiles.map(file => (\n                <div key={`${file.folder}/${file.filename}`} className=\"bg-gm-surface-primary border border-gm-border-primary rounded-xl p-3.5 flex items-center gap-3\">\n                  <FileText className=\"w-5 h-5 text-gm-text-tertiary flex-shrink-0\" />\n                  <div className=\"flex-1 min-w-0\">\n                    <p className=\"text-sm font-medium text-gm-text-primary truncate\">{file.filename}</p>\n                    <div className=\"flex items-center gap-2 mt-0.5\">\n                      <span className=\"text-[10px] text-gm-text-tertiary\">{file.folder}</span>\n                      <span className=\"text-[10px] text-gm-text-tertiary\">{((file.size ?? 0) / 1024).toFixed(1)} KB</span>\n                    </div>\n                  </div>\n                  <span className=\"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-warning-bg text-gm-status-warning font-medium\">{file.status || '—'}</span>\n                  <button\n                    onClick={() => deletePendingFile.mutate({ folder: file.folder, filename: file.filename })}\n                    className=\"w-7 h-7 rounded-lg hover:bg-gm-status-danger-bg flex items-center justify-center text-gm-text-tertiary hover:text-gm-status-danger transition-colors\"\n                  >\n                    <Trash2 className=\"w-3.5 h-3.5\" />\n                  </button>\n                </div>\n              ))}\n            </div>\n          )}\n        </motion.div>\n      )}\n\n      <FileDetailModal\n        file={modalDoc}\n        open={!!modalDoc}\n        onClose={() => setModalDoc(null)}\n        onReprocess={(id) => {\n          reprocessDocument.mutate(id, { onSuccess: () => toast.success('Reprocessing started') });\n        }}\n        onDelete={(id) => {\n          deleteDocument.mutate(id, { onSuccess: () => { toast.success('Document deleted'); setModalDoc(null); } });\n        }}\n      />\n    </div>\n  );\n}\n"],"names":["__iconNode","Braces","createLucideIcon","typeIcon","FileText","Mic","Mail","MessageSquare","FileDetailModal","file","open","onClose","onReprocess","onDelete","activeTab","setActiveTab","useState","id","detail","useDocumentDetail","extraction","useDocumentExtraction","summary","useDocumentSummary","analysis","useDocumentAnalysis","versions","useDocumentVersions","activity","useDocumentActivity","reprocessCheck","useReprocessCheck","toggleFav","useToggleDocumentFavorite","shareDoc","useShareDocument","doc","displayName","fileType","Icon","meta","sizeStr","isFav","entities","summaryText","tabs","Eye","BarChart3","History","Activity","Link2","jsx","Dialog","o","jsxs","DialogContent","DialogTitle","CheckCircle","Clock","Loader2","AlertCircle","Star","Download","cn","RotateCw","Trash2","t","Fragment","m","key","val","ext","section","items","item","i","analyses","vList","v","aList","ShareTabContent","CommentsPanel","fileId","shareMutation","expires","setExpires","maxViews","setMaxViews","shareUrl","setShareUrl","handleShare","data","url","toast","copyLink","e","Share2","Copy","statusBadge","status","Archive","FilesPage","tab","setTab","search","setSearch","typeFilter","setTypeFilter","statusFilter","setStatusFilter","viewMode","setViewMode","favOnly","setFavOnly","selectedIds","setSelectedIds","modalDoc","setModalDoc","documents","useDocuments","pending","usePendingFiles","processStatus","useProcessStatus","uploadFiles","useUploadFiles","processFiles","useProcessFiles","deleteDocument","useDeleteDocument","reprocessDocument","useReprocessDocument","deletePendingFile","useDeletePendingFile","toggleFavorite","restoreDocument","useRestoreDocument","bulkDelete","useBulkDeleteDocuments","bulkReprocess","useBulkReprocessDocuments","bulkExport","useBulkExportDocuments","isProcessing","rawDocList","statusCounts","pendingFiles","docList","useMemo","d","toggleSelect","prev","next","selectAll","clearSelection","handleUpload","files","handleProcess","handleBulkDelete","ids","handleBulkReprocess","handleBulkExport","handleFavorite","handleRestore","renderDocCard","sb","isSelected","motion","Upload","s","Search","List","LayoutGrid","AnimatePresence","FolderOpen"],"mappings":"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","x_google_ignoreList":[0]}