import{c as De}from"./vendor-markdown-Cu8AM8lU.js";import{g as Gr,r as z,j as s}from"./vendor-react-CZ-WyKWZ.js";import{t as O}from"./vendor-ui-BS9QKitv.js";import{dT as $r,dU as Dr,dV as Cr,dW as Lr,dX as Tr,dY as Or,dZ as Rr,d_ as Mr,d$ as Ir,e0 as Pr,e1 as Ur,e2 as Wr,e3 as zr,e4 as Fr,e5 as Br,e6 as Kr,e7 as qr,e8 as Vr,e9 as Hr,ea as Jr,eb as Qr,ec as Yr,ed as Xr,ee as Zr,ef as es,eg as ts,eh as rs,ei as ss,ej as ns,ek as is,el as as,em as os,en as ds,eo as cs,ep as ls,eq as us,er as hs,es as ps,bn as tr,et as gs,Z as Se,cD as ms,A as Oe,L as R,R as Re,c as W,P as nt,a9 as pt,a6 as Me,T as It,aX as Pt,a8 as Ut,C as fs,eu as xs,w as ys}from"./main-B3DZn5B_.js";import{C as bs}from"./cpu-DUHk4ipN.js";import{S as Ie}from"./sparkles-D3iJUPqd.js";import{C as it}from"./chart-column-BRODuIXF.js";import{B as _e}from"./brain-BD_Z4K1O.js";import{L as Pe}from"./layers-Bgf9ppPM.js";import{H as ge}from"./history-CfQJo6RW.js";import{E as at}from"./eye-RsgK9PvA.js";import{W as ws}from"./wand-sparkles-GsBQJb1C.js";import{C as Wt}from"./circle-check-big-Do7NRW-9.js";import{C as gt}from"./circle-x-qKfRTqT4.js";import{M as zt}from"./merge-13AMIUb7.js";import{P as Ft}from"./play-BMZi0w5i.js";const vs=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],Ns=De("flask-conical",vs);const js=[["path",{d:"M15 6a9 9 0 0 0-9 9V3",key:"1cii5b"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}]],Ue=De("git-branch",js);const Es=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],fi=De("pause",Es);const ks=[["path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15",key:"dxknvb"}],["path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68",key:"1x7qb5"}],["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ss=De("power-off",ks);const _s=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],As=De("power",_s);var We={exports:{}},Bt;function Gs(){if(Bt)return We.exports;Bt=1;var a=typeof Reflect=="object"?Reflect:null,e=a&&typeof a.apply=="function"?a.apply:function(h,f,w){return Function.prototype.apply.call(h,f,w)},t;a&&typeof a.ownKeys=="function"?t=a.ownKeys:Object.getOwnPropertySymbols?t=function(h){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h))}:t=function(h){return Object.getOwnPropertyNames(h)};function r(x){console&&console.warn&&console.warn(x)}var n=Number.isNaN||function(h){return h!==h};function i(){i.init.call(this)}We.exports=i,We.exports.once=D,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function c(x){if(typeof x!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(x){if(typeof x!="number"||x<0||n(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");o=x}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(h){if(typeof h!="number"||h<0||n(h))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+h+".");return this._maxListeners=h,this};function u(x){return x._maxListeners===void 0?i.defaultMaxListeners:x._maxListeners}i.prototype.getMaxListeners=function(){return u(this)},i.prototype.emit=function(h){for(var f=[],w=1;w<arguments.length;w++)f.push(arguments[w]);var j=h==="error",$=this._events;if($!==void 0)j=j&&$.error===void 0;else if(!j)return!1;if(j){var A;if(f.length>0&&(A=f[0]),A instanceof Error)throw A;var U=new Error("Unhandled error."+(A?" ("+A.message+")":""));throw U.context=A,U}var K=$[h];if(K===void 0)return!1;if(typeof K=="function")e(K,this,f);else for(var be=K.length,Ce=N(K,be),w=0;w<be;++w)e(Ce[w],this,f);return!0};function l(x,h,f,w){var j,$,A;if(c(f),$=x._events,$===void 0?($=x._events=Object.create(null),x._eventsCount=0):($.newListener!==void 0&&(x.emit("newListener",h,f.listener?f.listener:f),$=x._events),A=$[h]),A===void 0)A=$[h]=f,++x._eventsCount;else if(typeof A=="function"?A=$[h]=w?[f,A]:[A,f]:w?A.unshift(f):A.push(f),j=u(x),j>0&&A.length>j&&!A.warned){A.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+A.length+" "+String(h)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=x,U.type=h,U.count=A.length,r(U)}return x}i.prototype.addListener=function(h,f){return l(this,h,f,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(h,f){return l(this,h,f,!0)};function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function g(x,h,f){var w={fired:!1,wrapFn:void 0,target:x,type:h,listener:f},j=p.bind(w);return j.listener=f,w.wrapFn=j,j}i.prototype.once=function(h,f){return c(f),this.on(h,g(this,h,f)),this},i.prototype.prependOnceListener=function(h,f){return c(f),this.prependListener(h,g(this,h,f)),this},i.prototype.removeListener=function(h,f){var w,j,$,A,U;if(c(f),j=this._events,j===void 0)return this;if(w=j[h],w===void 0)return this;if(w===f||w.listener===f)--this._eventsCount===0?this._events=Object.create(null):(delete j[h],j.removeListener&&this.emit("removeListener",h,w.listener||f));else if(typeof w!="function"){for($=-1,A=w.length-1;A>=0;A--)if(w[A]===f||w[A].listener===f){U=w[A].listener,$=A;break}if($<0)return this;$===0?w.shift():S(w,$),w.length===1&&(j[h]=w[0]),j.removeListener!==void 0&&this.emit("removeListener",h,U||f)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(h){var f,w,j;if(w=this._events,w===void 0)return this;if(w.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):w[h]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete w[h]),this;if(arguments.length===0){var $=Object.keys(w),A;for(j=0;j<$.length;++j)A=$[j],A!=="removeListener"&&this.removeAllListeners(A);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(f=w[h],typeof f=="function")this.removeListener(h,f);else if(f!==void 0)for(j=f.length-1;j>=0;j--)this.removeListener(h,f[j]);return this};function m(x,h,f){var w=x._events;if(w===void 0)return[];var j=w[h];return j===void 0?[]:typeof j=="function"?f?[j.listener||j]:[j]:f?k(j):N(j,j.length)}i.prototype.listeners=function(h){return m(this,h,!0)},i.prototype.rawListeners=function(h){return m(this,h,!1)},i.listenerCount=function(x,h){return typeof x.listenerCount=="function"?x.listenerCount(h):b.call(x,h)},i.prototype.listenerCount=b;function b(x){var h=this._events;if(h!==void 0){var f=h[x];if(typeof f=="function")return 1;if(f!==void 0)return f.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]};function N(x,h){for(var f=new Array(h),w=0;w<h;++w)f[w]=x[w];return f}function S(x,h){for(;h+1<x.length;h++)x[h]=x[h+1];x.pop()}function k(x){for(var h=new Array(x.length),f=0;f<h.length;++f)h[f]=x[f].listener||x[f];return h}function D(x,h){return new Promise(function(f,w){function j(A){x.removeListener(h,$),w(A)}function $(){typeof x.removeListener=="function"&&x.removeListener("error",j),f([].slice.call(arguments))}I(x,h,$,{once:!0}),h!=="error"&&C(x,j,{once:!0})})}function C(x,h,f){typeof x.on=="function"&&I(x,"error",h,f)}function I(x,h,f,w){if(typeof x.on=="function")w.once?x.once(h,f):x.on(h,f);else if(typeof x.addEventListener=="function")x.addEventListener(h,function j($){w.once&&x.removeEventListener(h,j),f($)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof x)}return We.exports}var $s=Gs();function Ds(){const a=arguments[0];for(let e=1,t=arguments.length;e<t;e++)if(arguments[e])for(const r in arguments[e])a[r]=arguments[e][r];return a}let F=Ds;typeof Object.assign=="function"&&(F=Object.assign);function te(a,e,t,r){const n=a._nodes.get(e);let i=null;return n&&(r==="mixed"?i=n.out&&n.out[t]||n.undirected&&n.undirected[t]:r==="directed"?i=n.out&&n.out[t]:i=n.undirected&&n.undirected[t]),i}function q(a){return typeof a=="object"&&a!==null}function rr(a){let e;for(e in a)return!1;return!0}function Z(a,e,t){Object.defineProperty(a,e,{enumerable:!1,configurable:!1,writable:!0,value:t})}function se(a,e,t){const r={enumerable:!0,configurable:!0};typeof t=="function"?r.get=t:(r.value=t,r.writable=!1),Object.defineProperty(a,e,r)}function Kt(a){return!(!q(a)||a.attributes&&!Array.isArray(a.attributes))}function Cs(){let a=Math.floor(Math.random()*256)&255;return()=>a++}function ne(){const a=arguments;let e=null,t=-1;return{[Symbol.iterator](){return this},next(){let r=null;do{if(e===null){if(t++,t>=a.length)return{done:!0};e=a[t][Symbol.iterator]()}if(r=e.next(),r.done){e=null;continue}break}while(!0);return r}}}function fe(){return{[Symbol.iterator](){return this},next(){return{done:!0}}}}class mt extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class E extends mt{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,E.prototype.constructor)}}class y extends mt{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,y.prototype.constructor)}}class _ extends mt{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,_.prototype.constructor)}}function sr(a,e){this.key=a,this.attributes=e,this.clear()}sr.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function nr(a,e){this.key=a,this.attributes=e,this.clear()}nr.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function ir(a,e){this.key=a,this.attributes=e,this.clear()}ir.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function xe(a,e,t,r,n){this.key=e,this.attributes=n,this.undirected=a,this.source=t,this.target=r}xe.prototype.attach=function(){let a="out",e="in";this.undirected&&(a=e="undirected");const t=this.source.key,r=this.target.key;this.source[a][r]=this,!(this.undirected&&t===r)&&(this.target[e][t]=this)};xe.prototype.attachMulti=function(){let a="out",e="in";const t=this.source.key,r=this.target.key;this.undirected&&(a=e="undirected");const n=this.source[a],i=n[r];if(typeof i>"u"){n[r]=this,this.undirected&&t===r||(this.target[e][t]=this);return}i.previous=this,this.next=i,n[r]=this,this.target[e][t]=this};xe.prototype.detach=function(){const a=this.source.key,e=this.target.key;let t="out",r="in";this.undirected&&(t=r="undirected"),delete this.source[t][e],delete this.target[r][a]};xe.prototype.detachMulti=function(){const a=this.source.key,e=this.target.key;let t="out",r="in";this.undirected&&(t=r="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[t][e],delete this.target[r][a]):(this.next.previous=void 0,this.source[t][e]=this.next,this.target[r][a]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const ar=0,or=1,Ls=2,dr=3;function ie(a,e,t,r,n,i,o){let c,u,l,p;if(r=""+r,t===ar){if(c=a._nodes.get(r),!c)throw new y(`Graph.${e}: could not find the "${r}" node in the graph.`);l=n,p=i}else if(t===dr){if(n=""+n,u=a._edges.get(n),!u)throw new y(`Graph.${e}: could not find the "${n}" edge in the graph.`);const g=u.source.key,m=u.target.key;if(r===g)c=u.target;else if(r===m)c=u.source;else throw new y(`Graph.${e}: the "${r}" node is not attached to the "${n}" edge (${g}, ${m}).`);l=i,p=o}else{if(u=a._edges.get(r),!u)throw new y(`Graph.${e}: could not find the "${r}" edge in the graph.`);t===or?c=u.source:c=u.target,l=n,p=i}return[c,l,p]}function Ts(a,e,t){a.prototype[e]=function(r,n,i){const[o,c]=ie(this,e,t,r,n,i);return o.attributes[c]}}function Os(a,e,t){a.prototype[e]=function(r,n){const[i]=ie(this,e,t,r,n);return i.attributes}}function Rs(a,e,t){a.prototype[e]=function(r,n,i){const[o,c]=ie(this,e,t,r,n,i);return o.attributes.hasOwnProperty(c)}}function Ms(a,e,t){a.prototype[e]=function(r,n,i,o){const[c,u,l]=ie(this,e,t,r,n,i,o);return c.attributes[u]=l,this.emit("nodeAttributesUpdated",{key:c.key,type:"set",attributes:c.attributes,name:u}),this}}function Is(a,e,t){a.prototype[e]=function(r,n,i,o){const[c,u,l]=ie(this,e,t,r,n,i,o);if(typeof l!="function")throw new E(`Graph.${e}: updater should be a function.`);const p=c.attributes,g=l(p[u]);return p[u]=g,this.emit("nodeAttributesUpdated",{key:c.key,type:"set",attributes:c.attributes,name:u}),this}}function Ps(a,e,t){a.prototype[e]=function(r,n,i){const[o,c]=ie(this,e,t,r,n,i);return delete o.attributes[c],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:c}),this}}function Us(a,e,t){a.prototype[e]=function(r,n,i){const[o,c]=ie(this,e,t,r,n,i);if(!q(c))throw new E(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=c,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function Ws(a,e,t){a.prototype[e]=function(r,n,i){const[o,c]=ie(this,e,t,r,n,i);if(!q(c))throw new E(`Graph.${e}: provided attributes are not a plain object.`);return F(o.attributes,c),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:c}),this}}function zs(a,e,t){a.prototype[e]=function(r,n,i){const[o,c]=ie(this,e,t,r,n,i);if(typeof c!="function")throw new E(`Graph.${e}: provided updater is not a function.`);return o.attributes=c(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const Fs=[{name:a=>`get${a}Attribute`,attacher:Ts},{name:a=>`get${a}Attributes`,attacher:Os},{name:a=>`has${a}Attribute`,attacher:Rs},{name:a=>`set${a}Attribute`,attacher:Ms},{name:a=>`update${a}Attribute`,attacher:Is},{name:a=>`remove${a}Attribute`,attacher:Ps},{name:a=>`replace${a}Attributes`,attacher:Us},{name:a=>`merge${a}Attributes`,attacher:Ws},{name:a=>`update${a}Attributes`,attacher:zs}];function Bs(a){Fs.forEach(function({name:e,attacher:t}){t(a,e("Node"),ar),t(a,e("Source"),or),t(a,e("Target"),Ls),t(a,e("Opposite"),dr)})}function Ks(a,e,t){a.prototype[e]=function(r,n){let i;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new _(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new _(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,c=""+n;if(n=arguments[2],i=te(this,o,c,t),!i)throw new y(`Graph.${e}: could not find an edge for the given path ("${o}" - "${c}").`)}else{if(t!=="mixed")throw new _(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new y(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return i.attributes[n]}}function qs(a,e,t){a.prototype[e]=function(r){let n;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new _(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new _(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const i=""+r,o=""+arguments[1];if(n=te(this,i,o,t),!n)throw new y(`Graph.${e}: could not find an edge for the given path ("${i}" - "${o}").`)}else{if(t!=="mixed")throw new _(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,n=this._edges.get(r),!n)throw new y(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return n.attributes}}function Vs(a,e,t){a.prototype[e]=function(r,n){let i;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new _(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new _(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,c=""+n;if(n=arguments[2],i=te(this,o,c,t),!i)throw new y(`Graph.${e}: could not find an edge for the given path ("${o}" - "${c}").`)}else{if(t!=="mixed")throw new _(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new y(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return i.attributes.hasOwnProperty(n)}}function Hs(a,e,t){a.prototype[e]=function(r,n,i){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new _(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new _(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const c=""+r,u=""+n;if(n=arguments[2],i=arguments[3],o=te(this,c,u,t),!o)throw new y(`Graph.${e}: could not find an edge for the given path ("${c}" - "${u}").`)}else{if(t!=="mixed")throw new _(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new y(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return o.attributes[n]=i,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:n}),this}}function Js(a,e,t){a.prototype[e]=function(r,n,i){let o;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new _(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new _(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const c=""+r,u=""+n;if(n=arguments[2],i=arguments[3],o=te(this,c,u,t),!o)throw new y(`Graph.${e}: could not find an edge for the given path ("${c}" - "${u}").`)}else{if(t!=="mixed")throw new _(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,o=this._edges.get(r),!o)throw new y(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof i!="function")throw new E(`Graph.${e}: updater should be a function.`);return o.attributes[n]=i(o.attributes[n]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:n}),this}}function Qs(a,e,t){a.prototype[e]=function(r,n){let i;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new _(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new _(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,c=""+n;if(n=arguments[2],i=te(this,o,c,t),!i)throw new y(`Graph.${e}: could not find an edge for the given path ("${o}" - "${c}").`)}else{if(t!=="mixed")throw new _(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new y(`Graph.${e}: could not find the "${r}" edge in the graph.`)}return delete i.attributes[n],this.emit("edgeAttributesUpdated",{key:i.key,type:"remove",attributes:i.attributes,name:n}),this}}function Ys(a,e,t){a.prototype[e]=function(r,n){let i;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new _(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new _(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,c=""+n;if(n=arguments[2],i=te(this,o,c,t),!i)throw new y(`Graph.${e}: could not find an edge for the given path ("${o}" - "${c}").`)}else{if(t!=="mixed")throw new _(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new y(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!q(n))throw new E(`Graph.${e}: provided attributes are not a plain object.`);return i.attributes=n,this.emit("edgeAttributesUpdated",{key:i.key,type:"replace",attributes:i.attributes}),this}}function Xs(a,e,t){a.prototype[e]=function(r,n){let i;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new _(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new _(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,c=""+n;if(n=arguments[2],i=te(this,o,c,t),!i)throw new y(`Graph.${e}: could not find an edge for the given path ("${o}" - "${c}").`)}else{if(t!=="mixed")throw new _(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new y(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(!q(n))throw new E(`Graph.${e}: provided attributes are not a plain object.`);return F(i.attributes,n),this.emit("edgeAttributesUpdated",{key:i.key,type:"merge",attributes:i.attributes,data:n}),this}}function Zs(a,e,t){a.prototype[e]=function(r,n){let i;if(this.type!=="mixed"&&t!=="mixed"&&t!==this.type)throw new _(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new _(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+r,c=""+n;if(n=arguments[2],i=te(this,o,c,t),!i)throw new y(`Graph.${e}: could not find an edge for the given path ("${o}" - "${c}").`)}else{if(t!=="mixed")throw new _(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(r=""+r,i=this._edges.get(r),!i)throw new y(`Graph.${e}: could not find the "${r}" edge in the graph.`)}if(typeof n!="function")throw new E(`Graph.${e}: provided updater is not a function.`);return i.attributes=n(i.attributes),this.emit("edgeAttributesUpdated",{key:i.key,type:"update",attributes:i.attributes}),this}}const en=[{name:a=>`get${a}Attribute`,attacher:Ks},{name:a=>`get${a}Attributes`,attacher:qs},{name:a=>`has${a}Attribute`,attacher:Vs},{name:a=>`set${a}Attribute`,attacher:Hs},{name:a=>`update${a}Attribute`,attacher:Js},{name:a=>`remove${a}Attribute`,attacher:Qs},{name:a=>`replace${a}Attributes`,attacher:Ys},{name:a=>`merge${a}Attributes`,attacher:Xs},{name:a=>`update${a}Attributes`,attacher:Zs}];function tn(a){en.forEach(function({name:e,attacher:t}){t(a,e("Edge"),"mixed"),t(a,e("DirectedEdge"),"directed"),t(a,e("UndirectedEdge"),"undirected")})}const rn=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function sn(a,e,t,r){let n=!1;for(const i in e){if(i===r)continue;const o=e[i];if(n=t(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),a&&n)return o.key}}function nn(a,e,t,r){let n,i,o,c=!1;for(const u in e)if(u!==r){n=e[u];do{if(i=n.source,o=n.target,c=t(n.key,n.attributes,i.key,o.key,i.attributes,o.attributes,n.undirected),a&&c)return n.key;n=n.next}while(n!==void 0)}}function ot(a,e){const t=Object.keys(a),r=t.length;let n,i=0;return{[Symbol.iterator](){return this},next(){do if(n)n=n.next;else{if(i>=r)return{done:!0};const o=t[i++];if(o===e){n=void 0;continue}n=a[o]}while(!n);return{done:!1,value:{edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected}}}}}function an(a,e,t,r){const n=e[t];if(!n)return;const i=n.source,o=n.target;if(r(n.key,n.attributes,i.key,o.key,i.attributes,o.attributes,n.undirected)&&a)return n.key}function on(a,e,t,r){let n=e[t];if(!n)return;let i=!1;do{if(i=r(n.key,n.attributes,n.source.key,n.target.key,n.source.attributes,n.target.attributes,n.undirected),a&&i)return n.key;n=n.next}while(n!==void 0)}function dt(a,e){let t=a[e];if(t.next!==void 0)return{[Symbol.iterator](){return this},next(){if(!t)return{done:!0};const n={edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected};return t=t.next,{done:!1,value:n}}};let r=!1;return{[Symbol.iterator](){return this},next(){return r===!0?{done:!0}:(r=!0,{done:!1,value:{edge:t.key,attributes:t.attributes,source:t.source.key,target:t.target.key,sourceAttributes:t.source.attributes,targetAttributes:t.target.attributes,undirected:t.undirected}})}}}function dn(a,e){if(a.size===0)return[];if(e==="mixed"||e===a.type)return Array.from(a._edges.keys());const t=e==="undirected"?a.undirectedSize:a.directedSize,r=new Array(t),n=e==="undirected",i=a._edges.values();let o=0,c,u;for(;c=i.next(),c.done!==!0;)u=c.value,u.undirected===n&&(r[o++]=u.key);return r}function cr(a,e,t,r){if(e.size===0)return;const n=t!=="mixed"&&t!==e.type,i=t==="undirected";let o,c,u=!1;const l=e._edges.values();for(;o=l.next(),o.done!==!0;){if(c=o.value,n&&c.undirected!==i)continue;const{key:p,attributes:g,source:m,target:b}=c;if(u=r(p,g,m.key,b.key,m.attributes,b.attributes,c.undirected),a&&u)return p}}function cn(a,e){if(a.size===0)return fe();const t=e!=="mixed"&&e!==a.type,r=e==="undirected",n=a._edges.values();return{[Symbol.iterator](){return this},next(){let i,o;for(;;){if(i=n.next(),i.done)return i;if(o=i.value,!(t&&o.undirected!==r))break}return{value:{edge:o.key,attributes:o.attributes,source:o.source.key,target:o.target.key,sourceAttributes:o.source.attributes,targetAttributes:o.target.attributes,undirected:o.undirected},done:!1}}}}function ft(a,e,t,r,n,i){const o=e?nn:sn;let c;if(t!=="undirected"&&(r!=="out"&&(c=o(a,n.in,i),a&&c)||r!=="in"&&(c=o(a,n.out,i,r?void 0:n.key),a&&c))||t!=="directed"&&(c=o(a,n.undirected,i),a&&c))return c}function ln(a,e,t,r){const n=[];return ft(!1,a,e,t,r,function(i){n.push(i)}),n}function un(a,e,t){let r=fe();return a!=="undirected"&&(e!=="out"&&typeof t.in<"u"&&(r=ne(r,ot(t.in))),e!=="in"&&typeof t.out<"u"&&(r=ne(r,ot(t.out,e?void 0:t.key)))),a!=="directed"&&typeof t.undirected<"u"&&(r=ne(r,ot(t.undirected))),r}function xt(a,e,t,r,n,i,o){const c=t?on:an;let u;if(e!=="undirected"&&(typeof n.in<"u"&&r!=="out"&&(u=c(a,n.in,i,o),a&&u)||typeof n.out<"u"&&r!=="in"&&(r||n.key!==i)&&(u=c(a,n.out,i,o),a&&u))||e!=="directed"&&typeof n.undirected<"u"&&(u=c(a,n.undirected,i,o),a&&u))return u}function hn(a,e,t,r,n){const i=[];return xt(!1,a,e,t,r,n,function(o){i.push(o)}),i}function pn(a,e,t,r){let n=fe();return a!=="undirected"&&(typeof t.in<"u"&&e!=="out"&&r in t.in&&(n=ne(n,dt(t.in,r))),typeof t.out<"u"&&e!=="in"&&r in t.out&&(e||t.key!==r)&&(n=ne(n,dt(t.out,r)))),a!=="directed"&&typeof t.undirected<"u"&&r in t.undirected&&(n=ne(n,dt(t.undirected,r))),n}function gn(a,e){const{name:t,type:r,direction:n}=e;a.prototype[t]=function(i,o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];if(!arguments.length)return dn(this,r);if(arguments.length===1){i=""+i;const c=this._nodes.get(i);if(typeof c>"u")throw new y(`Graph.${t}: could not find the "${i}" node in the graph.`);return ln(this.multi,r==="mixed"?this.type:r,n,c)}if(arguments.length===2){i=""+i,o=""+o;const c=this._nodes.get(i);if(!c)throw new y(`Graph.${t}:  could not find the "${i}" source node in the graph.`);if(!this._nodes.has(o))throw new y(`Graph.${t}:  could not find the "${o}" target node in the graph.`);return hn(r,this.multi,n,c,o)}throw new E(`Graph.${t}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function mn(a,e){const{name:t,type:r,direction:n}=e,i="forEach"+t[0].toUpperCase()+t.slice(1,-1);a.prototype[i]=function(l,p,g){if(!(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)){if(arguments.length===1)return g=l,cr(!1,this,r,g);if(arguments.length===2){l=""+l,g=p;const m=this._nodes.get(l);if(typeof m>"u")throw new y(`Graph.${i}: could not find the "${l}" node in the graph.`);return ft(!1,this.multi,r==="mixed"?this.type:r,n,m,g)}if(arguments.length===3){l=""+l,p=""+p;const m=this._nodes.get(l);if(!m)throw new y(`Graph.${i}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(p))throw new y(`Graph.${i}:  could not find the "${p}" target node in the graph.`);return xt(!1,r,this.multi,n,m,p,g)}throw new E(`Graph.${i}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+t[0].toUpperCase()+t.slice(1);a.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),p=l.pop();let g;if(l.length===0){let m=0;r!=="directed"&&(m+=this.undirectedSize),r!=="undirected"&&(m+=this.directedSize),g=new Array(m);let b=0;l.push((N,S,k,D,C,I,x)=>{g[b++]=p(N,S,k,D,C,I,x)})}else g=[],l.push((m,b,N,S,k,D,C)=>{g.push(p(m,b,N,S,k,D,C))});return this[i].apply(this,l),g};const c="filter"+t[0].toUpperCase()+t.slice(1);a.prototype[c]=function(){const l=Array.prototype.slice.call(arguments),p=l.pop(),g=[];return l.push((m,b,N,S,k,D,C)=>{p(m,b,N,S,k,D,C)&&g.push(m)}),this[i].apply(this,l),g};const u="reduce"+t[0].toUpperCase()+t.slice(1);a.prototype[u]=function(){let l=Array.prototype.slice.call(arguments);if(l.length<2||l.length>4)throw new E(`Graph.${u}: invalid number of arguments (expecting 2, 3 or 4 and got ${l.length}).`);if(typeof l[l.length-1]=="function"&&typeof l[l.length-2]!="function")throw new E(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let p,g;l.length===2?(p=l[0],g=l[1],l=[]):l.length===3?(p=l[1],g=l[2],l=[l[0]]):l.length===4&&(p=l[2],g=l[3],l=[l[0],l[1]]);let m=g;return l.push((b,N,S,k,D,C,I)=>{m=p(m,b,N,S,k,D,C,I)}),this[i].apply(this,l),m}}function fn(a,e){const{name:t,type:r,direction:n}=e,i="find"+t[0].toUpperCase()+t.slice(1,-1);a.prototype[i]=function(u,l,p){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return!1;if(arguments.length===1)return p=u,cr(!0,this,r,p);if(arguments.length===2){u=""+u,p=l;const g=this._nodes.get(u);if(typeof g>"u")throw new y(`Graph.${i}: could not find the "${u}" node in the graph.`);return ft(!0,this.multi,r==="mixed"?this.type:r,n,g,p)}if(arguments.length===3){u=""+u,l=""+l;const g=this._nodes.get(u);if(!g)throw new y(`Graph.${i}:  could not find the "${u}" source node in the graph.`);if(!this._nodes.has(l))throw new y(`Graph.${i}:  could not find the "${l}" target node in the graph.`);return xt(!0,r,this.multi,n,g,l,p)}throw new E(`Graph.${i}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+t[0].toUpperCase()+t.slice(1,-1);a.prototype[o]=function(){const u=Array.prototype.slice.call(arguments),l=u.pop();return u.push((g,m,b,N,S,k,D)=>l(g,m,b,N,S,k,D)),!!this[i].apply(this,u)};const c="every"+t[0].toUpperCase()+t.slice(1,-1);a.prototype[c]=function(){const u=Array.prototype.slice.call(arguments),l=u.pop();return u.push((g,m,b,N,S,k,D)=>!l(g,m,b,N,S,k,D)),!this[i].apply(this,u)}}function xn(a,e){const{name:t,type:r,direction:n}=e,i=t.slice(0,-1)+"Entries";a.prototype[i]=function(o,c){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return fe();if(!arguments.length)return cn(this,r);if(arguments.length===1){o=""+o;const u=this._nodes.get(o);if(!u)throw new y(`Graph.${i}: could not find the "${o}" node in the graph.`);return un(r,n,u)}if(arguments.length===2){o=""+o,c=""+c;const u=this._nodes.get(o);if(!u)throw new y(`Graph.${i}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(c))throw new y(`Graph.${i}:  could not find the "${c}" target node in the graph.`);return pn(r,n,u,c)}throw new E(`Graph.${i}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function yn(a){rn.forEach(e=>{gn(a,e),mn(a,e),fn(a,e),xn(a,e)})}const bn=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Ke(){this.A=null,this.B=null}Ke.prototype.wrap=function(a){this.A===null?this.A=a:this.B===null&&(this.B=a)};Ke.prototype.has=function(a){return this.A!==null&&a in this.A||this.B!==null&&a in this.B};function Ae(a,e,t,r,n){for(const i in r){const o=r[i],c=o.source,u=o.target,l=c===t?u:c;if(e&&e.has(l.key))continue;const p=n(l.key,l.attributes);if(a&&p)return l.key}}function yt(a,e,t,r,n){if(e!=="mixed"){if(e==="undirected")return Ae(a,null,r,r.undirected,n);if(typeof t=="string")return Ae(a,null,r,r[t],n)}const i=new Ke;let o;if(e!=="undirected"){if(t!=="out"){if(o=Ae(a,null,r,r.in,n),a&&o)return o;i.wrap(r.in)}if(t!=="in"){if(o=Ae(a,i,r,r.out,n),a&&o)return o;i.wrap(r.out)}}if(e!=="directed"&&(o=Ae(a,i,r,r.undirected,n),a&&o))return o}function wn(a,e,t){if(a!=="mixed"){if(a==="undirected")return Object.keys(t.undirected);if(typeof e=="string")return Object.keys(t[e])}const r=[];return yt(!1,a,e,t,function(n){r.push(n)}),r}function Ge(a,e,t){const r=Object.keys(t),n=r.length;let i=0;return{[Symbol.iterator](){return this},next(){let o=null;do{if(i>=n)return a&&a.wrap(t),{done:!0};const c=t[r[i++]],u=c.source,l=c.target;if(o=u===e?l:u,a&&a.has(o.key)){o=null;continue}}while(o===null);return{done:!1,value:{neighbor:o.key,attributes:o.attributes}}}}}function vn(a,e,t){if(a!=="mixed"){if(a==="undirected")return Ge(null,t,t.undirected);if(typeof e=="string")return Ge(null,t,t[e])}let r=fe();const n=new Ke;return a!=="undirected"&&(e!=="out"&&(r=ne(r,Ge(n,t,t.in))),e!=="in"&&(r=ne(r,Ge(n,t,t.out)))),a!=="directed"&&(r=ne(r,Ge(n,t,t.undirected))),r}function Nn(a,e){const{name:t,type:r,direction:n}=e;a.prototype[t]=function(i){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return[];i=""+i;const o=this._nodes.get(i);if(typeof o>"u")throw new y(`Graph.${t}: could not find the "${i}" node in the graph.`);return wn(r==="mixed"?this.type:r,n,o)}}function jn(a,e){const{name:t,type:r,direction:n}=e,i="forEach"+t[0].toUpperCase()+t.slice(1,-1);a.prototype[i]=function(l,p){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;l=""+l;const g=this._nodes.get(l);if(typeof g>"u")throw new y(`Graph.${i}: could not find the "${l}" node in the graph.`);yt(!1,r==="mixed"?this.type:r,n,g,p)};const o="map"+t[0].toUpperCase()+t.slice(1);a.prototype[o]=function(l,p){const g=[];return this[i](l,(m,b)=>{g.push(p(m,b))}),g};const c="filter"+t[0].toUpperCase()+t.slice(1);a.prototype[c]=function(l,p){const g=[];return this[i](l,(m,b)=>{p(m,b)&&g.push(m)}),g};const u="reduce"+t[0].toUpperCase()+t.slice(1);a.prototype[u]=function(l,p,g){if(arguments.length<3)throw new E(`Graph.${u}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let m=g;return this[i](l,(b,N)=>{m=p(m,b,N)}),m}}function En(a,e){const{name:t,type:r,direction:n}=e,i=t[0].toUpperCase()+t.slice(1,-1),o="find"+i;a.prototype[o]=function(l,p){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return;l=""+l;const g=this._nodes.get(l);if(typeof g>"u")throw new y(`Graph.${o}: could not find the "${l}" node in the graph.`);return yt(!0,r==="mixed"?this.type:r,n,g,p)};const c="some"+i;a.prototype[c]=function(l,p){return!!this[o](l,p)};const u="every"+i;a.prototype[u]=function(l,p){return!this[o](l,(m,b)=>!p(m,b))}}function kn(a,e){const{name:t,type:r,direction:n}=e,i=t.slice(0,-1)+"Entries";a.prototype[i]=function(o){if(r!=="mixed"&&this.type!=="mixed"&&r!==this.type)return fe();o=""+o;const c=this._nodes.get(o);if(typeof c>"u")throw new y(`Graph.${i}: could not find the "${o}" node in the graph.`);return vn(r==="mixed"?this.type:r,n,c)}}function Sn(a){bn.forEach(e=>{Nn(a,e),jn(a,e),En(a,e),kn(a,e)})}function ze(a,e,t,r,n){const i=r._nodes.values(),o=r.type;let c,u,l,p,g,m;for(;c=i.next(),c.done!==!0;){let b=!1;if(u=c.value,o!=="undirected"){p=u.out;for(l in p){g=p[l];do m=g.target,b=!0,n(u.key,m.key,u.attributes,m.attributes,g.key,g.attributes,g.undirected),g=g.next;while(g)}}if(o!=="directed"){p=u.undirected;for(l in p)if(!(e&&u.key>l)){g=p[l];do m=g.target,m.key!==l&&(m=g.source),b=!0,n(u.key,m.key,u.attributes,m.attributes,g.key,g.attributes,g.undirected),g=g.next;while(g)}}t&&!b&&n(u.key,null,u.attributes,null,null,null,null)}}function _n(a,e){const t={key:a};return rr(e.attributes)||(t.attributes=F({},e.attributes)),t}function An(a,e,t){const r={key:e,source:t.source.key,target:t.target.key};return rr(t.attributes)||(r.attributes=F({},t.attributes)),a==="mixed"&&t.undirected&&(r.undirected=!0),r}function Gn(a){if(!q(a))throw new E('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in a))throw new E("Graph.import: serialized node is missing its key.");if("attributes"in a&&(!q(a.attributes)||a.attributes===null))throw new E("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function $n(a){if(!q(a))throw new E('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in a))throw new E("Graph.import: serialized edge is missing its source.");if(!("target"in a))throw new E("Graph.import: serialized edge is missing its target.");if("attributes"in a&&(!q(a.attributes)||a.attributes===null))throw new E("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in a&&typeof a.undirected!="boolean")throw new E("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Dn=Cs(),Cn=new Set(["directed","undirected","mixed"]),qt=new Set(["domain","_events","_eventsCount","_maxListeners"]),Ln=[{name:a=>`${a}Edge`,generateKey:!0},{name:a=>`${a}DirectedEdge`,generateKey:!0,type:"directed"},{name:a=>`${a}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:a=>`${a}EdgeWithKey`},{name:a=>`${a}DirectedEdgeWithKey`,type:"directed"},{name:a=>`${a}UndirectedEdgeWithKey`,type:"undirected"}],Tn={allowSelfLoops:!0,multi:!1,type:"mixed"};function On(a,e,t){if(t&&!q(t))throw new E(`Graph.addNode: invalid attributes. Expecting an object but got "${t}"`);if(e=""+e,t=t||{},a._nodes.has(e))throw new _(`Graph.addNode: the "${e}" node already exist in the graph.`);const r=new a.NodeDataClass(e,t);return a._nodes.set(e,r),a.emit("nodeAdded",{key:e,attributes:t}),r}function Vt(a,e,t){const r=new a.NodeDataClass(e,t);return a._nodes.set(e,r),a.emit("nodeAdded",{key:e,attributes:t}),r}function lr(a,e,t,r,n,i,o,c){if(!r&&a.type==="undirected")throw new _(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(r&&a.type==="directed")throw new _(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(c&&!q(c))throw new E(`Graph.${e}: invalid attributes. Expecting an object but got "${c}"`);if(i=""+i,o=""+o,c=c||{},!a.allowSelfLoops&&i===o)throw new _(`Graph.${e}: source & target are the same ("${i}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const u=a._nodes.get(i),l=a._nodes.get(o);if(!u)throw new y(`Graph.${e}: source node "${i}" not found.`);if(!l)throw new y(`Graph.${e}: target node "${o}" not found.`);const p={key:null,undirected:r,source:i,target:o,attributes:c};if(t)n=a._edgeKeyGenerator();else if(n=""+n,a._edges.has(n))throw new _(`Graph.${e}: the "${n}" edge already exists in the graph.`);if(!a.multi&&(r?typeof u.undirected[o]<"u":typeof u.out[o]<"u"))throw new _(`Graph.${e}: an edge linking "${i}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const g=new xe(r,n,u,l,c);a._edges.set(n,g);const m=i===o;return r?(u.undirectedDegree++,l.undirectedDegree++,m&&(u.undirectedLoops++,a._undirectedSelfLoopCount++)):(u.outDegree++,l.inDegree++,m&&(u.directedLoops++,a._directedSelfLoopCount++)),a.multi?g.attachMulti():g.attach(),r?a._undirectedSize++:a._directedSize++,p.key=n,a.emit("edgeAdded",p),n}function Rn(a,e,t,r,n,i,o,c,u){if(!r&&a.type==="undirected")throw new _(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(r&&a.type==="directed")throw new _(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(c){if(u){if(typeof c!="function")throw new E(`Graph.${e}: invalid updater function. Expecting a function but got "${c}"`)}else if(!q(c))throw new E(`Graph.${e}: invalid attributes. Expecting an object but got "${c}"`)}i=""+i,o=""+o;let l;if(u&&(l=c,c=void 0),!a.allowSelfLoops&&i===o)throw new _(`Graph.${e}: source & target are the same ("${i}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let p=a._nodes.get(i),g=a._nodes.get(o),m,b;if(!t&&(m=a._edges.get(n),m)){if((m.source.key!==i||m.target.key!==o)&&(!r||m.source.key!==o||m.target.key!==i))throw new _(`Graph.${e}: inconsistency detected when attempting to merge the "${n}" edge with "${i}" source & "${o}" target vs. ("${m.source.key}", "${m.target.key}").`);b=m}if(!b&&!a.multi&&p&&(b=r?p.undirected[o]:p.out[o]),b){const C=[b.key,!1,!1,!1];if(u?!l:!c)return C;if(u){const I=b.attributes;b.attributes=l(I),a.emit("edgeAttributesUpdated",{type:"replace",key:b.key,attributes:b.attributes})}else F(b.attributes,c),a.emit("edgeAttributesUpdated",{type:"merge",key:b.key,attributes:b.attributes,data:c});return C}c=c||{},u&&l&&(c=l(c));const N={key:null,undirected:r,source:i,target:o,attributes:c};if(t)n=a._edgeKeyGenerator();else if(n=""+n,a._edges.has(n))throw new _(`Graph.${e}: the "${n}" edge already exists in the graph.`);let S=!1,k=!1;p||(p=Vt(a,i,{}),S=!0,i===o&&(g=p,k=!0)),g||(g=Vt(a,o,{}),k=!0),m=new xe(r,n,p,g,c),a._edges.set(n,m);const D=i===o;return r?(p.undirectedDegree++,g.undirectedDegree++,D&&(p.undirectedLoops++,a._undirectedSelfLoopCount++)):(p.outDegree++,g.inDegree++,D&&(p.directedLoops++,a._directedSelfLoopCount++)),a.multi?m.attachMulti():m.attach(),r?a._undirectedSize++:a._directedSize++,N.key=n,a.emit("edgeAdded",N),[n,!0,S,k]}function me(a,e){a._edges.delete(e.key);const{source:t,target:r,attributes:n}=e,i=e.undirected,o=t===r;i?(t.undirectedDegree--,r.undirectedDegree--,o&&(t.undirectedLoops--,a._undirectedSelfLoopCount--)):(t.outDegree--,r.inDegree--,o&&(t.directedLoops--,a._directedSelfLoopCount--)),a.multi?e.detachMulti():e.detach(),i?a._undirectedSize--:a._directedSize--,a.emit("edgeDropped",{key:e.key,attributes:n,source:t.key,target:r.key,undirected:i})}class M extends $s.EventEmitter{constructor(e){if(super(),e=F({},Tn,e),typeof e.multi!="boolean")throw new E(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!Cn.has(e.type))throw new E(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new E(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const t=e.type==="mixed"?sr:e.type==="directed"?nr:ir;Z(this,"NodeDataClass",t);const r="geid_"+Dn()+"_";let n=0;const i=()=>{let o;do o=r+n++;while(this._edges.has(o));return o};Z(this,"_attributes",{}),Z(this,"_nodes",new Map),Z(this,"_edges",new Map),Z(this,"_directedSize",0),Z(this,"_undirectedSize",0),Z(this,"_directedSelfLoopCount",0),Z(this,"_undirectedSelfLoopCount",0),Z(this,"_edgeKeyGenerator",i),Z(this,"_options",e),qt.forEach(o=>Z(this,o,this[o])),se(this,"order",()=>this._nodes.size),se(this,"size",()=>this._edges.size),se(this,"directedSize",()=>this._directedSize),se(this,"undirectedSize",()=>this._undirectedSize),se(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),se(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),se(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),se(this,"multi",this._options.multi),se(this,"type",this._options.type),se(this,"allowSelfLoops",this._options.allowSelfLoops),se(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,t){if(this.type==="undirected")return!1;if(arguments.length===1){const r=""+e,n=this._edges.get(r);return!!n&&!n.undirected}else if(arguments.length===2){e=""+e,t=""+t;const r=this._nodes.get(e);return r?r.out.hasOwnProperty(t):!1}throw new E(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,t){if(this.type==="directed")return!1;if(arguments.length===1){const r=""+e,n=this._edges.get(r);return!!n&&n.undirected}else if(arguments.length===2){e=""+e,t=""+t;const r=this._nodes.get(e);return r?r.undirected.hasOwnProperty(t):!1}throw new E(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,t){if(arguments.length===1){const r=""+e;return this._edges.has(r)}else if(arguments.length===2){e=""+e,t=""+t;const r=this._nodes.get(e);return r?typeof r.out<"u"&&r.out.hasOwnProperty(t)||typeof r.undirected<"u"&&r.undirected.hasOwnProperty(t):!1}throw new E(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,t){if(this.type==="undirected")return;if(e=""+e,t=""+t,this.multi)throw new _("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const r=this._nodes.get(e);if(!r)throw new y(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new y(`Graph.directedEdge: could not find the "${t}" target node in the graph.`);const n=r.out&&r.out[t]||void 0;if(n)return n.key}undirectedEdge(e,t){if(this.type==="directed")return;if(e=""+e,t=""+t,this.multi)throw new _("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const r=this._nodes.get(e);if(!r)throw new y(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new y(`Graph.undirectedEdge: could not find the "${t}" target node in the graph.`);const n=r.undirected&&r.undirected[t]||void 0;if(n)return n.key}edge(e,t){if(this.multi)throw new _("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new y(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(t))throw new y(`Graph.edge: could not find the "${t}" target node in the graph.`);const n=r.out&&r.out[t]||r.undirected&&r.undirected[t]||void 0;if(n)return n.key}areDirectedNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new y(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in r.in||t in r.out}areOutNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new y(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in r.out}areInNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new y(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:t in r.in}areUndirectedNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new y(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:t in r.undirected}areNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new y(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(t in r.in||t in r.out)||this.type!=="directed"&&t in r.undirected}areInboundNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new y(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in r.in||this.type!=="directed"&&t in r.undirected}areOutboundNeighbors(e,t){e=""+e,t=""+t;const r=this._nodes.get(e);if(!r)throw new y(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&t in r.out||this.type!=="directed"&&t in r.undirected}inDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new y(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree}outDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new y(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree}directedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new y(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree}undirectedDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new y(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree}inboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new y(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=t.undirectedDegree),this.type!=="undirected"&&(r+=t.inDegree),r}outboundDegree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new y(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=t.undirectedDegree),this.type!=="undirected"&&(r+=t.outDegree),r}degree(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new y(`Graph.degree: could not find the "${e}" node in the graph.`);let r=0;return this.type!=="directed"&&(r+=t.undirectedDegree),this.type!=="undirected"&&(r+=t.inDegree+t.outDegree),r}inDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new y(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree-t.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new y(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.outDegree-t.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new y(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:t.inDegree+t.outDegree-t.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new y(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:t.undirectedDegree-t.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new y(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,n=0;return this.type!=="directed"&&(r+=t.undirectedDegree,n+=t.undirectedLoops*2),this.type!=="undirected"&&(r+=t.inDegree,n+=t.directedLoops),r-n}outboundDegreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new y(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,n=0;return this.type!=="directed"&&(r+=t.undirectedDegree,n+=t.undirectedLoops*2),this.type!=="undirected"&&(r+=t.outDegree,n+=t.directedLoops),r-n}degreeWithoutSelfLoops(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new y(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let r=0,n=0;return this.type!=="directed"&&(r+=t.undirectedDegree,n+=t.undirectedLoops*2),this.type!=="undirected"&&(r+=t.inDegree+t.outDegree,n+=t.directedLoops*2),r-n}source(e){e=""+e;const t=this._edges.get(e);if(!t)throw new y(`Graph.source: could not find the "${e}" edge in the graph.`);return t.source.key}target(e){e=""+e;const t=this._edges.get(e);if(!t)throw new y(`Graph.target: could not find the "${e}" edge in the graph.`);return t.target.key}extremities(e){e=""+e;const t=this._edges.get(e);if(!t)throw new y(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[t.source.key,t.target.key]}opposite(e,t){e=""+e,t=""+t;const r=this._edges.get(t);if(!r)throw new y(`Graph.opposite: could not find the "${t}" edge in the graph.`);const n=r.source.key,i=r.target.key;if(e===n)return i;if(e===i)return n;throw new y(`Graph.opposite: the "${e}" node is not attached to the "${t}" edge (${n}, ${i}).`)}hasExtremity(e,t){e=""+e,t=""+t;const r=this._edges.get(e);if(!r)throw new y(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return r.source.key===t||r.target.key===t}isUndirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new y(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return t.undirected}isDirected(e){e=""+e;const t=this._edges.get(e);if(!t)throw new y(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!t.undirected}isSelfLoop(e){e=""+e;const t=this._edges.get(e);if(!t)throw new y(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return t.source===t.target}addNode(e,t){return On(this,e,t).key}mergeNode(e,t){if(t&&!q(t))throw new E(`Graph.mergeNode: invalid attributes. Expecting an object but got "${t}"`);e=""+e,t=t||{};let r=this._nodes.get(e);return r?(t&&(F(r.attributes,t),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:r.attributes,data:t})),[e,!1]):(r=new this.NodeDataClass(e,t),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:t}),[e,!0])}updateNode(e,t){if(t&&typeof t!="function")throw new E(`Graph.updateNode: invalid updater function. Expecting a function but got "${t}"`);e=""+e;let r=this._nodes.get(e);if(r){if(t){const i=r.attributes;r.attributes=t(i),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:r.attributes})}return[e,!1]}const n=t?t({}):{};return r=new this.NodeDataClass(e,n),this._nodes.set(e,r),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0]}dropNode(e){e=""+e;const t=this._nodes.get(e);if(!t)throw new y(`Graph.dropNode: could not find the "${e}" node in the graph.`);let r;if(this.type!=="undirected"){for(const n in t.out){r=t.out[n];do me(this,r),r=r.next;while(r)}for(const n in t.in){r=t.in[n];do me(this,r),r=r.next;while(r)}}if(this.type!=="directed")for(const n in t.undirected){r=t.undirected[n];do me(this,r),r=r.next;while(r)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:t.attributes})}dropEdge(e){let t;if(arguments.length>1){const r=""+arguments[0],n=""+arguments[1];if(t=te(this,r,n,this.type),!t)throw new y(`Graph.dropEdge: could not find the "${r}" -> "${n}" edge in the graph.`)}else if(e=""+e,t=this._edges.get(e),!t)throw new y(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return me(this,t),this}dropDirectedEdge(e,t){if(arguments.length<2)throw new _("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new _("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,t=""+t;const r=te(this,e,t,"directed");if(!r)throw new y(`Graph.dropDirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return me(this,r),this}dropUndirectedEdge(e,t){if(arguments.length<2)throw new _("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new _("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const r=te(this,e,t,"undirected");if(!r)throw new y(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${t}" edge in the graph.`);return me(this,r),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let t;for(;t=e.next(),t.done!==!0;)t.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,t){return this._attributes[e]=t,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,t){if(typeof t!="function")throw new E("Graph.updateAttribute: updater should be a function.");const r=this._attributes[e];return this._attributes[e]=t(r),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!q(e))throw new E("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!q(e))throw new E("Graph.mergeAttributes: provided attributes are not a plain object.");return F(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new E("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,t){if(typeof e!="function")throw new E("Graph.updateEachNodeAttributes: expecting an updater function.");if(t&&!Kt(t))throw new E("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._nodes.values();let n,i;for(;n=r.next(),n.done!==!0;)i=n.value,i.attributes=e(i.key,i.attributes);this.emit("eachNodeAttributesUpdated",{hints:t||null})}updateEachEdgeAttributes(e,t){if(typeof e!="function")throw new E("Graph.updateEachEdgeAttributes: expecting an updater function.");if(t&&!Kt(t))throw new E("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const r=this._edges.values();let n,i,o,c;for(;n=r.next(),n.done!==!0;)i=n.value,o=i.source,c=i.target,i.attributes=e(i.key,i.attributes,o.key,c.key,o.attributes,c.attributes,i.undirected);this.emit("eachEdgeAttributesUpdated",{hints:t||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new E("Graph.forEachAdjacencyEntry: expecting a callback.");ze(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new E("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");ze(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new E("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");ze(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new E("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");ze(!1,!0,!0,this,e)}nodes(){return Array.from(this._nodes.keys())}forEachNode(e){if(typeof e!="function")throw new E("Graph.forEachNode: expecting a callback.");const t=this._nodes.values();let r,n;for(;r=t.next(),r.done!==!0;)n=r.value,e(n.key,n.attributes)}findNode(e){if(typeof e!="function")throw new E("Graph.findNode: expecting a callback.");const t=this._nodes.values();let r,n;for(;r=t.next(),r.done!==!0;)if(n=r.value,e(n.key,n.attributes))return n.key}mapNodes(e){if(typeof e!="function")throw new E("Graph.mapNode: expecting a callback.");const t=this._nodes.values();let r,n;const i=new Array(this.order);let o=0;for(;r=t.next(),r.done!==!0;)n=r.value,i[o++]=e(n.key,n.attributes);return i}someNode(e){if(typeof e!="function")throw new E("Graph.someNode: expecting a callback.");const t=this._nodes.values();let r,n;for(;r=t.next(),r.done!==!0;)if(n=r.value,e(n.key,n.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new E("Graph.everyNode: expecting a callback.");const t=this._nodes.values();let r,n;for(;r=t.next(),r.done!==!0;)if(n=r.value,!e(n.key,n.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new E("Graph.filterNodes: expecting a callback.");const t=this._nodes.values();let r,n;const i=[];for(;r=t.next(),r.done!==!0;)n=r.value,e(n.key,n.attributes)&&i.push(n.key);return i}reduceNodes(e,t){if(typeof e!="function")throw new E("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new E("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let r=t;const n=this._nodes.values();let i,o;for(;i=n.next(),i.done!==!0;)o=i.value,r=e(r,o.key,o.attributes);return r}nodeEntries(){const e=this._nodes.values();return{[Symbol.iterator](){return this},next(){const t=e.next();if(t.done)return t;const r=t.value;return{value:{node:r.key,attributes:r.attributes},done:!1}}}}export(){const e=new Array(this._nodes.size);let t=0;this._nodes.forEach((n,i)=>{e[t++]=_n(i,n)});const r=new Array(this._edges.size);return t=0,this._edges.forEach((n,i)=>{r[t++]=An(this.type,i,n)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:r}}import(e,t=!1){if(e instanceof M)return e.forEachNode((u,l)=>{t?this.mergeNode(u,l):this.addNode(u,l)}),e.forEachEdge((u,l,p,g,m,b,N)=>{t?N?this.mergeUndirectedEdgeWithKey(u,p,g,l):this.mergeDirectedEdgeWithKey(u,p,g,l):N?this.addUndirectedEdgeWithKey(u,p,g,l):this.addDirectedEdgeWithKey(u,p,g,l)}),this;if(!q(e))throw new E("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!q(e.attributes))throw new E("Graph.import: invalid attributes. Expecting a plain object.");t?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let r,n,i,o,c;if(e.nodes){if(i=e.nodes,!Array.isArray(i))throw new E("Graph.import: invalid nodes. Expecting an array.");for(r=0,n=i.length;r<n;r++){o=i[r],Gn(o);const{key:u,attributes:l}=o;t?this.mergeNode(u,l):this.addNode(u,l)}}if(e.edges){let u=!1;if(this.type==="undirected"&&(u=!0),i=e.edges,!Array.isArray(i))throw new E("Graph.import: invalid edges. Expecting an array.");for(r=0,n=i.length;r<n;r++){c=i[r],$n(c);const{source:l,target:p,attributes:g,undirected:m=u}=c;let b;"key"in c?(b=t?m?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:m?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,b.call(this,c.key,l,p,g)):(b=t?m?this.mergeUndirectedEdge:this.mergeDirectedEdge:m?this.addUndirectedEdge:this.addDirectedEdge,b.call(this,l,p,g))}}return this}nullCopy(e){const t=new M(F({},this._options,e));return t.replaceAttributes(F({},this.getAttributes())),t}emptyCopy(e){const t=this.nullCopy(e);return this._nodes.forEach((r,n)=>{const i=F({},r.attributes);r=new t.NodeDataClass(n,i),t._nodes.set(n,r)}),t}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new _(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new _("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new _("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const t=this.emptyCopy(e),r=this._edges.values();let n,i;for(;n=r.next(),n.done!==!0;)i=n.value,lr(t,"copy",!1,i.undirected,i.key,i.source.key,i.target.key,F({},i.attributes));return t}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((i,o)=>{e[o]=i.attributes});const t={},r={};this._edges.forEach((i,o)=>{const c=i.undirected?"--":"->";let u="",l=i.source.key,p=i.target.key,g;i.undirected&&l>p&&(g=l,l=p,p=g);const m=`(${l})${c}(${p})`;o.startsWith("geid_")?this.multi&&(typeof r[m]>"u"?r[m]=0:r[m]++,u+=`${r[m]}. `):u+=`[${o}]: `,u+=m,t[u]=i.attributes});const n={};for(const i in this)this.hasOwnProperty(i)&&!qt.has(i)&&typeof this[i]!="function"&&typeof i!="symbol"&&(n[i]=this[i]);return n.attributes=this._attributes,n.nodes=e,n.edges=t,Z(n,"constructor",this.constructor),n}}typeof Symbol<"u"&&(M.prototype[Symbol.for("nodejs.util.inspect.custom")]=M.prototype.inspect);Ln.forEach(a=>{["add","merge","update"].forEach(e=>{const t=a.name(e),r=e==="add"?lr:Rn;a.generateKey?M.prototype[t]=function(n,i,o){return r(this,t,!0,(a.type||this.type)==="undirected",null,n,i,o,e==="update")}:M.prototype[t]=function(n,i,o,c){return r(this,t,!1,(a.type||this.type)==="undirected",n,i,o,c,e==="update")}})});Bs(M);tn(M);yn(M);Sn(M);class ur extends M{constructor(e){const t=F({type:"directed"},e);if("multi"in t&&t.multi!==!1)throw new E("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="directed")throw new E('DirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class hr extends M{constructor(e){const t=F({type:"undirected"},e);if("multi"in t&&t.multi!==!1)throw new E("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(t.type!=="undirected")throw new E('UndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class pr extends M{constructor(e){const t=F({multi:!0},e);if("multi"in t&&t.multi!==!0)throw new E("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(t)}}class gr extends M{constructor(e){const t=F({type:"directed",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new E("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="directed")throw new E('MultiDirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}class mr extends M{constructor(e){const t=F({type:"undirected",multi:!0},e);if("multi"in t&&t.multi!==!0)throw new E("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(t.type!=="undirected")throw new E('MultiUndirectedGraph.from: inconsistent "'+t.type+'" type in given options!');super(t)}}function ye(a){a.from=function(e,t){const r=F({},e.options,t),n=new a(r);return n.import(e),n}}ye(M);ye(ur);ye(hr);ye(pr);ye(gr);ye(mr);M.Graph=M;M.DirectedGraph=ur;M.UndirectedGraph=hr;M.MultiGraph=pr;M.MultiDirectedGraph=gr;M.MultiUndirectedGraph=mr;M.InvalidArgumentsGraphError=E;M.NotFoundGraphError=y;M.UsageGraphError=_;var ct,Ht;function Mn(){return Ht||(Ht=1,ct=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"}),ct}var lt,Jt;function In(){if(Jt)return lt;Jt=1;function a(t){return!t||typeof t!="object"||typeof t=="function"||Array.isArray(t)||t instanceof Set||t instanceof Map||t instanceof RegExp||t instanceof Date}function e(t,r){t=t||{};var n={};for(var i in r){var o=t[i],c=r[i];if(!a(c)){n[i]=e(o,c);continue}o===void 0?n[i]=c:n[i]=o}return n}return lt=e,lt}var Fe={},ut={},Qt;function Pn(){return Qt||(Qt=1,(function(a){var e=Math.pow(2,8)-1,t=Math.pow(2,16)-1,r=Math.pow(2,32)-1,n=Math.pow(2,7)-1,i=Math.pow(2,15)-1,o=Math.pow(2,31)-1;a.getPointerArray=function(u){var l=u-1;if(l<=e)return Uint8Array;if(l<=t)return Uint16Array;if(l<=r)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")},a.getSignedPointerArray=function(u){var l=u-1;return l<=n?Int8Array:l<=i?Int16Array:l<=o?Int32Array:Float64Array},a.getNumberType=function(u){return u===(u|0)?Math.sign(u)===-1?u<=127&&u>=-128?Int8Array:u<=32767&&u>=-32768?Int16Array:Int32Array:u<=255?Uint8Array:u<=65535?Uint16Array:Uint32Array:Float64Array};var c={Uint8Array:1,Int8Array:2,Uint16Array:3,Int16Array:4,Uint32Array:5,Int32Array:6,Float32Array:7,Float64Array:8};a.getMinimalRepresentation=function(u,l){var p=null,g=0,m,b,N,S,k;for(S=0,k=u.length;S<k;S++)N=l?l(u[S]):u[S],b=a.getNumberType(N),m=c[b.name],m>g&&(g=m,p=b);return p},a.isTypedArray=function(u){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView(u)},a.concat=function(){var u=0,l,p,g;for(l=0,g=arguments.length;l<g;l++)u+=arguments[l].length;var m=new arguments[0].constructor(u);for(l=0,p=0;l<g;l++)m.set(arguments[l],p),p+=arguments[l].length;return m},a.indices=function(u){for(var l=a.getPointerArray(u),p=new l(u),g=0;g<u;g++)p[g]=g;return p}})(ut)),ut}var $e={},Yt;function Un(){if(Yt)return $e;Yt=1;function a(r){return typeof r!="number"||isNaN(r)?1:r}function e(r,n){var i={},o=function(l){return typeof l>"u"?n:l};typeof n=="function"&&(o=n);var c=function(l){return o(l[r])},u=function(){return o(void 0)};return typeof r=="string"?(i.fromAttributes=c,i.fromGraph=function(l,p){return c(l.getNodeAttributes(p))},i.fromEntry=function(l,p){return c(p)}):typeof r=="function"?(i.fromAttributes=function(){throw new Error("graphology-utils/getters/createNodeValueGetter: irrelevant usage.")},i.fromGraph=function(l,p){return o(r(p,l.getNodeAttributes(p)))},i.fromEntry=function(l,p){return o(r(l,p))}):(i.fromAttributes=u,i.fromGraph=u,i.fromEntry=u),i}function t(r,n){var i={},o=function(l){return typeof l>"u"?n:l};typeof n=="function"&&(o=n);var c=function(l){return o(l[r])},u=function(){return o(void 0)};return typeof r=="string"?(i.fromAttributes=c,i.fromGraph=function(l,p){return c(l.getEdgeAttributes(p))},i.fromEntry=function(l,p){return c(p)},i.fromPartialEntry=i.fromEntry,i.fromMinimalEntry=i.fromEntry):typeof r=="function"?(i.fromAttributes=function(){throw new Error("graphology-utils/getters/createEdgeValueGetter: irrelevant usage.")},i.fromGraph=function(l,p){var g=l.extremities(p);return o(r(p,l.getEdgeAttributes(p),g[0],g[1],l.getNodeAttributes(g[0]),l.getNodeAttributes(g[1]),l.isUndirected(p)))},i.fromEntry=function(l,p,g,m,b,N,S){return o(r(l,p,g,m,b,N,S))},i.fromPartialEntry=function(l,p,g,m){return o(r(l,p,g,m))},i.fromMinimalEntry=function(l,p){return o(r(l,p))}):(i.fromAttributes=u,i.fromGraph=u,i.fromEntry=u,i.fromMinimalEntry=u),i}return $e.createNodeValueGetter=e,$e.createEdgeValueGetter=t,$e.createEdgeWeightGetter=function(r){return t(r,a)},$e}var Xt;function Wn(){if(Xt)return Fe;Xt=1;var a=Pn(),e=Un().createEdgeWeightGetter;function t(i,o){return i==="outbound"||i==="inbound"?o.directedSize+o.undirectedSize*2:i==="in"||i==="out"||i==="directed"?o.directedSize:o.undirectedSize*2}function r(i,o){o=o||"outbound";var c=i[o+"Neighbors"].bind(i),u=t(o,i),l=a.getPointerArray(u),p=a.getPointerArray(i.order);this.graph=i,this.neighborhood=new p(u),this.starts=new l(i.order+1),this.nodes=i.nodes();var g={},m,b,N,S,k,D,C=0;for(m=0,b=i.order;m<b;m++)g[this.nodes[m]]=m;for(m=0,b=i.order;m<b;m++)for(k=this.nodes[m],D=c(k),this.starts[m]=C,N=0,S=D.length;N<S;N++)this.neighborhood[C++]=g[D[N]];this.starts[m]=u}r.prototype.bounds=function(i){return[this.starts[i],this.starts[i+1]]},r.prototype.project=function(){var i=this,o={};return i.nodes.forEach(function(c,u){o[c]=Array.from(i.neighborhood.slice(i.starts[u],i.starts[u+1])).map(function(l){return i.nodes[l]})}),o},r.prototype.collect=function(i){var o,c,u={};for(o=0,c=i.length;o<c;o++)u[this.nodes[o]]=i[o];return u},r.prototype.assign=function(i,o){var c=0;this.graph.updateEachNodeAttributes(function(u,l){return l[i]=o[c++],l},{attributes:[i]})},Fe.NeighborhoodIndex=r;function n(i,o,c){c=c||"outbound";var u=i[c+"Edges"].bind(i),l=t(c,i),p=a.getPointerArray(l),g=a.getPointerArray(i.order),m=e(o).fromMinimalEntry;this.graph=i,this.neighborhood=new g(l),this.weights=new Float64Array(l),this.outDegrees=new Float64Array(i.order),this.starts=new p(i.order+1),this.nodes=i.nodes();var b={},N,S,k,D,C,I,x,h,f,w=0;for(N=0,S=i.order;N<S;N++)b[this.nodes[N]]=N;for(N=0,S=i.order;N<S;N++)for(C=this.nodes[N],x=u(C),this.starts[N]=w,k=0,D=x.length;k<D;k++)h=x[k],I=i.opposite(C,h),f=m(h,i.getEdgeAttributes(h)),this.neighborhood[w]=b[I],this.weights[w++]=f,this.outDegrees[N]+=f;this.starts[N]=l}return n.prototype.bounds=r.prototype.bounds,n.prototype.project=r.prototype.project,n.prototype.collect=r.prototype.collect,n.prototype.assign=r.prototype.assign,Fe.WeightedNeighborhoodIndex=n,Fe}var ht,Zt;function zn(){if(Zt)return ht;Zt=1;var a=Mn(),e=In(),t=Wn().WeightedNeighborhoodIndex,r={nodePagerankAttribute:"pagerank",getEdgeWeight:"weight",alpha:.85,maxIterations:100,tolerance:1e-6};function n(o,c,u){if(!a(c))throw new Error("graphology-metrics/centrality/pagerank: the given graph is not a valid graphology instance.");u=e(u,r);var l=u.alpha,p=u.maxIterations,g=u.tolerance,m=u.nodePagerankAttribute,b=c.order,N=1/b,S=new t(c,u.getEdgeWeight),k,D,C,I,x=new Float64Array(c.order),h=new Float64Array(S.weights.length),f=[];for(k=0;k<b;k++)for(x[k]=N,C=S.starts[k+1],I=S.outDegrees[k],I===0&&f.push(k),D=S.starts[k];D<C;D++)h[D]=S.weights[D]/I;for(var w=0,j=0,$,A,U,K=!1;w<p;){for(U=x,x=new Float64Array(c.order),$=0,k=0,C=f.length;k<C;k++)$+=U[f[k]];for($*=l,k=0;k<b;k++){for(C=S.starts[k+1],D=S.starts[k];D<C;D++)A=S.neighborhood[D],x[A]+=l*U[k]*h[D];x[k]+=$*N+(1-l)*N}for(j=0,k=0;k<b;k++)j+=Math.abs(x[k]-U[k]);if(j<b*g){K=!0;break}w++}if(!K)throw Error("graphology-metrics/centrality/pagerank: failed to converge.");if(o){S.assign(m,x);return}return S.collect(x)}var i=n.bind(null,!1);return i.assign=n.bind(null,!0),ht=i,ht}var Fn=zn();const Bn=Gr(Fn),Kn={Project:0,Company:0,Person:1,Team:1,Sprint:1,Document:1,Email:1,CalendarEvent:1,Contact:1,Risk:2,Action:2,Fact:2,Decision:2,Question:2,UserStory:2,Task:2},er={Project:{w:280,h:120},Company:{w:260,h:100},Document:{w:220,h:90},Person:{w:200,h:80},Contact:{w:200,h:85},Team:{w:220,h:85},Sprint:{w:200,h:65},Email:{w:220,h:80},CalendarEvent:{w:210,h:80},Fact:{w:200,h:80},Decision:{w:200,h:80},Risk:{w:210,h:95},Action:{w:220,h:90},Question:{w:200,h:75},UserStory:{w:210,h:80},Task:{w:220,h:90},default:{w:200,h:80}},Be={BELONGS_TO_PROJECT:{stroke:"#cbd5e1",width:1,opacity:0,dash:"5 5"},BELONGS_TO_COMPANY:{stroke:"#0d9488",width:1.5,opacity:.6,dash:"4 4"},EXTRACTED_FROM:{stroke:"#f59e0b",width:2,opacity:.8},IMPLEMENTS:{stroke:"#3b82f6",width:2,opacity:.9},DEPENDS_ON:{stroke:"#3b82f6",width:2,opacity:.9},ASSIGNED_TO:{stroke:"#10b981",width:1.5,opacity:.7},OWNS:{stroke:"#22c55e",width:2.5,opacity:.9},OWNED_BY:{stroke:"#10b981",width:1.5,opacity:.7},AUTHORED_BY:{stroke:"#10b981",width:1.5,opacity:.7},MEMBER_OF_TEAM:{stroke:"#a855f7",width:1.5,opacity:.7},MEMBER_OF:{stroke:"#a855f7",width:2,opacity:.8},PART_OF:{stroke:"#8b5cf6",width:2,opacity:.8},WORKS_WITH:{stroke:"#4ade80",width:1,opacity:.4},IS_CONTACT_OF:{stroke:"#22d3ee",width:1.5,opacity:.6,dash:"4 4"},WORKS_AT:{stroke:"#0d9488",width:1.5,opacity:.7},SIMILAR_TO:{stroke:"#facc15",width:1,opacity:.5,dash:"4 4"},REPORTS_TO:{stroke:"#22c55e",width:1.5,opacity:.7},MANAGES:{stroke:"#22c55e",width:1.5,opacity:.7},LEADS_TEAM:{stroke:"#a855f7",width:2,opacity:.8},PARENT_OF:{stroke:"#3b82f6",width:1.5,opacity:.7},PLANNED_IN:{stroke:"#6366f1",width:1.5,opacity:.7},SENT_BY:{stroke:"#94a3b8",width:1.5,opacity:.7},SENT_TO:{stroke:"#94a3b8",width:1.5,opacity:.7},MENTIONS:{stroke:"#f59e0b",width:1.5,opacity:.8},INVOLVES:{stroke:"#06b6d4",width:1.5,opacity:.8},LINKED_TO:{stroke:"#a855f7",width:1.5,opacity:.7},DERIVED_FROM:{stroke:"#94a3b8",width:1.5,opacity:.7},REPLY_TO:{stroke:"#94a3b8",width:1,opacity:.5,dash:"3 3"},HAS_ATTACHMENT:{stroke:"#f59e0b",width:1,opacity:.6,dash:"3 3"},default:{stroke:"#64748b",width:1,opacity:.5}},fr={Project:"#6366f1",Company:"#0d9488",Person:"#22c55e",Contact:"#14b8a6",Team:"#a855f7",Sprint:"#6366f1",Document:"#f59e0b",Email:"#64748b",CalendarEvent:"#06b6d4",Risk:"#ef4444",Action:"#22c55e",Task:"#10b981",Fact:"#0ea5e9",Decision:"#f97316",Question:"#8b5cf6",UserStory:"#ec4899",Meeting:"#06b6d4",Technology:"#3b82f6",Answer:"#10b981",Briefing:"#6366f1",Client:"#1abc9c",Conversation:"#9c27b0",Organization:"#8e44ad",Regulation:"#e74c3c"},qn=new Set(["WORKS_WITH","BELONGS_TO_PROJECT"]);function xi(a,e){const t=["person_","contact_","document_","fact_","decision_","risk_","question_","team_","action_","sprint_","email_","calendarevent_","userstory_","task_","company_"],r=new Set(a.map(h=>h.id)),n=new Map,i=new Set;for(const h of a){const f=h.id;for(const w of t)if(f.startsWith(w)){const j=f.slice(w.length);r.has(j)&&(n.set(f,j),i.add(f));break}}const o=a.filter(h=>!i.has(h.id)),c=new Map,u=new Set,l=new Map,p=h=>h?.trim().toLowerCase()||"";o.forEach(h=>{if(h.label==="Contact"){const f=h.id;h.data.linked_person_id&&(u.add(h.data.linked_person_id),c.set(h.data.linked_person_id,f)),h.data.name&&l.set(p(h.data.name),f),h.data.label&&l.set(p(h.data.label),f),Array.isArray(h.data.aliases)&&h.data.aliases.forEach(w=>{w&&l.set(p(w),f)})}});const g=new Map,m=[],b=new Set;o.forEach(h=>{if(h.label==="Person"){let $=!1,A="";if(u.has(h.id))$=!0,A=c.get(h.id);else{const K=p(h.data.label||h.data.name);l.has(K)?($=!0,A=l.get(K),c.set(h.id,A)):K&&g.has(K)&&($=!0,A=g.get(K),c.set(h.id,A))}if($){b.add(h.id);return}const U=p(h.data.label||h.data.name);U&&g.set(U,h.id)}const f=h.label||"default",w=Kn[f]??2,j=er[f]??er.default;m.push({...h,width:j.w,height:j.h,data:{...h.data,tier:w,label:h.data.label||h.label,_display:{width:j.w,height:j.h,colorToken:Vn(f)}}})});const N=new Set(m.map(h=>h.id)),S=h=>(n.has(h)&&(h=n.get(h)),c.has(h)&&(h=c.get(h)),h),k=[];e.forEach(h=>{if(qn.has(h.label||""))return;let f=S(h.source),w=S(h.target);if(f===w||!N.has(f)||!N.has(w))return;const j=Be[h.label||""]||Be.default;k.push({...h,id:h.id||`${f}-${w}-${h.label}`,source:f,target:w,type:"default",style:{stroke:j.stroke,strokeWidth:j.width,opacity:j.opacity,strokeDasharray:j.dash},animated:h.label==="SIMILAR_TO"||h.label==="DEPENDS_ON"||h.label==="INVOLVES",data:{...h.data,originalLabel:h.label},label:void 0})});const D=new Set(["MEMBER_OF_TEAM","MEMBER_OF","PART_OF","LEADS_TEAM"]),C=new Set(m.filter(h=>h.label==="Team").map(h=>h.id));if(C.size>0){const h=new Map;for(const f of k)D.has(f.data?.originalLabel||f.label||"")&&(C.has(f.target)&&h.set(f.target,(h.get(f.target)||0)+1),C.has(f.source)&&h.set(f.source,(h.get(f.source)||0)+1));for(const f of e){if(!D.has(f.label||""))continue;const w=S(f.source),j=S(f.target);C.has(j)&&!h.has(j)&&h.set(j,(h.get(j)||0)+1),C.has(w)&&!h.has(w)&&h.set(w,(h.get(w)||0)+1)}for(const f of m)f.label==="Team"&&h.has(f.id)&&(f.data={...f.data,memberCount:h.get(f.id)})}const I=new Map,x=new Map;for(const h of k){const f=[h.source,h.target].sort().join("__");I.set(f,(I.get(f)||0)+1)}for(const h of k){const f=[h.source,h.target].sort().join("__"),w=I.get(f)||1;if(w>1){const j=x.get(f)||0;x.set(f,j+1);const $=(j-(w-1)/2)*.3;h.data={...h.data,curvature:$}}}return{nodes:m,edges:k}}function Vn(a){switch(a){case"Project":return"blue";case"Company":return"teal";case"Person":return"green";case"Contact":return"teal";case"Team":return"purple";case"Sprint":return"indigo";case"Document":return"amber";case"Risk":return"red";case"Action":return"emerald";case"Fact":return"sky";case"Decision":return"orange";case"Question":return"violet";case"UserStory":return"pink";case"Email":return"slate";case"CalendarEvent":return"cyan";case"Task":return"emerald";default:return"slate"}}const Hn={0:18,1:10,2:6};function yi(a,e,t=!1){const r=new M;for(const n of a){const i=n.label||"default",o=n.data.tier??2,c=!!n.data._isGroup;r.addNode(n.id,{label:n.data.label||n.label||n.id,size:c?22:Hn[o]??6,color:fr[i]||"#64748b",x:Math.random()*1e3,y:Math.random()*1e3,nodeType:i,tier:o,isGroup:c,groupCount:n.data._groupCount||0,createdAt:n.data.created_at||n.data.date||null})}for(const n of e){const i=Be[n.data?.originalLabel||n.label||""]||Be.default,o=n.id||`${n.source}-${n.target}-${n.data?.originalLabel||n.label||"rel"}`;if(!(!r.hasNode(n.source)||!r.hasNode(n.target)))try{r.addEdgeWithKey(o,n.source,n.target,{color:i.stroke,size:Math.max(.5,i.width*.4),relationType:n.data?.originalLabel||n.label,type:"curved"})}catch{}}if(t&&r.order>1)try{const n=Bn(r),i=Object.values(n),o=Math.max(...i,.001),c=Math.min(...i,0),u=4,l=30;for(const[p,g]of Object.entries(n)){const m=o>c?(g-c)/(o-c):.5,b=u+m*(l-u);r.setNodeAttribute(p,"size",b)}}catch{}return r}function ee(a,e){return fr[a]||e||"#64748b"}function Jn({status:a}){const e=!!a.graphConnected,t=!!a.isListening,r=!!a.syncInProgress,n=e||t,i=a.ontologySource?String(a.ontologySource):"",o=r?"Syncing":n?i==="supabase"?"Synced":"Connected":"Disconnected";return s.jsxs("div",{className:W("flex items-center gap-1.5 px-2 py-1 rounded-full text-[10px] font-medium",n?"bg-gm-status-success-bg text-gm-status-success":r?"bg-gm-status-warning-bg text-gm-status-warning":"bg-gm-surface-secondary text-gm-text-tertiary"),children:[s.jsx("div",{className:W("w-1.5 h-1.5 rounded-full",n?"bg-gm-status-success":r?"bg-gm-status-warning animate-pulse":"bg-gm-text-tertiary")}),o]})}function Qn({schema:a}){const e=a.version||a.schema_version||"",t=Object.keys(a.entityTypes||a.entities||{}).length,r=Object.keys(a.relationTypes||a.relations||{}).length;return s.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-gm-text-tertiary",children:[e&&s.jsxs("span",{children:["v",String(e)]}),s.jsxs("span",{children:[t,"E"]}),s.jsxs("span",{children:[r,"R"]})]})}function Yn({entity:a,onClose:e}){const t=String(a.name||a.type||a.label||""),r=String(a.description||""),n=ee(t,a.color?String(a.color):void 0),i=a.properties||[],o=!!(a.sharedEntity||a.shared),c=String(a.embeddingTemplate||""),u=Number(a.count||a.instances||0),l=Array.isArray(i)?i:Object.entries(i).map(([p,g])=>({name:p,...typeof g=="object"&&g!==null?g:{type:String(g)}}));return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",onClick:e,children:s.jsxs("div",{className:"bg-gm-surface-primary border border-gm-border-primary rounded-2xl shadow-xl w-full max-w-lg max-h-[80vh] overflow-y-auto",onClick:p=>p.stopPropagation(),children:[s.jsx("div",{className:"p-5 border-b border-gm-border-primary",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-xl flex items-center justify-center text-white font-bold text-sm",style:{backgroundColor:n},children:t.charAt(0)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"text-sm font-bold text-gm-text-primary",children:t}),o&&s.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded-full bg-blue-600/10 text-gm-interactive-primary font-medium",children:"Shared"}),u>0&&s.jsxs("span",{className:"text-[10px] text-gm-text-tertiary",children:[u," instances"]})]}),r&&s.jsx("p",{className:"text-[11px] text-gm-text-tertiary mt-0.5",children:r})]}),s.jsx("button",{onClick:e,className:"p-1.5 rounded-lg hover:bg-gm-surface-hover transition-colors",children:s.jsx(gt,{className:"w-4 h-4 text-gm-text-tertiary"})})]})}),l.length>0&&s.jsxs("div",{className:"p-5 border-b border-gm-border-primary",children:[s.jsxs("h4",{className:"text-[10px] text-gm-text-tertiary uppercase tracking-wider mb-3",children:["Properties (",l.length,")"]}),s.jsx("div",{className:"space-y-1.5",children:l.map((p,g)=>s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:"font-mono text-gm-text-primary w-32 shrink-0",children:String(p.name||p.key||"")}),s.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-gm-surface-secondary text-gm-text-tertiary",children:String(p.type||"string")}),p.required&&s.jsx("span",{className:"text-[9px] text-gm-status-danger",children:"required"}),p.searchable&&s.jsx("span",{className:"text-[9px] text-gm-interactive-primary",children:"searchable"}),p.description&&s.jsx("span",{className:"text-[10px] text-gm-text-tertiary ml-auto truncate max-w-[150px]",children:String(p.description)})]},g))})]}),c&&s.jsxs("div",{className:"p-5",children:[s.jsx("h4",{className:"text-[10px] text-gm-text-tertiary uppercase tracking-wider mb-2",children:"Embedding Template"}),s.jsx("pre",{className:"text-[10px] text-gm-text-primary bg-gm-surface-secondary rounded-lg p-3 overflow-x-auto whitespace-pre-wrap",children:c})]})]})})}function Xn({entities:a,relations:e}){const t=z.useMemo(()=>{const n={},i=a.length;if(i===0)return{nodes:n,width:600,height:400};const o=Math.ceil(Math.sqrt(i)),c=180,u=120;a.forEach((g,m)=>{const b=String(g.name||g.type||g.label||""),N=Math.floor(m/o),S=m%o;n[b]={x:60+S*c,y:50+N*u,color:ee(b,g.color?String(g.color):void 0)}});const l=Math.min(i,o),p=Math.ceil(i/o);return{nodes:n,width:Math.max(600,60+l*c+60),height:Math.max(400,50+p*u+60)}},[a]),r=z.useMemo(()=>e.map(n=>{const i=String(n.from||n.source||n.from_type||""),o=String(n.to||n.target||n.to_type||""),c=String(n.name||n.type||n.label||"");return!t.nodes[i]||!t.nodes[o]||i==="*"||o==="*"?null:{from:i,to:o,name:c}}).filter(Boolean),[e,t]);return a.length===0?s.jsx("div",{className:"flex items-center justify-center py-16",children:s.jsxs("div",{className:"text-center",children:[s.jsx(tr,{className:"w-10 h-10 mx-auto mb-3 text-gray-600"}),s.jsx("p",{className:"text-xs text-gm-text-tertiary",children:"No entities to visualize"})]})}):s.jsx("div",{className:"w-full overflow-auto bg-gm-surface-secondary rounded-xl border border-gm-border-primary",children:s.jsxs("svg",{viewBox:`0 0 ${t.width} ${t.height}`,className:"w-full",style:{minHeight:400},children:[s.jsx("defs",{children:s.jsx("marker",{id:"arrowhead",markerWidth:"8",markerHeight:"6",refX:"8",refY:"3",orient:"auto",children:s.jsx("polygon",{points:"0 0, 8 3, 0 6",fill:"#94a3b8"})})}),r.map((n,i)=>{const o=t.nodes[n.from],c=t.nodes[n.to];if(!o||!c)return null;const u=c.x-o.x,l=c.y-o.y,p=o.x+u/2,g=o.y+l/2,m=n.from===n.to?40:0;return s.jsxs("g",{children:[n.from===n.to?s.jsx("path",{d:`M ${o.x+30} ${o.y-15} C ${o.x+80} ${o.y-60}, ${o.x-20} ${o.y-60}, ${o.x-30} ${o.y-15}`,fill:"none",stroke:"#94a3b8",strokeWidth:"1.2",markerEnd:"url(#arrowhead)",strokeDasharray:"4 2"}):s.jsx("line",{x1:o.x,y1:o.y,x2:c.x,y2:c.y,stroke:"#94a3b8",strokeWidth:"1.2",markerEnd:"url(#arrowhead)",strokeDasharray:"4 2"}),s.jsx("rect",{x:p-30+m,y:g-8-(m?40:0),width:"60",height:"14",rx:"4",fill:"var(--gm-surface-primary)",fillOpacity:"0.85"}),s.jsx("text",{x:p+m,y:g-(m?40:0),textAnchor:"middle",fontSize:"7",fill:"#94a3b8",fontWeight:"600",children:n.name.length>12?n.name.slice(0,12)+"":n.name})]},i)}),Object.entries(t.nodes).map(([n,i])=>s.jsxs("g",{children:[s.jsx("rect",{x:i.x-45,y:i.y-18,width:"90",height:"36",rx:"10",fill:i.color+"18",stroke:i.color+"40",strokeWidth:"1.5"}),s.jsx("circle",{cx:i.x-30,cy:i.y,r:"5",fill:i.color}),s.jsx("text",{x:i.x+2,y:i.y+4,textAnchor:"middle",fontSize:"9",fill:"currentColor",fontWeight:"600",children:n.length>10?n.slice(0,10)+"":n})]},n))]})})}function Zn({entityNames:a,onSave:e,onCancel:t,isPending:r}){const[n,i]=z.useState(""),[o,c]=z.useState(""),[u,l]=z.useState(""),[p,g]=z.useState(""),m=u.toUpperCase().replace(/\s+/g,"_"),b=()=>{if(!n||!o||!u.trim()){O.error("Source, target, and name are required");return}e({name:m,from:n,to:o,description:p})};return s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border-2 border-gm-interactive-primary/20 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-center gap-3 py-2",children:[s.jsx("div",{className:W("px-3 py-1.5 rounded-lg text-xs font-bold transition-colors",n?"text-white":"bg-gm-surface-secondary text-gm-text-tertiary"),style:n?{backgroundColor:ee(n)}:{},children:n||"?"}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("span",{className:"text-[9px] font-mono text-gm-text-tertiary",children:m||"RELATION"}),s.jsx("span",{className:"text-gm-text-tertiary",children:""})]}),s.jsx("div",{className:W("px-3 py-1.5 rounded-lg text-xs font-bold transition-colors",o?"text-white":"bg-gm-surface-secondary text-gm-text-tertiary"),style:o?{backgroundColor:ee(o)}:{},children:o||"?"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("select",{value:n,onChange:N=>i(N.target.value),className:"bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-2 py-1.5 text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus",children:[s.jsx("option",{value:"",children:"Source entity..."}),a.map(N=>s.jsx("option",{value:N,children:N},N))]}),s.jsxs("select",{value:o,onChange:N=>c(N.target.value),className:"bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-2 py-1.5 text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus",children:[s.jsx("option",{value:"",children:"Target entity..."}),a.map(N=>s.jsx("option",{value:N,children:N},N))]})]}),s.jsx("input",{value:u,onChange:N=>l(N.target.value),placeholder:"Relation name (e.g. WORKS_ON, BELONGS_TO)",className:"w-full bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-1.5 text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus",onKeyDown:N=>N.key==="Enter"&&b()}),s.jsx("input",{value:p,onChange:N=>g(N.target.value),placeholder:"Description (optional)",className:"w-full bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-1.5 text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus"}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx("button",{onClick:t,className:"px-3 py-1.5 rounded-lg text-xs text-gm-text-tertiary hover:bg-gm-surface-secondary transition-colors",children:"Cancel"}),s.jsxs("button",{onClick:b,disabled:r||!n||!o||!u.trim(),className:"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover disabled:opacity-50 flex items-center gap-1 transition-colors",children:[r?s.jsx(R,{className:"w-3 h-3 animate-spin"}):s.jsx(pt,{className:"w-3 h-3"})," Create"]})]})]})}function bi(){const[a,e]=z.useState("entities"),[t,r]=z.useState(""),[n,i]=z.useState(""),[o,c]=z.useState(!1),[u,l]=z.useState(null),p=$r(),g=Dr(),m=Cr(),b=Lr(),N=Tr(),S=Or(),k=Rr(),D=Mr(),C=Ir(),I=Pr(),x=Ur(),h=Wr(),f=zr(),w=Fr(),j=Br(),$=Kr(),A=qr(),U=Vr(),K=Hr(),be=Jr(),Ce=Qr(),bt=Yr(),wt=Xr(),re=Zr(),we=es(),qe=ts(),Ve=rs(),le=ss(),He=ns(),vt=is(),ue=as(),Je=os(),ve=ds(),Qe=cs(),Nt=ls(),Y=us(),X=hs(),he=ps(),[Ye,xr]=z.useState(""),[jt,yr]=z.useState(`{
  "name": "example"
}`),[Xe,br]=z.useState(""),[Ze,wr]=z.useState(""),[Et,vr]=z.useState(`{
  "name": "example"
}`),V=m.data?.entityTypes||m.data?.entities||m.data?.types||[],ae=b.data?.relationTypes||b.data?.relations||b.data?.types||[],et=N.data?.suggestions||[],Nr=g.data||{},H=S.data||{},Le=k.data?.compliance||k.data||{},Ne=Le.issues||Le.violations||[],oe=Number(Le.score||Le.compliance_score||0),kt=D.data?.changes||D.data||[],St=C.data||{},_t=I.data?.unused||I.data||{},je=_t.entities||[],Ee=_t.relations||[],Te=x.data?.status||x.data||{},At=h.data?.jobs||[],Gt=f.data?.log||[],jr=p.data||{},$t=w.data?.rules||[],Dt=w.data?.cyphers||[],ke=j.data?.stats||{},Ct=j.data?.availableRules||[],Q=$.data?.summary||{},Lt=$.data?.coverageByType||{},tt=A.data?.sharedEntities||[],Tt=A.data?.crossGraphRelations||[],rt=U.data||{},Ot=rt?.history||[],de=t.toLowerCase(),Er=z.useMemo(()=>t?V.filter(d=>{const v=String(d.name||d.type||d.label||"").toLowerCase(),G=String(d.description||"").toLowerCase();return v.includes(de)||G.includes(de)}):V,[V,de]),kr=z.useMemo(()=>t?ae.filter(d=>{const v=String(d.name||d.type||d.label||"").toLowerCase(),G=String(d.from||d.source||"").toLowerCase(),L=String(d.to||d.target||"").toLowerCase();return v.includes(de)||G.includes(de)||L.includes(de)}):ae,[ae,de]),Sr=z.useMemo(()=>V.map(d=>String(d.name||d.type||d.label||"")),[V]),Rt=et.filter(d=>String(d.status)!=="approved"&&String(d.status)!=="rejected"),Mt=()=>{n.trim()&&bt.mutate({name:n.trim()},{onSuccess:()=>{O.success("Entity type added"),i("")},onError:()=>O.error("Failed to add entity type")})},_r=d=>{wt.mutate(d,{onSuccess:()=>{O.success("Relation type added"),c(!1)},onError:()=>O.error("Failed to add relation type")})},Ar=[{key:"entities",label:"Entities",icon:bs,count:V.length},{key:"relations",label:"Relations",icon:Ue,count:ae.length},{key:"graph",label:"Graph",icon:tr},{key:"suggestions",label:"AI",icon:Ie,count:Rt.length},{key:"stats",label:"Stats",icon:it},{key:"tools",label:"Tools",icon:gs},{key:"inference",label:"Rules",icon:Se},{key:"embeddings",label:"Embed",icon:_e},{key:"shared",label:"Shared",icon:Pe},{key:"jobs",label:"Jobs",icon:ms},{key:"versions",label:"Versions",icon:ge},{key:"changes",label:"Log",icon:Oe},{key:"test",label:"Test",icon:Ns}];return s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 border-b border-gm-border-primary bg-gm-surface-secondary shrink-0",children:[s.jsx(Pe,{className:"w-4 h-4 text-gm-interactive-primary"}),s.jsx("span",{className:"text-xs font-semibold text-gm-text-primary",children:"Ontology"}),s.jsx(Qn,{schema:jr}),s.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[Object.keys(Te).length>0&&s.jsx(Jn,{status:Te}),s.jsx("button",{onClick:()=>we.mutate(void 0,{onSuccess:()=>O.success("Sync triggered")}),disabled:we.isPending,className:"p-1 rounded-md hover:bg-gm-surface-hover transition-colors",title:"Force sync",children:we.isPending?s.jsx(R,{className:"w-3.5 h-3.5 animate-spin text-gm-text-tertiary"}):s.jsx(Re,{className:"w-3.5 h-3.5 text-gm-text-tertiary"})})]})]}),s.jsx("div",{className:"flex gap-0.5 px-4 border-b border-gm-border-primary bg-gm-surface-secondary shrink-0",children:Ar.map(d=>{const v=d.icon;return s.jsxs("button",{onClick:()=>e(d.key),className:W("flex items-center gap-1 px-2.5 py-2 text-[10px] font-medium border-b-2 transition-colors",a===d.key?"border-gm-interactive-primary text-gm-interactive-primary":"border-transparent text-gm-text-tertiary hover:text-gm-text-primary"),children:[s.jsx(v,{className:"w-3 h-3"})," ",d.label,d.count!==void 0&&d.count>0&&s.jsx("span",{className:"text-[9px] px-1 py-0.5 rounded-full bg-gm-surface-secondary text-gm-text-tertiary",children:d.count})]},d.key)})}),(a==="entities"||a==="relations")&&s.jsx("div",{className:"px-4 pt-3 shrink-0",children:s.jsxs("div",{className:"relative",children:[s.jsx(nt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-gm-text-tertiary"}),s.jsx("input",{value:t,onChange:d=>r(d.target.value),placeholder:`Search ${a}...`,className:"w-full pl-8 pr-3 py-1.5 bg-gm-surface-secondary border border-gm-border-primary rounded-lg text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus"})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[a==="entities"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx("input",{value:n,onChange:d=>i(d.target.value),placeholder:"New entity type...",className:"flex-1 bg-gm-surface-secondary border border-gm-border-primary rounded-lg px-3 py-1.5 text-xs text-gm-text-primary focus:outline-none focus:ring-2 focus:ring-gm-border-focus",onKeyDown:d=>d.key==="Enter"&&Mt()}),s.jsxs("button",{onClick:Mt,disabled:bt.isPending||!n.trim(),className:"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover disabled:opacity-50 flex items-center gap-1 transition-colors",children:[s.jsx(pt,{className:"w-3 h-3"})," Add"]})]}),m.isLoading?s.jsx(R,{className:"w-5 h-5 animate-spin text-gm-interactive-primary mx-auto"}):s.jsx("div",{className:"grid grid-cols-3 gap-2",children:Er.map((d,v)=>{const G=String(d.name||d.type||d.label||""),L=Number(d.count||d.instances||0),T=d.properties||[],P=Array.isArray(T)?T:Object.entries(T).map(([pe])=>({name:pe})),B=ee(G,d.color?String(d.color):void 0),J=String(d.description||""),ce=!!(d.sharedEntity||d.shared);return s.jsxs("div",{onClick:()=>l(d),className:"bg-[var(--gm-surface-hover)] rounded-xl p-3 border border-gm-border-primary hover:border-blue-600/30 transition-colors cursor-pointer group",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx("div",{className:"w-6 h-6 rounded-lg flex items-center justify-center text-white text-[9px] font-bold shrink-0",style:{backgroundColor:B},children:G.charAt(0)}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("span",{className:"text-xs font-semibold text-gm-text-primary truncate",children:G}),ce&&s.jsx("span",{className:"text-[8px] px-1 py-0.5 rounded bg-blue-600/10 text-gm-interactive-primary",children:"S"})]})}),L>0&&s.jsx("span",{className:"text-[10px] text-gm-text-tertiary shrink-0",children:L})]}),J&&s.jsx("p",{className:"text-[9px] text-gm-text-tertiary mb-1.5 line-clamp-1",children:J}),P.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1",children:[P.slice(0,4).map((pe,st)=>s.jsx("span",{className:"text-[8px] px-1 py-0.5 rounded bg-gm-surface-secondary text-gm-text-tertiary",children:String(pe.name||pe)},st)),P.length>4&&s.jsxs("span",{className:"text-[8px] text-gm-text-tertiary",children:["+",P.length-4]})]}),s.jsx(at,{className:"w-3 h-3 text-gm-text-tertiary opacity-0 group-hover:opacity-100 transition-opacity absolute top-2 right-2"})]},v)})})]}),a==="relations"&&s.jsxs(s.Fragment,{children:[o?s.jsx(Zn,{entityNames:Sr,onSave:_r,onCancel:()=>c(!1),isPending:wt.isPending}):s.jsxs("button",{onClick:()=>c(!0),className:"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover flex items-center gap-1 transition-colors",children:[s.jsx(pt,{className:"w-3 h-3"})," New Relation"]}),b.isLoading?s.jsx(R,{className:"w-5 h-5 animate-spin text-gm-interactive-primary mx-auto"}):s.jsx("div",{className:"space-y-1.5",children:kr.map((d,v)=>{const G=String(d.name||d.type||d.label||""),L=Number(d.count||d.instances||0),T=String(d.from||d.source||d.from_type||""),P=String(d.to||d.target||d.to_type||""),B=String(d.description||"");return s.jsxs("div",{className:"flex items-center gap-2 bg-[var(--gm-surface-hover)] rounded-lg p-2.5 group",children:[T&&s.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded font-medium",style:{backgroundColor:`${ee(T)}20`,color:ee(T)},children:T}),s.jsxs("span",{className:"text-xs font-medium text-gm-interactive-primary",children:[" ",G.replace(/_/g," ")," "]}),P&&s.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded font-medium",style:{backgroundColor:`${ee(P)}20`,color:ee(P)},children:P}),B&&s.jsx("span",{className:"text-[9px] text-gm-text-tertiary truncate max-w-[150px] hidden group-hover:block",children:B}),L>0&&s.jsx("span",{className:"text-[10px] text-gm-text-tertiary ml-auto",children:L})]},v)})})]}),a==="graph"&&s.jsx(Xn,{entities:V,relations:ae}),a==="suggestions"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[s.jsxs("button",{onClick:()=>Ve.mutate(void 0,{onSuccess:()=>O.success("Graph analysis started")}),disabled:Ve.isPending,className:"px-3 py-1.5 rounded-lg bg-blue-600/10 text-gm-interactive-primary text-xs font-medium hover:bg-blue-600/20 disabled:opacity-50 flex items-center gap-1.5 transition-colors",children:[Ve.isPending?s.jsx(R,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(_e,{className:"w-3.5 h-3.5"})," Analyze Graph"]}),s.jsxs("button",{onClick:()=>qe.mutate({minConfidence:.8},{onSuccess:()=>O.success("High-confidence suggestions auto-approved")}),disabled:qe.isPending||Rt.length===0,className:"px-3 py-1.5 rounded-lg bg-gm-status-success-bg text-gm-status-success text-xs font-medium hover:bg-green-500/20 disabled:opacity-50 flex items-center gap-1.5 transition-colors",children:[qe.isPending?s.jsx(R,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(ws,{className:"w-3.5 h-3.5"})," Auto-Approve (80%)"]}),s.jsxs("button",{onClick:()=>He.mutate(void 0,{onSuccess:()=>O.success("Relationship inference started")}),disabled:He.isPending,className:"px-3 py-1.5 rounded-lg bg-gm-surface-secondary border border-gm-border-primary text-gm-text-primary text-xs font-medium hover:bg-gm-surface-hover disabled:opacity-50 flex items-center gap-1.5 transition-colors",children:[He.isPending?s.jsx(R,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Ue,{className:"w-3.5 h-3.5"})," Infer Relations"]})]}),N.isLoading?s.jsx(R,{className:"w-5 h-5 animate-spin text-gm-interactive-primary mx-auto"}):et.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Ie,{className:"w-10 h-10 mx-auto mb-3 text-gray-600"}),s.jsx("p",{className:"text-xs text-gm-text-tertiary",children:"No AI suggestions pending"}),s.jsx("p",{className:"text-[10px] text-gm-text-tertiary mt-1",children:'Run "Analyze Graph" to generate suggestions'})]}):s.jsx("div",{className:"space-y-2",children:et.map((d,v)=>{const G=String(d.type||d.suggestion_type||""),L=String(d.name||d.suggested_name||d.content||""),T=String(d.reason||d.explanation||d.description||""),P=Number(d.confidence||0),B=String(d.status||"pending"),J=d.enrichment,ce=B==="pending";return s.jsx("div",{className:W("bg-[var(--gm-surface-hover)] rounded-xl p-3 border transition-colors",ce?"border-gm-border-primary":B==="approved"?"border-green-500/20 opacity-60":"border-red-500/20 opacity-60"),children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Ie,{className:"w-4 h-4 text-gm-interactive-primary shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"text-xs font-semibold text-gm-text-primary",children:L}),s.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-blue-600/10 text-gm-interactive-primary capitalize",children:G.replace(/_/g," ")}),P>0&&s.jsxs("span",{className:W("text-[10px] font-medium",P>=.8?"text-gm-status-success":P>=.5?"text-gm-status-warning":"text-gm-text-tertiary"),children:[Math.round(P*100),"%"]}),!ce&&s.jsx("span",{className:W("text-[9px] px-1 py-0.5 rounded",B==="approved"?"bg-gm-status-success-bg text-gm-status-success":"bg-gm-status-danger-bg text-gm-status-danger"),children:B})]}),T&&s.jsx("p",{className:"text-[10px] text-gm-text-tertiary mt-1",children:T}),J&&s.jsxs("div",{className:"mt-2 p-2 bg-gm-surface-secondary rounded-lg space-y-1",children:[J.description&&s.jsx("p",{className:"text-[10px] text-gm-text-primary",children:String(J.description)}),Array.isArray(J.useCases)&&J.useCases.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1",children:J.useCases.map((pe,st)=>s.jsx("span",{className:"text-[9px] px-1 py-0.5 rounded bg-gm-surface-hover text-gm-text-tertiary",children:pe},st))})]})]}),ce&&s.jsxs("div",{className:"flex gap-1 shrink-0",children:[s.jsx("button",{onClick:()=>Ce.mutate(String(d.id),{onSuccess:()=>O.success("Enriched")}),disabled:Ce.isPending,className:"p-1.5 rounded-lg bg-blue-600/10 text-gm-interactive-primary hover:bg-blue-600/20 transition-colors",title:"AI Enrich",children:s.jsx(_e,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>K.mutate({id:String(d.id)},{onSuccess:()=>O.success("Approved")}),disabled:K.isPending,className:"p-1.5 rounded-lg bg-gm-status-success-bg text-gm-status-success hover:bg-green-500/20 transition-colors",children:s.jsx(Wt,{className:"w-3.5 h-3.5"})}),s.jsx("button",{onClick:()=>be.mutate({id:String(d.id)},{onSuccess:()=>O.success("Rejected")}),disabled:be.isPending,className:"p-1.5 rounded-lg bg-gm-status-danger-bg text-gm-status-danger hover:bg-red-500/20 transition-colors",children:s.jsx(gt,{className:"w-3.5 h-3.5"})})]})]})},v)})})]}),a==="stats"&&s.jsx("div",{className:"space-y-4",children:g.isLoading?s.jsx(R,{className:"w-5 h-5 animate-spin text-gm-interactive-primary mx-auto"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-3 gap-3",children:Object.entries(Nr).filter(([,d])=>typeof d=="number").slice(0,9).map(([d,v])=>s.jsxs("div",{className:"bg-gm-surface-secondary rounded-xl p-3 border border-gm-border-primary",children:[s.jsx("p",{className:"text-lg font-bold text-gm-text-primary",children:String(v)}),s.jsx("p",{className:"text-[10px] text-gm-text-tertiary capitalize",children:d.replace(/_/g," ")})]},d))}),V.length>0&&s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gm-text-primary flex items-center gap-1.5",children:[s.jsx(it,{className:"w-3.5 h-3.5"})," Entity Types by Instance Count"]}),s.jsx("div",{className:"space-y-1.5",children:V.slice(0,10).map(d=>{const v=String(d.name||d.type||d.label||"?"),G=Number(d.count||d.instances||d.nodeCount||0),L=Math.max(...V.slice(0,10).map(T=>Number(T.count||T.instances||T.nodeCount||0)),1);return s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[10px] text-gm-text-tertiary w-24 truncate text-right",children:v}),s.jsx("div",{className:"flex-1 h-4 bg-gm-surface-secondary rounded overflow-hidden",children:s.jsx("div",{className:"h-full rounded transition-all",style:{width:`${Math.max(G/L*100,2)}%`,backgroundColor:ee(v,"#6366f1")}})}),s.jsx("span",{className:"text-[10px] font-mono text-gm-text-tertiary w-8 text-right",children:G})]},v)})})]}),ae.length>0&&s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gm-text-primary flex items-center gap-1.5",children:[s.jsx(Ue,{className:"w-3.5 h-3.5"})," Relation Types by Instance Count"]}),s.jsx("div",{className:"space-y-1.5",children:ae.slice(0,10).map(d=>{const v=String(d.name||d.type||d.label||"?"),G=Number(d.count||d.instances||d.edgeCount||0),L=Math.max(...ae.slice(0,10).map(T=>Number(T.count||T.instances||T.edgeCount||0)),1);return s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[10px] text-gm-text-tertiary w-24 truncate text-right",children:v}),s.jsx("div",{className:"flex-1 h-4 bg-gm-surface-secondary rounded overflow-hidden",children:s.jsx("div",{className:"h-full rounded bg-gm-interactive-primary/70 transition-all",style:{width:`${Math.max(G/L*100,2)}%`}})}),s.jsx("span",{className:"text-[10px] font-mono text-gm-text-tertiary w-8 text-right",children:G})]},v)})})]}),oe>0&&s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(Me,{className:"w-4 h-4 text-gm-interactive-primary"}),s.jsx("h4",{className:"text-xs font-semibold text-gm-text-primary",children:"Compliance Score"}),s.jsxs("span",{className:W("text-sm font-bold ml-auto",oe>=80?"text-gm-status-success":oe>=50?"text-gm-status-warning":"text-gm-status-danger"),children:[oe,"%"]})]}),s.jsx("div",{className:"w-full h-2 bg-gm-surface-secondary rounded-full overflow-hidden",children:s.jsx("div",{className:W("h-full rounded-full transition-all",oe>=80?"bg-gm-status-success":oe>=50?"bg-gm-status-warning":"bg-gm-status-danger"),style:{width:`${oe}%`}})})]}),Ne.length>0&&s.jsxs("div",{className:"bg-[var(--gm-status-warning-bg)] border border-yellow-500/20 rounded-xl p-4",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gm-status-warning mb-2 flex items-center gap-1.5",children:[s.jsx(It,{className:"w-3.5 h-3.5"})," Compliance Issues (",Ne.length,")"]}),s.jsxs("div",{className:"space-y-1.5",children:[Ne.slice(0,8).map((d,v)=>s.jsx("p",{className:"text-xs text-gm-text-primary",children:String(d.message||d.description||JSON.stringify(d))},v)),Ne.length>8&&s.jsxs("p",{className:"text-[10px] text-gm-text-tertiary",children:["+",Ne.length-8," more"]})]})]}),s.jsxs("button",{onClick:()=>k.refetch(),disabled:k.isFetching,className:"px-3 py-1.5 rounded-lg bg-gm-surface-secondary border border-gm-border-primary text-gm-text-primary text-xs font-medium hover:bg-gm-surface-hover disabled:opacity-50 flex items-center gap-1.5 transition-colors",children:[k.isFetching?s.jsx(R,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Me,{className:"w-3.5 h-3.5"})," Check Compliance"]})]})}),a==="tools"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gm-text-primary flex items-center gap-1.5",children:[s.jsx(Pt,{className:"w-3.5 h-3.5"})," Extract Ontology from Graph"]}),s.jsx("p",{className:"text-[10px] text-gm-text-tertiary",children:"Reverse-engineer the ontology schema from existing graph data to discover entity types and relationships that exist in practice."}),s.jsxs("button",{onClick:()=>ue.mutate(void 0,{onSuccess:d=>{const v=d,G=v.notInSchema||v.extracted?.notInSchema||[];O.success(`Extraction complete${G.length?`  ${G.length} types not in schema`:""}`)},onError:()=>O.error("Extraction failed")}),disabled:ue.isPending,className:"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover disabled:opacity-50 flex items-center gap-1.5 transition-colors",children:[ue.isPending?s.jsx(R,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Pt,{className:"w-3.5 h-3.5"})," Extract"]})]}),s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gm-text-primary flex items-center gap-1.5",children:[s.jsx(Oe,{className:"w-3.5 h-3.5"})," Schema vs Graph Diff"]}),s.jsx("p",{className:"text-[10px] text-gm-text-tertiary",children:"Compare the defined ontology schema with what actually exists in the graph database."}),s.jsxs("button",{onClick:()=>C.refetch(),disabled:C.isFetching,className:"px-3 py-1.5 rounded-lg bg-gm-surface-secondary border border-gm-border-primary text-gm-text-primary text-xs font-medium hover:bg-gm-surface-hover disabled:opacity-50 flex items-center gap-1.5 transition-colors",children:[C.isFetching?s.jsx(R,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Oe,{className:"w-3.5 h-3.5"})," Run Diff"]}),!C.isLoading&&Object.keys(St).length>0&&s.jsx("div",{className:"space-y-2 text-xs mt-2",children:Object.entries(St).map(([d,v])=>s.jsxs("div",{children:[s.jsx("span",{className:"text-gm-text-tertiary capitalize font-medium",children:d.replace(/_/g," ")}),s.jsx("pre",{className:"text-[10px] text-gm-text-primary mt-1 bg-gm-surface-secondary rounded-lg p-2 overflow-x-auto max-h-40",children:typeof v=="string"?v:JSON.stringify(v,null,2)})]},d))})]}),s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gm-text-primary flex items-center gap-1.5",children:[s.jsx(zt,{className:"w-3.5 h-3.5"})," Merge & Update"]}),s.jsx("p",{className:"text-[10px] text-gm-text-tertiary",children:"Merge extracted ontology back into the schema, adding missing entity and relation types."}),s.jsxs("button",{onClick:()=>{ue.mutate(void 0,{onSuccess:d=>{const v=d;Je.mutate({source:v.extracted||v},{onSuccess:()=>O.success("Ontology merged successfully"),onError:()=>O.error("Merge failed")})},onError:()=>O.error("Extract failed before merge")})},disabled:ue.isPending||Je.isPending,className:"px-3 py-1.5 rounded-lg bg-gm-status-warning-bg text-gm-status-warning text-xs font-medium hover:bg-yellow-500/20 disabled:opacity-50 flex items-center gap-1.5 transition-colors",children:[ue.isPending||Je.isPending?s.jsx(R,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(zt,{className:"w-3.5 h-3.5"})," Extract & Merge"]})]}),s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gm-text-primary flex items-center gap-1.5",children:[s.jsx(It,{className:"w-3.5 h-3.5 text-gm-status-warning"})," Unused Types"]}),s.jsxs("button",{onClick:()=>I.refetch(),disabled:I.isFetching,className:"px-3 py-1.5 rounded-lg bg-gm-surface-secondary border border-gm-border-primary text-gm-text-primary text-xs font-medium hover:bg-gm-surface-hover disabled:opacity-50 flex items-center gap-1.5 transition-colors mb-2",children:[I.isFetching?s.jsx(R,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(nt,{className:"w-3.5 h-3.5"})," Find Unused"]}),je.length>0&&s.jsxs("div",{children:[s.jsxs("p",{className:"text-[10px] text-gm-text-tertiary uppercase tracking-wider mb-1.5",children:["Entities (",je.length,")"]}),s.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:je.map(d=>s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-warning-bg text-gm-status-warning font-medium",children:d},d))}),s.jsxs("button",{onClick:()=>le.mutate({entities:je},{onSuccess:()=>O.success("Unused entities removed")}),disabled:le.isPending,className:"px-3 py-1.5 rounded-lg bg-gm-status-danger-bg text-gm-status-danger text-xs font-medium hover:bg-red-500/20 disabled:opacity-50 flex items-center gap-1.5 transition-colors",children:[le.isPending?s.jsx(R,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Ut,{className:"w-3.5 h-3.5"})," Remove Entities"]})]}),Ee.length>0&&s.jsxs("div",{children:[s.jsxs("p",{className:"text-[10px] text-gm-text-tertiary uppercase tracking-wider mb-1.5",children:["Relations (",Ee.length,")"]}),s.jsx("div",{className:"flex flex-wrap gap-1.5 mb-2",children:Ee.map(d=>s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-status-warning-bg text-gm-status-warning font-medium",children:d},d))}),s.jsxs("button",{onClick:()=>le.mutate({relations:Ee},{onSuccess:()=>O.success("Unused relations removed")}),disabled:le.isPending,className:"px-3 py-1.5 rounded-lg bg-gm-status-danger-bg text-gm-status-danger text-xs font-medium hover:bg-red-500/20 disabled:opacity-50 flex items-center gap-1.5 transition-colors",children:[le.isPending?s.jsx(R,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Ut,{className:"w-3.5 h-3.5"})," Remove Relations"]})]}),je.length===0&&Ee.length===0&&!I.isFetching&&s.jsx("p",{className:"text-xs text-gm-text-tertiary",children:'All types are in use (or click "Find Unused" to check).'})]})]}),a==="jobs"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(Oe,{className:"w-4 h-4 text-gm-interactive-primary"}),s.jsx("h4",{className:"text-xs font-semibold text-gm-text-primary",children:"Background Worker"}),s.jsx("div",{className:W("ml-auto px-2 py-0.5 rounded-full text-[9px] font-medium",H.status==="running"||H.running?"bg-gm-status-success-bg text-gm-status-success":"bg-gm-surface-secondary text-gm-text-tertiary"),children:String(H.status||(H.running?"Running":"Idle"))})]}),S.isLoading?s.jsx(R,{className:"w-4 h-4 animate-spin"}):s.jsxs("div",{className:"grid grid-cols-3 gap-3 text-xs",children:[H.lastRun&&s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] text-gm-text-tertiary",children:"Last Run"}),s.jsx("p",{className:"text-gm-text-primary font-medium",children:new Date(String(H.lastRun||H.last_run)).toLocaleString()})]}),H.nextRun&&s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] text-gm-text-tertiary",children:"Next Run"}),s.jsx("p",{className:"text-gm-text-primary font-medium",children:new Date(String(H.nextRun||H.next_run)).toLocaleString()})]}),(H.totalRuns||H.total_runs)&&s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] text-gm-text-tertiary",children:"Total Runs"}),s.jsx("p",{className:"text-gm-text-primary font-medium",children:String(H.totalRuns||H.total_runs)})]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs("button",{onClick:()=>re.mutate({type:"full_analysis"},{onSuccess:()=>O.success("Full analysis triggered")}),disabled:re.isPending,className:"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover disabled:opacity-50 flex items-center gap-1.5 transition-colors",children:[re.isPending?s.jsx(R,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(_e,{className:"w-3.5 h-3.5"})," Full Analysis"]}),s.jsxs("button",{onClick:()=>re.mutate({type:"inference"},{onSuccess:()=>O.success("Inference triggered")}),disabled:re.isPending,className:"px-3 py-1.5 rounded-lg bg-gm-surface-secondary border border-gm-border-primary text-gm-text-primary text-xs font-medium hover:bg-gm-surface-hover disabled:opacity-50 flex items-center gap-1.5 transition-colors",children:[s.jsx(Se,{className:"w-3.5 h-3.5"})," Inference Rules"]}),s.jsxs("button",{onClick:()=>re.mutate({type:"dedup"},{onSuccess:()=>O.success("Dedup triggered")}),disabled:re.isPending,className:"px-3 py-1.5 rounded-lg bg-gm-surface-secondary border border-gm-border-primary text-gm-text-primary text-xs font-medium hover:bg-gm-surface-hover disabled:opacity-50 flex items-center gap-1.5 transition-colors",children:[s.jsx(Pe,{className:"w-3.5 h-3.5"})," Deduplication"]}),s.jsxs("button",{onClick:()=>re.mutate({type:"gap_detection"},{onSuccess:()=>O.success("Gap detection triggered")}),disabled:re.isPending,className:"px-3 py-1.5 rounded-lg bg-gm-surface-secondary border border-gm-border-primary text-gm-text-primary text-xs font-medium hover:bg-gm-surface-hover disabled:opacity-50 flex items-center gap-1.5 transition-colors",children:[s.jsx(nt,{className:"w-3.5 h-3.5"})," Gap Detection"]}),s.jsxs("button",{onClick:()=>we.mutate(void 0,{onSuccess:()=>O.success("Sync triggered")}),disabled:we.isPending,className:"px-3 py-1.5 rounded-lg bg-gm-surface-secondary border border-gm-border-primary text-gm-text-primary text-xs font-medium hover:bg-gm-surface-hover disabled:opacity-50 flex items-center gap-1.5 transition-colors",children:[s.jsx(Re,{className:"w-3.5 h-3.5"})," Force Sync"]})]}),s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gm-text-primary flex items-center gap-1.5",children:[s.jsx(fs,{className:"w-3.5 h-3.5"})," Scheduled Jobs"]}),h.isLoading?s.jsx(R,{className:"w-4 h-4 animate-spin"}):At.length===0?s.jsx("p",{className:"text-xs text-gm-text-tertiary",children:"No scheduled jobs configured"}):s.jsx("div",{className:"space-y-2",children:At.map((d,v)=>{const G=String(d.name||d.type||d.id||""),L=!!(d.enabled??d.active??!0),T=String(d.interval||d.cron||d.schedule||""),P=d.lastRun||d.last_run,B=String(d.status||(L?"active":"paused")),J=Number(d.stats&&d.stats.totalRuns)||Number(d.total_runs||0);return s.jsxs("div",{className:"flex items-center gap-3 bg-gm-surface-secondary rounded-lg p-2.5",children:[s.jsx("button",{onClick:()=>vt.mutate(String(d.id),{onSuccess:()=>O.success(`Job ${L?"disabled":"enabled"}`)}),disabled:vt.isPending,className:W("p-1 rounded-md transition-colors",L?"text-gm-status-success hover:bg-green-500/10":"text-gm-text-tertiary hover:bg-gm-surface-hover"),children:L?s.jsx(As,{className:"w-3.5 h-3.5"}):s.jsx(Ss,{className:"w-3.5 h-3.5"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-xs font-medium text-gm-text-primary",children:G}),s.jsx("span",{className:W("text-[9px] px-1 py-0.5 rounded",L?"bg-gm-status-success-bg text-gm-status-success":"bg-gm-surface-hover text-gm-text-tertiary"),children:B})]}),s.jsxs("div",{className:"flex gap-3 text-[10px] text-gm-text-tertiary mt-0.5",children:[T&&s.jsx("span",{children:T}),P&&s.jsxs("span",{children:["Last: ",new Date(String(P)).toLocaleString()]}),J>0&&s.jsxs("span",{children:[J," runs"]})]})]}),s.jsx("button",{onClick:()=>re.mutate({type:String(d.type||d.id)},{onSuccess:()=>O.success("Job triggered")}),disabled:re.isPending,className:"p-1.5 rounded-lg bg-gm-interactive-primary/10 text-gm-interactive-primary hover:bg-gm-interactive-primary/20 transition-colors",title:"Run now",children:s.jsx(Ft,{className:"w-3 h-3"})})]},v)})})]}),s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gm-text-primary flex items-center gap-1.5",children:[s.jsx(ge,{className:"w-3.5 h-3.5"})," Execution Log"]}),f.isLoading?s.jsx(R,{className:"w-4 h-4 animate-spin"}):Gt.length===0?s.jsx("p",{className:"text-xs text-gm-text-tertiary",children:"No execution history"}):s.jsx("div",{className:"space-y-1.5 max-h-60 overflow-y-auto",children:Gt.slice(0,20).map((d,v)=>{const G=String(d.jobType||d.job_type||d.type||""),L=String(d.status||""),T=d.startedAt||d.started_at||d.created_at,P=Number(d.duration||d.elapsed_ms||0),B=String(d.error||"");return s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("div",{className:W("w-1.5 h-1.5 rounded-full shrink-0",L==="completed"?"bg-gm-status-success":L==="failed"?"bg-gm-status-danger":L==="started"?"bg-gm-status-warning animate-pulse":"bg-gm-text-tertiary")}),s.jsx("span",{className:"text-gm-text-primary font-medium w-24 shrink-0 truncate",children:G}),s.jsx("span",{className:W("text-[10px] w-16 shrink-0",L==="completed"?"text-gm-status-success":L==="failed"?"text-gm-status-danger":"text-gm-text-tertiary"),children:L}),P>0&&s.jsx("span",{className:"text-[10px] text-gm-text-tertiary w-16 shrink-0",children:P>1e3?`${(P/1e3).toFixed(1)}s`:`${P}ms`}),T&&s.jsx("span",{className:"text-[10px] text-gm-text-tertiary",children:new Date(String(T)).toLocaleString()}),B&&L==="failed"&&s.jsx("span",{className:"text-[10px] text-gm-status-danger truncate max-w-[150px]",title:B,children:B})]},v)})})]})]}),a==="changes"&&s.jsxs("div",{className:"space-y-4",children:[!x.isLoading&&Object.keys(Te).length>0&&s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gm-text-primary mb-2 flex items-center gap-1.5",children:[s.jsx(Re,{className:"w-3.5 h-3.5"})," Sync Status"]}),s.jsx("div",{className:"grid grid-cols-2 gap-2 text-xs",children:Object.entries(Te).map(([d,v])=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-gm-text-tertiary capitalize shrink-0",children:d.replace(/_/g," ")}),s.jsx("span",{className:"text-gm-text-primary text-[10px] truncate",children:v==null?"":String(v)})]},d))})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-xs font-semibold text-gm-text-primary mb-3 flex items-center gap-1.5",children:[s.jsx(ge,{className:"w-3.5 h-3.5"})," Change Log"]}),D.isLoading?s.jsx(R,{className:"w-5 h-5 animate-spin text-gm-interactive-primary mx-auto"}):kt.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(ge,{className:"w-10 h-10 mx-auto mb-3 text-gray-600"}),s.jsx("p",{className:"text-xs text-gm-text-tertiary",children:"No changes recorded"})]}):s.jsx("div",{className:"space-y-1.5",children:kt.slice(0,50).map((d,v)=>{const G=String(d.change_type||d.action||d.type||""),L=String(d.target_name||d.target||d.entity||""),T=String(d.reason||d.description||d.message||""),P=String(d.source||""),B=d.changed_at||d.created_at,J=G.includes("added")||G==="add",ce=G.includes("removed")||G==="remove";return s.jsxs("div",{className:"flex items-start gap-2 bg-[var(--gm-surface-hover)] rounded-lg p-2.5 border border-gm-border-primary",children:[s.jsx("div",{className:W("w-2 h-2 rounded-full mt-1.5 shrink-0",J?"bg-gm-status-success":ce?"bg-gm-status-danger":"bg-gm-status-warning")}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-gm-surface-secondary text-gm-text-tertiary font-medium",children:G.replace(/_/g," ")}),L&&s.jsx("span",{className:"text-xs font-medium text-gm-text-primary",children:L})]}),T&&s.jsx("p",{className:"text-[10px] text-gm-text-tertiary mt-0.5",children:T}),s.jsxs("div",{className:"flex gap-2 mt-0.5 text-[9px] text-gm-text-tertiary",children:[P&&s.jsx("span",{children:P}),B&&s.jsx("span",{children:new Date(String(B)).toLocaleString()})]})]})]},v)})})]})]}),a==="inference"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-4 gap-3",children:[{label:"Runs",value:ke.runsCompleted||0},{label:"Inferred",value:ke.totalRelationshipsInferred||0},{label:"Errors",value:ke.totalErrors||0},{label:"Last Run",value:ke.lastRun?new Date(String(ke.lastRun)).toLocaleDateString():""}].map((d,v)=>s.jsxs("div",{className:"bg-gm-surface-secondary rounded-xl p-3 border border-gm-border-primary",children:[s.jsx("p",{className:"text-lg font-bold text-gm-text-primary",children:String(d.value)}),s.jsx("p",{className:"text-[10px] text-gm-text-tertiary",children:d.label})]},v))}),s.jsx("div",{className:"flex gap-2",children:s.jsxs("button",{onClick:()=>ve.mutate(void 0,{onSuccess:()=>O.success("All inference rules executed")}),disabled:ve.isPending,className:"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover disabled:opacity-50 flex items-center gap-1.5 transition-colors",children:[ve.isPending?s.jsx(R,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Se,{className:"w-3.5 h-3.5"})," Run All Rules"]})}),s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gm-text-primary flex items-center gap-1.5",children:[s.jsx(Se,{className:"w-3.5 h-3.5"})," Defined Rules"]}),w.isLoading?s.jsx(R,{className:"w-4 h-4 animate-spin"}):$t.length===0&&Dt.length===0?s.jsx("p",{className:"text-xs text-gm-text-tertiary",children:"No inference rules defined"}):s.jsxs("div",{className:"space-y-2",children:[$t.map((d,v)=>s.jsxs("div",{className:"flex items-center gap-3 bg-gm-surface-secondary rounded-lg p-2.5",children:[s.jsx(Se,{className:"w-3.5 h-3.5 text-gm-status-warning shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("span",{className:"text-xs font-medium text-gm-text-primary",children:String(d.name||d.id||"")}),d.description&&s.jsx("p",{className:"text-[10px] text-gm-text-tertiary",children:String(d.description)}),d.type&&s.jsx("span",{className:"text-[9px] px-1 py-0.5 rounded bg-gm-surface-hover text-gm-text-tertiary ml-1",children:String(d.type)})]}),s.jsx("button",{onClick:()=>ve.mutate(String(d.name||d.id),{onSuccess:()=>O.success(`Rule "${d.name}" executed`)}),disabled:ve.isPending,className:"p-1.5 rounded-lg bg-gm-interactive-primary/10 text-gm-interactive-primary hover:bg-gm-interactive-primary/20 transition-colors",title:"Run rule",children:s.jsx(Ft,{className:"w-3 h-3"})})]},v)),Dt.map((d,v)=>s.jsxs("div",{className:"bg-gm-surface-secondary rounded-lg p-2.5",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"text-[9px] px-1 py-0.5 rounded bg-blue-600/10 text-gm-interactive-primary font-medium",children:"Cypher"}),s.jsx("span",{className:"text-xs font-medium text-gm-text-primary",children:String(d.name||"")})]}),d.description&&s.jsx("p",{className:"text-[10px] text-gm-text-tertiary",children:String(d.description)}),d.cypher&&s.jsx("pre",{className:"text-[9px] text-gm-text-tertiary mt-1 bg-gm-surface-hover rounded p-1.5 overflow-x-auto",children:String(d.cypher)})]},`c-${v}`))]})]}),Ct.length>0&&s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gm-text-primary flex items-center gap-1.5",children:[s.jsx(xs,{className:"w-3.5 h-3.5"})," Available Runtime Rules"]}),s.jsx("div",{className:"space-y-1.5",children:Ct.map((d,v)=>s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:"text-gm-text-primary font-medium",children:String(d.name||"")}),d.description&&s.jsxs("span",{className:"text-[10px] text-gm-text-tertiary",children:[" ",String(d.description)]})]},v))})]})]}),a==="embeddings"&&s.jsx("div",{className:"space-y-4",children:$.isLoading?s.jsx(R,{className:"w-5 h-5 animate-spin text-gm-interactive-primary mx-auto"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid grid-cols-4 gap-3",children:[{label:"Total Entities",value:Q.totalEntities||0},{label:"With Embeddings",value:Q.totalWithEmbeddings||0},{label:"Coverage",value:`${Q.overallCoverage||0}%`},{label:"Model",value:String(Q.model||"N/A")}].map((d,v)=>s.jsxs("div",{className:"bg-gm-surface-secondary rounded-xl p-3 border border-gm-border-primary",children:[s.jsx("p",{className:"text-lg font-bold text-gm-text-primary",children:String(d.value)}),s.jsx("p",{className:"text-[10px] text-gm-text-tertiary",children:d.label})]},v))}),s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"text-xs font-semibold text-gm-text-primary",children:"Overall Coverage"}),s.jsxs("span",{className:W("text-sm font-bold",Number(Q.overallCoverage||0)>=80?"text-gm-status-success":Number(Q.overallCoverage||0)>=50?"text-gm-status-warning":"text-gm-status-danger"),children:[Q.overallCoverage||0,"%"]})]}),s.jsx("div",{className:"w-full h-3 bg-gm-surface-secondary rounded-full overflow-hidden",children:s.jsx("div",{className:W("h-full rounded-full transition-all",Number(Q.overallCoverage||0)>=80?"bg-gm-status-success":Number(Q.overallCoverage||0)>=50?"bg-gm-status-warning":"bg-gm-status-danger"),style:{width:`${Q.overallCoverage||0}%`}})}),s.jsxs("div",{className:"flex gap-3 mt-2 text-[10px] text-gm-text-tertiary",children:[s.jsxs("span",{children:["Dimensions: ",String(Q.dimensions||1024)]}),Number(Q.staleCount||0)>0&&s.jsxs("span",{className:"text-gm-status-warning",children:[Q.staleCount," stale"]})]})]}),s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gm-text-primary flex items-center gap-1.5",children:[s.jsx(it,{className:"w-3.5 h-3.5"})," Coverage by Type"]}),Object.keys(Lt).length===0?s.jsx("p",{className:"text-xs text-gm-text-tertiary",children:"No coverage data available"}):s.jsx("div",{className:"space-y-2",children:Object.entries(Lt).map(([d,v])=>{const G=Number(v.coverage||0),L=Number(v.total||0),T=Number(v.withEmbedding||0);return s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-gm-text-primary capitalize",children:d}),s.jsxs("span",{className:"text-[10px] text-gm-text-tertiary",children:[T,"/",L]})]}),s.jsxs("span",{className:W("text-[10px] font-medium",G>=80?"text-gm-status-success":G>=50?"text-gm-status-warning":"text-gm-status-danger"),children:[G,"%"]})]}),s.jsx("div",{className:"w-full h-1.5 bg-gm-surface-secondary rounded-full overflow-hidden",children:s.jsx("div",{className:W("h-full rounded-full transition-all",G>=80?"bg-gm-status-success":G>=50?"bg-gm-status-warning":"bg-gm-status-danger"),style:{width:`${G}%`}})})]},d)})})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs("button",{onClick:()=>Qe.mutate(void 0,{onSuccess:()=>O.success("Embedding regeneration queued for all types")}),disabled:Qe.isPending,className:"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-gm-text-on-brand text-xs font-medium hover:bg-gm-interactive-primary-hover disabled:opacity-50 flex items-center gap-1.5 transition-colors",children:[Qe.isPending?s.jsx(R,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Re,{className:"w-3.5 h-3.5"})," Regenerate All"]})})]})}),a==="shared"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary",children:[s.jsx("h4",{className:"text-xs font-semibold text-gm-text-primary mb-1",children:"Cross-Project Entities"}),s.jsx("p",{className:"text-[10px] text-gm-text-tertiary mb-3",children:"Shared entity types are visible across all projects. Toggle sharing per entity type."})]}),s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gm-text-primary flex items-center gap-1.5",children:[s.jsx(Pe,{className:"w-3.5 h-3.5"})," Entity Types"]}),m.isLoading?s.jsx(R,{className:"w-4 h-4 animate-spin"}):s.jsx("div",{className:"space-y-1.5",children:V.map((d,v)=>{const G=String(d.name||d.type||d.label||""),L=!!(d.sharedEntity||d.shared),T=ee(G,d.color?String(d.color):void 0);return s.jsxs("div",{className:"flex items-center gap-3 bg-gm-surface-secondary rounded-lg p-2",children:[s.jsx("div",{className:"w-5 h-5 rounded flex items-center justify-center text-white text-[8px] font-bold",style:{backgroundColor:T},children:G.charAt(0)}),s.jsx("span",{className:"text-xs font-medium text-gm-text-primary flex-1",children:G}),s.jsx("button",{onClick:()=>Nt.mutate({name:G,shared:!L},{onSuccess:()=>O.success(`${G} is now ${L?"project-only":"shared"}`)}),disabled:Nt.isPending,className:W("px-2 py-0.5 rounded-full text-[9px] font-medium transition-colors",L?"bg-gm-interactive-primary/10 text-gm-interactive-primary":"bg-gm-surface-hover text-gm-text-tertiary hover:bg-gm-surface-secondary"),children:L?"Shared":"Project Only"})]},v)})})]}),Tt.length>0&&s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gm-text-primary flex items-center gap-1.5",children:[s.jsx(Ue,{className:"w-3.5 h-3.5"})," Cross-Graph Relations"]}),s.jsx("div",{className:"space-y-1.5",children:Tt.map((d,v)=>s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("span",{className:"text-gm-text-primary font-medium",children:String(d.name||d.type||"")}),d.from&&s.jsxs("span",{className:"text-[10px] text-gm-text-tertiary",children:["(",String(d.from),"  ",String(d.to),")"]})]},v))})]}),tt.length>0&&s.jsxs("div",{className:"bg-blue-600/5 rounded-xl p-4 border border-blue-600/10",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gm-interactive-primary mb-2",children:[tt.length," Shared Entity Types"]}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:tt.map((d,v)=>s.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-gm-interactive-primary/10 text-gm-interactive-primary font-medium",children:String(d.name||"")},v))})]})]}),a==="versions"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gm-interactive-primary/10 flex items-center justify-center",children:s.jsx(ge,{className:"w-5 h-5 text-gm-interactive-primary"})}),s.jsxs("div",{children:[s.jsxs("h4",{className:"text-sm font-bold text-gm-text-primary",children:["Current Version: ",String(rt.currentVersion||"")]}),s.jsxs("p",{className:"text-[10px] text-gm-text-tertiary",children:[String(rt.totalChanges||0)," total changes recorded"]})]})]})}),s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gm-text-primary flex items-center gap-1.5",children:[s.jsx(ge,{className:"w-3.5 h-3.5"})," Version History"]}),U.isLoading?s.jsx(R,{className:"w-4 h-4 animate-spin"}):Ot.length===0?s.jsx("p",{className:"text-xs text-gm-text-tertiary",children:"No version snapshots recorded"}):s.jsx("div",{className:"space-y-2",children:Ot.map((d,v)=>s.jsxs("div",{className:"bg-gm-surface-secondary rounded-lg p-3 border border-gm-border-primary",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("span",{className:"text-xs font-bold text-gm-text-primary",children:["v",String(d.version||"?")]}),s.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-gm-surface-hover text-gm-text-tertiary",children:String(d.changeType||d.change_type||"").replace(/_/g," ")}),d.source&&s.jsx("span",{className:"text-[9px] text-gm-text-tertiary",children:String(d.source)})]}),d.reason&&s.jsx("p",{className:"text-[10px] text-gm-text-tertiary",children:String(d.reason)}),s.jsxs("div",{className:"flex gap-2 mt-1 text-[9px] text-gm-text-tertiary",children:[d.changedBy&&s.jsxs("span",{children:["by ",String(d.changedBy)]}),d.changedAt&&s.jsx("span",{children:new Date(String(d.changedAt)).toLocaleString()})]}),d.diff&&Object.keys(d.diff).length>0&&s.jsx("pre",{className:"text-[9px] text-gm-text-tertiary mt-2 bg-gm-surface-hover rounded p-2 overflow-x-auto max-h-20",children:JSON.stringify(d.diff,null,2)})]},v))})]})]}),a==="test"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gm-text-primary flex items-center gap-1.5",children:[s.jsx(Me,{className:"w-3.5 h-3.5"})," Validate Entity Against Schema"]}),s.jsx("p",{className:"text-[10px] text-gm-text-tertiary",children:"Test whether an entity object conforms to its type definition in the ontology schema."}),s.jsx("div",{className:"flex gap-2",children:s.jsxs("select",{value:Ye,onChange:d=>xr(d.target.value),className:"flex-shrink-0 w-40 px-2 py-1.5 text-xs bg-gm-surface-secondary border border-gm-border-primary rounded-lg text-gm-text-primary",children:[s.jsx("option",{value:"",children:"Select type..."}),V.map(d=>{const v=String(d.name||d.type||d.label||"");return s.jsx("option",{value:v,children:v},v)})]})}),s.jsx("textarea",{value:jt,onChange:d=>yr(d.target.value),rows:5,className:"w-full px-3 py-2 text-xs font-mono bg-gm-surface-secondary border border-gm-border-primary rounded-lg text-gm-text-primary resize-y",placeholder:'{"name": "example", "description": "..."}'}),s.jsxs("button",{disabled:!Ye||Y.isPending,onClick:()=>{try{const d=JSON.parse(jt);Y.mutate({type:Ye,entity:d})}catch{O.error("Invalid JSON")}},className:"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-white text-xs font-medium hover:opacity-90 disabled:opacity-50 flex items-center gap-1.5 transition-colors",children:[Y.isPending?s.jsx(R,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Me,{className:"w-3.5 h-3.5"})," Validate"]}),Y.data&&s.jsxs("div",{className:W("rounded-lg p-3 border text-xs",Y.data.valid?"bg-gm-status-success/10 border-gm-status-success/30 text-gm-status-success":"bg-gm-status-danger/10 border-gm-status-danger/30 text-gm-status-danger"),children:[s.jsx("div",{className:"flex items-center gap-1.5 font-semibold mb-1",children:Y.data.valid?s.jsxs(s.Fragment,{children:[s.jsx(Wt,{className:"w-3.5 h-3.5"})," Valid"]}):s.jsxs(s.Fragment,{children:[s.jsx(gt,{className:"w-3.5 h-3.5"})," Invalid"]})}),(Y.data.errors||[]).length>0&&s.jsx("ul",{className:"mt-1 space-y-0.5 text-gm-text-primary",children:Y.data.errors.map((d,v)=>s.jsxs("li",{className:"text-[10px]",children:["- ",d]},v))}),(Y.data.missingRequired||[]).length>0&&s.jsxs("p",{className:"text-[10px] text-gm-text-primary mt-1",children:["Missing required: ",Y.data.missingRequired.join(", ")]}),(Y.data.unknownProperties||[]).length>0&&s.jsxs("p",{className:"text-[10px] text-gm-text-primary mt-1",children:["Unknown properties: ",Y.data.unknownProperties.join(", ")]})]})]}),s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gm-text-primary flex items-center gap-1.5",children:[s.jsx(ys,{className:"w-3.5 h-3.5"})," Extract Entities from Text (AI)"]}),s.jsx("p",{className:"text-[10px] text-gm-text-tertiary",children:"Paste any text and let the AI identify entities and relationships using the current ontology schema."}),s.jsx("textarea",{value:Xe,onChange:d=>br(d.target.value),rows:6,className:"w-full px-3 py-2 text-xs bg-gm-surface-secondary border border-gm-border-primary rounded-lg text-gm-text-primary resize-y",placeholder:"Paste meeting notes, a document, or any text here..."}),s.jsxs("button",{disabled:!Xe.trim()||X.isPending,onClick:()=>X.mutate({text:Xe,existingEntities:V.map(d=>String(d.name||d.type||"")).filter(Boolean)}),className:"px-3 py-1.5 rounded-lg bg-gm-interactive-primary text-white text-xs font-medium hover:opacity-90 disabled:opacity-50 flex items-center gap-1.5 transition-colors",children:[X.isPending?s.jsx(R,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(Ie,{className:"w-3.5 h-3.5"})," Extract"]}),X.data&&s.jsxs("div",{className:"space-y-3",children:[(X.data.entities||[]).length>0&&s.jsxs("div",{className:"bg-gm-surface-secondary rounded-lg p-3 border border-gm-border-primary space-y-2",children:[s.jsxs("h5",{className:"text-[10px] font-semibold text-gm-text-primary",children:["Extracted Entities (",X.data.entities.length,")"]}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:X.data.entities.map((d,v)=>s.jsxs("span",{className:"px-2 py-1 rounded-lg text-[10px] font-medium border border-gm-border-primary bg-gm-surface-hover text-gm-text-primary",children:[s.jsx("span",{className:"inline-block w-2 h-2 rounded-full mr-1",style:{backgroundColor:ee(String(d.type||d.entityType||""),"#6366f1")}}),String(d.name||d.value||"?"),s.jsx("span",{className:"ml-1 text-gm-text-tertiary",children:String(d.type||d.entityType||"")})]},v))})]}),(X.data.relationships||[]).length>0&&s.jsxs("div",{className:"bg-gm-surface-secondary rounded-lg p-3 border border-gm-border-primary space-y-2",children:[s.jsxs("h5",{className:"text-[10px] font-semibold text-gm-text-primary",children:["Extracted Relationships (",X.data.relationships.length,")"]}),s.jsx("div",{className:"space-y-1",children:X.data.relationships.map((d,v)=>s.jsxs("div",{className:"flex items-center gap-1.5 text-[10px] text-gm-text-primary",children:[s.jsx("span",{className:"font-medium",children:String(d.from||d.source||"?")}),s.jsx("span",{className:"px-1.5 py-0.5 rounded bg-gm-interactive-primary/10 text-gm-interactive-primary font-mono text-[9px]",children:String(d.type||d.relationship||"?")}),s.jsx("span",{className:"font-medium",children:String(d.to||d.target||"?")}),d.confidence&&s.jsxs("span",{className:"text-gm-text-tertiary",children:["(",Math.round(Number(d.confidence)*100),"%)"]})]},v))})]}),(X.data.entities||[]).length===0&&(X.data.relationships||[]).length===0&&s.jsx("p",{className:"text-xs text-gm-text-tertiary",children:"No entities or relationships found in the provided text."})]})]}),s.jsxs("div",{className:"bg-[var(--gm-surface-hover)] rounded-xl p-4 border border-gm-border-primary space-y-3",children:[s.jsxs("h4",{className:"text-xs font-semibold text-gm-text-primary flex items-center gap-1.5",children:[s.jsx(at,{className:"w-3.5 h-3.5"})," Embedding Preview"]}),s.jsx("p",{className:"text-[10px] text-gm-text-tertiary",children:"Preview the enriched text that would be generated for an entity before converting it to a vector embedding."}),s.jsx("div",{className:"flex gap-2",children:s.jsxs("select",{value:Ze,onChange:d=>wr(d.target.value),className:"flex-shrink-0 w-40 px-2 py-1.5 text-xs bg-gm-surface-secondary border border-gm-border-primary rounded-lg text-gm-text-primary",children:[s.jsx("option",{value:"",children:"Select type..."}),V.map(d=>{const v=String(d.name||d.type||d.label||"");return s.jsx("option",{value:v,children:v},v)})]})}),s.jsx("textarea",{value:Et,onChange:d=>vr(d.target.value),rows:4,className:"w-full px-3 py-2 text-xs font-mono bg-gm-surface-secondary border border-gm-border-primary rounded-lg text-gm-text-primary resize-y",placeholder:'{"name": "...", "description": "..."}'}),s.jsxs("button",{disabled:!Ze||he.isPending,onClick:()=>{try{const d=JSON.parse(Et);he.mutate({type:Ze,entity:d})}catch{O.error("Invalid JSON")}},className:"px-3 py-1.5 rounded-lg bg-gm-surface-secondary border border-gm-border-primary text-gm-text-primary text-xs font-medium hover:bg-gm-surface-hover disabled:opacity-50 flex items-center gap-1.5 transition-colors",children:[he.isPending?s.jsx(R,{className:"w-3.5 h-3.5 animate-spin"}):s.jsx(at,{className:"w-3.5 h-3.5"})," Preview Embedding Text"]}),he.data&&he.data.enrichedText&&s.jsxs("div",{className:"bg-gm-surface-secondary rounded-lg p-3 border border-gm-border-primary",children:[s.jsxs("h5",{className:"text-[10px] font-semibold text-gm-text-primary mb-2 flex items-center gap-1.5",children:[s.jsx(_e,{className:"w-3 h-3"})," Generated Embedding Text"]}),s.jsx("pre",{className:"text-[10px] text-gm-text-primary whitespace-pre-wrap font-mono leading-relaxed max-h-40 overflow-y-auto",children:String(he.data.enrichedText)})]})]})]})]}),u&&s.jsx(Yn,{entity:u,onClose:()=>l(null)})]})}export{M as G,fr as N,fi as P,Kn as T,Un as a,Ue as b,Pn as c,In as d,$s as e,bi as f,yi as g,Mn as r,xi as t};
//# sourceMappingURL=GraphOntology-DgitACNp.js.map
