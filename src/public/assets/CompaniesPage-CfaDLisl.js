import{n as yt,g as bt,r as o,j as e}from"./vendor-react-CZ-WyKWZ.js";import{I as J}from"./input-Dy89fHlR.js";import{m as ge,t as p}from"./vendor-ui-BS9QKitv.js";import{fD as jt,fE as Nt,fF as wt,fG as $e,c as x,L as Q,a9 as Ct,w as Be,Z as lt,a8 as kt,fH as He,R as it,ab as _t,fI as St,aa as ot,aX as tt,T as Et,aV as Ee}from"./main-B3DZn5B_.js";import{A as Tt}from"./AvatarUpload-gChxksHY.js";import{E as Pt}from"./ErrorState-to3SSPKs.js";import{A as At,a as Rt,b as Ot,c as Lt,d as Dt,e as It,f as zt,g as Mt}from"./alert-dialog-Gr4VVHbM.js";import{c as Ye,P as at}from"./vendor-markdown-Cu8AM8lU.js";import{E as Ft}from"./eye-RsgK9PvA.js";import{P as Kt}from"./pen-UIQK8jUR.js";import{A as Ge}from"./arrow-left-BUrpeDp8.js";import{G as ct}from"./globe-BYeHHetr.js";import{E as dt}from"./external-link-XVR2-B8g.js";import{S as Ke}from"./sparkles-D3iJUPqd.js";import{a as Ut,M as $t}from"./minimize-2-DwBVqABo.js";import{U as Bt}from"./upload-C00nhlDV.js";import{S as Ht}from"./save-Dic_e7Eu.js";import{T as Yt}from"./ProfilePage-CS9VYIeJ.js";import{P as Gt}from"./printer-B8caXq_N.js";import"./vendor-supabase-Bpw_79gH.js";import"./vendor-query-DSf7I7Ei.js";import"./vendor-router-D_XeKoA_.js";import"./link-2-CvGSt01y.js";import"./monitor-CRPRfiU8.js";import"./key-DhTDYaIg.js";import"./circle-x-qKfRTqT4.js";import"./lightbulb-0ivikuj5.js";import"./list-checks-Bm0gBGfe.js";const Wt=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],qt=Ye("code-xml",Wt);const Vt=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],he=Ye("palette",Vt);const Qt=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Zt=Ye("rotate-ccw",Qt);var D={},st;function Xt(){if(st)return D;st=1;var s=D&&D.__assign||function(){return s=Object.assign||function(d){for(var r,y=1,N=arguments.length;y<N;y++){r=arguments[y];for(var w in r)Object.prototype.hasOwnProperty.call(r,w)&&(d[w]=r[w])}return d},s.apply(this,arguments)},g=D&&D.__createBinding||(Object.create?(function(d,r,y,N){N===void 0&&(N=y);var w=Object.getOwnPropertyDescriptor(r,y);(!w||("get"in w?!r.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return r[y]}}),Object.defineProperty(d,N,w)}):(function(d,r,y,N){N===void 0&&(N=y),d[N]=r[y]})),b=D&&D.__setModuleDefault||(Object.create?(function(d,r){Object.defineProperty(d,"default",{enumerable:!0,value:r})}):function(d,r){d.default=r}),j=D&&D.__importStar||function(d){if(d&&d.__esModule)return d;var r={};if(d!=null)for(var y in d)y!=="default"&&Object.prototype.hasOwnProperty.call(d,y)&&g(r,d,y);return b(r,d),r},n=D&&D.__rest||function(d,r){var y={};for(var N in d)Object.prototype.hasOwnProperty.call(d,N)&&r.indexOf(N)<0&&(y[N]=d[N]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var w=0,N=Object.getOwnPropertySymbols(d);w<N.length;w++)r.indexOf(N[w])<0&&Object.prototype.propertyIsEnumerable.call(d,N[w])&&(y[N[w]]=d[N[w]]);return y};Object.defineProperty(D,"__esModule",{value:!0});var u=j(yt()),T=89,v=90,h=77,S=57,I=219,C=222,P=192,G=100,z=3e3,l=typeof window<"u"&&"navigator"in window&&/Win/i.test(navigator.platform),E=typeof window<"u"&&"navigator"in window&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),M="npm__react-simple-code-editor__textarea",O=`
/**
 * Reset the text fill color so that placeholder is visible
 */
.`.concat(M,`:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .`).concat(M,` {
    color: transparent !important;
  }

  .`).concat(M,`::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
`),ee=u.forwardRef(function(r,y){var N=r.autoFocus,w=r.disabled,te=r.form,i=r.highlight,B=r.ignoreTabKey,H=B===void 0?!1:B,ne=r.insertSpaces,Z=ne===void 0?!0:ne,Te=r.maxLength,ve=r.minLength,Pe=r.name,ye=r.onBlur,Ae=r.onClick,Re=r.onFocus,be=r.onKeyDown,Oe=r.onKeyUp,le=r.onValueChange,W=r.padding,A=W===void 0?0:W,je=r.placeholder,Le=r.preClassName,De=r.readOnly,ce=r.required,a=r.style,L=r.tabSize,Ne=L===void 0?2:L,we=r.textareaClassName,Ce=r.textareaId,We=r.value,mt=n(r,["autoFocus","disabled","form","highlight","ignoreTabKey","insertSpaces","maxLength","minLength","name","onBlur","onClick","onFocus","onKeyDown","onKeyUp","onValueChange","padding","placeholder","preClassName","readOnly","required","style","tabSize","textareaClassName","textareaId","value"]),k=u.useRef({stack:[],offset:-1}),ke=u.useRef(null),qe=u.useState(!0),xt=qe[0],ut=qe[1],Ve={paddingTop:typeof A=="object"?A.top:A,paddingRight:typeof A=="object"?A.right:A,paddingBottom:typeof A=="object"?A.bottom:A,paddingLeft:typeof A=="object"?A.left:A},Ie=i(We),ae=function(t,f){return t.substring(0,f).split(`
`)},_e=u.useCallback(function(t,f){var c,m,_;f===void 0&&(f=!1);var R=k.current,q=R.stack,de=R.offset;if(q.length&&de>-1){k.current.stack=q.slice(0,de+1);var me=k.current.stack.length;if(me>G){var oe=me-G;k.current.stack=q.slice(oe,me),k.current.offset=Math.max(k.current.offset-oe,0)}}var Y=Date.now();if(f){var X=k.current.stack[k.current.offset];if(X&&Y-X.timestamp<z){var xe=/[^a-z0-9]([a-z0-9]+)$/i,F=(c=ae(X.value,X.selectionStart).pop())===null||c===void 0?void 0:c.match(xe),ue=(m=ae(t.value,t.selectionStart).pop())===null||m===void 0?void 0:m.match(xe);if(F?.[1]&&(!((_=ue?.[1])===null||_===void 0)&&_.startsWith(F[1]))){k.current.stack[k.current.offset]=s(s({},t),{timestamp:Y});return}}}k.current.stack.push(s(s({},t),{timestamp:Y})),k.current.offset++},[]),Qe=u.useCallback(function(){var t=ke.current;if(t){var f=t.value,c=t.selectionStart,m=t.selectionEnd;_e({value:f,selectionStart:c,selectionEnd:m})}},[_e]),ze=function(t){var f=ke.current;f&&(f.value=t.value,f.selectionStart=t.selectionStart,f.selectionEnd=t.selectionEnd,le?.(t.value))},ie=function(t){var f=ke.current,c=k.current.stack[k.current.offset];c&&f&&(k.current.stack[k.current.offset]=s(s({},c),{selectionStart:f.selectionStart,selectionEnd:f.selectionEnd})),_e(t),ze(t)},pt=function(){var t=k.current,f=t.stack,c=t.offset,m=f[c-1];m&&(ze(m),k.current.offset=Math.max(c-1,0))},ht=function(){var t=k.current,f=t.stack,c=t.offset,m=f[c+1];m&&(ze(m),k.current.offset=Math.min(c+1,f.length-1))},gt=function(t){if(!(be&&(be(t),t.defaultPrevented))){t.key==="Escape"&&t.currentTarget.blur();var f=t.currentTarget,c=f.value,m=f.selectionStart,_=f.selectionEnd,R=(Z?" ":"	").repeat(Ne);if(t.key==="Tab"&&!H&&xt)if(t.preventDefault(),t.shiftKey){var q=ae(c,m),de=q.length-1,me=ae(c,_).length-1,oe=c.split(`
`).map(function(pe,Xe){return Xe>=de&&Xe<=me&&pe.startsWith(R)?pe.substring(R.length):pe}).join(`
`);if(c!==oe){var Y=q[de];ie({value:oe,selectionStart:Y?.startsWith(R)?m-R.length:m,selectionEnd:_-(c.length-oe.length)})}}else if(m!==_){var q=ae(c,m),X=q.length-1,xe=ae(c,_).length-1,Y=q[X];ie({value:c.split(`
`).map(function(Je,et){return et>=X&&et<=xe?R+Je:Je}).join(`
`),selectionStart:Y&&/\S/.test(Y)?m+R.length:m,selectionEnd:_+R.length*(xe-X+1)})}else{var F=m+R.length;ie({value:c.substring(0,m)+R+c.substring(_),selectionStart:F,selectionEnd:F})}else if(t.key==="Backspace"){var ue=m!==_,vt=c.substring(0,m);if(vt.endsWith(R)&&!ue){t.preventDefault();var F=m-R.length;ie({value:c.substring(0,m-R.length)+c.substring(_),selectionStart:F,selectionEnd:F})}}else if(t.key==="Enter"){if(m===_){var Me=ae(c,m).pop(),Se=Me?.match(/^\s+/);if(Se?.[0]){t.preventDefault();var Ze=`
`+Se[0],F=m+Ze.length;ie({value:c.substring(0,m)+Ze+c.substring(_),selectionStart:F,selectionEnd:F})}}}else if(t.keyCode===S||t.keyCode===I||t.keyCode===C||t.keyCode===P){var V=void 0;t.keyCode===S&&t.shiftKey?V=["(",")"]:t.keyCode===I?t.shiftKey?V=["{","}"]:V=["[","]"]:t.keyCode===C?t.shiftKey?V=['"','"']:V=["'","'"]:t.keyCode===P&&!t.shiftKey&&(V=["`","`"]),m!==_&&V&&(t.preventDefault(),ie({value:c.substring(0,m)+V[0]+c.substring(m,_)+V[1]+c.substring(_),selectionStart:m,selectionEnd:_+2}))}else(E?t.metaKey&&t.keyCode===v:t.ctrlKey&&t.keyCode===v)&&!t.shiftKey&&!t.altKey?(t.preventDefault(),pt()):(E?t.metaKey&&t.keyCode===v&&t.shiftKey:l?t.ctrlKey&&t.keyCode===T:t.ctrlKey&&t.keyCode===v&&t.shiftKey)&&!t.altKey?(t.preventDefault(),ht()):t.keyCode===h&&t.ctrlKey&&(!E||t.shiftKey)&&(t.preventDefault(),ut(function(pe){return!pe}))}},ft=function(t){var f=t.currentTarget,c=f.value,m=f.selectionStart,_=f.selectionEnd;_e({value:c,selectionStart:m,selectionEnd:_},!0),le(c)};return u.useEffect(function(){Qe()},[Qe]),u.useImperativeHandle(y,function(){return{get session(){return{history:k.current}},set session(t){k.current=t.history}}},[]),u.createElement("div",s({},mt,{style:s(s({},K.container),a)}),u.createElement("pre",s({className:Le,"aria-hidden":"true",style:s(s(s({},K.editor),K.highlight),Ve)},typeof Ie=="string"?{dangerouslySetInnerHTML:{__html:Ie+"<br />"}}:{children:Ie})),u.createElement("textarea",{ref:function(t){return ke.current=t},style:s(s(s({},K.editor),K.textarea),Ve),className:M+(we?" ".concat(we):""),id:Ce,value:We,onChange:ft,onKeyDown:gt,onClick:Ae,onKeyUp:Oe,onFocus:Re,onBlur:ye,disabled:w,form:te,maxLength:Te,minLength:ve,name:Pe,placeholder:je,readOnly:De,required:ce,autoFocus:N,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),u.createElement("style",{dangerouslySetInnerHTML:{__html:O}}))}),K={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}};return D.default=ee,D}var Jt=Xt();const ea=bt(Jt),fe="rounded-xl border border-[var(--gm-border-primary)] bg-[var(--gm-surface-primary)] shadow-[var(--shadow-sm)] transition-all duration-200",$="w-full bg-[var(--gm-bg-tertiary)] border border-[var(--gm-border-primary)] rounded-lg px-3 py-2 text-sm text-[var(--gm-text-primary)] placeholder:text-[var(--gm-text-placeholder)] focus:outline-none focus:border-[var(--gm-border-focus)] focus:shadow-[var(--shadow-focus)] transition-all duration-150",se="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-primary)] text-[var(--gm-text-on-brand)] hover:bg-[var(--gm-interactive-primary-hover)] shadow-sm transition-all duration-150 disabled:opacity-50",re="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--gm-interactive-secondary)] text-[var(--gm-text-primary)] hover:bg-[var(--gm-interactive-secondary-hover)] border border-[var(--gm-border-primary)] transition-all duration-150",ta="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg bg-[var(--color-danger-500)] text-white hover:bg-[var(--color-danger-600)] shadow-sm transition-all duration-150 disabled:opacity-50",Ue="text-[10px] font-bold text-[var(--gm-accent-primary)] uppercase tracking-[0.1em]",U="text-[10px] font-bold text-[var(--gm-text-tertiary)] uppercase tracking-wider mb-1 flex items-center gap-1.5",Fe=[{display:"Ficha de Identidade",key:"ficha_identidade"},{display:"Visão Geral e Posicionamento",key:"visao_geral"},{display:"Produtos e Serviços",key:"produtos_servicos"},{display:"Público-Alvo e Clientes",key:"publico_alvo"},{display:"Equipa e Liderança",key:"equipa_lideranca"},{display:"Presença Digital e Marketing",key:"presenca_digital"},{display:"Análise Competitiva",key:"analise_competitiva"},{display:"Indicadores de Crescimento",key:"indicadores_crescimento"},{display:"Análise SWOT",key:"swot"},{display:"Conclusões e Insights",key:"conclusoes"}],aa=["{{COMPANY_NAME}}","{{LOGO_URL}}","{{COMPANY_LOGO_URL}}","{{PRIMARY_COLOR}}","{{SECONDARY_COLOR}}","{{REPORT_DATA}}"],sa=["{{REPORT_DATA}}"],ra=[{value:"corporate",label:"Corporate Classic",desc:"Formal, structured, traditional"},{value:"minimal",label:"Modern Minimal",desc:"Clean, spacious, focus on content"},{value:"tech",label:"Startup Tech",desc:"Bold, modern, geometric"},{value:"consultancy",label:"Consultancy Premium",desc:"Executive, refined, data-friendly"}],na=[{value:"'Segoe UI', Roboto, Helvetica, Arial, sans-serif",label:"System Default"},{value:"'Georgia', 'Times New Roman', serif",label:"Georgia (Serif)"},{value:"'Inter', 'Helvetica Neue', sans-serif",label:"Inter"},{value:"'Roboto', 'Arial', sans-serif",label:"Roboto"},{value:"'Playfair Display', serif",label:"Playfair Display"},{value:"'Source Sans Pro', sans-serif",label:"Source Sans Pro"},{value:"'Fira Code', monospace",label:"Fira Code (Mono)"}];function la(s){return sa.filter(g=>!s.includes(g))}function ia(s){return aa.filter(g=>s.includes(g))}function rt(s,g){const b=g.brand_assets||{};return s.replace(/\{\{COMPANY_NAME\}\}/g,g.name||"Company Name").replace(/\{\{COMPANY_LOGO_URL\}\}/g,g.logo_url||"").replace(/\{\{LOGO_URL\}\}/g,g.logo_url||"").replace(/\{\{PRIMARY_COLOR\}\}/g,b.primary_color||"#1a1a2e").replace(/\{\{SECONDARY_COLOR\}\}/g,b.secondary_color||"#16213e").replace(/\{\{REPORT_DATA\}\}/g,"<h2>Sample Section Title</h2><p>This is sample report content to demonstrate how your template will look when populated with real data. The actual report will contain analysis, metrics, and insights.</p><h2>Another Section</h2><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>")}function oa(s){const g=new Blob([s],{type:"text/html"}),b=URL.createObjectURL(g),j=window.open(b,"_blank");j&&j.addEventListener("load",()=>{setTimeout(()=>j.print(),600)})}function nt(s,g){const b=new Blob([s],{type:"text/html"}),j=URL.createObjectURL(b),n=document.createElement("a");n.href=j,n.download=g,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(j)}const Ua=()=>{const[s,g]=o.useState("list"),[b,j]=o.useState(null),n=jt(),u=(v,h)=>{j(v),g(h)},T=()=>{g("list"),j(null)};return e.jsxs("div",{className:"space-y-4",children:[s==="list"&&(n.isError?e.jsx(Pt,{message:"Failed to load companies",onRetry:()=>n.refetch()}):e.jsx(ca,{companies:n.data?.companies||[],loading:n.isLoading,onView:v=>u(v,"view"),onEdit:v=>u(v,"edit"),onTemplates:v=>u(v,"templates")})),s==="view"&&b&&e.jsx(da,{company:b,onBack:T,onEdit:()=>g("edit")}),s==="edit"&&b&&e.jsx(ma,{company:b,onBack:T,onTemplates:()=>g("templates"),onUpdated:v=>j(v)}),s==="templates"&&b&&e.jsx(xa,{company:b,onBack:()=>g("edit")})]})};function ca({companies:s,loading:g,onView:b,onEdit:j,onTemplates:n}){const[u,T]=o.useState(""),[v,h]=o.useState(null),S=Nt(),I=wt(),C=$e(),P=async()=>{if(!u.trim()){p.error("Company name is required");return}try{await S.mutateAsync({name:u.trim()}),p.success("Company created"),T("")}catch(l){p.error(l.message||"Failed to create company")}},G=async l=>{p.info(`Analyzing ${l.name}...`);try{await C.mutateAsync(l.id),p.success(`${l.name} analysis complete`)}catch(E){p.error(E.message||"Analysis failed")}},z=async()=>{if(v)try{await I.mutateAsync(v.id),p.success("Company deleted")}catch(l){p.error(l.message||"Failed to delete")}finally{h(null)}};return e.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsx(At,{open:!!v,onOpenChange:l=>{l||h(null)},children:e.jsxs(Rt,{children:[e.jsxs(Ot,{children:[e.jsxs(Lt,{children:["Delete ",v?.name||"this item","?"]}),e.jsx(Dt,{children:"This action cannot be undone. The company and all its data will be permanently removed."})]}),e.jsxs(It,{children:[e.jsx(zt,{children:"Cancel"}),e.jsx(Mt,{onClick:z,className:ta,children:"Delete"})]})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-[var(--gm-text-primary)]",children:"Companies"}),e.jsx("p",{className:"text-sm text-[var(--gm-text-tertiary)]",children:"Manage company profiles and assets"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(J,{value:u,onChange:l=>T(l.target.value),placeholder:"New company name...",className:x($,"max-w-xs"),onKeyDown:l=>{l.key==="Enter"&&P()}}),e.jsxs("button",{onClick:P,disabled:S.isPending,className:x(se,"px-4 py-2 text-sm"),children:[S.isPending?e.jsx(Q,{className:"w-4 h-4 animate-spin"}):e.jsx(Ct,{className:"w-4 h-4"})," New company"]})]}),g?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx(Q,{className:"w-6 h-6 animate-spin text-[var(--gm-accent-primary)]"})}):s.length===0?e.jsx("div",{className:"text-center py-12 text-[var(--gm-text-tertiary)] text-sm",children:"No companies yet. Create one above."}):e.jsx("div",{className:"space-y-3",children:s.map((l,E)=>e.jsx(ge.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:E*.05},className:x(fe,"p-4 hover:border-[var(--gm-accent-primary)]/20"),children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-[var(--gm-bg-tertiary)] flex items-center justify-center flex-shrink-0 overflow-hidden",children:l.logo_url?e.jsx("img",{src:l.logo_url,alt:l.name,className:"w-full h-full object-contain"}):e.jsx("span",{className:"text-sm font-bold text-[var(--gm-text-primary)]",children:(l.name||"???").substring(0,3).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-[var(--gm-text-primary)]",children:l.name}),(l.colors||[]).length>0&&e.jsx("div",{className:"flex gap-0.5",children:(l.colors||[]).map((M,O)=>e.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:M}},O))}),e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium ${l.status==="analyzed"?"bg-[var(--gm-accent-primary)]/10 text-[var(--gm-accent-primary)]":"bg-[var(--gm-bg-tertiary)] text-[var(--gm-text-tertiary)]"}`,children:l.status==="analyzed"?"Analyzed":"Not analyzed"})]}),(l.website||l.website_url)&&e.jsx("p",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:l.website||l.website_url})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap",children:[e.jsxs("button",{onClick:()=>b(l),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)] transition-colors",children:[e.jsx(Ft,{className:"w-3.5 h-3.5"})," View"]}),e.jsxs("button",{onClick:()=>j(l),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)] transition-colors",children:[e.jsx(Kt,{className:"w-3.5 h-3.5"})," Edit"]}),e.jsxs("button",{onClick:()=>n(l),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)] transition-colors",children:[e.jsx(Be,{className:"w-3.5 h-3.5"})," Templates"]}),e.jsxs("button",{onClick:()=>G(l),className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)] transition-colors",children:[e.jsx(lt,{className:"w-3.5 h-3.5"})," ",l.status==="analyzed"?"Re-analyze":"Analyze"]}),e.jsx("button",{onClick:()=>h(l),className:"p-1.5 rounded-lg text-[var(--gm-text-tertiary)] hover:bg-[var(--color-danger-500)]/10 hover:text-[var(--color-danger-500)] transition-colors",children:e.jsx(kt,{className:"w-3.5 h-3.5"})})]})]})},l.id))})]})}function da({company:s,onBack:g,onEdit:b}){const j=He(s.id),n=j.data?.company||s,[u,T]=o.useState(Fe[0].key),v=$e(),h=n.brand_assets?.analysis_report||{},S=async()=>{try{await v.mutateAsync(s.id),p.success("Analysis complete"),j.refetch()}catch(C){p.error(C.message||"Analysis failed")}},I=Fe.find(C=>C.key===u);return e.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsxs("button",{onClick:g,className:"flex items-center gap-1.5 text-sm text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors",children:[e.jsx(Ge,{className:"w-4 h-4"})," Back to Companies"]}),e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-[var(--gm-bg-tertiary)] flex items-center justify-center overflow-hidden",children:n.logo_url?e.jsx("img",{src:n.logo_url,alt:n.name,className:"w-full h-full object-contain"}):e.jsx("span",{className:"text-lg font-bold text-[var(--gm-text-primary)]",children:(n.name||"???").substring(0,3).toUpperCase()})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-2xl font-bold text-[var(--gm-text-primary)]",children:n.name}),n.brand_assets?.primary_color&&e.jsxs("div",{className:"flex gap-1 ml-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-sm border border-[var(--gm-border-primary)]",style:{backgroundColor:n.brand_assets.primary_color}}),n.brand_assets?.secondary_color&&e.jsx("div",{className:"w-4 h-4 rounded-sm border border-[var(--gm-border-primary)]",style:{backgroundColor:n.brand_assets.secondary_color}})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[(n.website||n.website_url)&&e.jsxs("a",{href:n.website||n.website_url,target:"_blank",rel:"noreferrer",className:"text-xs text-[var(--gm-accent-primary)] flex items-center gap-1 hover:underline",children:[e.jsx(ct,{className:"w-3 h-3"})," ",n.website||n.website_url]}),(n.linkedin||n.linkedin_url)&&e.jsxs("a",{href:n.linkedin||n.linkedin_url,target:"_blank",rel:"noreferrer",className:"text-xs text-[var(--gm-accent-primary)] flex items-center gap-1 hover:underline",children:[e.jsx(dt,{className:"w-3 h-3"})," LinkedIn"]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsxs("button",{onClick:S,disabled:v.isPending,className:x(se,"px-4 py-2 text-sm"),children:[v.isPending?e.jsx(Q,{className:"w-4 h-4 animate-spin"}):e.jsx(it,{className:"w-4 h-4"})," Re-analyze"]}),e.jsx("button",{onClick:b,className:"text-sm text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors",children:"Edit"})]})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("div",{className:"w-56 flex-shrink-0",children:[e.jsx("h4",{className:"text-xs font-semibold text-[var(--gm-text-primary)] mb-2",children:"Report Sections"}),e.jsx("div",{className:"space-y-0.5",children:Fe.map(C=>e.jsxs("button",{onClick:()=>T(C.key),className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors flex items-center justify-between ${u===C.key?"bg-[var(--gm-interactive-primary)]/10 text-[var(--gm-accent-primary)] font-medium":"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] hover:bg-[var(--gm-surface-hover)]"}`,children:[C.display,u===C.key&&e.jsx(_t,{className:"w-3.5 h-3.5"})]},C.key))})]}),e.jsxs("div",{className:x(fe,"flex-1 p-6"),children:[e.jsx("h3",{className:"text-lg font-bold text-[var(--gm-text-primary)] mb-4",children:I?.display}),e.jsx("div",{className:"text-sm text-[var(--gm-text-tertiary)] whitespace-pre-line leading-relaxed",children:h[u]||`Content for "${I?.display}" — run analysis to populate.`})]})]})]})}function ma({company:s,onBack:g,onTemplates:b,onUpdated:j}){const n=He(s.id),u=n.data?.company||s,[T,v]=o.useState(s.name),[h,S]=o.useState(s.description||""),[I,C]=o.useState(s.logo_url||""),[P,G]=o.useState(s.website||s.website_url||""),[z,l]=o.useState(s.linkedin||s.linkedin_url||""),[E,M]=o.useState(u.brand_assets?.primary_color||""),[O,ee]=o.useState(u.brand_assets?.secondary_color||""),[K,d]=o.useState(u.brand_assets?.ai_context||""),r=St(),y=$e();o.useEffect(()=>{if(n.data?.company){const i=n.data.company;M(i.brand_assets?.primary_color||""),ee(i.brand_assets?.secondary_color||""),d(i.brand_assets?.ai_context||""),i.logo_url&&C(i.logo_url)}},[n.data]);const N=async()=>{if(!T.trim()){p.error("Name is required");return}const i=/^https?:\/\//;if(P.trim()&&!i.test(P.trim())){p.error("Website must start with http:// or https://");return}if(z.trim()&&!i.test(z.trim())){p.error("LinkedIn URL must start with http:// or https://");return}try{const B={...u.brand_assets||{},primary_color:E||void 0,secondary_color:O||void 0,ai_context:K||void 0},H=await r.mutateAsync({id:s.id,name:T,description:h,logo_url:I,website_url:P,linkedin_url:z,brand_assets:B});p.success("Company updated"),j&&H?.company&&j(H.company),g()}catch(B){p.error(B.message||"Failed to save")}},w=async()=>{p.info(`Analyzing ${s.name}...`);try{await y.mutateAsync(s.id),p.success("Analysis complete"),n.refetch()}catch(i){p.error(i.message||"Analysis failed")}},te=u.brand_assets?.analyzed_at;return e.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[e.jsxs("button",{onClick:g,className:"flex items-center gap-1.5 text-sm text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors",children:[e.jsx(Ge,{className:"w-4 h-4"})," Back to Companies"]}),e.jsxs("div",{className:x(fe,"p-5"),children:[e.jsxs("h2",{className:"text-lg font-bold text-[var(--gm-text-primary)] mb-5",children:["Edit ",s.name]}),e.jsxs("div",{className:"flex gap-8",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx("label",{className:x(U,"mb-3"),children:"Company Logo"}),e.jsx(Tt,{currentUrl:I||void 0,name:s.name,uploadEndpoint:`/api/companies/${s.id}/logo`,deleteEndpoint:`/api/companies/${s.id}/logo`,onUploaded:i=>{C(i)},onRemoved:()=>{C("")},onUrlChange:i=>{C(i)},size:"xl",showUrlInput:!0})]}),e.jsxs("div",{className:"flex-1 max-w-lg space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:U,children:"Name *"}),e.jsx(J,{value:T,onChange:i=>v(i.target.value),className:$})]}),e.jsxs("div",{children:[e.jsx("label",{className:U,children:"Description"}),e.jsx("textarea",{value:h,onChange:i=>S(i.target.value),rows:3,className:x($,"resize-y")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:U,children:[e.jsx(ct,{className:"w-3 h-3"})," Website"]}),e.jsx(J,{value:P,onChange:i=>G(i.target.value),placeholder:"https://...",className:$})]}),e.jsxs("div",{children:[e.jsxs("label",{className:U,children:[e.jsx(dt,{className:"w-3 h-3"})," LinkedIn"]}),e.jsx(J,{value:z,onChange:i=>l(i.target.value),placeholder:"https://linkedin.com/company/...",className:$})]})]})]})]}),e.jsxs("div",{className:"mt-8 pt-5 border-t border-[var(--gm-border-primary)]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:x(Ue,"text-sm"),children:"Brand & AI Analysis"}),e.jsxs("div",{className:"flex items-center gap-3",children:[te&&e.jsxs("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:["Last analyzed: ",new Date(te).toLocaleDateString()]}),e.jsxs("button",{onClick:w,disabled:y.isPending,className:x(re,"text-xs"),children:[y.isPending?e.jsx(Q,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(lt,{className:"w-3.5 h-3.5"}),te?"Re-analyze":"Analyze with AI"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-lg",children:[e.jsxs("div",{children:[e.jsxs("label",{className:U,children:[e.jsx(he,{className:"w-3 h-3"})," Primary Color"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:E||"#1a1a2e",onChange:i=>M(i.target.value),className:"w-8 h-8 rounded border border-[var(--gm-border-primary)] cursor-pointer bg-transparent"}),e.jsx(J,{value:E,onChange:i=>M(i.target.value),placeholder:"#1a1a2e",className:x($,"font-mono text-xs flex-1")})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:U,children:[e.jsx(he,{className:"w-3 h-3"})," Secondary Color"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:O||"#16213e",onChange:i=>ee(i.target.value),className:"w-8 h-8 rounded border border-[var(--gm-border-primary)] cursor-pointer bg-transparent"}),e.jsx(J,{value:O,onChange:i=>ee(i.target.value),placeholder:"#16213e",className:x($,"font-mono text-xs flex-1")})]})]})]}),e.jsxs("div",{className:"mt-4 max-w-lg",children:[e.jsxs("label",{className:U,children:[e.jsx(Ke,{className:"w-3 h-3"})," AI Brand Context"]}),e.jsx("textarea",{value:K,onChange:i=>d(i.target.value),rows:2,placeholder:"AI-generated brand summary (auto-filled on analysis)",className:x($,"resize-y text-xs")})]}),(E||O)&&e.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[e.jsx("span",{className:"text-[10px] text-[var(--gm-text-tertiary)]",children:"Brand preview:"}),e.jsxs("div",{className:"flex gap-1.5 items-center",children:[E&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-6 h-6 rounded-md shadow-sm border border-[var(--gm-border-primary)]",style:{backgroundColor:E}}),e.jsx("span",{className:"text-[10px] font-mono text-[var(--gm-text-tertiary)]",children:E})]}),O&&e.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-md shadow-sm border border-[var(--gm-border-primary)]",style:{backgroundColor:O}}),e.jsx("span",{className:"text-[10px] font-mono text-[var(--gm-text-tertiary)]",children:O})]})]})]})]}),e.jsxs("div",{className:"mt-6 border-t border-[var(--gm-border-primary)] pt-4 flex justify-center gap-2",children:[e.jsxs("button",{onClick:N,disabled:r.isPending,className:x(se,"px-5 py-2.5 text-sm"),children:[r.isPending?e.jsx(Q,{className:"w-4 h-4 animate-spin"}):e.jsx(ot,{className:"w-4 h-4"}),r.isPending?"Saving...":"Save"]}),e.jsx("button",{onClick:g,className:x(re,"px-5 py-2.5 text-sm"),children:"Cancel"})]}),e.jsxs("div",{className:"mt-8 pt-5 border-t border-[var(--gm-border-primary)]",children:[e.jsx("h3",{className:x(Ue,"text-sm mb-3"),children:"Documents"}),e.jsxs("button",{onClick:b,className:x(re,"px-4 py-2 text-sm"),children:[e.jsx(Be,{className:"w-4 h-4"})," Templates (A4 / PPT)"]})]})]})]})}function xa({company:s,onBack:g}){const b=He(s.id),j=b.data?.company||s,[n,u]=o.useState("a4"),[T,v]=o.useState("code"),[h,S]=o.useState(""),[I,C]=o.useState(!1),[P,G]=o.useState(!1),[z,l]=o.useState(!1),[E,M]=o.useState(!1),[O,ee]=o.useState("corporate"),[K,d]=o.useState(!1),[r,y]=o.useState(!1),N=o.useRef(null),w=o.useRef(null),te=o.useRef(null),[i,B]=o.useState(j.brand_assets?.primary_color||"#1a1a2e"),[H,ne]=o.useState(j.brand_assets?.secondary_color||"#16213e"),[Z,Te]=o.useState("'Segoe UI', Roboto, Helvetica, Arial, sans-serif");o.useEffect(()=>{if(b.data?.company?.brand_assets){const a=b.data.company.brand_assets;a.primary_color&&B(a.primary_color),a.secondary_color&&ne(a.secondary_color)}},[b.data]);const ve=async()=>{C(!0);try{const a=await Ee.get(`/api/companies/${s.id}/templates/${n}`);S(a.html||`<!-- No ${n} template yet -->`),p.success("Template loaded")}catch{S(`<!-- No ${n} template found -->`)}finally{C(!1)}},Pe=async()=>{G(!0),d(!1);try{const a=await Ee.post(`/api/companies/${s.id}/templates/generate`,{type:n,style:O});S(a.html||h),p.success("Template generated")}catch(a){p.error(a.message||"Generation failed")}finally{G(!1)}},ye=async()=>{l(!0);try{await Ee.put(`/api/companies/${s.id}/templates/${n}`,{html:h}),p.success("Template saved")}catch(a){p.error(a.message||"Failed to save")}finally{l(!1)}},Ae=async()=>{M(!0);try{const a=await Ee.post(`/api/companies/${s.id}/templates/${n}/reset`);S(a.html||""),p.success("Template reset to default")}catch(a){p.error(a.message||"Failed to reset")}finally{M(!1)}},Re=()=>{if(!h){p.error("No template to export");return}const a=rt(h,j);nt(a,`${s.name}-${n}-template.html`),p.success("Template exported")},be=()=>{if(!h){p.error("No template to export");return}nt(h,`${s.name}-${n}-template-raw.html`),p.success("Raw template exported")},Oe=a=>{const L=a.target.files?.[0];if(!L)return;if(!L.name.endsWith(".html")&&!L.name.endsWith(".htm")){p.error("Please select an HTML file");return}const Ne=new FileReader;Ne.onload=we=>{const Ce=we.target?.result;Ce&&(S(Ce),p.success("Template imported from file"))},Ne.readAsText(L),a.target.value=""},le=()=>{if(!W){p.error("No template to preview");return}oa(W)};o.useEffect(()=>{ve()},[n]),o.useEffect(()=>{const a=L=>{(L.ctrlKey||L.metaKey)&&L.key==="s"&&(L.preventDefault(),z||ye())};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[h,z]),o.useEffect(()=>{if(!r)return;const a=L=>{L.key==="Escape"&&y(!1)};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[r]);const W=o.useMemo(()=>!h||h.startsWith("<!--")?"":rt(h,j),[h,j]),A=o.useMemo(()=>la(h),[h]),je=o.useMemo(()=>ia(h),[h]),Le=o.useCallback(()=>{let a=h;a=a.replace(/(--primary:\s*)([^;]+)(;)/g,`$1${i}$3`),a=a.replace(/(--secondary:\s*)([^;]+)(;)/g,`$1${H}$3`),a=a.replace(/(font-family:\s*)([^;]+)(;)/g,`$1${Z}$3`),S(a),p.success("Theme applied to code")},[h,i,H,Z]),De=o.useCallback(a=>at.highlight(a,at.languages.markup,"markup"),[]),ce=r?"calc(100vh - 120px)":"500px";return e.jsxs(ge.div,{initial:{opacity:0},animate:{opacity:1},className:x("space-y-4",r&&"fixed inset-0 z-50 bg-[var(--gm-bg-primary)] p-6 overflow-auto"),children:[e.jsx("input",{ref:w,type:"file",accept:".html,.htm",onChange:Oe,className:"hidden"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:g,className:"flex items-center gap-1.5 text-sm text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)] transition-colors",children:[e.jsx(Ge,{className:"w-4 h-4"})," Back to Edit"]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-[var(--gm-text-primary)]",children:[s.name," – Templates"]}),e.jsx("p",{className:"text-sm text-[var(--gm-text-tertiary)]",children:"Manage document templates for this company"})]})]}),e.jsxs("button",{onClick:()=>y(!r),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)] transition-colors",children:[r?e.jsx(Ut,{className:"w-4 h-4"}):e.jsx($t,{className:"w-4 h-4"}),r?"Exit fullscreen":"Fullscreen"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex gap-1",children:["a4","ppt"].map(a=>e.jsx("button",{onClick:()=>u(a),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${n===a?"bg-[var(--gm-interactive-primary)]/10 text-[var(--gm-accent-primary)]":"text-[var(--gm-text-tertiary)] hover:text-[var(--gm-text-primary)]"}`,children:a==="a4"?"A4 document":"Presentation"},a))}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs("button",{onClick:ve,disabled:I,className:x(re,"px-3 py-1.5 text-xs disabled:opacity-50"),children:[I?e.jsx(Q,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(Zt,{className:"w-3.5 h-3.5"}),"Reload"]}),e.jsxs("button",{onClick:Ae,disabled:E,className:x(re,"px-3 py-1.5 text-xs disabled:opacity-50"),children:[E?e.jsx(Q,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(it,{className:"w-3.5 h-3.5"}),"Reset default"]}),e.jsxs("button",{onClick:()=>w.current?.click(),className:x(re,"px-3 py-1.5 text-xs"),children:[e.jsx(Bt,{className:"w-3.5 h-3.5"})," Import"]}),e.jsxs("button",{onClick:be,className:x(re,"px-3 py-1.5 text-xs"),children:[e.jsx(tt,{className:"w-3.5 h-3.5"})," Export"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>d(!K),disabled:P,className:x(se,"px-3 py-1.5 text-xs"),children:[P?e.jsx(Q,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(Ke,{className:"w-3.5 h-3.5"}),P?"Generating...":"Generate AI"]}),K&&!P&&e.jsxs("div",{className:x(fe,"absolute right-0 top-full mt-1 z-50 p-3 w-72 shadow-lg"),children:[e.jsx("p",{className:"text-xs font-semibold text-[var(--gm-text-primary)] mb-2",children:"Choose a style"}),e.jsx("div",{className:"space-y-1.5",children:ra.map(a=>e.jsxs("button",{onClick:()=>ee(a.value),className:x("w-full text-left px-3 py-2 rounded-lg text-sm transition-colors",O===a.value?"bg-[var(--gm-interactive-primary)]/10 text-[var(--gm-accent-primary)]":"text-[var(--gm-text-tertiary)] hover:bg-[var(--gm-surface-hover)]"),children:[e.jsx("span",{className:"font-medium",children:a.label}),e.jsx("span",{className:"block text-[10px] opacity-70",children:a.desc})]},a.value))}),e.jsxs("button",{onClick:Pe,className:x(se,"w-full mt-3 py-2 text-sm justify-center"),children:[e.jsx(Ke,{className:"w-4 h-4"})," Generate"]})]})]}),e.jsxs("button",{onClick:ye,disabled:z,className:x(se,"px-3 py-1.5 text-xs"),children:[z?e.jsx(Q,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(Ht,{className:"w-3.5 h-3.5"}),"Save"]})]})]}),A.length>0&&h.length>20&&e.jsxs("div",{className:"flex items-start gap-2 px-4 py-3 rounded-lg bg-[var(--color-warning-500)]/10 border border-[var(--color-warning-500)]/20",children:[e.jsx(Et,{className:"w-4 h-4 text-[var(--color-warning-500)] flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-xs text-[var(--gm-text-secondary)]",children:[e.jsx("span",{className:"font-medium",children:"Missing required placeholders: "}),A.map(a=>e.jsx("code",{className:"mx-1 px-1.5 py-0.5 rounded bg-[var(--gm-bg-tertiary)] text-[10px] font-mono",children:a},a))]})]}),je.length>0&&e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-[var(--gm-text-tertiary)]",children:[e.jsx("span",{children:"Placeholders:"}),je.map(a=>e.jsx("code",{className:"px-1.5 py-0.5 rounded bg-[var(--gm-accent-primary)]/10 text-[var(--gm-accent-primary)] font-mono",children:a},a)),e.jsx("span",{className:"ml-auto text-[var(--gm-text-tertiary)]",children:"Ctrl+S to save"})]}),e.jsxs("div",{className:"flex gap-4",onClick:()=>K&&d(!1),children:[e.jsxs("div",{className:"flex-1 min-w-0",ref:te,children:[e.jsx("div",{className:"flex border-b border-[var(--gm-border-primary)] mb-2",children:["code","theme"].map(a=>e.jsxs("button",{onClick:()=>v(a),className:`flex items-center gap-1.5 px-3 py-2 text-sm border-b-2 transition-colors ${T===a?"text-[var(--gm-accent-primary)] border-[var(--gm-accent-primary)]":"text-[var(--gm-text-tertiary)] border-transparent"}`,children:[a==="code"?e.jsx(qt,{className:"w-3.5 h-3.5"}):e.jsx(he,{className:"w-3.5 h-3.5"}),a==="code"?"Code":"Theme"]},a))}),T==="code"?e.jsx("div",{className:"border border-[var(--gm-border-primary)] rounded-lg overflow-hidden bg-white",children:e.jsx("div",{className:"overflow-auto",style:{height:ce},children:e.jsx(ea,{value:h,onValueChange:S,highlight:De,padding:16,style:{fontFamily:"'Fira Code', 'Consolas', monospace",fontSize:12,lineHeight:"1.5",minHeight:ce},textareaClassName:"focus:outline-none"})})}):e.jsxs("div",{className:x(fe,"p-5 space-y-5"),style:{minHeight:ce},children:[e.jsx("h4",{className:"text-sm font-semibold text-[var(--gm-text-primary)]",children:"Visual Theme Editor"}),e.jsx("p",{className:"text-xs text-[var(--gm-text-tertiary)]",children:"Adjust colors and fonts, then apply to update the template code."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:U,children:[e.jsx(he,{className:"w-3 h-3"})," Primary Color"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:i,onChange:a=>B(a.target.value),className:"w-10 h-10 rounded-lg border border-[var(--gm-border-primary)] cursor-pointer bg-transparent p-0.5"}),e.jsx(J,{value:i,onChange:a=>B(a.target.value),className:x($,"font-mono text-xs")})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:U,children:[e.jsx(he,{className:"w-3 h-3"})," Secondary Color"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:H,onChange:a=>ne(a.target.value),className:"w-10 h-10 rounded-lg border border-[var(--gm-border-primary)] cursor-pointer bg-transparent p-0.5"}),e.jsx(J,{value:H,onChange:a=>ne(a.target.value),className:x($,"font-mono text-xs")})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:U,children:[e.jsx(Yt,{className:"w-3 h-3"})," Font Family"]}),e.jsx("select",{value:Z,onChange:a=>Te(a.target.value),className:x($,"cursor-pointer"),children:na.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:x(U,"mb-2"),children:"Preview"}),e.jsxs("div",{className:"flex gap-2 items-stretch h-16 rounded-lg overflow-hidden border border-[var(--gm-border-primary)]",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center text-white text-xs font-semibold",style:{backgroundColor:i,fontFamily:Z},children:"Primary"}),e.jsx("div",{className:"flex-1 flex items-center justify-center text-white text-xs font-semibold",style:{backgroundColor:H,fontFamily:Z},children:"Secondary"}),e.jsx("div",{className:"flex-1 flex items-center justify-center text-sm bg-white border-l border-[var(--gm-border-primary)]",style:{fontFamily:Z,color:i},children:"Body Text"})]})]}),e.jsxs("button",{onClick:Le,className:x(se,"px-5 py-2.5 text-sm"),children:[e.jsx(ot,{className:"w-4 h-4"})," Apply theme to template code"]})]})]}),e.jsxs("div",{className:x("flex-shrink-0",r?"w-[45%]":"w-[360px]"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:Ue,children:"Live Preview"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("button",{onClick:le,disabled:!W,className:"flex items-center gap-1 px-2 py-1 rounded text-[10px] font-medium text-[var(--gm-text-tertiary)] hover:text-[var(--gm-accent-primary)] hover:bg-[var(--gm-surface-hover)] transition-colors disabled:opacity-30",children:[e.jsx(Gt,{className:"w-3 h-3"})," Print / PDF"]}),e.jsxs("button",{onClick:Re,disabled:!W,className:"flex items-center gap-1 px-2 py-1 rounded text-[10px] font-medium text-[var(--gm-text-tertiary)] hover:text-[var(--gm-accent-primary)] hover:bg-[var(--gm-surface-hover)] transition-colors disabled:opacity-30",children:[e.jsx(tt,{className:"w-3 h-3"})," Download"]})]})]}),e.jsx("div",{className:"border border-[var(--gm-border-primary)] rounded-lg overflow-hidden bg-white",style:{height:r?"calc(100vh - 200px)":"520px"},children:W?e.jsx("iframe",{ref:N,srcDoc:W,title:"Template Preview",className:"w-full h-full border-0",sandbox:"allow-same-origin",style:{transform:n==="a4"?"scale(0.35)":"scale(0.3)",transformOrigin:"top left",width:n==="a4"?"210mm":"297mm",height:n==="a4"?"297mm":"210mm"}}):e.jsx("div",{className:"h-full flex items-center justify-center text-sm text-[var(--gm-text-tertiary)]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Be,{className:"w-8 h-8 mx-auto mb-2 opacity-30"}),e.jsx("p",{children:"No template to preview"}),e.jsx("p",{className:"text-[10px] mt-1",children:"Load or generate a template"})]})})}),e.jsx("div",{className:"mt-2 text-[10px] text-[var(--gm-text-tertiary)] text-center",children:n==="a4"?"210mm x 297mm (A4 Portrait)":"297mm x 210mm (A4 Landscape)"})]})]})]})}export{Ua as default};
//# sourceMappingURL=CompaniesPage-CfaDLisl.js.map
