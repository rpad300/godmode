{"version":3,"mappings":";gOAaA,MAAMA,EAAW,sBA0BjB,IAAIC,EAA2B,CAC7B,UAAW,cACX,YAAa,GACb,WAAY,GACZ,SAAU,GACV,QAAS,GAET,YAAa,GACb,gBAAiB,IACjB,qBAAsB,IACtB,cAAe,CACb,OAAQ,GACR,MAAO,GACP,OAAQ,EAEV,EACA,SAAU,GACV,kBAAmB,EACrB,EAEIC,EAAmC,KAMvC,eAAsBC,GAAiBC,EAAoB,cAA8B,CAEvFH,EAAQ,CACN,UAAWG,EACX,YAAa,GACb,WAAY,GACZ,SAAU,GACV,QAAS,GACT,mBAAoB,KACpB,YAAa,GACb,gBAAiB,IACjB,qBAAsB,IACtB,cAAe,CACb,OAAQ,GACR,MAAO,GACP,OAAQ,GACR,OAAQ,GACV,EAIF,MAAMC,EAAW,SAAS,cAAc,mBAAmBL,CAAQ,IAAI,EACnEK,KAAmB,SAEvB,MAAMC,EAAUC,EAAc,MAAO,CAAE,UAAW,gBAAiB,EACnEL,EAAeI,EAEfA,EAAQ,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;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","names":["MODAL_ID","state","containerRef","showKrispManager","initialTab","existing","content","createElement","modal","createModal","openModal","bindTabEvents","loadTabContent","container","tabs","tab","on","tabId","t","contentEl","loadTranscripts","loadQuarantine","loadMappings","loadImport","error","transcripts","projects","krispService.getTranscripts","projectsService.getProjects","updateBadge","renderTranscriptItem","bindTranscriptActions","quarantine","krispService.getQuarantinedTranscripts","renderQuarantineItem","bindQuarantineActions","mappings","krispService.getMappings","m","renderMappingItem","bindMappingActions","transcript","label","krispService.formatStatus","duration","krispService.formatDuration","date","speakers","needsProject","projectOptions","p","escapeHtml","mapping","item","e","id","showTranscriptDetail","select","transcriptId","btn","projectId","krispService.assignProject","project","toast","krispService.processTranscript","krispService.retryTranscript","showProjectAssignmentModal","__vitePreload","krispService.skipTranscript","krispService.deleteMapping","overlay","s","handleEsc","count","badge","result","krispService.getAvailableMeetings","stats","lastSync","renderAvailableMeetingsList","bindImportFilters","meetings","renderAvailableMeetingItem","parseArrayField","field","parsed","meeting","isImported","isSelected","speakersArr","attendeesArr","keyPointsArr","hasSummary","filterBtn","afterInput","beforeInput","searchInput","projectSelect","bindAvailableMeetingListActions","selectAll","updateImportSelectionUI","meetingId","showSummaryModal","target","checkbox","importBtn","selectedIds","krispService.importAvailableMeetings","selectedCount","countEl","meetingName","closeModal","escHandler","krispService.generateAvailableMeetingSummary","bodyEl","key_points","action_items","excerpt","attendees","meeting_date","mentioned_people","allParticipants","uniqueParticipants","mentionedFiltered","up","point","refreshBtn","newResult","text","div","closeKrispManager"],"ignoreList":[],"sources":["../../frontend/components/modals/KrispManager.ts"],"sourcesContent":["/**\n * Krisp Manager Modal\n * Manage Krisp transcripts, quarantine, and speaker mappings\n */\n\nimport { createElement, on } from '../../utils/dom';\nimport { createModal, openModal, closeModal } from '../Modal';\nimport { toast } from '../../services/toast';\nimport * as krispService from '../../services/krisp';\nimport * as projectsService from '../../services/projects';\nimport type { KrispTranscript, KrispSpeakerMapping, McpMeeting } from '../../services/krisp';\nimport type { ProjectListItem } from '../../services/projects';\n\nconst MODAL_ID = 'krisp-manager-modal';\n\ntype TabId = 'transcripts' | 'quarantine' | 'mappings' | 'import';\n\ninterface KrispManagerState {\n  activeTab: TabId;\n  transcripts: KrispTranscript[];\n  quarantine: KrispTranscript[];\n  mappings: KrispSpeakerMapping[];\n  loading: boolean;\n  selectedTranscript: KrispTranscript | null;\n  // Import state\n  mcpMeetings: McpMeeting[];\n  importedIds: Set<string>;\n  selectedMeetings: Set<string>;\n  importFilters: {\n    search: string;\n    after: string;\n    before: string;\n    domain: string;\n  };\n  // Projects for import\n  projects: ProjectListItem[];\n  selectedProjectId: string;\n}\n\nlet state: KrispManagerState = {\n  activeTab: 'transcripts',\n  transcripts: [],\n  quarantine: [],\n  mappings: [],\n  loading: false,\n  selectedTranscript: null,\n  mcpMeetings: [],\n  importedIds: new Set(),\n  selectedMeetings: new Set(),\n  importFilters: {\n    search: '',\n    after: '',\n    before: '',\n    domain: ''\n  },\n  projects: [],\n  selectedProjectId: ''\n};\n\nlet containerRef: HTMLElement | null = null;\n\n/**\n * Show Krisp Manager modal\n * @param initialTab - Optional tab to open by default\n */\nexport async function showKrispManager(initialTab: TabId = 'transcripts'): Promise<void> {\n  // Reset state\n  state = {\n    activeTab: initialTab,\n    transcripts: [],\n    quarantine: [],\n    mappings: [],\n    loading: false,\n    selectedTranscript: null,\n    mcpMeetings: [],\n    importedIds: new Set(),\n    selectedMeetings: new Set(),\n    importFilters: {\n      search: '',\n      after: '',\n      before: '',\n      domain: ''\n    }\n  };\n\n  // Remove existing modal\n  const existing = document.querySelector(`[data-modal-id=\"${MODAL_ID}\"]`);\n  if (existing) existing.remove();\n\n  const content = createElement('div', { className: 'krisp-manager' });\n  containerRef = content;\n\n  content.innerHTML = `\n    <style>\n      .krisp-manager {\n        min-height: 450px;\n        padding-bottom: 16px;\n      }\n      .krisp-tabs {\n        display: flex;\n        gap: 4px;\n        padding: 0 16px;\n        border-bottom: 1px solid var(--border-color, #e2e8f0);\n        margin-bottom: 16px;\n      }\n      .krisp-tab {\n        padding: 12px 20px;\n        background: none;\n        border: none;\n        cursor: pointer;\n        font-size: 14px;\n        font-weight: 500;\n        color: var(--text-secondary, #64748b);\n        border-bottom: 2px solid transparent;\n        margin-bottom: -1px;\n        transition: all 0.2s;\n      }\n      .krisp-tab:hover {\n        color: var(--text-primary, #1e293b);\n      }\n      .krisp-tab.active {\n        color: var(--primary, #e11d48);\n        border-bottom-color: var(--primary, #e11d48);\n      }\n      .krisp-tab .badge {\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        min-width: 20px;\n        height: 20px;\n        padding: 0 6px;\n        margin-left: 8px;\n        font-size: 11px;\n        font-weight: 600;\n        border-radius: 10px;\n        background: var(--bg-tertiary, #f1f5f9);\n        color: var(--text-secondary, #64748b);\n      }\n      .krisp-tab.active .badge {\n        background: var(--primary, #e11d48);\n        color: white;\n      }\n      .krisp-tab .badge.warning {\n        background: #fef3c7;\n        color: #92400e;\n      }\n      .krisp-content {\n        padding: 0 16px 16px;\n      }\n      .krisp-list {\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n      }\n      .krisp-item {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        padding: 12px 16px;\n        background: var(--bg-secondary, #f8fafc);\n        border-radius: 8px;\n        cursor: pointer;\n        transition: background 0.2s;\n      }\n      .krisp-item:hover {\n        background: var(--bg-tertiary, #f1f5f9);\n      }\n      .krisp-item-icon {\n        width: 40px;\n        height: 40px;\n        border-radius: 8px;\n        background: var(--bg-tertiary, #f1f5f9);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        flex-shrink: 0;\n      }\n      .krisp-item-icon svg {\n        width: 20px;\n        height: 20px;\n        color: var(--text-secondary, #64748b);\n      }\n      .krisp-item-content {\n        flex: 1;\n        min-width: 0;\n      }\n      .krisp-item-title {\n        font-weight: 500;\n        color: var(--text-primary, #1e293b);\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      .krisp-item-meta {\n        font-size: 12px;\n        color: var(--text-secondary, #64748b);\n        display: flex;\n        gap: 12px;\n        margin-top: 2px;\n      }\n      .krisp-item-status {\n        padding: 2px 8px;\n        border-radius: 12px;\n        font-size: 11px;\n        font-weight: 500;\n        text-transform: uppercase;\n      }\n      .status-pending { background: #dbeafe; color: #1e40af; }\n      .status-quarantine { background: #fef3c7; color: #92400e; }\n      .status-ambiguous { background: #fed7aa; color: #9a3412; }\n      .status-matched { background: #cffafe; color: #0e7490; }\n      .status-processed { background: #dcfce7; color: #166534; }\n      .status-failed { background: #fecaca; color: #991b1b; }\n      .status-skipped { background: #e2e8f0; color: #475569; }\n      .krisp-item-actions {\n        display: flex;\n        gap: 8px;\n      }\n      .krisp-item.needs-project {\n        border: 1px solid rgba(225, 29, 72, 0.2);\n        background: rgba(225, 29, 72, 0.02);\n      }\n      .krisp-item-assign {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        flex-shrink: 0;\n      }\n      .krisp-item-assign select {\n        padding: 6px 10px;\n        border: 1px solid var(--border-color, #e2e8f0);\n        border-radius: 6px;\n        font-size: 12px;\n        background: white;\n        min-width: 150px;\n        cursor: pointer;\n      }\n      .krisp-item-assign select:focus {\n        outline: none;\n        border-color: var(--primary, #e11d48);\n      }\n      .krisp-item-assign button {\n        padding: 6px 12px;\n        font-size: 12px;\n        border-radius: 6px;\n        border: none;\n        background: var(--primary, #e11d48);\n        color: white;\n        cursor: pointer;\n        white-space: nowrap;\n      }\n      .krisp-item-assign button:disabled {\n        background: #cbd5e1;\n        cursor: not-allowed;\n      }\n      .krisp-item-assign button:not(:disabled):hover {\n        background: #be123c;\n      }\n      .project-tag {\n        padding: 2px 6px;\n        background: rgba(225, 29, 72, 0.1);\n        color: var(--primary, #e11d48);\n        border-radius: 4px;\n        font-size: 11px;\n      }\n      [data-theme=\"dark\"] .krisp-item-assign select {\n        background: rgba(30,41,59,0.8);\n        color: white;\n        border-color: rgba(255,255,255,0.1);\n      }\n      [data-theme=\"dark\"] .krisp-item.needs-project {\n        background: rgba(225, 29, 72, 0.05);\n      }\n      .krisp-item-actions button {\n        padding: 6px 12px;\n        font-size: 12px;\n        border-radius: 6px;\n        border: 1px solid var(--border-color, #e2e8f0);\n        background: white;\n        cursor: pointer;\n        transition: all 0.2s;\n      }\n      .krisp-item-actions button:hover {\n        background: var(--bg-secondary, #f8fafc);\n      }\n      .krisp-item-actions button.primary {\n        background: var(--primary, #e11d48);\n        color: white;\n        border-color: var(--primary, #e11d48);\n      }\n      .krisp-item-actions button.primary:hover {\n        opacity: 0.9;\n      }\n      .krisp-empty {\n        text-align: center;\n        padding: 48px 16px;\n        color: var(--text-secondary, #64748b);\n      }\n      .krisp-empty svg {\n        width: 48px;\n        height: 48px;\n        margin-bottom: 16px;\n        opacity: 0.5;\n      }\n      .krisp-loading {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 48px;\n      }\n      .mapping-item {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 12px 16px;\n        background: var(--bg-secondary, #f8fafc);\n        border-radius: 8px;\n      }\n      .mapping-info {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n      .mapping-arrow {\n        color: var(--text-tertiary, #94a3b8);\n      }\n      .mapping-speaker {\n        font-family: monospace;\n        background: var(--bg-tertiary, #f1f5f9);\n        padding: 4px 8px;\n        border-radius: 4px;\n      }\n      .mapping-contact {\n        font-weight: 500;\n      }\n      .mapping-badge {\n        font-size: 11px;\n        padding: 2px 6px;\n        border-radius: 4px;\n        background: #dbeafe;\n        color: #1e40af;\n      }\n      [data-theme=\"dark\"] .krisp-item,\n      [data-theme=\"dark\"] .mapping-item {\n        background: rgba(30,41,59,0.5);\n      }\n      [data-theme=\"dark\"] .krisp-item:hover {\n        background: rgba(30,41,59,0.8);\n      }\n      [data-theme=\"dark\"] .krisp-item-actions button {\n        background: rgba(30,41,59,0.8);\n        border-color: rgba(255,255,255,0.1);\n      }\n      \n      /* Import tab styles */\n      .import-filters {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        gap: 12px;\n        padding: 16px;\n        background: var(--bg-secondary, #f8fafc);\n        border-radius: 8px;\n        margin-bottom: 16px;\n      }\n      .import-filters .filter-row {\n        display: flex;\n        gap: 12px;\n        grid-column: 1 / -1;\n      }\n      .import-filters label {\n        display: flex;\n        flex-direction: column;\n        gap: 4px;\n        font-size: 12px;\n        font-weight: 500;\n        color: var(--text-secondary, #64748b);\n      }\n      .import-filters input {\n        padding: 8px 12px;\n        border: 1px solid var(--border-color, #e2e8f0);\n        border-radius: 6px;\n        font-size: 14px;\n        background: white;\n      }\n      .import-filters .search-row {\n        display: flex;\n        gap: 12px;\n        align-items: flex-end;\n        grid-column: 1 / -1;\n      }\n      .import-filters .search-row label {\n        flex: 1;\n      }\n      .import-filters .search-btn {\n        padding: 8px 20px;\n        background: var(--primary, #e11d48);\n        color: white;\n        border: none;\n        border-radius: 6px;\n        font-weight: 500;\n        cursor: pointer;\n      }\n      .import-filters .search-btn:hover {\n        opacity: 0.9;\n      }\n      .import-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 8px 0;\n        margin-bottom: 8px;\n      }\n      .import-header label {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        font-size: 14px;\n        cursor: pointer;\n      }\n      .import-header .count {\n        color: var(--text-secondary, #64748b);\n        font-size: 13px;\n      }\n      .import-meeting {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        padding: 12px 16px;\n        background: var(--bg-secondary, #f8fafc);\n        border-radius: 8px;\n        cursor: pointer;\n        transition: background 0.2s;\n      }\n      .import-meeting:hover {\n        background: var(--bg-tertiary, #f1f5f9);\n      }\n      .import-meeting.selected {\n        background: rgba(225, 29, 72, 0.05);\n        border: 1px solid rgba(225, 29, 72, 0.2);\n      }\n      .import-meeting.imported {\n        opacity: 0.6;\n      }\n      .import-meeting input[type=\"checkbox\"] {\n        width: 18px;\n        height: 18px;\n        cursor: pointer;\n      }\n      .import-meeting-content {\n        flex: 1;\n        min-width: 0;\n      }\n      .import-meeting-title {\n        font-weight: 500;\n        color: var(--text-primary, #1e293b);\n        display: flex;\n        align-items: center;\n        gap: 8px;\n      }\n      .import-meeting-title .imported-badge {\n        font-size: 10px;\n        padding: 2px 6px;\n        border-radius: 4px;\n        background: #dcfce7;\n        color: #166534;\n      }\n      .import-meeting-meta {\n        font-size: 12px;\n        color: var(--text-secondary, #64748b);\n        margin-top: 2px;\n      }\n      .import-project-selector {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        padding: 12px 16px;\n        background: var(--bg-secondary, #f8fafc);\n        border-radius: 8px;\n        margin-bottom: 16px;\n      }\n      .import-project-selector label {\n        font-weight: 500;\n        font-size: 14px;\n        color: var(--text-primary, #1e293b);\n        white-space: nowrap;\n      }\n      .import-project-selector select {\n        flex: 1;\n        padding: 8px 12px;\n        border: 1px solid var(--border-color, #e2e8f0);\n        border-radius: 6px;\n        background: white;\n        font-size: 14px;\n        cursor: pointer;\n      }\n      .import-project-selector select:focus {\n        outline: none;\n        border-color: var(--primary, #e11d48);\n      }\n      [data-theme=\"dark\"] .import-project-selector {\n        background: rgba(30,41,59,0.5);\n      }\n      [data-theme=\"dark\"] .import-project-selector select {\n        background: rgba(30,41,59,0.8);\n        color: white;\n        border-color: rgba(255,255,255,0.1);\n      }\n      .import-footer {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 16px 0;\n        border-top: 1px solid var(--border-color, #e2e8f0);\n        margin-top: 16px;\n      }\n      .import-footer .selected-count {\n        font-size: 14px;\n        color: var(--text-secondary, #64748b);\n      }\n      .import-btn {\n        padding: 10px 24px;\n        background: var(--primary, #e11d48);\n        color: white;\n        border: none;\n        border-radius: 8px;\n        font-weight: 500;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n      }\n      .import-btn:disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n      }\n      .import-btn:not(:disabled):hover {\n        opacity: 0.9;\n      }\n      .import-note {\n        background: #fef3c7;\n        border: 1px solid #fcd34d;\n        border-radius: 8px;\n        padding: 12px 16px;\n        margin-bottom: 16px;\n        font-size: 13px;\n        color: #92400e;\n        display: flex;\n        align-items: flex-start;\n        gap: 10px;\n      }\n      .import-note svg {\n        width: 18px;\n        height: 18px;\n        flex-shrink: 0;\n        margin-top: 1px;\n      }\n      [data-theme=\"dark\"] .import-filters {\n        background: rgba(30,41,59,0.5);\n      }\n      [data-theme=\"dark\"] .import-filters input {\n        background: rgba(30,41,59,0.8);\n        color: white;\n        border-color: rgba(255,255,255,0.1);\n      }\n      [data-theme=\"dark\"] .import-meeting {\n        background: rgba(30,41,59,0.5);\n      }\n      [data-theme=\"dark\"] .import-meeting.selected {\n        background: rgba(225,29,72,0.1);\n        border-color: rgba(225,29,72,0.3);\n      }\n      [data-theme=\"dark\"] .import-note {\n        background: rgba(251,191,36,0.1);\n        border-color: rgba(251,191,36,0.3);\n        color: #fcd34d;\n      }\n      .import-stats {\n        display: flex;\n        gap: 16px;\n        margin-bottom: 16px;\n        padding: 16px;\n        background: var(--bg-secondary, #f8fafc);\n        border-radius: 8px;\n      }\n      .stat-item {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        flex: 1;\n      }\n      .stat-value {\n        font-size: 24px;\n        font-weight: 700;\n        color: var(--primary, #e11d48);\n      }\n      .stat-label {\n        font-size: 11px;\n        color: var(--text-secondary, #64748b);\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n      }\n      .import-meeting-summary {\n        font-size: 12px;\n        color: var(--text-secondary, #64748b);\n        margin-top: 4px;\n        line-height: 1.4;\n      }\n      .import-meeting-actions {\n        display: flex;\n        gap: 8px;\n        flex-shrink: 0;\n      }\n      .summary-btn {\n        padding: 6px 12px;\n        font-size: 11px;\n        border-radius: 6px;\n        border: 1px solid var(--border-color, #e2e8f0);\n        background: white;\n        cursor: pointer;\n        transition: all 0.2s;\n        display: flex;\n        align-items: center;\n        gap: 4px;\n        white-space: nowrap;\n      }\n      .summary-btn:hover {\n        background: var(--bg-secondary, #f8fafc);\n        border-color: var(--primary, #e11d48);\n      }\n      .summary-btn:disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n      }\n      .summary-btn svg {\n        width: 14px;\n        height: 14px;\n      }\n      .summary-modal-overlay {\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: rgba(0,0,0,0.5);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 10000;\n      }\n      .summary-modal {\n        background: white;\n        border-radius: 12px;\n        width: 90%;\n        max-width: 600px;\n        max-height: 80vh;\n        overflow: hidden;\n        box-shadow: 0 20px 60px rgba(0,0,0,0.3);\n      }\n      .summary-modal-header {\n        padding: 16px 20px;\n        border-bottom: 1px solid var(--border-color, #e2e8f0);\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n      }\n      .summary-modal-header h3 {\n        margin: 0;\n        font-size: 16px;\n        font-weight: 600;\n      }\n      .summary-modal-close {\n        background: none;\n        border: none;\n        cursor: pointer;\n        font-size: 20px;\n        color: var(--text-secondary, #64748b);\n        padding: 4px;\n      }\n      .summary-modal-body {\n        padding: 20px;\n        overflow-y: auto;\n        max-height: calc(80vh - 60px);\n      }\n      .summary-section {\n        margin-bottom: 20px;\n      }\n      .summary-section:last-child {\n        margin-bottom: 0;\n      }\n      .summary-section h4 {\n        font-size: 12px;\n        font-weight: 600;\n        text-transform: uppercase;\n        color: var(--text-secondary, #64748b);\n        margin: 0 0 8px 0;\n        letter-spacing: 0.5px;\n      }\n      .summary-section p {\n        margin: 0;\n        color: var(--text-primary, #1e293b);\n        line-height: 1.6;\n      }\n      .summary-section ul {\n        margin: 0;\n        padding-left: 20px;\n        color: var(--text-primary, #1e293b);\n      }\n      .summary-section li {\n        margin-bottom: 6px;\n        line-height: 1.4;\n      }\n      .summary-loading {\n        text-align: center;\n        padding: 40px;\n        color: var(--text-secondary, #64748b);\n      }\n      [data-theme=\"dark\"] .summary-btn {\n        background: rgba(30,41,59,0.8);\n        border-color: rgba(255,255,255,0.1);\n        color: white;\n      }\n      [data-theme=\"dark\"] .summary-modal {\n        background: var(--bg-primary, #0f172a);\n        color: white;\n      }\n      [data-theme=\"dark\"] .import-stats {\n        background: rgba(255,255,255,0.03);\n      }\n    </style>\n    \n    <div class=\"krisp-tabs\">\n      <button class=\"krisp-tab ${initialTab === 'transcripts' ? 'active' : ''}\" data-tab=\"transcripts\">\n        Transcripts\n        <span class=\"badge\" id=\"transcripts-count\">0</span>\n      </button>\n      <button class=\"krisp-tab ${initialTab === 'quarantine' ? 'active' : ''}\" data-tab=\"quarantine\">\n        Quarantine\n        <span class=\"badge warning\" id=\"quarantine-count\">0</span>\n      </button>\n      <button class=\"krisp-tab ${initialTab === 'mappings' ? 'active' : ''}\" data-tab=\"mappings\">\n        Mappings\n        <span class=\"badge\" id=\"mappings-count\">0</span>\n      </button>\n      <button class=\"krisp-tab ${initialTab === 'import' ? 'active' : ''}\" data-tab=\"import\">\n        Import\n        <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" style=\"margin-left: 6px;\">\n          <path d=\"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3\"/>\n        </svg>\n      </button>\n    </div>\n    \n    <div class=\"krisp-content\" id=\"krisp-content\">\n      <div class=\"krisp-loading\">\n        <div class=\"loading-spinner\"></div>\n      </div>\n    </div>\n  `;\n\n  const modal = createModal({\n    id: MODAL_ID,\n    title: 'Krisp Transcripts',\n    content,\n    size: 'xl',\n  });\n\n  document.body.appendChild(modal);\n  openModal(MODAL_ID);\n\n  // Bind tab events\n  bindTabEvents(content);\n\n  // Load initial data\n  await loadTabContent('transcripts');\n}\n\n/**\n * Bind tab switching events\n */\nfunction bindTabEvents(container: HTMLElement): void {\n  const tabs = container.querySelectorAll('.krisp-tab');\n  tabs.forEach(tab => {\n    on(tab as HTMLElement, 'click', async () => {\n      const tabId = tab.getAttribute('data-tab') as TabId;\n      if (tabId === state.activeTab) return;\n\n      tabs.forEach(t => t.classList.remove('active'));\n      tab.classList.add('active');\n      state.activeTab = tabId;\n\n      await loadTabContent(tabId);\n    });\n  });\n}\n\n/**\n * Load tab content\n */\nasync function loadTabContent(tabId: TabId): Promise<void> {\n  if (!containerRef) return;\n\n  const contentEl = containerRef.querySelector('#krisp-content');\n  if (!contentEl) return;\n\n  contentEl.innerHTML = '<div class=\"krisp-loading\"><div class=\"loading-spinner\"></div></div>';\n  state.loading = true;\n\n  try {\n    switch (tabId) {\n      case 'transcripts':\n        await loadTranscripts(contentEl as HTMLElement);\n        break;\n      case 'quarantine':\n        await loadQuarantine(contentEl as HTMLElement);\n        break;\n      case 'mappings':\n        await loadMappings(contentEl as HTMLElement);\n        break;\n      case 'import':\n        await loadImport(contentEl as HTMLElement);\n        break;\n    }\n  } catch (error) {\n    console.error('[KrispManager] Error loading tab:', error);\n    contentEl.innerHTML = '<div class=\"krisp-empty\"><p>Failed to load. Please try again.</p></div>';\n  } finally {\n    state.loading = false;\n  }\n}\n\n/**\n * Load transcripts list\n */\nasync function loadTranscripts(container: HTMLElement): Promise<void> {\n  // Fetch transcripts and projects in parallel\n  const [transcripts, projects] = await Promise.all([\n    krispService.getTranscripts({ limit: 50 }),\n    projectsService.getProjects()\n  ]);\n  \n  state.transcripts = transcripts;\n  state.projects = projects;\n\n  // Update badge\n  updateBadge('transcripts-count', transcripts.length);\n\n  if (transcripts.length === 0) {\n    container.innerHTML = `\n      <div class=\"krisp-empty\">\n        <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\"/>\n        </svg>\n        <p>No transcripts yet</p>\n        <p style=\"font-size: 12px; margin-top: 8px;\">Configure your Krisp webhook in Profile &gt; Integrations</p>\n      </div>\n    `;\n    return;\n  }\n\n  container.innerHTML = `<div class=\"krisp-list\">${transcripts.map(t => renderTranscriptItem(t)).join('')}</div>`;\n  bindTranscriptActions(container);\n}\n\n/**\n * Load quarantine list\n */\nasync function loadQuarantine(container: HTMLElement): Promise<void> {\n  const quarantine = await krispService.getQuarantinedTranscripts();\n  state.quarantine = quarantine;\n\n  // Update badge\n  updateBadge('quarantine-count', quarantine.length);\n\n  if (quarantine.length === 0) {\n    container.innerHTML = `\n      <div class=\"krisp-empty\">\n        <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"/>\n        </svg>\n        <p>No transcripts in quarantine</p>\n        <p style=\"font-size: 12px; margin-top: 8px;\">All speakers are identified correctly</p>\n      </div>\n    `;\n    return;\n  }\n\n  container.innerHTML = `<div class=\"krisp-list\">${quarantine.map(t => renderQuarantineItem(t)).join('')}</div>`;\n  bindQuarantineActions(container);\n}\n\n/**\n * Load mappings list\n */\nasync function loadMappings(container: HTMLElement): Promise<void> {\n  const mappings = await krispService.getMappings();\n  state.mappings = mappings;\n\n  // Update badge\n  updateBadge('mappings-count', mappings.length);\n\n  if (mappings.length === 0) {\n    container.innerHTML = `\n      <div class=\"krisp-empty\">\n        <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\"/>\n        </svg>\n        <p>No speaker mappings</p>\n        <p style=\"font-size: 12px; margin-top: 8px;\">Mappings are created when you manually link speakers to contacts</p>\n      </div>\n    `;\n    return;\n  }\n\n  container.innerHTML = `<div class=\"krisp-list\">${mappings.map(m => renderMappingItem(m)).join('')}</div>`;\n  bindMappingActions(container);\n}\n\n/**\n * Render transcript item\n */\nfunction renderTranscriptItem(transcript: KrispTranscript): string {\n  const { label } = krispService.formatStatus(transcript.status);\n  const duration = krispService.formatDuration(transcript.duration_minutes);\n  const date = transcript.meeting_date ? new Date(transcript.meeting_date).toLocaleDateString() : '-';\n  const speakers = transcript.speakers?.length || 0;\n  const needsProject = transcript.status === 'pending' && !transcript.matched_project_id;\n  \n  // Build project options for pending transcripts without project\n  const projectOptions = state.projects.map(p => \n    `<option value=\"${p.id}\">${escapeHtml(p.name)}</option>`\n  ).join('');\n\n  return `\n    <div class=\"krisp-item ${needsProject ? 'needs-project' : ''}\" data-id=\"${transcript.id}\">\n      <div class=\"krisp-item-icon\">\n        <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\"/>\n        </svg>\n      </div>\n      <div class=\"krisp-item-content\">\n        <div class=\"krisp-item-title\">${escapeHtml(transcript.display_title || transcript.krisp_title || 'Untitled Meeting')}</div>\n        <div class=\"krisp-item-meta\">\n          <span>${date}</span>\n          <span>${duration}</span>\n          <span>${speakers} speakers</span>\n          ${transcript.projects?.name ? `<span class=\"project-tag\">${escapeHtml(transcript.projects.name)}</span>` : ''}\n        </div>\n      </div>\n      ${needsProject ? `\n        <div class=\"krisp-item-assign\">\n          <select class=\"assign-project-select\" data-transcript-id=\"${transcript.id}\">\n            <option value=\"\">Select project...</option>\n            ${projectOptions}\n          </select>\n          <button class=\"assign-project-btn\" data-transcript-id=\"${transcript.id}\" disabled>\n            Assign\n          </button>\n        </div>\n      ` : transcript.status === 'matched' ? `\n        <div class=\"krisp-item-actions\">\n          <span class=\"krisp-item-status status-${transcript.status}\">${label}</span>\n          <button class=\"process-btn primary\" data-id=\"${transcript.id}\" title=\"Process and create document\">\n            Process\n          </button>\n        </div>\n      ` : `\n        <span class=\"krisp-item-status status-${transcript.status}\">${label}</span>\n      `}\n    </div>\n  `;\n}\n\n/**\n * Render quarantine item with actions\n */\nfunction renderQuarantineItem(transcript: KrispTranscript): string {\n  const { label } = krispService.formatStatus(transcript.status);\n  const duration = krispService.formatDuration(transcript.duration_minutes);\n  const date = transcript.meeting_date ? new Date(transcript.meeting_date).toLocaleDateString() : '-';\n\n  return `\n    <div class=\"krisp-item\" data-id=\"${transcript.id}\">\n      <div class=\"krisp-item-icon\">\n        <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"/>\n        </svg>\n      </div>\n      <div class=\"krisp-item-content\">\n        <div class=\"krisp-item-title\">${escapeHtml(transcript.krisp_title || 'Untitled Meeting')}</div>\n        <div class=\"krisp-item-meta\">\n          <span>${date}</span>\n          <span>${duration}</span>\n          <span style=\"color: #f59e0b;\">${transcript.status_reason || label}</span>\n        </div>\n      </div>\n      <div class=\"krisp-item-actions\">\n        <button class=\"retry-btn\" data-id=\"${transcript.id}\" title=\"Retry processing\">Retry</button>\n        <button class=\"assign-btn primary\" data-id=\"${transcript.id}\" title=\"Assign to project\">Assign</button>\n        <button class=\"skip-btn\" data-id=\"${transcript.id}\" title=\"Discard\">Skip</button>\n      </div>\n    </div>\n  `;\n}\n\n/**\n * Render mapping item\n */\nfunction renderMappingItem(mapping: KrispSpeakerMapping): string {\n  return `\n    <div class=\"mapping-item\" data-id=\"${mapping.id}\">\n      <div class=\"mapping-info\">\n        <span class=\"mapping-speaker\">${escapeHtml(mapping.speaker_name)}</span>\n        <span class=\"mapping-arrow\"></span>\n        <span class=\"mapping-contact\">${escapeHtml(mapping.contacts?.name || 'Unknown')}</span>\n        ${mapping.is_global ? '<span class=\"mapping-badge\">Global</span>' : ''}\n      </div>\n      <button class=\"delete-mapping-btn\" data-id=\"${mapping.id}\" title=\"Remove mapping\">\n        <svg width=\"16\" height=\"16\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"/>\n        </svg>\n      </button>\n    </div>\n  `;\n}\n\n/**\n * Bind transcript click actions\n */\nfunction bindTranscriptActions(container: HTMLElement): void {\n  // Click to show details (but not when clicking assign controls)\n  container.querySelectorAll('.krisp-item').forEach(item => {\n    on(item as HTMLElement, 'click', (e) => {\n      const target = e.target as HTMLElement;\n      // Ignore clicks on assign controls\n      if (target.closest('.krisp-item-assign')) return;\n      \n      const id = item.getAttribute('data-id');\n      const transcript = state.transcripts.find(t => t.id === id);\n      if (transcript) {\n        showTranscriptDetail(transcript);\n      }\n    });\n  });\n  \n  // Project selection dropdowns\n  container.querySelectorAll('.assign-project-select').forEach(select => {\n    on(select as HTMLElement, 'change', () => {\n      const transcriptId = select.getAttribute('data-transcript-id');\n      const btn = container.querySelector(`.assign-project-btn[data-transcript-id=\"${transcriptId}\"]`) as HTMLButtonElement;\n      if (btn) {\n        btn.disabled = !(select as HTMLSelectElement).value;\n      }\n    });\n    \n    // Stop propagation to prevent item click\n    on(select as HTMLElement, 'click', (e) => e.stopPropagation());\n  });\n  \n  // Assign project buttons\n  container.querySelectorAll('.assign-project-btn').forEach(btn => {\n    on(btn as HTMLElement, 'click', async (e) => {\n      e.stopPropagation();\n      const transcriptId = btn.getAttribute('data-transcript-id');\n      if (!transcriptId) return;\n      \n      const select = container.querySelector(`.assign-project-select[data-transcript-id=\"${transcriptId}\"]`) as HTMLSelectElement;\n      const projectId = select?.value;\n      if (!projectId) return;\n      \n      // Disable button and show loading\n      (btn as HTMLButtonElement).disabled = true;\n      btn.textContent = 'Assigning...';\n      \n      const success = await krispService.assignProject(transcriptId, projectId);\n      \n      if (success) {\n        const project = state.projects.find(p => p.id === projectId);\n        toast.success(`Assigned to ${project?.name || 'project'}`);\n        // Reload the transcripts list\n        await loadTranscripts(container);\n      } else {\n        toast.error('Failed to assign project');\n        (btn as HTMLButtonElement).disabled = false;\n        btn.textContent = 'Assign';\n      }\n    });\n  });\n  \n  // Process buttons (for MATCHED transcripts)\n  container.querySelectorAll('.process-btn').forEach(btn => {\n    on(btn as HTMLElement, 'click', async (e) => {\n      e.stopPropagation();\n      const id = btn.getAttribute('data-id');\n      if (!id) return;\n\n      btn.textContent = 'Processing...';\n      (btn as HTMLButtonElement).disabled = true;\n      \n      const success = await krispService.processTranscript(id);\n      \n      if (success) {\n        toast.success('Transcript processed - document created');\n        await loadTranscripts(container);\n      } else {\n        toast.error('Processing failed');\n        btn.textContent = 'Process';\n        (btn as HTMLButtonElement).disabled = false;\n      }\n    });\n  });\n}\n\n/**\n * Bind quarantine action buttons\n */\nfunction bindQuarantineActions(container: HTMLElement): void {\n  // Retry buttons\n  container.querySelectorAll('.retry-btn').forEach(btn => {\n    on(btn as HTMLElement, 'click', async (e) => {\n      e.stopPropagation();\n      const id = btn.getAttribute('data-id');\n      if (!id) return;\n\n      btn.textContent = '...';\n      const success = await krispService.retryTranscript(id);\n      \n      if (success) {\n        toast.success('Retry queued');\n        await loadTabContent('quarantine');\n      } else {\n        toast.error('Retry failed');\n        btn.textContent = 'Retry';\n      }\n    });\n  });\n\n  // Assign buttons\n  container.querySelectorAll('.assign-btn').forEach(btn => {\n    on(btn as HTMLElement, 'click', async (e) => {\n      e.stopPropagation();\n      const id = btn.getAttribute('data-id');\n      const transcript = state.quarantine.find(t => t.id === id);\n      if (transcript) {\n        const { showProjectAssignmentModal } = await import('./ProjectAssignmentModal');\n        showProjectAssignmentModal({\n          transcript,\n          onAssign: async () => {\n            await loadTabContent('quarantine');\n          }\n        });\n      }\n    });\n  });\n\n  // Skip buttons\n  container.querySelectorAll('.skip-btn').forEach(btn => {\n    on(btn as HTMLElement, 'click', async (e) => {\n      e.stopPropagation();\n      const id = btn.getAttribute('data-id');\n      if (!id) return;\n\n      if (!confirm('Are you sure you want to skip this transcript?')) return;\n\n      const success = await krispService.skipTranscript(id, 'Manually skipped');\n      \n      if (success) {\n        toast.success('Transcript skipped');\n        await loadTabContent('quarantine');\n      } else {\n        toast.error('Failed to skip');\n      }\n    });\n  });\n}\n\n/**\n * Bind mapping action buttons\n */\nfunction bindMappingActions(container: HTMLElement): void {\n  container.querySelectorAll('.delete-mapping-btn').forEach(btn => {\n    on(btn as HTMLElement, 'click', async (e) => {\n      e.stopPropagation();\n      const id = btn.getAttribute('data-id');\n      if (!id) return;\n\n      if (!confirm('Are you sure you want to delete this mapping?')) return;\n\n      const success = await krispService.deleteMapping(id);\n      \n      if (success) {\n        toast.success('Mapping deleted');\n        await loadTabContent('mappings');\n      } else {\n        toast.error('Failed to delete');\n      }\n    });\n  });\n}\n\n/**\n * Show transcript detail modal\n */\nfunction showTranscriptDetail(transcript: KrispTranscript): void {\n  const needsProject = transcript.status === 'pending' && !transcript.matched_project_id;\n  const { label } = krispService.formatStatus(transcript.status);\n  const date = transcript.meeting_date \n    ? new Date(transcript.meeting_date).toLocaleDateString('pt-PT', { \n        day: '2-digit', month: 'short', year: 'numeric', hour: '2-digit', minute: '2-digit'\n      }) \n    : '-';\n  \n  // Build project options\n  const projectOptions = state.projects.map(p => \n    `<option value=\"${p.id}\">${escapeHtml(p.name)}</option>`\n  ).join('');\n  \n  const overlay = document.createElement('div');\n  overlay.className = 'summary-modal-overlay';\n  overlay.innerHTML = `\n    <div class=\"summary-modal\" style=\"max-width: 500px;\">\n      <div class=\"summary-modal-header\">\n        <h3>${escapeHtml(transcript.display_title || transcript.krisp_title || 'Meeting Details')}</h3>\n        <button class=\"summary-modal-close\">&times;</button>\n      </div>\n      <div class=\"summary-modal-body\">\n        <div style=\"display: flex; flex-direction: column; gap: 16px;\">\n          <div>\n            <div style=\"font-size: 12px; color: var(--text-secondary); margin-bottom: 4px;\">Status</div>\n            <span class=\"krisp-item-status status-${transcript.status}\" style=\"display: inline-block;\">${label}</span>\n          </div>\n          \n          <div>\n            <div style=\"font-size: 12px; color: var(--text-secondary); margin-bottom: 4px;\">Date</div>\n            <div style=\"font-weight: 500;\">${date}</div>\n          </div>\n          \n          <div>\n            <div style=\"font-size: 12px; color: var(--text-secondary); margin-bottom: 4px;\">Speakers</div>\n            <div style=\"display: flex; flex-wrap: wrap; gap: 6px;\">\n              ${(transcript.speakers || []).map(s => `<span style=\"padding: 4px 8px; background: var(--bg-secondary); border-radius: 4px; font-size: 13px;\">${escapeHtml(s)}</span>`).join('')}\n              ${(!transcript.speakers || transcript.speakers.length === 0) ? '<span style=\"color: var(--text-secondary);\">No speakers</span>' : ''}\n            </div>\n          </div>\n          \n          <div>\n            <div style=\"font-size: 12px; color: var(--text-secondary); margin-bottom: 4px;\">Project</div>\n            ${transcript.projects?.name \n              ? `<span class=\"project-tag\">${escapeHtml(transcript.projects.name)}</span>`\n              : `<span style=\"color: var(--text-secondary);\">Not assigned</span>`\n            }\n          </div>\n          \n          ${needsProject ? `\n            <div style=\"padding-top: 16px; border-top: 1px solid var(--border-color);\">\n              <div style=\"font-size: 12px; color: var(--text-secondary); margin-bottom: 8px;\">Assign to Project</div>\n              <div style=\"display: flex; gap: 8px;\">\n                <select id=\"detail-project-select\" style=\"flex: 1; padding: 8px 12px; border: 1px solid var(--border-color); border-radius: 6px; font-size: 14px;\">\n                  <option value=\"\">Select project...</option>\n                  ${projectOptions}\n                </select>\n                <button id=\"detail-assign-btn\" disabled style=\"padding: 8px 16px; background: var(--primary); color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: 500;\">\n                  Assign\n                </button>\n              </div>\n            </div>\n          ` : ''}\n        </div>\n      </div>\n    </div>\n  `;\n  \n  document.body.appendChild(overlay);\n  \n  // Close button\n  const closeBtn = overlay.querySelector('.summary-modal-close');\n  closeBtn?.addEventListener('click', () => overlay.remove());\n  \n  // Click outside to close\n  overlay.addEventListener('click', (e) => {\n    if (e.target === overlay) overlay.remove();\n  });\n  \n  // ESC to close\n  const handleEsc = (e: KeyboardEvent) => {\n    if (e.key === 'Escape') {\n      overlay.remove();\n      document.removeEventListener('keydown', handleEsc);\n    }\n  };\n  document.addEventListener('keydown', handleEsc);\n  \n  // Project assignment handlers (if needed)\n  if (needsProject) {\n    const select = overlay.querySelector('#detail-project-select') as HTMLSelectElement;\n    const btn = overlay.querySelector('#detail-assign-btn') as HTMLButtonElement;\n    \n    select?.addEventListener('change', () => {\n      btn.disabled = !select.value;\n    });\n    \n    btn?.addEventListener('click', async () => {\n      const projectId = select.value;\n      if (!projectId) return;\n      \n      btn.disabled = true;\n      btn.textContent = 'Assigning...';\n      \n      const success = await krispService.assignProject(transcript.id, projectId);\n      \n      if (success) {\n        const project = state.projects.find(p => p.id === projectId);\n        toast.success(`Assigned to ${project?.name || 'project'}`);\n        overlay.remove();\n        // Reload transcripts\n        if (containerRef) {\n          const contentEl = containerRef.querySelector('#krisp-content');\n          if (contentEl) {\n            await loadTranscripts(contentEl as HTMLElement);\n          }\n        }\n      } else {\n        toast.error('Failed to assign project');\n        btn.disabled = false;\n        btn.textContent = 'Assign';\n      }\n    });\n  }\n}\n\n/**\n * Update badge count\n */\nfunction updateBadge(id: string, count: number): void {\n  if (!containerRef) return;\n  const badge = containerRef.querySelector(`#${id}`);\n  if (badge) {\n    badge.textContent = String(count);\n  }\n}\n\n// ==================== Import Tab ====================\n\n/**\n * Load import tab - fetches available meetings from the catalog\n */\nasync function loadImport(container: HTMLElement): Promise<void> {\n  // Fetch available meetings and projects in parallel\n  const [result, projects] = await Promise.all([\n    krispService.getAvailableMeetings({\n      limit: 100,\n      showImported: true,\n      startDate: state.importFilters.after || undefined,\n      endDate: state.importFilters.before || undefined,\n      search: state.importFilters.search || undefined\n    }),\n    projectsService.getProjects()\n  ]);\n\n  // Store projects in state\n  state.projects = projects;\n  \n  const stats = result?.stats || {\n    total_available: 0,\n    total_imported: 0,\n    total_pending: 0,\n    last_sync: null\n  };\n\n  const lastSync = stats.last_sync \n    ? new Date(stats.last_sync).toLocaleString()\n    : 'Never';\n\n  // Build project options HTML\n  const projectOptions = state.projects.map(p => \n    `<option value=\"${p.id}\" ${state.selectedProjectId === p.id ? 'selected' : ''}>${escapeHtml(p.name)}</option>`\n  ).join('');\n\n  // Render the import UI\n  container.innerHTML = `\n    <div class=\"import-note\">\n      <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"/>\n      </svg>\n      <div>\n        <strong>Import from Krisp</strong><br>\n        Meetings synced from Krisp are shown below. To sync new meetings, ask Cursor: \n        <em>\"sincroniza as meetings do Krisp\"</em>\n      </div>\n    </div>\n    \n    <div class=\"import-stats\">\n      <div class=\"stat-item\">\n        <span class=\"stat-value\">${stats.total_available}</span>\n        <span class=\"stat-label\">Available</span>\n      </div>\n      <div class=\"stat-item\">\n        <span class=\"stat-value\">${stats.total_imported}</span>\n        <span class=\"stat-label\">Imported</span>\n      </div>\n      <div class=\"stat-item\">\n        <span class=\"stat-value\">${stats.total_pending}</span>\n        <span class=\"stat-label\">Pending</span>\n      </div>\n      <div class=\"stat-item\">\n        <span class=\"stat-value\" style=\"font-size: 12px;\">${lastSync}</span>\n        <span class=\"stat-label\">Last Sync</span>\n      </div>\n    </div>\n    \n    <div class=\"import-project-selector\">\n      <label for=\"import-project\">Import to Project:</label>\n      <select id=\"import-project\">\n        <option value=\"\">-- Select a project --</option>\n        ${projectOptions}\n      </select>\n    </div>\n    \n    <div class=\"import-filters\">\n      <label>\n        From Date\n        <input type=\"date\" id=\"import-after\" value=\"${state.importFilters.after}\" />\n      </label>\n      <label>\n        To Date\n        <input type=\"date\" id=\"import-before\" value=\"${state.importFilters.before}\" />\n      </label>\n      <div class=\"search-row\">\n        <label style=\"flex: 1;\">\n          Search\n          <input type=\"text\" id=\"import-search\" placeholder=\"Search by title...\" value=\"${state.importFilters.search}\" />\n        </label>\n        <button class=\"search-btn\" id=\"import-filter-btn\">\n          Filter\n        </button>\n      </div>\n    </div>\n    \n    <div id=\"import-results\">\n      ${renderAvailableMeetingsList(result?.meetings || [])}\n    </div>\n  `;\n  \n  // Store meetings in state\n  if (result?.meetings) {\n    state.mcpMeetings = result.meetings.map(m => ({\n      meeting_id: m.krisp_meeting_id,\n      name: m.meeting_name,\n      date: m.meeting_date,\n      speakers: m.speakers,\n      attendees: m.attendees,\n      meeting_notes: {\n        key_points: m.key_points,\n        action_items: m.action_items\n      }\n    }));\n    state.importedIds = new Set(\n      result.meetings.filter(m => m.is_imported).map(m => m.krisp_meeting_id)\n    );\n  }\n  \n  bindImportFilters(container);\n}\n\n/**\n * Render available meetings list\n */\nfunction renderAvailableMeetingsList(meetings: krispService.AvailableMeeting[]): string {\n  if (meetings.length === 0) {\n    return `\n      <div class=\"krisp-empty\">\n        <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\"/>\n        </svg>\n        <p>No meetings synced yet</p>\n        <p style=\"font-size: 12px; margin-top: 8px;\">\n          Ask Cursor to sync: <em>\"sincroniza as meetings do Krisp de [data] a [data]\"</em>\n        </p>\n      </div>\n    `;\n  }\n\n  const notImportedCount = meetings.filter(m => !m.is_imported).length;\n  \n  return `\n    <div class=\"import-header\">\n      <label>\n        <input type=\"checkbox\" id=\"select-all\" />\n        Select All (${notImportedCount} available)\n      </label>\n      <span class=\"count\">Showing ${meetings.length} meetings</span>\n    </div>\n    \n    <div class=\"krisp-list\">\n      ${meetings.map(m => renderAvailableMeetingItem(m)).join('')}\n    </div>\n    \n    <div class=\"import-footer\">\n      <span class=\"selected-count\" id=\"selected-count\">0 selected</span>\n      <button class=\"import-btn\" id=\"import-selected-btn\" disabled>\n        <svg width=\"16\" height=\"16\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\"/>\n        </svg>\n        Import Selected\n      </button>\n    </div>\n  `;\n}\n\n/**\n * Safely parse JSON array field (speakers/attendees may be stored as JSON strings)\n */\nfunction parseArrayField(field: unknown): string[] {\n  if (!field) return [];\n  if (Array.isArray(field)) return field;\n  if (typeof field === 'string') {\n    try {\n      const parsed = JSON.parse(field);\n      return Array.isArray(parsed) ? parsed : [];\n    } catch {\n      return [];\n    }\n  }\n  return [];\n}\n\n/**\n * Render single available meeting item\n */\nfunction renderAvailableMeetingItem(meeting: krispService.AvailableMeeting): string {\n  const isImported = meeting.is_imported;\n  const isSelected = state.selectedMeetings.has(meeting.krisp_meeting_id);\n  const speakersArr = parseArrayField(meeting.speakers);\n  const attendeesArr = parseArrayField(meeting.attendees);\n  const speakers = speakersArr.length > 0 ? speakersArr.join(', ') : (attendeesArr.length > 0 ? attendeesArr.join(', ') : 'No participants');\n  const date = meeting.meeting_date ? new Date(meeting.meeting_date).toLocaleDateString('en-US', { \n    month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit'\n  }) : '';\n  \n  const keyPointsArr = parseArrayField(meeting.key_points);\n  const hasSummary = meeting.summary || keyPointsArr.length > 0;\n  \n  return `\n    <div class=\"import-meeting ${isSelected ? 'selected' : ''} ${isImported ? 'imported' : ''}\" data-id=\"${meeting.krisp_meeting_id}\">\n      <input type=\"checkbox\" ${isSelected ? 'checked' : ''} ${isImported ? 'disabled' : ''} />\n      <div class=\"import-meeting-content\">\n        <div class=\"import-meeting-title\">\n          ${escapeHtml(meeting.meeting_name || 'Untitled Meeting')}\n          ${isImported ? '<span class=\"imported-badge\">Imported</span>' : ''}\n        </div>\n        <div class=\"import-meeting-meta\">\n          ${date}  ${escapeHtml(speakers.substring(0, 100))}${speakers.length > 100 ? '...' : ''}\n        </div>\n        ${meeting.summary ? `<div class=\"import-meeting-summary\">${escapeHtml(meeting.summary.substring(0, 150))}${meeting.summary.length > 150 ? '...' : ''}</div>` : ''}\n      </div>\n      <div class=\"import-meeting-actions\">\n        <button class=\"summary-btn\" data-meeting-id=\"${meeting.krisp_meeting_id}\" title=\"${hasSummary ? 'View/Refresh Summary' : 'Generate AI Summary'}\">\n          <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\"/>\n          </svg>\n          ${hasSummary ? 'Summary' : 'AI Summary'}\n        </button>\n      </div>\n    </div>\n  `;\n}\n\n/**\n * Bind import filter events\n */\nfunction bindImportFilters(container: HTMLElement): void {\n  const filterBtn = container.querySelector('#import-filter-btn');\n  \n  if (filterBtn) {\n    on(filterBtn as HTMLElement, 'click', async () => {\n      // Save filter values to state\n      const afterInput = container.querySelector('#import-after') as HTMLInputElement;\n      const beforeInput = container.querySelector('#import-before') as HTMLInputElement;\n      const searchInput = container.querySelector('#import-search') as HTMLInputElement;\n      \n      state.importFilters = {\n        after: afterInput?.value || '',\n        before: beforeInput?.value || '',\n        domain: '',\n        search: searchInput?.value || ''\n      };\n      \n      // Reload the import tab with new filters\n      await loadImport(container);\n    });\n  }\n  \n  // Project selector change handler\n  const projectSelect = container.querySelector('#import-project');\n  if (projectSelect) {\n    on(projectSelect as HTMLElement, 'change', () => {\n      state.selectedProjectId = (projectSelect as HTMLSelectElement).value;\n    });\n  }\n  \n  // Enter key triggers filter\n  const searchInput = container.querySelector('#import-search');\n  if (searchInput) {\n    on(searchInput as HTMLElement, 'keydown', (e: KeyboardEvent) => {\n      if (e.key === 'Enter') {\n        filterBtn?.dispatchEvent(new Event('click'));\n      }\n    });\n  }\n  \n  // Bind meeting list actions\n  bindAvailableMeetingListActions(container);\n}\n\n/**\n * Bind available meeting list actions\n */\nfunction bindAvailableMeetingListActions(container: HTMLElement): void {\n  // Select all checkbox\n  const selectAll = container.querySelector('#select-all');\n  if (selectAll) {\n    on(selectAll as HTMLElement, 'change', () => {\n      const checked = (selectAll as HTMLInputElement).checked;\n      \n      if (checked) {\n        // Select all not-imported meetings\n        state.mcpMeetings.forEach(m => {\n          if (!state.importedIds.has(m.meeting_id)) {\n            state.selectedMeetings.add(m.meeting_id);\n          }\n        });\n      } else {\n        state.selectedMeetings.clear();\n      }\n      \n      updateImportSelectionUI(container);\n    });\n  }\n  \n  // Summary buttons\n  container.querySelectorAll('.summary-btn').forEach(btn => {\n    on(btn as HTMLElement, 'click', async (e) => {\n      e.stopPropagation();\n      const meetingId = btn.getAttribute('data-meeting-id');\n      if (!meetingId) return;\n      \n      // Find the meeting in state\n      const meeting = state.mcpMeetings.find(m => m.meeting_id === meetingId);\n      if (!meeting) return;\n      \n      // Show summary modal\n      await showSummaryModal(meetingId, meeting.name || 'Meeting Summary');\n    });\n  });\n  \n  // Individual meeting checkboxes\n  container.querySelectorAll('.import-meeting').forEach(item => {\n    on(item as HTMLElement, 'click', (e) => {\n      const target = e.target as HTMLElement;\n      if (target.tagName === 'INPUT' || target.closest('.summary-btn')) return; // Let checkbox and summary btn handle themselves\n      \n      const id = item.getAttribute('data-id');\n      if (!id || state.importedIds.has(id)) return;\n      \n      // Toggle selection\n      if (state.selectedMeetings.has(id)) {\n        state.selectedMeetings.delete(id);\n      } else {\n        state.selectedMeetings.add(id);\n      }\n      \n      updateImportSelectionUI(container);\n    });\n    \n    // Also handle checkbox change directly\n    const checkbox = item.querySelector('input[type=\"checkbox\"]');\n    if (checkbox) {\n      on(checkbox as HTMLElement, 'change', () => {\n        const id = item.getAttribute('data-id');\n        if (!id || state.importedIds.has(id)) return;\n        \n        if ((checkbox as HTMLInputElement).checked) {\n          state.selectedMeetings.add(id);\n        } else {\n          state.selectedMeetings.delete(id);\n        }\n        \n        updateImportSelectionUI(container);\n      });\n    }\n  });\n  \n  // Import button\n  const importBtn = container.querySelector('#import-selected-btn');\n  if (importBtn) {\n    on(importBtn as HTMLElement, 'click', async () => {\n      if (state.selectedMeetings.size === 0) return;\n      \n      // Check if a project is selected\n      if (!state.selectedProjectId) {\n        toast.warning('Please select a project to import meetings into');\n        return;\n      }\n      \n      importBtn.setAttribute('disabled', 'true');\n      importBtn.innerHTML = '<span class=\"loading-spinner\" style=\"width: 16px; height: 16px;\"></span> Importing...';\n      \n      // Get selected meeting IDs (krisp_meeting_id)\n      const selectedIds = Array.from(state.selectedMeetings);\n      \n      // Import via new API with projectId\n      const result = await krispService.importAvailableMeetings(selectedIds, state.selectedProjectId);\n      \n      if (result) {\n        if (result.imported > 0) {\n          const project = state.projects.find(p => p.id === state.selectedProjectId);\n          toast.success(`Imported ${result.imported} meeting${result.imported !== 1 ? 's' : ''} to ${project?.name || 'project'}`);\n        }\n        if (result.errors.length > 0) {\n          toast.warning(`${result.errors.length} failed to import`);\n        }\n        \n        // Reload to show updated state\n        state.selectedMeetings.clear();\n        await loadImport(container);\n      } else {\n        toast.error('Import failed');\n        importBtn.removeAttribute('disabled');\n        importBtn.innerHTML = `Import Selected`;\n      }\n    });\n  }\n}\n\n/**\n * Update import selection UI\n */\nfunction updateImportSelectionUI(container: HTMLElement): void {\n  const selectedCount = state.selectedMeetings.size;\n  \n  // Update selected count\n  const countEl = container.querySelector('#selected-count');\n  if (countEl) {\n    countEl.textContent = `${selectedCount} selected`;\n  }\n  \n  // Update import button\n  const importBtn = container.querySelector('#import-selected-btn');\n  if (importBtn) {\n    if (selectedCount > 0) {\n      importBtn.removeAttribute('disabled');\n      importBtn.innerHTML = `\n        <svg width=\"16\" height=\"16\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\"/>\n        </svg>\n        Import ${selectedCount} Meeting${selectedCount !== 1 ? 's' : ''}\n      `;\n    } else {\n      importBtn.setAttribute('disabled', 'true');\n      importBtn.innerHTML = `\n        <svg width=\"16\" height=\"16\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\"/>\n        </svg>\n        Import Selected\n      `;\n    }\n  }\n  \n  // Update checkboxes visual state\n  container.querySelectorAll('.import-meeting').forEach(item => {\n    const id = item.getAttribute('data-id');\n    const checkbox = item.querySelector('input[type=\"checkbox\"]') as HTMLInputElement;\n    \n    if (id && checkbox && !state.importedIds.has(id)) {\n      const isSelected = state.selectedMeetings.has(id);\n      checkbox.checked = isSelected;\n      item.classList.toggle('selected', isSelected);\n    }\n  });\n}\n\n\n/**\n * Show summary modal for a meeting\n */\nasync function showSummaryModal(meetingId: string, meetingName: string): Promise<void> {\n  // Create modal overlay\n  const overlay = createElement('div', { className: 'summary-modal-overlay' });\n  overlay.innerHTML = `\n    <div class=\"summary-modal\">\n      <div class=\"summary-modal-header\">\n        <h3>${escapeHtml(meetingName)}</h3>\n        <button class=\"summary-modal-close\">&times;</button>\n      </div>\n      <div class=\"summary-modal-body\">\n        <div class=\"summary-loading\">\n          <div class=\"loading-spinner\"></div>\n          <p style=\"margin-top: 12px;\">Generating AI summary...</p>\n        </div>\n      </div>\n    </div>\n  `;\n  \n  document.body.appendChild(overlay);\n  \n  // Close handlers\n  const closeModal = () => {\n    overlay.remove();\n  };\n  \n  on(overlay.querySelector('.summary-modal-close') as HTMLElement, 'click', closeModal);\n  on(overlay, 'click', (e) => {\n    if (e.target === overlay) closeModal();\n  });\n  \n  // Escape key closes\n  const escHandler = (e: KeyboardEvent) => {\n    if (e.key === 'Escape') {\n      closeModal();\n      document.removeEventListener('keydown', escHandler);\n    }\n  };\n  document.addEventListener('keydown', escHandler);\n  \n  // Generate summary\n  try {\n    const result = await krispService.generateAvailableMeetingSummary(meetingId);\n    const bodyEl = overlay.querySelector('.summary-modal-body');\n    \n    if (!bodyEl) return;\n    \n    if (result?.success && result.summary) {\n      const { key_points, action_items, excerpt, speakers, attendees, meeting_date, mentioned_people } = result.summary;\n      \n      // Combine speakers and attendees for participants\n      const allParticipants = [...(speakers || []), ...(attendees || [])];\n      const uniqueParticipants = [...new Set(allParticipants)];\n      \n      // Filter mentioned people to exclude those already in participants\n      const mentionedFiltered = (mentioned_people || []).filter(\n        p => !uniqueParticipants.some(up => up.toLowerCase() === p.toLowerCase())\n      );\n      \n      bodyEl.innerHTML = `\n        ${meeting_date ? `\n          <div class=\"summary-section\" style=\"padding-bottom: 12px; margin-bottom: 16px; border-bottom: 1px solid var(--border-color, #e2e8f0);\">\n            <div style=\"display: flex; align-items: center; gap: 8px; color: var(--text-secondary, #64748b); font-size: 13px;\">\n              <svg width=\"16\" height=\"16\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"/>\n              </svg>\n              ${new Date(meeting_date).toLocaleDateString('pt-PT', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' })}\n            </div>\n          </div>\n        ` : ''}\n        \n        ${uniqueParticipants.length > 0 ? `\n          <div class=\"summary-section\">\n            <h4>Participants</h4>\n            <div style=\"display: flex; flex-wrap: wrap; gap: 6px;\">\n              ${uniqueParticipants.map(p => `\n                <span style=\"display: inline-flex; align-items: center; gap: 6px; padding: 4px 10px; background: var(--bg-secondary, #f1f5f9); border-radius: 16px; font-size: 13px;\">\n                  <svg width=\"14\" height=\"14\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"/>\n                  </svg>\n                  ${escapeHtml(p)}\n                </span>\n              `).join('')}\n            </div>\n          </div>\n        ` : ''}\n        \n        ${mentionedFiltered.length > 0 ? `\n          <div class=\"summary-section\">\n            <h4>Also Mentioned</h4>\n            <p style=\"font-size: 12px; color: var(--text-secondary, #64748b); margin-bottom: 8px;\">People referenced in the discussion:</p>\n            <div style=\"display: flex; flex-wrap: wrap; gap: 6px;\">\n              ${mentionedFiltered.map(p => `\n                <span style=\"display: inline-flex; align-items: center; gap: 6px; padding: 4px 10px; background: rgba(59, 130, 246, 0.1); border: 1px dashed rgba(59, 130, 246, 0.3); border-radius: 16px; font-size: 13px; color: #3b82f6;\">\n                  <svg width=\"14\" height=\"14\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"/>\n                  </svg>\n                  ${escapeHtml(p)}\n                </span>\n              `).join('')}\n            </div>\n          </div>\n        ` : ''}\n        \n        ${excerpt ? `\n          <div class=\"summary-section\">\n            <h4>Summary</h4>\n            <p>${escapeHtml(excerpt)}</p>\n          </div>\n        ` : ''}\n        \n        ${key_points && key_points.length > 0 ? `\n          <div class=\"summary-section\">\n            <h4>Key Points</h4>\n            <ul>\n              ${key_points.map(point => `<li>${escapeHtml(point)}</li>`).join('')}\n            </ul>\n          </div>\n        ` : ''}\n        \n        ${action_items && action_items.length > 0 ? `\n          <div class=\"summary-section\">\n            <h4>Action Items</h4>\n            <ul>\n              ${action_items.map(item => `<li>${escapeHtml(item)}</li>`).join('')}\n            </ul>\n          </div>\n        ` : ''}\n        \n        ${(!excerpt && (!key_points || key_points.length === 0) && (!action_items || action_items.length === 0) && uniqueParticipants.length === 0) ? `\n          <div class=\"summary-section\">\n            <p style=\"color: var(--text-secondary);\">No summary data available for this meeting. The meeting may not have enough content to generate a summary.</p>\n          </div>\n        ` : ''}\n        \n        <div style=\"margin-top: 20px; padding-top: 16px; border-top: 1px solid var(--border-color, #e2e8f0); text-align: right;\">\n          <button class=\"summary-btn refresh-summary-btn\" data-meeting-id=\"${meetingId}\">\n            <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"/>\n            </svg>\n            Refresh Summary\n          </button>\n        </div>\n      `;\n      \n      // Bind refresh button\n      const refreshBtn = bodyEl.querySelector('.refresh-summary-btn');\n      if (refreshBtn) {\n        on(refreshBtn as HTMLElement, 'click', async () => {\n          bodyEl.innerHTML = `\n            <div class=\"summary-loading\">\n              <div class=\"loading-spinner\"></div>\n              <p style=\"margin-top: 12px;\">Regenerating AI summary...</p>\n            </div>\n          `;\n          \n          // Re-call the API\n          const newResult = await krispService.generateAvailableMeetingSummary(meetingId);\n          if (newResult?.success && newResult.summary) {\n            // Close and reopen to refresh\n            closeModal();\n            await showSummaryModal(meetingId, meetingName);\n          } else {\n            bodyEl.innerHTML = `\n              <div class=\"summary-section\">\n                <p style=\"color: var(--error, #dc2626);\">Failed to regenerate summary. Please try again.</p>\n              </div>\n            `;\n          }\n        });\n      }\n    } else {\n      bodyEl.innerHTML = `\n        <div class=\"summary-section\">\n          <p style=\"color: var(--error, #dc2626);\">${escapeHtml(result?.error || 'Failed to generate summary. Please try again.')}</p>\n        </div>\n      `;\n    }\n  } catch (error) {\n    const bodyEl = overlay.querySelector('.summary-modal-body');\n    if (bodyEl) {\n      bodyEl.innerHTML = `\n        <div class=\"summary-section\">\n          <p style=\"color: var(--error, #dc2626);\">An error occurred while generating the summary.</p>\n        </div>\n      `;\n    }\n  }\n}\n\n/**\n * Escape HTML\n */\nfunction escapeHtml(text: string): string {\n  const div = document.createElement('div');\n  div.textContent = text;\n  return div.innerHTML;\n}\n\n/**\n * Close the modal\n */\nexport function closeKrispManager(): void {\n  closeModal(MODAL_ID);\n}\n"],"file":"KrispManager-utLLmchE.js"}