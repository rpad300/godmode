{"version":3,"file":"TranscriptComposer-2LIkQTLj.js","sources":["../../frontend/components/TranscriptComposer.ts"],"sourcesContent":["/**\n * Transcript Composer Component - SOTA UI\n * Multi-mode transcript input: paste text or upload file\n */\n\nimport { createElement, on } from '../utils/dom';\nimport { toast } from '../services/toast';\n\nexport interface TranscriptComposerProps {\n  onImport?: (document: unknown) => void;\n  onClose?: () => void;\n}\n\ntype InputMode = 'paste' | 'upload';\nlet currentMode: InputMode = 'paste';\n\n/**\n * Show transcript composer modal\n */\nexport function showTranscriptComposer(props: TranscriptComposerProps = {}): void {\n  const existing = document.getElementById('transcript-composer-overlay');\n  if (existing) existing.remove();\n\n  const overlay = createElement('div', { \n    id: 'transcript-composer-overlay',\n    className: 'composer-overlay' \n  });\n\n  const dialog = createTranscriptComposer(props);\n  overlay.appendChild(dialog);\n  document.body.appendChild(overlay);\n\n  on(overlay, 'click', (e) => {\n    if (e.target === overlay) {\n      closeTranscriptComposer();\n      props.onClose?.();\n    }\n  });\n\n  // Animate in\n  requestAnimationFrame(() => {\n    overlay.classList.add('visible');\n  });\n}\n\n/**\n * Close transcript composer\n */\nexport function closeTranscriptComposer(): void {\n  const overlay = document.getElementById('transcript-composer-overlay');\n  if (overlay) {\n    overlay.classList.remove('visible');\n    setTimeout(() => overlay.remove(), 200);\n  }\n}\n\n/**\n * Create transcript composer\n */\nfunction createTranscriptComposer(props: TranscriptComposerProps): HTMLElement {\n  const container = createElement('div', { className: 'composer-modal' });\n\n  container.innerHTML = `\n    <style>\n      .composer-overlay {\n        position: fixed;\n        inset: 0;\n        background: rgba(0, 0, 0, 0.5);\n        backdrop-filter: blur(8px);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 10000;\n        opacity: 0;\n        transition: opacity 0.2s ease;\n      }\n      .composer-overlay.visible {\n        opacity: 1;\n      }\n      .composer-overlay.visible .composer-modal {\n        transform: translateY(0) scale(1);\n        opacity: 1;\n      }\n      .composer-modal {\n        width: 640px;\n        max-width: 95vw;\n        max-height: 85vh;\n        background: var(--bg-primary);\n        border-radius: 16px;\n        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n        display: flex;\n        flex-direction: column;\n        overflow: hidden;\n        transform: translateY(20px) scale(0.98);\n        opacity: 0;\n        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n      }\n      \n      /* Header */\n      .composer-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 20px 24px;\n        border-bottom: 1px solid var(--border-color);\n      }\n      .composer-header h2 {\n        margin: 0;\n        font-size: 18px;\n        font-weight: 600;\n        color: var(--text-primary);\n      }\n      .composer-close {\n        width: 32px;\n        height: 32px;\n        border: none;\n        background: var(--bg-secondary);\n        border-radius: 8px;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: var(--text-secondary);\n        transition: all 0.15s ease;\n      }\n      .composer-close:hover {\n        background: var(--bg-tertiary);\n        color: var(--text-primary);\n      }\n      \n      /* Tabs */\n      .composer-tabs {\n        display: flex;\n        padding: 0 24px;\n        border-bottom: 1px solid var(--border-color);\n        background: var(--bg-secondary);\n      }\n      .composer-tab {\n        padding: 14px 20px;\n        font-size: 14px;\n        font-weight: 500;\n        color: var(--text-secondary);\n        background: none;\n        border: none;\n        cursor: pointer;\n        position: relative;\n        transition: color 0.15s ease;\n      }\n      .composer-tab:hover {\n        color: var(--text-primary);\n      }\n      .composer-tab.active {\n        color: var(--primary);\n      }\n      .composer-tab.active::after {\n        content: '';\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        height: 2px;\n        background: var(--primary);\n        border-radius: 2px 2px 0 0;\n      }\n      \n      /* Content */\n      .composer-body {\n        flex: 1;\n        padding: 24px;\n        overflow-y: auto;\n      }\n      \n      /* Paste Mode */\n      .paste-section label {\n        display: block;\n        font-size: 14px;\n        font-weight: 500;\n        color: var(--text-primary);\n        margin-bottom: 12px;\n      }\n      .paste-section textarea {\n        width: 100%;\n        min-height: 280px;\n        padding: 16px;\n        border: 1px solid var(--border-color);\n        border-radius: 12px;\n        background: var(--bg-secondary);\n        color: var(--text-primary);\n        font-family: 'SF Mono', Monaco, 'Cascadia Code', monospace;\n        font-size: 13px;\n        line-height: 1.6;\n        resize: vertical;\n        transition: border-color 0.15s ease, box-shadow 0.15s ease;\n      }\n      .paste-section textarea:focus {\n        outline: none;\n        border-color: var(--primary);\n        box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.1);\n      }\n      .paste-section textarea::placeholder {\n        color: var(--text-tertiary);\n      }\n      .paste-hint {\n        margin-top: 12px;\n        font-size: 13px;\n        color: var(--text-tertiary);\n      }\n      \n      /* Source Select */\n      .source-row {\n        margin-top: 20px;\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n      .source-row label {\n        font-size: 13px;\n        color: var(--text-secondary);\n        white-space: nowrap;\n      }\n      .source-row select {\n        flex: 1;\n        max-width: 200px;\n        padding: 10px 14px;\n        border: 1px solid var(--border-color);\n        border-radius: 8px;\n        background: var(--bg-secondary);\n        color: var(--text-primary);\n        font-size: 13px;\n        cursor: pointer;\n      }\n      .source-row select:focus {\n        outline: none;\n        border-color: var(--primary);\n      }\n      \n      /* Upload Mode */\n      .upload-section .dropzone {\n        border: 2px dashed var(--border-color);\n        border-radius: 16px;\n        padding: 60px 40px;\n        text-align: center;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        background: var(--bg-secondary);\n      }\n      .upload-section .dropzone:hover,\n      .upload-section .dropzone.dragover {\n        border-color: var(--primary);\n        background: rgba(var(--primary-rgb), 0.03);\n      }\n      .dropzone-icon {\n        font-size: 48px;\n        margin-bottom: 16px;\n      }\n      .dropzone-title {\n        font-size: 16px;\n        font-weight: 500;\n        color: var(--text-primary);\n        margin-bottom: 8px;\n      }\n      .dropzone-hint {\n        font-size: 13px;\n        color: var(--text-tertiary);\n      }\n      \n      /* Selected File */\n      .selected-file {\n        display: none;\n        align-items: center;\n        gap: 16px;\n        margin-top: 20px;\n        padding: 16px;\n        background: var(--bg-secondary);\n        border-radius: 12px;\n        border: 1px solid var(--border-color);\n      }\n      .selected-file.visible {\n        display: flex;\n      }\n      .file-icon {\n        width: 48px;\n        height: 48px;\n        background: linear-gradient(135deg, var(--primary), color-mix(in srgb, var(--primary) 70%, white));\n        border-radius: 12px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 24px;\n      }\n      .file-info {\n        flex: 1;\n        min-width: 0;\n      }\n      .file-name {\n        font-size: 14px;\n        font-weight: 500;\n        color: var(--text-primary);\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      .file-size {\n        font-size: 12px;\n        color: var(--text-tertiary);\n        margin-top: 2px;\n      }\n      .file-remove {\n        width: 32px;\n        height: 32px;\n        border: none;\n        background: transparent;\n        border-radius: 8px;\n        cursor: pointer;\n        color: var(--text-tertiary);\n        font-size: 18px;\n        transition: all 0.15s ease;\n      }\n      .file-remove:hover {\n        background: rgba(239, 68, 68, 0.1);\n        color: #ef4444;\n      }\n      \n      /* Footer */\n      .composer-footer {\n        display: flex;\n        justify-content: flex-end;\n        gap: 12px;\n        padding: 16px 24px;\n        border-top: 1px solid var(--border-color);\n        background: var(--bg-secondary);\n      }\n      .composer-footer .btn {\n        padding: 10px 20px;\n        border-radius: 10px;\n        font-size: 14px;\n        font-weight: 500;\n        cursor: pointer;\n        transition: all 0.15s ease;\n        border: none;\n      }\n      .composer-footer .btn-secondary {\n        background: var(--bg-primary);\n        color: var(--text-primary);\n        border: 1px solid var(--border-color);\n      }\n      .composer-footer .btn-secondary:hover {\n        background: var(--bg-tertiary);\n      }\n      .composer-footer .btn-primary {\n        background: var(--primary);\n        color: white;\n      }\n      .composer-footer .btn-primary:hover:not(:disabled) {\n        opacity: 0.9;\n        transform: translateY(-1px);\n      }\n      .composer-footer .btn-primary:disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n      }\n    </style>\n    \n    <div class=\"composer-header\">\n      <h2>Import Transcript</h2>\n      <button class=\"composer-close\" id=\"close-btn\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n          <path d=\"M18 6L6 18M6 6l12 12\"/>\n        </svg>\n      </button>\n    </div>\n    \n    <div class=\"composer-tabs\">\n      <button class=\"composer-tab active\" data-mode=\"paste\">Paste Text</button>\n      <button class=\"composer-tab\" data-mode=\"upload\">Upload File</button>\n    </div>\n    \n    <div class=\"composer-body\" id=\"composer-body\">\n      ${renderPasteMode()}\n    </div>\n    \n    <div class=\"composer-footer\">\n      <button class=\"btn btn-secondary\" id=\"cancel-btn\">Cancel</button>\n      <button class=\"btn btn-primary\" id=\"import-btn\" disabled>Process Transcript</button>\n    </div>\n  `;\n\n  // Bind tabs\n  container.querySelectorAll('.composer-tab').forEach(tab => {\n    on(tab as HTMLElement, 'click', () => {\n      container.querySelectorAll('.composer-tab').forEach(t => t.classList.remove('active'));\n      tab.classList.add('active');\n      currentMode = tab.getAttribute('data-mode') as InputMode;\n      renderMode(container);\n    });\n  });\n\n  // Bind close\n  on(container.querySelector('#close-btn') as HTMLElement, 'click', () => {\n    closeTranscriptComposer();\n    props.onClose?.();\n  });\n\n  // Bind cancel\n  on(container.querySelector('#cancel-btn') as HTMLElement, 'click', () => {\n    closeTranscriptComposer();\n    props.onClose?.();\n  });\n\n  // Bind import\n  const importBtn = container.querySelector('#import-btn') as HTMLButtonElement;\n  on(importBtn, 'click', () => handleImport(container, props));\n\n  // Initial binding\n  bindPasteMode(container);\n\n  return container;\n}\n\nfunction renderMode(container: HTMLElement): void {\n  const body = container.querySelector('#composer-body') as HTMLElement;\n  body.innerHTML = currentMode === 'paste' ? renderPasteMode() : renderUploadMode();\n  \n  if (currentMode === 'paste') {\n    bindPasteMode(container);\n  } else {\n    bindUploadMode(container);\n  }\n}\n\nfunction renderPasteMode(): string {\n  return `\n    <div class=\"paste-section\">\n      <label>Paste meeting transcript:</label>\n      <textarea id=\"transcript-input\" placeholder=\"Paste your meeting transcript here...\n\nSupported formats:\n‚Ä¢ Krisp transcripts\n‚Ä¢ Otter.ai transcripts  \n‚Ä¢ Zoom meeting transcripts\n‚Ä¢ Google Meet transcripts\n‚Ä¢ Microsoft Teams transcripts\n\nExample:\nSpeaker 1 (00:00:05):\nHello everyone, welcome to today's meeting.\n\nSpeaker 2 (00:00:12):\nThanks for having us. Let's get started.\"></textarea>\n      <p class=\"paste-hint\">Include speaker names and timestamps if available for better parsing.</p>\n      <div class=\"source-row\">\n        <label>Source:</label>\n        <select id=\"source-select\">\n          <option value=\"\">Auto-detect</option>\n          <option value=\"krisp\">Krisp</option>\n          <option value=\"otter\">Otter.ai</option>\n          <option value=\"zoom\">Zoom</option>\n          <option value=\"meet\">Google Meet</option>\n          <option value=\"teams\">Microsoft Teams</option>\n        </select>\n      </div>\n    </div>\n  `;\n}\n\nfunction bindPasteMode(container: HTMLElement): void {\n  const textarea = container.querySelector('#transcript-input') as HTMLTextAreaElement;\n  const importBtn = container.querySelector('#import-btn') as HTMLButtonElement;\n\n  if (textarea) {\n    on(textarea, 'input', () => {\n      importBtn.disabled = textarea.value.trim().length < 20;\n    });\n  }\n}\n\nfunction renderUploadMode(): string {\n  return `\n    <div class=\"upload-section\">\n      <div class=\"dropzone\" id=\"file-dropzone\">\n        <div class=\"dropzone-icon\">üéôÔ∏è</div>\n        <p class=\"dropzone-title\">Drop transcript file here</p>\n        <p class=\"dropzone-hint\">or click to browse ‚Ä¢ .txt, .md, .srt, .vtt</p>\n        <input type=\"file\" id=\"file-input\" accept=\".txt,.md,.srt,.vtt,.json\" hidden>\n      </div>\n      <div class=\"selected-file\" id=\"selected-file\">\n        <div class=\"file-icon\">üìÑ</div>\n        <div class=\"file-info\">\n          <div class=\"file-name\" id=\"file-name\"></div>\n          <div class=\"file-size\" id=\"file-size\"></div>\n        </div>\n        <button class=\"file-remove\" id=\"file-remove\">√ó</button>\n      </div>\n    </div>\n  `;\n}\n\nfunction bindUploadMode(container: HTMLElement): void {\n  const dropzone = container.querySelector('#file-dropzone') as HTMLElement;\n  const input = container.querySelector('#file-input') as HTMLInputElement;\n  const selectedFile = container.querySelector('#selected-file') as HTMLElement;\n  const importBtn = container.querySelector('#import-btn') as HTMLButtonElement;\n\n  on(dropzone, 'click', () => input.click());\n\n  on(dropzone, 'dragover', (e) => {\n    e.preventDefault();\n    dropzone.classList.add('dragover');\n  });\n\n  on(dropzone, 'dragleave', () => dropzone.classList.remove('dragover'));\n\n  on(dropzone, 'drop', (e) => {\n    e.preventDefault();\n    dropzone.classList.remove('dragover');\n    const file = e.dataTransfer?.files[0];\n    if (file) selectFile(file, container);\n  });\n\n  on(input, 'change', () => {\n    if (input.files?.[0]) selectFile(input.files[0], container);\n  });\n\n  on(container.querySelector('#file-remove') as HTMLElement, 'click', () => {\n    selectedFile.classList.remove('visible');\n    (container as any)._fileContent = null;\n    importBtn.disabled = true;\n  });\n}\n\nfunction selectFile(file: File, container: HTMLElement): void {\n  const selectedFile = container.querySelector('#selected-file') as HTMLElement;\n  const importBtn = container.querySelector('#import-btn') as HTMLButtonElement;\n  \n  container.querySelector('#file-name')!.textContent = file.name;\n  container.querySelector('#file-size')!.textContent = formatFileSize(file.size);\n  selectedFile.classList.add('visible');\n\n  const reader = new FileReader();\n  reader.onload = () => {\n    (container as any)._fileContent = reader.result;\n    importBtn.disabled = false;\n  };\n  reader.readAsText(file);\n}\n\nfunction getContent(container: HTMLElement): string {\n  if (currentMode === 'paste') {\n    return (container.querySelector('#transcript-input') as HTMLTextAreaElement)?.value || '';\n  }\n  return (container as any)._fileContent || '';\n}\n\nasync function handleImport(container: HTMLElement, props: TranscriptComposerProps): Promise<void> {\n  const importBtn = container.querySelector('#import-btn') as HTMLButtonElement;\n  const cancelBtn = container.querySelector('#cancel-btn') as HTMLButtonElement;\n  const content = getContent(container);\n  if (!content) return;\n\n  // Prevent double-click\n  if (importBtn.disabled) return;\n  \n  importBtn.disabled = true;\n  cancelBtn.disabled = true;\n  \n  // Show processing state in footer\n  const footer = container.querySelector('.composer-footer') as HTMLElement;\n  const originalFooter = footer.innerHTML;\n  \n  footer.innerHTML = `\n    <div style=\"display: flex; align-items: center; gap: 12px; flex: 1;\">\n      <div class=\"processing-spinner\" style=\"\n        width: 20px;\n        height: 20px;\n        border: 2px solid var(--border-color);\n        border-top-color: var(--primary);\n        border-radius: 50%;\n        animation: spin 1s linear infinite;\n      \"></div>\n      <div style=\"flex: 1;\">\n        <div style=\"font-weight: 500; color: var(--text-primary);\" id=\"processing-status\">Uploading transcript...</div>\n        <div style=\"font-size: 12px; color: var(--text-tertiary);\" id=\"processing-detail\">Please wait</div>\n      </div>\n    </div>\n    <style>@keyframes spin { to { transform: rotate(360deg); } }</style>\n  `;\n  \n  const statusEl = footer.querySelector('#processing-status') as HTMLElement;\n  const detailEl = footer.querySelector('#processing-detail') as HTMLElement;\n\n  try {\n    const sourceSelect = container.querySelector('#source-select') as HTMLSelectElement;\n    const formData = new FormData();\n    const filename = `transcript_${Date.now()}.txt`;\n    formData.append('file', new Blob([content], { type: 'text/plain' }), filename);\n    formData.append('folder', 'newtranscripts');\n    if (sourceSelect?.value) formData.append('source', sourceSelect.value);\n\n    // Step 1: Upload\n    statusEl.textContent = 'Uploading transcript...';\n    detailEl.textContent = `${formatFileSize(content.length)} ‚Ä¢ ${filename}`;\n    \n    const response = await fetch('/api/upload', {\n      method: 'POST',\n      body: formData,\n      credentials: 'include'\n    });\n\n    if (!response.ok) {\n      const errorData = await response.json().catch(() => ({}));\n      throw new Error(errorData.error || `Upload failed (${response.status})`);\n    }\n\n    const result = await response.json();\n    \n    // Step 2: Processing started\n    statusEl.textContent = 'Transcript uploaded!';\n    detailEl.textContent = 'AI processing will start automatically';\n    \n    // Show success state briefly\n    footer.innerHTML = `\n      <div style=\"display: flex; align-items: center; gap: 12px; flex: 1;\">\n        <div style=\"\n          width: 24px;\n          height: 24px;\n          background: #10b981;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-size: 14px;\n        \">‚úì</div>\n        <div style=\"flex: 1;\">\n          <div style=\"font-weight: 500; color: #10b981;\">Transcript imported successfully!</div>\n          <div style=\"font-size: 12px; color: var(--text-tertiary);\">AI extraction will process in the background</div>\n        </div>\n      </div>\n      <button class=\"btn btn-primary\" id=\"done-btn\" style=\"\n        padding: 10px 20px;\n        border-radius: 10px;\n        font-size: 14px;\n        font-weight: 500;\n        cursor: pointer;\n        border: none;\n        background: var(--primary);\n        color: white;\n      \">Done</button>\n    `;\n    \n    // Bind done button\n    footer.querySelector('#done-btn')?.addEventListener('click', () => {\n      props.onImport?.(result);\n      closeTranscriptComposer();\n    });\n    \n    // Auto-close after 3 seconds\n    setTimeout(() => {\n      props.onImport?.(result);\n      closeTranscriptComposer();\n    }, 3000);\n    \n  } catch (err) {\n    console.error('[TranscriptComposer] Error:', err);\n    \n    // Show error state\n    footer.innerHTML = `\n      <div style=\"display: flex; align-items: center; gap: 12px; flex: 1;\">\n        <div style=\"\n          width: 24px;\n          height: 24px;\n          background: #ef4444;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-size: 14px;\n        \">‚úï</div>\n        <div style=\"flex: 1;\">\n          <div style=\"font-weight: 500; color: #ef4444;\">Import failed</div>\n          <div style=\"font-size: 12px; color: var(--text-tertiary);\">${err instanceof Error ? err.message : 'Unknown error'}</div>\n        </div>\n      </div>\n      <button class=\"btn btn-secondary\" id=\"retry-btn\" style=\"\n        padding: 10px 20px;\n        border-radius: 10px;\n        font-size: 14px;\n        font-weight: 500;\n        cursor: pointer;\n        border: 1px solid var(--border-color);\n        background: var(--bg-primary);\n        color: var(--text-primary);\n      \">Try Again</button>\n    `;\n    \n    // Bind retry button\n    footer.querySelector('#retry-btn')?.addEventListener('click', () => {\n      footer.innerHTML = originalFooter;\n      const newImportBtn = footer.querySelector('#import-btn') as HTMLButtonElement;\n      const newCancelBtn = footer.querySelector('#cancel-btn') as HTMLButtonElement;\n      if (newImportBtn) {\n        newImportBtn.disabled = false;\n        newImportBtn.addEventListener('click', () => handleImport(container, props));\n      }\n      if (newCancelBtn) {\n        newCancelBtn.disabled = false;\n        newCancelBtn.addEventListener('click', () => {\n          closeTranscriptComposer();\n          props.onClose?.();\n        });\n      }\n    });\n  }\n}\n\nfunction formatFileSize(bytes: number): string {\n  if (bytes < 1024) return `${bytes} B`;\n  if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n  return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n}\n\nexport default showTranscriptComposer;\n"],"names":["currentMode","showTranscriptComposer","props","existing","overlay","createElement","dialog","createTranscriptComposer","on","e","closeTranscriptComposer","container","renderPasteMode","tab","t","renderMode","importBtn","handleImport","bindPasteMode","body","renderUploadMode","bindUploadMode","textarea","dropzone","input","selectedFile","file","selectFile","formatFileSize","reader","getContent","cancelBtn","content","footer","originalFooter","statusEl","detailEl","sourceSelect","formData","filename","response","errorData","result","err","newImportBtn","newCancelBtn","bytes"],"mappings":"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"}