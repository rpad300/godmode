import"./modulepreload-polyfill-B5Qt9EMX.js";async function g(e,t){const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}),o=await n.json();if(!n.ok)throw new Error(o.error||o.message||"Request failed");return o}async function E(e){return(await fetch(e,{method:"GET",credentials:"include"})).json()}async function h(){try{return(await E("/api/auth/me")).authenticated===!0}catch{return!1}}async function b(e,t){return g("/api/auth/login",{email:e,password:t})}async function v(e,t){return g("/api/auth/register",{email:e,password:t})}async function w(e){await g("/api/auth/forgot-password",{email:e})}function c(e,t){const n=document.getElementById(e);n&&(n.textContent=t,n.classList.add("visible"))}function l(e){const t=document.getElementById(e);t&&(t.textContent="",t.classList.remove("visible"))}function f(e,t){const n=document.getElementById(e);n&&(n.textContent=t,n.classList.add("visible"))}function u(e,t){const n=e.querySelector(".btn-text"),o=e.querySelector(".btn-loading");n&&o&&(n.style.display=t?"none":"",o.style.display=t?"":"none"),e.disabled=t}function y(e){const t=document.getElementById(e);if(t){const r=t.getBoundingClientRect().top+window.pageYOffset-64-20;window.scrollTo({top:r,behavior:"smooth"})}}function I(){const e=document.querySelectorAll(".landing-auth-tab"),t=document.getElementById("login-form"),n=document.getElementById("register-form"),o=document.getElementById("forgot-form");e.forEach(r=>{r.addEventListener("click",()=>{const i=r.getAttribute("data-tab");e.forEach(a=>a.classList.remove("active")),r.classList.add("active"),t&&(t.style.display=i==="login"?"":"none"),n&&(n.style.display=i==="register"?"":"none"),o&&(o.style.display="none"),l("login-error"),l("register-error"),l("forgot-error")})})}function L(){const e=document.getElementById("login-form");e&&e.addEventListener("submit",async t=>{t.preventDefault(),l("login-error");const n=document.getElementById("login-email"),o=document.getElementById("login-password"),r=e.querySelector('button[type="submit"]'),i=n.value.trim(),a=o.value;if(!i||!a){c("login-error","Preencha todos os campos");return}u(r,!0);try{const s=await b(i,a);s.success?window.location.href="/app":c("login-error",s.error||"Erro ao entrar. Verifique as credenciais.")}catch(s){c("login-error",s instanceof Error?s.message:"Erro ao entrar. Tente novamente.")}finally{u(r,!1)}})}function B(){const e=document.getElementById("register-form");e&&e.addEventListener("submit",async t=>{t.preventDefault(),l("register-error");const n=document.getElementById("register-email"),o=document.getElementById("register-password"),r=document.getElementById("register-confirm"),i=e.querySelector('button[type="submit"]'),a=n.value.trim(),s=o.value,m=r.value;if(!a||!s||!m){c("register-error","Preencha todos os campos");return}if(s.length<12){c("register-error","A password deve ter pelo menos 12 caracteres");return}if(s!==m){c("register-error","As passwords nÃ£o coincidem");return}u(i,!0);try{const d=await v(a,s);d.success?d.needsEmailVerification?(c("register-error",""),alert("Conta criada! Verifique o seu email para confirmar o registo."),document.querySelector('.landing-auth-tab[data-tab="login"]')?.click()):window.location.href="/app":c("register-error",d.error||"Erro ao criar conta. Tente novamente.")}catch(d){c("register-error",d instanceof Error?d.message:"Erro ao criar conta. Tente novamente.")}finally{u(i,!1)}})}function S(){const e=document.getElementById("forgot-form"),t=document.getElementById("forgot-password-link"),n=document.getElementById("back-to-login-link"),o=document.getElementById("login-form"),r=document.querySelectorAll(".landing-auth-tab");t?.addEventListener("click",()=>{o&&(o.style.display="none"),e&&(e.style.display=""),r.forEach(i=>i.classList.remove("active")),l("login-error")}),n?.addEventListener("click",()=>{e&&(e.style.display="none"),o&&(o.style.display=""),document.querySelector('.landing-auth-tab[data-tab="login"]')?.classList.add("active"),l("forgot-error")}),e?.addEventListener("submit",async i=>{i.preventDefault(),l("forgot-error");const a=document.getElementById("forgot-email"),s=e.querySelector('button[type="submit"]'),m=a.value.trim();if(!m){c("forgot-error","Introduza o seu email");return}u(s,!0);try{await w(m),f("forgot-success","Se o email existir, receberÃ¡ um link de recuperaÃ§Ã£o."),a.value=""}catch{f("forgot-success","Se o email existir, receberÃ¡ um link de recuperaÃ§Ã£o.")}finally{u(s,!1)}})}function k(){document.querySelectorAll('a[href^="#"]').forEach(n=>{n.addEventListener("click",o=>{o.preventDefault();const r=n.getAttribute("href")?.slice(1);r&&(y(r),document.getElementById("mobile-nav")?.classList.remove("open"))})}),document.querySelectorAll("[data-scroll-to]").forEach(n=>{n.addEventListener("click",()=>{const o=n.getAttribute("data-scroll-to");o&&(y(o),document.getElementById("mobile-nav")?.classList.remove("open"))})});const e=document.getElementById("menu-toggle"),t=document.getElementById("mobile-nav");e?.addEventListener("click",()=>{t?.classList.toggle("open")}),document.addEventListener("click",n=>{if(t?.classList.contains("open")){const o=n.target;!t.contains(o)&&!e?.contains(o)&&t.classList.remove("open")}})}function A(){document.querySelectorAll(".landing-faq-question").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("aria-expanded")==="true",n=e.nextElementSibling;e.setAttribute("aria-expanded",String(!t)),n?.classList.toggle("open",!t)})})}function T(){const e=document.getElementById("landing-header");e&&window.addEventListener("scroll",()=>{window.scrollY>50?e.style.background="rgba(26, 26, 46, 0.98)":e.style.background="rgba(26, 26, 46, 0.95)"})}async function p(){if(console.log("ðŸš€ GodMode Landing initializing..."),await h()){console.log("âœ… User authenticated, redirecting to app..."),window.location.href="/app";return}I(),L(),B(),S(),k(),A(),T(),console.log("âœ… GodMode Landing ready")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",p):p();
//# sourceMappingURL=landing-CV8iaYhI.js.map
