{"version":3,"file":"ContactsPage-Bcz2ods0.js","sources":["../../frontend/src/pages/ContactsPage.ts"],"sourcesContent":["/**\n * Contacts Panel Component - SOTA Design\n * Contact list with search, filters, favorites, and management\n */\n\nimport { createElement, on } from '@lib/dom';\nimport { contactsService, Contact } from '@services/contacts';\nimport { showContactModal } from '@components/modals/ContactModal';\nimport { toast } from '@services/toast';\nimport { http } from '@services/api';\n\nexport interface ContactsPanelProps {\n  onContactClick?: (contact: Contact) => void;\n}\n\nlet currentSearch = '';\nlet currentFilter: { organization?: string; tag?: string; favorites?: boolean } = {};\nlet allContacts: Contact[] = [];\nlet selectedContactIds: Set<string> = new Set();\n\n/**\n * Create contacts panel\n */\nexport function createContactsPanel(props: ContactsPanelProps = {}): HTMLElement {\n  const panel = createElement('div', { className: 'contacts-panel-sota' });\n\n  panel.innerHTML = `\n    <style>\n      .contacts-panel-sota {\n        padding: 24px;\n        min-height: 100%;\n      }\n\n      /* Header */\n      .contacts-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        margin-bottom: 24px;\n        flex-wrap: wrap;\n        gap: 16px;\n      }\n\n      .contacts-title {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n\n      .contacts-title-icon {\n        width: 48px;\n        height: 48px;\n        background: linear-gradient(135deg, #e11d48 0%, #be123c 100%);\n        border-radius: 14px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        box-shadow: 0 4px 12px rgba(225, 29, 72, 0.3);\n      }\n\n      .contacts-title-icon svg {\n        width: 26px;\n        height: 26px;\n        color: white;\n      }\n\n      .contacts-title h1 {\n        margin: 0;\n        font-size: 28px;\n        font-weight: 700;\n        color: var(--text-primary);\n      }\n\n      .contacts-count {\n        background: linear-gradient(135deg, #e11d48, #be123c);\n        color: white;\n        padding: 4px 12px;\n        border-radius: 20px;\n        font-size: 13px;\n        font-weight: 600;\n      }\n\n      .contacts-actions {\n        display: flex;\n        align-items: center;\n        gap: 10px;\n      }\n\n      /* Search Bar */\n      .contacts-search-wrapper {\n        position: relative;\n        flex: 1;\n        max-width: 400px;\n        min-width: 200px;\n      }\n\n      .contacts-search-wrapper svg {\n        position: absolute;\n        left: 14px;\n        top: 50%;\n        transform: translateY(-50%);\n        width: 18px;\n        height: 18px;\n        color: var(--text-tertiary);\n        pointer-events: none;\n        transition: color 0.2s;\n      }\n\n      .contacts-search {\n        width: 100%;\n        padding: 12px 14px 12px 44px;\n        border: 1px solid var(--border-color);\n        border-radius: 12px;\n        font-size: 14px;\n        background: var(--bg-secondary);\n        color: var(--text-primary);\n        transition: all 0.2s;\n      }\n\n      .contacts-search:focus {\n        outline: none;\n        border-color: #e11d48;\n        box-shadow: 0 0 0 3px rgba(225, 29, 72, 0.1);\n      }\n\n      .contacts-search:focus + svg {\n        color: #e11d48;\n      }\n\n      /* SOTA Buttons */\n      .btn-sota {\n        display: inline-flex;\n        align-items: center;\n        gap: 8px;\n        padding: 10px 18px;\n        border-radius: 10px;\n        font-size: 14px;\n        font-weight: 600;\n        cursor: pointer;\n        transition: all 0.2s;\n        border: none;\n      }\n\n      .btn-sota.primary {\n        background: linear-gradient(135deg, #e11d48 0%, #be123c 100%);\n        color: white;\n        box-shadow: 0 4px 12px rgba(225, 29, 72, 0.3);\n      }\n\n      .btn-sota.primary:hover {\n        transform: translateY(-2px);\n        box-shadow: 0 6px 16px rgba(225, 29, 72, 0.4);\n      }\n\n      .btn-sota.secondary {\n        background: var(--bg-secondary);\n        color: var(--text-primary);\n        border: 1px solid var(--border-color);\n      }\n\n      .btn-sota.secondary:hover {\n        background: var(--bg-tertiary);\n        border-color: #e11d48;\n      }\n\n      .btn-sota svg {\n        width: 16px;\n        height: 16px;\n      }\n\n      /* Filters */\n      .contacts-filters {\n        display: flex;\n        align-items: center;\n        gap: 10px;\n        margin-bottom: 20px;\n        flex-wrap: wrap;\n      }\n\n      .filter-chip {\n        display: inline-flex;\n        align-items: center;\n        gap: 6px;\n        padding: 8px 14px;\n        background: var(--bg-secondary);\n        border: 1px solid var(--border-color);\n        border-radius: 20px;\n        font-size: 13px;\n        font-weight: 500;\n        color: var(--text-secondary);\n        cursor: pointer;\n        transition: all 0.2s;\n      }\n\n      .filter-chip:hover {\n        background: var(--bg-tertiary);\n        border-color: #e11d48;\n        color: #e11d48;\n      }\n\n      .filter-chip.active {\n        background: linear-gradient(135deg, rgba(225,29,72,0.1) 0%, rgba(225,29,72,0.05) 100%);\n        border-color: #e11d48;\n        color: #e11d48;\n      }\n\n      .filter-chip svg {\n        width: 14px;\n        height: 14px;\n      }\n\n      .filter-select {\n        padding: 8px 32px 8px 12px;\n        border: 1px solid var(--border-color);\n        border-radius: 20px;\n        font-size: 13px;\n        background: var(--bg-secondary);\n        color: var(--text-primary);\n        cursor: pointer;\n        appearance: none;\n        background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E\");\n        background-repeat: no-repeat;\n        background-position: right 12px center;\n      }\n\n      .filter-select:focus {\n        outline: none;\n        border-color: #e11d48;\n      }\n\n      /* Alerts */\n      .contacts-alerts {\n        margin-bottom: 20px;\n      }\n\n      .alert-sota {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        padding: 14px 18px;\n        background: linear-gradient(135deg, rgba(245,158,11,0.1) 0%, rgba(245,158,11,0.05) 100%);\n        border: 1px solid rgba(245,158,11,0.3);\n        border-radius: 12px;\n        color: #d97706;\n      }\n\n      .alert-sota svg {\n        width: 20px;\n        height: 20px;\n        flex-shrink: 0;\n      }\n\n      .alert-sota span {\n        flex: 1;\n        font-size: 14px;\n      }\n\n      .alert-sota .btn-sota {\n        padding: 6px 12px;\n        font-size: 12px;\n      }\n\n      /* Favorites Section */\n      .favorites-section {\n        margin-bottom: 28px;\n      }\n\n      .section-header {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        margin-bottom: 14px;\n        color: var(--text-secondary);\n        font-size: 13px;\n        font-weight: 600;\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n      }\n\n      .section-header svg {\n        width: 16px;\n        height: 16px;\n        color: #f59e0b;\n      }\n\n      .favorites-grid {\n        display: flex;\n        gap: 12px;\n        overflow-x: auto;\n        padding-bottom: 8px;\n      }\n\n      .favorite-card {\n        display: flex;\n        align-items: center;\n        gap: 10px;\n        padding: 12px 16px;\n        background: linear-gradient(135deg, rgba(245,158,11,0.08) 0%, rgba(245,158,11,0.02) 100%);\n        border: 1px solid rgba(245,158,11,0.2);\n        border-radius: 12px;\n        cursor: pointer;\n        transition: all 0.2s;\n        white-space: nowrap;\n      }\n\n      .favorite-card:hover {\n        transform: translateY(-2px);\n        box-shadow: 0 4px 12px rgba(245,158,11,0.15);\n        border-color: #f59e0b;\n      }\n\n      .favorite-avatar {\n        width: 36px;\n        height: 36px;\n        border-radius: 50%;\n        background: linear-gradient(135deg, #f59e0b, #d97706);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 13px;\n        font-weight: 600;\n        color: white;\n        flex-shrink: 0;\n        overflow: hidden;\n      }\n\n      .favorite-avatar img {\n        width: 100%;\n        height: 100%;\n        object-fit: cover;\n      }\n\n      .favorite-info h4 {\n        margin: 0;\n        font-size: 14px;\n        font-weight: 600;\n        color: var(--text-primary);\n      }\n\n      .favorite-info p {\n        margin: 2px 0 0 0;\n        font-size: 12px;\n        color: var(--text-secondary);\n      }\n\n      /* Contacts Grid */\n      .contacts-grid {\n        display: grid;\n        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n        gap: 16px;\n      }\n\n      .contact-card-sota {\n        background: linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.5) 100%);\n        border: 1px solid var(--border-color);\n        border-radius: 16px;\n        padding: 20px;\n        cursor: pointer;\n        transition: all 0.25s ease;\n        position: relative;\n        overflow: hidden;\n      }\n\n      [data-theme=\"dark\"] .contact-card-sota {\n        background: linear-gradient(135deg, rgba(30,41,59,0.9) 0%, rgba(30,41,59,0.5) 100%);\n      }\n\n      .contact-card-sota:hover {\n        transform: translateY(-4px);\n        box-shadow: 0 12px 32px rgba(0,0,0,0.1);\n        border-color: rgba(225,29,72,0.3);\n      }\n\n      .contact-card-sota::before {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        height: 4px;\n        background: linear-gradient(90deg, #e11d48, #f59e0b);\n        opacity: 0;\n        transition: opacity 0.2s;\n      }\n\n      .contact-card-sota:hover::before {\n        opacity: 1;\n      }\n\n      .contact-card-header {\n        display: flex;\n        align-items: flex-start;\n        gap: 14px;\n        margin-bottom: 14px;\n      }\n\n      .contact-avatar-sota {\n        width: 56px;\n        height: 56px;\n        border-radius: 50%;\n        background: linear-gradient(135deg, #e11d48 0%, #be123c 100%);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 20px;\n        font-weight: 700;\n        color: white;\n        flex-shrink: 0;\n        overflow: hidden;\n        box-shadow: 0 4px 12px rgba(225,29,72,0.25);\n      }\n\n      .contact-avatar-sota img {\n        width: 100%;\n        height: 100%;\n        object-fit: cover;\n      }\n\n      .contact-main-info {\n        flex: 1;\n        min-width: 0;\n      }\n\n      .contact-name-sota {\n        margin: 0 0 4px 0;\n        font-size: 17px;\n        font-weight: 700;\n        color: var(--text-primary);\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      .contact-role-badge {\n        display: inline-flex;\n        align-items: center;\n        gap: 4px;\n        padding: 4px 10px;\n        background: linear-gradient(135deg, rgba(225,29,72,0.1) 0%, rgba(225,29,72,0.05) 100%);\n        border-radius: 6px;\n        font-size: 12px;\n        font-weight: 600;\n        color: #e11d48;\n        margin-bottom: 4px;\n      }\n\n      .contact-org-sota {\n        font-size: 13px;\n        color: var(--text-secondary);\n        display: flex;\n        align-items: center;\n        gap: 4px;\n      }\n\n      .contact-org-sota svg {\n        width: 14px;\n        height: 14px;\n        opacity: 0.6;\n      }\n\n      .contact-details-sota {\n        display: flex;\n        flex-direction: column;\n        gap: 6px;\n        padding-top: 12px;\n        border-top: 1px solid var(--border-color);\n      }\n\n      .contact-detail-item {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        font-size: 13px;\n        color: var(--text-secondary);\n      }\n\n      .contact-detail-item svg {\n        width: 14px;\n        height: 14px;\n        color: #e11d48;\n        flex-shrink: 0;\n      }\n\n      .contact-detail-item span {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n\n      .contact-tags-sota {\n        display: flex;\n        flex-wrap: wrap;\n        gap: 6px;\n        margin-top: 12px;\n      }\n\n      .contact-tag {\n        padding: 3px 8px;\n        background: var(--bg-tertiary);\n        border-radius: 4px;\n        font-size: 11px;\n        font-weight: 500;\n        color: var(--text-secondary);\n      }\n\n      .contact-quick-actions {\n        position: absolute;\n        top: 12px;\n        right: 12px;\n        display: flex;\n        gap: 6px;\n        opacity: 0;\n        transition: opacity 0.2s;\n      }\n\n      .contact-card-sota:hover .contact-quick-actions {\n        opacity: 1;\n      }\n\n      .quick-action-btn {\n        width: 32px;\n        height: 32px;\n        border-radius: 8px;\n        background: var(--bg-primary);\n        border: 1px solid var(--border-color);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        cursor: pointer;\n        transition: all 0.2s;\n      }\n\n      .quick-action-btn:hover {\n        background: #e11d48;\n        border-color: #e11d48;\n        color: white;\n      }\n\n      .quick-action-btn.favorite {\n        color: #f59e0b;\n      }\n\n      .quick-action-btn.favorite.active {\n        background: #f59e0b;\n        border-color: #f59e0b;\n        color: white;\n      }\n\n      .quick-action-btn svg {\n        width: 16px;\n        height: 16px;\n      }\n\n      /* Selection Checkbox */\n      .contact-select-checkbox {\n        position: absolute;\n        top: 12px;\n        left: 12px;\n        width: 22px;\n        height: 22px;\n        border-radius: 6px;\n        border: 2px solid var(--border-color);\n        background: var(--bg-primary);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        cursor: pointer;\n        transition: all 0.2s;\n        z-index: 5;\n        opacity: 0;\n      }\n\n      .contact-card-sota:hover .contact-select-checkbox,\n      .contact-card-sota.selected .contact-select-checkbox {\n        opacity: 1;\n      }\n\n      .contact-select-checkbox:hover {\n        border-color: #e11d48;\n      }\n\n      .contact-select-checkbox.checked {\n        background: linear-gradient(135deg, #e11d48, #be123c);\n        border-color: #e11d48;\n      }\n\n      .contact-select-checkbox svg {\n        width: 14px;\n        height: 14px;\n        color: white;\n        display: none;\n      }\n\n      .contact-select-checkbox.checked svg {\n        display: block;\n      }\n\n      .contact-card-sota.selected {\n        border-color: #e11d48;\n        box-shadow: 0 0 0 2px rgba(225,29,72,0.2);\n      }\n\n      /* Selection Bar */\n      .selection-bar {\n        position: fixed;\n        bottom: 24px;\n        left: 50%;\n        transform: translateX(-50%);\n        background: linear-gradient(135deg, #1e293b, #0f172a);\n        padding: 12px 24px;\n        border-radius: 50px;\n        display: flex;\n        align-items: center;\n        gap: 16px;\n        box-shadow: 0 10px 40px rgba(0,0,0,0.3);\n        z-index: 1000;\n        animation: slideUp 0.3s ease;\n      }\n\n      @keyframes slideUp {\n        from { transform: translateX(-50%) translateY(100px); opacity: 0; }\n        to { transform: translateX(-50%) translateY(0); opacity: 1; }\n      }\n\n      .selection-bar-count {\n        color: white;\n        font-size: 14px;\n        font-weight: 600;\n      }\n\n      .selection-bar-count span {\n        color: #f59e0b;\n      }\n\n      .selection-bar-btn {\n        padding: 10px 20px;\n        border-radius: 25px;\n        font-size: 14px;\n        font-weight: 600;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        transition: all 0.2s;\n        border: none;\n      }\n\n      .selection-bar-btn.merge {\n        background: linear-gradient(135deg, #e11d48, #be123c);\n        color: white;\n      }\n\n      .selection-bar-btn.merge:hover {\n        transform: scale(1.05);\n        box-shadow: 0 4px 12px rgba(225,29,72,0.4);\n      }\n\n      .selection-bar-btn.cancel {\n        background: rgba(255,255,255,0.1);\n        color: white;\n        border: 1px solid rgba(255,255,255,0.2);\n      }\n\n      .selection-bar-btn.cancel:hover {\n        background: rgba(255,255,255,0.2);\n      }\n\n      .selection-bar-btn svg {\n        width: 16px;\n        height: 16px;\n      }\n\n      /* Empty State */\n      .contacts-empty-state {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        padding: 80px 24px;\n        text-align: center;\n      }\n\n      .contacts-empty-state svg {\n        width: 80px;\n        height: 80px;\n        color: #e11d48;\n        opacity: 0.4;\n        margin-bottom: 24px;\n      }\n\n      .contacts-empty-state h3 {\n        margin: 0 0 8px 0;\n        font-size: 20px;\n        font-weight: 600;\n        color: var(--text-primary);\n      }\n\n      .contacts-empty-state p {\n        margin: 0 0 24px 0;\n        font-size: 14px;\n        color: var(--text-secondary);\n      }\n\n      /* Loading */\n      .contacts-loading {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 60px;\n        color: var(--text-secondary);\n      }\n\n      .contacts-loading::after {\n        content: '';\n        width: 24px;\n        height: 24px;\n        border: 3px solid var(--border-color);\n        border-top-color: #e11d48;\n        border-radius: 50%;\n        animation: spin 0.8s linear infinite;\n        margin-left: 12px;\n      }\n\n      @keyframes spin {\n        to { transform: rotate(360deg); }\n      }\n\n      /* Projects indicator */\n      .contact-projects-indicator {\n        display: flex;\n        align-items: center;\n        gap: 6px;\n        margin-top: 10px;\n        font-size: 12px;\n        color: var(--text-tertiary);\n      }\n\n      .contact-projects-indicator svg {\n        width: 14px;\n        height: 14px;\n      }\n\n      .project-dot {\n        width: 8px;\n        height: 8px;\n        border-radius: 50%;\n        background: #e11d48;\n      }\n    </style>\n\n    <!-- Header -->\n    <div class=\"contacts-header\">\n      <div class=\"contacts-title\">\n        <div class=\"contacts-title-icon\">\n          <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\"/>\n          </svg>\n        </div>\n        <h1>Contacts</h1>\n        <span class=\"contacts-count\" id=\"contacts-count\">0</span>\n      </div>\n\n      <div class=\"contacts-actions\">\n        <div class=\"contacts-search-wrapper\">\n          <input type=\"search\" class=\"contacts-search\" id=\"contacts-search\" placeholder=\"Search contacts...\">\n          <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"/>\n          </svg>\n        </div>\n        <button class=\"btn-sota secondary\" id=\"import-contacts-btn\">\n          <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\"/>\n          </svg>\n          Import\n        </button>\n        <button class=\"btn-sota secondary\" id=\"export-contacts-btn\">\n          <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"/>\n          </svg>\n          Export\n        </button>\n        <button class=\"btn-sota primary\" id=\"add-contact-btn\">\n          <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"/>\n          </svg>\n          Add Contact\n        </button>\n      </div>\n    </div>\n\n    <!-- Filters -->\n    <div class=\"contacts-filters\">\n      <div class=\"filter-chip\" id=\"filter-favorites\" data-filter=\"favorites\">\n        <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z\"/>\n        </svg>\n        Favorites\n      </div>\n      <select class=\"filter-select\" id=\"org-filter\">\n        <option value=\"\">All Organizations</option>\n      </select>\n      <select class=\"filter-select\" id=\"tag-filter\">\n        <option value=\"\">All Tags</option>\n      </select>\n    </div>\n\n    <!-- Alerts -->\n    <div class=\"contacts-alerts\" id=\"contacts-alerts\"></div>\n\n    <!-- Favorites Section -->\n    <div class=\"favorites-section hidden\" id=\"favorites-section\">\n      <div class=\"section-header\">\n        <svg fill=\"currentColor\" viewBox=\"0 0 24 24\">\n          <path d=\"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z\"/>\n        </svg>\n        Favorites\n      </div>\n      <div class=\"favorites-grid\" id=\"favorites-grid\"></div>\n    </div>\n\n    <!-- Main Content -->\n    <div id=\"contacts-content\">\n      <div class=\"contacts-loading\">Loading contacts</div>\n    </div>\n  `;\n\n  // Bind events\n  bindEvents(panel, props);\n\n  // Initial load\n  loadContacts(panel, props);\n  checkDuplicates(panel);\n\n  return panel;\n}\n\n/**\n * Bind panel events\n */\nfunction bindEvents(panel: HTMLElement, props: ContactsPanelProps): void {\n  // Search\n  const searchInput = panel.querySelector('#contacts-search') as HTMLInputElement;\n  let searchTimeout: number;\n  on(searchInput, 'input', () => {\n    clearTimeout(searchTimeout);\n    searchTimeout = window.setTimeout(() => {\n      currentSearch = searchInput.value;\n      loadContacts(panel, props);\n    }, 300);\n  });\n\n  // Organization filter\n  const orgFilter = panel.querySelector('#org-filter') as HTMLSelectElement;\n  on(orgFilter, 'change', () => {\n    currentFilter.organization = orgFilter.value || undefined;\n    loadContacts(panel, props);\n  });\n\n  // Tag filter\n  const tagFilter = panel.querySelector('#tag-filter') as HTMLSelectElement;\n  on(tagFilter, 'change', () => {\n    currentFilter.tag = tagFilter.value || undefined;\n    loadContacts(panel, props);\n  });\n\n  // Favorites filter\n  const favoritesChip = panel.querySelector('#filter-favorites');\n  if (favoritesChip) {\n    on(favoritesChip as HTMLElement, 'click', () => {\n      favoritesChip.classList.toggle('active');\n      currentFilter.favorites = favoritesChip.classList.contains('active');\n      loadContacts(panel, props);\n    });\n  }\n\n  // Add contact\n  const addBtn = panel.querySelector('#add-contact-btn');\n  if (addBtn) {\n    on(addBtn as HTMLElement, 'click', () => {\n      showContactModal({\n        mode: 'create',\n        onSave: () => loadContacts(panel, props),\n      });\n    });\n  }\n\n  // Export\n  const exportBtn = panel.querySelector('#export-contacts-btn');\n  if (exportBtn) {\n    on(exportBtn as HTMLElement, 'click', () => exportContacts());\n  }\n\n  // Import\n  const importBtn = panel.querySelector('#import-contacts-btn');\n  if (importBtn) {\n    on(importBtn as HTMLElement, 'click', () => {\n      toast.info('Import functionality coming soon');\n    });\n  }\n}\n\n/**\n * Load contacts\n */\nasync function loadContacts(panel: HTMLElement, props?: ContactsPanelProps): Promise<void> {\n  const content = panel.querySelector('#contacts-content') as HTMLElement;\n  content.innerHTML = '<div class=\"contacts-loading\">Loading contacts</div>';\n\n  try {\n    const { contacts, total } = await contactsService.getAll({\n      search: currentSearch || undefined,\n      organization: currentFilter.organization,\n      tag: currentFilter.tag,\n    });\n\n    // Filter favorites if needed\n    let filteredContacts = contacts;\n    if (currentFilter.favorites) {\n      filteredContacts = contacts.filter(c => c.isFavorite);\n    }\n\n    allContacts = contacts;\n\n    renderContacts(content, filteredContacts, props);\n    renderFavorites(panel, contacts.filter(c => c.isFavorite), props);\n    updateCount(panel, total);\n    updateFilters(panel, contacts);\n  } catch {\n    content.innerHTML = `\n      <div class=\"contacts-empty-state\">\n        <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"/>\n        </svg>\n        <h3>Failed to load contacts</h3>\n        <p>Please try again later</p>\n      </div>\n    `;\n  }\n}\n\n/**\n * Render contacts grid\n */\nfunction renderContacts(container: HTMLElement, contacts: Contact[], props?: ContactsPanelProps): void {\n  if (contacts.length === 0) {\n    container.innerHTML = `\n      <div class=\"contacts-empty-state\">\n        <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\"/>\n        </svg>\n        <h3>${currentSearch ? 'No contacts match your search' : 'No contacts yet'}</h3>\n        <p>${currentSearch ? 'Try a different search term' : 'Add your first contact to get started'}</p>\n        <button class=\"btn-sota primary\" id=\"empty-add-btn\">\n          <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"/>\n          </svg>\n          Add Contact\n        </button>\n      </div>\n    `;\n\n    const addBtn = container.querySelector('#empty-add-btn');\n    if (addBtn) {\n      on(addBtn as HTMLElement, 'click', () => {\n        showContactModal({ mode: 'create' });\n      });\n    }\n    return;\n  }\n\n  container.innerHTML = `\n    <div class=\"contacts-grid\">\n      ${contacts.map(contact => createContactCard(contact)).join('')}\n    </div>\n  `;\n\n  bindContactCardEvents(container, contacts, props);\n}\n\n/**\n * Create contact card HTML\n */\nfunction createContactCard(contact: Contact): string {\n  const initials = getInitials(contact.name);\n  const hasPhoto = !!(contact.photoUrl || contact.avatarUrl);\n  const photoUrl = contact.photoUrl || contact.avatarUrl;\n  const isSelected = selectedContactIds.has(contact.id);\n\n  return `\n    <div class=\"contact-card-sota ${isSelected ? 'selected' : ''}\" data-id=\"${contact.id}\">\n      <div class=\"contact-select-checkbox ${isSelected ? 'checked' : ''}\" data-action=\"select\" data-id=\"${contact.id}\">\n        <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"3\" d=\"M5 13l4 4L19 7\"/>\n        </svg>\n      </div>\n      <div class=\"contact-quick-actions\">\n        <button class=\"quick-action-btn favorite ${contact.isFavorite ? 'active' : ''}\" data-action=\"favorite\" data-id=\"${contact.id}\" title=\"Toggle favorite\">\n          <svg fill=\"${contact.isFavorite ? 'currentColor' : 'none'}\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z\"/>\n          </svg>\n        </button>\n        <button class=\"quick-action-btn\" data-action=\"edit\" data-id=\"${contact.id}\" title=\"Edit contact\">\n          <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"/>\n          </svg>\n        </button>\n      </div>\n\n      <div class=\"contact-card-header\">\n        <div class=\"contact-avatar-sota\">\n          ${hasPhoto\n      ? `<img src=\"${photoUrl}\" alt=\"${escapeHtml(contact.name)}\">`\n      : initials\n    }\n        </div>\n        <div class=\"contact-main-info\">\n          <h3 class=\"contact-name-sota\">${escapeHtml(contact.name)}</h3>\n          ${contact.role ? `<span class=\"contact-role-badge\">${escapeHtml(contact.role)}</span>` : ''}\n          ${contact.organization ? `\n            <div class=\"contact-org-sota\">\n              <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\"/>\n              </svg>\n              ${escapeHtml(contact.organization)}\n            </div>\n          ` : ''}\n        </div>\n      </div>\n\n      <div class=\"contact-details-sota\">\n        ${contact.email ? `\n          <div class=\"contact-detail-item\">\n            <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\"/>\n            </svg>\n            <span>${escapeHtml(contact.email)}</span>\n          </div>\n        ` : ''}\n        ${contact.phone ? `\n          <div class=\"contact-detail-item\">\n            <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\"/>\n            </svg>\n            <span>${escapeHtml(contact.phone)}</span>\n          </div>\n        ` : ''}\n      </div>\n\n      ${contact.tags && contact.tags.length > 0 ? `\n        <div class=\"contact-tags-sota\">\n          ${contact.tags.slice(0, 4).map(tag => `<span class=\"contact-tag\">${escapeHtml(tag)}</span>`).join('')}\n          ${contact.tags.length > 4 ? `<span class=\"contact-tag\">+${contact.tags.length - 4}</span>` : ''}\n        </div>\n      ` : ''}\n    </div>\n  `;\n}\n\n/**\n * Bind contact card events\n */\nfunction bindContactCardEvents(container: HTMLElement, contacts: Contact[], props?: ContactsPanelProps): void {\n  const panel = container.closest('.contacts-panel-sota') as HTMLElement;\n\n  // Selection checkbox click\n  container.querySelectorAll('.contact-select-checkbox').forEach(checkbox => {\n    on(checkbox as HTMLElement, 'click', (e) => {\n      e.stopPropagation();\n      const id = checkbox.getAttribute('data-id');\n      if (!id) return;\n\n      const card = checkbox.closest('.contact-card-sota') as HTMLElement;\n\n      if (selectedContactIds.has(id)) {\n        selectedContactIds.delete(id);\n        checkbox.classList.remove('checked');\n        card.classList.remove('selected');\n      } else {\n        selectedContactIds.add(id);\n        checkbox.classList.add('checked');\n        card.classList.add('selected');\n      }\n\n      if (props) updateSelectionBar(panel, contacts, props);\n    });\n  });\n\n  // Card click (open modal)\n  container.querySelectorAll('.contact-card-sota').forEach(card => {\n    on(card as HTMLElement, 'click', (e) => {\n      // Ignore if clicking quick action buttons or checkbox\n      if ((e.target as HTMLElement).closest('.quick-action-btn')) return;\n      if ((e.target as HTMLElement).closest('.contact-select-checkbox')) return;\n\n      const id = card.getAttribute('data-id');\n      const contact = contacts.find(c => String(c.id) === id);\n      if (contact) {\n        if (props?.onContactClick) {\n          props.onContactClick(contact);\n        } else {\n          showContactModal({\n            mode: 'edit',\n            contact,\n            onSave: () => loadContacts(panel, props),\n          });\n        }\n      }\n    });\n  });\n\n  // Quick action buttons\n  container.querySelectorAll('.quick-action-btn').forEach(btn => {\n    on(btn as HTMLElement, 'click', async (e) => {\n      e.stopPropagation();\n      const action = btn.getAttribute('data-action');\n      const id = btn.getAttribute('data-id');\n      const contact = contacts.find(c => String(c.id) === id);\n\n      if (!contact) return;\n\n      if (action === 'favorite') {\n        if (props) await toggleFavorite(contact, btn as HTMLElement, panel, props);\n      } else if (action === 'edit') {\n        showContactModal({\n          mode: 'edit',\n          contact,\n          onSave: () => loadContacts(panel, props),\n        });\n      }\n    });\n  });\n}\n\n/**\n * Update selection bar visibility and content\n */\nfunction updateSelectionBar(panel: HTMLElement, contacts: Contact[], props: ContactsPanelProps): void {\n  // Remove existing selection bar\n  const existingBar = document.querySelector('.selection-bar');\n  if (existingBar) existingBar.remove();\n\n  if (selectedContactIds.size < 2) return;\n\n  // Create selection bar\n  const bar = createElement('div', { className: 'selection-bar' });\n  bar.innerHTML = `\n    <span class=\"selection-bar-count\"><span>${selectedContactIds.size}</span> contacts selected</span>\n    <button class=\"selection-bar-btn merge\" id=\"merge-selected-btn\">\n      <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4\"/>\n      </svg>\n      Merge Selected\n    </button>\n    <button class=\"selection-bar-btn cancel\" id=\"cancel-selection-btn\">\n      <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\n      </svg>\n      Cancel\n    </button>\n  `;\n\n  document.body.appendChild(bar);\n\n  // Bind events\n  const mergeBtn = bar.querySelector('#merge-selected-btn');\n  const cancelBtn = bar.querySelector('#cancel-selection-btn');\n\n  on(cancelBtn as HTMLElement, 'click', () => {\n    clearSelection(panel);\n  });\n\n  on(mergeBtn as HTMLElement, 'click', async () => {\n    const ids = Array.from(selectedContactIds);\n\n    // Get selected contacts for confirmation\n    const selectedContacts = contacts.filter(c => selectedContactIds.has(c.id));\n\n    const confirmed = await showMergeConfirmModal(selectedContacts);\n    if (!confirmed) {\n      return;\n    }\n\n    (mergeBtn as HTMLButtonElement).disabled = true;\n    (mergeBtn as HTMLButtonElement).textContent = 'Merging...';\n\n    try {\n      await contactsService.mergeContacts(ids);\n      toast.success(`Merged ${ids.length} contacts successfully`);\n      clearSelection(panel);\n      await loadContacts(panel, props);\n    } catch (error) {\n      const message = error instanceof Error ? error.message : 'Failed to merge contacts';\n      toast.error(message);\n      (mergeBtn as HTMLButtonElement).disabled = false;\n      (mergeBtn as HTMLButtonElement).innerHTML = `\n        <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4\"/>\n        </svg>\n        Merge Selected\n      `;\n    }\n  });\n}\n\n/**\n * Show styled merge confirmation modal\n */\nfunction showMergeConfirmModal(contacts: Contact[]): Promise<boolean> {\n  return new Promise((resolve) => {\n    const overlay = createElement('div', { className: 'merge-confirm-overlay' });\n\n    const primaryContact = contacts[0];\n    const otherContacts = contacts.slice(1);\n\n    overlay.innerHTML = `\n      <style>\n        .merge-confirm-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(0, 0, 0, 0.6);\n          backdrop-filter: blur(4px);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 10000;\n          animation: fadeIn 0.2s ease;\n        }\n        \n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        \n        .merge-confirm-modal {\n          background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(248,250,252,0.95) 100%);\n          border-radius: 16px;\n          box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n          max-width: 480px;\n          width: 90%;\n          overflow: hidden;\n          animation: slideUp 0.3s ease;\n        }\n        \n        @keyframes slideUp {\n          from { transform: translateY(20px); opacity: 0; }\n          to { transform: translateY(0); opacity: 1; }\n        }\n        \n        .merge-confirm-header {\n          background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);\n          color: white;\n          padding: 20px 24px;\n          display: flex;\n          align-items: center;\n          gap: 12px;\n        }\n        \n        .merge-confirm-header svg {\n          width: 24px;\n          height: 24px;\n        }\n        \n        .merge-confirm-header h3 {\n          margin: 0;\n          font-size: 18px;\n          font-weight: 600;\n        }\n        \n        .merge-confirm-body {\n          padding: 24px;\n        }\n        \n        .merge-confirm-body p {\n          margin: 0 0 16px 0;\n          color: #64748b;\n          font-size: 14px;\n        }\n        \n        .merge-contact-list {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n          margin-bottom: 16px;\n        }\n        \n        .merge-contact-item {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          padding: 12px;\n          background: #f8fafc;\n          border-radius: 10px;\n          border: 1px solid #e2e8f0;\n        }\n        \n        .merge-contact-item.primary {\n          background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);\n          border-color: #f59e0b;\n        }\n        \n        .merge-contact-avatar {\n          width: 40px;\n          height: 40px;\n          border-radius: 50%;\n          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-weight: 600;\n          font-size: 14px;\n          flex-shrink: 0;\n        }\n        \n        .merge-contact-avatar img {\n          width: 100%;\n          height: 100%;\n          border-radius: 50%;\n          object-fit: cover;\n        }\n        \n        .merge-contact-info {\n          flex: 1;\n          min-width: 0;\n        }\n        \n        .merge-contact-name {\n          font-weight: 600;\n          color: #1e293b;\n          font-size: 14px;\n          margin-bottom: 2px;\n        }\n        \n        .merge-contact-details {\n          font-size: 12px;\n          color: #64748b;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n        \n        .merge-contact-badge {\n          background: #f59e0b;\n          color: white;\n          font-size: 10px;\n          font-weight: 600;\n          padding: 4px 8px;\n          border-radius: 6px;\n          text-transform: uppercase;\n        }\n        \n        .merge-warning {\n          display: flex;\n          align-items: flex-start;\n          gap: 10px;\n          padding: 12px;\n          background: #fef3c7;\n          border-radius: 10px;\n          margin-top: 16px;\n        }\n        \n        .merge-warning svg {\n          width: 18px;\n          height: 18px;\n          color: #d97706;\n          flex-shrink: 0;\n          margin-top: 1px;\n        }\n        \n        .merge-warning p {\n          margin: 0;\n          color: #92400e;\n          font-size: 13px;\n          line-height: 1.5;\n        }\n        \n        .merge-confirm-footer {\n          display: flex;\n          gap: 12px;\n          padding: 16px 24px 24px;\n          justify-content: flex-end;\n        }\n        \n        .merge-confirm-btn {\n          padding: 10px 20px;\n          border-radius: 10px;\n          font-size: 14px;\n          font-weight: 500;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n        \n        .merge-confirm-btn.cancel {\n          background: #f1f5f9;\n          border: 1px solid #e2e8f0;\n          color: #64748b;\n        }\n        \n        .merge-confirm-btn.cancel:hover {\n          background: #e2e8f0;\n        }\n        \n        .merge-confirm-btn.confirm {\n          background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);\n          border: none;\n          color: white;\n          box-shadow: 0 4px 14px rgba(245, 158, 11, 0.4);\n        }\n        \n        .merge-confirm-btn.confirm:hover {\n          transform: translateY(-1px);\n          box-shadow: 0 6px 20px rgba(245, 158, 11, 0.5);\n        }\n        \n        .merge-confirm-btn svg {\n          width: 16px;\n          height: 16px;\n        }\n      </style>\n      \n      <div class=\"merge-confirm-modal\">\n        <div class=\"merge-confirm-header\">\n          <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4\"/>\n          </svg>\n          <h3>Merge Contacts</h3>\n        </div>\n        \n        <div class=\"merge-confirm-body\">\n          <p>The following contacts will be merged into one:</p>\n          \n          <div class=\"merge-contact-list\">\n            ${contacts.map((c, i) => {\n      const avatar = c.photoUrl || c.avatarUrl || c.photo_url || c.avatar_url;\n      const initials = (c.name || '?').split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();\n      const detail = c.email || c.organization || c.company || '';\n\n      return `\n                <div class=\"merge-contact-item ${i === 0 ? 'primary' : ''}\">\n                  <div class=\"merge-contact-avatar\">\n                    ${avatar ? `<img src=\"${avatar}\" alt=\"${c.name}\">` : initials}\n                  </div>\n                  <div class=\"merge-contact-info\">\n                    <div class=\"merge-contact-name\">${c.name || 'Unknown'}</div>\n                    <div class=\"merge-contact-details\">${detail}</div>\n                  </div>\n                  ${i === 0 ? '<span class=\"merge-contact-badge\">Primary</span>' : ''}\n                </div>\n              `;\n    }).join('')}\n          </div>\n          \n          <div class=\"merge-warning\">\n            <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"/>\n            </svg>\n            <p>All information will be combined into the primary contact. Other contacts will be archived. This action cannot be undone.</p>\n          </div>\n        </div>\n        \n        <div class=\"merge-confirm-footer\">\n          <button class=\"merge-confirm-btn cancel\" id=\"merge-cancel-btn\">\n            <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\n            </svg>\n            Cancel\n          </button>\n          <button class=\"merge-confirm-btn confirm\" id=\"merge-confirm-btn\">\n            <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\"/>\n            </svg>\n            Merge Contacts\n          </button>\n        </div>\n      </div>\n    `;\n\n    document.body.appendChild(overlay);\n\n    const cancelBtn = overlay.querySelector('#merge-cancel-btn');\n    const confirmBtn = overlay.querySelector('#merge-confirm-btn');\n\n    const close = (result: boolean) => {\n      overlay.remove();\n      resolve(result);\n    };\n\n    on(cancelBtn as HTMLElement, 'click', () => close(false));\n    on(confirmBtn as HTMLElement, 'click', () => close(true));\n    on(overlay, 'click', (e) => {\n      if (e.target === overlay) close(false);\n    });\n\n    // ESC to close\n    const handleEsc = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        document.removeEventListener('keydown', handleEsc);\n        close(false);\n      }\n    };\n    document.addEventListener('keydown', handleEsc);\n  });\n}\n\n/**\n * Clear selection\n */\nfunction clearSelection(panel: HTMLElement): void {\n  selectedContactIds.clear();\n\n  // Remove selected class from cards\n  panel.querySelectorAll('.contact-card-sota.selected').forEach(card => {\n    card.classList.remove('selected');\n  });\n  panel.querySelectorAll('.contact-select-checkbox.checked').forEach(checkbox => {\n    checkbox.classList.remove('checked');\n  });\n\n  // Remove selection bar\n  const bar = document.querySelector('.selection-bar');\n  if (bar) bar.remove();\n}\n\n/**\n * Toggle favorite\n */\nasync function toggleFavorite(contact: Contact, btn: HTMLElement, panel: HTMLElement, props: ContactsPanelProps): Promise<void> {\n  const newValue = !contact.isFavorite;\n\n  try {\n    await http.put(`/api/contacts/${contact.id}`, { is_favorite: newValue });\n    contact.isFavorite = newValue;\n\n    // Update button visually\n    btn.classList.toggle('active', newValue);\n    const svg = btn.querySelector('svg');\n    if (svg) {\n      svg.setAttribute('fill', newValue ? 'currentColor' : 'none');\n    }\n\n    // Refresh favorites section\n    renderFavorites(panel, allContacts.filter(c => c.isFavorite || (c.id === contact.id && newValue)), props);\n\n    toast.success(newValue ? 'Added to favorites' : 'Removed from favorites');\n  } catch {\n    toast.error('Failed to update favorite');\n  }\n}\n\n/**\n * Render favorites section\n */\nfunction renderFavorites(panel: HTMLElement, favorites: Contact[], props?: ContactsPanelProps): void {\n  const section = panel.querySelector('#favorites-section') as HTMLElement;\n  const grid = panel.querySelector('#favorites-grid') as HTMLElement;\n\n  if (favorites.length === 0) {\n    section.classList.add('hidden');\n    return;\n  }\n\n  section.classList.remove('hidden');\n  grid.innerHTML = favorites.map(contact => {\n    const initials = getInitials(contact.name);\n    const hasPhoto = !!(contact.photoUrl || contact.avatarUrl);\n    const photoUrl = contact.photoUrl || contact.avatarUrl;\n\n    return `\n      <div class=\"favorite-card\" data-id=\"${contact.id}\">\n        <div class=\"favorite-avatar\">\n          ${hasPhoto\n        ? `<img src=\"${photoUrl}\" alt=\"${escapeHtml(contact.name)}\">`\n        : initials\n      }\n        </div>\n        <div class=\"favorite-info\">\n          <h4>${escapeHtml(contact.name)}</h4>\n          ${contact.organization ? `<p>${escapeHtml(contact.organization)}</p>` : ''}\n        </div>\n      </div>\n    `;\n  }).join('');\n\n  // Bind click events\n  grid.querySelectorAll('.favorite-card').forEach(card => {\n    on(card as HTMLElement, 'click', () => {\n      const id = card.getAttribute('data-id');\n      const contact = favorites.find(c => String(c.id) === id);\n      if (contact) {\n        showContactModal({\n          mode: 'edit',\n          contact,\n          onSave: () => loadContacts(panel, props),\n        });\n      }\n    });\n  });\n}\n\n/**\n * Check for duplicates\n */\nasync function checkDuplicates(panel: HTMLElement): Promise<void> {\n  const alertsContainer = panel.querySelector('#contacts-alerts') as HTMLElement;\n\n  try {\n    const { duplicates } = await contactsService.getDuplicates();\n\n    if (duplicates.length > 0) {\n      alertsContainer.innerHTML = `\n        <div class=\"alert-sota\">\n          <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"/>\n          </svg>\n          <span><strong>${duplicates.length}</strong> potential duplicate contacts found</span>\n          <button class=\"btn-sota secondary\" id=\"review-duplicates-btn\">Review Duplicates</button>\n        </div>\n      `;\n\n      const reviewBtn = alertsContainer.querySelector('#review-duplicates-btn');\n      if (reviewBtn) {\n        on(reviewBtn as HTMLElement, 'click', () => {\n          showDuplicatesReviewModal(duplicates, panel);\n        });\n      }\n    }\n  } catch {\n    // Ignore errors\n  }\n}\n\n/**\n * Show duplicates review modal\n */\nfunction showDuplicatesReviewModal(duplicateGroups: Contact[][], panel: HTMLElement): void {\n  // Create overlay\n  const overlay = createElement('div', { className: 'duplicates-review-overlay' });\n\n  overlay.innerHTML = `\n    <style>\n      .duplicates-review-overlay {\n        position: fixed;\n        inset: 0;\n        background: rgba(0,0,0,0.6);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 10000;\n        animation: fadeIn 0.2s ease;\n      }\n      \n      @keyframes fadeIn {\n        from { opacity: 0; }\n        to { opacity: 1; }\n      }\n      \n      .duplicates-modal {\n        background: var(--bg-primary);\n        border-radius: 16px;\n        width: 700px;\n        max-width: 95vw;\n        max-height: 85vh;\n        display: flex;\n        flex-direction: column;\n        box-shadow: 0 25px 60px rgba(0,0,0,0.3);\n        animation: slideUp 0.2s ease;\n      }\n      \n      @keyframes slideUp {\n        from { transform: translateY(20px); opacity: 0; }\n        to { transform: translateY(0); opacity: 1; }\n      }\n      \n      .duplicates-header {\n        padding: 24px;\n        border-bottom: 1px solid var(--border-color);\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n      }\n      \n      .duplicates-header h2 {\n        margin: 0;\n        font-size: 20px;\n        font-weight: 600;\n        display: flex;\n        align-items: center;\n        gap: 10px;\n      }\n      \n      .duplicates-header h2 svg {\n        width: 24px;\n        height: 24px;\n        color: #f59e0b;\n      }\n      \n      .duplicates-header .close-btn {\n        width: 36px;\n        height: 36px;\n        border-radius: 50%;\n        background: var(--bg-secondary);\n        border: 1px solid var(--border-color);\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        transition: all 0.2s;\n      }\n      \n      .duplicates-header .close-btn:hover {\n        background: var(--bg-tertiary);\n        border-color: #e11d48;\n      }\n      \n      .duplicates-header .close-btn svg {\n        width: 18px;\n        height: 18px;\n        color: var(--text-secondary);\n      }\n      \n      .duplicates-content {\n        flex: 1;\n        overflow-y: auto;\n        padding: 24px;\n      }\n      \n      .duplicate-group {\n        background: var(--bg-secondary);\n        border: 1px solid var(--border-color);\n        border-radius: 12px;\n        padding: 16px;\n        margin-bottom: 16px;\n      }\n      \n      .duplicate-group:last-child {\n        margin-bottom: 0;\n      }\n      \n      .duplicate-group-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        margin-bottom: 12px;\n        padding-bottom: 12px;\n        border-bottom: 1px solid var(--border-color);\n      }\n      \n      .duplicate-group-header h4 {\n        margin: 0;\n        font-size: 14px;\n        color: var(--text-secondary);\n      }\n      \n      .merge-group-btn {\n        padding: 8px 16px;\n        background: linear-gradient(135deg, #e11d48, #be123c);\n        color: white;\n        border: none;\n        border-radius: 8px;\n        font-size: 13px;\n        font-weight: 600;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        gap: 6px;\n        transition: all 0.2s;\n      }\n      \n      .merge-group-btn:hover {\n        transform: translateY(-1px);\n        box-shadow: 0 4px 12px rgba(225,29,72,0.3);\n      }\n      \n      .merge-group-btn svg {\n        width: 16px;\n        height: 16px;\n      }\n      \n      .duplicate-contacts {\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n      }\n      \n      .duplicate-contact-row {\n        display: flex;\n        align-items: center;\n        gap: 12px;\n        padding: 10px 12px;\n        background: var(--bg-primary);\n        border-radius: 8px;\n        border: 1px solid var(--border-color);\n      }\n      \n      .duplicate-contact-row input[type=\"radio\"] {\n        width: 18px;\n        height: 18px;\n        accent-color: #e11d48;\n      }\n      \n      .duplicate-avatar {\n        width: 40px;\n        height: 40px;\n        border-radius: 50%;\n        background: linear-gradient(135deg, #e11d48, #be123c);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 14px;\n        font-weight: 600;\n        color: white;\n        flex-shrink: 0;\n      }\n      \n      .duplicate-info {\n        flex: 1;\n        min-width: 0;\n      }\n      \n      .duplicate-info h5 {\n        margin: 0 0 2px 0;\n        font-size: 14px;\n        font-weight: 600;\n        color: var(--text-primary);\n      }\n      \n      .duplicate-info p {\n        margin: 0;\n        font-size: 12px;\n        color: var(--text-secondary);\n      }\n      \n      .duplicate-aliases {\n        margin-top: 4px;\n        display: flex;\n        gap: 4px;\n        flex-wrap: wrap;\n      }\n      \n      .alias-tag {\n        padding: 2px 6px;\n        background: rgba(99,102,241,0.1);\n        color: #6366f1;\n        border-radius: 4px;\n        font-size: 10px;\n        font-weight: 500;\n      }\n      \n      .duplicates-footer {\n        padding: 16px 24px;\n        border-top: 1px solid var(--border-color);\n        display: flex;\n        justify-content: flex-end;\n        gap: 10px;\n      }\n      \n      .duplicates-footer button {\n        padding: 10px 20px;\n        border-radius: 8px;\n        font-size: 14px;\n        font-weight: 600;\n        cursor: pointer;\n        transition: all 0.2s;\n      }\n      \n      .duplicates-footer .close-review-btn {\n        background: var(--bg-secondary);\n        border: 1px solid var(--border-color);\n        color: var(--text-primary);\n      }\n      \n      .duplicates-footer .close-review-btn:hover {\n        background: var(--bg-tertiary);\n      }\n      \n      .no-duplicates-msg {\n        text-align: center;\n        padding: 40px;\n        color: var(--text-secondary);\n      }\n      \n      .no-duplicates-msg svg {\n        width: 48px;\n        height: 48px;\n        opacity: 0.4;\n        margin-bottom: 12px;\n      }\n    </style>\n    \n    <div class=\"duplicates-modal\">\n      <div class=\"duplicates-header\">\n        <h2>\n          <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z\"/>\n          </svg>\n          Review Duplicate Contacts\n        </h2>\n        <button class=\"close-btn\" id=\"close-duplicates-btn\">\n          <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"/>\n          </svg>\n        </button>\n      </div>\n      \n      <div class=\"duplicates-content\" id=\"duplicates-content\">\n        ${duplicateGroups.length === 0 ? `\n          <div class=\"no-duplicates-msg\">\n            <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"/>\n            </svg>\n            <p>No duplicate contacts found</p>\n          </div>\n        ` : duplicateGroups.map((group, groupIndex) => `\n          <div class=\"duplicate-group\" data-group-index=\"${groupIndex}\">\n            <div class=\"duplicate-group-header\">\n              <h4>Potential duplicates (${group.length} contacts)</h4>\n              <button class=\"merge-group-btn\" data-group-index=\"${groupIndex}\">\n                <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4\"/>\n                </svg>\n                Merge All\n              </button>\n            </div>\n            <div class=\"duplicate-contacts\">\n              ${group.map((contact, idx) => `\n                <div class=\"duplicate-contact-row\">\n                  <input type=\"radio\" name=\"primary-${groupIndex}\" value=\"${contact.id}\" ${idx === 0 ? 'checked' : ''}>\n                  <div class=\"duplicate-avatar\">${getInitials(contact.name)}</div>\n                  <div class=\"duplicate-info\">\n                    <h5>${escapeHtml(contact.name)}${idx === 0 ? ' (Primary)' : ''}</h5>\n                    <p>${escapeHtml(contact.email || '')}${contact.organization ? `  ${escapeHtml(contact.organization)}` : ''}</p>\n                    ${(contact.aliases && contact.aliases.length > 0) ? `\n                      <div class=\"duplicate-aliases\">\n                        ${contact.aliases.map(alias => `<span class=\"alias-tag\">${escapeHtml(alias)}</span>`).join('')}\n                      </div>\n                    ` : ''}\n                  </div>\n                </div>\n              `).join('')}\n            </div>\n          </div>\n        `).join('')}\n      </div>\n      \n      <div class=\"duplicates-footer\">\n        <button class=\"close-review-btn\" id=\"close-review-btn\">Close</button>\n      </div>\n    </div>\n  `;\n\n  document.body.appendChild(overlay);\n\n  // Close handlers\n  const closeOverlay = () => overlay.remove();\n\n  const closeBtn = overlay.querySelector('#close-duplicates-btn');\n  const closeReviewBtn = overlay.querySelector('#close-review-btn');\n\n  if (closeBtn) on(closeBtn as HTMLElement, 'click', closeOverlay);\n  if (closeReviewBtn) on(closeReviewBtn as HTMLElement, 'click', closeOverlay);\n  on(overlay, 'click', (e: Event) => {\n    if (e.target === overlay) closeOverlay();\n  });\n\n  // Merge handlers\n  overlay.querySelectorAll('.merge-group-btn').forEach(btn => {\n    on(btn as HTMLElement, 'click', async () => {\n      const groupIndex = parseInt(btn.getAttribute('data-group-index') || '0');\n      const group = duplicateGroups[groupIndex];\n\n      if (!group || group.length < 2) return;\n\n      // Get selected primary contact\n      const selectedRadio = overlay.querySelector(`input[name=\"primary-${groupIndex}\"]:checked`) as HTMLInputElement;\n      const primaryId = selectedRadio?.value || group[0].id;\n\n      // Reorder so primary is first\n      const orderedIds = [primaryId, ...group.filter(c => c.id !== primaryId).map(c => c.id)];\n\n      (btn as HTMLButtonElement).disabled = true;\n      (btn as HTMLButtonElement).textContent = 'Merging...';\n\n      try {\n        await contactsService.mergeContacts(orderedIds);\n        toast.success(`Merged ${group.length} contacts successfully`);\n\n        // Remove this group from the UI\n        const groupEl = overlay.querySelector(`.duplicate-group[data-group-index=\"${groupIndex}\"]`);\n        if (groupEl) groupEl.remove();\n\n        // Check if no more groups\n        const remainingGroups = overlay.querySelectorAll('.duplicate-group');\n        if (remainingGroups.length === 0) {\n          const content = overlay.querySelector('#duplicates-content');\n          if (content) {\n            content.innerHTML = `\n              <div class=\"no-duplicates-msg\">\n                <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"/>\n                </svg>\n                <p>All duplicates have been merged!</p>\n              </div>\n            `;\n          }\n        }\n\n        // Refresh contacts list\n        await loadContacts(panel);\n\n      } catch (error) {\n        const message = error instanceof Error ? error.message : 'Failed to merge contacts';\n        toast.error(message);\n        (btn as HTMLButtonElement).disabled = false;\n        (btn as HTMLButtonElement).innerHTML = `\n          <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4\"/>\n          </svg>\n          Merge All\n        `;\n      }\n    });\n  });\n}\n\n/**\n * Update filters\n */\nfunction updateFilters(panel: HTMLElement, contacts: Contact[]): void {\n  // Organizations\n  const orgFilter = panel.querySelector('#org-filter') as HTMLSelectElement;\n  const orgs = [...new Set(contacts.map(c => c.organization).filter(Boolean))].sort();\n\n  const currentOrg = orgFilter.value;\n  orgFilter.innerHTML = `\n    <option value=\"\">All Organizations</option>\n    ${orgs.map(org => `<option value=\"${escapeHtml(org!)}\" ${currentOrg === org ? 'selected' : ''}>${escapeHtml(org!)}</option>`).join('')}\n  `;\n\n  // Tags\n  const tagFilter = panel.querySelector('#tag-filter') as HTMLSelectElement;\n  const allTags = contacts.flatMap(c => c.tags || []);\n  const uniqueTags = [...new Set(allTags)].sort();\n\n  const currentTag = tagFilter.value;\n  tagFilter.innerHTML = `\n    <option value=\"\">All Tags</option>\n    ${uniqueTags.map(tag => `<option value=\"${escapeHtml(tag)}\" ${currentTag === tag ? 'selected' : ''}>${escapeHtml(tag)}</option>`).join('')}\n  `;\n}\n\n/**\n * Export contacts\n */\nasync function exportContacts(): Promise<void> {\n  try {\n    await contactsService.export('json');\n    toast.success('Contacts exported');\n  } catch {\n    toast.error('Failed to export contacts');\n  }\n}\n\n/**\n * Update count\n */\nfunction updateCount(panel: HTMLElement, count: number): void {\n  const countEl = panel.querySelector('#contacts-count');\n  if (countEl) countEl.textContent = String(count);\n}\n\n/**\n * Get initials\n */\nfunction getInitials(name: string): string {\n  return name\n    .split(' ')\n    .map(n => n[0])\n    .join('')\n    .toUpperCase()\n    .slice(0, 2);\n}\n\n/**\n * Escape HTML\n */\nfunction escapeHtml(text: string): string {\n  const div = document.createElement('div');\n  div.textContent = text;\n  return div.innerHTML;\n}\n\nexport default createContactsPanel;\n"],"names":["currentSearch","currentFilter","allContacts","selectedContactIds","createContactsPanel","props","panel","createElement","bindEvents","loadContacts","checkDuplicates","searchInput","searchTimeout","on","orgFilter","tagFilter","favoritesChip","addBtn","showContactModal","exportBtn","exportContacts","importBtn","toast","content","contacts","total","contactsService","filteredContacts","c","renderContacts","renderFavorites","updateCount","updateFilters","container","contact","createContactCard","bindContactCardEvents","initials","getInitials","hasPhoto","photoUrl","isSelected","escapeHtml","tag","checkbox","e","id","card","updateSelectionBar","btn","action","toggleFavorite","existingBar","bar","mergeBtn","cancelBtn","clearSelection","ids","selectedContacts","showMergeConfirmModal","error","message","resolve","overlay","i","avatar","n","detail","confirmBtn","close","result","handleEsc","newValue","http","svg","favorites","section","grid","alertsContainer","duplicates","reviewBtn","showDuplicatesReviewModal","duplicateGroups","group","groupIndex","idx","alias","closeOverlay","closeBtn","closeReviewBtn","primaryId","orderedIds","groupEl","orgs","currentOrg","org","allTags","uniqueTags","currentTag","count","countEl","name","text","div"],"mappings":"uHAeA,IAAIA,EAAgB,GAChBC,EAA8E,CAAA,EAC9EC,EAAyB,CAAA,EACzBC,MAAsC,IAKnC,SAASC,EAAoBC,EAA4B,GAAiB,CAC/E,MAAMC,EAAQC,EAAc,MAAO,CAAE,UAAW,sBAAuB,EAEvE,OAAAD,EAAM,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;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"}