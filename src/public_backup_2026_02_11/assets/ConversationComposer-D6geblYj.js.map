{"version":3,"file":"ConversationComposer-D6geblYj.js","sources":["../../frontend/src/components/ConversationComposer.ts"],"sourcesContent":["/**\n * Conversation Composer Component - SOTA UI\n * Multi-mode conversation/transcript input\n */\n\nimport { createElement, on } from '@lib/dom';\nimport { conversationsService } from '@services/documents';\nimport { toast } from '@services/toast';\n\nexport interface ConversationComposerProps {\n  onImport?: (conversation: unknown) => void;\n  onClose?: () => void;\n}\n\ntype InputMode = 'paste' | 'upload';\nlet currentMode: InputMode = 'paste';\n\n/**\n * Show conversation composer modal\n */\nexport function showConversationComposer(props: ConversationComposerProps = {}): void {\n  const existing = document.getElementById('conversation-composer-overlay');\n  if (existing) existing.remove();\n\n  const overlay = createElement('div', {\n    id: 'conversation-composer-overlay',\n    className: 'composer-overlay'\n  });\n\n  const dialog = createConversationComposer(props);\n  overlay.appendChild(dialog);\n  document.body.appendChild(overlay);\n\n  on(overlay, 'click', (e) => {\n    if (e.target === overlay) {\n      closeConversationComposer();\n      props.onClose?.();\n    }\n  });\n\n  requestAnimationFrame(() => overlay.classList.add('visible'));\n}\n\n/**\n * Close conversation composer\n */\nexport function closeConversationComposer(): void {\n  const overlay = document.getElementById('conversation-composer-overlay');\n  if (overlay) {\n    overlay.classList.remove('visible');\n    setTimeout(() => overlay.remove(), 200);\n  }\n}\n\n/**\n * Create conversation composer\n */\nfunction createConversationComposer(props: ConversationComposerProps): HTMLElement {\n  const container = createElement('div', { className: 'composer-modal' });\n\n  container.innerHTML = `\n    <style>\n      .composer-overlay {\n        position: fixed;\n        inset: 0;\n        background: rgba(0, 0, 0, 0.5);\n        backdrop-filter: blur(8px);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 10000;\n        opacity: 0;\n        transition: opacity 0.2s ease;\n      }\n      .composer-overlay.visible {\n        opacity: 1;\n      }\n      .composer-overlay.visible .composer-modal {\n        transform: translateY(0) scale(1);\n        opacity: 1;\n      }\n      .composer-modal {\n        width: 640px;\n        max-width: 95vw;\n        max-height: 85vh;\n        background: var(--bg-primary);\n        border-radius: 16px;\n        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n        display: flex;\n        flex-direction: column;\n        overflow: hidden;\n        transform: translateY(20px) scale(0.98);\n        opacity: 0;\n        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n      }\n      \n      .composer-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 20px 24px;\n        border-bottom: 1px solid var(--border-color);\n      }\n      .composer-header h2 {\n        margin: 0;\n        font-size: 18px;\n        font-weight: 600;\n        color: var(--text-primary);\n      }\n      .composer-close {\n        width: 32px;\n        height: 32px;\n        border: none;\n        background: var(--bg-secondary);\n        border-radius: 8px;\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: var(--text-secondary);\n        transition: all 0.15s ease;\n      }\n      .composer-close:hover {\n        background: var(--bg-tertiary);\n        color: var(--text-primary);\n      }\n      \n      .composer-tabs {\n        display: flex;\n        padding: 0 24px;\n        border-bottom: 1px solid var(--border-color);\n        background: var(--bg-secondary);\n      }\n      .composer-tab {\n        padding: 14px 20px;\n        font-size: 14px;\n        font-weight: 500;\n        color: var(--text-secondary);\n        background: none;\n        border: none;\n        cursor: pointer;\n        position: relative;\n        transition: color 0.15s ease;\n      }\n      .composer-tab:hover { color: var(--text-primary); }\n      .composer-tab.active { color: var(--primary); }\n      .composer-tab.active::after {\n        content: '';\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        right: 0;\n        height: 2px;\n        background: var(--primary);\n        border-radius: 2px 2px 0 0;\n      }\n      \n      .composer-body {\n        flex: 1;\n        padding: 24px;\n        overflow-y: auto;\n      }\n      \n      .paste-section label {\n        display: block;\n        font-size: 14px;\n        font-weight: 500;\n        color: var(--text-primary);\n        margin-bottom: 12px;\n      }\n      .paste-section textarea {\n        width: 100%;\n        min-height: 280px;\n        padding: 16px;\n        border: 1px solid var(--border-color);\n        border-radius: 12px;\n        background: var(--bg-secondary);\n        color: var(--text-primary);\n        font-family: 'SF Mono', Monaco, monospace;\n        font-size: 13px;\n        line-height: 1.6;\n        resize: vertical;\n        transition: border-color 0.15s ease, box-shadow 0.15s ease;\n      }\n      .paste-section textarea:focus {\n        outline: none;\n        border-color: var(--primary);\n        box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.1);\n      }\n      .paste-section textarea::placeholder { color: var(--text-tertiary); }\n      .paste-hint {\n        margin-top: 12px;\n        font-size: 13px;\n        color: var(--text-tertiary);\n      }\n      \n      .format-row {\n        margin-top: 20px;\n        display: flex;\n        align-items: center;\n        gap: 12px;\n      }\n      .format-row label {\n        font-size: 13px;\n        color: var(--text-secondary);\n        white-space: nowrap;\n      }\n      .format-row select {\n        flex: 1;\n        max-width: 200px;\n        padding: 10px 14px;\n        border: 1px solid var(--border-color);\n        border-radius: 8px;\n        background: var(--bg-secondary);\n        color: var(--text-primary);\n        font-size: 13px;\n      }\n      \n      .upload-section .dropzone {\n        border: 2px dashed var(--border-color);\n        border-radius: 16px;\n        padding: 60px 40px;\n        text-align: center;\n        cursor: pointer;\n        transition: all 0.2s ease;\n        background: var(--bg-secondary);\n      }\n      .upload-section .dropzone:hover,\n      .upload-section .dropzone.dragover {\n        border-color: var(--primary);\n        background: rgba(var(--primary-rgb), 0.03);\n      }\n      .dropzone-icon { font-size: 48px; margin-bottom: 16px; }\n      .dropzone-title {\n        font-size: 16px;\n        font-weight: 500;\n        color: var(--text-primary);\n        margin-bottom: 8px;\n      }\n      .dropzone-hint { font-size: 13px; color: var(--text-tertiary); }\n      \n      .selected-file {\n        display: none;\n        align-items: center;\n        gap: 16px;\n        margin-top: 20px;\n        padding: 16px;\n        background: var(--bg-secondary);\n        border-radius: 12px;\n        border: 1px solid var(--border-color);\n      }\n      .selected-file.visible { display: flex; }\n      .file-icon {\n        width: 48px;\n        height: 48px;\n        background: linear-gradient(135deg, var(--primary), color-mix(in srgb, var(--primary) 70%, white));\n        border-radius: 12px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 24px;\n      }\n      .file-info { flex: 1; min-width: 0; }\n      .file-name {\n        font-size: 14px;\n        font-weight: 500;\n        color: var(--text-primary);\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n      .file-size { font-size: 12px; color: var(--text-tertiary); margin-top: 2px; }\n      .file-remove {\n        width: 32px;\n        height: 32px;\n        border: none;\n        background: transparent;\n        border-radius: 8px;\n        cursor: pointer;\n        color: var(--text-tertiary);\n        font-size: 18px;\n        transition: all 0.15s ease;\n      }\n      .file-remove:hover {\n        background: rgba(239, 68, 68, 0.1);\n        color: #ef4444;\n      }\n      \n      .preview-area {\n        margin-top: 20px;\n        padding: 16px;\n        background: var(--bg-tertiary);\n        border-radius: 12px;\n        display: none;\n      }\n      .preview-area.visible { display: block; }\n      .preview-area h4 {\n        margin: 0 0 12px 0;\n        font-size: 13px;\n        font-weight: 600;\n        color: var(--text-secondary);\n        text-transform: uppercase;\n        letter-spacing: 0.5px;\n      }\n      .preview-stats {\n        display: flex;\n        gap: 24px;\n        font-size: 14px;\n      }\n      .preview-stats span { color: var(--text-secondary); }\n      .preview-stats strong { color: var(--text-primary); }\n      \n      .composer-footer {\n        display: flex;\n        justify-content: flex-end;\n        gap: 12px;\n        padding: 16px 24px;\n        border-top: 1px solid var(--border-color);\n        background: var(--bg-secondary);\n      }\n      .composer-footer .btn {\n        padding: 10px 20px;\n        border-radius: 10px;\n        font-size: 14px;\n        font-weight: 500;\n        cursor: pointer;\n        transition: all 0.15s ease;\n        border: none;\n      }\n      .composer-footer .btn-secondary {\n        background: var(--bg-primary);\n        color: var(--text-primary);\n        border: 1px solid var(--border-color);\n      }\n      .composer-footer .btn-secondary:hover { background: var(--bg-tertiary); }\n      .composer-footer .btn-outline {\n        background: transparent;\n        color: var(--text-primary);\n        border: 1px solid var(--border-color);\n      }\n      .composer-footer .btn-outline:hover { background: var(--bg-tertiary); }\n      .composer-footer .btn-primary {\n        background: var(--primary);\n        color: white;\n      }\n      .composer-footer .btn-primary:hover:not(:disabled) {\n        opacity: 0.9;\n        transform: translateY(-1px);\n      }\n      .composer-footer .btn-primary:disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n      }\n    </style>\n    \n    <div class=\"composer-header\">\n      <h2>Import Conversation</h2>\n      <button class=\"composer-close\" id=\"close-btn\">\n        <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n          <path d=\"M18 6L6 18M6 6l12 12\"/>\n        </svg>\n      </button>\n    </div>\n    \n    <div class=\"composer-tabs\">\n      <button class=\"composer-tab active\" data-mode=\"paste\">Paste Text</button>\n      <button class=\"composer-tab\" data-mode=\"upload\">Upload File</button>\n    </div>\n    \n    <div class=\"composer-body\" id=\"composer-body\">\n      ${renderPasteMode()}\n    </div>\n    \n    <div class=\"composer-footer\">\n      <button class=\"btn btn-secondary\" id=\"cancel-btn\">Cancel</button>\n      <button class=\"btn btn-outline\" id=\"preview-btn\" disabled>Preview</button>\n      <button class=\"btn btn-primary\" id=\"import-btn\" disabled>Import</button>\n    </div>\n  `;\n\n  // Bind tabs\n  container.querySelectorAll('.composer-tab').forEach(tab => {\n    on(tab as HTMLElement, 'click', () => {\n      container.querySelectorAll('.composer-tab').forEach(t => t.classList.remove('active'));\n      tab.classList.add('active');\n      currentMode = tab.getAttribute('data-mode') as InputMode;\n      renderMode(container);\n    });\n  });\n\n  on(container.querySelector('#close-btn') as HTMLElement, 'click', () => {\n    closeConversationComposer();\n    props.onClose?.();\n  });\n\n  on(container.querySelector('#cancel-btn') as HTMLElement, 'click', () => {\n    closeConversationComposer();\n    props.onClose?.();\n  });\n\n  on(container.querySelector('#preview-btn') as HTMLElement, 'click', () => handlePreview(container));\n  on(container.querySelector('#import-btn') as HTMLElement, 'click', () => handleImport(container, props));\n\n  bindPasteMode(container);\n\n  return container;\n}\n\nfunction renderMode(container: HTMLElement): void {\n  const body = container.querySelector('#composer-body') as HTMLElement;\n  body.innerHTML = currentMode === 'paste' ? renderPasteMode() : renderUploadMode();\n\n  if (currentMode === 'paste') bindPasteMode(container);\n  else bindUploadMode(container);\n}\n\nfunction renderPasteMode(): string {\n  return `\n    <div class=\"paste-section\">\n      <label>Paste conversation or transcript:</label>\n      <textarea id=\"conversation-input\" placeholder=\"Paste your conversation here...\n\nSupported formats:\nâ€¢ WhatsApp, Slack, Teams, Discord chats\nâ€¢ Meeting transcripts (Zoom, Google Meet)\nâ€¢ Email threads\nâ€¢ Any text with speaker names\n\nExample:\n[10:30] John: Hello everyone\n[10:31] Jane: Hi John!\n[10:32] John: Let's discuss the project...\"></textarea>\n      <p class=\"paste-hint\">Include timestamps and speaker names for better parsing.</p>\n      <div class=\"format-row\">\n        <label>Format:</label>\n        <select id=\"format-select\">\n          <option value=\"\">Auto-detect</option>\n          <option value=\"whatsapp\">WhatsApp</option>\n          <option value=\"slack\">Slack</option>\n          <option value=\"teams\">Microsoft Teams</option>\n          <option value=\"discord\">Discord</option>\n          <option value=\"zoom\">Zoom Transcript</option>\n          <option value=\"generic\">Generic Chat</option>\n        </select>\n      </div>\n    </div>\n    <div class=\"preview-area\" id=\"preview-area\"></div>\n  `;\n}\n\nfunction bindPasteMode(container: HTMLElement): void {\n  const textarea = container.querySelector('#conversation-input') as HTMLTextAreaElement;\n  const previewBtn = container.querySelector('#preview-btn') as HTMLButtonElement;\n  const importBtn = container.querySelector('#import-btn') as HTMLButtonElement;\n\n  if (textarea) {\n    on(textarea, 'input', () => {\n      const hasContent = textarea.value.trim().length > 10;\n      previewBtn.disabled = !hasContent;\n      importBtn.disabled = !hasContent;\n    });\n  }\n}\n\nfunction renderUploadMode(): string {\n  return `\n    <div class=\"upload-section\">\n      <div class=\"dropzone\" id=\"file-dropzone\">\n        <div class=\"dropzone-icon\">ðŸ’¬</div>\n        <p class=\"dropzone-title\">Drop chat file here</p>\n        <p class=\"dropzone-hint\">or click to browse â€¢ .txt, .json</p>\n        <input type=\"file\" id=\"file-input\" accept=\".txt,.md,.srt,.vtt,.json\" hidden>\n      </div>\n      <div class=\"selected-file\" id=\"selected-file\">\n        <div class=\"file-icon\">ðŸ“„</div>\n        <div class=\"file-info\">\n          <div class=\"file-name\" id=\"file-name\"></div>\n          <div class=\"file-size\" id=\"file-size\"></div>\n        </div>\n        <button class=\"file-remove\" id=\"file-remove\">Ã—</button>\n      </div>\n    </div>\n    <div class=\"preview-area\" id=\"preview-area\"></div>\n  `;\n}\n\nfunction bindUploadMode(container: HTMLElement): void {\n  const dropzone = container.querySelector('#file-dropzone') as HTMLElement;\n  const input = container.querySelector('#file-input') as HTMLInputElement;\n  const selectedFile = container.querySelector('#selected-file') as HTMLElement;\n  const previewBtn = container.querySelector('#preview-btn') as HTMLButtonElement;\n  const importBtn = container.querySelector('#import-btn') as HTMLButtonElement;\n\n  on(dropzone, 'click', () => input.click());\n  on(dropzone, 'dragover', (e) => { e.preventDefault(); dropzone.classList.add('dragover'); });\n  on(dropzone, 'dragleave', () => dropzone.classList.remove('dragover'));\n  on(dropzone, 'drop', (e) => {\n    e.preventDefault();\n    dropzone.classList.remove('dragover');\n    if (e.dataTransfer?.files[0]) selectFile(e.dataTransfer.files[0], container);\n  });\n  on(input, 'change', () => { if (input.files?.[0]) selectFile(input.files[0], container); });\n  on(container.querySelector('#file-remove') as HTMLElement, 'click', () => {\n    selectedFile.classList.remove('visible');\n    (container as any)._fileContent = null;\n    previewBtn.disabled = true;\n    importBtn.disabled = true;\n  });\n}\n\nfunction selectFile(file: File, container: HTMLElement): void {\n  const selectedFile = container.querySelector('#selected-file') as HTMLElement;\n  const previewBtn = container.querySelector('#preview-btn') as HTMLButtonElement;\n  const importBtn = container.querySelector('#import-btn') as HTMLButtonElement;\n\n  container.querySelector('#file-name')!.textContent = file.name;\n  container.querySelector('#file-size')!.textContent = formatFileSize(file.size);\n  selectedFile.classList.add('visible');\n\n  const reader = new FileReader();\n  reader.onload = () => {\n    (container as any)._fileContent = reader.result;\n    previewBtn.disabled = false;\n    importBtn.disabled = false;\n  };\n  reader.readAsText(file);\n}\n\nfunction getContent(container: HTMLElement): string {\n  if (currentMode === 'paste') {\n    return (container.querySelector('#conversation-input') as HTMLTextAreaElement)?.value || '';\n  }\n  return (container as any)._fileContent || '';\n}\n\nasync function handlePreview(container: HTMLElement): Promise<void> {\n  const previewBtn = container.querySelector('#preview-btn') as HTMLButtonElement;\n  const previewArea = container.querySelector('#preview-area') as HTMLElement;\n  const content = getContent(container);\n  if (!content) return;\n\n  previewBtn.disabled = true;\n  previewBtn.textContent = 'Parsing...';\n\n  try {\n    const result = await conversationsService.parsePreview(content);\n    previewArea.classList.add('visible');\n    previewArea.innerHTML = `\n      <h4>Preview</h4>\n      <div class=\"preview-stats\">\n        <span>Messages: <strong>${result.message_count || 0}</strong></span>\n        <span>Participants: <strong>${result.participants?.length || 0}</strong></span>\n        <span>Format: <strong>${result.format || 'Unknown'}</strong></span>\n      </div>\n    `;\n  } catch {\n    toast.error('Failed to parse conversation');\n  } finally {\n    previewBtn.disabled = false;\n    previewBtn.textContent = 'Preview';\n  }\n}\n\nasync function handleImport(container: HTMLElement, props: ConversationComposerProps): Promise<void> {\n  const importBtn = container.querySelector('#import-btn') as HTMLButtonElement;\n  const content = getContent(container);\n  const formatSelect = container.querySelector('#format-select') as HTMLSelectElement;\n  if (!content) return;\n\n  importBtn.disabled = true;\n  importBtn.textContent = 'Importing...';\n\n  try {\n    const result = await conversationsService.import(content, { formatHint: formatSelect?.value });\n    toast.success('Conversation imported');\n    props.onImport?.(result);\n    closeConversationComposer();\n  } catch {\n    toast.error('Failed to import conversation');\n  } finally {\n    importBtn.disabled = false;\n    importBtn.textContent = 'Import';\n  }\n}\n\nfunction formatFileSize(bytes: number): string {\n  if (bytes < 1024) return `${bytes} B`;\n  if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n  return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n}\n\nexport default showConversationComposer;\n"],"names":["currentMode","showConversationComposer","props","existing","overlay","createElement","dialog","createConversationComposer","on","e","closeConversationComposer","container","renderPasteMode","tab","renderMode","handlePreview","handleImport","bindPasteMode","body","renderUploadMode","textarea","previewBtn","importBtn","hasContent","bindUploadMode","dropzone","input","selectedFile","selectFile","file","formatFileSize","reader","getContent","previewArea","content","result","conversationsService","toast","formatSelect","bytes"],"mappings":"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"}