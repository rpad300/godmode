{"version":3,"mappings":";uHASA,MAAMA,EAAkC,CACtC,UAAW,+LACX,UAAW,iJACX,MAAO,yMACP,QAAS,4HACT,UAAW,mJACX,MAAO,sGACP,SAAU,0xBACV,KAAM,oGACN,KAAM,4GACN,OAAQ,6FACR,KAAM,2FACN,MAAO,gDACP,MAAO,uIACP,KAAM,sIACN,MAAO,yFACP,cAAe,8FACf,aAAc,6FACd,eAAgB,gDAChB,aAAc,iDACd,SAAU,0FACV,MAAO,wHACP,KAAM,0LACN,UAAW,+PACX,MAAO,4IACT,EASO,SAASC,EAAWC,EAAgBC,EAAuB,GAAiB,CACjF,MAAMC,EAAOD,EAAQ,MAAQ,GACvBE,EAAcF,EAAQ,aAAe,EACrCG,EAAQH,EAAQ,OAAS,eAEzBI,EAAMC,EAAc,MAAO,CAC/B,UAAW,aAAaL,EAAQ,WAAa,EAAE,GAC/C,MAAO,8EAA8EC,CAAI,eAAeA,CAAI,MAC7G,EAGD,OAAAG,EAAI,UAAY;AAAA;AAAA;AAAA,eAGHH,CAAI;AAAA,gBACHA,CAAI;AAAA;AAAA;AAAA,gBAGJE,CAAK;AAAA,sBACCD,CAAW;AAAA;AAAA;AAAA;AAAA,QAIzBL,EAAME,CAAI,GAAK,EAAE;AAAA;AAAA,IAShBK,EAAI,iBACb,CCxCO,SAASE,EAAgBC,EAAwB,GAAiB,CACvE,MAAMC,EAAYH,EAAc,MAAO,CAAE,UAAW,YAAa,EAY3DI,EAAWJ,EAAc,MAAO,CAAE,UAAW,gBAAiB,EAC9DK,EAAYL,EAAc,MAAO,CAAE,GAAI,uBAAwB,UAAW,aAAc,EAC9FI,EAAS,YAAYC,CAAS,EAG9B,MAAMC,EAAcN,EAAc,MAAO,CAAE,GAAI,qBAAsB,UAAW,yBAA0B,EAGpGO,EAAiBP,EAAc,MAAO,CAAE,GAAI,oBAAqB,UAAW,4BAA6B,EACzGQ,EAAgBR,EAAc,MAAO,CAAE,GAAI,mBAAoB,UAAW,2BAA4B,EAGtGS,EAAkBT,EAAc,MAAO,CAAE,GAAI,qBAAsB,UAAW,6BAA8B,EAG5GU,EAAqBV,EAAc,MAAO,CAAE,GAAI,yBAA0B,UAAW,iCAAkC,EAGvHW,EAAYX,EAAc,MAAO,CAAE,UAAW,uBAAwB,EACtEY,EAAiBZ,EAAc,MAAO,CAAE,GAAI,kBAAmB,UAAW,kBAAmB,EAC7Fa,EAAab,EAAc,MAAO,CAAE,GAAI,cAAe,UAAW,kBAAmB,EACrFc,EAAcd,EAAc,MAAO,CAAE,GAAI,eAAgB,UAAW,kBAAmB,EAE7FW,EAAU,YAAYC,CAAc,EACpCD,EAAU,YAAYE,CAAU,EAChCF,EAAU,YAAYG,CAAW,EAGjC,MAAMC,EAAYf,EAAc,MAAO,CAAE,UAAW,uBAAwB,EACtEgB,EAAahB,EAAc,MAAO,CAAE,GAAI,mBAAoB,UAAW,wBAAyB,EAChGiB,EAAWjB,EAAc,MAAO,CAAE,GAAI,yBAA0B,UAAW,8BAA+B,EAEhH,OAAAe,EAAU,YAAYC,CAAU,EAChCD,EAAU,YAAYE,CAAQ,EAG9Bd,EAAU,YAAYC,CAAQ,EAC9BD,EAAU,YAAYG,CAAW,EACjCH,EAAU,YAAYI,CAAc,EACpCJ,EAAU,YAAYK,CAAa,EACnCL,EAAU,YAAYM,CAAe,EACrCN,EAAU,YAAYO,CAAkB,EACxCP,EAAU,YAAYQ,CAAS,EAC/BR,EAAU,YAAYY,CAAS,EAG/BG,EAAkBf,EAAWD,CAAK,EAE3BC,CACT,CAKA,eAAee,EAAkBf,EAAwBD,EAAsC,CAC7F,MAAMiB,EAAgBhB,EAAU,cAAc,mBAAmB,EAC3DM,EAAkBN,EAAU,cAAc,qBAAqB,EAC/DE,EAAYF,EAAU,cAAc,uBAAuB,EAC3DI,EAAiBJ,EAAU,cAAc,oBAAoB,EAC7DK,EAAgBL,EAAU,cAAc,mBAAmB,EAC3DiB,EAAkBjB,EAAU,cAAc,qBAAqB,EAC/DkB,EAAuBlB,EAAU,cAAc,yBAAyB,EACxEO,EAAqBP,EAAU,cAAc,yBAAyB,EAGtEmB,EAAiBC,EAAS,WAAW,eACrCC,EAAmBD,EAAS,WAAW,iBAE7C,GAAI,CAACD,GAAkB,CAACE,EAAkB,CAExC,GAAInB,EAAW,CACbA,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAqBtB,MAAMoB,EAAYpB,EAAU,cAAc,qBAAqB,EAC3DoB,GACFA,EAAU,iBAAiB,QAAS,SAAY,CAC9C,KAAM,CAAE,iBAAAC,CAAA,EAAqB,MAAAC,EAAA,iCAAAD,CAAA,OAAM,QAAO,oBAAiC,OAAAE,KAAA,2BAAAF,CAAA,6BAC3EA,EAAiB,CACf,KAAM,SACN,OAAQ,IAAM,CAEZ,OAAO,cAAc,IAAI,YAAY,yBAAyB,CAAC,CACjE,EACD,CACH,CAAC,CAEL,CAGIP,IAAgBA,EAA8B,UAAY,IAC1DV,IAAkBA,EAAgC,UAAY,IAC9DF,IAAiBA,EAA+B,UAAY,IAC5DC,IAAgBA,EAA8B,UAAY,IAC1DY,IAAkBA,EAAgC,UAAY,IAC9DC,IAAuBA,EAAqC,UAAY,IACxEX,IAAqBA,EAAmC,UAAY,IAExE,MACF,CAGIL,IACFA,EAAU,UAAY,+DAIpBI,GAAmB,CAACA,EAAgB,iBACtCkB,EAAA,oCAAAE,CAAA,eAAO,oBAA2B,OAAAD,KAAA,+BAAAC,CAAA,6BAAE,KAAK,CAAC,CAAE,oBAAAA,KAA0B,CACpE,MAAMC,EAAgBD,EAAA,EACtBpB,EAAgB,YAAYqB,CAAa,CAC3C,CAAC,EAAE,MAAMC,GAAO,QAAQ,MAAM,gCAAiCA,CAAG,CAAC,EAGrE,GAAI,CACF,KAAM,CAAE,UAAWC,EAAM,OAAAC,EAAQ,SAAAC,EAAU,OAAAC,CAAA,EAAW,MAAMC,EAAiB,UAG7E,GAAI,CAACjC,EAAU,YAAa,CAC1B,QAAQ,IAAI,+DAA+D,EAC3E,MACF,CA6CA,GA1CIgB,GAAiBc,GACnBI,EAAsBlB,EAA8Bc,CAAM,EAIxD5B,GAAa2B,GACfM,EAAgBjC,EAA0B2B,EAAM9B,EAAM,WAAW,EAI/DK,GAAkByB,GAAQA,EAAK,eAAiB,GAClDO,EAA0BhC,EAA+ByB,EAAK,cAAc,EAI1ExB,GAAiB2B,EAAO,OAAS,GACnCK,EAAahC,EAA8B2B,EAAQjC,EAAM,YAAY,EAInEkB,GAAmBc,EAAS,OAAS,GACvCO,EAAerB,EAAgCc,EAAUhC,EAAM,eAAe,EAI5E8B,IACFU,EAA6BV,CAAI,EACjCW,EAAiBX,CAAI,EAErBY,EAAwBZ,CAAI,EAAE,MAAMD,GAClC,QAAQ,MAAM,iCAAkCA,CAAG,IAKnDV,GAAwB,CAACA,EAAqB,iBAChDwB,EAAa,SAAS,KAAKC,GAAS,CAClCC,EAAkB1B,EAAqCyB,CAAK,CAC9D,CAAC,EAAE,MAAMf,GAAO,QAAQ,MAAM,+BAAgCA,CAAG,CAAC,EAIhErB,GAAsB,CAACA,EAAmB,gBAAiB,CAC7D,MAAMsC,EAAYxB,GAAoBF,GAAgB,GAClD0B,GACFC,EAAgBvC,EAAmCsC,CAAS,CAEhE,CACF,OAASE,EAAO,CAEV/C,EAAU,cACZ,QAAQ,MAAM,4BAA6B+C,CAAK,EAC5C7C,IACFA,EAAU,UAAY,kEAG5B,CACF,CAQA,SAASgC,EAAsBc,EAAwBlB,EAA0B,CAK/E,GAHAkB,EAAU,UAAY,GAGlB,CAAClB,GAAU,OAAOA,EAAO,QAAW,SAAU,CAChD,MAAMmB,EAAUpD,EAAc,MAAO,CAAE,UAAW,2BAA4B,EAExEqD,EAAQrD,EAAc,MAAO,CAAE,UAAW,eAAgB,EAC1DsD,EAAWtD,EAAc,OAAQ,CAAE,UAAW,eAAiB,CAAC,IAAI,CAAC,EACrEuD,EAAavD,EAAc,OAAQ,CAAE,UAAW,eAAiB,CAAC,QAAQ,CAAC,EAEjFqD,EAAM,YAAYC,CAAQ,EAC1BD,EAAM,YAAYE,CAAU,EAE5B,MAAMC,EAASxD,EAAc,IAAK,CAAE,UAAW,iBAAmB,CAAC,yBAAyB,CAAC,EAE7FoD,EAAQ,YAAYC,CAAK,EACzBD,EAAQ,YAAYI,CAAM,EAC1BL,EAAU,YAAYC,CAAO,EAC7B,MACF,CAEA,MAAMK,EAAcxB,EAAO,OAAO,cAAc,QAAQ,OAAQ,GAAG,EAC7DyB,EAAQzB,EAAO,OAAS,EACxBnC,EAAQmC,EAAO,OAAS,OACxB0B,EAAU1B,EAAO,SAAW,GAE5BmB,EAAUpD,EAAc,MAAO,CAAE,UAAW,oBAAoByD,CAAW,GAAI,EAG/EJ,EAAQrD,EAAc,MAAO,CAAE,UAAW,eAAgB,EAE1D4D,EAAc5D,EAAc,MAAO,CACvC,UAAW,eACX,MAAO,YAAY0D,CAAK,IACzB,EACDE,EAAY,YAAY5D,EAAc,OAAQ,CAAE,UAAW,eAAiB,CAAC,OAAO0D,CAAK,CAAC,CAAC,CAAC,EAC5FE,EAAY,YAAY5D,EAAc,OAAQ,CAAE,UAAW,eAAiB,CAAC,QAAQ,CAAC,CAAC,EAEvF,MAAM6D,EAAY7D,EAAc,MAAO,CAAE,UAAW,aAAc,EAC5D8D,EAAa9D,EAAc,MAAO,CACtC,UAAW,cACX,MAAO,iBAAiB0D,CAAK,oBAAoB5D,CAAK,GACvD,EACD+D,EAAU,YAAYC,CAAU,EAEhCT,EAAM,YAAYO,CAAW,EAC7BP,EAAM,YAAYQ,CAAS,EAG3B,MAAME,EAAY/D,EAAc,MAAO,CAAE,UAAW,gBAAiB,EAC/DgE,EAAahE,EAAc,OAAQ,CACvC,UAAW,cACX,MAAO,mBAAmBF,CAAK,IAC9B,CAACmC,EAAO,MAAM,CAAC,EAClB8B,EAAU,YAAYC,CAAU,EAGhC,MAAMC,EAAajE,EAAc,MAAO,CAAE,UAAW,iBAAkB,EACvE2D,EAAQ,MAAM,EAAG,CAAC,EAAE,QAAQO,GAAK,CAC/B,MAAMC,EAAanE,EAAc,MAAO,CAAE,UAAW,UAAUkE,EAAE,IAAI,GAAI,EAGnEE,EAAWF,EAAE,OAAS,WAAa,QAAU,QAC7CG,EAAO5E,EAAW2E,EAAU,CAAE,KAAM,GAAI,UAAW,cAAe,EAElEE,EAAOtE,EAAc,OAAQ,CAAE,UAAW,eAAiB,CAACkE,EAAE,MAAM,CAAC,EAE3EC,EAAW,YAAYE,CAAI,EAC3BF,EAAW,YAAYG,CAAI,EAC3BL,EAAW,YAAYE,CAAU,CACnC,CAAC,EAEDf,EAAQ,YAAYC,CAAK,EACzBD,EAAQ,YAAYW,CAAS,EAC7BX,EAAQ,YAAYa,CAAU,EAE9Bd,EAAU,YAAYC,CAAO,CAC/B,CAKA,SAASd,EAAgBa,EAAwBnB,EAAqBuC,EAA0C,CAEjGvC,EAAK,UAClB,MAAMwC,EAAYxC,EAAK,qBAAuB,CAAmC,SAAU,GACrFyC,EAAUzC,EAAK,eAAiB,CAAE,KAAM,CAAqB,EAE7D0C,EAAgB1C,EAAK,oBAAsB,EAC3C2C,EAAQ,CACZ,CAAE,GAAI,QAAS,MAAO,QAAS,MAAO3C,EAAK,YAAc,EAAG,IAAK0C,EAAgB,EAAI,GAAGA,CAAa,YAAc,OAAW,KAAM,MACpI,CAAE,GAAI,YAAa,MAAO,YAAa,MAAO1C,EAAK,gBAAkB,EAAG,IAAK,GAAGwC,EAAU,QAAQ,YAAa,KAAM,KACrH,CAAE,GAAI,YAAa,MAAO,YAAa,MAAOxC,EAAK,gBAAkB,EAAG,KAAM,MAC9E,CAAE,GAAI,QAAS,MAAO,QAAS,MAAOA,EAAK,YAAc,EAAG,IAAK,GAAGyC,EAAQ,IAAI,QAAS,KAAM,MAC/F,CAAE,GAAI,UAAW,MAAO,UAAW,MAAOzC,EAAK,cAAgB,EAAG,IAAK,GAAGA,EAAK,gBAAkB,CAAC,WAAY,KAAM,IAAI,EAI1HmB,EAAU,UAAY,GAGtBwB,EAAM,QAAQC,GAAQ,CACpB,MAAMC,EAAO7E,EAAc,MAAO,CAChC,UAAW,YACX,eAAgB4E,EAAK,GACtB,EAGKE,EAAU9E,EAAc,MAAO,CAAE,UAAW,cAAgB,CAAC,OAAO4E,EAAK,KAAK,CAAC,CAAC,EAGhFG,EAAU/E,EAAc,MAAO,CAAE,UAAW,cAAgB,CAAC4E,EAAK,KAAK,CAAC,EAO9E,GAJAC,EAAK,YAAYC,CAAO,EACxBD,EAAK,YAAYE,CAAO,EAGpBH,EAAK,IAAK,CACZ,MAAMI,EAAQhF,EAAc,MAAO,CAAE,UAAW,YAAc,CAAC4E,EAAK,GAAG,CAAC,EACxEC,EAAK,YAAYG,CAAK,CACxB,CAMIT,IACFM,EAAK,UAAU,IAAI,WAAW,EAC9BA,EAAK,iBAAiB,QAAS,IAAMN,EAAQK,EAAK,EAAE,CAAC,GAGvDzB,EAAU,YAAY0B,CAAI,CAC5B,CAAC,CACH,CAQA,SAASrC,EAAaW,EAAwBhB,EAAiBoC,EAAwC,CACrGpB,EAAU,UAAY,GAEtB,MAAM8B,EAASjF,EAAc,MAAO,CAAE,UAAW,gBAAiB,EAClEiF,EAAO,YAAYjF,EAAc,KAAM,GAAI,CAAC,QAAQ,CAAC,CAAC,EACtDiF,EAAO,YAAYjF,EAAc,OAAQ,CAAE,UAAW,gBAAkB,CAAC,OAAOmC,EAAO,MAAM,CAAC,CAAC,CAAC,EAChGgB,EAAU,YAAY8B,CAAM,EAE5B,MAAMC,EAAOlF,EAAc,MAAO,CAAE,UAAW,cAAe,EAE9DmC,EAAO,MAAM,EAAG,CAAC,EAAE,QAAQ,CAACgD,EAAOC,IAAM,CACvC,MAAMC,EAAOrF,EAAc,MAAO,CAChC,UAAW,cAAcmF,EAAM,QAAQ,GACvC,mBAAoB,OAAOC,CAAC,EAC7B,EAEKE,EAAWtF,EAAc,OAAQ,CAAE,UAAW,cAAgB,CAACuF,EAAaJ,EAAM,QAAQ,CAAC,CAAC,EAE5FK,EAAUxF,EAAc,MAAO,CAAE,UAAW,gBAAiB,EACnEwF,EAAQ,YAAYxF,EAAc,MAAO,CAAE,UAAW,eAAiB,CAACmF,EAAM,KAAK,CAAC,CAAC,EACrFK,EAAQ,YAAYxF,EAAc,MAAO,CAAE,UAAW,iBAAmB,CAACmF,EAAM,OAAO,CAAC,CAAC,EAEzFE,EAAK,YAAYC,CAAQ,EACzBD,EAAK,YAAYG,CAAO,EAEpBjB,GACFc,EAAK,iBAAiB,QAAS,IAAMd,EAAQY,CAAK,CAAC,EAGrDD,EAAK,YAAYG,CAAI,CACvB,CAAC,EAEDlC,EAAU,YAAY+B,CAAI,CAC5B,CAQA,SAASzC,EAAeU,EAAwBjB,EAAqBuD,EAA6C,CAChHtC,EAAU,UAAY,GAEtBjB,EAAS,MAAM,EAAG,CAAC,EAAE,QAAQ,CAACwD,EAASN,IAAM,CAC3C,MAAMC,EAAOrF,EAAc,MAAO,CAChC,UAAW,gBAAgB0F,EAAQ,IAAI,GACvC,qBAAsB,OAAON,CAAC,EAC/B,EAIKE,EAAWtF,EAAc,OAAQ,CAAE,UAAW,gBAAkB,CAAC0F,EAAQ,IAAI,CAAC,EAE9EF,EAAUxF,EAAc,MAAO,CAAE,UAAW,kBAAmB,EACrEwF,EAAQ,YAAYxF,EAAc,MAAO,CAAE,UAAW,iBAAmB,CAAC0F,EAAQ,KAAK,CAAC,CAAC,EACzFF,EAAQ,YAAYxF,EAAc,MAAO,CAAE,UAAW,mBAAqB,CAAC0F,EAAQ,OAAO,CAAC,CAAC,EAE7FL,EAAK,YAAYC,CAAQ,EACzBD,EAAK,YAAYG,CAAO,EAIxBrC,EAAU,YAAYkC,CAAI,CAC5B,CAAC,CACH,CAQA,SAAStC,EAAkBI,EAAwBL,EAA+E,CAEhI,MAAM6C,EAAc,CAACC,EAAiBC,IAAgC,CACpE,MAAMC,EAAc,CAAC,MAAO,SAAU,OAAQ,UAAU,EAAE,QAAQF,GAAQ,eAAiB,KAAK,EAC1FG,EAAkB,CAAC,MAAO,SAAU,MAAM,EAAE,QAAQF,GAAY,eAAiB,KAAK,EACtFnC,EAAQoC,EAAcC,EAC5B,OAAIrC,GAAS,EAAU,WACnBA,GAAS,EAAU,OACnBA,GAAS,EAAU,SAChB,KACT,EAEMsC,EAAclD,EAAM,OAAOmD,GAAKA,EAAE,SAAW,aAAeA,EAAE,SAAW,QAAQ,EACjFC,EAAS,CAAE,SAAU,EAAG,KAAM,EAAG,OAAQ,EAAG,IAAK,GAEvDF,EAAY,QAAQG,GAAQ,CAC1B,MAAMC,EAAWT,EAAYQ,EAAK,OAAQA,EAAK,UAAU,EACzDD,EAAOE,CAA+B,GACxC,CAAC,EAED,MAAMC,EAAQL,EAAY,OACpBM,EAAYxD,EAAM,OAASkD,EAAY,OAGvCO,EAAcC,GAAkBH,EAAQ,EAAI,KAAK,MAAOG,EAAQH,EAAS,GAAG,EAAI,EAGtF,IAAII,EAAa,GACbC,EAAa,EAEjB,MAAMC,EAAS,CACb,SAAU,UACV,KAAM,UACN,OAAQ,UACR,IAAK,WAGN,CAAC,WAAY,OAAQ,SAAU,KAAK,EAAY,QAAQC,GAAS,CAEhE,MAAMC,EADUN,EAAWL,EAAOU,CAAK,CAAC,EACb,IAAO,IAC9BC,EAAU,IACZJ,GAAc,GAAGE,EAAOC,CAAK,CAAC,IAAIF,CAAU,OAAOA,EAAaG,CAAO,QACvEH,GAAcG,EAElB,CAAC,EAGIJ,EAGHA,EAAaA,EAAW,MAAM,EAAG,EAAE,EAFnCA,EAAa,kCAMftD,EAAU,UAAY,GAEtB,MAAM2D,EAAU9G,EAAc,MAAO,CAAE,UAAW,eAAgB,EAG5DiF,EAASjF,EAAc,MAAO,CAAE,UAAW,sBAAuB,EACxEiF,EAAO,YAAYjF,EAAc,KAAM,GAAI,CAAC,eAAe,CAAC,CAAC,EAC7DiF,EAAO,YAAYjF,EAAc,OAAQ,CAAE,UAAW,cAAgB,CAAC,GAAGqG,CAAK,SAAS,CAAC,CAAC,EAC1FS,EAAQ,YAAY7B,CAAM,EAG1B,MAAMO,EAAUxF,EAAc,MAAO,CAAE,UAAW,uBAAwB,EAGpE+G,EAAiB/G,EAAc,MAAO,CAAE,UAAW,uBAAwB,EAC3EgH,EAAQhH,EAAc,MAAO,CACjC,UAAW,aACX,MAAO,iCAAiCyG,CAAU,IACnD,EAEKQ,EAASjH,EAAc,MAAO,CAAE,UAAW,oBAAqB,EACtEiH,EAAO,YAAYjH,EAAc,OAAQ,CAAE,UAAW,eAAiB,CAAC,OAAOqG,CAAK,CAAC,CAAC,CAAC,EACvFY,EAAO,YAAYjH,EAAc,OAAQ,CAAE,UAAW,eAAiB,CAAC,OAAO,CAAC,CAAC,EAEjFgH,EAAM,YAAYC,CAAM,EACxBF,EAAe,YAAYC,CAAK,EAChCxB,EAAQ,YAAYuB,CAAc,EAGlC,MAAMG,EAAUlH,EAAc,MAAO,CAAE,UAAW,YAAa,EA+B/D,GA9Be,CACb,CAAE,GAAI,WAAY,KAAM,KAAM,MAAO,YACrC,CAAE,GAAI,OAAQ,KAAM,KAAM,MAAO,QACjC,CAAE,GAAI,SAAU,KAAM,KAAM,MAAO,UACnC,CAAE,GAAI,MAAO,KAAM,KAAM,MAAO,MAAM,EAGjC,QAAQ4G,GAAS,CACtB,MAAMJ,EAAQN,EAAOU,EAAM,EAAE,EACvBvB,EAAOrF,EAAc,MAAO,CAAE,UAAW,iBAAiB4G,EAAM,EAAE,GAAI,EAE5EvB,EAAK,YAAYrF,EAAc,OAAQ,CAAE,UAAW,YAAc,CAAC4G,EAAM,IAAI,CAAC,CAAC,EAC/EvB,EAAK,YAAYrF,EAAc,OAAQ,CAAE,UAAW,aAAe,CAAC4G,EAAM,KAAK,CAAC,CAAC,EAEjF,MAAMO,EAAQnH,EAAc,MAAO,CAAE,UAAW,YAAa,EAC7DmH,EAAM,YAAYnH,EAAc,MAAO,CACrC,UAAW,WACX,MAAO,gBAAgBuG,EAAWC,CAAK,CAAC,IACzC,CAAC,EACFnB,EAAK,YAAY8B,CAAK,EAEtB9B,EAAK,YAAYrF,EAAc,OAAQ,CAAE,UAAW,aAAe,CAAC,OAAOwG,CAAK,CAAC,CAAC,CAAC,EAEnFU,EAAQ,YAAY7B,CAAI,CAC1B,CAAC,EAEDG,EAAQ,YAAY0B,CAAO,EAC3BJ,EAAQ,YAAYtB,CAAO,EAGvBc,EAAY,EAAG,CACjB,MAAMc,EAAepH,EAAc,MAAO,CAAE,UAAW,iBAAkB,EACzEoH,EAAa,YAAYpH,EAAc,OAAQ,CAAE,UAAW,kBAAoB,CAAC,GAAG,CAAC,CAAC,EACtFoH,EAAa,YAAYpH,EAAc,OAAQ,GAAI,CAAC,GAAGsG,CAAS,QAAQA,IAAc,EAAI,IAAM,EAAE,YAAY,CAAC,CAAC,EAChHQ,EAAQ,YAAYM,CAAY,CAClC,CAEAjE,EAAU,YAAY2D,CAAO,CAC/B,CAQA,SAASnE,EAAiBX,EAA2B,CACnD,MAAMmB,EAAY,SAAS,eAAe,aAAa,EACvD,GAAI,CAACA,EAAW,OAGhBA,EAAU,UAAY,GAEtB,MAAMkE,EAAQrF,EAAK,iBAAmB,GAChCsF,EAAa,CAAC,YAAa,UAAW,SAAU,SAAU,WAAY,SAAS,EAC/EjB,EAAQiB,EAAW,OAAO,CAACC,EAAKC,IAAMD,GAAOF,EAAMG,CAAC,GAAK,GAAI,CAAC,EAEpE,GAAInB,IAAU,EAAG,CACflD,EAAU,YAAYnD,EAAc,MAAO,CAAE,UAAW,eAAiB,CAAC,cAAc,CAAC,CAAC,EAC1F,MACF,CAEAmD,EAAU,YAAYnD,EAAc,MAAO,CAAE,UAAW,qBAAuB,CAAC,mBAAmB,CAAC,CAAC,EAErG,MAAMyH,EAAgBzH,EAAc,MAAO,CAAE,UAAW,gBAAiB,EAEzEsH,EAAW,QAAQI,GAAO,CACxB,MAAMlB,EAAQa,EAAMK,CAAG,GAAK,EACtBC,EAAMtB,EAAQ,EAAKG,EAAQH,EAAS,IAAM,EAE1CuB,EAAM5H,EAAc,MAAO,CAAE,UAAW,eAAgB,EAE9D4H,EAAI,YAAY5H,EAAc,MAAO,CAAE,UAAW,aAAe,CAAC0H,CAAG,CAAC,CAAC,EAEvE,MAAMP,EAAQnH,EAAc,MAAO,CAAE,UAAW,YAAa,EACvD6H,EAAO7H,EAAc,MAAO,CAChC,UAAW,WACX,MAAO,gBAAgB2H,CAAG,IAC3B,EACDR,EAAM,YAAYU,CAAI,EACtBD,EAAI,YAAYT,CAAK,EAErBS,EAAI,YAAY5H,EAAc,MAAO,CAAE,UAAW,aAAe,CAAC,OAAOwG,CAAK,CAAC,CAAC,CAAC,EAEjFiB,EAAc,YAAYG,CAAG,CAC/B,CAAC,EAEDzE,EAAU,YAAYsE,CAAa,CACrC,CAQA,SAAS/E,EAA6BV,EAA2B,CAC/D,MAAMmB,EAAY,SAAS,eAAe,iBAAiB,EAC3D,GAAI,CAACA,EAAW,OAGhBA,EAAU,UAAY,GAEtB,KAAM,CAAE,SAAA2E,EAAU,KAAAC,EAAM,OAAAC,EAAQ,SAAAC,CAAA,EAAajG,EAAK,qBAAuB,CAAE,SAAU,EAAG,KAAM,EAAG,OAAQ,EAAG,SAAU,GAChHqE,EAAQyB,EAAWC,EAAOC,EAASC,EAEzC,GAAI5B,IAAU,EAAG,CACflD,EAAU,YAAYnD,EAAc,MAAO,CAAE,UAAW,eAAiB,CAAC,kBAAkB,CAAC,CAAC,EAC9F,MACF,CAEA,MAAMyH,EAAgBzH,EAAc,MAAO,CAAE,UAAW,gBAAiB,EAEtD,CACjB,CAAE,MAAO,WAAY,MAAO8H,EAAU,MAAO,YAC7C,CAAE,MAAO,OAAQ,MAAOC,EAAM,MAAO,QACrC,CAAE,MAAO,SAAU,MAAOC,EAAQ,MAAO,UACzC,CAAE,MAAO,WAAY,MAAOC,EAAU,MAAO,WAAW,EAG/C,QAAQC,GAAK,CACtB,MAAMN,EAAM5H,EAAc,MAAO,CAAE,UAAW,eAAgB,EAE9D4H,EAAI,YAAY5H,EAAc,MAAO,CAAE,UAAW,aAAe,CAACkI,EAAE,KAAK,CAAC,CAAC,EAE3E,MAAMf,EAAQnH,EAAc,MAAO,CAAE,UAAW,YAAa,EACvD6H,EAAO7H,EAAc,MAAO,CAChC,UAAW,YAAYkI,EAAE,KAAK,GAC9B,MAAO,gBAAiB7B,EAAQ,EAAK6B,EAAE,MAAQ7B,EAAS,IAAM,CAAE,IACjE,EACDc,EAAM,YAAYU,CAAI,EACtBD,EAAI,YAAYT,CAAK,EAErBS,EAAI,YAAY5H,EAAc,MAAO,CAAE,UAAW,aAAe,CAAC,OAAOkI,EAAE,KAAK,CAAC,CAAC,CAAC,EAEnFT,EAAc,YAAYG,CAAG,CAC/B,CAAC,EAEDzE,EAAU,YAAYsE,CAAa,CACrC,CAQA,eAAe7E,EAAwBZ,EAAoC,CACzE,MAAMmB,EAAY,SAAS,eAAe,cAAc,EACxD,GAAKA,EAGL,CAAAA,EAAU,UAAY,GACtBA,EAAU,YAAYnD,EAAc,MAAO,CAAE,UAAW,WAAa,CAAC,mBAAmB,CAAC,CAAC,EAE3F,GAAI,CAEF,MAAMmI,EAAa,MAAM/F,EAAiB,UAAU,CAAC,EAIrD,GAFAe,EAAU,UAAY,GAElB,CAACgF,GAAc,CAACA,EAAW,SAAWA,EAAW,QAAQ,SAAW,EAAG,CACzEhF,EAAU,YAAYnD,EAAc,MAAO,CAAE,UAAW,eAAiB,CAAC,6BAA6B,CAAC,CAAC,EACzG,MACF,CAGA,MAAMoI,EAAUD,EAAW,QAGrBE,EAAiB,GACjBC,EAAS,CACb,MAAO,GACP,UAAW,GACX,MAAO,GACP,QAAS,EAAC,EAGZF,EAAQ,QAAQG,GAAS,CACvB,MAAMC,EAAI,IAAI,KAAKD,EAAM,IAAI,EAC7BF,EAAK,KAAKG,EAAE,mBAAmB,OAAW,CAAE,QAAS,QAAS,CAAC,EAC/DF,EAAO,MAAM,KAAKC,EAAM,OAAS,CAAC,EAClCD,EAAO,UAAU,KAAKC,EAAM,WAAa,CAAC,EAC1CD,EAAO,MAAM,KAAKC,EAAM,OAAS,CAAC,EAClCD,EAAO,QAAQ,KAAKC,EAAM,SAAW,CAAC,CACxC,CAAC,EAED,MAAME,EAAW,KAAK,IACpB,GAAGH,EAAO,MACV,GAAGA,EAAO,UACV,GAAGA,EAAO,MACV,GAAGA,EAAO,QACV,GAGII,EAAQ1I,EAAc,MAAO,CAAE,UAAW,eAAgB,EAG1D2I,EAAS3I,EAAc,MAAO,CAAE,UAAW,gBAAiB,EACpD,CACZ,CAAE,IAAK,QAAS,MAAO,SACvB,CAAE,IAAK,YAAa,MAAO,aAC3B,CAAE,IAAK,QAAS,MAAO,SACvB,CAAE,IAAK,UAAW,MAAO,UAAU,EAG/B,QAAQqF,GAAQ,CACpB,MAAMuD,EAAO5I,EAAc,OAAQ,CAAE,UAAW,cAAe,EAC/D4I,EAAK,YAAY5I,EAAc,OAAQ,CAAE,UAAW,cAAcqF,EAAK,GAAG,GAAI,CAAC,EAC/EuD,EAAK,YAAY,SAAS,eAAevD,EAAK,KAAK,CAAC,EACpDsD,EAAO,YAAYC,CAAI,CACzB,CAAC,EACDF,EAAM,YAAYC,CAAM,EAGxB,MAAMlB,EAAgBzH,EAAc,MAAO,CAAE,UAAW,cAAe,EAEvEqI,EAAK,QAAQ,CAACQ,EAAKzD,IAAM,CACvB,MAAM0D,EAAM9I,EAAc,MAAO,CAAE,UAAW,eAAgB,EAExD+I,EAAQ/I,EAAc,MAAO,CAAE,UAAW,mBAAoB,EAEpD,CACd,CAAE,IAAK,QAAS,IAAKsI,EAAO,MAAMlD,CAAC,GACnC,CAAE,IAAK,YAAa,IAAKkD,EAAO,UAAUlD,CAAC,GAC3C,CAAE,IAAK,QAAS,IAAKkD,EAAO,MAAMlD,CAAC,GACnC,CAAE,IAAK,UAAW,IAAKkD,EAAO,QAAQlD,CAAC,EAAE,EAGnC,QAAQoD,GAAK,CACnB,MAAMZ,EAAM5H,EAAc,MAAO,CAC/B,UAAW,aAAawI,EAAE,GAAG,GAC7B,MAAO,mBAAoBA,EAAE,IAAMC,EAAY,GAAG,IAClD,MAAO,GAAGD,EAAE,IAAI,OAAO,CAAC,EAAE,cAAgBA,EAAE,IAAI,MAAM,CAAC,CAAC,KAAKA,EAAE,GAAG,GACnE,EACDO,EAAM,YAAYnB,CAAG,CACvB,CAAC,EAEDkB,EAAI,YAAYC,CAAK,EACrBD,EAAI,YAAY9I,EAAc,MAAO,CAAE,UAAW,eAAiB,CAAC6I,CAAG,CAAC,CAAC,EAEzEpB,EAAc,YAAYqB,CAAG,CAC/B,CAAC,EAEDJ,EAAM,YAAYjB,CAAa,EAC/BtE,EAAU,YAAYuF,CAAK,CAE7B,OAASxF,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7CC,EAAU,UAAY,GACtBA,EAAU,YAAYnD,EAAc,MAAO,CAAE,UAAW,SAAW,CAAC,2BAA2B,CAAC,CAAC,CACnG,EACF,CAKA,SAASuC,EAA0BY,EAAwB6F,EAA4B,CACrF,GAAIA,IAAiB,EAAG,CACtB7F,EAAU,UAAY,GACtB,MACF,CAEAA,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA,kBAIN6F,CAAY,kBAAkBA,IAAiB,EAAI,IAAM,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,IAQ3E,MAAMC,EAAU9F,EAAU,cAAc,mBAAmB,EACvD8F,GACFA,EAAQ,iBAAiB,QAAS,IAAM,CAEtC,OAAO,cAAc,IAAI,YAAY,mBAAoB,CACvD,OAAQ,CAAE,IAAK,MAAO,KAAM,UAAW,OAAQ,UAAU,CAC1D,CAAC,CACJ,CAAC,CAEL,CAKA,SAAS1D,EAAaa,EAA0B,CAC9C,OAAQA,EAAA,CACN,IAAK,WAAY,MAAO,KACxB,IAAK,OAAQ,MAAO,KACpB,IAAK,UAAW,MAAO,KACvB,QAAS,MAAO,IAEpB,CAoZA,SAAS8C,EAAiBC,EAA+E,CACvG,GAAI,CACF,MAAMC,MAAU,KAOVC,EANY,IAAI,KAAK,eAAe,QAAS,CACjD,SAAUF,EACV,KAAM,UACN,OAAQ,UACR,OAAQ,GACT,EAC2B,OAAOC,CAAG,EAChCE,EAAY,SAASD,EAAU,MAAM,GAAG,EAAE,CAAC,EAAG,EAAE,EAEhDE,EAAWD,GAAa,GAAKA,EAAY,GAC/C,MAAO,CAAE,UAAAD,EAAW,UAAAC,EAAW,SAAAC,CAAA,CACjC,MAAQ,CACN,MAAO,CAAE,UAAW,QAAS,UAAW,GAAI,SAAU,GACxD,CACF,CAKA,SAASC,EAAqBC,EAAgF,CAC5G,GAAIA,EAAQ,SAAW,EAAG,MAAO,GAEjC,MAAMC,EAAoE,GACpEN,MAAU,KAGhB,QAASO,EAAO,EAAGA,EAAO,GAAIA,IAAQ,CACpC,IAAIC,EAAY,EACZC,EAAa,EAEjB,UAAWtB,KAASkB,EAClB,GAAI,CACF,MAAMK,EAAY,IAAI,KAAK,eAAe,QAAS,CACjD,SAAUvB,EAAM,SAChB,KAAM,UACN,OAAQ,GACT,EACKe,EAAY,SAASQ,EAAU,OAAOV,CAAG,EAAG,EAAE,EAC9CW,EAAUX,EAAI,cACpB,IAAIY,EAASV,EAAYS,EACrBC,EAAS,KAAIA,GAAU,IACvBA,EAAS,MAAKA,GAAU,IAG5B,MAAMC,GAAaN,EAAOK,EAAS,IAAM,GAGrCC,GAAa,GAAKA,GAAa,IACjCL,IAEIK,GAAa,IAAMA,GAAa,IAC3BA,GAAa,IAAMA,GAAa,GADDJ,GAAc,GAEjDA,GAAc,GACVI,GAAa,GAAKA,GAAa,KACxCL,IACAC,GAAc,EAElB,MAAQ,CAAe,CAGrBD,EAAY,GACdF,EAAY,KAAK,CACf,KAAM,GAAGC,EAAK,WAAW,SAAS,EAAG,GAAG,CAAC,UACzC,MAAOE,EACP,UAAAD,CAAA,CACD,CAEL,CAGA,OAAAF,EAAY,KAAK,CAACQ,EAAGC,IACfA,EAAE,YAAcD,EAAE,UAAkBC,EAAE,UAAYD,EAAE,UACjDC,EAAE,MAAQD,EAAE,KACpB,EAEMR,EAAY,MAAM,EAAG,CAAC,CAC/B,CAMA,eAAezG,EAAgBE,EAAwBH,EAAkC,CACvF,GAAI,CAEF,KAAM,CAACoH,EAAYC,CAAW,EAAI,MAAM,QAAQ,IAAI,CAClDC,EAAK,IAAkC,iBAAiBtH,CAAS,UAAU,EAAE,MAAM,KAAO,CAAE,KAAM,CAAE,QAAS,EAAC,GAAM,EACpHsH,EAAK,IAAyI,eAAe,EAAE,MAAM,KAAO,CAAE,KAAM,CAAE,SAAU,EAAC,GAAM,EACxM,EAEKC,EAAUH,EAAW,MAAM,SAAW,GACtCI,EAAWH,EAAY,MAAM,UAAY,GAIzCI,MAAuB,IAEvBC,EAAgBH,EACnB,IAAII,GAAK,CAER,MAAMC,EAAgBD,EAAE,eAClBE,EAAKF,EAAE,UAAYC,GAAe,SACxC,GAAI,CAACC,EAAI,OAAO,KAEhB,MAAMC,EAAW5B,EAAiB2B,CAAE,EAE9BE,EAAYJ,EAAE,YAAcC,GAAe,YAAcA,GAAe,UAExEI,EAAOL,EAAE,WAAaC,GAAe,OAASD,EAAE,OAAS,QAAU,QAAUA,EAAE,OAAS,QAAU,QAAU,QAG5GM,EAAkBN,EAAE,mBAAqBC,GAAe,GAC9D,OAAIK,GACFR,EAAiB,IAAIQ,CAAe,EAG/B,CACL,KAAMN,EAAE,cAAgBA,EAAE,UAAYA,EAAE,OAAS,UACjD,SAAUE,EACV,KAAM,SACN,UAAAE,EACA,KAAAC,EACA,gBAAAC,EACA,GAAGH,CAAA,CAEP,CAAC,EACA,OAAQH,GAA0BA,IAAM,IAAI,EAEzCO,EAAkCV,EACrC,OAAOhD,GAAKA,EAAE,QAAQ,EACtB,IAAIA,GAAK,CACR,MAAMsD,EAAW5B,EAAiB1B,EAAE,UAAY,KAAK,EAC/C2D,EAAa3D,EAAsB,GACzC,MAAO,CACL,KAAMA,EAAE,KACR,SAAUA,EAAE,UAAY,MACxB,KAAM,UACN,UAAWA,EAAE,WAAaA,EAAE,UAAYA,EAAE,WAAaA,EAAE,WACzD,KAAOA,EAAwB,KAC/B,UAAA2D,EACA,GAAGL,CAAA,CAEP,CAAC,EAGH,GAAIJ,EAAc,SAAW,GAAKQ,EAAe,SAAW,EAAG,CAC7D/H,EAAU,UAAY,GACtB,MACF,CAGA,MAAMiI,EAAeC,EAAqBX,CAAa,EACjDY,EAAgBD,EAAqBH,CAAc,EAGnDK,EAA6BL,EAAe,OAAO1D,GAAK,CAACA,EAAE,WAAa,CAACiD,EAAiB,IAAIjD,EAAE,SAAS,CAAC,EAC1GgE,EAAa,CAAC,GAAGd,EAAe,GAAGa,CAA0B,EAC7DE,EAAYJ,EAAqBG,CAAU,EAG3CE,EAAqBlC,EAAqBgC,CAAU,EAGpDG,EAAgBjB,EAAc,OAAOC,GAAKA,EAAE,QAAQ,EAAE,OACtDiB,EAAiBV,EAAe,OAAO1D,GAAKA,EAAE,QAAQ,EAAE,OACxDqE,EAA6BN,EAA2B,OAAO/D,GAAKA,EAAE,QAAQ,EAAE,OAChFsE,EAAYH,EAAgBE,EAElC1I,EAAU,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cA2ZZ,IAAI,OAAO,mBAAmB,QAAS,CAAE,KAAM,UAAW,OAAQ,UAAW,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAMhFuH,EAAc,OAAS,EAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAODA,EAAc,MAAM;AAAA,kBACxCiB,EAAgB,EAAI,gCAAgCA,CAAa,iBAAmB,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKtFjB,EAAc,IAAIqB,GAAK,CACnC,MAAMC,EAAWD,EAAE,KAAK,MAAM,GAAG,EAAE,IAAInK,GAAKA,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE,UAAU,EAAG,CAAC,EAAE,cAC3E,MAAO;AAAA,8CACiCmK,EAAE,SAAW,SAAW,SAAS;AAAA;AAAA,0BAErDA,EAAE,UAAY,aAAaE,EAAiBF,EAAE,SAAS,CAAC,UAAUE,EAAiBF,EAAE,IAAI,CAAC,KAAOC,CAAQ;AAAA,kDACjFD,EAAE,SAAW,SAAW,SAAS;AAAA;AAAA;AAAA,oDAG/BE,EAAiBF,EAAE,IAAI,CAAC;AAAA,0BAClDA,EAAE,KAAO,6BAA6BE,EAAiBF,EAAE,IAAI,CAAC,UAAY,EAAE;AAAA,oDAClDA,EAAE,WAAa,OAAO,IAAIA,EAAE,SAAS,MAAM,GAAG,EAAE,OAAO,QAAQ,KAAM,GAAG,GAAK,EAAE;AAAA;AAAA;AAAA,mBAI/H,CAAC,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA,gBAGCG,EAAoBxB,EAAeU,CAAY,CAAC;AAAA,gBAChDe,EAAoBf,EAAcV,CAAa,CAAC;AAAA;AAAA;AAAA,iBAG/C,IAAM,CACb,MAAM0B,EAAkB5C,EAAqBkB,CAAa,EAC1D,OAAO0B,EAAgB,OAAS,EAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAStBA,EAAgB,IAAI,CAACC,EAAGjH,IAAM;AAAA;AAAA,0FAEoCA,IAAM,EAAI,UAAY,mBAAmB,MAAMA,IAAM,EAAI,IAAM,IAAI;AAAA,+CAC9GiH,EAAE,IAAI;AAAA,uDACEA,EAAE,SAAS,IAAI3B,EAAc,MAAM;AAAA;AAAA,uBAEnE,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA,kBAGb,EACZ,IAAI;AAAA;AAAA,YAEE,EAAE;AAAA;AAAA;AAAA,YAGJQ,EAAe,OAAS,EAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAOFA,EAAe,MAAM;AAAA,kBACzCU,EAAiB,EAAI,gCAAgCA,CAAc,iBAAmB,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKxFV,EAAe,IAAIa,GAAK,CAChC,MAAMC,EAAWD,EAAE,KAAK,MAAM,GAAG,EAAE,IAAInK,GAAKA,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE,UAAU,EAAG,CAAC,EAAE,cAC3E,MAAO;AAAA,8CAC6BmK,EAAE,SAAW,SAAW,SAAS;AAAA;AAAA,0BAErDA,EAAE,UAAY,aAAaE,EAAiBF,EAAE,SAAS,CAAC,UAAUE,EAAiBF,EAAE,IAAI,CAAC,KAAOC,CAAQ;AAAA,kDACjFD,EAAE,SAAW,SAAW,SAAS;AAAA;AAAA;AAAA,oDAG/BE,EAAiBF,EAAE,IAAI,CAAC;AAAA,0BAClDA,EAAE,KAAO,6BAA6BE,EAAiBF,EAAE,IAAI,CAAC,UAAY,EAAE;AAAA,oDAClDA,EAAE,WAAa,OAAO,IAAIA,EAAE,SAAS,MAAM,GAAG,EAAE,OAAO,QAAQ,KAAM,GAAG,GAAK,EAAE;AAAA;AAAA;AAAA,mBAI3H,CAAC,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA,gBAGHG,EAAoBhB,EAAgBI,CAAa,CAAC;AAAA,gBAClDa,EAAoBb,EAAeJ,CAAc,CAAC;AAAA;AAAA;AAAA,iBAGjD,IAAM,CACb,MAAMoB,EAAqB9C,EAAqB0B,CAAc,EAC9D,OAAOoB,EAAmB,OAAS,EAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBASzBA,EAAmB,IAAI,CAACD,EAAGjH,IAAM;AAAA;AAAA,0FAEiCA,IAAM,EAAI,UAAY,mBAAmB,MAAMA,IAAM,EAAI,IAAM,IAAI;AAAA,+CAC9GiH,EAAE,IAAI;AAAA,uDACEA,EAAE,SAAS,IAAInB,EAAe,MAAM;AAAA;AAAA,uBAEpE,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA,kBAGb,EACZ,IAAI;AAAA;AAAA,YAEE,EAAE;AAAA;AAAA;AAAA;AAAA,UAINR,EAAc,OAAS,GAAKQ,EAAe,OAAS,EAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCAO9BM,EAAW,MAAM;AAAA,6CACRM,CAAS;AAAA;AAAA,cAExCK,EAAoBV,EAAWD,CAAU,CAAC;AAAA;AAAA;AAAA,cAG1CE,EAAmB,OAAS,EAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAS1BA,EAAmB,IAAI,CAACW,EAAGjH,IAAM;AAAA;AAAA,sFAEiCA,IAAM,EAAI,UAAY,mBAAmB,MAAMA,IAAM,EAAI,IAAM,IAAI;AAAA,2CAC9GiH,EAAE,IAAI;AAAA,mDACEA,EAAE,SAAS,IAAIb,EAAW,MAAM;AAAA;AAAA,mBAEhE,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA,cAGb,EAAE;AAAA;AAAA,UAEN,EAAE;AAAA;AAAA,KAGZ,OAAStI,EAAO,CACd,QAAQ,MAAM,+BAAgCA,CAAK,CACrD,CACF,CAKA,SAASmI,EAAqB5B,EAAiE,CAC7F,GAAIA,EAAQ,SAAW,EAAG,OAAO,KAGjC,MAAM8C,EAAkB,CAAC,GAAG,IAAI,IAAI9C,EAAQ,IAAIsC,GAAKA,EAAE,QAAQ,CAAC,CAAC,EAEjE,GAAIQ,EAAgB,SAAW,EAE7B,MAAO,CAAE,MAAO,EAAG,IAAK,IAI1B,MAAMnD,MAAU,KACVoD,EAAoB,GAE1B,UAAW3B,KAAM0B,EACf,GAAI,CACF,MAAMzC,EAAY,IAAI,KAAK,eAAe,QAAS,CACjD,SAAUe,EACV,KAAM,UACN,OAAQ,GACT,EACKvB,EAAY,SAASQ,EAAU,OAAOV,CAAG,EAAG,EAAE,EAC9CW,EAAUX,EAAI,cACpB,IAAIY,EAASV,EAAYS,EACrBC,EAAS,KAAIA,GAAU,IACvBA,EAAS,MAAKA,GAAU,IAC5BwC,EAAQ,KAAKxC,CAAM,CACrB,MAAQ,CACNwC,EAAQ,KAAK,CAAC,CAChB,CAKF,IAAIC,EAAe,EACfC,EAAa,GAEjB,UAAW1C,KAAUwC,EAAS,CAE5B,MAAMG,GAAgB,EAAI3C,EAAS,IAAM,GACnC4C,GAAc,GAAK5C,EAAS,IAAM,GAGpC2C,EAAeC,IACjBH,EAAe,KAAK,IAAIA,EAAcE,CAAY,EAClDD,EAAa,KAAK,IAAIA,EAAYE,CAAU,EAEhD,CAEA,GAAIH,GAAgBC,EAClB,OAAO,KAIT,MAAMG,EAAcL,EAAQ,CAAC,EAC7B,MAAO,CACL,OAAQC,EAAeI,EAAc,IAAM,GAC3C,KAAMH,EAAaG,EAAc,IAAM,GAE3C,CAKA,SAASX,EAAoBzC,EAA0BqD,EAAuD,CAE5G,MAAMC,MAAe,IACrB,UAAWhB,KAAKtC,EACdsD,EAAS,IAAIhB,EAAE,UAAWgB,EAAS,IAAIhB,EAAE,QAAQ,GAAK,GAAK,CAAC,EAG9D,MAAMiB,EAAY,CAAC,GAAGD,EAAS,MAAM,EAAE,MAAM,EAAG,CAAC,EAEjD,GAAIC,EAAU,SAAW,EACvB,MAAO,2DAGT,MAAM5D,MAAU,KAEhB,MAAO;AAAA;AAAA,QAED,CAAC,EAAG,EAAG,GAAI,GAAI,EAAE,EAAE,IAAI6D,GAAK,4BAA4BA,CAAC,SAAS,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA,QAG5ED,EAAU,IAAInC,GAAM,CAExB,IAAIb,EAAS,EACb,GAAI,CACF,MAAMF,EAAY,IAAI,KAAK,eAAe,QAAS,CACjD,SAAUe,EACV,KAAM,UACN,OAAQ,GACT,EACKvB,EAAY,SAASQ,EAAU,OAAOV,CAAG,EAAG,EAAE,EAC9CW,EAAUX,EAAI,cACpBY,EAASV,EAAYS,EACjBC,EAAS,KAAIA,GAAU,IACvBA,EAAS,MAAKA,GAAU,GAC9B,MAAQ,CAAe,CAGvB,MAAMkD,EAAY,EACZC,EAAU,GACVC,EAAaF,EAAa,GAAM,IAChCG,GAAcF,EAAUD,GAAa,GAAM,IAG3CI,EAAYzC,EAAG,MAAM,GAAG,EAAE,OAAO,QAAQ,KAAM,GAAG,GAAKA,EACvDrE,EAAQuG,EAAS,IAAIlC,CAAE,GAAK,EAElC,MAAO;AAAA;AAAA,2CAEgCA,CAAE,KAAKyC,CAAS,IAAI9G,EAAQ,EAAI,IAAIA,CAAK,IAAM,EAAE;AAAA;AAAA,iEAE3B4G,CAAQ,kBAAkBC,CAAS;AAAA,gBACpFP,EAAS,gDAAiDA,EAAO,MAAQ,GAAM,GAAG,mBAAoBA,EAAO,IAAMA,EAAO,OAAS,GAAM,GAAG,aAAe,EAAE;AAAA;AAAA;AAAA,SAI3K,CAAC,EAAE,KAAK,EAAE,CAAC;AAAA;AAAA,GAGb,CAKA,SAASX,EAAoBW,EAA+CrD,EAAkC,CAC5G,GAAI,CAACqD,EACH,MAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAWT,MAAMS,EAAcN,GAAc,GAAGA,EAAE,WAAW,SAAS,EAAG,GAAG,CAAC,MAC5DO,EAAWV,EAAO,IAAMA,EAAO,MAG/BW,EAAa,EACbC,EAAcjE,EAAQ,MAAM,EAAGgE,CAAU,EACzCE,EAAYlE,EAAQ,OAASgE,EAEnC,MAAO;AAAA;AAAA;AAAA;AAAA;AAAA,6BAKoBF,EAAWT,EAAO,KAAK,CAAC,MAAMS,EAAWT,EAAO,GAAG,CAAC,KAAKU,CAAQ;AAAA;AAAA;AAAA;AAAA,QAItFE,EAAY,IAAI3B,GAAK,CACzB,MAAMC,EAAWD,EAAE,KAAK,MAAM,GAAG,EAAE,IAAInK,GAAKA,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE,UAAU,EAAG,CAAC,EAAE,cAC3E,MAAO;AAAA,mDACwCqK,EAAiBF,EAAE,IAAI,CAAC;AAAA,cAC7DA,EAAE,UAAY,aAAaE,EAAiBF,EAAE,SAAS,CAAC,UAAUE,EAAiBF,EAAE,IAAI,CAAC,KAAOC,CAAQ;AAAA;AAAA,SAGrH,CAAC,EAAE,KAAK,EAAE,CAAC;AAAA,QACL2B,EAAY,EAAI,yCAAyCA,CAAS,SAAW,EAAE;AAAA;AAAA,GAGvF,CAEA,SAAS1B,EAAiB2B,EAAqB,CAC7C,OAAOA,EAAI,QAAQ,KAAM,OAAO,EAAE,QAAQ,KAAM,MAAM,EAAE,QAAQ,KAAM,MAAM,EAAE,QAAQ,KAAM,QAAQ,CACtG,CAqBO,SAASC,GAAeC,EAAkB5N,EAAwB,GAAwB,CAC/F,MAAMiD,EAAY,SAAS,cAAc2K,CAAQ,EACjD,GAAI,CAAC3K,EACH,eAAQ,KAAK,mCAAmC2K,CAAQ,EAAE,EACnD,KAGT,MAAM3N,EAAYF,EAAgBC,CAAK,EACvC,OAAAiD,EAAU,YAAYhD,CAAS,EACxBA,CACT","names":["ICONS","createIcon","name","options","size","strokeWidth","color","svg","createElement","createDashboard","props","dashboard","statsRow","statsGrid","insightsRow","overdueSection","alertsSection","briefingSection","goldenHoursSection","chartsRow","questionsChart","factsChart","trendsChart","bottomRow","healthCard","riskCard","loadFullDashboard","healthSection","insightsSection","riskSummaryContainer","currentProject","appStore","currentProjectId","createBtn","showProjectModal","__vitePreload","n","createBriefingPanel","briefingPanel","err","data","health","insights","alerts","dashboardService","renderHealthIndicator","renderStatsGrid","renderOverdueActionsAlert","renderAlerts","renderInsights","renderQuestionsPriorityChart","renderFactsChart","renderWeeklyTrendsChart","risksService","risks","renderRiskSummary","projectId","loadGoldenHours","error","container","wrapper","gauge","scoreVal","scoreLabel","status","statusClass","score","factors","healthScore","healthBar","healthFill","statusDiv","statusText","factorsDiv","f","factorItem","iconName","icon","text","onClick","qPriority","rImpact","factsVerified","stats","stat","card","valueEl","labelEl","subEl","header","list","alert","i","item","iconSpan","getAlertIcon","content","onAction","insight","getSeverity","impact","likelihood","impactLevel","likelihoodLevel","activeRisks","r","counts","risk","severity","total","mitigated","getPercent","count","conicStops","currentDeg","colors","level","degrees","summary","donutContainer","donut","center","barsDiv","track","mitigatedDiv","byCat","categories","sum","c","barsContainer","cat","pct","bar","fill","critical","high","medium","resolved","p","trendsData","history","days","trends","entry","d","maxValue","chart","legend","span","day","col","group","overdueCount","viewBtn","getLocalTimeInfo","timezone","now","localTime","localHour","isOnline","findBestMeetingTimes","entries","suggestions","hour","available","totalScore","formatter","utcHour","offset","theirHour","a","b","membersRes","contactsRes","http","members","contacts","linkedContactIds","memberEntries","m","linkedContact","tz","timeInfo","avatarUrl","role","linkedContactId","contactEntries","contactId","memberGolden","calculateGoldenHours","contactGolden","deduplicatedContactEntries","allEntries","allGolden","meetingSuggestions","onlineMembers","onlineContacts","onlineDeduplicatedContacts","onlineAll","e","initials","escapeHtmlSimple","renderTimezoneChart","renderGoldenSummary","teamSuggestions","s","contactSuggestions","uniqueTimezones","offsets","overlapStart","overlapEnd","workStartUtc","workEndUtc","firstOffset","golden","tzCounts","uniqueTzs","h","workStart","workEnd","workLeft","workWidth","displayTz","formatHour","duration","maxAvatars","showEntries","moreCount","str","mountDashboard","selector"],"ignoreList":[],"sources":["../../frontend/src/components/ui/Icon.ts","../../frontend/src/pages/Dashboard.ts"],"sourcesContent":["import { createElement } from '@lib/dom';\r\n\r\nexport type IconName =\r\n  | 'dashboard' | 'questions' | 'risks' | 'actions' | 'decisions'\r\n  | 'facts' | 'settings' | 'user' | 'bell' | 'search'\r\n  | 'plus' | 'check' | 'alert' | 'info' | 'close'\r\n  | 'arrow-right' | 'arrow-left' | 'chevron-down' | 'chevron-up'\r\n  | 'timeline' | 'graph' | 'team' | 'documents' | 'email';\r\n\r\nconst ICONS: Record<IconName, string> = {\r\n  dashboard: '<rect x=\"3\" y=\"3\" width=\"7\" height=\"7\"></rect><rect x=\"14\" y=\"3\" width=\"7\" height=\"7\"></rect><rect x=\"14\" y=\"14\" width=\"7\" height=\"7\"></rect><rect x=\"3\" y=\"14\" width=\"7\" height=\"7\"></rect>',\r\n  questions: '<circle cx=\"12\" cy=\"12\" r=\"10\"></circle><path d=\"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3\"></path><line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>',\r\n  risks: '<path d=\"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z\"></path><line x1=\"12\" y1=\"9\" x2=\"12\" y2=\"13\"></line><line x1=\"12\" y1=\"17\" x2=\"12.01\" y2=\"17\"></line>',\r\n  actions: '<polyline points=\"9 11 12 14 22 4\"></polyline><path d=\"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11\"></path>',\r\n  decisions: '<circle cx=\"12\" cy=\"12\" r=\"10\"></circle><path d=\"M22 12h-4\"></path><path d=\"M6 12H2\"></path><path d=\"M12 6V2\"></path><path d=\"M12 22v-4\"></path>',\r\n  facts: '<path d=\"M12 2a6 6 0 0 1 6 6c0 7-6 9-6 9s-6-2-6-9a6 6 0 0 1 6-6z\"></path><path d=\"M12 18v2\"></path>', // Lightbulb-ish? Or similar\r\n  settings: '<circle cx=\"12\" cy=\"12\" r=\"3\"></circle><path d=\"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z\"></path>',\r\n  user: '<path d=\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\"></path><circle cx=\"12\" cy=\"7\" r=\"4\"></circle>',\r\n  bell: '<path d=\"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9\"></path><path d=\"M13.73 21a2 2 0 0 1-3.46 0\"></path>',\r\n  search: '<circle cx=\"11\" cy=\"11\" r=\"8\"></circle><line x1=\"21\" y1=\"21\" x2=\"16.65\" y2=\"16.65\"></line>',\r\n  plus: '<line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line>',\r\n  check: '<polyline points=\"20 6 9 17 4 12\"></polyline>',\r\n  alert: '<circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\"></line><line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\"></line>',\r\n  info: '<circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"12\"></line><line x1=\"12\" y1=\"8\" x2=\"12.01\" y2=\"8\"></line>',\r\n  close: '<line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line><line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>',\r\n  'arrow-right': '<line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line><polyline points=\"12 5 19 12 12 19\"></polyline>',\r\n  'arrow-left': '<line x1=\"19\" y1=\"12\" x2=\"5\" y2=\"12\"></line><polyline points=\"12 19 5 12 12 5\"></polyline>',\r\n  'chevron-down': '<polyline points=\"6 9 12 15 18 9\"></polyline>',\r\n  'chevron-up': '<polyline points=\"18 15 12 9 6 15\"></polyline>',\r\n  timeline: '<circle cx=\"12\" cy=\"12\" r=\"10\"></circle><polyline points=\"12 6 12 12 16 14\"></polyline>',\r\n  graph: '<circle cx=\"12\" cy=\"12\" r=\"3\"></circle><path d=\"M19 5a2 2 0 0 0-2 2v0\"></path><path d=\"M5 19a2 2 0 0 0 2 2v0\"></path>', // Simplified graph\r\n  team: '<path d=\"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2\"></path><circle cx=\"9\" cy=\"7\" r=\"4\"></circle><path d=\"M23 21v-2a4 4 0 0 0-3-3.87\"></path><path d=\"M16 3.13a4 4 0 0 1 0 7.75\"></path>',\r\n  documents: '<path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"></path><polyline points=\"14 2 14 8 20 8\"></polyline><line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\"></line><line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\"></line><polyline points=\"10 9 9 9 8 9\"></polyline>',\r\n  email: '<path d=\"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z\"></path><polyline points=\"22,6 12,13 2,6\"></polyline>',\r\n};\r\n\r\ninterface IconOptions {\r\n  size?: number | string;\r\n  className?: string;\r\n  strokeWidth?: number;\r\n  color?: string;\r\n}\r\n\r\nexport function createIcon(name: IconName, options: IconOptions = {}): HTMLElement {\r\n  const size = options.size || 24;\r\n  const strokeWidth = options.strokeWidth || 2;\r\n  const color = options.color || 'currentColor';\r\n\r\n  const svg = createElement('div', {\r\n    className: `sota-icon ${options.className || ''}`,\r\n    style: `display: inline-flex; align-items: center; justify-content: center; width: ${size}px; height: ${size}px;`\r\n  });\r\n\r\n  // Use innerHTML safely with SVG content\r\n  svg.innerHTML = `\r\n    <svg \r\n      xmlns=\"http://www.w3.org/2000/svg\" \r\n      width=\"${size}\" \r\n      height=\"${size}\" \r\n      viewBox=\"0 0 24 24\" \r\n      fill=\"none\" \r\n      stroke=\"${color}\" \r\n      stroke-width=\"${strokeWidth}\" \r\n      stroke-linecap=\"round\" \r\n      stroke-linejoin=\"round\"\r\n    >\r\n      ${ICONS[name] || ''}\r\n    </svg>\r\n  `;\r\n\r\n  // Return the SVG itself, unravelled from the div wrapper if preferred, \r\n  // but keeping a wrapper is often safer for layout variables. \r\n  // However, createElement traditionally returns the element itself.\r\n  // Let's return the svg element directly if possible to avoid extra divs.\r\n\r\n  return svg.firstElementChild as HTMLElement;\r\n}\r\n","/**\n * Dashboard Component\n * Main dashboard view with stats, health, trends, insights, and alerts\n */\n\nimport { createElement, on } from '@lib/dom';\nimport { dataStore } from '@stores/data';\nimport { appStore } from '@stores/app';\nimport { formatNumber, formatPercent, formatRelativeTime } from '@lib/format';\nimport { dashboardService, DashboardData, HealthData, Insight, Alert, TrendMetric } from '@services/dashboard';\nimport { http } from '@services/api';\nimport { risksService } from '@services/risks';\n\nexport interface DashboardStats {\n  totalQuestions: number;\n  answeredQuestions: number;\n  totalRisks: number;\n  highPriorityRisks: number;\n  totalActions: number;\n  completedActions: number;\n  totalDecisions: number;\n  totalContacts: number;\n  healthScore: number;\n}\n\nexport interface DashboardProps {\n  onStatClick?: (statId: string) => void;\n  onAlertClick?: (alert: Alert) => void;\n  onInsightAction?: (insight: Insight) => void;\n}\n\nimport { createIcon } from '@components/ui/Icon';\n\n/**\n * Create dashboard element\n */\nexport function createDashboard(props: DashboardProps = {}): HTMLElement {\n  const dashboard = createElement('div', { className: 'dashboard' });\n  // ... (omitting huge chunk, target carefully)\n  // Actually I should just target the imports.\n\n  // Wait, replace_file_content replaces the whole block. I need to be precise.\n  // I will split this into multiple replacement chunks using multi_replace_file_content if possible, OR just careful replace_file_content.\n  // But I don't have multi_replace_file_content available in my tool definitions?\n  // CHECK TOOLS: I DO have multi_replace_file_content.\n\n  // I will use multi_replace_file_content for Dashboard.ts\n\n  // Row 1: Stats Cards\n  const statsRow = createElement('div', { className: 'dashboard-row' });\n  const statsGrid = createElement('div', { id: 'dashboard-stats-grid', className: 'stats-grid' });\n  statsRow.appendChild(statsGrid);\n\n  // Row 2: Insights (horizontal)\n  const insightsRow = createElement('div', { id: 'dashboard-insights', className: 'dashboard-insights-row' });\n\n  // Row 3: Alerts/Overdue\n  const overdueSection = createElement('div', { id: 'dashboard-overdue', className: 'dashboard-overdue-section' });\n  const alertsSection = createElement('div', { id: 'dashboard-alerts', className: 'dashboard-alerts-section' });\n\n  // Row 4: Daily Briefing\n  const briefingSection = createElement('div', { id: 'dashboard-briefing', className: 'dashboard-briefing-section' });\n\n  // Row 5: Golden Hours\n  const goldenHoursSection = createElement('div', { id: 'dashboard-golden-hours', className: 'dashboard-golden-hours-section' });\n\n  // Row 6: Charts\n  const chartsRow = createElement('div', { className: 'dashboard-charts-row' });\n  const questionsChart = createElement('div', { id: 'questions-chart', className: 'chart-container' });\n  const factsChart = createElement('div', { id: 'facts-chart', className: 'chart-container' });\n  const trendsChart = createElement('div', { id: 'trends-chart', className: 'chart-container' });\n\n  chartsRow.appendChild(questionsChart);\n  chartsRow.appendChild(factsChart);\n  chartsRow.appendChild(trendsChart);\n\n  // Row 7: Bottom (Health + Risk Summary)\n  const bottomRow = createElement('div', { className: 'dashboard-bottom-row' });\n  const healthCard = createElement('div', { id: 'dashboard-health', className: 'dashboard-health-card' });\n  const riskCard = createElement('div', { id: 'risk-summary-container', className: 'dashboard-risk-summary-card' });\n\n  bottomRow.appendChild(healthCard);\n  bottomRow.appendChild(riskCard);\n\n  // Assemble Dashboard\n  dashboard.appendChild(statsRow);\n  dashboard.appendChild(insightsRow);\n  dashboard.appendChild(overdueSection);\n  dashboard.appendChild(alertsSection);\n  dashboard.appendChild(briefingSection);\n  dashboard.appendChild(goldenHoursSection);\n  dashboard.appendChild(chartsRow);\n  dashboard.appendChild(bottomRow);\n\n  // Load dashboard data\n  loadFullDashboard(dashboard, props);\n\n  return dashboard;\n}\n\n/**\n * Load full dashboard data from API\n */\nasync function loadFullDashboard(dashboard: HTMLElement, props: DashboardProps): Promise<void> {\n  const healthSection = dashboard.querySelector('#dashboard-health');\n  const briefingSection = dashboard.querySelector('#dashboard-briefing');\n  const statsGrid = dashboard.querySelector('#dashboard-stats-grid');\n  const overdueSection = dashboard.querySelector('#dashboard-overdue');\n  const alertsSection = dashboard.querySelector('#dashboard-alerts');\n  const insightsSection = dashboard.querySelector('#dashboard-insights');\n  const riskSummaryContainer = dashboard.querySelector('#risk-summary-container');\n  const goldenHoursSection = dashboard.querySelector('#dashboard-golden-hours');\n\n  // Check if project is selected\n  const currentProject = appStore.getState().currentProject;\n  const currentProjectId = appStore.getState().currentProjectId;\n\n  if (!currentProject && !currentProjectId) {\n    // No project selected - show empty state\n    if (statsGrid) {\n      statsGrid.innerHTML = `\n        <div class=\"no-project-state\">\n          <svg class=\"no-project-icon\" width=\"80\" height=\"80\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1.5\" d=\"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z\"/>\n          </svg>\n          <h2 class=\"no-project-title\">No Project Selected</h2>\n          <p class=\"no-project-desc\">\n            Select a project from the dropdown in the header to view your dashboard, or create a new project to get started.\n          </p>\n          <div class=\"no-project-actions\">\n            <button class=\"btn btn-primary create-project-btn no-project-btn\">\n              <svg width=\"18\" height=\"18\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4v16m8-8H4\"/>\n              </svg>\n              Create New Project\n            </button>\n          </div>\n        </div>\n      `;\n\n      // Bind create project button\n      const createBtn = statsGrid.querySelector('.create-project-btn');\n      if (createBtn) {\n        createBtn.addEventListener('click', async () => {\n          const { showProjectModal } = await import('@components/modals/ProjectModal');\n          showProjectModal({\n            mode: 'create',\n            onSave: () => {\n              // Trigger refresh\n              window.dispatchEvent(new CustomEvent('godmode:project-created'));\n            }\n          });\n        });\n      }\n    }\n\n    // Hide other sections\n    if (healthSection) (healthSection as HTMLElement).innerHTML = '';\n    if (briefingSection) (briefingSection as HTMLElement).innerHTML = '';\n    if (overdueSection) (overdueSection as HTMLElement).innerHTML = '';\n    if (alertsSection) (alertsSection as HTMLElement).innerHTML = '';\n    if (insightsSection) (insightsSection as HTMLElement).innerHTML = '';\n    if (riskSummaryContainer) (riskSummaryContainer as HTMLElement).innerHTML = '';\n    if (goldenHoursSection) (goldenHoursSection as HTMLElement).innerHTML = '';\n\n    return;\n  }\n\n  // Show loading state\n  if (statsGrid) {\n    statsGrid.innerHTML = '<div class=\"loading-placeholder\">Loading dashboard...</div>';\n  }\n\n  // Load Briefing Panel (async)\n  if (briefingSection && !briefingSection.hasChildNodes()) {\n    import('@components/BriefingPanel').then(({ createBriefingPanel }) => {\n      const briefingPanel = createBriefingPanel();\n      briefingSection.appendChild(briefingPanel);\n    }).catch(err => console.error('Failed to load BriefingPanel:', err));\n  }\n\n  try {\n    const { dashboard: data, health, insights, alerts } = await dashboardService.loadAll();\n\n    // SOTA: Safety Check - stop if component was unmounted during await\n    if (!dashboard.isConnected) {\n      console.log('[Dashboard] Component unmounted during load, aborting render.');\n      return;\n    }\n\n    // Render health indicator\n    if (healthSection && health) {\n      renderHealthIndicator(healthSection as HTMLElement, health);\n    }\n\n    // Render stats\n    if (statsGrid && data) {\n      renderStatsGrid(statsGrid as HTMLElement, data, props.onStatClick);\n    }\n\n    // Render overdue actions alert\n    if (overdueSection && data && data.overdueActions > 0) {\n      renderOverdueActionsAlert(overdueSection as HTMLElement, data.overdueActions);\n    }\n\n    // Render alerts\n    if (alertsSection && alerts.length > 0) {\n      renderAlerts(alertsSection as HTMLElement, alerts, props.onAlertClick);\n    }\n\n    // Render insights\n    if (insightsSection && insights.length > 0) {\n      renderInsights(insightsSection as HTMLElement, insights, props.onInsightAction);\n    }\n\n    // Render charts\n    if (data) {\n      renderQuestionsPriorityChart(data);\n      renderFactsChart(data);\n      // Load trends asynchronously (don't block)\n      renderWeeklyTrendsChart(data).catch(err =>\n        console.error('Failed to render trends chart:', err)\n      );\n    }\n\n    // Load Risk Summary with risks data (donut, bars, and 2D matrix)\n    if (riskSummaryContainer && !riskSummaryContainer.hasChildNodes()) {\n      risksService.getAll().then(risks => {\n        renderRiskSummary(riskSummaryContainer as HTMLElement, risks);\n      }).catch(err => console.error('Failed to load Risk Summary:', err));\n    }\n\n    // Load Golden Hours section (includes Team info)\n    if (goldenHoursSection && !goldenHoursSection.hasChildNodes()) {\n      const projectId = currentProjectId || currentProject?.id;\n      if (projectId) {\n        loadGoldenHours(goldenHoursSection as HTMLElement, projectId);\n      }\n    }\n  } catch (error) {\n    // Check if dashboard is still validating before logging error\n    if (dashboard.isConnected) {\n      console.error('Failed to load dashboard:', error);\n      if (statsGrid) {\n        statsGrid.innerHTML = '<div class=\"error-message\">Failed to load dashboard data</div>';\n      }\n    }\n  }\n}\n\n/**\n * Render health indicator\n */\n/**\n * Render health indicator\n */\nfunction renderHealthIndicator(container: HTMLElement, health: HealthData): void {\n  // Clear container\n  container.innerHTML = '';\n\n  // Handle missing or incomplete health data\n  if (!health || typeof health.status !== 'string') {\n    const wrapper = createElement('div', { className: 'health-indicator unknown' });\n\n    const gauge = createElement('div', { className: 'health-gauge' });\n    const scoreVal = createElement('span', { className: 'score-value' }, ['--']);\n    const scoreLabel = createElement('span', { className: 'score-label' }, ['Health']);\n\n    gauge.appendChild(scoreVal);\n    gauge.appendChild(scoreLabel);\n\n    const status = createElement('p', { className: 'health-status' }, ['Health data unavailable']);\n\n    wrapper.appendChild(gauge);\n    wrapper.appendChild(status);\n    container.appendChild(wrapper);\n    return;\n  }\n\n  const statusClass = health.status.toLowerCase().replace(/\\s+/g, '-');\n  const score = health.score ?? 0;\n  const color = health.color || '#888';\n  const factors = health.factors || [];\n\n  const wrapper = createElement('div', { className: `health-indicator ${statusClass}` });\n\n  // Gauge Section\n  const gauge = createElement('div', { className: 'health-gauge' });\n\n  const healthScore = createElement('div', {\n    className: 'health-score',\n    style: `--score: ${score}%`\n  });\n  healthScore.appendChild(createElement('span', { className: 'score-value' }, [String(score)]));\n  healthScore.appendChild(createElement('span', { className: 'score-label' }, ['Health']));\n\n  const healthBar = createElement('div', { className: 'health-bar' });\n  const healthFill = createElement('div', {\n    className: 'health-fill',\n    style: `--fill-width: ${score}%; --fill-color: ${color}`\n  });\n  healthBar.appendChild(healthFill);\n\n  gauge.appendChild(healthScore);\n  gauge.appendChild(healthBar);\n\n  // Status Section\n  const statusDiv = createElement('div', { className: 'health-status' });\n  const statusText = createElement('span', {\n    className: 'status-text',\n    style: `--status-color: ${color}`\n  }, [health.status]);\n  statusDiv.appendChild(statusText);\n\n  // Factors Section\n  const factorsDiv = createElement('div', { className: 'health-factors' });\n  factors.slice(0, 3).forEach(f => {\n    const factorItem = createElement('div', { className: `factor ${f.type}` });\n\n    // Use SOTA Icon for factors\n    const iconName = f.type === 'positive' ? 'check' : 'alert';\n    const icon = createIcon(iconName, { size: 14, className: 'factor-icon' });\n\n    const text = createElement('span', { className: 'factor-text' }, [f.factor]);\n\n    factorItem.appendChild(icon);\n    factorItem.appendChild(text);\n    factorsDiv.appendChild(factorItem);\n  });\n\n  wrapper.appendChild(gauge);\n  wrapper.appendChild(statusDiv);\n  wrapper.appendChild(factorsDiv);\n\n  container.appendChild(wrapper);\n}\n\n/**\n * Render stats grid\n */\nfunction renderStatsGrid(container: HTMLElement, data: DashboardData, onClick?: (statId: string) => void): void {\n  // Safe access to nested properties with defaults\n  const docs = data.documents || { total: 0, processed: 0, pending: 0 };\n  const qPriority = data.questionsByPriority || { critical: 0, high: 0, medium: 0, resolved: 0 };\n  const rImpact = data.risksByImpact || { high: 0, medium: 0, low: 0 };\n\n  const factsVerified = data.factsVerifiedCount ?? 0;\n  const stats = [\n    { id: 'facts', label: 'Facts', value: data.totalFacts ?? 0, sub: factsVerified > 0 ? `${factsVerified} verified` : undefined, icon: 'üí°' },\n    { id: 'questions', label: 'Questions', value: data.totalQuestions ?? 0, sub: `${qPriority.resolved} resolved`, icon: '‚ùì' },\n    { id: 'decisions', label: 'Decisions', value: data.totalDecisions ?? 0, icon: 'üéØ' },\n    { id: 'risks', label: 'Risks', value: data.totalRisks ?? 0, sub: `${rImpact.high} high`, icon: '‚ö†Ô∏è' },\n    { id: 'actions', label: 'Actions', value: data.totalActions ?? 0, sub: `${data.overdueActions ?? 0} overdue`, icon: '‚úÖ' },\n  ];\n\n  // Clear container\n  container.innerHTML = '';\n\n  // Render stats using DOM API (SOTA Safety)\n  stats.forEach(stat => {\n    const card = createElement('div', {\n      className: 'stat-card',\n      'data-stat-id': stat.id\n    });\n\n    // Value\n    const valueEl = createElement('div', { className: 'stat-value' }, [String(stat.value)]);\n\n    // Label\n    const labelEl = createElement('div', { className: 'stat-label' }, [stat.label]);\n\n    // Append core elements\n    card.appendChild(valueEl);\n    card.appendChild(labelEl);\n\n    // Sub-text (if any)\n    if (stat.sub) {\n      const subEl = createElement('div', { className: 'stat-sub' }, [stat.sub]);\n      card.appendChild(subEl);\n    }\n\n    // Icon (SOTA Visuals) - optional, if valid text/emoji\n    // In future this will use the Icon component (Phase 15.3)\n\n    // Click handler\n    if (onClick) {\n      card.classList.add('clickable');\n      card.addEventListener('click', () => onClick(stat.id));\n    }\n\n    container.appendChild(card);\n  });\n}\n\n/**\n * Render alerts\n */\n/**\n * Render alerts\n */\nfunction renderAlerts(container: HTMLElement, alerts: Alert[], onClick?: (alert: Alert) => void): void {\n  container.innerHTML = '';\n\n  const header = createElement('div', { className: 'alerts-header' });\n  header.appendChild(createElement('h3', {}, ['Alerts']));\n  header.appendChild(createElement('span', { className: 'alerts-count' }, [String(alerts.length)]));\n  container.appendChild(header);\n\n  const list = createElement('div', { className: 'alerts-list' });\n\n  alerts.slice(0, 5).forEach((alert, i) => {\n    const item = createElement('div', {\n      className: `alert-item ${alert.severity}`,\n      'data-alert-index': String(i)\n    });\n\n    const iconSpan = createElement('span', { className: 'alert-icon' }, [getAlertIcon(alert.severity)]);\n\n    const content = createElement('div', { className: 'alert-content' });\n    content.appendChild(createElement('div', { className: 'alert-title' }, [alert.title]));\n    content.appendChild(createElement('div', { className: 'alert-message' }, [alert.message]));\n\n    item.appendChild(iconSpan);\n    item.appendChild(content);\n\n    if (onClick) {\n      item.addEventListener('click', () => onClick(alert));\n    }\n\n    list.appendChild(item);\n  });\n\n  container.appendChild(list);\n}\n\n/**\n * Render insights\n */\n/**\n * Render insights\n */\nfunction renderInsights(container: HTMLElement, insights: Insight[], onAction?: (insight: Insight) => void): void {\n  container.innerHTML = '';\n\n  insights.slice(0, 4).forEach((insight, i) => {\n    const item = createElement('div', {\n      className: `insight-item ${insight.type}`,\n      'data-insight-index': String(i)\n    });\n\n    // Use insight.icon directly as text/emoji for now, as it comes from API\n    // Future: map insight types to SOTA Icons\n    const iconSpan = createElement('span', { className: 'insight-icon' }, [insight.icon]);\n\n    const content = createElement('div', { className: 'insight-content' });\n    content.appendChild(createElement('div', { className: 'insight-title' }, [insight.title]));\n    content.appendChild(createElement('div', { className: 'insight-message' }, [insight.message]));\n\n    item.appendChild(iconSpan);\n    item.appendChild(content);\n\n    // TODO: Add click handler if onAction is provided\n\n    container.appendChild(item);\n  });\n}\n\n/**\n * Render Risk Summary Chart (compact donut + bars)\n */\n/**\n * Render Risk Summary Chart (compact donut + bars)\n */\nfunction renderRiskSummary(container: HTMLElement, risks: Array<{ impact?: string; likelihood?: string; status?: string }>): void {\n  // Count risks by severity\n  const getSeverity = (impact?: string, likelihood?: string): string => {\n    const impactLevel = ['low', 'medium', 'high', 'critical'].indexOf(impact?.toLowerCase() || 'low');\n    const likelihoodLevel = ['low', 'medium', 'high'].indexOf(likelihood?.toLowerCase() || 'low');\n    const score = impactLevel + likelihoodLevel;\n    if (score >= 4) return 'critical';\n    if (score >= 3) return 'high';\n    if (score >= 2) return 'medium';\n    return 'low';\n  };\n\n  const activeRisks = risks.filter(r => r.status !== 'mitigated' && r.status !== 'closed');\n  const counts = { critical: 0, high: 0, medium: 0, low: 0 };\n\n  activeRisks.forEach(risk => {\n    const severity = getSeverity(risk.impact, risk.likelihood);\n    counts[severity as keyof typeof counts]++;\n  });\n\n  const total = activeRisks.length;\n  const mitigated = risks.length - activeRisks.length;\n\n  // Calculate percentages for donut\n  const getPercent = (count: number) => total > 0 ? Math.round((count / total) * 100) : 0;\n\n  // Create conic gradient for donut\n  let conicStops = '';\n  let currentDeg = 0;\n\n  const colors = {\n    critical: '#ef4444',\n    high: '#f97316',\n    medium: '#eab308',\n    low: '#22c55e'\n  };\n\n  (['critical', 'high', 'medium', 'low'] as const).forEach(level => {\n    const percent = getPercent(counts[level]);\n    const degrees = (percent / 100) * 360;\n    if (degrees > 0) {\n      conicStops += `${colors[level]} ${currentDeg}deg ${currentDeg + degrees}deg, `;\n      currentDeg += degrees;\n    }\n  });\n\n  // Default to gray if no risks\n  if (!conicStops) {\n    conicStops = 'var(--color-border) 0deg 360deg';\n  } else {\n    conicStops = conicStops.slice(0, -2); // Remove trailing comma\n  }\n\n  // Clear container\n  container.innerHTML = '';\n\n  const summary = createElement('div', { className: 'risk-summary' });\n\n  // Header\n  const header = createElement('div', { className: 'risk-summary-header' });\n  header.appendChild(createElement('h4', {}, ['Risk Overview']));\n  header.appendChild(createElement('span', { className: 'risk-total' }, [`${total} active`]));\n  summary.appendChild(header);\n\n  // Content\n  const content = createElement('div', { className: 'risk-summary-content' });\n\n  // Donut Container\n  const donutContainer = createElement('div', { className: 'risk-donut-container' });\n  const donut = createElement('div', {\n    className: 'risk-donut',\n    style: `--donut-conic: conic-gradient(${conicStops})`\n  });\n\n  const center = createElement('div', { className: 'risk-donut-center' });\n  center.appendChild(createElement('span', { className: 'donut-value' }, [String(total)]));\n  center.appendChild(createElement('span', { className: 'donut-label' }, ['Risks']));\n\n  donut.appendChild(center);\n  donutContainer.appendChild(donut);\n  content.appendChild(donutContainer);\n\n  // Bars container\n  const barsDiv = createElement('div', { className: 'risk-bars' });\n  const levels = [\n    { id: 'critical', icon: 'üî¥', label: 'Critical' },\n    { id: 'high', icon: 'üü†', label: 'High' },\n    { id: 'medium', icon: 'üü°', label: 'Medium' },\n    { id: 'low', icon: 'üü¢', label: 'Low' }\n  ] as const;\n\n  levels.forEach(level => {\n    const count = counts[level.id];\n    const item = createElement('div', { className: `risk-bar-item ${level.id}` });\n\n    item.appendChild(createElement('span', { className: 'bar-icon' }, [level.icon]));\n    item.appendChild(createElement('span', { className: 'bar-label' }, [level.label]));\n\n    const track = createElement('div', { className: 'bar-track' });\n    track.appendChild(createElement('div', {\n      className: 'bar-fill',\n      style: `--bar-width: ${getPercent(count)}%`\n    }));\n    item.appendChild(track);\n\n    item.appendChild(createElement('span', { className: 'bar-count' }, [String(count)]));\n\n    barsDiv.appendChild(item);\n  });\n\n  content.appendChild(barsDiv);\n  summary.appendChild(content);\n\n  // Mitigated section\n  if (mitigated > 0) {\n    const mitigatedDiv = createElement('div', { className: 'risk-mitigated' });\n    mitigatedDiv.appendChild(createElement('span', { className: 'mitigated-icon' }, ['‚úì']));\n    mitigatedDiv.appendChild(createElement('span', {}, [`${mitigated} risk${mitigated !== 1 ? 's' : ''} mitigated`]));\n    summary.appendChild(mitigatedDiv);\n  }\n\n  container.appendChild(summary);\n}\n\n/**\n * Render facts by category chart\n */\n/**\n * Render facts by category chart\n */\nfunction renderFactsChart(data: DashboardData): void {\n  const container = document.getElementById('facts-chart');\n  if (!container) return;\n\n  // Clear container\n  container.innerHTML = '';\n\n  const byCat = data.factsByCategory || {};\n  const categories = ['technical', 'process', 'policy', 'people', 'timeline', 'general'] as const;\n  const total = categories.reduce((sum, c) => sum + (byCat[c] ?? 0), 0);\n\n  if (total === 0) {\n    container.appendChild(createElement('div', { className: 'empty-chart' }, ['No facts yet']));\n    return;\n  }\n\n  container.appendChild(createElement('div', { className: 'facts-chart-title' }, ['Facts by category']));\n\n  const barsContainer = createElement('div', { className: 'priority-bars' });\n\n  categories.forEach(cat => {\n    const count = byCat[cat] ?? 0;\n    const pct = total > 0 ? (count / total) * 100 : 0;\n\n    const bar = createElement('div', { className: 'priority-bar' });\n\n    bar.appendChild(createElement('div', { className: 'bar-label' }, [cat]));\n\n    const track = createElement('div', { className: 'bar-track' });\n    const fill = createElement('div', {\n      className: 'bar-fill',\n      style: `--bar-width: ${pct}%`\n    });\n    track.appendChild(fill);\n    bar.appendChild(track);\n\n    bar.appendChild(createElement('div', { className: 'bar-value' }, [String(count)]));\n\n    barsContainer.appendChild(bar);\n  });\n\n  container.appendChild(barsContainer);\n}\n\n/**\n * Render questions by priority chart\n */\n/**\n * Render questions by priority chart\n */\nfunction renderQuestionsPriorityChart(data: DashboardData): void {\n  const container = document.getElementById('questions-chart');\n  if (!container) return;\n\n  // Clear container\n  container.innerHTML = '';\n\n  const { critical, high, medium, resolved } = data.questionsByPriority || { critical: 0, high: 0, medium: 0, resolved: 0 };\n  const total = critical + high + medium + resolved;\n\n  if (total === 0) {\n    container.appendChild(createElement('div', { className: 'empty-chart' }, ['No questions yet']));\n    return;\n  }\n\n  const barsContainer = createElement('div', { className: 'priority-bars' });\n\n  const priorities = [\n    { label: 'Critical', value: critical, class: 'critical' },\n    { label: 'High', value: high, class: 'high' },\n    { label: 'Medium', value: medium, class: 'medium' },\n    { label: 'Resolved', value: resolved, class: 'resolved' }\n  ];\n\n  priorities.forEach(p => {\n    const bar = createElement('div', { className: 'priority-bar' });\n\n    bar.appendChild(createElement('div', { className: 'bar-label' }, [p.label]));\n\n    const track = createElement('div', { className: 'bar-track' });\n    const fill = createElement('div', {\n      className: `bar-fill ${p.class}`,\n      style: `--bar-width: ${(total > 0 ? (p.value / total) * 100 : 0)}%`\n    });\n    track.appendChild(fill);\n    bar.appendChild(track);\n\n    bar.appendChild(createElement('div', { className: 'bar-value' }, [String(p.value)]));\n\n    barsContainer.appendChild(bar);\n  });\n\n  container.appendChild(barsContainer);\n}\n\n/**\n * Render weekly trends chart with real API data\n */\n/**\n * Render weekly trends chart with real API data\n */\nasync function renderWeeklyTrendsChart(data: DashboardData): Promise<void> {\n  const container = document.getElementById('trends-chart');\n  if (!container) return;\n\n  // Show loading state\n  container.innerHTML = '';\n  container.appendChild(createElement('div', { className: 'loading' }, ['Loading trends...']));\n\n  try {\n    // Fetch real trends data from API\n    const trendsData = await dashboardService.getTrends(7);\n\n    container.innerHTML = '';\n\n    if (!trendsData || !trendsData.history || trendsData.history.length === 0) {\n      container.appendChild(createElement('div', { className: 'empty-chart' }, ['No trend data available yet']));\n      return;\n    }\n\n    // Use real history data\n    const history = trendsData.history;\n\n    // Build arrays from history\n    const days: string[] = [];\n    const trends = {\n      facts: [] as number[],\n      questions: [] as number[],\n      risks: [] as number[],\n      actions: [] as number[],\n    };\n\n    history.forEach(entry => {\n      const d = new Date(entry.date);\n      days.push(d.toLocaleDateString(undefined, { weekday: 'short' }));\n      trends.facts.push(entry.facts || 0);\n      trends.questions.push(entry.questions || 0);\n      trends.risks.push(entry.risks || 0);\n      trends.actions.push(entry.actions || 0);\n    });\n\n    const maxValue = Math.max(\n      ...trends.facts,\n      ...trends.questions,\n      ...trends.risks,\n      ...trends.actions,\n      1\n    );\n\n    const chart = createElement('div', { className: 'trends-chart' });\n\n    // Legend\n    const legend = createElement('div', { className: 'trends-legend' });\n    const items = [\n      { cls: 'facts', label: 'Facts' },\n      { cls: 'questions', label: 'Questions' },\n      { cls: 'risks', label: 'Risks' },\n      { cls: 'actions', label: 'Actions' }\n    ];\n\n    items.forEach(item => {\n      const span = createElement('span', { className: 'legend-item' });\n      span.appendChild(createElement('span', { className: `legend-dot ${item.cls}` }));\n      span.appendChild(document.createTextNode(item.label));\n      legend.appendChild(span);\n    });\n    chart.appendChild(legend);\n\n    // Bars\n    const barsContainer = createElement('div', { className: 'trends-bars' });\n\n    days.forEach((day, i) => {\n      const col = createElement('div', { className: 'trend-column' });\n\n      const group = createElement('div', { className: 'trend-bars-group' });\n\n      const barData = [\n        { cls: 'facts', val: trends.facts[i] },\n        { cls: 'questions', val: trends.questions[i] },\n        { cls: 'risks', val: trends.risks[i] },\n        { cls: 'actions', val: trends.actions[i] }\n      ];\n\n      barData.forEach(d => {\n        const bar = createElement('div', {\n          className: `trend-bar ${d.cls}`,\n          style: `--trend-height: ${(d.val / maxValue) * 100}%`,\n          title: `${d.cls.charAt(0).toUpperCase() + d.cls.slice(1)}: ${d.val}`\n        });\n        group.appendChild(bar);\n      });\n\n      col.appendChild(group);\n      col.appendChild(createElement('div', { className: 'trend-label' }, [day]));\n\n      barsContainer.appendChild(col);\n    });\n\n    chart.appendChild(barsContainer);\n    container.appendChild(chart);\n\n  } catch (error) {\n    console.error('Failed to load trends:', error);\n    container.innerHTML = '';\n    container.appendChild(createElement('div', { className: 'error' }, ['Failed to load trend data']));\n  }\n}\n\n/**\n * Render overdue actions alert\n */\nfunction renderOverdueActionsAlert(container: HTMLElement, overdueCount: number): void {\n  if (overdueCount === 0) {\n    container.innerHTML = '';\n    return;\n  }\n\n  container.innerHTML = `\n    <div class=\"overdue-alert\">\n      <div class=\"overdue-icon\">‚ö†Ô∏è</div>\n      <div class=\"overdue-content\">\n        <strong>${overdueCount} Overdue Action${overdueCount !== 1 ? 's' : ''}</strong>\n        <span>Action items past their due date require immediate attention</span>\n      </div>\n      <button class=\"btn btn-sm btn-warning\" id=\"view-overdue-btn\">View Actions</button>\n    </div>\n  `;\n\n  // Bind view button\n  const viewBtn = container.querySelector('#view-overdue-btn');\n  if (viewBtn) {\n    viewBtn.addEventListener('click', () => {\n      // Navigate to actions tab with overdue filter\n      window.dispatchEvent(new CustomEvent('godmode:navigate', {\n        detail: { tab: 'sot', view: 'actions', filter: 'overdue' }\n      }));\n    });\n  }\n}\n\n/**\n * Get alert icon based on severity\n */\nfunction getAlertIcon(severity: string): string {\n  switch (severity) {\n    case 'critical': return 'üî¥';\n    case 'high': return 'üü†';\n    case 'warning': return 'üü°';\n    default: return '‚ö™';\n  }\n}\n\n/**\n * Create a stat card element\n */\nfunction createStatCard(\n  config: {\n    id: string;\n    label: string;\n    icon: string;\n    getValue: (s: DashboardStats) => string | number;\n    subValue?: (s: DashboardStats) => string;\n    isScore?: boolean;\n  },\n  onClick?: (statId: string) => void\n): HTMLElement {\n  const card = createElement('div', {\n    className: `stat-item ${onClick ? 'clickable' : ''}`,\n  });\n  card.setAttribute('data-stat-id', config.id);\n\n  if (onClick) {\n    on(card, 'click', () => onClick(config.id));\n  }\n\n  card.innerHTML = `\n    <div class=\"stat-icon\">${config.icon}</div>\n    <div class=\"value\" data-value>-</div>\n    <div class=\"label\">${config.label}</div>\n    ${config.subValue ? '<div class=\"sub-value\" data-sub-value></div>' : ''}\n  `;\n\n  return card;\n}\n\n/**\n * Update dashboard with current data\n */\nfunction updateDashboard(\n  statsGrid: HTMLElement,\n  statConfigs: Array<{\n    id: string;\n    getValue: (s: DashboardStats) => string | number;\n    subValue?: (s: DashboardStats) => string;\n    isScore?: boolean;\n  }>\n): void {\n  const data = dataStore.getState();\n\n  // Only count active questions (not dismissed/resolved/closed)\n  const activeQuestions = data.questions.filter(q =>\n    q.status !== 'dismissed' && q.status !== 'resolved' && q.status !== 'closed' && q.status !== 'answered'\n  );\n\n  const stats: DashboardStats = {\n    totalQuestions: activeQuestions.length,\n    answeredQuestions: data.questions.filter(q => q.status === 'answered' || q.status === 'resolved').length,\n    totalRisks: data.risks.length,\n    highPriorityRisks: data.risks.filter(r => r.impact === 'high').length,\n    totalActions: data.actions.length,\n    completedActions: data.actions.filter(a => a.status === 'completed').length,\n    totalDecisions: data.decisions.length,\n    totalContacts: data.contacts.length,\n    healthScore: calculateHealthScore(data),\n  };\n\n  statConfigs.forEach(config => {\n    const card = statsGrid.querySelector(`[data-stat-id=\"${config.id}\"]`);\n    if (!card) return;\n\n    const valueEl = card.querySelector('[data-value]');\n    const subValueEl = card.querySelector('[data-sub-value]');\n\n    if (valueEl) {\n      const value = config.getValue(stats);\n      valueEl.textContent = typeof value === 'number' ? formatNumber(value) : value;\n\n      // Add color for health score\n      if (config.isScore && typeof value === 'number') {\n        valueEl.className = 'value ' + getHealthClass(value);\n      }\n    }\n\n    if (subValueEl && config.subValue) {\n      subValueEl.textContent = config.subValue(stats);\n    }\n  });\n}\n\n/**\n * Calculate health score from data\n */\nfunction calculateHealthScore(data: ReturnType<typeof dataStore.getState>): number {\n  const weights = {\n    questionsAnswered: 25,\n    risksManaged: 25,\n    actionsCompleted: 25,\n    decisionsProgress: 25,\n  };\n\n  let score = 0;\n\n  // Questions answered\n  if (data.questions.length > 0) {\n    const answered = data.questions.filter(q => q.status === 'answered').length;\n    score += (answered / data.questions.length) * weights.questionsAnswered;\n  } else {\n    score += weights.questionsAnswered;\n  }\n\n  // Risks managed\n  if (data.risks.length > 0) {\n    const managed = data.risks.filter(r => r.status !== 'open').length;\n    score += (managed / data.risks.length) * weights.risksManaged;\n  } else {\n    score += weights.risksManaged;\n  }\n\n  // Actions completed\n  if (data.actions.length > 0) {\n    const completed = data.actions.filter(a => a.status === 'completed').length;\n    score += (completed / data.actions.length) * weights.actionsCompleted;\n  } else {\n    score += weights.actionsCompleted;\n  }\n\n  // Decisions made\n  if (data.decisions.length > 0) {\n    const approved = data.decisions.filter(d => d.status === 'approved').length;\n    score += (approved / data.decisions.length) * weights.decisionsProgress;\n  } else {\n    score += weights.decisionsProgress;\n  }\n\n  return Math.round(score);\n}\n\n/**\n * Get CSS class for health score\n */\nfunction getHealthClass(score: number): string {\n  if (score >= 80) return 'excellent';\n  if (score >= 60) return 'good';\n  if (score >= 40) return 'warning';\n  return 'critical';\n}\n\n/**\n * Load and render project team section\n */\nasync function loadProjectTeam(container: HTMLElement, projectId: string): Promise<void> {\n  try {\n    const response = await http.get<{ members: ProjectMember[] }>(`/api/projects/${projectId}/members`);\n    const members = response.data?.members || [];\n\n    if (members.length === 0) {\n      container.innerHTML = '';\n      return;\n    }\n\n    container.innerHTML = `\n      <style>\n        .team-section {\n          background: var(--bg-primary);\n          border-radius: 16px;\n          padding: 24px;\n          border: 1px solid var(--border-color);\n        }\n        \n        .team-section-header {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          margin-bottom: 20px;\n        }\n        \n        .team-section-header h3 {\n          margin: 0;\n          font-size: 18px;\n          font-weight: 600;\n          color: var(--text-primary);\n          display: flex;\n          align-items: center;\n          gap: 10px;\n        }\n        \n        .team-section-header h3 svg {\n          color: #e11d48;\n        }\n        \n        .team-section-header .member-count {\n          background: linear-gradient(135deg, #e11d48, #be123c);\n          color: white;\n          padding: 4px 10px;\n          border-radius: 20px;\n          font-size: 12px;\n          font-weight: 600;\n        }\n        \n        .team-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n          gap: 16px;\n        }\n        \n        .team-member-card {\n          background: linear-gradient(135deg, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0.4) 100%);\n          border: 1px solid var(--border-color);\n          border-radius: 12px;\n          padding: 16px;\n          display: flex;\n          align-items: center;\n          gap: 14px;\n          transition: all 0.2s ease;\n        }\n        \n        [data-theme=\"dark\"] .team-member-card {\n          background: linear-gradient(135deg, rgba(30,41,59,0.8) 0%, rgba(30,41,59,0.4) 100%);\n        }\n        \n        .team-member-card:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 8px 24px rgba(0,0,0,0.08);\n          border-color: rgba(225,29,72,0.3);\n        }\n        \n        .team-member-avatar {\n          width: 52px;\n          height: 52px;\n          border-radius: 50%;\n          background: linear-gradient(135deg, #e11d48, #be123c);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-weight: 600;\n          font-size: 18px;\n          color: white;\n          flex-shrink: 0;\n          overflow: hidden;\n        }\n        \n        .team-member-avatar img {\n          width: 100%;\n          height: 100%;\n          object-fit: cover;\n        }\n        \n        .team-member-avatar.owner {\n          background: linear-gradient(135deg, #f59e0b, #d97706);\n        }\n        \n        .team-member-info {\n          flex: 1;\n          min-width: 0;\n        }\n        \n        .team-member-info h4 {\n          margin: 0 0 4px 0;\n          font-size: 15px;\n          font-weight: 600;\n          color: var(--text-primary);\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n        \n        .team-member-info .role-badge {\n          display: inline-flex;\n          align-items: center;\n          gap: 4px;\n          padding: 3px 8px;\n          border-radius: 6px;\n          font-size: 11px;\n          font-weight: 600;\n          background: rgba(225,29,72,0.1);\n          color: #e11d48;\n          margin-bottom: 4px;\n        }\n        \n        .team-member-info .role-badge.owner {\n          background: rgba(245,158,11,0.15);\n          color: #d97706;\n        }\n        \n        .team-member-info .role-badge.admin {\n          background: rgba(59,130,246,0.1);\n          color: #3b82f6;\n        }\n        \n        .team-member-info .user-role {\n          font-size: 13px;\n          color: var(--text-secondary);\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n        \n        .team-member-info .linked-contact {\n          font-size: 11px;\n          color: #e11d48;\n          display: flex;\n          align-items: center;\n          gap: 4px;\n          margin-top: 4px;\n        }\n        \n        .team-member-info .linked-contact svg {\n          width: 12px;\n          height: 12px;\n        }\n      </style>\n      \n      <div class=\"team-section\">\n        <div class=\"team-section-header\">\n          <h3>\n            <svg width=\"22\" height=\"22\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\"/>\n            </svg>\n            Project Team\n          </h3>\n          <span class=\"member-count\">${members.length} member${members.length !== 1 ? 's' : ''}</span>\n        </div>\n        \n        <div class=\"team-grid\">\n          ${members.map(member => {\n      const isOwner = member.role === 'owner';\n      const isAdmin = member.role === 'admin';\n      const initials = getInitials(member.display_name || member.username || member.email || '?');\n      // Use linked contact avatar if member doesn't have one\n      const avatarUrl = member.avatar_url || member.linked_contact?.avatar_url || member.linked_contact?.photo_url;\n\n      return `\n              <div class=\"team-member-card\">\n                <div class=\"team-member-avatar ${isOwner ? 'owner' : ''}\">\n                  ${avatarUrl\n          ? `<img src=\"${escapeHtml(avatarUrl)}\" alt=\"${escapeHtml(member.display_name || '')}\">`\n          : initials\n        }\n                </div>\n                <div class=\"team-member-info\">\n                  <h4>${escapeHtml(member.display_name || member.username || member.email || 'Unknown')}</h4>\n                  <span class=\"role-badge ${isOwner ? 'owner' : isAdmin ? 'admin' : ''}\">\n                    ${isOwner ? 'üëë Owner' : isAdmin ? 'Admin' : member.role === 'write' ? 'Write' : 'Read'}\n                  </span>\n                  ${member.user_role ? `<div class=\"user-role\">${escapeHtml(member.user_role)}</div>` : ''}\n                  ${member.linked_contact ? `\n                    <div class=\"linked-contact\">\n                      <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1\"/>\n                      </svg>\n                      ${escapeHtml(member.linked_contact.name)}\n                    </div>\n                  ` : ''}\n                </div>\n              </div>\n            `;\n    }).join('')}\n        </div>\n      </div>\n    `;\n  } catch (error) {\n    console.error('Failed to load project team:', error);\n  }\n}\n\n// Types for team section\ninterface ProjectMember {\n  user_id: string;\n  role: string;\n  user_role?: string;\n  user_role_prompt?: string;\n  linked_contact_id?: string;\n  linked_contact?: {\n    id: string;\n    name: string;\n    email?: string;\n    organization?: string;\n    avatar_url?: string;\n    photo_url?: string;\n    timezone?: string;\n  };\n  username?: string;\n  display_name?: string;\n  avatar_url?: string;\n  email?: string;\n  timezone?: string;\n}\n\ninterface TimezoneEntry {\n  name: string;\n  timezone: string;\n  type: 'member' | 'contact';\n  avatarUrl?: string;\n  localTime?: string;\n  localHour?: number;\n  isOnline?: boolean;\n  role?: string;\n  linkedContactId?: string; // For deduplication\n  contactId?: string; // For contacts\n}\n\n/**\n * Get local time info for a timezone\n */\nfunction getLocalTimeInfo(timezone: string): { localTime: string; localHour: number; isOnline: boolean } {\n  try {\n    const now = new Date();\n    const formatter = new Intl.DateTimeFormat('en-GB', {\n      timeZone: timezone,\n      hour: '2-digit',\n      minute: '2-digit',\n      hour12: false,\n    });\n    const localTime = formatter.format(now);\n    const localHour = parseInt(localTime.split(':')[0], 10);\n    // Consider online if between 8:00 and 18:00\n    const isOnline = localHour >= 8 && localHour < 18;\n    return { localTime, localHour, isOnline };\n  } catch {\n    return { localTime: '--:--', localHour: 12, isOnline: false };\n  }\n}\n\n/**\n * Find best meeting times for all participants\n */\nfunction findBestMeetingTimes(entries: TimezoneEntry[]): { time: string; score: number; available: number }[] {\n  if (entries.length === 0) return [];\n\n  const suggestions: { time: string; score: number; available: number }[] = [];\n  const now = new Date();\n\n  // Check each hour of the day\n  for (let hour = 0; hour < 24; hour++) {\n    let available = 0;\n    let totalScore = 0;\n\n    for (const entry of entries) {\n      try {\n        const formatter = new Intl.DateTimeFormat('en-US', {\n          timeZone: entry.timezone,\n          hour: 'numeric',\n          hour12: false,\n        });\n        const localHour = parseInt(formatter.format(now), 10);\n        const utcHour = now.getUTCHours();\n        let offset = localHour - utcHour;\n        if (offset > 12) offset -= 24;\n        if (offset < -12) offset += 24;\n\n        // What hour would it be for this person?\n        const theirHour = (hour + offset + 24) % 24;\n\n        // Score based on how \"comfortable\" the hour is\n        if (theirHour >= 9 && theirHour <= 17) {\n          available++;\n          // Peak hours (10-12, 14-16) get higher score\n          if (theirHour >= 10 && theirHour <= 12) totalScore += 10;\n          else if (theirHour >= 14 && theirHour <= 16) totalScore += 10;\n          else totalScore += 7;\n        } else if (theirHour >= 8 && theirHour <= 18) {\n          available++;\n          totalScore += 4;\n        }\n      } catch { /* ignore */ }\n    }\n\n    if (available > 0) {\n      suggestions.push({\n        time: `${hour.toString().padStart(2, '0')}:00 UTC`,\n        score: totalScore,\n        available,\n      });\n    }\n  }\n\n  // Sort by number available (desc), then by score (desc)\n  suggestions.sort((a, b) => {\n    if (b.available !== a.available) return b.available - a.available;\n    return b.score - a.score;\n  });\n\n  return suggestions.slice(0, 3); // Top 3 suggestions\n}\n\n/**\n * Load Golden Hours section\n * Shows working hours overlap for team members and contacts\n */\nasync function loadGoldenHours(container: HTMLElement, projectId: string): Promise<void> {\n  try {\n    // Fetch team members and contacts in parallel\n    const [membersRes, contactsRes] = await Promise.all([\n      http.get<{ members: ProjectMember[] }>(`/api/projects/${projectId}/members`).catch(() => ({ data: { members: [] } })),\n      http.get<{ contacts: { name: string; timezone?: string; avatarUrl?: string; photoUrl?: string; photo_url?: string; avatar_url?: string }[] }>('/api/contacts').catch(() => ({ data: { contacts: [] } })),\n    ]);\n\n    const members = membersRes.data?.members || [];\n    const contacts = contactsRes.data?.contacts || [];\n\n    // Extract timezone entries - use linked contact data if member doesn't have one\n    // Also track linked_contact_id for deduplication\n    const linkedContactIds = new Set<string>();\n\n    const memberEntries = members\n      .map(m => {\n        // Check if member has linked contact with timezone and role\n        const linkedContact = m.linked_contact as { id?: string; timezone?: string; avatar_url?: string; photo_url?: string; role?: string } | undefined;\n        const tz = m.timezone || linkedContact?.timezone;\n        if (!tz) return null;\n\n        const timeInfo = getLocalTimeInfo(tz);\n        // Use linked contact avatar if member doesn't have one\n        const avatarUrl = m.avatar_url || linkedContact?.avatar_url || linkedContact?.photo_url;\n        // Use user_role or linked contact role\n        const role = m.user_role || linkedContact?.role || (m.role === 'owner' ? 'Owner' : m.role === 'admin' ? 'Admin' : undefined);\n\n        // Track linked contact id for deduplication\n        const linkedContactId = m.linked_contact_id || linkedContact?.id;\n        if (linkedContactId) {\n          linkedContactIds.add(linkedContactId);\n        }\n\n        return {\n          name: m.display_name || m.username || m.email || 'Unknown',\n          timezone: tz,\n          type: 'member' as const,\n          avatarUrl,\n          role,\n          linkedContactId,\n          ...timeInfo,\n        } as TimezoneEntry;\n      })\n      .filter((m): m is TimezoneEntry => m !== null);\n\n    const contactEntries: TimezoneEntry[] = contacts\n      .filter(c => c.timezone)\n      .map(c => {\n        const timeInfo = getLocalTimeInfo(c.timezone || 'UTC');\n        const contactId = (c as { id?: string }).id;\n        return {\n          name: c.name,\n          timezone: c.timezone || 'UTC',\n          type: 'contact' as const,\n          avatarUrl: c.avatarUrl || c.photoUrl || c.photo_url || c.avatar_url,\n          role: (c as { role?: string }).role,\n          contactId,\n          ...timeInfo,\n        };\n      });\n\n    // If no timezone data, don't show the section\n    if (memberEntries.length === 0 && contactEntries.length === 0) {\n      container.innerHTML = '';\n      return;\n    }\n\n    // Calculate golden hours for each group\n    const memberGolden = calculateGoldenHours(memberEntries);\n    const contactGolden = calculateGoldenHours(contactEntries);\n\n    // For combined view, deduplicate: remove contacts that are already represented by team members\n    const deduplicatedContactEntries = contactEntries.filter(c => !c.contactId || !linkedContactIds.has(c.contactId));\n    const allEntries = [...memberEntries, ...deduplicatedContactEntries];\n    const allGolden = calculateGoldenHours(allEntries);\n\n    // Find best meeting times\n    const meetingSuggestions = findBestMeetingTimes(allEntries);\n\n    // Count online people\n    const onlineMembers = memberEntries.filter(m => m.isOnline).length;\n    const onlineContacts = contactEntries.filter(c => c.isOnline).length;\n    const onlineDeduplicatedContacts = deduplicatedContactEntries.filter(c => c.isOnline).length;\n    const onlineAll = onlineMembers + onlineDeduplicatedContacts;\n\n    container.innerHTML = `\n      <style>\n        .golden-hours-section {\n          background: var(--bg-primary);\n          border-radius: 16px;\n          padding: 24px;\n          border: 1px solid var(--border-color);\n          margin-bottom: 24px;\n        }\n        \n        .golden-hours-header {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          margin-bottom: 24px;\n        }\n        \n        .golden-hours-header h3 {\n          margin: 0;\n          font-size: 18px;\n          font-weight: 600;\n          color: var(--text-primary);\n          display: flex;\n          align-items: center;\n          gap: 10px;\n        }\n        \n        .golden-hours-header h3 svg {\n          color: #f59e0b;\n        }\n        \n        .golden-hours-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));\n          gap: 20px;\n        }\n        \n        .golden-card {\n          background: linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(248,250,252,0.9) 100%);\n          border: 1px solid var(--border-color);\n          border-radius: 12px;\n          padding: 20px;\n        }\n        \n        [data-theme=\"dark\"] .golden-card {\n          background: linear-gradient(135deg, rgba(30,41,59,0.9) 0%, rgba(30,41,59,0.6) 100%);\n        }\n        \n        .golden-card h4 {\n          margin: 0 0 16px 0;\n          font-size: 14px;\n          font-weight: 600;\n          color: var(--text-secondary);\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n        \n        .golden-card h4 .count {\n          background: var(--bg-secondary);\n          padding: 2px 8px;\n          border-radius: 10px;\n          font-size: 12px;\n        }\n        \n        .timezone-bars {\n          display: flex;\n          flex-direction: column;\n          gap: 8px;\n          margin-bottom: 16px;\n        }\n        \n        .timezone-row {\n          display: flex;\n          align-items: center;\n          gap: 10px;\n        }\n        \n        .tz-name {\n          width: 100px;\n          font-size: 12px;\n          color: var(--text-secondary);\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n        \n        .tz-bar-container {\n          flex: 1;\n          height: 24px;\n          background: var(--bg-secondary);\n          border-radius: 4px;\n          position: relative;\n          overflow: hidden;\n        }\n        \n        .tz-bar {\n          position: absolute;\n          height: 100%;\n          border-radius: 2px;\n        }\n        \n        .tz-bar.work-hours {\n          background: linear-gradient(90deg, #10b981, #34d399);\n          opacity: 0.6;\n        }\n        \n        .tz-bar.golden {\n          background: linear-gradient(90deg, #f59e0b, #fbbf24);\n          opacity: 0.9;\n        }\n        \n        .hour-labels {\n          display: flex;\n          justify-content: space-between;\n          padding: 0 110px 0 0;\n          margin-bottom: 4px;\n        }\n        \n        .hour-label {\n          font-size: 10px;\n          color: var(--text-muted);\n          width: 20px;\n          text-align: center;\n        }\n        \n        .golden-summary {\n          display: flex;\n          align-items: center;\n          gap: 12px;\n          padding: 12px;\n          background: linear-gradient(135deg, rgba(245,158,11,0.1) 0%, rgba(251,191,36,0.05) 100%);\n          border-radius: 8px;\n          border: 1px solid rgba(245,158,11,0.2);\n        }\n        \n        .golden-icon {\n          width: 40px;\n          height: 40px;\n          background: linear-gradient(135deg, #f59e0b, #d97706);\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-size: 18px;\n        }\n        \n        .golden-text {\n          flex: 1;\n        }\n        \n        .golden-text .label {\n          font-size: 12px;\n          color: var(--text-secondary);\n        }\n        \n        .golden-text .hours {\n          font-size: 16px;\n          font-weight: 700;\n          color: #d97706;\n        }\n        \n        .no-overlap {\n          color: var(--text-muted);\n          font-size: 13px;\n          font-style: italic;\n        }\n        \n        .participants-row {\n          display: flex;\n          align-items: center;\n          gap: 4px;\n          margin-top: 12px;\n        }\n        \n        .participant-avatar {\n          width: 24px;\n          height: 24px;\n          border-radius: 50%;\n          background: linear-gradient(135deg, #667eea, #764ba2);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-size: 10px;\n          font-weight: 600;\n          border: 2px solid var(--bg-primary);\n          margin-left: -8px;\n        }\n        \n        .participant-avatar:first-child {\n          margin-left: 0;\n        }\n        \n        .participant-avatar img {\n          width: 100%;\n          height: 100%;\n          border-radius: 50%;\n          object-fit: cover;\n        }\n        \n        .participant-avatar.more {\n          background: var(--bg-secondary);\n          color: var(--text-secondary);\n        }\n        \n        .online-status-bar {\n          display: flex;\n          align-items: center;\n          gap: 16px;\n          padding: 16px;\n          background: linear-gradient(135deg, rgba(16,185,129,0.1) 0%, rgba(52,211,153,0.05) 100%);\n          border-radius: 12px;\n          border: 1px solid rgba(16,185,129,0.2);\n          margin-bottom: 20px;\n        }\n        \n        .online-indicator {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n        \n        .online-dot {\n          width: 10px;\n          height: 10px;\n          border-radius: 50%;\n          background: #10b981;\n          box-shadow: 0 0 8px rgba(16,185,129,0.6);\n          animation: pulse 2s infinite;\n        }\n        \n        @keyframes pulse {\n          0%, 100% { transform: scale(1); opacity: 1; }\n          50% { transform: scale(1.2); opacity: 0.7; }\n        }\n        \n        .online-count {\n          font-size: 14px;\n          font-weight: 600;\n          color: #059669;\n        }\n        \n        .people-list {\n          display: flex;\n          flex-wrap: wrap;\n          gap: 12px;\n          margin-top: 16px;\n        }\n        \n        .person-chip {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          padding: 8px 12px;\n          background: var(--bg-secondary);\n          border-radius: 20px;\n          border: 1px solid var(--border-color);\n          transition: all 0.2s ease;\n        }\n        \n        .person-chip.online {\n          background: linear-gradient(135deg, rgba(16,185,129,0.1) 0%, rgba(16,185,129,0.05) 100%);\n          border-color: rgba(16,185,129,0.3);\n        }\n        \n        .person-chip.offline {\n          opacity: 0.6;\n        }\n        \n        .person-avatar-small {\n          width: 28px;\n          height: 28px;\n          border-radius: 50%;\n          background: linear-gradient(135deg, #667eea, #764ba2);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-size: 11px;\n          font-weight: 600;\n          position: relative;\n        }\n        \n        .person-avatar-small img {\n          width: 100%;\n          height: 100%;\n          border-radius: 50%;\n          object-fit: cover;\n        }\n        \n        .person-avatar-small .status-dot {\n          position: absolute;\n          bottom: -2px;\n          right: -2px;\n          width: 10px;\n          height: 10px;\n          border-radius: 50%;\n          border: 2px solid var(--bg-primary);\n        }\n        \n        .person-avatar-small .status-dot.online {\n          background: #10b981;\n        }\n        \n        .person-avatar-small .status-dot.offline {\n          background: #9ca3af;\n        }\n        \n        .person-info {\n          display: flex;\n          flex-direction: column;\n        }\n        \n        .person-name {\n          font-size: 13px;\n          font-weight: 500;\n          color: var(--text-primary);\n        }\n        \n        .person-time {\n          font-size: 11px;\n          color: var(--text-secondary);\n        }\n        \n        .person-role {\n          font-size: 10px;\n          color: #e11d48;\n          font-weight: 500;\n          margin-top: 2px;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          max-width: 120px;\n        }\n        \n        .meeting-suggestions {\n          margin-top: 20px;\n          padding: 16px;\n          background: linear-gradient(135deg, rgba(99,102,241,0.1) 0%, rgba(139,92,246,0.05) 100%);\n          border-radius: 12px;\n          border: 1px solid rgba(99,102,241,0.2);\n        }\n        \n        .meeting-suggestions h5 {\n          margin: 0 0 12px 0;\n          font-size: 14px;\n          font-weight: 600;\n          color: var(--text-primary);\n          display: flex;\n          align-items: center;\n          gap: 8px;\n        }\n        \n        .meeting-suggestions h5 svg {\n          color: #6366f1;\n        }\n        \n        .suggestion-list {\n          display: flex;\n          flex-wrap: wrap;\n          gap: 10px;\n        }\n        \n        .suggestion-pill {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          padding: 8px 14px;\n          background: white;\n          border-radius: 20px;\n          border: 1px solid rgba(99,102,241,0.3);\n          font-size: 13px;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n        \n        [data-theme=\"dark\"] .suggestion-pill {\n          background: rgba(30,41,59,0.8);\n        }\n        \n        .suggestion-pill:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 4px 12px rgba(99,102,241,0.2);\n        }\n        \n        .suggestion-pill .time {\n          font-weight: 600;\n          color: #6366f1;\n        }\n        \n        .suggestion-pill .availability {\n          font-size: 11px;\n          color: var(--text-secondary);\n          padding: 2px 6px;\n          background: rgba(16,185,129,0.1);\n          border-radius: 8px;\n          color: #059669;\n        }\n      </style>\n      \n      <div class=\"golden-hours-section\">\n        <div class=\"golden-hours-header\">\n          <h3>\n            <svg width=\"24\" height=\"24\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z\"/>\n            </svg>\n            Golden Hours\n          </h3>\n          <span class=\"golden-header-time\">\n            ${new Date().toLocaleTimeString('en-GB', { hour: '2-digit', minute: '2-digit' })} your time\n          </span>\n        </div>\n        \n        <div class=\"golden-hours-grid\">\n          <!-- Team Members Section -->\n          ${memberEntries.length > 0 ? `\n            <div class=\"golden-card\">\n              <h4>\n                <svg width=\"16\" height=\"16\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z\"/>\n                </svg>\n                Team Members\n                <span class=\"count\">${memberEntries.length}</span>\n                ${onlineMembers > 0 ? `<span class=\"online-badge\">‚óè ${onlineMembers} online</span>` : ''}\n              </h4>\n              \n              <!-- Team People List -->\n              <div class=\"people-list\">\n                ${memberEntries.map(e => {\n      const initials = e.name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();\n      return `\n                    <div class=\"person-chip ${e.isOnline ? 'online' : 'offline'}\">\n                      <div class=\"person-avatar-small\">\n                        ${e.avatarUrl ? `<img src=\"${escapeHtmlSimple(e.avatarUrl)}\" alt=\"${escapeHtmlSimple(e.name)}\">` : initials}\n                        <span class=\"status-dot ${e.isOnline ? 'online' : 'offline'}\"></span>\n                      </div>\n                      <div class=\"person-info\">\n                        <span class=\"person-name\">${escapeHtmlSimple(e.name)}</span>\n                        ${e.role ? `<span class=\"person-role\">${escapeHtmlSimple(e.role)}</span>` : ''}\n                        <span class=\"person-time\">${e.localTime || '--:--'} ${e.timezone.split('/').pop()?.replace(/_/g, ' ') || ''}</span>\n                      </div>\n                    </div>\n                  `;\n    }).join('')}\n              </div>\n              \n              ${renderTimezoneChart(memberEntries, memberGolden)}\n              ${renderGoldenSummary(memberGolden, memberEntries)}\n              \n              <!-- Team Meeting Suggestions -->\n              ${(() => {\n          const teamSuggestions = findBestMeetingTimes(memberEntries);\n          return teamSuggestions.length > 0 ? `\n                  <div class=\"meeting-suggestions\">\n                    <h5>\n                      <svg width=\"16\" height=\"16\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"/>\n                      </svg>\n                      Best Times for Team\n                    </h5>\n                    <div class=\"suggestion-list\">\n                      ${teamSuggestions.map((s, i) => `\n                        <div class=\"suggestion-pill\">\n                          <span class=\"suggestion-star\" style=\"--suggestion-star-color: ${i === 0 ? '#f59e0b' : 'var(--text-muted)'};\">${i === 0 ? '‚≠ê' : 'üïê'}</span>\n                          <span class=\"time\">${s.time}</span>\n                          <span class=\"availability\">${s.available}/${memberEntries.length}</span>\n                        </div>\n                      `).join('')}\n                    </div>\n                  </div>\n                ` : '';\n        })()}\n            </div>\n          ` : ''}\n          \n          <!-- Contacts Section -->\n          ${contactEntries.length > 0 ? `\n            <div class=\"golden-card\">\n              <h4>\n                <svg width=\"16\" height=\"16\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z\"/>\n                </svg>\n                Contacts\n                <span class=\"count\">${contactEntries.length}</span>\n                ${onlineContacts > 0 ? `<span class=\"online-badge\">‚óè ${onlineContacts} online</span>` : ''}\n              </h4>\n              \n              <!-- Contacts People List -->\n              <div class=\"people-list\">\n                ${contactEntries.map(e => {\n          const initials = e.name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();\n          return `\n                    <div class=\"person-chip ${e.isOnline ? 'online' : 'offline'}\">\n                      <div class=\"person-avatar-small\">\n                        ${e.avatarUrl ? `<img src=\"${escapeHtmlSimple(e.avatarUrl)}\" alt=\"${escapeHtmlSimple(e.name)}\">` : initials}\n                        <span class=\"status-dot ${e.isOnline ? 'online' : 'offline'}\"></span>\n                      </div>\n                      <div class=\"person-info\">\n                        <span class=\"person-name\">${escapeHtmlSimple(e.name)}</span>\n                        ${e.role ? `<span class=\"person-role\">${escapeHtmlSimple(e.role)}</span>` : ''}\n                        <span class=\"person-time\">${e.localTime || '--:--'} ${e.timezone.split('/').pop()?.replace(/_/g, ' ') || ''}</span>\n                      </div>\n                    </div>\n                  `;\n        }).join('')}\n              </div>\n              \n              ${renderTimezoneChart(contactEntries, contactGolden)}\n              ${renderGoldenSummary(contactGolden, contactEntries)}\n              \n              <!-- Contacts Meeting Suggestions -->\n              ${(() => {\n          const contactSuggestions = findBestMeetingTimes(contactEntries);\n          return contactSuggestions.length > 0 ? `\n                  <div class=\"meeting-suggestions\">\n                    <h5>\n                      <svg width=\"16\" height=\"16\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"/>\n                      </svg>\n                      Best Times for Contacts\n                    </h5>\n                    <div class=\"suggestion-list\">\n                      ${contactSuggestions.map((s, i) => `\n                        <div class=\"suggestion-pill\">\n                          <span class=\"suggestion-star\" style=\"--suggestion-star-color: ${i === 0 ? '#f59e0b' : 'var(--text-muted)'};\">${i === 0 ? '‚≠ê' : 'üïê'}</span>\n                          <span class=\"time\">${s.time}</span>\n                          <span class=\"availability\">${s.available}/${contactEntries.length}</span>\n                        </div>\n                      `).join('')}\n                    </div>\n                  </div>\n                ` : '';\n        })()}\n            </div>\n          ` : ''}\n        </div>\n        \n        <!-- Combined Section (only if both exist) -->\n        ${memberEntries.length > 0 && contactEntries.length > 0 ? `\n          <div class=\"golden-card golden-card-mt\">\n            <h4>\n              <svg width=\"16\" height=\"16\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"/>\n              </svg>\n              Combined: Team + Contacts\n              <span class=\"count\">${allEntries.length}</span>\n              <span class=\"online-badge\">‚óè ${onlineAll} online</span>\n            </h4>\n            ${renderGoldenSummary(allGolden, allEntries)}\n            \n            <!-- Combined Meeting Suggestions -->\n            ${meetingSuggestions.length > 0 ? `\n              <div class=\"meeting-suggestions\">\n                <h5>\n                  <svg width=\"16\" height=\"16\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"/>\n                  </svg>\n                  Best Times for Everyone\n                </h5>\n                <div class=\"suggestion-list\">\n                  ${meetingSuggestions.map((s, i) => `\n                    <div class=\"suggestion-pill\">\n                      <span class=\"suggestion-star\" style=\"--suggestion-star-color: ${i === 0 ? '#f59e0b' : 'var(--text-muted)'};\">${i === 0 ? '‚≠ê' : 'üïê'}</span>\n                      <span class=\"time\">${s.time}</span>\n                      <span class=\"availability\">${s.available}/${allEntries.length}</span>\n                    </div>\n                  `).join('')}\n                </div>\n              </div>\n            ` : ''}\n          </div>\n        ` : ''}\n      </div>\n    `;\n  } catch (error) {\n    console.error('Failed to load golden hours:', error);\n  }\n}\n\n/**\n * Calculate golden hours (9-18 work hours overlap) for a set of timezone entries\n */\nfunction calculateGoldenHours(entries: TimezoneEntry[]): { start: number; end: number } | null {\n  if (entries.length === 0) return null;\n\n  // Get unique timezones\n  const uniqueTimezones = [...new Set(entries.map(e => e.timezone))];\n\n  if (uniqueTimezones.length === 1) {\n    // All same timezone - work hours are 8-18\n    return { start: 8, end: 18 };\n  }\n\n  // Calculate UTC offsets for each timezone\n  const now = new Date();\n  const offsets: number[] = [];\n\n  for (const tz of uniqueTimezones) {\n    try {\n      const formatter = new Intl.DateTimeFormat('en-US', {\n        timeZone: tz,\n        hour: 'numeric',\n        hour12: false,\n      });\n      const localHour = parseInt(formatter.format(now), 10);\n      const utcHour = now.getUTCHours();\n      let offset = localHour - utcHour;\n      if (offset > 12) offset -= 24;\n      if (offset < -12) offset += 24;\n      offsets.push(offset);\n    } catch {\n      offsets.push(0); // Default to UTC if timezone is invalid\n    }\n  }\n\n  // Find overlap of 8-18 work hours across all timezones\n  // Convert each timezone's work hours to UTC, then find intersection\n  let overlapStart = 0;\n  let overlapEnd = 24;\n\n  for (const offset of offsets) {\n    // Work hours in UTC for this timezone\n    const workStartUtc = (8 - offset + 24) % 24;\n    const workEndUtc = (18 - offset + 24) % 24;\n\n    // Handle wraparound\n    if (workStartUtc < workEndUtc) {\n      overlapStart = Math.max(overlapStart, workStartUtc);\n      overlapEnd = Math.min(overlapEnd, workEndUtc);\n    }\n  }\n\n  if (overlapStart >= overlapEnd) {\n    return null; // No overlap\n  }\n\n  // Convert back to first timezone for display\n  const firstOffset = offsets[0];\n  return {\n    start: (overlapStart + firstOffset + 24) % 24,\n    end: (overlapEnd + firstOffset + 24) % 24,\n  };\n}\n\n/**\n * Render timezone chart showing work hours for each participant\n */\nfunction renderTimezoneChart(entries: TimezoneEntry[], golden: { start: number; end: number } | null): string {\n  // Get unique timezones with count\n  const tzCounts = new Map<string, number>();\n  for (const e of entries) {\n    tzCounts.set(e.timezone, (tzCounts.get(e.timezone) || 0) + 1);\n  }\n\n  const uniqueTzs = [...tzCounts.keys()].slice(0, 5); // Max 5 timezones\n\n  if (uniqueTzs.length === 0) {\n    return '<div class=\"no-overlap\">No timezone data available</div>';\n  }\n\n  const now = new Date();\n\n  return `\n    <div class=\"hour-labels\">\n      ${[0, 6, 12, 18, 24].map(h => `<span class=\"hour-label\">${h}</span>`).join('')}\n    </div>\n    <div class=\"timezone-bars\">\n      ${uniqueTzs.map(tz => {\n    // Calculate work hours position (9-18)\n    let offset = 0;\n    try {\n      const formatter = new Intl.DateTimeFormat('en-US', {\n        timeZone: tz,\n        hour: 'numeric',\n        hour12: false,\n      });\n      const localHour = parseInt(formatter.format(now), 10);\n      const utcHour = now.getUTCHours();\n      offset = localHour - utcHour;\n      if (offset > 12) offset -= 24;\n      if (offset < -12) offset += 24;\n    } catch { /* ignore */ }\n\n    // Work hours 9-18 in this timezone\n    const workStart = 9;\n    const workEnd = 18;\n    const workLeft = ((workStart) / 24) * 100;\n    const workWidth = ((workEnd - workStart) / 24) * 100;\n\n    // Display name\n    const displayTz = tz.split('/').pop()?.replace(/_/g, ' ') || tz;\n    const count = tzCounts.get(tz) || 1;\n\n    return `\n          <div class=\"timezone-row\">\n            <span class=\"tz-name\" title=\"${tz}\">${displayTz} ${count > 1 ? `(${count})` : ''}</span>\n            <div class=\"tz-bar-container\">\n              <div class=\"tz-bar work-hours\" style=\"--tz-left: ${workLeft}%; --tz-width: ${workWidth}%;\"></div>\n              ${golden ? `<div class=\"tz-bar golden\" style=\"--tz-left: ${(golden.start / 24) * 100}%; --tz-width: ${((golden.end - golden.start) / 24) * 100}%;\"></div>` : ''}\n            </div>\n          </div>\n        `;\n  }).join('')}\n    </div>\n  `;\n}\n\n/**\n * Render golden hours summary\n */\nfunction renderGoldenSummary(golden: { start: number; end: number } | null, entries: TimezoneEntry[]): string {\n  if (!golden) {\n    return `\n      <div class=\"golden-summary golden-summary-warning\">\n        <div class=\"golden-icon\">‚ö†</div>\n        <div class=\"golden-text\">\n          <div class=\"label\">No overlap found</div>\n          <div class=\"hours\">Timezones too far apart</div>\n        </div>\n      </div>\n    `;\n  }\n\n  const formatHour = (h: number) => `${h.toString().padStart(2, '0')}:00`;\n  const duration = golden.end - golden.start;\n\n  // Show participant avatars\n  const maxAvatars = 5;\n  const showEntries = entries.slice(0, maxAvatars);\n  const moreCount = entries.length - maxAvatars;\n\n  return `\n    <div class=\"golden-summary\">\n      <div class=\"golden-icon\">‚òÄÔ∏è</div>\n      <div class=\"golden-text\">\n        <div class=\"label\">Golden Hours</div>\n        <div class=\"hours\">${formatHour(golden.start)} - ${formatHour(golden.end)} (${duration}h overlap)</div>\n      </div>\n    </div>\n    <div class=\"participants-row\">\n      ${showEntries.map(e => {\n    const initials = e.name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase();\n    return `\n          <div class=\"participant-avatar\" title=\"${escapeHtmlSimple(e.name)}\">\n            ${e.avatarUrl ? `<img src=\"${escapeHtmlSimple(e.avatarUrl)}\" alt=\"${escapeHtmlSimple(e.name)}\">` : initials}\n          </div>\n        `;\n  }).join('')}\n      ${moreCount > 0 ? `<div class=\"participant-avatar more\">+${moreCount}</div>` : ''}\n    </div>\n  `;\n}\n\nfunction escapeHtmlSimple(str: string): string {\n  return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n}\n\n// Helper functions\nfunction getInitials(name: string): string {\n  return name\n    .split(/\\s+/)\n    .map(part => part[0])\n    .join('')\n    .toUpperCase()\n    .slice(0, 2) || '?';\n}\n\nfunction escapeHtml(str: string): string {\n  const div = document.createElement('div');\n  div.textContent = str;\n  return div.innerHTML;\n}\n\n/**\n * Mount dashboard to container\n */\nexport function mountDashboard(selector: string, props: DashboardProps = {}): HTMLElement | null {\n  const container = document.querySelector(selector);\n  if (!container) {\n    console.warn(`Dashboard: Container not found: ${selector}`);\n    return null;\n  }\n\n  const dashboard = createDashboard(props);\n  container.appendChild(dashboard);\n  return dashboard;\n}\n\nexport default createDashboard;\n"],"file":"Dashboard-D0L7-zA-.js"}